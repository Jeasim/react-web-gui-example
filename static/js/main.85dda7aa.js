!function(e){function t(i){if(n[i])return n[i].exports;var c=n[i]={i:i,l:!1,exports:{}};return e[i].call(c.exports,c,c.exports,t),c.l=!0,c.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/react-web-gui-example/",t(t.s=16)}([function(e,t,n){"use strict";e.exports=n(24)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(36);Object.defineProperty(t,"simpleTag",{enumerable:!0,get:function(){return i.simpleTag}});var c=n(37);Object.defineProperty(t,"withRipple",{enumerable:!0,get:function(){return c.withRipple}});var a=n(12);Object.defineProperty(t,"withTheme",{enumerable:!0,get:function(){return a.withTheme}});var r=n(40);Object.defineProperty(t,"noop",{enumerable:!0,get:function(){return r.noop}});var l=n(41);Object.defineProperty(t,"randomId",{enumerable:!0,get:function(){return l.randomId}});var o=n(5);Object.defineProperty(t,"withFoundation",{enumerable:!0,get:function(){return o.withFoundation}}),Object.defineProperty(t,"syncFoundationProp",{enumerable:!0,get:function(){return o.syncFoundationProp}})},function(e,t,n){var i,c;!function(){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++){var i=arguments[t];if(i){var c=typeof i;if("string"===c||"number"===c)e.push(i);else if(Array.isArray(i)&&i.length){var r=n.apply(null,i);r&&e.push(r)}else if("object"===c)for(var l in i)a.call(i,l)&&i[l]&&e.push(l)}}return e.join(" ")}var a={}.hasOwnProperty;"undefined"!==typeof e&&e.exports?(n.default=n,e.exports=n):(i=[],void 0!==(c=function(){return n}.apply(t,i))&&(e.exports=c))}()},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}Object.defineProperty(t,"__esModule",{value:!0}),t.Icon=t.IconRoot=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(0),u=i(s),d=n(2),g=function(e){return e&&e.__esModule?e:{default:e}}(d),I=n(6),b=i(I),p=n(14),C=n(1),m=n(15),h=t.IconRoot=(0,C.simpleTag)({displayName:"IconRoot",tag:"i"}),G=function(e){var t=e.content,n=l(e,["content"]);return u.createElement(h,n,t)},Z=function(e){var t=(e.content,l(e,["content"]));return u.createElement(h,t)},B=function(e){var t=e.content,n=l(e,["content"]);return u.createElement(h,Object.assign({},n,{tag:"img",src:t}))},y=function(e){var t=e.content,n=l(e,["content"]);return u.createElement(h,n,t)},X={ligature:G,className:Z,url:B,component:y,auto:void 0},A=t.Icon=function(e){function t(){return c(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),o(t,[{key:"componentWillMount",value:function(){this.providerOptions=(0,p.getProviderOptions)(this.context)}},{key:"render",value:function(){var e=this.props,t=e.use,n=e.children,i=e.render,c=e.strategy,a=e.prefix,r=e.basename,o=l(e,["use","children","render","strategy","prefix","basename"]),s=this.providerOptions,u=s.iconClassNameBase,d=s.iconClassNamePrefix,I=s.iconStrategy,b=s.iconRender,p=t||n,C=(0,m.getIconStrategy)(p,c||null,I||null),h=a||d,G=void 0===r?u:r,Z="className"===C&&"string"===typeof p?""+String(h)+p:null,B="custom"===C?i||b:C&&void 0!==X[C]?X[C]:void 0;return B?B(Object.assign({},o,{content:p,className:(0,g.default)(G,o.className,Z)})):(console.error("Icon: rendering not implemented for "+String(C)+"."),null)}}]),t}(u.PureComponent);Object.defineProperty(A,"displayName",{enumerable:!0,writable:!0,value:"Icon"}),Object.defineProperty(A,"defaultProps",{enumerable:!0,writable:!0,value:{use:void 0}}),Object.defineProperty(A,"contextTypes",{enumerable:!0,writable:!0,value:{RMWCOptions:b.object}}),t.default=A},function(e,t,n){"use strict";function i(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var c=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(e){i[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,l,o=i(e),s=1;s<arguments.length;s++){n=Object(arguments[s]);for(var u in n)a.call(n,u)&&(o[u]=n[u]);if(c){l=c(n);for(var d=0;d<l.length;d++)r.call(n,l[d])&&(o[l[d]]=n[l[d]])}}return o}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.withFoundation=t.syncFoundationProp=void 0;var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(0),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(o),u=function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;i<n?window.requestAnimationFrame(function(){return e(t,n,i+1)}):t()},d=function(e,t){Object.getOwnPropertyNames(t).forEach(function(n){if(!String(n).match(/^(?:constructor|prototype|arguments|caller|name|bind|call|apply|toString|length)$/)){var i=Object.getOwnPropertyDescriptor(t,n);void 0!==i&&Object.defineProperty(e,n,i)}})};t.syncFoundationProp=function(e,t,n){void 0!==e&&e!==t&&n()},t.withFoundation=function(e){var t=e.constructor,n=e.adapter,o=void 0===n?{}:n,g=e.refs,I=void 0===g?["root_"]:g,b=function(e){function t(e){i(this,t);var n=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.foundationRefs=I.reduce(function(t,i){var c=e.elementRef&&e.elementRef.refName_===i?"elementRef":i;return t[i]=function(t){t&&(n[i]=t,e[c]&&"object"===("undefined"===typeof e?"undefined":r(e))&&e[c](t))},t[i].refName_=i,t},{}),n.syncWithProps=n.syncWithProps.bind(n),n}return a(t,e),l(t,[{key:"componentDidMount",value:function(){this.initFoundation()}},{key:"componentWillReceiveProps",value:function(e){this._safeSyncWithProps(e)}},{key:"componentWillUnmount",value:function(){var e=this;this.destroyComponent(),u(function(){I.forEach(function(t){e[t]&&(e[t]=void 0)})},3)}},{key:"_safeSyncWithProps",value:function(e){this.foundation_&&this.syncWithProps(e)}},{key:"initFoundation",value:function(){this.foundation_=this.getDefaultFoundation();for(var e in o){var t=o[e];this.foundation_.adapter_[e]=t.bind(this)}this.initialize(),this.foundation_&&this.foundation_.init(),this.initialSyncWithDOM(),this._safeSyncWithProps(this.props),"function"===typeof this.props.apiRef&&this.props.apiRef(this)}},{key:"destroyComponent",value:function(){this.destroy(),this.foundation_&&this.foundation_.destroy(),this.foundation_=null}},{key:"syncWithProps",value:function(e){}},{key:"initialize",value:function(){}},{key:"initialSyncWithDOM",value:function(){}},{key:"destroy",value:function(){}},{key:"getDefaultFoundation",value:function(){return{adapter_:{},init:function(){},destroy:function(){}}}},{key:"emit",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=void 0;"function"===typeof CustomEvent?i=new CustomEvent(e,{detail:t,bubbles:n}):(i=document.createEvent("CustomEvent"),i.initCustomEvent(e,n,!1,t));var c=e.split(":").slice(-1).pop()||"",a="on"+c.charAt(0).toUpperCase()+c.slice(1);return this.props[a]&&this.props[a](i),this._safeSyncWithProps(this.props),i}},{key:"listen",value:function(e,t){var n=this.root_;n&&n.addEventListener(e,t)}},{key:"unlisten",value:function(e,t){var n=this.root_;n&&n.removeEventListener(e,t)}}]),t}(s.Component);return d(b.prototype,t.prototype),b}},function(e,t,n){e.exports=n(42)()},function(e,t,n){"use strict";function i(){}function c(e){try{return e.then}catch(e){return m=e,h}}function a(e,t){try{return e(t)}catch(e){return m=e,h}}function r(e,t,n){try{e(t,n)}catch(e){return m=e,h}}function l(e){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");if("function"!==typeof e)throw new TypeError("Promise constructor's argument is not a function");this._75=0,this._83=0,this._18=null,this._38=null,e!==i&&p(e,this)}function o(e,t,n){return new e.constructor(function(c,a){var r=new l(i);r.then(c,a),s(e,new b(t,n,r))})}function s(e,t){for(;3===e._83;)e=e._18;if(l._47&&l._47(e),0===e._83)return 0===e._75?(e._75=1,void(e._38=t)):1===e._75?(e._75=2,void(e._38=[e._38,t])):void e._38.push(t);u(e,t)}function u(e,t){C(function(){var n=1===e._83?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._83?d(t.promise,e._18):g(t.promise,e._18));var i=a(n,e._18);i===h?g(t.promise,m):d(t.promise,i)})}function d(e,t){if(t===e)return g(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"===typeof t||"function"===typeof t)){var n=c(t);if(n===h)return g(e,m);if(n===e.then&&t instanceof l)return e._83=3,e._18=t,void I(e);if("function"===typeof n)return void p(n.bind(t),e)}e._83=1,e._18=t,I(e)}function g(e,t){e._83=2,e._18=t,l._71&&l._71(e,t),I(e)}function I(e){if(1===e._75&&(s(e,e._38),e._38=null),2===e._75){for(var t=0;t<e._38.length;t++)s(e,e._38[t]);e._38=null}}function b(e,t,n){this.onFulfilled="function"===typeof e?e:null,this.onRejected="function"===typeof t?t:null,this.promise=n}function p(e,t){var n=!1,i=r(e,function(e){n||(n=!0,d(t,e))},function(e){n||(n=!0,g(t,e))});n||i!==h||(n=!0,g(t,m))}var C=n(19),m=null,h={};e.exports=l,l._47=null,l._71=null,l._44=i,l.prototype.then=function(e,t){if(this.constructor!==l)return o(this,e,t);var n=new l(i);return s(this,new b(e,t,n)),n}},function(e,t,n){"use strict";function i(e,t,n,i,a,r,l,o){if(c(t),!e){var s;if(void 0===t)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,i,a,r,l,o],d=0;s=new Error(t.replace(/%s/g,function(){return u[d++]})),s.name="Invariant Violation"}throw s.framesToPop=1,s}}var c=function(e){};e.exports=i},function(e,t,n){"use strict";var i={};e.exports=i},function(e,t,n){"use strict";function i(e){return function(){return e}}var c=function(){};c.thatReturns=i,c.thatReturnsFalse=i(!1),c.thatReturnsTrue=i(!0),c.thatReturnsNull=i(null),c.thatReturnsThis=function(){return this},c.thatReturnsArgument=function(e){return e},e.exports=c},function(e,t,n){"use strict";function i(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}i(),e.exports=n(25)},function(e,t,n){"use strict";function i(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}Object.defineProperty(t,"__esModule",{value:!0}),t.withTheme=t.parseThemeOptions=void 0;var c=n(0),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(c),r=n(2),l=function(e){return e&&e.__esModule?e:{default:e}}(r),o=n(13),s=t.parseThemeOptions=function(e){if(e){return(Array.isArray(e)?e:e.split(" ")).map(function(e){return"mdc-theme--"+(0,o.toDashCase)(e)})}return[]},u=function(e){var t=function(t){var n=t.theme,c=t.className,r=i(t,["theme","className"]);if(n){var o=(0,l.default)(c,s(n));return a.createElement(e,Object.assign({className:o},r))}return a.createElement(e,Object.assign({className:c},r))};return t.displayName="withTheme",t};t.withTheme=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.toDashCase=function(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.RMWCProvider=t.getProviderOptions=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(0),s=i(o),u=n(6),d=i(u),g={buttonDefaultRipple:!0,listItemDefaultRipple:!0,iconClassNameBase:"material-icons",iconClassNamePrefix:"",iconStrategy:"auto",iconRender:void 0},I=(t.getProviderOptions=function(e){return e&&e.RMWCOptions?e.RMWCOptions:g},t.RMWCProvider=function(e){function t(e){c(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.options=n.buildOptions(e),n}return r(t,e),l(t,[{key:"getChildContext",value:function(){return{RMWCOptions:this.options}}},{key:"componentWillUpdate",value:function(e){this.options=this.buildOptions(e)}},{key:"buildOptions",value:function(e){return Object.assign({},g,e||{})}},{key:"render",value:function(){return this.props.children}}]),t}(s.Component));Object.defineProperty(I,"defaultProps",{enumerable:!0,writable:!0,value:g}),Object.defineProperty(I,"childContextTypes",{enumerable:!0,writable:!0,value:{RMWCOptions:d.object}}),t.default=I},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getIconStrategy=void 0;var i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=n(0),a=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(c),function(e){return"string"===typeof e&&(e.startsWith("/")||e.startsWith("http://")||e.startsWith("https://"))?"url":"object"===("undefined"===typeof e?"undefined":i(e))?"component":"ligature"});t.getIconStrategy=function(e,t,n){return t=t||n,"auto"===t?a(e):t}},function(e,t,n){n(17),e.exports=n(23)},function(e,t,n){"use strict";"undefined"===typeof Promise&&(n(18).enable(),window.Promise=n(21)),n(22),Object.assign=n(4)},function(e,t,n){"use strict";function i(){s=!1,l._47=null,l._71=null}function c(e){function t(t){(e.allRejections||r(d[t].error,e.whitelist||o))&&(d[t].displayId=u++,e.onUnhandled?(d[t].logged=!0,e.onUnhandled(d[t].displayId,d[t].error)):(d[t].logged=!0,a(d[t].displayId,d[t].error)))}function n(t){d[t].logged&&(e.onHandled?e.onHandled(d[t].displayId,d[t].error):d[t].onUnhandled||(console.warn("Promise Rejection Handled (id: "+d[t].displayId+"):"),console.warn('  This means you can ignore any previous messages of the form "Possible Unhandled Promise Rejection" with id '+d[t].displayId+".")))}e=e||{},s&&i(),s=!0;var c=0,u=0,d={};l._47=function(e){2===e._83&&d[e._56]&&(d[e._56].logged?n(e._56):clearTimeout(d[e._56].timeout),delete d[e._56])},l._71=function(e,n){0===e._75&&(e._56=c++,d[e._56]={displayId:null,error:n,timeout:setTimeout(t.bind(null,e._56),r(n,o)?100:2e3),logged:!1})}}function a(e,t){console.warn("Possible Unhandled Promise Rejection (id: "+e+"):"),((t&&(t.stack||t))+"").split("\n").forEach(function(e){console.warn("  "+e)})}function r(e,t){return t.some(function(t){return e instanceof t})}var l=n(7),o=[ReferenceError,TypeError,RangeError],s=!1;t.disable=i,t.enable=c},function(e,t,n){"use strict";(function(t){function n(e){r.length||(a(),l=!0),r[r.length]=e}function i(){for(;o<r.length;){var e=o;if(o+=1,r[e].call(),o>s){for(var t=0,n=r.length-o;t<n;t++)r[t]=r[t+o];r.length-=o,o=0}}r.length=0,o=0,l=!1}function c(e){return function(){function t(){clearTimeout(n),clearInterval(i),e()}var n=setTimeout(t,0),i=setInterval(t,50)}}e.exports=n;var a,r=[],l=!1,o=0,s=1024,u="undefined"!==typeof t?t:self,d=u.MutationObserver||u.WebKitMutationObserver;a="function"===typeof d?function(e){var t=1,n=new d(e),i=document.createTextNode("");return n.observe(i,{characterData:!0}),function(){t=-t,i.data=t}}(i):c(i),n.requestFlush=a,n.makeRequestCallFromTimer=c}).call(t,n(20))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"===typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";function i(e){var t=new c(c._44);return t._83=1,t._18=e,t}var c=n(7);e.exports=c;var a=i(!0),r=i(!1),l=i(null),o=i(void 0),s=i(0),u=i("");c.resolve=function(e){if(e instanceof c)return e;if(null===e)return l;if(void 0===e)return o;if(!0===e)return a;if(!1===e)return r;if(0===e)return s;if(""===e)return u;if("object"===typeof e||"function"===typeof e)try{var t=e.then;if("function"===typeof t)return new c(t.bind(e))}catch(e){return new c(function(t,n){n(e)})}return i(e)},c.all=function(e){var t=Array.prototype.slice.call(e);return new c(function(e,n){function i(r,l){if(l&&("object"===typeof l||"function"===typeof l)){if(l instanceof c&&l.then===c.prototype.then){for(;3===l._83;)l=l._18;return 1===l._83?i(r,l._18):(2===l._83&&n(l._18),void l.then(function(e){i(r,e)},n))}var o=l.then;if("function"===typeof o){return void new c(o.bind(l)).then(function(e){i(r,e)},n)}}t[r]=l,0===--a&&e(t)}if(0===t.length)return e([]);for(var a=t.length,r=0;r<t.length;r++)i(r,t[r])})},c.reject=function(e){return new c(function(t,n){n(e)})},c.race=function(e){return new c(function(t,n){e.forEach(function(e){c.resolve(e).then(t,n)})})},c.prototype.catch=function(e){return this.then(null,e)}},function(e,t){!function(e){"use strict";function t(e){if("string"!==typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function n(e){return"string"!==typeof e&&(e=String(e)),e}function i(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return m.iterable&&(t[Symbol.iterator]=function(){return t}),t}function c(e){this.map={},e instanceof c?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function a(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function r(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function l(e){var t=new FileReader,n=r(t);return t.readAsArrayBuffer(e),n}function o(e){var t=new FileReader,n=r(t);return t.readAsText(e),n}function s(e){for(var t=new Uint8Array(e),n=new Array(t.length),i=0;i<t.length;i++)n[i]=String.fromCharCode(t[i]);return n.join("")}function u(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function d(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"===typeof e)this._bodyText=e;else if(m.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(m.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(m.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(m.arrayBuffer&&m.blob&&G(e))this._bodyArrayBuffer=u(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!m.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!Z(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=u(e)}else this._bodyText="";this.headers.get("content-type")||("string"===typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):m.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},m.blob&&(this.blob=function(){var e=a(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?a(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(l)}),this.text=function(){var e=a(this);if(e)return e;if(this._bodyBlob)return o(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(s(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},m.formData&&(this.formData=function(){return this.text().then(b)}),this.json=function(){return this.text().then(JSON.parse)},this}function g(e){var t=e.toUpperCase();return B.indexOf(t)>-1?t:e}function I(e,t){t=t||{};var n=t.body;if(e instanceof I){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new c(e.headers)),this.method=e.method,this.mode=e.mode,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new c(t.headers)),this.method=g(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function b(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),i=n.shift().replace(/\+/g," "),c=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(i),decodeURIComponent(c))}}),t}function p(e){var t=new c;return e.split(/\r?\n/).forEach(function(e){var n=e.split(":"),i=n.shift().trim();if(i){var c=n.join(":").trim();t.append(i,c)}}),t}function C(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new c(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var m={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(m.arrayBuffer)var h=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],G=function(e){return e&&DataView.prototype.isPrototypeOf(e)},Z=ArrayBuffer.isView||function(e){return e&&h.indexOf(Object.prototype.toString.call(e))>-1};c.prototype.append=function(e,i){e=t(e),i=n(i);var c=this.map[e];this.map[e]=c?c+","+i:i},c.prototype.delete=function(e){delete this.map[t(e)]},c.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},c.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},c.prototype.set=function(e,i){this.map[t(e)]=n(i)},c.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},c.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),i(e)},c.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),i(e)},c.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),i(e)},m.iterable&&(c.prototype[Symbol.iterator]=c.prototype.entries);var B=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];I.prototype.clone=function(){return new I(this,{body:this._bodyInit})},d.call(I.prototype),d.call(C.prototype),C.prototype.clone=function(){return new C(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new c(this.headers),url:this.url})},C.error=function(){var e=new C(null,{status:0,statusText:""});return e.type="error",e};var y=[301,302,303,307,308];C.redirect=function(e,t){if(-1===y.indexOf(t))throw new RangeError("Invalid status code");return new C(null,{status:t,headers:{location:e}})},e.Headers=c,e.Request=I,e.Response=C,e.fetch=function(e,t){return new Promise(function(n,i){var c=new I(e,t),a=new XMLHttpRequest;a.onload=function(){var e={status:a.status,statusText:a.statusText,headers:p(a.getAllResponseHeaders()||"")};e.url="responseURL"in a?a.responseURL:e.headers.get("X-Request-URL");var t="response"in a?a.response:a.responseText;n(new C(t,e))},a.onerror=function(){i(new TypeError("Network request failed"))},a.ontimeout=function(){i(new TypeError("Network request failed"))},a.open(c.method,c.url,!0),"include"===c.credentials&&(a.withCredentials=!0),"responseType"in a&&m.blob&&(a.responseType="blob"),c.headers.forEach(function(e,t){a.setRequestHeader(t,e)}),a.send("undefined"===typeof c._bodyInit?null:c._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!==typeof self?self:this)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),c=n.n(i),a=n(11),r=n.n(a),l=n(32),o=(n.n(l),n(33)),s=n(64);r.a.render(c.a.createElement(o.a,null),document.getElementById("root")),Object(s.a)()},function(e,t,n){"use strict";function i(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=0;i<t;i++)n+="&args[]="+encodeURIComponent(arguments[i+1]);h(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}function c(e,t,n){this.props=e,this.context=t,this.refs=G,this.updater=n||N}function a(){}function r(e,t,n){this.props=e,this.context=t,this.refs=G,this.updater=n||N}function l(e,t,n){var i=void 0,c={},a=null,r=null;if(null!=t)for(i in void 0!==t.ref&&(r=t.ref),void 0!==t.key&&(a=""+t.key),t)S.call(t,i)&&!x.hasOwnProperty(i)&&(c[i]=t[i]);var l=arguments.length-2;if(1===l)c.children=n;else if(1<l){for(var o=Array(l),s=0;s<l;s++)o[s]=arguments[s+2];c.children=o}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===c[i]&&(c[i]=l[i]);return{$$typeof:y,type:e,key:a,ref:r,props:c,_owner:Y.current}}function o(e){return"object"===typeof e&&null!==e&&e.$$typeof===y}function s(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}function u(e,t,n,i){if(T.length){var c=T.pop();return c.result=e,c.keyPrefix=t,c.func=n,c.context=i,c.count=0,c}return{result:e,keyPrefix:t,func:n,context:i,count:0}}function d(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>T.length&&T.push(e)}function g(e,t,n,c){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var r=!1;if(null===e)r=!0;else switch(a){case"string":case"number":r=!0;break;case"object":switch(e.$$typeof){case y:case X:r=!0}}if(r)return n(c,e,""===t?"."+I(e,0):t),1;if(r=0,t=""===t?".":t+":",Array.isArray(e))for(var l=0;l<e.length;l++){a=e[l];var o=t+I(a,l);r+=g(a,o,n,c)}else if(null===e||"undefined"===typeof e?o=null:(o=f&&e[f]||e["@@iterator"],o="function"===typeof o?o:null),"function"===typeof o)for(e=o.call(e),l=0;!(a=e.next()).done;)a=a.value,o=t+I(a,l++),r+=g(a,o,n,c);else"object"===a&&(n=""+e,i("31","[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n,""));return r}function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?s(e.key):t.toString(36)}function b(e,t){e.func.call(e.context,t,e.count++)}function p(e,t,n){var i=e.result,c=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?C(e,i,n,Z.thatReturnsArgument):null!=e&&(o(e)&&(t=c+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(J,"$&/")+"/")+n,e={$$typeof:y,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}),i.push(e))}function C(e,t,n,i,c){var a="";null!=n&&(a=(""+n).replace(J,"$&/")+"/"),t=u(t,a,i,c),null==e||g(e,"",p,t),d(t)}var m=n(4),h=n(8),G=n(9),Z=n(10),B="function"===typeof Symbol&&Symbol.for,y=B?Symbol.for("react.element"):60103,X=B?Symbol.for("react.portal"):60106,A=B?Symbol.for("react.fragment"):60107,V=B?Symbol.for("react.strict_mode"):60108,F=B?Symbol.for("react.profiler"):60114,Q=B?Symbol.for("react.provider"):60109,W=B?Symbol.for("react.context"):60110,v=B?Symbol.for("react.async_mode"):60111,R=B?Symbol.for("react.forward_ref"):60112;B&&Symbol.for("react.timeout");var f="function"===typeof Symbol&&Symbol.iterator,N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}};c.prototype.isReactComponent={},c.prototype.setState=function(e,t){"object"!==typeof e&&"function"!==typeof e&&null!=e&&i("85"),this.updater.enqueueSetState(this,e,t,"setState")},c.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},a.prototype=c.prototype;var U=r.prototype=new a;U.constructor=r,m(U,c.prototype),U.isPureReactComponent=!0;var Y={current:null},S=Object.prototype.hasOwnProperty,x={key:!0,ref:!0,__self:!0,__source:!0},J=/\/+/g,T=[],H={Children:{map:function(e,t,n){if(null==e)return e;var i=[];return C(e,i,null,t,n),i},forEach:function(e,t,n){if(null==e)return e;t=u(null,null,t,n),null==e||g(e,"",b,t),d(t)},count:function(e){return null==e?0:g(e,"",Z.thatReturnsNull,null)},toArray:function(e){var t=[];return C(e,t,null,Z.thatReturnsArgument),t},only:function(e){return o(e)||i("143"),e}},createRef:function(){return{current:null}},Component:c,PureComponent:r,createContext:function(e,t){return void 0===t&&(t=null),e={$$typeof:W,_calculateChangedBits:t,_defaultValue:e,_currentValue:e,_currentValue2:e,_changedBits:0,_changedBits2:0,Provider:null,Consumer:null},e.Provider={$$typeof:Q,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:R,render:e}},Fragment:A,StrictMode:V,unstable_AsyncMode:v,unstable_Profiler:F,createElement:l,cloneElement:function(e,t,n){(null===e||void 0===e)&&i("267",e);var c=void 0,a=m({},e.props),r=e.key,l=e.ref,o=e._owner;if(null!=t){void 0!==t.ref&&(l=t.ref,o=Y.current),void 0!==t.key&&(r=""+t.key);var s=void 0;e.type&&e.type.defaultProps&&(s=e.type.defaultProps);for(c in t)S.call(t,c)&&!x.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}if(1===(c=arguments.length-2))a.children=n;else if(1<c){s=Array(c);for(var u=0;u<c;u++)s[u]=arguments[u+2];a.children=s}return{$$typeof:y,type:e.type,key:r,ref:l,props:a,_owner:o}},createFactory:function(e){var t=l.bind(null,e);return t.type=e,t},isValidElement:o,version:"16.4.1",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:Y,assign:m}},k={default:H},L=k&&H||k;e.exports=L.default?L.default:L},function(e,t,n){"use strict";function i(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=0;i<t;i++)n+="&args[]="+encodeURIComponent(arguments[i+1]);Yi(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}function c(e,t,n,i,c,a,r,l,o){this._hasCaughtError=!1,this._caughtError=null;var s=Array.prototype.slice.call(arguments,3);try{t.apply(n,s)}catch(e){this._caughtError=e,this._hasCaughtError=!0}}function a(){if(zi._hasRethrowError){var e=zi._rethrowError;throw zi._rethrowError=null,zi._hasRethrowError=!1,e}}function r(){if(Ei)for(var e in Oi){var t=Oi[e],n=Ei.indexOf(e);if(-1<n||i("96",e),!Di[n]){t.extractEvents||i("97",e),Di[n]=t,n=t.eventTypes;for(var c in n){var a=void 0,r=n[c],o=t,s=c;ji.hasOwnProperty(s)&&i("99",s),ji[s]=r;var u=r.phasedRegistrationNames;if(u){for(a in u)u.hasOwnProperty(a)&&l(u[a],o,s);a=!0}else r.registrationName?(l(r.registrationName,o,s),a=!0):a=!1;a||i("98",c,e)}}}}function l(e,t,n){_i[e]&&i("100",e),_i[e]=t,Mi[e]=t.eventTypes[n].dependencies}function o(e){Ei&&i("101"),Ei=Array.prototype.slice.call(e),r()}function s(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var c=e[t];Oi.hasOwnProperty(t)&&Oi[t]===c||(Oi[t]&&i("102",t),Oi[t]=c,n=!0)}n&&r()}function u(e,t,n,i){t=e.type||"unknown-event",e.currentTarget=$i(i),zi.invokeGuardedCallbackAndCatchFirstError(t,n,void 0,e),e.currentTarget=null}function d(e,t){return null==t&&i("30"),null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function g(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}function I(e,t){if(e){var n=e._dispatchListeners,i=e._dispatchInstances;if(Array.isArray(n))for(var c=0;c<n.length&&!e.isPropagationStopped();c++)u(e,t,n[c],i[c]);else n&&u(e,t,n,i);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function b(e){return I(e,!0)}function p(e){return I(e,!1)}function C(e,t){var n=e.stateNode;if(!n)return null;var c=Pi(n);if(!c)return null;n=c[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(c=!c.disabled)||(e=e.type,c=!("button"===e||"input"===e||"select"===e||"textarea"===e)),e=!c;break e;default:e=!1}return e?null:(n&&"function"!==typeof n&&i("231",t,typeof n),n)}function m(e,t){null!==e&&(ec=d(ec,e)),e=ec,ec=null,e&&(t?g(e,b):g(e,p),ec&&i("95"),zi.rethrowCaughtError())}function h(e,t,n,i){for(var c=null,a=0;a<Di.length;a++){var r=Di[a];r&&(r=r.extractEvents(e,t,n,i))&&(c=d(c,r))}m(c,!1)}function G(e){if(e[cc])return e[cc];for(;!e[cc];){if(!e.parentNode)return null;e=e.parentNode}return e=e[cc],5===e.tag||6===e.tag?e:null}function Z(e){if(5===e.tag||6===e.tag)return e.stateNode;i("33")}function B(e){return e[ac]||null}function y(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function X(e,t,n){for(var i=[];e;)i.push(e),e=y(e);for(e=i.length;0<e--;)t(i[e],"captured",n);for(e=0;e<i.length;e++)t(i[e],"bubbled",n)}function A(e,t,n){(t=C(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=d(n._dispatchListeners,t),n._dispatchInstances=d(n._dispatchInstances,e))}function V(e){e&&e.dispatchConfig.phasedRegistrationNames&&X(e._targetInst,A,e)}function F(e){if(e&&e.dispatchConfig.phasedRegistrationNames){var t=e._targetInst;t=t?y(t):null,X(t,A,e)}}function Q(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=C(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=d(n._dispatchListeners,t),n._dispatchInstances=d(n._dispatchInstances,e))}function W(e){e&&e.dispatchConfig.registrationName&&Q(e._targetInst,null,e)}function v(e){g(e,V)}function R(e,t,n,i){if(n&&i)e:{for(var c=n,a=i,r=0,l=c;l;l=y(l))r++;l=0;for(var o=a;o;o=y(o))l++;for(;0<r-l;)c=y(c),r--;for(;0<l-r;)a=y(a),l--;for(;r--;){if(c===a||c===a.alternate)break e;c=y(c),a=y(a)}c=null}else c=null;for(a=c,c=[];n&&n!==a&&(null===(r=n.alternate)||r!==a);)c.push(n),n=y(n);for(n=[];i&&i!==a&&(null===(r=i.alternate)||r!==a);)n.push(i),i=y(i);for(i=0;i<c.length;i++)Q(c[i],"bubbled",e);for(e=n.length;0<e--;)Q(n[e],"captured",t)}function f(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n["ms"+e]="MS"+t,n["O"+e]="o"+t.toLowerCase(),n}function N(e){if(sc[e])return sc[e];if(!oc[e])return e;var t,n=oc[e];for(t in n)if(n.hasOwnProperty(t)&&t in uc)return sc[e]=n[t];return e}function U(){return!Cc&&xi.canUseDOM&&(Cc="textContent"in document.documentElement?"textContent":"innerText"),Cc}function Y(){if(mc._fallbackText)return mc._fallbackText;var e,t,n=mc._startText,i=n.length,c=S(),a=c.length;for(e=0;e<i&&n[e]===c[e];e++);var r=i-e;for(t=1;t<=r&&n[i-t]===c[a-t];t++);return mc._fallbackText=c.slice(e,1<t?1-t:void 0),mc._fallbackText}function S(){return"value"in mc._root?mc._root.value:mc._root[U()]}function x(e,t,n,i){this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface;for(var c in e)e.hasOwnProperty(c)&&((t=e[c])?this[c]=t(n):"target"===c?this.target=i:this[c]=n[c]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Ti.thatReturnsTrue:Ti.thatReturnsFalse,this.isPropagationStopped=Ti.thatReturnsFalse,this}function J(e,t,n,i){if(this.eventPool.length){var c=this.eventPool.pop();return this.call(c,e,t,n,i),c}return new this(e,t,n,i)}function T(e){e instanceof this||i("223"),e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function H(e){e.eventPool=[],e.getPooled=J,e.release=T}function k(e,t){switch(e){case"keyup":return-1!==yc.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function L(e){return e=e.detail,"object"===typeof e&&"data"in e?e.data:null}function w(e,t){switch(e){case"compositionend":return L(t);case"keypress":return 32!==t.which?null:(vc=!0,Qc);case"textInput":return e=t.data,e===Qc&&vc?null:e;default:return null}}function z(e,t){if(Rc)return"compositionend"===e||!Xc&&k(e,t)?(e=Y(),mc._root=null,mc._startText=null,mc._fallbackText=null,Rc=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fc?null:t.data;default:return null}}function E(e){if(e=qi(e)){Nc&&"function"===typeof Nc.restoreControlledState||i("194");var t=Pi(e.stateNode);Nc.restoreControlledState(e.stateNode,e.type,t)}}function O(e){Yc?Sc?Sc.push(e):Sc=[e]:Yc=e}function D(){return null!==Yc||null!==Sc}function j(){if(Yc){var e=Yc,t=Sc;if(Sc=Yc=null,E(e),t)for(e=0;e<t.length;e++)E(t[e])}}function _(e,t){return e(t)}function M(e,t,n){return e(t,n)}function K(){}function P(e,t){if(Jc)return e(t);Jc=!0;try{return _(e,t)}finally{Jc=!1,D()&&(K(),j())}}function q(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Tc[e.type]:"textarea"===t}function $(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function ee(e,t){return!(!xi.canUseDOM||t&&!("addEventListener"in document))&&(e="on"+e,t=e in document,t||(t=document.createElement("div"),t.setAttribute(e,"return;"),t="function"===typeof t[e]),t)}function te(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ne(e){var t=te(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var c=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(e){i=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ie(e){e._valueTracker||(e._valueTracker=ne(e))}function ce(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=te(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function ae(e){return null===e||"undefined"===typeof e?null:(e=Pc&&e[Pc]||e["@@iterator"],"function"===typeof e?e:null)}function re(e){var t=e.type;if("function"===typeof t)return t.displayName||t.name;if("string"===typeof t)return t;switch(t){case _c:return"AsyncMode";case jc:return"Context.Consumer";case zc:return"ReactFragment";case wc:return"ReactPortal";case Oc:return"Profiler("+e.pendingProps.id+")";case Dc:return"Context.Provider";case Ec:return"StrictMode";case Kc:return"Timeout"}if("object"===typeof t&&null!==t)switch(t.$$typeof){case Mc:return e=t.render.displayName||t.render.name||"",""!==e?"ForwardRef("+e+")":"ForwardRef"}return null}function le(e){var t="";do{e:switch(e.tag){case 0:case 1:case 2:case 5:var n=e._debugOwner,i=e._debugSource,c=re(e),a=null;n&&(a=re(n)),n=i,c="\n    in "+(c||"Unknown")+(n?" (at "+n.fileName.replace(/^.*[\\\/]/,"")+":"+n.lineNumber+")":a?" (created by "+a+")":"");break e;default:c=""}t+=c,e=e.return}while(e);return t}function oe(e){return!!ea.hasOwnProperty(e)||!$c.hasOwnProperty(e)&&(qc.test(e)?ea[e]=!0:($c[e]=!0,!1))}function se(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}function ue(e,t,n,i){if(null===t||"undefined"===typeof t||se(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function de(e,t,n,i,c){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=c,this.mustUseProperty=n,this.propertyName=e,this.type=t}function ge(e){return e[1].toUpperCase()}function Ie(e,t,n,i){var c=ta.hasOwnProperty(t)?ta[t]:null;(null!==c?0===c.type:!i&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(ue(t,n,c,i)&&(n=null),i||null===c?oe(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):c.mustUseProperty?e[c.propertyName]=null===n?3!==c.type&&"":n:(t=c.attributeName,i=c.attributeNamespace,null===n?e.removeAttribute(t):(c=c.type,n=3===c||4===c&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}function be(e,t){var n=t.checked;return Ji({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function pe(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=Ze(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Ce(e,t){null!=(t=t.checked)&&Ie(e,"checked",t,!1)}function me(e,t){Ce(e,t);var n=Ze(t.value);null!=n&&("number"===t.type?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n)),t.hasOwnProperty("value")?Ge(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ge(e,t.type,Ze(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function he(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){t=""+e._wrapperState.initialValue;var i=e.value;n||t===i||(e.value=t),e.defaultValue=t}n=e.name,""!==n&&(e.name=""),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!e.defaultChecked,""!==n&&(e.name=n)}function Ge(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function Ze(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Be(e,t,n){return e=x.getPooled(ia.change,e,t,n),e.type="change",O(n),v(e),e}function ye(e){m(e,!1)}function Xe(e){if(ce(Z(e)))return e}function Ae(e,t){if("change"===e)return t}function Ve(){ca&&(ca.detachEvent("onpropertychange",Fe),aa=ca=null)}function Fe(e){"value"===e.propertyName&&Xe(aa)&&(e=Be(aa,e,$(e)),P(ye,e))}function Qe(e,t,n){"focus"===e?(Ve(),ca=t,aa=n,ca.attachEvent("onpropertychange",Fe)):"blur"===e&&Ve()}function We(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xe(aa)}function ve(e,t){if("click"===e)return Xe(t)}function Re(e,t){if("input"===e||"change"===e)return Xe(t)}function fe(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=sa[e])&&!!t[e]}function Ne(){return fe}function Ue(e){var t=e;if(e.alternate)for(;t.return;)t=t.return;else{if(0!==(2&t.effectTag))return 1;for(;t.return;)if(t=t.return,0!==(2&t.effectTag))return 1}return 3===t.tag?2:3}function Ye(e){2!==Ue(e)&&i("188")}function Se(e){var t=e.alternate;if(!t)return t=Ue(e),3===t&&i("188"),1===t?null:e;for(var n=e,c=t;;){var a=n.return,r=a?a.alternate:null;if(!a||!r)break;if(a.child===r.child){for(var l=a.child;l;){if(l===n)return Ye(a),e;if(l===c)return Ye(a),t;l=l.sibling}i("188")}if(n.return!==c.return)n=a,c=r;else{l=!1;for(var o=a.child;o;){if(o===n){l=!0,n=a,c=r;break}if(o===c){l=!0,c=a,n=r;break}o=o.sibling}if(!l){for(o=r.child;o;){if(o===n){l=!0,n=r,c=a;break}if(o===c){l=!0,c=r,n=a;break}o=o.sibling}l||i("189")}}n.alternate!==c&&i("190")}return 3!==n.tag&&i("188"),n.stateNode.current===n?e:t}function xe(e){if(!(e=Se(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Je(e){if(!(e=Se(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child&&4!==t.tag)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Te(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function He(e,t){var n=e[0];e=e[1];var i="on"+(e[0].toUpperCase()+e.slice(1));t={phasedRegistrationNames:{bubbled:i,captured:i+"Capture"},dependencies:[n],isInteractive:t},Va[e]=t,Fa[n]=t}function ke(e){var t=e.targetInst;do{if(!t){e.ancestors.push(t);break}var n;for(n=t;n.return;)n=n.return;if(!(n=3!==n.tag?null:n.stateNode.containerInfo))break;e.ancestors.push(t),t=G(n)}while(t);for(n=0;n<e.ancestors.length;n++)t=e.ancestors[n],h(e.topLevelType,t,e.nativeEvent,$(e.nativeEvent))}function Le(e){Ra=!!e}function we(e,t){if(!t)return null;var n=(Wa(e)?Ee:Oe).bind(null,e);t.addEventListener(e,n,!1)}function ze(e,t){if(!t)return null;var n=(Wa(e)?Ee:Oe).bind(null,e);t.addEventListener(e,n,!0)}function Ee(e,t){M(Oe,e,t)}function Oe(e,t){if(Ra){var n=$(t);if(n=G(n),null===n||"number"!==typeof n.tag||2===Ue(n)||(n=null),va.length){var i=va.pop();i.topLevelType=e,i.nativeEvent=t,i.targetInst=n,e=i}else e={topLevelType:e,nativeEvent:t,targetInst:n,ancestors:[]};try{P(ke,e)}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>va.length&&va.push(e)}}}function De(e){return Object.prototype.hasOwnProperty.call(e,Ya)||(e[Ya]=Ua++,Na[e[Ya]]={}),Na[e[Ya]]}function je(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function _e(e,t){var n=je(e);e=0;for(var i;n;){if(3===n.nodeType){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=je(n)}}function Me(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function Ke(e,t){if(ka||null==Ja||Ja!==Hi())return null;var n=Ja;return"selectionStart"in n&&Me(n)?n={start:n.selectionStart,end:n.selectionEnd}:window.getSelection?(n=window.getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}):n=void 0,Ha&&ki(Ha,n)?null:(Ha=n,e=x.getPooled(xa.select,Ta,e,t),e.type="select",e.target=Ja,v(e),e)}function Pe(e){var t="";return Si.Children.forEach(e,function(e){null==e||"string"!==typeof e&&"number"!==typeof e||(t+=e)}),t}function qe(e,t){return e=Ji({children:void 0},t),(t=Pe(t.children))&&(e.children=t),e}function $e(e,t,n,i){if(e=e.options,t){t={};for(var c=0;c<n.length;c++)t["$"+n[c]]=!0;for(n=0;n<e.length;n++)c=t.hasOwnProperty("$"+e[n].value),e[n].selected!==c&&(e[n].selected=c),c&&i&&(e[n].defaultSelected=!0)}else{for(n=""+n,t=null,c=0;c<e.length;c++){if(e[c].value===n)return e[c].selected=!0,void(i&&(e[c].defaultSelected=!0));null!==t||e[c].disabled||(t=e[c])}null!==t&&(t.selected=!0)}}function et(e,t){var n=t.value;e._wrapperState={initialValue:null!=n?n:t.defaultValue,wasMultiple:!!t.multiple}}function tt(e,t){return null!=t.dangerouslySetInnerHTML&&i("91"),Ji({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function nt(e,t){var n=t.value;null==n&&(n=t.defaultValue,t=t.children,null!=t&&(null!=n&&i("92"),Array.isArray(t)&&(1>=t.length||i("93"),t=t[0]),n=""+t),null==n&&(n="")),e._wrapperState={initialValue:""+n}}function it(e,t){var n=t.value;null!=n&&(n=""+n,n!==e.value&&(e.value=n),null==t.defaultValue&&(e.defaultValue=n)),null!=t.defaultValue&&(e.defaultValue=t.defaultValue)}function ct(e){var t=e.textContent;t===e._wrapperState.initialValue&&(e.value=t)}function at(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function rt(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?at(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}function lt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function ot(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),c=n,a=t[n];c=null==a||"boolean"===typeof a||""===a?"":i||"number"!==typeof a||0===a||Ir.hasOwnProperty(c)&&Ir[c]?(""+a).trim():a+"px","float"===n&&(n="cssFloat"),i?e.setProperty(n,c):e[n]=c}}function st(e,t,n){t&&(pr[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML)&&i("137",e,n()),null!=t.dangerouslySetInnerHTML&&(null!=t.children&&i("60"),"object"===typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML||i("61")),null!=t.style&&"object"!==typeof t.style&&i("62",n()))}function ut(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function dt(e,t){e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument;var n=De(e);t=Mi[t];for(var i=0;i<t.length;i++){var c=t[i];if(!n.hasOwnProperty(c)||!n[c]){switch(c){case"scroll":ze("scroll",e);break;case"focus":case"blur":ze("focus",e),ze("blur",e),n.blur=!0,n.focus=!0;break;case"cancel":case"close":ee(c,!0)&&ze(c,e);break;case"invalid":case"submit":case"reset":break;default:-1===pc.indexOf(c)&&we(c,e)}n[c]=!0}}}function gt(e,t,n,i){return n=9===n.nodeType?n:n.ownerDocument,i===ur.html&&(i=at(e)),i===ur.html?"script"===e?(e=n.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):e="string"===typeof t.is?n.createElement(e,{is:t.is}):n.createElement(e):e=n.createElementNS(i,e),e}function It(e,t){return(9===t.nodeType?t:t.ownerDocument).createTextNode(e)}function bt(e,t,n,i){var c=ut(t,n);switch(t){case"iframe":case"object":we("load",e);var a=n;break;case"video":case"audio":for(a=0;a<pc.length;a++)we(pc[a],e);a=n;break;case"source":we("error",e),a=n;break;case"img":case"image":case"link":we("error",e),we("load",e),a=n;break;case"form":we("reset",e),we("submit",e),a=n;break;case"details":we("toggle",e),a=n;break;case"input":pe(e,n),a=be(e,n),we("invalid",e),dt(i,"onChange");break;case"option":a=qe(e,n);break;case"select":et(e,n),a=Ji({},n,{value:void 0}),we("invalid",e),dt(i,"onChange");break;case"textarea":nt(e,n),a=tt(e,n),we("invalid",e),dt(i,"onChange");break;default:a=n}st(t,a,Cr);var r,l=a;for(r in l)if(l.hasOwnProperty(r)){var o=l[r];"style"===r?ot(e,o,Cr):"dangerouslySetInnerHTML"===r?null!=(o=o?o.__html:void 0)&&gr(e,o):"children"===r?"string"===typeof o?("textarea"!==t||""!==o)&&lt(e,o):"number"===typeof o&&lt(e,""+o):"suppressContentEditableWarning"!==r&&"suppressHydrationWarning"!==r&&"autoFocus"!==r&&(_i.hasOwnProperty(r)?null!=o&&dt(i,r):null!=o&&Ie(e,r,o,c))}switch(t){case"input":ie(e),he(e,n,!1);break;case"textarea":ie(e),ct(e,n);break;case"option":null!=n.value&&e.setAttribute("value",n.value);break;case"select":e.multiple=!!n.multiple,t=n.value,null!=t?$e(e,!!n.multiple,t,!1):null!=n.defaultValue&&$e(e,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Ti)}}function pt(e,t,n,i,c){var a=null;switch(t){case"input":n=be(e,n),i=be(e,i),a=[];break;case"option":n=qe(e,n),i=qe(e,i),a=[];break;case"select":n=Ji({},n,{value:void 0}),i=Ji({},i,{value:void 0}),a=[];break;case"textarea":n=tt(e,n),i=tt(e,i),a=[];break;default:"function"!==typeof n.onClick&&"function"===typeof i.onClick&&(e.onclick=Ti)}st(t,i,Cr),t=e=void 0;var r=null;for(e in n)if(!i.hasOwnProperty(e)&&n.hasOwnProperty(e)&&null!=n[e])if("style"===e){var l=n[e];for(t in l)l.hasOwnProperty(t)&&(r||(r={}),r[t]="")}else"dangerouslySetInnerHTML"!==e&&"children"!==e&&"suppressContentEditableWarning"!==e&&"suppressHydrationWarning"!==e&&"autoFocus"!==e&&(_i.hasOwnProperty(e)?a||(a=[]):(a=a||[]).push(e,null));for(e in i){var o=i[e];if(l=null!=n?n[e]:void 0,i.hasOwnProperty(e)&&o!==l&&(null!=o||null!=l))if("style"===e)if(l){for(t in l)!l.hasOwnProperty(t)||o&&o.hasOwnProperty(t)||(r||(r={}),r[t]="");for(t in o)o.hasOwnProperty(t)&&l[t]!==o[t]&&(r||(r={}),r[t]=o[t])}else r||(a||(a=[]),a.push(e,r)),r=o;else"dangerouslySetInnerHTML"===e?(o=o?o.__html:void 0,l=l?l.__html:void 0,null!=o&&l!==o&&(a=a||[]).push(e,""+o)):"children"===e?l===o||"string"!==typeof o&&"number"!==typeof o||(a=a||[]).push(e,""+o):"suppressContentEditableWarning"!==e&&"suppressHydrationWarning"!==e&&(_i.hasOwnProperty(e)?(null!=o&&dt(c,e),a||l===o||(a=[])):(a=a||[]).push(e,o))}return r&&(a=a||[]).push("style",r),a}function Ct(e,t,n,i,c){"input"===n&&"radio"===c.type&&null!=c.name&&Ce(e,c),ut(n,i),i=ut(n,c);for(var a=0;a<t.length;a+=2){var r=t[a],l=t[a+1];"style"===r?ot(e,l,Cr):"dangerouslySetInnerHTML"===r?gr(e,l):"children"===r?lt(e,l):Ie(e,r,l,i)}switch(n){case"input":me(e,c);break;case"textarea":it(e,c);break;case"select":e._wrapperState.initialValue=void 0,t=e._wrapperState.wasMultiple,e._wrapperState.wasMultiple=!!c.multiple,n=c.value,null!=n?$e(e,!!c.multiple,n,!1):t!==!!c.multiple&&(null!=c.defaultValue?$e(e,!!c.multiple,c.defaultValue,!0):$e(e,!!c.multiple,c.multiple?[]:"",!1))}}function mt(e,t,n,i,c){switch(t){case"iframe":case"object":we("load",e);break;case"video":case"audio":for(i=0;i<pc.length;i++)we(pc[i],e);break;case"source":we("error",e);break;case"img":case"image":case"link":we("error",e),we("load",e);break;case"form":we("reset",e),we("submit",e);break;case"details":we("toggle",e);break;case"input":pe(e,n),we("invalid",e),dt(c,"onChange");break;case"select":et(e,n),we("invalid",e),dt(c,"onChange");break;case"textarea":nt(e,n),we("invalid",e),dt(c,"onChange")}st(t,n,Cr),i=null;for(var a in n)if(n.hasOwnProperty(a)){var r=n[a];"children"===a?"string"===typeof r?e.textContent!==r&&(i=["children",r]):"number"===typeof r&&e.textContent!==""+r&&(i=["children",""+r]):_i.hasOwnProperty(a)&&null!=r&&dt(c,a)}switch(t){case"input":ie(e),he(e,n,!0);break;case"textarea":ie(e),ct(e,n);break;case"select":case"option":break;default:"function"===typeof n.onClick&&(e.onclick=Ti)}return i}function ht(e,t){return e.nodeValue!==t}function Gt(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Zt(e,t){return"textarea"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&"string"===typeof t.dangerouslySetInnerHTML.__html}function Bt(e){for(e=e.nextSibling;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}function yt(e){for(e=e.firstChild;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}function Xt(e){return{current:e}}function At(e){0>Ar||(e.current=Xr[Ar],Xr[Ar]=null,Ar--)}function Vt(e,t){Ar++,Xr[Ar]=e.current,e.current=t}function Ft(e){return Wt(e)?Qr:Vr.current}function Qt(e,t){var n=e.type.contextTypes;if(!n)return wi;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var c,a={};for(c in n)a[c]=t[c];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Wt(e){return 2===e.tag&&null!=e.type.childContextTypes}function vt(e){Wt(e)&&(At(Fr,e),At(Vr,e))}function Rt(e){At(Fr,e),At(Vr,e)}function ft(e,t,n){Vr.current!==wi&&i("168"),Vt(Vr,t,e),Vt(Fr,n,e)}function Nt(e,t){var n=e.stateNode,c=e.type.childContextTypes;if("function"!==typeof n.getChildContext)return t;n=n.getChildContext();for(var a in n)a in c||i("108",re(e)||"Unknown",a);return Ji({},t,n)}function Ut(e){if(!Wt(e))return!1;var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||wi,Qr=Vr.current,Vt(Vr,t,e),Vt(Fr,Fr.current,e),!0}function Yt(e,t){var n=e.stateNode;if(n||i("169"),t){var c=Nt(e,Qr);n.__reactInternalMemoizedMergedChildContext=c,At(Fr,e),At(Vr,e),Vt(Vr,c,e)}else At(Fr,e);Vt(Fr,t,e)}function St(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=null,this.index=0,this.ref=null,this.pendingProps=t,this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.expirationTime=0,this.alternate=null}function xt(e,t,n){var i=e.alternate;return null===i?(i=new St(e.tag,t,e.key,e.mode),i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.effectTag=0,i.nextEffect=null,i.firstEffect=null,i.lastEffect=null),i.expirationTime=n,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Jt(e,t,n){var c=e.type,a=e.key;if(e=e.props,"function"===typeof c)var r=c.prototype&&c.prototype.isReactComponent?2:0;else if("string"===typeof c)r=5;else switch(c){case zc:return Tt(e.children,t,n,a);case _c:r=11,t|=3;break;case Ec:r=11,t|=2;break;case Oc:return c=new St(15,e,a,4|t),c.type=Oc,c.expirationTime=n,c;case Kc:r=16,t|=2;break;default:e:{switch("object"===typeof c&&null!==c?c.$$typeof:null){case Dc:r=13;break e;case jc:r=12;break e;case Mc:r=14;break e;default:i("130",null==c?c:typeof c,"")}r=void 0}}return t=new St(r,e,a,t),t.type=c,t.expirationTime=n,t}function Tt(e,t,n,i){return e=new St(10,e,i,t),e.expirationTime=n,e}function Ht(e,t,n){return e=new St(6,e,null,t),e.expirationTime=n,e}function kt(e,t,n){return t=new St(4,null!==e.children?e.children:[],e.key,t),t.expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Lt(e,t,n){return t=new St(3,null,null,t?3:0),e={current:t,containerInfo:e,pendingChildren:null,earliestPendingTime:0,latestPendingTime:0,earliestSuspendedTime:0,latestSuspendedTime:0,latestPingedTime:0,pendingCommitExpirationTime:0,finishedWork:null,context:null,pendingContext:null,hydrate:n,remainingExpirationTime:0,firstBatch:null,nextScheduledRoot:null},t.stateNode=e}function wt(e){return function(t){try{return e(t)}catch(e){}}}function zt(e){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);Wr=wt(function(e){return t.onCommitFiberRoot(n,e)}),vr=wt(function(e){return t.onCommitFiberUnmount(n,e)})}catch(e){}return!0}function Et(e){"function"===typeof Wr&&Wr(e)}function Ot(e){"function"===typeof vr&&vr(e)}function Dt(e){return{expirationTime:0,baseState:e,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function jt(e){return{expirationTime:e.expirationTime,baseState:e.baseState,firstUpdate:e.firstUpdate,lastUpdate:e.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function _t(e){return{expirationTime:e,tag:0,payload:null,callback:null,next:null,nextEffect:null}}function Mt(e,t,n){null===e.lastUpdate?e.firstUpdate=e.lastUpdate=t:(e.lastUpdate.next=t,e.lastUpdate=t),(0===e.expirationTime||e.expirationTime>n)&&(e.expirationTime=n)}function Kt(e,t,n){var i=e.alternate;if(null===i){var c=e.updateQueue,a=null;null===c&&(c=e.updateQueue=Dt(e.memoizedState))}else c=e.updateQueue,a=i.updateQueue,null===c?null===a?(c=e.updateQueue=Dt(e.memoizedState),a=i.updateQueue=Dt(i.memoizedState)):c=e.updateQueue=jt(a):null===a&&(a=i.updateQueue=jt(c));null===a||c===a?Mt(c,t,n):null===c.lastUpdate||null===a.lastUpdate?(Mt(c,t,n),Mt(a,t,n)):(Mt(c,t,n),a.lastUpdate=t)}function Pt(e,t,n){var i=e.updateQueue;i=null===i?e.updateQueue=Dt(e.memoizedState):qt(e,i),null===i.lastCapturedUpdate?i.firstCapturedUpdate=i.lastCapturedUpdate=t:(i.lastCapturedUpdate.next=t,i.lastCapturedUpdate=t),(0===i.expirationTime||i.expirationTime>n)&&(i.expirationTime=n)}function qt(e,t){var n=e.alternate;return null!==n&&t===n.updateQueue&&(t=e.updateQueue=jt(t)),t}function $t(e,t,n,i,c,a){switch(n.tag){case 1:return e=n.payload,"function"===typeof e?e.call(a,i,c):e;case 3:e.effectTag=-1025&e.effectTag|64;case 0:if(e=n.payload,null===(c="function"===typeof e?e.call(a,i,c):e)||void 0===c)break;return Ji({},i,c);case 2:Rr=!0}return i}function en(e,t,n,i,c){if(Rr=!1,!(0===t.expirationTime||t.expirationTime>c)){t=qt(e,t);for(var a=t.baseState,r=null,l=0,o=t.firstUpdate,s=a;null!==o;){var u=o.expirationTime;u>c?(null===r&&(r=o,a=s),(0===l||l>u)&&(l=u)):(s=$t(e,t,o,s,n,i),null!==o.callback&&(e.effectTag|=32,o.nextEffect=null,null===t.lastEffect?t.firstEffect=t.lastEffect=o:(t.lastEffect.nextEffect=o,t.lastEffect=o))),o=o.next}for(u=null,o=t.firstCapturedUpdate;null!==o;){var d=o.expirationTime;d>c?(null===u&&(u=o,null===r&&(a=s)),(0===l||l>d)&&(l=d)):(s=$t(e,t,o,s,n,i),null!==o.callback&&(e.effectTag|=32,o.nextEffect=null,null===t.lastCapturedEffect?t.firstCapturedEffect=t.lastCapturedEffect=o:(t.lastCapturedEffect.nextEffect=o,t.lastCapturedEffect=o))),o=o.next}null===r&&(t.lastUpdate=null),null===u?t.lastCapturedUpdate=null:e.effectTag|=32,null===r&&null===u&&(a=s),t.baseState=a,t.firstUpdate=r,t.firstCapturedUpdate=u,t.expirationTime=l,e.memoizedState=s}}function tn(e,t){"function"!==typeof e&&i("191",e),e.call(t)}function nn(e,t,n){for(null!==t.firstCapturedUpdate&&(null!==t.lastUpdate&&(t.lastUpdate.next=t.firstCapturedUpdate,t.lastUpdate=t.lastCapturedUpdate),t.firstCapturedUpdate=t.lastCapturedUpdate=null),e=t.firstEffect,t.firstEffect=t.lastEffect=null;null!==e;){var i=e.callback;null!==i&&(e.callback=null,tn(i,n)),e=e.nextEffect}for(e=t.firstCapturedEffect,t.firstCapturedEffect=t.lastCapturedEffect=null;null!==e;)t=e.callback,null!==t&&(e.callback=null,tn(t,n)),e=e.nextEffect}function cn(e,t){return{value:e,source:t,stack:le(t)}}function an(e){var t=e.type._context;Vt(Ur,t._changedBits,e),Vt(Nr,t._currentValue,e),Vt(fr,e,e),t._currentValue=e.pendingProps.value,t._changedBits=e.stateNode}function rn(e){var t=Ur.current,n=Nr.current;At(fr,e),At(Nr,e),At(Ur,e),e=e.type._context,e._currentValue=n,e._changedBits=t}function ln(e){return e===Yr&&i("174"),e}function on(e,t){Vt(Jr,t,e),Vt(xr,e,e),Vt(Sr,Yr,e);var n=t.nodeType;switch(n){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:rt(null,"");break;default:n=8===n?t.parentNode:t,t=n.namespaceURI||null,n=n.tagName,t=rt(t,n)}At(Sr,e),Vt(Sr,t,e)}function sn(e){At(Sr,e),At(xr,e),At(Jr,e)}function un(e){xr.current===e&&(At(Sr,e),At(xr,e))}function dn(e,t,n){var i=e.memoizedState;t=t(n,i),i=null===t||void 0===t?i:Ji({},i,t),e.memoizedState=i,null!==(e=e.updateQueue)&&0===e.expirationTime&&(e.baseState=i)}function gn(e,t,n,i,c,a){var r=e.stateNode;return e=e.type,"function"===typeof r.shouldComponentUpdate?r.shouldComponentUpdate(n,c,a):!e.prototype||!e.prototype.isPureReactComponent||(!ki(t,n)||!ki(i,c))}function In(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Tr.enqueueReplaceState(t,t.state,null)}function bn(e,t){var n=e.type,i=e.stateNode,c=e.pendingProps,a=Ft(e);i.props=c,i.state=e.memoizedState,i.refs=wi,i.context=Qt(e,a),a=e.updateQueue,null!==a&&(en(e,a,c,i,t),i.state=e.memoizedState),a=e.type.getDerivedStateFromProps,"function"===typeof a&&(dn(e,a,c),i.state=e.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(n=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),n!==i.state&&Tr.enqueueReplaceState(i,i.state,null),null!==(a=e.updateQueue)&&(en(e,a,c,i,t),i.state=e.memoizedState)),"function"===typeof i.componentDidMount&&(e.effectTag|=4)}function pn(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){n=n._owner;var c=void 0;n&&(2!==n.tag&&i("110"),c=n.stateNode),c||i("147",e);var a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=c.refs===wi?c.refs={}:c.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}"string"!==typeof e&&i("148"),n._owner||i("254",e)}return e}function Cn(e,t){"textarea"!==e.type&&i("31","[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,"")}function mn(e){function t(t,n){if(e){var i=t.lastEffect;null!==i?(i.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function c(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t,n){return e=xt(e,t,n),e.index=0,e.sibling=null,e}function r(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index,i<n?(t.effectTag=2,n):i):(t.effectTag=2,n):n}function l(t){return e&&null===t.alternate&&(t.effectTag=2),t}function o(e,t,n,i){return null===t||6!==t.tag?(t=Ht(n,e.mode,i),t.return=e,t):(t=a(t,n,i),t.return=e,t)}function s(e,t,n,i){return null!==t&&t.type===n.type?(i=a(t,n.props,i),i.ref=pn(e,t,n),i.return=e,i):(i=Jt(n,e.mode,i),i.ref=pn(e,t,n),i.return=e,i)}function u(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?(t=kt(n,e.mode,i),t.return=e,t):(t=a(t,n.children||[],i),t.return=e,t)}function d(e,t,n,i,c){return null===t||10!==t.tag?(t=Tt(n,e.mode,i,c),t.return=e,t):(t=a(t,n,i),t.return=e,t)}function g(e,t,n){if("string"===typeof t||"number"===typeof t)return t=Ht(""+t,e.mode,n),t.return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case Lc:return n=Jt(t,e.mode,n),n.ref=pn(e,null,t),n.return=e,n;case wc:return t=kt(t,e.mode,n),t.return=e,t}if(Hr(t)||ae(t))return t=Tt(t,e.mode,n,null),t.return=e,t;Cn(e,t)}return null}function I(e,t,n,i){var c=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==c?null:o(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case Lc:return n.key===c?n.type===zc?d(e,t,n.props.children,i,c):s(e,t,n,i):null;case wc:return n.key===c?u(e,t,n,i):null}if(Hr(n)||ae(n))return null!==c?null:d(e,t,n,i,null);Cn(e,n)}return null}function b(e,t,n,i,c){if("string"===typeof i||"number"===typeof i)return e=e.get(n)||null,o(t,e,""+i,c);if("object"===typeof i&&null!==i){switch(i.$$typeof){case Lc:return e=e.get(null===i.key?n:i.key)||null,i.type===zc?d(t,e,i.props.children,c,i.key):s(t,e,i,c);case wc:return e=e.get(null===i.key?n:i.key)||null,u(t,e,i,c)}if(Hr(i)||ae(i))return e=e.get(n)||null,d(t,e,i,c,null);Cn(t,i)}return null}function p(i,a,l,o){for(var s=null,u=null,d=a,p=a=0,C=null;null!==d&&p<l.length;p++){d.index>p?(C=d,d=null):C=d.sibling;var m=I(i,d,l[p],o);if(null===m){null===d&&(d=C);break}e&&d&&null===m.alternate&&t(i,d),a=r(m,a,p),null===u?s=m:u.sibling=m,u=m,d=C}if(p===l.length)return n(i,d),s;if(null===d){for(;p<l.length;p++)(d=g(i,l[p],o))&&(a=r(d,a,p),null===u?s=d:u.sibling=d,u=d);return s}for(d=c(i,d);p<l.length;p++)(C=b(d,i,p,l[p],o))&&(e&&null!==C.alternate&&d.delete(null===C.key?p:C.key),a=r(C,a,p),null===u?s=C:u.sibling=C,u=C);return e&&d.forEach(function(e){return t(i,e)}),s}function C(a,l,o,s){var u=ae(o);"function"!==typeof u&&i("150"),null==(o=u.call(o))&&i("151");for(var d=u=null,p=l,C=l=0,m=null,h=o.next();null!==p&&!h.done;C++,h=o.next()){p.index>C?(m=p,p=null):m=p.sibling;var G=I(a,p,h.value,s);if(null===G){p||(p=m);break}e&&p&&null===G.alternate&&t(a,p),l=r(G,l,C),null===d?u=G:d.sibling=G,d=G,p=m}if(h.done)return n(a,p),u;if(null===p){for(;!h.done;C++,h=o.next())null!==(h=g(a,h.value,s))&&(l=r(h,l,C),null===d?u=h:d.sibling=h,d=h);return u}for(p=c(a,p);!h.done;C++,h=o.next())null!==(h=b(p,a,C,h.value,s))&&(e&&null!==h.alternate&&p.delete(null===h.key?C:h.key),l=r(h,l,C),null===d?u=h:d.sibling=h,d=h);return e&&p.forEach(function(e){return t(a,e)}),u}return function(e,c,r,o){var s="object"===typeof r&&null!==r&&r.type===zc&&null===r.key;s&&(r=r.props.children);var u="object"===typeof r&&null!==r;if(u)switch(r.$$typeof){case Lc:e:{for(u=r.key,s=c;null!==s;){if(s.key===u){if(10===s.tag?r.type===zc:s.type===r.type){n(e,s.sibling),c=a(s,r.type===zc?r.props.children:r.props,o),c.ref=pn(e,s,r),c.return=e,e=c;break e}n(e,s);break}t(e,s),s=s.sibling}r.type===zc?(c=Tt(r.props.children,e.mode,o,r.key),c.return=e,e=c):(o=Jt(r,e.mode,o),o.ref=pn(e,c,r),o.return=e,e=o)}return l(e);case wc:e:{for(s=r.key;null!==c;){if(c.key===s){if(4===c.tag&&c.stateNode.containerInfo===r.containerInfo&&c.stateNode.implementation===r.implementation){n(e,c.sibling),c=a(c,r.children||[],o),c.return=e,e=c;break e}n(e,c);break}t(e,c),c=c.sibling}c=kt(r,e.mode,o),c.return=e,e=c}return l(e)}if("string"===typeof r||"number"===typeof r)return r=""+r,null!==c&&6===c.tag?(n(e,c.sibling),c=a(c,r,o),c.return=e,e=c):(n(e,c),c=Ht(r,e.mode,o),c.return=e,e=c),l(e);if(Hr(r))return p(e,c,r,o);if(ae(r))return C(e,c,r,o);if(u&&Cn(e,r),"undefined"===typeof r&&!s)switch(e.tag){case 2:case 1:o=e.type,i("152",o.displayName||o.name||"Component")}return n(e,c)}}function hn(e,t){var n=new St(5,null,null,0);n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Gn(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Zn(e){if(Er){var t=zr;if(t){var n=t;if(!Gn(e,t)){if(!(t=Bt(n))||!Gn(e,t))return e.effectTag|=2,Er=!1,void(wr=e);hn(wr,n)}wr=e,zr=yt(t)}else e.effectTag|=2,Er=!1,wr=e}}function Bn(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag;)e=e.return;wr=e}function yn(e){if(e!==wr)return!1;if(!Er)return Bn(e),Er=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Zt(t,e.memoizedProps))for(t=zr;t;)hn(e,t),t=Bt(t);return Bn(e),zr=wr?Bt(e.stateNode):null,!0}function Xn(){zr=wr=null,Er=!1}function An(e,t,n){Vn(e,t,n,t.expirationTime)}function Vn(e,t,n,i){t.child=null===e?Lr(t,null,n,i):kr(t,e.child,n,i)}function Fn(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function Qn(e,t,n,i,c){Fn(e,t);var a=0!==(64&t.effectTag);if(!n&&!a)return i&&Yt(t,!1),fn(e,t);n=t.stateNode,Hc.current=t;var r=a?null:n.render();return t.effectTag|=1,a&&(Vn(e,t,null,c),t.child=null),Vn(e,t,r,c),t.memoizedState=n.state,t.memoizedProps=n.props,i&&Yt(t,!0),t.child}function Wn(e){var t=e.stateNode;t.pendingContext?ft(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ft(e,t.context,!1),on(e,t.containerInfo)}function vn(e,t,n,i){var c=e.child;for(null!==c&&(c.return=e);null!==c;){switch(c.tag){case 12:var a=0|c.stateNode;if(c.type===t&&0!==(a&n)){for(a=c;null!==a;){var r=a.alternate;if(0===a.expirationTime||a.expirationTime>i)a.expirationTime=i,null!==r&&(0===r.expirationTime||r.expirationTime>i)&&(r.expirationTime=i);else{if(null===r||!(0===r.expirationTime||r.expirationTime>i))break;r.expirationTime=i}a=a.return}a=null}else a=c.child;break;case 13:a=c.type===e.type?null:c.child;break;default:a=c.child}if(null!==a)a.return=c;else for(a=c;null!==a;){if(a===e){a=null;break}if(null!==(c=a.sibling)){c.return=a.return,a=c;break}a=a.return}c=a}}function Rn(e,t,n){var i=t.type._context,c=t.pendingProps,a=t.memoizedProps,r=!0;if(Fr.current)r=!1;else if(a===c)return t.stateNode=0,an(t),fn(e,t);var l=c.value;if(t.memoizedProps=c,null===a)l=1073741823;else if(a.value===c.value){if(a.children===c.children&&r)return t.stateNode=0,an(t),fn(e,t);l=0}else{var o=a.value;if(o===l&&(0!==o||1/o===1/l)||o!==o&&l!==l){if(a.children===c.children&&r)return t.stateNode=0,an(t),fn(e,t);l=0}else if(l="function"===typeof i._calculateChangedBits?i._calculateChangedBits(o,l):1073741823,0===(l|=0)){if(a.children===c.children&&r)return t.stateNode=0,an(t),fn(e,t)}else vn(t,i,l,n)}return t.stateNode=l,an(t),An(e,t,c.children),t.child}function fn(e,t){if(null!==e&&t.child!==e.child&&i("153"),null!==t.child){e=t.child;var n=xt(e,e.pendingProps,e.expirationTime);for(t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,n=n.sibling=xt(e,e.pendingProps,e.expirationTime),n.return=t;n.sibling=null}return t.child}function Nn(e,t,n){if(0===t.expirationTime||t.expirationTime>n){switch(t.tag){case 3:Wn(t);break;case 2:Ut(t);break;case 4:on(t,t.stateNode.containerInfo);break;case 13:an(t)}return null}switch(t.tag){case 0:null!==e&&i("155");var c=t.type,a=t.pendingProps,r=Ft(t);return r=Qt(t,r),c=c(a,r),t.effectTag|=1,"object"===typeof c&&null!==c&&"function"===typeof c.render&&void 0===c.$$typeof?(r=t.type,t.tag=2,t.memoizedState=null!==c.state&&void 0!==c.state?c.state:null,r=r.getDerivedStateFromProps,"function"===typeof r&&dn(t,r,a),a=Ut(t),c.updater=Tr,t.stateNode=c,c._reactInternalFiber=t,bn(t,n),e=Qn(e,t,!0,a,n)):(t.tag=1,An(e,t,c),t.memoizedProps=a,e=t.child),e;case 1:return a=t.type,n=t.pendingProps,Fr.current||t.memoizedProps!==n?(c=Ft(t),c=Qt(t,c),a=a(n,c),t.effectTag|=1,An(e,t,a),t.memoizedProps=n,e=t.child):e=fn(e,t),e;case 2:if(a=Ut(t),null===e)if(null===t.stateNode){var l=t.pendingProps,o=t.type;c=Ft(t);var s=2===t.tag&&null!=t.type.contextTypes;r=s?Qt(t,c):wi,l=new o(l,r),t.memoizedState=null!==l.state&&void 0!==l.state?l.state:null,l.updater=Tr,t.stateNode=l,l._reactInternalFiber=t,s&&(s=t.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=c,s.__reactInternalMemoizedMaskedChildContext=r),bn(t,n),c=!0}else{o=t.type,c=t.stateNode,s=t.memoizedProps,r=t.pendingProps,c.props=s;var u=c.context;l=Ft(t),l=Qt(t,l);var d=o.getDerivedStateFromProps;(o="function"===typeof d||"function"===typeof c.getSnapshotBeforeUpdate)||"function"!==typeof c.UNSAFE_componentWillReceiveProps&&"function"!==typeof c.componentWillReceiveProps||(s!==r||u!==l)&&In(t,c,r,l),Rr=!1;var g=t.memoizedState;u=c.state=g;var I=t.updateQueue;null!==I&&(en(t,I,r,c,n),u=t.memoizedState),s!==r||g!==u||Fr.current||Rr?("function"===typeof d&&(dn(t,d,r),u=t.memoizedState),(s=Rr||gn(t,s,r,g,u,l))?(o||"function"!==typeof c.UNSAFE_componentWillMount&&"function"!==typeof c.componentWillMount||("function"===typeof c.componentWillMount&&c.componentWillMount(),"function"===typeof c.UNSAFE_componentWillMount&&c.UNSAFE_componentWillMount()),"function"===typeof c.componentDidMount&&(t.effectTag|=4)):("function"===typeof c.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=u),c.props=r,c.state=u,c.context=l,c=s):("function"===typeof c.componentDidMount&&(t.effectTag|=4),c=!1)}else o=t.type,c=t.stateNode,r=t.memoizedProps,s=t.pendingProps,c.props=r,u=c.context,l=Ft(t),l=Qt(t,l),d=o.getDerivedStateFromProps,(o="function"===typeof d||"function"===typeof c.getSnapshotBeforeUpdate)||"function"!==typeof c.UNSAFE_componentWillReceiveProps&&"function"!==typeof c.componentWillReceiveProps||(r!==s||u!==l)&&In(t,c,s,l),Rr=!1,u=t.memoizedState,g=c.state=u,I=t.updateQueue,null!==I&&(en(t,I,s,c,n),g=t.memoizedState),r!==s||u!==g||Fr.current||Rr?("function"===typeof d&&(dn(t,d,s),g=t.memoizedState),(d=Rr||gn(t,r,s,u,g,l))?(o||"function"!==typeof c.UNSAFE_componentWillUpdate&&"function"!==typeof c.componentWillUpdate||("function"===typeof c.componentWillUpdate&&c.componentWillUpdate(s,g,l),"function"===typeof c.UNSAFE_componentWillUpdate&&c.UNSAFE_componentWillUpdate(s,g,l)),"function"===typeof c.componentDidUpdate&&(t.effectTag|=4),"function"===typeof c.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!==typeof c.componentDidUpdate||r===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!==typeof c.getSnapshotBeforeUpdate||r===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),t.memoizedProps=s,t.memoizedState=g),c.props=s,c.state=g,c.context=l,c=d):("function"!==typeof c.componentDidUpdate||r===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!==typeof c.getSnapshotBeforeUpdate||r===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),c=!1);return Qn(e,t,c,a,n);case 3:return Wn(t),a=t.updateQueue,null!==a?(c=t.memoizedState,c=null!==c?c.element:null,en(t,a,t.pendingProps,null,n),(a=t.memoizedState.element)===c?(Xn(),e=fn(e,t)):(c=t.stateNode,(c=(null===e||null===e.child)&&c.hydrate)&&(zr=yt(t.stateNode.containerInfo),wr=t,c=Er=!0),c?(t.effectTag|=2,t.child=Lr(t,null,a,n)):(Xn(),An(e,t,a)),e=t.child)):(Xn(),e=fn(e,t)),e;case 5:return ln(Jr.current),a=ln(Sr.current),c=rt(a,t.type),a!==c&&(Vt(xr,t,t),Vt(Sr,c,t)),null===e&&Zn(t),a=t.type,s=t.memoizedProps,c=t.pendingProps,r=null!==e?e.memoizedProps:null,Fr.current||s!==c||((s=1&t.mode&&!!c.hidden)&&(t.expirationTime=1073741823),s&&1073741823===n)?(s=c.children,Zt(a,c)?s=null:r&&Zt(a,r)&&(t.effectTag|=16),Fn(e,t),1073741823!==n&&1&t.mode&&c.hidden?(t.expirationTime=1073741823,t.memoizedProps=c,e=null):(An(e,t,s),t.memoizedProps=c,e=t.child)):e=fn(e,t),e;case 6:return null===e&&Zn(t),t.memoizedProps=t.pendingProps,null;case 16:return null;case 4:return on(t,t.stateNode.containerInfo),a=t.pendingProps,Fr.current||t.memoizedProps!==a?(null===e?t.child=kr(t,null,a,n):An(e,t,a),t.memoizedProps=a,e=t.child):e=fn(e,t),e;case 14:return a=t.type.render,n=t.pendingProps,c=t.ref,Fr.current||t.memoizedProps!==n||c!==(null!==e?e.ref:null)?(a=a(n,c),An(e,t,a),t.memoizedProps=n,e=t.child):e=fn(e,t),e;case 10:return n=t.pendingProps,Fr.current||t.memoizedProps!==n?(An(e,t,n),t.memoizedProps=n,e=t.child):e=fn(e,t),e;case 11:return n=t.pendingProps.children,Fr.current||null!==n&&t.memoizedProps!==n?(An(e,t,n),t.memoizedProps=n,e=t.child):e=fn(e,t),e;case 15:return n=t.pendingProps,t.memoizedProps===n?e=fn(e,t):(An(e,t,n.children),t.memoizedProps=n,e=t.child),e;case 13:return Rn(e,t,n);case 12:e:if(c=t.type,r=t.pendingProps,s=t.memoizedProps,a=c._currentValue,l=c._changedBits,Fr.current||0!==l||s!==r){if(t.memoizedProps=r,o=r.unstable_observedBits,void 0!==o&&null!==o||(o=1073741823),t.stateNode=o,0!==(l&o))vn(t,c,l,n);else if(s===r){e=fn(e,t);break e}n=r.children,n=n(a),t.effectTag|=1,An(e,t,n),e=t.child}else e=fn(e,t);return e;default:i("156")}}function Un(e){e.effectTag|=4}function Yn(e,t){var n=t.pendingProps;switch(t.tag){case 1:return null;case 2:return vt(t),null;case 3:sn(t),Rt(t);var c=t.stateNode;return c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),null!==e&&null!==e.child||(yn(t),t.effectTag&=-3),Or(t),null;case 5:un(t),c=ln(Jr.current);var a=t.type;if(null!==e&&null!=t.stateNode){var r=e.memoizedProps,l=t.stateNode,o=ln(Sr.current);l=pt(l,a,r,n,c),Dr(e,t,l,a,r,n,c,o),e.ref!==t.ref&&(t.effectTag|=128)}else{if(!n)return null===t.stateNode&&i("166"),null;if(e=ln(Sr.current),yn(t))n=t.stateNode,a=t.type,r=t.memoizedProps,n[cc]=t,n[ac]=r,c=mt(n,a,r,e,c),t.updateQueue=c,null!==c&&Un(t);else{e=gt(a,n,c,e),e[cc]=t,e[ac]=n;e:for(r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}bt(e,a,n,c),Gt(a,n)&&Un(t),t.stateNode=e}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)jr(e,t,e.memoizedProps,n);else{if("string"!==typeof n)return null===t.stateNode&&i("166"),null;c=ln(Jr.current),ln(Sr.current),yn(t)?(c=t.stateNode,n=t.memoizedProps,c[cc]=t,ht(c,n)&&Un(t)):(c=It(n,c),c[cc]=t,t.stateNode=c)}return null;case 14:case 16:case 10:case 11:case 15:return null;case 4:return sn(t),Or(t),null;case 13:return rn(t),null;case 12:return null;case 0:i("167");default:i("156")}}function Sn(e,t){var n=t.source;null===t.stack&&null!==n&&le(n),null!==n&&re(n),t=t.value,null!==e&&2===e.tag&&re(e);try{t&&t.suppressReactErrorLogging||console.error(t)}catch(e){e&&e.suppressReactErrorLogging||console.error(e)}}function xn(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(t){Kn(e,t)}else t.current=null}function Jn(e){switch("function"===typeof Ot&&Ot(e),e.tag){case 2:xn(e);var t=e.stateNode;if("function"===typeof t.componentWillUnmount)try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(t){Kn(e,t)}break;case 5:xn(e);break;case 4:kn(e)}}function Tn(e){return 5===e.tag||3===e.tag||4===e.tag}function Hn(e){e:{for(var t=e.return;null!==t;){if(Tn(t)){var n=t;break e}t=t.return}i("160"),n=void 0}var c=t=void 0;switch(n.tag){case 5:t=n.stateNode,c=!1;break;case 3:case 4:t=n.stateNode.containerInfo,c=!0;break;default:i("161")}16&n.effectTag&&(lt(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||Tn(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}for(var a=e;;){if(5===a.tag||6===a.tag)if(n)if(c){var r=t,l=a.stateNode,o=n;8===r.nodeType?r.parentNode.insertBefore(l,o):r.insertBefore(l,o)}else t.insertBefore(a.stateNode,n);else c?(r=t,l=a.stateNode,8===r.nodeType?r.parentNode.insertBefore(l,r):r.appendChild(l)):t.appendChild(a.stateNode);else if(4!==a.tag&&null!==a.child){a.child.return=a,a=a.child;continue}if(a===e)break;for(;null===a.sibling;){if(null===a.return||a.return===e)return;a=a.return}a.sibling.return=a.return,a=a.sibling}}function kn(e){for(var t=e,n=!1,c=void 0,a=void 0;;){if(!n){n=t.return;e:for(;;){switch(null===n&&i("160"),n.tag){case 5:c=n.stateNode,a=!1;break e;case 3:case 4:c=n.stateNode.containerInfo,a=!0;break e}n=n.return}n=!0}if(5===t.tag||6===t.tag){e:for(var r=t,l=r;;)if(Jn(l),null!==l.child&&4!==l.tag)l.child.return=l,l=l.child;else{if(l===r)break;for(;null===l.sibling;){if(null===l.return||l.return===r)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}a?(r=c,l=t.stateNode,8===r.nodeType?r.parentNode.removeChild(l):r.removeChild(l)):c.removeChild(t.stateNode)}else if(4===t.tag?c=t.stateNode.containerInfo:Jn(t),null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return;t=t.return,4===t.tag&&(n=!1)}t.sibling.return=t.return,t=t.sibling}}function Ln(e,t){switch(t.tag){case 2:break;case 5:var n=t.stateNode;if(null!=n){var c=t.memoizedProps;e=null!==e?e.memoizedProps:c;var a=t.type,r=t.updateQueue;t.updateQueue=null,null!==r&&(n[ac]=c,Ct(n,r,a,e,c))}break;case 6:null===t.stateNode&&i("162"),t.stateNode.nodeValue=t.memoizedProps;break;case 3:case 15:case 16:break;default:i("163")}}function wn(e,t,n){n=_t(n),n.tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){bi(i),Sn(e,t)},n}function zn(e,t,n){n=_t(n),n.tag=3;var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){null===ol?ol=new Set([this]):ol.add(this);var n=t.value,i=t.stack;Sn(e,t),this.componentDidCatch(n,{componentStack:null!==i?i:""})}),n}function En(e,t,n,i,c,a){n.effectTag|=512,n.firstEffect=n.lastEffect=null,i=cn(i,n),e=t;do{switch(e.tag){case 3:return e.effectTag|=1024,i=wn(e,i,a),void Pt(e,i,a);case 2:if(t=i,n=e.stateNode,0===(64&e.effectTag)&&null!==n&&"function"===typeof n.componentDidCatch&&(null===ol||!ol.has(n)))return e.effectTag|=1024,i=zn(e,t,a),void Pt(e,i,a)}e=e.return}while(null!==e)}function On(e){switch(e.tag){case 2:vt(e);var t=e.effectTag;return 1024&t?(e.effectTag=-1025&t|64,e):null;case 3:return sn(e),Rt(e),t=e.effectTag,1024&t?(e.effectTag=-1025&t|64,e):null;case 5:return un(e),null;case 16:return t=e.effectTag,1024&t?(e.effectTag=-1025&t|64,e):null;case 4:return sn(e),null;case 13:return rn(e),null;default:return null}}function Dn(){if(null!==el)for(var e=el.return;null!==e;){var t=e;switch(t.tag){case 2:vt(t);break;case 3:sn(t),Rt(t);break;case 5:un(t);break;case 4:sn(t);break;case 13:rn(t)}e=e.return}tl=null,nl=0,il=-1,cl=!1,el=null,ll=!1}function jn(e){for(;;){var t=e.alternate,n=e.return,i=e.sibling;if(0===(512&e.effectTag)){t=Yn(t,e,nl);var c=e;if(1073741823===nl||1073741823!==c.expirationTime){var a=0;switch(c.tag){case 3:case 2:var r=c.updateQueue;null!==r&&(a=r.expirationTime)}for(r=c.child;null!==r;)0!==r.expirationTime&&(0===a||a>r.expirationTime)&&(a=r.expirationTime),r=r.sibling;c.expirationTime=a}if(null!==t)return t;if(null!==n&&0===(512&n.effectTag)&&(null===n.firstEffect&&(n.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==n.lastEffect&&(n.lastEffect.nextEffect=e.firstEffect),n.lastEffect=e.lastEffect),1<e.effectTag&&(null!==n.lastEffect?n.lastEffect.nextEffect=e:n.firstEffect=e,n.lastEffect=e)),null!==i)return i;if(null===n){ll=!0;break}e=n}else{if(null!==(e=On(e,cl,nl)))return e.effectTag&=511,e;if(null!==n&&(n.firstEffect=n.lastEffect=null,n.effectTag|=512),null!==i)return i;if(null===n)break;e=n}}return null}function _n(e){var t=Nn(e.alternate,e,nl);return null===t&&(t=jn(e)),Hc.current=null,t}function Mn(e,t,n){$r&&i("243"),$r=!0,t===nl&&e===tl&&null!==el||(Dn(),tl=e,nl=t,il=-1,el=xt(tl.current,null,nl),e.pendingCommitExpirationTime=0);var c=!1;for(cl=!n||nl<=Mr;;){try{if(n)for(;null!==el&&!Ii();)el=_n(el);else for(;null!==el;)el=_n(el)}catch(t){if(null===el)c=!0,bi(t);else{null===el&&i("271"),n=el;var a=n.return;if(null===a){c=!0,bi(t);break}En(e,a,n,t,cl,nl,Kr),el=jn(n)}}break}if($r=!1,c)return null;if(null===el){if(ll)return e.pendingCommitExpirationTime=t,e.current.alternate;cl&&i("262"),0<=il&&setTimeout(function(){var t=e.current.expirationTime;0!==t&&(0===e.remainingExpirationTime||e.remainingExpirationTime<t)&&ci(e,t)},il),pi(e.current.expirationTime)}return null}function Kn(e,t){var n;e:{for($r&&!rl&&i("263"),n=e.return;null!==n;){switch(n.tag){case 2:var c=n.stateNode;if("function"===typeof n.type.getDerivedStateFromCatch||"function"===typeof c.componentDidCatch&&(null===ol||!ol.has(c))){e=cn(t,e),e=zn(n,e,1),Kt(n,e,1),$n(n,1),n=void 0;break e}break;case 3:e=cn(t,e),e=wn(n,e,1),Kt(n,e,1),$n(n,1),n=void 0;break e}n=n.return}3===e.tag&&(n=cn(t,e),n=wn(e,n,1),Kt(e,n,1),$n(e,1)),n=void 0}return n}function Pn(){var e=2+25*(1+((ei()-2+500)/25|0));return e<=Pr&&(e=Pr+1),Pr=e}function qn(e,t){return e=0!==qr?qr:$r?rl?1:nl:1&t.mode?Xl?2+10*(1+((e-2+15)/10|0)):2+25*(1+((e-2+500)/25|0)):1,Xl&&(0===Cl||e>Cl)&&(Cl=e),e}function $n(e,t){for(;null!==e;){if((0===e.expirationTime||e.expirationTime>t)&&(e.expirationTime=t),null!==e.alternate&&(0===e.alternate.expirationTime||e.alternate.expirationTime>t)&&(e.alternate.expirationTime=t),null===e.return){if(3!==e.tag)break;var n=e.stateNode;!$r&&0!==nl&&t<nl&&Dn();var c=n.current.expirationTime;$r&&!rl&&tl===n||ci(n,c),Fl>Vl&&i("185")}e=e.return}}function ei(){return Kr=Zr()-_r,Mr=2+(Kr/10|0)}function ti(e){var t=qr;qr=2+25*(1+((ei()-2+500)/25|0));try{return e()}finally{qr=t}}function ni(e,t,n,i,c){var a=qr;qr=1;try{return e(t,n,i,c)}finally{qr=a}}function ii(e){if(0!==dl){if(e>dl)return;null!==gl&&yr(gl)}var t=Zr()-_r;dl=e,gl=Br(ri,{timeout:10*(e-2)-t})}function ci(e,t){if(null===e.nextScheduledRoot)e.remainingExpirationTime=t,null===ul?(sl=ul=e,e.nextScheduledRoot=e):(ul=ul.nextScheduledRoot=e,ul.nextScheduledRoot=sl);else{var n=e.remainingExpirationTime;(0===n||t<n)&&(e.remainingExpirationTime=t)}Il||(Bl?yl&&(bl=e,pl=1,di(e,1,!1)):1===t?li():ii(t))}function ai(){var e=0,t=null;if(null!==ul)for(var n=ul,c=sl;null!==c;){var a=c.remainingExpirationTime;if(0===a){if((null===n||null===ul)&&i("244"),c===c.nextScheduledRoot){sl=ul=c.nextScheduledRoot=null;break}if(c===sl)sl=a=c.nextScheduledRoot,ul.nextScheduledRoot=a,c.nextScheduledRoot=null;else{if(c===ul){ul=n,ul.nextScheduledRoot=sl,c.nextScheduledRoot=null;break}n.nextScheduledRoot=c.nextScheduledRoot,c.nextScheduledRoot=null}c=n.nextScheduledRoot}else{if((0===e||a<e)&&(e=a,t=c),c===ul)break;n=c,c=c.nextScheduledRoot}}n=bl,null!==n&&n===t&&1===e?Fl++:Fl=0,bl=t,pl=e}function ri(e){oi(0,!0,e)}function li(){oi(1,!1,null)}function oi(e,t,n){if(Zl=n,ai(),t)for(;null!==bl&&0!==pl&&(0===e||e>=pl)&&(!ml||ei()>=pl);)ei(),di(bl,pl,!ml),ai();else for(;null!==bl&&0!==pl&&(0===e||e>=pl);)di(bl,pl,!1),ai();null!==Zl&&(dl=0,gl=null),0!==pl&&ii(pl),Zl=null,ml=!1,ui()}function si(e,t){Il&&i("253"),bl=e,pl=t,di(e,t,!1),li(),ui()}function ui(){if(Fl=0,null!==Al){var e=Al;Al=null;for(var t=0;t<e.length;t++){var n=e[t];try{n._onComplete()}catch(e){hl||(hl=!0,Gl=e)}}}if(hl)throw e=Gl,Gl=null,hl=!1,e}function di(e,t,n){Il&&i("245"),Il=!0,n?(n=e.finishedWork,null!==n?gi(e,n,t):null!==(n=Mn(e,t,!0))&&(Ii()?e.finishedWork=n:gi(e,n,t))):(n=e.finishedWork,null!==n?gi(e,n,t):null!==(n=Mn(e,t,!1))&&gi(e,n,t)),Il=!1}function gi(e,t,n){var c=e.firstBatch;if(null!==c&&c._expirationTime<=n&&(null===Al?Al=[c]:Al.push(c),c._defer))return e.finishedWork=t,void(e.remainingExpirationTime=0);if(e.finishedWork=null,rl=$r=!0,n=t.stateNode,n.current===t&&i("177"),c=n.pendingCommitExpirationTime,0===c&&i("261"),n.pendingCommitExpirationTime=0,ei(),Hc.current=null,1<t.effectTag)if(null!==t.lastEffect){t.lastEffect.nextEffect=t;var a=t.firstEffect}else a=t;else a=t.firstEffect;hr=Ra;var r=Hi();if(Me(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{var o=window.getSelection&&window.getSelection();if(o&&0!==o.rangeCount){l=o.anchorNode;var s=o.anchorOffset,u=o.focusNode;o=o.focusOffset;try{l.nodeType,u.nodeType}catch(e){l=null;break e}var d=0,g=-1,I=-1,b=0,p=0,C=r,m=null;t:for(;;){for(var h;C!==l||0!==s&&3!==C.nodeType||(g=d+s),C!==u||0!==o&&3!==C.nodeType||(I=d+o),3===C.nodeType&&(d+=C.nodeValue.length),null!==(h=C.firstChild);)m=C,C=h;for(;;){if(C===r)break t;if(m===l&&++b===s&&(g=d),m===u&&++p===o&&(I=d),null!==(h=C.nextSibling))break;C=m,m=C.parentNode}C=h}l=-1===g||-1===I?null:{start:g,end:I}}else l=null}l=l||{start:0,end:0}}else l=null;for(Gr={focusedElem:r,selectionRange:l},Le(!1),al=a;null!==al;){r=!1,l=void 0;try{for(;null!==al;){if(256&al.effectTag){var G=al.alternate;switch(s=al,s.tag){case 2:if(256&s.effectTag&&null!==G){var Z=G.memoizedProps,B=G.memoizedState,y=s.stateNode;y.props=s.memoizedProps,y.state=s.memoizedState;var X=y.getSnapshotBeforeUpdate(Z,B);y.__reactInternalSnapshotBeforeUpdate=X}break;case 3:case 5:case 6:case 4:break;default:i("163")}}al=al.nextEffect}}catch(e){r=!0,l=e}r&&(null===al&&i("178"),Kn(al,l),null!==al&&(al=al.nextEffect))}for(al=a;null!==al;){G=!1,Z=void 0;try{for(;null!==al;){var A=al.effectTag;if(16&A&&lt(al.stateNode,""),128&A){var V=al.alternate;if(null!==V){var F=V.ref;null!==F&&("function"===typeof F?F(null):F.current=null)}}switch(14&A){case 2:Hn(al),al.effectTag&=-3;break;case 6:Hn(al),al.effectTag&=-3,Ln(al.alternate,al);break;case 4:Ln(al.alternate,al);break;case 8:B=al,kn(B),B.return=null,B.child=null,B.alternate&&(B.alternate.child=null,B.alternate.return=null)}al=al.nextEffect}}catch(e){G=!0,Z=e}G&&(null===al&&i("178"),Kn(al,Z),null!==al&&(al=al.nextEffect))}if(F=Gr,V=Hi(),A=F.focusedElem,G=F.selectionRange,V!==A&&Li(document.documentElement,A)){null!==G&&Me(A)&&(V=G.start,F=G.end,void 0===F&&(F=V),"selectionStart"in A?(A.selectionStart=V,A.selectionEnd=Math.min(F,A.value.length)):window.getSelection&&(V=window.getSelection(),Z=A[U()].length,F=Math.min(G.start,Z),G=void 0===G.end?F:Math.min(G.end,Z),!V.extend&&F>G&&(Z=G,G=F,F=Z),Z=_e(A,F),B=_e(A,G),Z&&B&&(1!==V.rangeCount||V.anchorNode!==Z.node||V.anchorOffset!==Z.offset||V.focusNode!==B.node||V.focusOffset!==B.offset)&&(y=document.createRange(),y.setStart(Z.node,Z.offset),V.removeAllRanges(),F>G?(V.addRange(y),V.extend(B.node,B.offset)):(y.setEnd(B.node,B.offset),V.addRange(y))))),V=[];for(F=A;F=F.parentNode;)1===F.nodeType&&V.push({element:F,left:F.scrollLeft,top:F.scrollTop});for("function"===typeof A.focus&&A.focus(),A=0;A<V.length;A++)F=V[A],F.element.scrollLeft=F.left,F.element.scrollTop=F.top}for(Gr=null,Le(hr),hr=null,n.current=t,al=a;null!==al;){a=!1,A=void 0;try{for(V=c;null!==al;){var Q=al.effectTag;if(36&Q){var W=al.alternate;switch(F=al,G=V,F.tag){case 2:var v=F.stateNode;if(4&F.effectTag)if(null===W)v.props=F.memoizedProps,v.state=F.memoizedState,v.componentDidMount();else{var R=W.memoizedProps,f=W.memoizedState;v.props=F.memoizedProps,v.state=F.memoizedState,v.componentDidUpdate(R,f,v.__reactInternalSnapshotBeforeUpdate)}var N=F.updateQueue;null!==N&&(v.props=F.memoizedProps,v.state=F.memoizedState,nn(F,N,v,G));break;case 3:var Y=F.updateQueue;if(null!==Y){if(Z=null,null!==F.child)switch(F.child.tag){case 5:Z=F.child.stateNode;break;case 2:Z=F.child.stateNode}nn(F,Y,Z,G)}break;case 5:var S=F.stateNode;null===W&&4&F.effectTag&&Gt(F.type,F.memoizedProps)&&S.focus();break;case 6:case 4:case 15:case 16:break;default:i("163")}}if(128&Q){F=void 0;var x=al.ref;if(null!==x){var J=al.stateNode;switch(al.tag){case 5:F=J;break;default:F=J}"function"===typeof x?x(F):x.current=F}}var T=al.nextEffect;al.nextEffect=null,al=T}}catch(e){a=!0,A=e}a&&(null===al&&i("178"),Kn(al,A),null!==al&&(al=al.nextEffect))}$r=rl=!1,"function"===typeof Et&&Et(t.stateNode),t=n.current.expirationTime,0===t&&(ol=null),e.remainingExpirationTime=t}function Ii(){return!(null===Zl||Zl.timeRemaining()>Ql)&&(ml=!0)}function bi(e){null===bl&&i("246"),bl.remainingExpirationTime=0,hl||(hl=!0,Gl=e)}function pi(e){null===bl&&i("246"),bl.remainingExpirationTime=e}function Ci(e,t){var n=Bl;Bl=!0;try{return e(t)}finally{(Bl=n)||Il||li()}}function mi(e,t){if(Bl&&!yl){yl=!0;try{return e(t)}finally{yl=!1}}return e(t)}function hi(e,t){Il&&i("187");var n=Bl;Bl=!0;try{return ni(e,t)}finally{Bl=n,li()}}function Gi(e,t,n){if(Xl)return e(t,n);Bl||Il||0===Cl||(oi(Cl,!1,null),Cl=0);var i=Xl,c=Bl;Bl=Xl=!0;try{return e(t,n)}finally{Xl=i,(Bl=c)||Il||li()}}function Zi(e){var t=Bl;Bl=!0;try{ni(e)}finally{(Bl=t)||Il||oi(1,!1,null)}}function Bi(e,t,n,c,a){var r=t.current;if(n){n=n._reactInternalFiber;var l;e:{for(2===Ue(n)&&2===n.tag||i("170"),l=n;3!==l.tag;){if(Wt(l)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}(l=l.return)||i("171")}l=l.stateNode.context}n=Wt(n)?Nt(n,l):l}else n=wi;return null===t.context?t.context=n:t.pendingContext=n,t=a,a=_t(c),a.payload={element:e},t=void 0===t?null:t,null!==t&&(a.callback=t),Kt(r,a,c),$n(r,c),c}function yi(e){var t=e._reactInternalFiber;return void 0===t&&("function"===typeof e.render?i("188"):i("268",Object.keys(e))),e=xe(t),null===e?null:e.stateNode}function Xi(e,t,n,i){var c=t.current;return c=qn(ei(),c),Bi(e,t,n,c,i)}function Ai(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Vi(e){var t=e.findFiberByHostInstance;return zt(Ji({},e,{findHostInstanceByFiber:function(e){return e=xe(e),null===e?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null}}))}function Fi(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:wc,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}function Qi(e){this._expirationTime=Pn(),this._root=e,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function Wi(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function vi(e,t,n){this._internalRoot=Lt(e,t,n)}function Ri(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function fi(e,t){if(t||(t=e?9===e.nodeType?e.documentElement:e.firstChild:null,t=!(!t||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new vi(e,!1,t)}function Ni(e,t,n,c,a){Ri(n)||i("200");var r=n._reactRootContainer;if(r){if("function"===typeof a){var l=a;a=function(){var e=Ai(r._internalRoot);l.call(e)}}null!=e?r.legacy_renderSubtreeIntoContainer(e,t,a):r.render(t,a)}else{if(r=n._reactRootContainer=fi(n,c),"function"===typeof a){var o=a;a=function(){var e=Ai(r._internalRoot);o.call(e)}}mi(function(){null!=e?r.legacy_renderSubtreeIntoContainer(e,t,a):r.render(t,a)})}return Ai(r._internalRoot)}function Ui(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return Ri(t)||i("200"),Fi(e,t,null,n)}var Yi=n(8),Si=n(0),xi=n(26),Ji=n(4),Ti=n(10),Hi=n(27),ki=n(28),Li=n(29),wi=n(9);Si||i("227");var zi={_caughtError:null,_hasCaughtError:!1,_rethrowError:null,_hasRethrowError:!1,invokeGuardedCallback:function(e,t,n,i,a,r,l,o,s){c.apply(zi,arguments)},invokeGuardedCallbackAndCatchFirstError:function(e,t,n,i,c,a,r,l,o){if(zi.invokeGuardedCallback.apply(this,arguments),zi.hasCaughtError()){var s=zi.clearCaughtError();zi._hasRethrowError||(zi._hasRethrowError=!0,zi._rethrowError=s)}},rethrowCaughtError:function(){return a.apply(zi,arguments)},hasCaughtError:function(){return zi._hasCaughtError},clearCaughtError:function(){if(zi._hasCaughtError){var e=zi._caughtError;return zi._caughtError=null,zi._hasCaughtError=!1,e}i("198")}},Ei=null,Oi={},Di=[],ji={},_i={},Mi={},Ki={plugins:Di,eventNameDispatchConfigs:ji,registrationNameModules:_i,registrationNameDependencies:Mi,possibleRegistrationNames:null,injectEventPluginOrder:o,injectEventPluginsByName:s},Pi=null,qi=null,$i=null,ec=null,tc={injectEventPluginOrder:o,injectEventPluginsByName:s},nc={injection:tc,getListener:C,runEventsInBatch:m,runExtractedEventsInBatch:h},ic=Math.random().toString(36).slice(2),cc="__reactInternalInstance$"+ic,ac="__reactEventHandlers$"+ic,rc={precacheFiberNode:function(e,t){t[cc]=e},getClosestInstanceFromNode:G,getInstanceFromNode:function(e){return e=e[cc],!e||5!==e.tag&&6!==e.tag?null:e},getNodeFromInstance:Z,getFiberCurrentPropsFromNode:B,updateFiberProps:function(e,t){e[ac]=t}},lc={accumulateTwoPhaseDispatches:v,accumulateTwoPhaseDispatchesSkipTarget:function(e){g(e,F)},accumulateEnterLeaveDispatches:R,accumulateDirectDispatches:function(e){g(e,W)}},oc={animationend:f("Animation","AnimationEnd"),animationiteration:f("Animation","AnimationIteration"),animationstart:f("Animation","AnimationStart"),transitionend:f("Transition","TransitionEnd")},sc={},uc={};xi.canUseDOM&&(uc=document.createElement("div").style,"AnimationEvent"in window||(delete oc.animationend.animation,delete oc.animationiteration.animation,delete oc.animationstart.animation),"TransitionEvent"in window||delete oc.transitionend.transition);var dc=N("animationend"),gc=N("animationiteration"),Ic=N("animationstart"),bc=N("transitionend"),pc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Cc=null,mc={_root:null,_startText:null,_fallbackText:null},hc="dispatchConfig _targetInst nativeEvent isDefaultPrevented isPropagationStopped _dispatchListeners _dispatchInstances".split(" "),Gc={type:null,target:null,currentTarget:Ti.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};Ji(x.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Ti.thatReturnsTrue)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Ti.thatReturnsTrue)},persist:function(){this.isPersistent=Ti.thatReturnsTrue},isPersistent:Ti.thatReturnsFalse,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;for(t=0;t<hc.length;t++)this[hc[t]]=null}}),x.Interface=Gc,x.extend=function(e){function t(){}function n(){return i.apply(this,arguments)}var i=this;t.prototype=i.prototype;var c=new t;return Ji(c,n.prototype),n.prototype=c,n.prototype.constructor=n,n.Interface=Ji({},i.Interface,e),n.extend=i.extend,H(n),n},H(x);var Zc=x.extend({data:null}),Bc=x.extend({data:null}),yc=[9,13,27,32],Xc=xi.canUseDOM&&"CompositionEvent"in window,Ac=null;xi.canUseDOM&&"documentMode"in document&&(Ac=document.documentMode);var Vc=xi.canUseDOM&&"TextEvent"in window&&!Ac,Fc=xi.canUseDOM&&(!Xc||Ac&&8<Ac&&11>=Ac),Qc=String.fromCharCode(32),Wc={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},vc=!1,Rc=!1,fc={eventTypes:Wc,extractEvents:function(e,t,n,i){var c=void 0,a=void 0;if(Xc)e:{switch(e){case"compositionstart":c=Wc.compositionStart;break e;case"compositionend":c=Wc.compositionEnd;break e;case"compositionupdate":c=Wc.compositionUpdate;break e}c=void 0}else Rc?k(e,n)&&(c=Wc.compositionEnd):"keydown"===e&&229===n.keyCode&&(c=Wc.compositionStart);return c?(Fc&&(Rc||c!==Wc.compositionStart?c===Wc.compositionEnd&&Rc&&(a=Y()):(mc._root=i,mc._startText=S(),Rc=!0)),c=Zc.getPooled(c,t,n,i),a?c.data=a:null!==(a=L(n))&&(c.data=a),v(c),a=c):a=null,(e=Vc?w(e,n):z(e,n))?(t=Bc.getPooled(Wc.beforeInput,t,n,i),t.data=e,v(t)):t=null,null===a?t:null===t?a:[a,t]}},Nc=null,Uc={injectFiberControlledHostComponent:function(e){Nc=e}},Yc=null,Sc=null,xc={injection:Uc,enqueueStateRestore:O,needsStateRestore:D,restoreStateIfNeeded:j},Jc=!1,Tc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0},Hc=Si.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,kc="function"===typeof Symbol&&Symbol.for,Lc=kc?Symbol.for("react.element"):60103,wc=kc?Symbol.for("react.portal"):60106,zc=kc?Symbol.for("react.fragment"):60107,Ec=kc?Symbol.for("react.strict_mode"):60108,Oc=kc?Symbol.for("react.profiler"):60114,Dc=kc?Symbol.for("react.provider"):60109,jc=kc?Symbol.for("react.context"):60110,_c=kc?Symbol.for("react.async_mode"):60111,Mc=kc?Symbol.for("react.forward_ref"):60112,Kc=kc?Symbol.for("react.timeout"):60113,Pc="function"===typeof Symbol&&Symbol.iterator,qc=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,$c={},ea={},ta={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ta[e]=new de(e,0,!1,e,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ta[t]=new de(t,1,!1,e[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){ta[e]=new de(e,2,!1,e.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","preserveAlpha"].forEach(function(e){ta[e]=new de(e,2,!1,e,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ta[e]=new de(e,3,!1,e.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(e){ta[e]=new de(e,3,!0,e.toLowerCase(),null)}),["capture","download"].forEach(function(e){ta[e]=new de(e,4,!1,e.toLowerCase(),null)}),["cols","rows","size","span"].forEach(function(e){ta[e]=new de(e,6,!1,e.toLowerCase(),null)}),["rowSpan","start"].forEach(function(e){ta[e]=new de(e,5,!1,e.toLowerCase(),null)});var na=/[\-:]([a-z])/g;"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(na,ge);ta[t]=new de(t,1,!1,e,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(na,ge);ta[t]=new de(t,1,!1,e,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(na,ge);ta[t]=new de(t,1,!1,e,"http://www.w3.org/XML/1998/namespace")}),ta.tabIndex=new de("tabIndex",1,!1,"tabindex",null);var ia={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}},ca=null,aa=null,ra=!1;xi.canUseDOM&&(ra=ee("input")&&(!document.documentMode||9<document.documentMode));var la={eventTypes:ia,_isInputEventSupported:ra,extractEvents:function(e,t,n,i){var c=t?Z(t):window,a=void 0,r=void 0,l=c.nodeName&&c.nodeName.toLowerCase();if("select"===l||"input"===l&&"file"===c.type?a=Ae:q(c)?ra?a=Re:(a=We,r=Qe):(l=c.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===c.type||"radio"===c.type)&&(a=ve),a&&(a=a(e,t)))return Be(a,n,i);r&&r(e,c,t),"blur"===e&&(e=c._wrapperState)&&e.controlled&&"number"===c.type&&Ge(c,"number",c.value)}},oa=x.extend({view:null,detail:null}),sa={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"},ua=oa.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Ne,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)}}),da=ua.extend({pointerId:null,width:null,height:null,pressure:null,tiltX:null,tiltY:null,pointerType:null,isPrimary:null}),ga={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Ia={eventTypes:ga,extractEvents:function(e,t,n,i){var c="mouseover"===e||"pointerover"===e,a="mouseout"===e||"pointerout"===e;if(c&&(n.relatedTarget||n.fromElement)||!a&&!c)return null;if(c=i.window===i?i:(c=i.ownerDocument)?c.defaultView||c.parentWindow:window,a?(a=t,t=(t=n.relatedTarget||n.toElement)?G(t):null):a=null,a===t)return null;var r=void 0,l=void 0,o=void 0,s=void 0;return"mouseout"===e||"mouseover"===e?(r=ua,l=ga.mouseLeave,o=ga.mouseEnter,s="mouse"):"pointerout"!==e&&"pointerover"!==e||(r=da,l=ga.pointerLeave,o=ga.pointerEnter,s="pointer"),e=null==a?c:Z(a),c=null==t?c:Z(t),l=r.getPooled(l,a,n,i),l.type=s+"leave",l.target=e,l.relatedTarget=c,n=r.getPooled(o,t,n,i),n.type=s+"enter",n.target=c,n.relatedTarget=e,R(l,n,a,t),[l,n]}},ba=x.extend({animationName:null,elapsedTime:null,pseudoElement:null}),pa=x.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ca=oa.extend({relatedTarget:null}),ma={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ha={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ga=oa.extend({key:function(e){if(e.key){var t=ma[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?(e=Te(e),13===e?"Enter":String.fromCharCode(e)):"keydown"===e.type||"keyup"===e.type?ha[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Ne,charCode:function(e){return"keypress"===e.type?Te(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Te(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Za=ua.extend({dataTransfer:null}),Ba=oa.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Ne}),ya=x.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),Xa=ua.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),Aa=[["abort","abort"],[dc,"animationEnd"],[gc,"animationIteration"],[Ic,"animationStart"],["canplay","canPlay"],["canplaythrough","canPlayThrough"],["drag","drag"],["dragenter","dragEnter"],["dragexit","dragExit"],["dragleave","dragLeave"],["dragover","dragOver"],["durationchange","durationChange"],["emptied","emptied"],["encrypted","encrypted"],["ended","ended"],["error","error"],["gotpointercapture","gotPointerCapture"],["load","load"],["loadeddata","loadedData"],["loadedmetadata","loadedMetadata"],["loadstart","loadStart"],["lostpointercapture","lostPointerCapture"],["mousemove","mouseMove"],["mouseout","mouseOut"],["mouseover","mouseOver"],["playing","playing"],["pointermove","pointerMove"],["pointerout","pointerOut"],["pointerover","pointerOver"],["progress","progress"],["scroll","scroll"],["seeking","seeking"],["stalled","stalled"],["suspend","suspend"],["timeupdate","timeUpdate"],["toggle","toggle"],["touchmove","touchMove"],[bc,"transitionEnd"],["waiting","waiting"],["wheel","wheel"]],Va={},Fa={};[["blur","blur"],["cancel","cancel"],["click","click"],["close","close"],["contextmenu","contextMenu"],["copy","copy"],["cut","cut"],["dblclick","doubleClick"],["dragend","dragEnd"],["dragstart","dragStart"],["drop","drop"],["focus","focus"],["input","input"],["invalid","invalid"],["keydown","keyDown"],["keypress","keyPress"],["keyup","keyUp"],["mousedown","mouseDown"],["mouseup","mouseUp"],["paste","paste"],["pause","pause"],["play","play"],["pointercancel","pointerCancel"],["pointerdown","pointerDown"],["pointerup","pointerUp"],["ratechange","rateChange"],["reset","reset"],["seeked","seeked"],["submit","submit"],["touchcancel","touchCancel"],["touchend","touchEnd"],["touchstart","touchStart"],["volumechange","volumeChange"]].forEach(function(e){He(e,!0)}),Aa.forEach(function(e){He(e,!1)});var Qa={eventTypes:Va,isInteractiveTopLevelEventType:function(e){return void 0!==(e=Fa[e])&&!0===e.isInteractive},extractEvents:function(e,t,n,i){var c=Fa[e];if(!c)return null;switch(e){case"keypress":if(0===Te(n))return null;case"keydown":case"keyup":e=Ga;break;case"blur":case"focus":e=Ca;break;case"click":if(2===n.button)return null;case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=ua;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=Za;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=Ba;break;case dc:case gc:case Ic:e=ba;break;case bc:e=ya;break;case"scroll":e=oa;break;case"wheel":e=Xa;break;case"copy":case"cut":case"paste":e=pa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=da;break;default:e=x}return t=e.getPooled(c,t,n,i),v(t),t}},Wa=Qa.isInteractiveTopLevelEventType,va=[],Ra=!0,fa={get _enabled(){return Ra},setEnabled:Le,isEnabled:function(){return Ra},trapBubbledEvent:we,trapCapturedEvent:ze,dispatchEvent:Oe},Na={},Ua=0,Ya="_reactListenersID"+(""+Math.random()).slice(2),Sa=xi.canUseDOM&&"documentMode"in document&&11>=document.documentMode,xa={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Ja=null,Ta=null,Ha=null,ka=!1,La={eventTypes:xa,extractEvents:function(e,t,n,i){var c,a=i.window===i?i.document:9===i.nodeType?i:i.ownerDocument;if(!(c=!a)){e:{a=De(a),c=Mi.onSelect;for(var r=0;r<c.length;r++){var l=c[r];if(!a.hasOwnProperty(l)||!a[l]){a=!1;break e}}a=!0}c=!a}if(c)return null;switch(a=t?Z(t):window,e){case"focus":(q(a)||"true"===a.contentEditable)&&(Ja=a,Ta=t,Ha=null);break;case"blur":Ha=Ta=Ja=null;break;case"mousedown":ka=!0;break;case"contextmenu":case"mouseup":return ka=!1,Ke(n,i);case"selectionchange":if(Sa)break;case"keydown":case"keyup":return Ke(n,i)}return null}};tc.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin TapEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),Pi=rc.getFiberCurrentPropsFromNode,qi=rc.getInstanceFromNode,$i=rc.getNodeFromInstance,tc.injectEventPluginsByName({SimpleEventPlugin:Qa,EnterLeaveEventPlugin:Ia,ChangeEventPlugin:la,SelectEventPlugin:La,BeforeInputEventPlugin:fc});var wa="function"===typeof requestAnimationFrame?requestAnimationFrame:void 0,za=Date,Ea=setTimeout,Oa=clearTimeout,Da=void 0;if("object"===typeof performance&&"function"===typeof performance.now){var ja=performance;Da=function(){return ja.now()}}else Da=function(){return za.now()};var _a=void 0,Ma=void 0;if(xi.canUseDOM){var Ka="function"===typeof wa?wa:function(){i("276")},Pa=null,qa=null,$a=-1,er=!1,tr=!1,nr=0,ir=33,cr=33,ar={didTimeout:!1,timeRemaining:function(){var e=nr-Da();return 0<e?e:0}},rr=function(e,t){var n=e.scheduledCallback,i=!1;try{n(t),i=!0}finally{Ma(e),i||(er=!0,window.postMessage(lr,"*"))}},lr="__reactIdleCallback$"+Math.random().toString(36).slice(2);window.addEventListener("message",function(e){if(e.source===window&&e.data===lr&&(er=!1,null!==Pa)){if(null!==Pa){var t=Da();if(!(-1===$a||$a>t)){e=-1;for(var n=[],i=Pa;null!==i;){var c=i.timeoutTime;-1!==c&&c<=t?n.push(i):-1!==c&&(-1===e||c<e)&&(e=c),i=i.next}if(0<n.length)for(ar.didTimeout=!0,t=0,i=n.length;t<i;t++)rr(n[t],ar);$a=e}}for(e=Da();0<nr-e&&null!==Pa;)e=Pa,ar.didTimeout=!1,rr(e,ar),e=Da();null===Pa||tr||(tr=!0,Ka(or))}},!1);var or=function(e){tr=!1;var t=e-nr+cr;t<cr&&ir<cr?(8>t&&(t=8),cr=t<ir?ir:t):ir=t,nr=e+cr,er||(er=!0,window.postMessage(lr,"*"))};_a=function(e,t){var n=-1;return null!=t&&"number"===typeof t.timeout&&(n=Da()+t.timeout),(-1===$a||-1!==n&&n<$a)&&($a=n),e={scheduledCallback:e,timeoutTime:n,prev:null,next:null},null===Pa?Pa=e:null!==(t=e.prev=qa)&&(t.next=e),qa=e,tr||(tr=!0,Ka(or)),e},Ma=function(e){if(null!==e.prev||Pa===e){var t=e.next,n=e.prev;e.next=null,e.prev=null,null!==t?null!==n?(n.next=t,t.prev=n):(t.prev=null,Pa=t):null!==n?(n.next=null,qa=n):qa=Pa=null}}}else{var sr=new Map;_a=function(e){var t={scheduledCallback:e,timeoutTime:0,next:null,prev:null},n=Ea(function(){e({timeRemaining:function(){return 1/0},didTimeout:!1})});return sr.set(e,n),t},Ma=function(e){var t=sr.get(e.scheduledCallback);sr.delete(e),Oa(t)}}var ur={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"},dr=void 0,gr=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,i,c){MSApp.execUnsafeLocalFunction(function(){return e(t,n)})}:e}(function(e,t){if(e.namespaceURI!==ur.svg||"innerHTML"in e)e.innerHTML=t;else{for(dr=dr||document.createElement("div"),dr.innerHTML="<svg>"+t+"</svg>",t=dr.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}),Ir={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},br=["Webkit","ms","Moz","O"];Object.keys(Ir).forEach(function(e){br.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ir[t]=Ir[e]})});var pr=Ji({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),Cr=Ti.thatReturns(""),mr={createElement:gt,createTextNode:It,setInitialProperties:bt,diffProperties:pt,updateProperties:Ct,diffHydratedProperties:mt,diffHydratedText:ht,warnForUnmatchedText:function(){},warnForDeletedHydratableElement:function(){},warnForDeletedHydratableText:function(){},warnForInsertedHydratedElement:function(){},warnForInsertedHydratedText:function(){},restoreControlledState:function(e,t,n){switch(t){case"input":if(me(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var c=n[t];if(c!==e&&c.form===e.form){var a=B(c);a||i("90"),ce(c),me(c,a)}}}break;case"textarea":it(e,n);break;case"select":null!=(t=n.value)&&$e(e,!!n.multiple,t,!1)}}},hr=null,Gr=null,Zr=Da,Br=_a,yr=Ma;new Set;var Xr=[],Ar=-1,Vr=Xt(wi),Fr=Xt(!1),Qr=wi,Wr=null,vr=null,Rr=!1,fr=Xt(null),Nr=Xt(null),Ur=Xt(0),Yr={},Sr=Xt(Yr),xr=Xt(Yr),Jr=Xt(Yr),Tr={isMounted:function(e){return!!(e=e._reactInternalFiber)&&2===Ue(e)},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var i=ei();i=qn(i,e);var c=_t(i);c.payload=t,void 0!==n&&null!==n&&(c.callback=n),Kt(e,c,i),$n(e,i)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var i=ei();i=qn(i,e);var c=_t(i);c.tag=1,c.payload=t,void 0!==n&&null!==n&&(c.callback=n),Kt(e,c,i),$n(e,i)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=ei();n=qn(n,e);var i=_t(n);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),Kt(e,i,n),$n(e,n)}},Hr=Array.isArray,kr=mn(!0),Lr=mn(!1),wr=null,zr=null,Er=!1,Or=void 0,Dr=void 0,jr=void 0;Or=function(){},Dr=function(e,t,n){(t.updateQueue=n)&&Un(t)},jr=function(e,t,n,i){n!==i&&Un(t)};var _r=Zr(),Mr=2,Kr=_r,Pr=0,qr=0,$r=!1,el=null,tl=null,nl=0,il=-1,cl=!1,al=null,rl=!1,ll=!1,ol=null,sl=null,ul=null,dl=0,gl=void 0,Il=!1,bl=null,pl=0,Cl=0,ml=!1,hl=!1,Gl=null,Zl=null,Bl=!1,yl=!1,Xl=!1,Al=null,Vl=1e3,Fl=0,Ql=1,Wl={updateContainerAtExpirationTime:Bi,createContainer:function(e,t,n){return Lt(e,t,n)},updateContainer:Xi,flushRoot:si,requestWork:ci,computeUniqueAsyncExpiration:Pn,batchedUpdates:Ci,unbatchedUpdates:mi,deferredUpdates:ti,syncUpdates:ni,interactiveUpdates:Gi,flushInteractiveUpdates:function(){Il||0===Cl||(oi(Cl,!1,null),Cl=0)},flushControlled:Zi,flushSync:hi,getPublicRootInstance:Ai,findHostInstance:yi,findHostInstanceWithNoPortals:function(e){return e=Je(e),null===e?null:e.stateNode},injectIntoDevTools:Vi};Uc.injectFiberControlledHostComponent(mr),Qi.prototype.render=function(e){this._defer||i("250"),this._hasChildren=!0,this._children=e;var t=this._root._internalRoot,n=this._expirationTime,c=new Wi;return Bi(e,t,null,n,c._onCommit),c},Qi.prototype.then=function(e){if(this._didComplete)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},Qi.prototype.commit=function(){var e=this._root._internalRoot,t=e.firstBatch;if(this._defer&&null!==t||i("251"),this._hasChildren){var n=this._expirationTime;if(t!==this){this._hasChildren&&(n=this._expirationTime=t._expirationTime,this.render(this._children));for(var c=null,a=t;a!==this;)c=a,a=a._next;null===c&&i("251"),c._next=a._next,this._next=t,e.firstBatch=this}this._defer=!1,si(e,n),t=this._next,this._next=null,t=e.firstBatch=t,null!==t&&t._hasChildren&&t.render(t._children)}else this._next=null,this._defer=!1},Qi.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++)(0,e[t])()}},Wi.prototype.then=function(e){if(this._didCommit)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},Wi.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++){var n=e[t];"function"!==typeof n&&i("191",n),n()}}},vi.prototype.render=function(e,t){var n=this._internalRoot,i=new Wi;return t=void 0===t?null:t,null!==t&&i.then(t),Xi(e,n,null,i._onCommit),i},vi.prototype.unmount=function(e){var t=this._internalRoot,n=new Wi;return e=void 0===e?null:e,null!==e&&n.then(e),Xi(null,t,null,n._onCommit),n},vi.prototype.legacy_renderSubtreeIntoContainer=function(e,t,n){var i=this._internalRoot,c=new Wi;return n=void 0===n?null:n,null!==n&&c.then(n),Xi(t,i,e,c._onCommit),c},vi.prototype.createBatch=function(){var e=new Qi(this),t=e._expirationTime,n=this._internalRoot,i=n.firstBatch;if(null===i)n.firstBatch=e,e._next=null;else{for(n=null;null!==i&&i._expirationTime<=t;)n=i,i=i._next;e._next=i,null!==n&&(n._next=e)}return e},_=Wl.batchedUpdates,M=Wl.interactiveUpdates,K=Wl.flushInteractiveUpdates;var vl={createPortal:Ui,findDOMNode:function(e){return null==e?null:1===e.nodeType?e:yi(e)},hydrate:function(e,t,n){return Ni(null,e,t,!0,n)},render:function(e,t,n){return Ni(null,e,t,!1,n)},unstable_renderSubtreeIntoContainer:function(e,t,n,c){return(null==e||void 0===e._reactInternalFiber)&&i("38"),Ni(e,t,n,!1,c)},unmountComponentAtNode:function(e){return Ri(e)||i("40"),!!e._reactRootContainer&&(mi(function(){Ni(null,null,e,!1,function(){e._reactRootContainer=null})}),!0)},unstable_createPortal:function(){return Ui.apply(void 0,arguments)},unstable_batchedUpdates:Ci,unstable_deferredUpdates:ti,unstable_interactiveUpdates:Gi,flushSync:hi,unstable_flushControlled:Zi,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{EventPluginHub:nc,EventPluginRegistry:Ki,EventPropagators:lc,ReactControlledComponent:xc,ReactDOMComponentTree:rc,ReactDOMEventListener:fa},unstable_createRoot:function(e,t){return new vi(e,!0,null!=t&&!0===t.hydrate)}};Vi({findFiberByHostInstance:G,bundleType:0,version:"16.4.1",rendererPackageName:"react-dom"});var Rl={default:vl},fl=Rl&&vl||Rl;e.exports=fl.default?fl.default:fl},function(e,t,n){"use strict";var i=!("undefined"===typeof window||!window.document||!window.document.createElement),c={canUseDOM:i,canUseWorkers:"undefined"!==typeof Worker,canUseEventListeners:i&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:i&&!!window.screen,isInWorker:!i};e.exports=c},function(e,t,n){"use strict";function i(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}e.exports=i},function(e,t,n){"use strict";function i(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function c(e,t){if(i(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),c=Object.keys(t);if(n.length!==c.length)return!1;for(var r=0;r<n.length;r++)if(!a.call(t,n[r])||!i(e[n[r]],t[n[r]]))return!1;return!0}var a=Object.prototype.hasOwnProperty;e.exports=c},function(e,t,n){"use strict";function i(e,t){return!(!e||!t)&&(e===t||!c(e)&&(c(t)?i(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}var c=n(30);e.exports=i},function(e,t,n){"use strict";function i(e){return c(e)&&3==e.nodeType}var c=n(31);e.exports=i},function(e,t,n){"use strict";function i(e){var t=e?e.ownerDocument||e:document,n=t.defaultView||window;return!(!e||!("function"===typeof n.Node?e instanceof n.Node:"object"===typeof e&&"number"===typeof e.nodeType&&"string"===typeof e.nodeName))}e.exports=i},function(e,t){},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(0),l=n.n(r),o=n(34),s=(n.n(o),n(47)),u=(n.n(s),n(49)),d=(n.n(u),n(50)),g=(n.n(d),n(51)),I=(n.n(g),n(53)),b=n.n(I),p=n(55),C=n(61),m=n(63),h=(n.n(m),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),G=function(e){function t(e){i(this,t);var n=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={stream:null,connecting:!1,audio:!0,video:!0},n.start=n.start.bind(n),n.handleEvent=n.handleEvent.bind(n),n.toggleAudio=n.toggleAudio.bind(n),n.toggleVideo=n.toggleVideo.bind(n),n}return a(t,e),h(t,[{key:"componentDidMount",value:function(){b.a.onEvent(this.handleEvent)}},{key:"handleEvent",value:function(e){if("accept"!==e.type)return void console.debug("[App]","Ignore received event:",e.type);this.setState({local:e.localStream,stream:e.remoteStream,connecting:!1})}},{key:"toggleAudio",value:function(){b.a.send({type:"change_stream",stream:this.state.localStream,video:this.state.video,audio:!this.state.audio}),this.setState({audio:!this.state.audio})}},{key:"toggleVideo",value:function(){b.a.send({type:"change_stream",stream:this.state.localStream,video:!this.state.video,audio:this.state.audio}),this.setState({video:!this.state.video})}},{key:"start",value:function(e){var t=e.target.value.trim();24===t.length&&(this.setState({connecting:!0}),b.a.start(t))}},{key:"render",value:function(){return l.a.createElement(u.ThemeProvider,{options:{primary:"#9e206c",secondary:"#6d6d6d"}},l.a.createElement(p.a,{title:"Web GUI React App"}),l.a.createElement(d.Grid,{className:"App"},l.a.createElement(d.GridCell,{span:"12"},this.state.connecting&&l.a.createElement(g.LinearProgress,{determinate:!1})),l.a.createElement(d.GridCell,{span:"11"},!this.state.stream&&l.a.createElement(r.Fragment,null,l.a.createElement(o.TextField,{outlined:!0,label:"Meeting Access Key",onChange:this.start,disabled:this.state.connecting}),l.a.createElement(o.TextFieldHelperText,null,"Get an user access key from starting a meeting via the API or use one from an active meeting.")),this.state.stream&&l.a.createElement(C.a,{src:this.state.stream})),l.a.createElement(d.GridCell,{span:"1",className:"App-sidebar"},this.state.stream&&l.a.createElement(r.Fragment,null,l.a.createElement(s.IconButton,{checked:this.state.audio,onClick:this.toggleAudio,label:"Toggle audio",onContent:"mic",offContent:"mic_off"}),l.a.createElement(s.IconButton,{checked:this.state.video,onClick:this.toggleVideo,label:"Toggle video",onContent:"videocam",offContent:"videocam_off"})))))}}]),t}(r.Component);t.a=G},function(e,t,n){"use strict";function i(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.TextField=t.TextFieldIcon=t.TextFieldHelperText=t.TextFieldTextarea=t.TextFieldInput=t.TextFieldRoot=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function e(t,n,i){null===t&&(t=Function.prototype);var c=Object.getOwnPropertyDescriptor(t,n);if(void 0===c){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in c)return c.value;var r=c.get;if(void 0!==r)return r.call(i)},s=n(0),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(s),d=n(35),g=n(1),I=n(3),b=n(44),p=n(45),C=n(46),m=t.TextFieldRoot=(0,g.simpleTag)({displayName:"TextFieldRoot",classNames:function(e){return["mdc-text-field","mdc-text-field--upgraded",{"mdc-text-field--textarea":e.textarea,"mdc-text-field--fullwidth":e.fullwidth,"mdc-text-field--box":e.box,"mdc-text-field--outlined":e.outlined,"mdc-text-field--dense":e.dense,"mdc-text-field--invalid":e.invalid,"mdc-text-field--disabled":e.disabled,"mdc-text-field--with-leading-icon":e.withLeadingIcon,"mdc-text-field--with-trailing-icon":e.withTrailingIcon}]},consumeProps:["textarea","box","fullwidth","outlined","dense","invalid","disabled","withLeadingIcon","withTrailingIcon"]}),h=t.TextFieldInput=(0,g.simpleTag)({displayName:"TextFieldInput",tag:"input",classNames:"mdc-text-field__input",defaultProps:{type:"text"}}),G=t.TextFieldTextarea=(0,g.simpleTag)({displayName:"TextFieldTextarea",tag:"textarea",classNames:"mdc-text-field__input"}),Z=(t.TextFieldHelperText=function(e){function t(){return c(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),l(t,[{key:"render",value:function(){return o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this)}}]),t}((0,g.simpleTag)({displayName:"TextFieldHelperText",tag:"p",classNames:function(e){return["mdc-text-field-helper-text",{"mdc-text-field-helper-text--persistent":e.persistent,"mdc-text-field-helper-text--validation-msg":e.validationMsg}]},consumeProps:["persistent","validationMsg"]})),t.TextFieldIcon=function(e){function t(){return c(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),l(t,[{key:"render",value:function(){return o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this)}}]),t}((0,g.simpleTag)({tag:I.Icon,classNames:"mdc-text-field__icon"})));Object.defineProperty(Z,"displayName",{enumerable:!0,writable:!0,value:"TextFieldIcon"});var B=t.TextField=function(e){function t(){return c(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),l(t,[{key:"syncWithProps",value:function(e){var t=this;(0,g.syncFoundationProp)(e.invalid,!this.valid,function(){return t.valid=!e.invalid}),(0,g.syncFoundationProp)(e.value,!this.value,function(){t.value=e.value}),(0,g.syncFoundationProp)(e.disabled,this.disabled,function(){return t.disabled=!!e.disabled})}},{key:"render",value:function(){var e=this.props,t=e.label,n=void 0===t?"":t,c=e.className,a=e.inputRef,r=e.box,l=e.outlined,o=e.fullwidth,s=e.dense,d=e.invalid,I=e.disabled,B=e.withLeadingIcon,y=e.withTrailingIcon,X=e.children,A=e.textarea,V=e.rootProps,F=void 0===V?{}:V,Q=(e.apiRef,i(e,["label","className","inputRef","box","outlined","fullwidth","dense","invalid","disabled","withLeadingIcon","withTrailingIcon","children","textarea","rootProps","apiRef"])),W=this.foundationRefs.root_,v=Object.assign({},Q,{disabled:I,elementRef:a,id:Q.id||(0,g.randomId)("text-field")}),R=A?u.createElement(G,v):u.createElement(h,v),f=function(e){return e&&"string"===typeof e||e.type&&e.type.displayName!==Z.displayName?u.createElement(Z,{use:e}):e};return u.createElement(m,Object.assign({},F,{invalid:d,withLeadingIcon:!!B,withTrailingIcon:!!y,textarea:A,box:r,dense:s,disabled:I,outlined:l,fullwidth:o,elementRef:W,className:c}),!!B&&f(B),X,R,!!n&&u.createElement(p.FloatingLabel,{htmlFor:v.id},n),!!y&&f(y),!!l&&u.createElement(C.NotchedOutline,null),l?u.createElement(C.NotchedOutlineIdle,null):u.createElement(b.LineRipple,null))}}]),t}((0,g.withFoundation)({constructor:d.MDCTextField,adapter:{}}));Object.defineProperty(B,"displayName",{enumerable:!0,writable:!0,value:"TextField"}),t.default=B},function(e,t,n){!function(t,n){e.exports=n()}(0,function(){return function(e){function t(i){if(n[i])return n[i].exports;var c=n[i]={i:i,l:!1,exports:{}};return e[i].call(c.exports,c,c.exports,t),c.l=!0,c.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=109)}([function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.adapter_=t}return c(e,null,[{key:"cssClasses",get:function(){return{}}},{key:"strings",get:function(){return{}}},{key:"numbers",get:function(){return{}}},{key:"defaultAdapter",get:function(){return{}}}]),c(e,[{key:"init",value:function(){}},{key:"destroy",value:function(){}}]),e}();t.a=a},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=n(0),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;i(this,e),this.root_=t;for(var c=arguments.length,a=Array(c>2?c-2:0),r=2;r<c;r++)a[r-2]=arguments[r];this.initialize.apply(this,a),this.foundation_=void 0===n?this.getDefaultFoundation():n,this.foundation_.init(),this.initialSyncWithDOM()}return a(e,null,[{key:"attachTo",value:function(t){return new e(t,new c.a)}}]),a(e,[{key:"initialize",value:function(){}},{key:"getDefaultFoundation",value:function(){throw new Error("Subclasses must override getDefaultFoundation to return a properly configured foundation class")}},{key:"initialSyncWithDOM",value:function(){}},{key:"destroy",value:function(){this.foundation_.destroy()}},{key:"listen",value:function(e,t){this.root_.addEventListener(e,t)}},{key:"unlisten",value:function(e,t){this.root_.removeEventListener(e,t)}},{key:"emit",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=void 0;"function"===typeof CustomEvent?i=new CustomEvent(e,{detail:t,bubbles:n}):(i=document.createEvent("CustomEvent"),i.initCustomEvent(e,n,!1,t)),this.root_.dispatchEvent(i)}}]),e}();t.a=r},function(e,t,n){"use strict";function i(e){var t=e.document,n=t.createElement("div");n.className="mdc-ripple-surface--test-edge-var-bug",t.body.appendChild(n);var i=e.getComputedStyle(n),c=null!==i&&"solid"===i.borderTopStyle;return n.remove(),c}function c(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=o;if("boolean"===typeof o&&!t)return n;if(e.CSS&&"function"===typeof e.CSS.supports){var c=e.CSS.supports("--css-vars","yes"),a=e.CSS.supports("(--css-vars: yes)")&&e.CSS.supports("color","#00000000");return n=!(!c&&!a)&&!i(e),t||(o=n),n}}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(void 0===s||t){var n=!1;try{e.document.addEventListener("test",null,{get passive(){n=!0}})}catch(e){}s=n}return!!s&&{passive:!0}}function r(e){return["webkitMatchesSelector","msMatchesSelector","matches"].filter(function(t){return t in e}).pop()}function l(e,t,n){var i=t.x,c=t.y,a=i+n.left,r=c+n.top,l=void 0,o=void 0;return"touchstart"===e.type?(l=e.changedTouches[0].pageX-a,o=e.changedTouches[0].pageY-r):(l=e.pageX-a,o=e.pageY-r),{x:l,y:o}}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"supportsCssVariables",function(){return c}),n.d(t,"applyPassive",function(){return a}),n.d(t,"getMatchesProperty",function(){return r}),n.d(t,"getNormalizedEventCoords",function(){return l});var o=void 0,s=void 0},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();!function(){function e(){i(this,e)}c(e,[{key:"browserSupportsCssVars",value:function(){}},{key:"isUnbounded",value:function(){}},{key:"isSurfaceActive",value:function(){}},{key:"isSurfaceDisabled",value:function(){}},{key:"addClass",value:function(e){}},{key:"removeClass",value:function(e){}},{key:"containsEventTarget",value:function(e){}},{key:"registerInteractionHandler",value:function(e,t){}},{key:"deregisterInteractionHandler",value:function(e,t){}},{key:"registerDocumentInteractionHandler",value:function(e,t){}},{key:"deregisterDocumentInteractionHandler",value:function(e,t){}},{key:"registerResizeHandler",value:function(e){}},{key:"deregisterResizeHandler",value:function(e){}},{key:"updateCssVariable",value:function(e,t){}},{key:"computeBoundingRect",value:function(){}},{key:"getWindowPageOffset",value:function(){}}])}()},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"MDCRipple",function(){return u}),n.d(t,"RippleCapableSurface",function(){return d});var r=n(1),l=(n(3),n(5)),o=n(2);n.d(t,"MDCRippleFoundation",function(){return l.a}),n.d(t,"util",function(){return o});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(e){function t(){var e;i(this,t);for(var n=arguments.length,a=Array(n),r=0;r<n;r++)a[r]=arguments[r];var l=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a)));return l.disabled=!1,l.unbounded_,l}return a(t,e),s(t,[{key:"setUnbounded_",value:function(){this.foundation_.setUnbounded(this.unbounded_)}},{key:"activate",value:function(){this.foundation_.activate()}},{key:"deactivate",value:function(){this.foundation_.deactivate()}},{key:"layout",value:function(){this.foundation_.layout()}},{key:"getDefaultFoundation",value:function(){return new l.a(t.createAdapter(this))}},{key:"initialSyncWithDOM",value:function(){this.unbounded="mdcRippleIsUnbounded"in this.root_.dataset}},{key:"unbounded",get:function(){return this.unbounded_},set:function(e){this.unbounded_=Boolean(e),this.setUnbounded_()}}],[{key:"attachTo",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.isUnbounded,c=void 0===i?void 0:i,a=new t(e);return void 0!==c&&(a.unbounded=c),a}},{key:"createAdapter",value:function(e){var t=o.getMatchesProperty(HTMLElement.prototype);return{browserSupportsCssVars:function(){return o.supportsCssVariables(window)},isUnbounded:function(){return e.unbounded},isSurfaceActive:function(){return e.root_[t](":active")},isSurfaceDisabled:function(){return e.disabled},addClass:function(t){return e.root_.classList.add(t)},removeClass:function(t){return e.root_.classList.remove(t)},containsEventTarget:function(t){return e.root_.contains(t)},registerInteractionHandler:function(t,n){return e.root_.addEventListener(t,n,o.applyPassive())},deregisterInteractionHandler:function(t,n){return e.root_.removeEventListener(t,n,o.applyPassive())},registerDocumentInteractionHandler:function(e,t){return document.documentElement.addEventListener(e,t,o.applyPassive())},deregisterDocumentInteractionHandler:function(e,t){return document.documentElement.removeEventListener(e,t,o.applyPassive())},registerResizeHandler:function(e){return window.addEventListener("resize",e)},deregisterResizeHandler:function(e){return window.removeEventListener("resize",e)},updateCssVariable:function(t,n){return e.root_.style.setProperty(t,n)},computeBoundingRect:function(){return e.root_.getBoundingClientRect()},getWindowPageOffset:function(){return{x:window.pageXOffset,y:window.pageYOffset}}}}}]),t}(r.a),d=function e(){i(this,e)};d.prototype.root_,d.prototype.unbounded,d.prototype.disabled},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(0),l=(n(3),n(6)),o=n(2),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=["touchstart","pointerdown","mousedown","keydown"],g=["touchend","pointerup","mouseup"],I=[],b=function(e){function t(e){i(this,t);var n=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,s(t.defaultAdapter,e)));return n.layoutFrame_=0,n.frame_={width:0,height:0},n.activationState_=n.defaultActivationState_(),n.initialSize_=0,n.maxRadius_=0,n.activateHandler_=function(e){return n.activate_(e)},n.deactivateHandler_=function(e){return n.deactivate_(e)},n.focusHandler_=function(){return n.handleFocus()},n.blurHandler_=function(){return n.handleBlur()},n.resizeHandler_=function(){return n.layout()},n.unboundedCoords_={left:0,top:0},n.fgScale_=0,n.activationTimer_=0,n.fgDeactivationRemovalTimer_=0,n.activationAnimationHasEnded_=!1,n.activationTimerCallback_=function(){n.activationAnimationHasEnded_=!0,n.runDeactivationUXLogicIfReady_()},n.previousActivationEvent_=null,n}return a(t,e),u(t,null,[{key:"cssClasses",get:function(){return l.a}},{key:"strings",get:function(){return l.c}},{key:"numbers",get:function(){return l.b}},{key:"defaultAdapter",get:function(){return{browserSupportsCssVars:function(){},isUnbounded:function(){},isSurfaceActive:function(){},isSurfaceDisabled:function(){},addClass:function(){},removeClass:function(){},containsEventTarget:function(){},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){},registerDocumentInteractionHandler:function(){},deregisterDocumentInteractionHandler:function(){},registerResizeHandler:function(){},deregisterResizeHandler:function(){},updateCssVariable:function(){},computeBoundingRect:function(){},getWindowPageOffset:function(){}}}}]),u(t,[{key:"isSupported_",value:function(){return this.adapter_.browserSupportsCssVars()}},{key:"defaultActivationState_",value:function(){return{isActivated:!1,hasDeactivationUXRun:!1,wasActivatedByPointer:!1,wasElementMadeActive:!1,activationEvent:null,isProgrammatic:!1}}},{key:"init",value:function(){var e=this;if(this.isSupported_()){this.registerRootHandlers_();var n=t.cssClasses,i=n.ROOT,c=n.UNBOUNDED;requestAnimationFrame(function(){e.adapter_.addClass(i),e.adapter_.isUnbounded()&&(e.adapter_.addClass(c),e.layoutInternal_())})}}},{key:"destroy",value:function(){var e=this;if(this.isSupported_()){if(this.activationTimer_){clearTimeout(this.activationTimer_),this.activationTimer_=0;var n=t.cssClasses.FG_ACTIVATION;this.adapter_.removeClass(n)}this.deregisterRootHandlers_(),this.deregisterDeactivationHandlers_();var i=t.cssClasses,c=i.ROOT,a=i.UNBOUNDED;requestAnimationFrame(function(){e.adapter_.removeClass(c),e.adapter_.removeClass(a),e.removeCssVars_()})}}},{key:"registerRootHandlers_",value:function(){var e=this;d.forEach(function(t){e.adapter_.registerInteractionHandler(t,e.activateHandler_)}),this.adapter_.registerInteractionHandler("focus",this.focusHandler_),this.adapter_.registerInteractionHandler("blur",this.blurHandler_),this.adapter_.isUnbounded()&&this.adapter_.registerResizeHandler(this.resizeHandler_)}},{key:"registerDeactivationHandlers_",value:function(e){var t=this;"keydown"===e.type?this.adapter_.registerInteractionHandler("keyup",this.deactivateHandler_):g.forEach(function(e){t.adapter_.registerDocumentInteractionHandler(e,t.deactivateHandler_)})}},{key:"deregisterRootHandlers_",value:function(){var e=this;d.forEach(function(t){e.adapter_.deregisterInteractionHandler(t,e.activateHandler_)}),this.adapter_.deregisterInteractionHandler("focus",this.focusHandler_),this.adapter_.deregisterInteractionHandler("blur",this.blurHandler_),this.adapter_.isUnbounded()&&this.adapter_.deregisterResizeHandler(this.resizeHandler_)}},{key:"deregisterDeactivationHandlers_",value:function(){var e=this;this.adapter_.deregisterInteractionHandler("keyup",this.deactivateHandler_),g.forEach(function(t){e.adapter_.deregisterDocumentInteractionHandler(t,e.deactivateHandler_)})}},{key:"removeCssVars_",value:function(){var e=this,n=t.strings;Object.keys(n).forEach(function(t){0===t.indexOf("VAR_")&&e.adapter_.updateCssVariable(n[t],null)})}},{key:"activate_",value:function(e){var t=this;if(!this.adapter_.isSurfaceDisabled()){var n=this.activationState_;if(!n.isActivated){var i=this.previousActivationEvent_;if(!(i&&e&&i.type!==e.type)){n.isActivated=!0,n.isProgrammatic=null===e,n.activationEvent=e,n.wasActivatedByPointer=!n.isProgrammatic&&("mousedown"===e.type||"touchstart"===e.type||"pointerdown"===e.type);if(e&&I.length>0&&I.some(function(e){return t.adapter_.containsEventTarget(e)}))return void this.resetActivationState_();e&&(I.push(e.target),this.registerDeactivationHandlers_(e)),n.wasElementMadeActive=this.checkElementMadeActive_(e),n.wasElementMadeActive&&this.animateActivation_(),requestAnimationFrame(function(){I=[],n.wasElementMadeActive||" "!==e.key&&32!==e.keyCode||(n.wasElementMadeActive=t.checkElementMadeActive_(e),n.wasElementMadeActive&&t.animateActivation_()),n.wasElementMadeActive||(t.activationState_=t.defaultActivationState_())})}}}}},{key:"checkElementMadeActive_",value:function(e){return!e||"keydown"!==e.type||this.adapter_.isSurfaceActive()}},{key:"activate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.activate_(e)}},{key:"animateActivation_",value:function(){var e=this,n=t.strings,i=n.VAR_FG_TRANSLATE_START,c=n.VAR_FG_TRANSLATE_END,a=t.cssClasses,r=a.FG_DEACTIVATION,l=a.FG_ACTIVATION,o=t.numbers.DEACTIVATION_TIMEOUT_MS;this.layoutInternal_();var s="",u="";if(!this.adapter_.isUnbounded()){var d=this.getFgTranslationCoordinates_(),g=d.startPoint,I=d.endPoint;s=g.x+"px, "+g.y+"px",u=I.x+"px, "+I.y+"px"}this.adapter_.updateCssVariable(i,s),this.adapter_.updateCssVariable(c,u),clearTimeout(this.activationTimer_),clearTimeout(this.fgDeactivationRemovalTimer_),this.rmBoundedActivationClasses_(),this.adapter_.removeClass(r),this.adapter_.computeBoundingRect(),this.adapter_.addClass(l),this.activationTimer_=setTimeout(function(){return e.activationTimerCallback_()},o)}},{key:"getFgTranslationCoordinates_",value:function(){var e=this.activationState_,t=e.activationEvent,n=e.wasActivatedByPointer,i=void 0;return i=n?Object(o.getNormalizedEventCoords)(t,this.adapter_.getWindowPageOffset(),this.adapter_.computeBoundingRect()):{x:this.frame_.width/2,y:this.frame_.height/2},i={x:i.x-this.initialSize_/2,y:i.y-this.initialSize_/2},{startPoint:i,endPoint:{x:this.frame_.width/2-this.initialSize_/2,y:this.frame_.height/2-this.initialSize_/2}}}},{key:"runDeactivationUXLogicIfReady_",value:function(){var e=this,n=t.cssClasses.FG_DEACTIVATION,i=this.activationState_,c=i.hasDeactivationUXRun,a=i.isActivated;(c||!a)&&this.activationAnimationHasEnded_&&(this.rmBoundedActivationClasses_(),this.adapter_.addClass(n),this.fgDeactivationRemovalTimer_=setTimeout(function(){e.adapter_.removeClass(n)},l.b.FG_DEACTIVATION_MS))}},{key:"rmBoundedActivationClasses_",value:function(){var e=t.cssClasses.FG_ACTIVATION;this.adapter_.removeClass(e),this.activationAnimationHasEnded_=!1,this.adapter_.computeBoundingRect()}},{key:"resetActivationState_",value:function(){var e=this;this.previousActivationEvent_=this.activationState_.activationEvent,this.activationState_=this.defaultActivationState_(),setTimeout(function(){return e.previousActivationEvent_=null},t.numbers.TAP_DELAY_MS)}},{key:"deactivate_",value:function(e){var t=this,n=this.activationState_;if(n.isActivated){var i=s({},n);if(n.isProgrammatic){requestAnimationFrame(function(){return t.animateDeactivation_(null,i)}),this.resetActivationState_()}else this.deregisterDeactivationHandlers_(),requestAnimationFrame(function(){t.activationState_.hasDeactivationUXRun=!0,t.animateDeactivation_(e,i),t.resetActivationState_()})}}},{key:"deactivate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.deactivate_(e)}},{key:"animateDeactivation_",value:function(e,t){var n=t.wasActivatedByPointer,i=t.wasElementMadeActive;(n||i)&&this.runDeactivationUXLogicIfReady_()}},{key:"layout",value:function(){var e=this;this.layoutFrame_&&cancelAnimationFrame(this.layoutFrame_),this.layoutFrame_=requestAnimationFrame(function(){e.layoutInternal_(),e.layoutFrame_=0})}},{key:"layoutInternal_",value:function(){var e=this;this.frame_=this.adapter_.computeBoundingRect();var n=Math.max(this.frame_.height,this.frame_.width);this.maxRadius_=this.adapter_.isUnbounded()?n:function(){return Math.sqrt(Math.pow(e.frame_.width,2)+Math.pow(e.frame_.height,2))+t.numbers.PADDING}(),this.initialSize_=n*t.numbers.INITIAL_ORIGIN_SCALE,this.fgScale_=this.maxRadius_/this.initialSize_,this.updateLayoutCssVars_()}},{key:"updateLayoutCssVars_",value:function(){var e=t.strings,n=e.VAR_FG_SIZE,i=e.VAR_LEFT,c=e.VAR_TOP,a=e.VAR_FG_SCALE;this.adapter_.updateCssVariable(n,this.initialSize_+"px"),this.adapter_.updateCssVariable(a,this.fgScale_),this.adapter_.isUnbounded()&&(this.unboundedCoords_={left:Math.round(this.frame_.width/2-this.initialSize_/2),top:Math.round(this.frame_.height/2-this.initialSize_/2)},this.adapter_.updateCssVariable(i,this.unboundedCoords_.left+"px"),this.adapter_.updateCssVariable(c,this.unboundedCoords_.top+"px"))}},{key:"setUnbounded",value:function(e){var n=t.cssClasses.UNBOUNDED;e?this.adapter_.addClass(n):this.adapter_.removeClass(n)}},{key:"handleFocus",value:function(){var e=this;requestAnimationFrame(function(){return e.adapter_.addClass(t.cssClasses.BG_FOCUSED)})}},{key:"handleBlur",value:function(){var e=this;requestAnimationFrame(function(){return e.adapter_.removeClass(t.cssClasses.BG_FOCUSED)})}}]),t}(r.a);t.a=b},function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"c",function(){return c}),n.d(t,"b",function(){return a});var i={ROOT:"mdc-ripple-upgraded",UNBOUNDED:"mdc-ripple-upgraded--unbounded",BG_FOCUSED:"mdc-ripple-upgraded--background-focused",FG_ACTIVATION:"mdc-ripple-upgraded--foreground-activation",FG_DEACTIVATION:"mdc-ripple-upgraded--foreground-deactivation"},c={VAR_LEFT:"--mdc-ripple-left",VAR_TOP:"--mdc-ripple-top",VAR_FG_SIZE:"--mdc-ripple-fg-size",VAR_FG_SCALE:"--mdc-ripple-fg-scale",VAR_FG_TRANSLATE_START:"--mdc-ripple-fg-translate-start",VAR_FG_TRANSLATE_END:"--mdc-ripple-fg-translate-end"},a={PADDING:10,INITIAL_ORIGIN_SCALE:.6,DEACTIVATION_TIMEOUT_MS:225,FG_DEACTIVATION_MS:150,TAP_DELAY_MS:300}},,,,function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();!function(){function e(){i(this,e)}c(e,[{key:"addClass",value:function(e){}},{key:"removeClass",value:function(e){}},{key:"getWidth",value:function(){}},{key:"registerInteractionHandler",value:function(e,t){}},{key:"deregisterInteractionHandler",value:function(e,t){}}])}()},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();!function(){function e(){i(this,e)}c(e,[{key:"addClass",value:function(e){}},{key:"removeClass",value:function(e){}},{key:"hasClass",value:function(e){}},{key:"setStyle",value:function(e,t){}},{key:"registerEventHandler",value:function(e,t){}},{key:"deregisterEventHandler",value:function(e,t){}}])}()},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();!function(){function e(){i(this,e)}c(e,[{key:"getWidth",value:function(){}},{key:"getHeight",value:function(){}},{key:"addClass",value:function(e){}},{key:"removeClass",value:function(e){}},{key:"setOutlinePathAttr",value:function(e){}},{key:"getIdleOutlineStyleValue",value:function(e){}}])}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"b",function(){return i});var i={PATH_SELECTOR:".mdc-notched-outline__path",IDLE_OUTLINE_SELECTOR:".mdc-notched-outline__idle"},c={OUTLINE_NOTCHED:"mdc-notched-outline--notched"}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"MDCFloatingLabel",function(){return s});var r=n(1),l=(n(10),n(15));n.d(t,"MDCFloatingLabelFoundation",function(){return l.a});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(e){function t(){return i(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),o(t,[{key:"shake",value:function(e){this.foundation_.shake(e)}},{key:"float",value:function(e){this.foundation_.float(e)}},{key:"getWidth",value:function(){return this.foundation_.getWidth()}},{key:"getDefaultFoundation",value:function(){var e=this;return new l.a({addClass:function(t){return e.root_.classList.add(t)},removeClass:function(t){return e.root_.classList.remove(t)},getWidth:function(){return e.root_.offsetWidth},registerInteractionHandler:function(t,n){return e.root_.addEventListener(t,n)},deregisterInteractionHandler:function(t,n){return e.root_.removeEventListener(t,n)}})}}],[{key:"attachTo",value:function(e){return new t(e)}}]),t}(r.a)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(0),l=(n(10),n(16)),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(e){function t(e){i(this,t);var n=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,o(t.defaultAdapter,e)));return n.shakeAnimationEndHandler_=function(){return n.handleShakeAnimationEnd_()},n}return a(t,e),s(t,null,[{key:"cssClasses",get:function(){return l.a}},{key:"defaultAdapter",get:function(){return{addClass:function(){},removeClass:function(){},getWidth:function(){},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){}}}}]),s(t,[{key:"init",value:function(){this.adapter_.registerInteractionHandler("animationend",this.shakeAnimationEndHandler_)}},{key:"destroy",value:function(){this.adapter_.deregisterInteractionHandler("animationend",this.shakeAnimationEndHandler_)}},{key:"getWidth",value:function(){return this.adapter_.getWidth()}},{key:"shake",value:function(e){var n=t.cssClasses.LABEL_SHAKE;e?this.adapter_.addClass(n):this.adapter_.removeClass(n)}},{key:"float",value:function(e){var n=t.cssClasses,i=n.LABEL_FLOAT_ABOVE,c=n.LABEL_SHAKE;e?this.adapter_.addClass(i):(this.adapter_.removeClass(i),this.adapter_.removeClass(c))}},{key:"handleShakeAnimationEnd_",value:function(){var e=t.cssClasses.LABEL_SHAKE;this.adapter_.removeClass(e)}}]),t}(r.a);t.a=u},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i={LABEL_FLOAT_ABOVE:"mdc-floating-label--float-above",LABEL_SHAKE:"mdc-floating-label--shake"}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"MDCLineRipple",function(){return u});var r=n(1),l=(n(11),n(18));n.d(t,"MDCLineRippleFoundation",function(){return l.a});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(e){function t(){return i(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"activate",value:function(){this.foundation_.activate()}},{key:"deactivate",value:function(){this.foundation_.deactivate()}},{key:"setRippleCenter",value:function(e){this.foundation_.setRippleCenter(e)}},{key:"getDefaultFoundation",value:function(){var e=this;return new l.a(o({addClass:function(t){return e.root_.classList.add(t)},removeClass:function(t){return e.root_.classList.remove(t)},hasClass:function(t){return e.root_.classList.contains(t)},setStyle:function(t,n){return e.root_.style[t]=n},registerEventHandler:function(t,n){return e.root_.addEventListener(t,n)},deregisterEventHandler:function(t,n){return e.root_.removeEventListener(t,n)}}))}}],[{key:"attachTo",value:function(e){return new t(e)}}]),t}(r.a)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(0),l=(n(11),n(19)),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var n=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,o(t.defaultAdapter,e)));return n.transitionEndHandler_=function(e){return n.handleTransitionEnd(e)},n}return a(t,e),s(t,null,[{key:"cssClasses",get:function(){return l.a}},{key:"defaultAdapter",get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){},setStyle:function(){},registerEventHandler:function(){},deregisterEventHandler:function(){}}}}]),s(t,[{key:"init",value:function(){this.adapter_.registerEventHandler("transitionend",this.transitionEndHandler_)}},{key:"destroy",value:function(){this.adapter_.deregisterEventHandler("transitionend",this.transitionEndHandler_)}},{key:"activate",value:function(){this.adapter_.removeClass(l.a.LINE_RIPPLE_DEACTIVATING),this.adapter_.addClass(l.a.LINE_RIPPLE_ACTIVE)}},{key:"setRippleCenter",value:function(e){this.adapter_.setStyle("transform-origin",e+"px center")}},{key:"deactivate",value:function(){this.adapter_.addClass(l.a.LINE_RIPPLE_DEACTIVATING)}},{key:"handleTransitionEnd",value:function(e){var t=this.adapter_.hasClass(l.a.LINE_RIPPLE_DEACTIVATING);"opacity"===e.propertyName&&t&&(this.adapter_.removeClass(l.a.LINE_RIPPLE_ACTIVE),this.adapter_.removeClass(l.a.LINE_RIPPLE_DEACTIVATING))}}]),t}(r.a);t.a=u},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i={LINE_RIPPLE_ACTIVE:"mdc-line-ripple--active",LINE_RIPPLE_DEACTIVATING:"mdc-line-ripple--deactivating"}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"MDCNotchedOutline",function(){return u});var r=n(1),l=(n(12),n(21)),o=n(13);n.d(t,"MDCNotchedOutlineFoundation",function(){return l.a});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(e){function t(){return i(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"notch",value:function(e,t){this.foundation_.notch(e,t)}},{key:"closeNotch",value:function(){this.foundation_.closeNotch()}},{key:"getDefaultFoundation",value:function(){var e=this;return new l.a({getWidth:function(){return e.root_.offsetWidth},getHeight:function(){return e.root_.offsetHeight},addClass:function(t){return e.root_.classList.add(t)},removeClass:function(t){return e.root_.classList.remove(t)},setOutlinePathAttr:function(t){e.root_.querySelector(o.b.PATH_SELECTOR).setAttribute("d",t)},getIdleOutlineStyleValue:function(t){var n=e.root_.parentNode.querySelector(o.b.IDLE_OUTLINE_SELECTOR);return window.getComputedStyle(n).getPropertyValue(t)}})}}],[{key:"attachTo",value:function(e){return new t(e)}}]),t}(r.a)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(0),l=(n(12),n(13)),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(e){function t(e){return i(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,o(t.defaultAdapter,e)))}return a(t,e),s(t,null,[{key:"strings",get:function(){return l.b}},{key:"cssClasses",get:function(){return l.a}},{key:"defaultAdapter",get:function(){return{getWidth:function(){},getHeight:function(){},addClass:function(){},removeClass:function(){},setOutlinePathAttr:function(){},getIdleOutlineStyleValue:function(){}}}}]),s(t,[{key:"notch",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=t.cssClasses.OUTLINE_NOTCHED;this.adapter_.addClass(i),this.updateSvgPath_(e,n)}},{key:"closeNotch",value:function(){var e=t.cssClasses.OUTLINE_NOTCHED;this.adapter_.removeClass(e)}},{key:"updateSvgPath_",value:function(e,t){var n=this.adapter_.getIdleOutlineStyleValue("border-radius")||this.adapter_.getIdleOutlineStyleValue("border-top-left-radius"),i=parseFloat(n),c=this.adapter_.getWidth(),a=this.adapter_.getHeight(),r=i+1.2,l=Math.abs(11-r),o=e+8,s="a"+i+","+i+" 0 0 1 "+i+","+i+"v"+(a-2*r)+"a"+i+","+i+" 0 0 1 "+-i+","+i+"h"+(2*r-c)+"a"+i+","+i+" 0 0 1 "+-i+","+-i+"v"+(2*r-a)+"a"+i+","+i+" 0 0 1 "+i+","+-i,u=void 0;u=t?"M"+(c-r-l)+",1h"+l+s+"h"+(c-2*r-o-l):"M"+(r+l+o)+",1h"+(c-2*r-o-l)+s+"h"+l,this.adapter_.setOutlinePathAttr(u)}}]),t}(r.a);t.a=u},,,,,,,function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(0),l=(n(43),n(110)),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(e){function t(e){return i(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,o(t.defaultAdapter,e)))}return a(t,e),s(t,null,[{key:"cssClasses",get:function(){return l.a}},{key:"strings",get:function(){return l.b}},{key:"defaultAdapter",get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){},setAttr:function(){},removeAttr:function(){},setContent:function(){}}}}]),s(t,[{key:"setContent",value:function(e){this.adapter_.setContent(e)}},{key:"setPersistent",value:function(e){e?this.adapter_.addClass(l.a.HELPER_TEXT_PERSISTENT):this.adapter_.removeClass(l.a.HELPER_TEXT_PERSISTENT)}},{key:"setValidation",value:function(e){e?this.adapter_.addClass(l.a.HELPER_TEXT_VALIDATION_MSG):this.adapter_.removeClass(l.a.HELPER_TEXT_VALIDATION_MSG)}},{key:"showToScreenReader",value:function(){this.adapter_.removeAttr(l.b.ARIA_HIDDEN)}},{key:"setValidity",value:function(e){var t=this.adapter_.hasClass(l.a.HELPER_TEXT_PERSISTENT),n=this.adapter_.hasClass(l.a.HELPER_TEXT_VALIDATION_MSG),i=n&&!e;i?this.adapter_.setAttr(l.b.ROLE,"alert"):this.adapter_.removeAttr(l.b.ROLE),t||i||this.hide_()}},{key:"hide_",value:function(){this.adapter_.setAttr(l.b.ARIA_HIDDEN,"true")}}]),t}(r.a);t.a=u},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(0),l=(n(44),n(111)),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(e){function t(e){i(this,t);var n=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,o(t.defaultAdapter,e)));return n.savedTabIndex_=null,n.interactionHandler_=function(e){return n.handleInteraction(e)},n}return a(t,e),s(t,null,[{key:"strings",get:function(){return l.a}},{key:"defaultAdapter",get:function(){return{getAttr:function(){},setAttr:function(){},removeAttr:function(){},setContent:function(){},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){},notifyIconAction:function(){}}}}]),s(t,[{key:"init",value:function(){var e=this;this.savedTabIndex_=this.adapter_.getAttr("tabindex"),["click","keydown"].forEach(function(t){e.adapter_.registerInteractionHandler(t,e.interactionHandler_)})}},{key:"destroy",value:function(){var e=this;["click","keydown"].forEach(function(t){e.adapter_.deregisterInteractionHandler(t,e.interactionHandler_)})}},{key:"setDisabled",value:function(e){this.savedTabIndex_&&(e?(this.adapter_.setAttr("tabindex","-1"),this.adapter_.removeAttr("role")):(this.adapter_.setAttr("tabindex",this.savedTabIndex_),this.adapter_.setAttr("role",l.a.ICON_ROLE)))}},{key:"setAriaLabel",value:function(e){this.adapter_.setAttr("aria-label",e)}},{key:"setContent",value:function(e){this.adapter_.setContent(e)}},{key:"handleInteraction",value:function(e){"click"!==e.type&&"Enter"!==e.key&&13!==e.keyCode||this.adapter_.notifyIconAction()}}]),t}(r.a);t.a=u},,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"b",function(){return c}),n.d(t,"d",function(){return i}),n.d(t,"c",function(){return a}),n.d(t,"a",function(){return r});var i={ARIA_CONTROLS:"aria-controls",INPUT_SELECTOR:".mdc-text-field__input",LABEL_SELECTOR:".mdc-floating-label",ICON_SELECTOR:".mdc-text-field__icon",OUTLINE_SELECTOR:".mdc-notched-outline",LINE_RIPPLE_SELECTOR:".mdc-line-ripple"},c={ROOT:"mdc-text-field",UPGRADED:"mdc-text-field--upgraded",DISABLED:"mdc-text-field--disabled",DENSE:"mdc-text-field--dense",FOCUSED:"mdc-text-field--focused",INVALID:"mdc-text-field--invalid",BOX:"mdc-text-field--box",OUTLINED:"mdc-text-field--outlined"},a={LABEL_SCALE:.75,DENSE_LABEL_SCALE:.923},r=["pattern","min","max","required","step","minlength","maxlength"]},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=(n(28),n(29),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}());!function(){function e(){i(this,e)}c(e,[{key:"addClass",value:function(e){}},{key:"removeClass",value:function(e){}},{key:"hasClass",value:function(e){}},{key:"registerTextFieldInteractionHandler",value:function(e,t){}},{key:"deregisterTextFieldInteractionHandler",value:function(e,t){}},{key:"registerInputInteractionHandler",value:function(e,t){}},{key:"deregisterInputInteractionHandler",value:function(e,t){}},{key:"registerValidationAttributeChangeHandler",value:function(e){}},{key:"deregisterValidationAttributeChangeHandler",value:function(e){}},{key:"getNativeInput",value:function(){}},{key:"isFocused",value:function(){}},{key:"isRtl",value:function(){}},{key:"activateLineRipple",value:function(){}},{key:"deactivateLineRipple",value:function(){}},{key:"setLineRippleTransformOrigin",value:function(e){}},{key:"shakeLabel",value:function(e){}},{key:"floatLabel",value:function(e){}},{key:"hasLabel",value:function(){}},{key:"getLabelWidth",value:function(){}},{key:"hasOutline",value:function(){}},{key:"notchOutline",value:function(e,t){}},{key:"closeOutline",value:function(){}}])}()},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();!function(){function e(){i(this,e)}c(e,[{key:"addClass",value:function(e){}},{key:"removeClass",value:function(e){}},{key:"hasClass",value:function(e){}},{key:"setAttr",value:function(e,t){}},{key:"removeAttr",value:function(e){}},{key:"setContent",value:function(e){}}])}()},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();!function(){function e(){i(this,e)}c(e,[{key:"getAttr",value:function(e){}},{key:"setAttr",value:function(e,t){}},{key:"removeAttr",value:function(e){}},{key:"setContent",value:function(e){}},{key:"registerInteractionHandler",value:function(e,t){}},{key:"deregisterInteractionHandler",value:function(e,t){}},{key:"notifyIconAction",value:function(){}}])}()},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"MDCTextField",function(){return G});var r=n(1),l=n(4),o=n(2),s=n(41),u=(n(42),n(112)),d=n(17),g=n(113),I=n(114),b=n(14),p=n(20);n.d(t,"MDCTextFieldFoundation",function(){return u.a}),n.d(t,"MDCTextFieldHelperText",function(){return g.a}),n.d(t,"MDCTextFieldHelperTextFoundation",function(){return g.b}),n.d(t,"MDCTextFieldIcon",function(){return I.a}),n.d(t,"MDCTextFieldIconFoundation",function(){return I.b});var C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},m=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),h=function e(t,n,i){null===t&&(t=Function.prototype);var c=Object.getOwnPropertyDescriptor(t,n);if(void 0===c){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in c)return c.value;var r=c.get;if(void 0!==r)return r.call(i)},G=function(e){function t(){var e;i(this,t);for(var n=arguments.length,a=Array(n),r=0;r<n;r++)a[r]=arguments[r];var l=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a)));return l.input_,l.ripple,l.lineRipple_,l.helperText_,l.icon_,l.label_,l.outline_,l}return a(t,e),m(t,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e,t){return new l.MDCRipple(e,t)},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return new d.MDCLineRipple(e)},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return new g.a(e)},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e){return new I.a(e)},c=this,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(e){return new b.MDCFloatingLabel(e)},r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(e){return new p.MDCNotchedOutline(e)};this.input_=this.root_.querySelector(s.d.INPUT_SELECTOR);var u=this.root_.querySelector(s.d.LABEL_SELECTOR);u&&(this.label_=a(u));var m=this.root_.querySelector(s.d.LINE_RIPPLE_SELECTOR);m&&(this.lineRipple_=t(m));var h=this.root_.querySelector(s.d.OUTLINE_SELECTOR);if(h&&(this.outline_=r(h)),this.input_.hasAttribute(s.d.ARIA_CONTROLS)){var G=document.getElementById(this.input_.getAttribute(s.d.ARIA_CONTROLS));G&&(this.helperText_=n(G))}var Z=this.root_.querySelector(s.d.ICON_SELECTOR);if(Z&&(this.icon_=i(Z)),this.ripple=null,this.root_.classList.contains(s.b.BOX)){var B=Object(o.getMatchesProperty)(HTMLElement.prototype),y=C(l.MDCRipple.createAdapter(this),{isSurfaceActive:function(){return c.input_[B](":active")},registerInteractionHandler:function(e,t){return c.input_.addEventListener(e,t)},deregisterInteractionHandler:function(e,t){return c.input_.removeEventListener(e,t)}}),X=new l.MDCRippleFoundation(y);this.ripple=e(this.root_,X)}}},{key:"destroy",value:function(){this.ripple&&this.ripple.destroy(),this.lineRipple_&&this.lineRipple_.destroy(),this.helperText_&&this.helperText_.destroy(),this.icon_&&this.icon_.destroy(),this.label_&&this.label_.destroy(),this.outline_&&this.outline_.destroy(),h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"initialSyncWithDom",value:function(){this.disabled=this.input_.disabled}},{key:"layout",value:function(){var e=this.foundation_.shouldFloat;this.foundation_.notchOutline(e)}},{key:"getDefaultFoundation",value:function(){var e=this;return new u.a(C({addClass:function(t){return e.root_.classList.add(t)},removeClass:function(t){return e.root_.classList.remove(t)},hasClass:function(t){return e.root_.classList.contains(t)},registerTextFieldInteractionHandler:function(t,n){return e.root_.addEventListener(t,n)},deregisterTextFieldInteractionHandler:function(t,n){return e.root_.removeEventListener(t,n)},registerValidationAttributeChangeHandler:function(t){var n=function(e){return e.map(function(e){return e.attributeName})},i=new MutationObserver(function(e){return t(n(e))}),c=e.root_.querySelector(s.d.INPUT_SELECTOR),a={attributes:!0};return i.observe(c,a),i},deregisterValidationAttributeChangeHandler:function(e){return e.disconnect()},isFocused:function(){return document.activeElement===e.root_.querySelector(s.d.INPUT_SELECTOR)},isRtl:function(){return"rtl"===window.getComputedStyle(e.root_).getPropertyValue("direction")}},this.getInputAdapterMethods_(),this.getLabelAdapterMethods_(),this.getLineRippleAdapterMethods_(),this.getOutlineAdapterMethods_()),this.getFoundationMap_())}},{key:"getLabelAdapterMethods_",value:function(){var e=this;return{shakeLabel:function(t){return e.label_.shake(t)},floatLabel:function(t){return e.label_.float(t)},hasLabel:function(){return!!e.label_},getLabelWidth:function(){return e.label_.getWidth()}}}},{key:"getLineRippleAdapterMethods_",value:function(){var e=this;return{activateLineRipple:function(){e.lineRipple_&&e.lineRipple_.activate()},deactivateLineRipple:function(){e.lineRipple_&&e.lineRipple_.deactivate()},setLineRippleTransformOrigin:function(t){e.lineRipple_&&e.lineRipple_.setRippleCenter(t)}}}},{key:"getOutlineAdapterMethods_",value:function(){var e=this;return{notchOutline:function(t,n){return e.outline_.notch(t,n)},closeOutline:function(){return e.outline_.closeNotch()},hasOutline:function(){return!!e.outline_}}}},{key:"getInputAdapterMethods_",value:function(){var e=this;return{registerInputInteractionHandler:function(t,n){return e.input_.addEventListener(t,n)},deregisterInputInteractionHandler:function(t,n){return e.input_.removeEventListener(t,n)},getNativeInput:function(){return e.input_}}}},{key:"getFoundationMap_",value:function(){return{helperText:this.helperText_?this.helperText_.foundation:void 0,icon:this.icon_?this.icon_.foundation:void 0}}},{key:"value",get:function(){return this.foundation_.getValue()},set:function(e){this.foundation_.setValue(e)}},{key:"disabled",get:function(){return this.foundation_.isDisabled()},set:function(e){this.foundation_.setDisabled(e)}},{key:"valid",get:function(){return this.foundation_.isValid()},set:function(e){this.foundation_.setValid(e)}},{key:"required",get:function(){return this.input_.required},set:function(e){this.input_.required=e}},{key:"pattern",get:function(){return this.input_.pattern},set:function(e){this.input_.pattern=e}},{key:"minLength",get:function(){return this.input_.minLength},set:function(e){this.input_.minLength=e}},{key:"maxLength",get:function(){return this.input_.maxLength},set:function(e){e<0?this.input_.removeAttribute("maxLength"):this.input_.maxLength=e}},{key:"min",get:function(){return this.input_.min},set:function(e){this.input_.min=e}},{key:"max",get:function(){return this.input_.max},set:function(e){this.input_.max=e}},{key:"step",get:function(){return this.input_.step},set:function(e){this.input_.step=e}},{key:"helperTextContent",set:function(e){this.foundation_.setHelperTextContent(e)}},{key:"iconAriaLabel",set:function(e){this.foundation_.setIconAriaLabel(e)}},{key:"iconContent",set:function(e){this.foundation_.setIconContent(e)}}],[{key:"attachTo",value:function(e){return new t(e)}}]),t}(r.a)},function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return c});var i={ARIA_HIDDEN:"aria-hidden",ROLE:"role"},c={HELPER_TEXT_PERSISTENT:"mdc-text-field-helper-text--persistent",HELPER_TEXT_VALIDATION_MSG:"mdc-text-field-helper-text--validation-msg"}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i={ICON_EVENT:"MDCTextField:icon",ICON_ROLE:"button"}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(0),l=(n(28),n(29),n(42),n(41)),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t);var a=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,o(t.defaultAdapter,e)));return a.helperText_=n.helperText,a.icon_=n.icon,a.isFocused_=!1,a.receivedUserInput_=!1,a.useCustomValidityChecking_=!1,a.isValid_=!0,a.inputFocusHandler_=function(){return a.activateFocus()},a.inputBlurHandler_=function(){return a.deactivateFocus()},a.inputInputHandler_=function(){return a.autoCompleteFocus()},a.setPointerXOffset_=function(e){return a.setTransformOrigin(e)},a.textFieldInteractionHandler_=function(){return a.handleTextFieldInteraction()},a.validationAttributeChangeHandler_=function(e){return a.handleValidationAttributeChange(e)},a.validationObserver_,a}return a(t,e),s(t,[{key:"shouldShake",get:function(){return!this.isValid()&&!this.isFocused_}},{key:"shouldFloat",get:function(){return this.isFocused_||!!this.getValue()||this.isBadInput_()}}],[{key:"cssClasses",get:function(){return l.b}},{key:"strings",get:function(){return l.d}},{key:"numbers",get:function(){return l.c}},{key:"defaultAdapter",get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){},registerTextFieldInteractionHandler:function(){},deregisterTextFieldInteractionHandler:function(){},registerInputInteractionHandler:function(){},deregisterInputInteractionHandler:function(){},registerValidationAttributeChangeHandler:function(){},deregisterValidationAttributeChangeHandler:function(){},getNativeInput:function(){},isFocused:function(){},isRtl:function(){},activateLineRipple:function(){},deactivateLineRipple:function(){},setLineRippleTransformOrigin:function(){},shakeLabel:function(){},floatLabel:function(){},hasLabel:function(){},getLabelWidth:function(){},hasOutline:function(){},notchOutline:function(){},closeOutline:function(){}}}}]),s(t,[{key:"init",value:function(){var e=this;this.adapter_.addClass(t.cssClasses.UPGRADED),this.adapter_.hasLabel()&&(this.getValue()||this.isBadInput_())&&(this.adapter_.floatLabel(this.shouldFloat),this.notchOutline(this.shouldFloat)),this.adapter_.isFocused()&&this.inputFocusHandler_(),this.adapter_.registerInputInteractionHandler("focus",this.inputFocusHandler_),this.adapter_.registerInputInteractionHandler("blur",this.inputBlurHandler_),this.adapter_.registerInputInteractionHandler("input",this.inputInputHandler_),["mousedown","touchstart"].forEach(function(t){e.adapter_.registerInputInteractionHandler(t,e.setPointerXOffset_)}),["click","keydown"].forEach(function(t){e.adapter_.registerTextFieldInteractionHandler(t,e.textFieldInteractionHandler_)}),this.validationObserver_=this.adapter_.registerValidationAttributeChangeHandler(this.validationAttributeChangeHandler_)}},{key:"destroy",value:function(){var e=this;this.adapter_.removeClass(t.cssClasses.UPGRADED),this.adapter_.deregisterInputInteractionHandler("focus",this.inputFocusHandler_),this.adapter_.deregisterInputInteractionHandler("blur",this.inputBlurHandler_),this.adapter_.deregisterInputInteractionHandler("input",this.inputInputHandler_),["mousedown","touchstart"].forEach(function(t){e.adapter_.deregisterInputInteractionHandler(t,e.setPointerXOffset_)}),["click","keydown"].forEach(function(t){e.adapter_.deregisterTextFieldInteractionHandler(t,e.textFieldInteractionHandler_)}),this.adapter_.deregisterValidationAttributeChangeHandler(this.validationObserver_)}},{key:"handleTextFieldInteraction",value:function(){this.adapter_.getNativeInput().disabled||(this.receivedUserInput_=!0)}},{key:"handleValidationAttributeChange",value:function(e){var t=this;e.some(function(e){if(l.a.indexOf(e)>-1)return t.styleValidity_(!0),!0})}},{key:"notchOutline",value:function(e){if(this.adapter_.hasOutline()&&this.adapter_.hasLabel())if(e){var t=this.adapter_.hasClass(l.b.DENSE),n=t?l.c.DENSE_LABEL_SCALE:l.c.LABEL_SCALE,i=this.adapter_.getLabelWidth()*n,c=this.adapter_.isRtl();this.adapter_.notchOutline(i,c)}else this.adapter_.closeOutline()}},{key:"activateFocus",value:function(){this.isFocused_=!0,this.styleFocused_(this.isFocused_),this.adapter_.activateLineRipple(),this.notchOutline(this.shouldFloat),this.adapter_.hasLabel()&&(this.adapter_.shakeLabel(this.shouldShake),this.adapter_.floatLabel(this.shouldFloat)),this.helperText_&&this.helperText_.showToScreenReader()}},{key:"setTransformOrigin",value:function(e){var t=e.target.getBoundingClientRect(),n={x:e.clientX,y:e.clientY},i=n.x-t.left;this.adapter_.setLineRippleTransformOrigin(i)}},{key:"autoCompleteFocus",value:function(){this.receivedUserInput_||this.activateFocus()}},{key:"deactivateFocus",value:function(){this.isFocused_=!1,this.adapter_.deactivateLineRipple();var e=this.getNativeInput_(),t=!e.value&&!this.isBadInput_(),n=this.isValid();this.styleValidity_(n),this.styleFocused_(this.isFocused_),this.adapter_.hasLabel()&&(this.adapter_.shakeLabel(this.shouldShake),this.adapter_.floatLabel(this.shouldFloat),this.notchOutline(this.shouldFloat)),t&&(this.receivedUserInput_=!1)}},{key:"getValue",value:function(){return this.getNativeInput_().value}},{key:"setValue",value:function(e){this.getNativeInput_().value=e;var t=this.isValid();this.styleValidity_(t),this.adapter_.hasLabel()&&(this.adapter_.shakeLabel(this.shouldShake),this.adapter_.floatLabel(this.shouldFloat),this.notchOutline(this.shouldFloat))}},{key:"isValid",value:function(){return this.useCustomValidityChecking_?this.isValid_:this.isNativeInputValid_()}},{key:"setValid",value:function(e){this.useCustomValidityChecking_=!0,this.isValid_=e,e=this.isValid(),this.styleValidity_(e),this.adapter_.hasLabel()&&this.adapter_.shakeLabel(this.shouldShake)}},{key:"isDisabled",value:function(){return this.getNativeInput_().disabled}},{key:"setDisabled",value:function(e){this.getNativeInput_().disabled=e,this.styleDisabled_(e)}},{key:"setHelperTextContent",value:function(e){this.helperText_&&this.helperText_.setContent(e)}},{key:"setIconAriaLabel",value:function(e){this.icon_&&this.icon_.setAriaLabel(e)}},{key:"setIconContent",value:function(e){this.icon_&&this.icon_.setContent(e)}},{key:"isBadInput_",value:function(){return this.getNativeInput_().validity.badInput}},{key:"isNativeInputValid_",value:function(){return this.getNativeInput_().validity.valid}},{key:"styleValidity_",value:function(e){var n=t.cssClasses.INVALID;e?this.adapter_.removeClass(n):this.adapter_.addClass(n),this.helperText_&&this.helperText_.setValidity(e)}},{key:"styleFocused_",value:function(e){var n=t.cssClasses.FOCUSED;e?this.adapter_.addClass(n):this.adapter_.removeClass(n)}},{key:"styleDisabled_",value:function(e){var n=t.cssClasses,i=n.DISABLED,c=n.INVALID;e?(this.adapter_.addClass(i),this.adapter_.removeClass(c)):this.adapter_.removeClass(i),this.icon_&&this.icon_.setDisabled(e)}},{key:"getNativeInput_",value:function(){return this.adapter_.getNativeInput()||{value:"",disabled:!1,validity:{badInput:!1,valid:!0}}}}]),t}(r.a);t.a=u},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return u});var r=n(1),l=(n(43),n(28));n.d(t,"b",function(){return l.a});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(e){function t(){return i(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"getDefaultFoundation",value:function(){var e=this;return new l.a(o({addClass:function(t){return e.root_.classList.add(t)},removeClass:function(t){return e.root_.classList.remove(t)},hasClass:function(t){return e.root_.classList.contains(t)},setAttr:function(t,n){return e.root_.setAttribute(t,n)},removeAttr:function(t){return e.root_.removeAttribute(t)},setContent:function(t){e.root_.textContent=t}}))}},{key:"foundation",get:function(){return this.foundation_}}],[{key:"attachTo",value:function(e){return new t(e)}}]),t}(r.a)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return u});var r=n(1),l=(n(44),n(29));n.d(t,"b",function(){return l.a});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(e){function t(){return i(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"getDefaultFoundation",value:function(){var e=this;return new l.a(o({getAttr:function(t){return e.root_.getAttribute(t)},setAttr:function(t,n){return e.root_.setAttribute(t,n)},removeAttr:function(t){return e.root_.removeAttribute(t)},setContent:function(t){e.root_.textContent=t},registerInteractionHandler:function(t,n){return e.root_.addEventListener(t,n)},deregisterInteractionHandler:function(t,n){return e.root_.removeEventListener(t,n)},notifyIconAction:function(){return e.emit(l.a.strings.ICON_EVENT,{},!0)}}))}},{key:"foundation",get:function(){return this.foundation_}}],[{key:"attachTo",value:function(e){return new t(e)}}]),t}(r.a)}])})},function(e,t,n){"use strict";function i(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.simpleTag=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(0),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(o),u=n(2),d=function(e){return e&&e.__esModule?e:{default:e}}(u),g=n(12),I=function(e){var t,n,o=e.displayName,u=void 0===o?"SimpleTag":o,I=e.defaultProps,b=void 0===I?{}:I,p=e.consumeProps,C=void 0===p?[]:p,m=e.tag,h=e.wrap,G=void 0!==h&&h,Z=e.classNames,B=m||"div";return n=t=function(e){function t(){return c(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.tag,n=e.className,c=e.wrap,a=void 0!==c&&c,r=e.elementRef,l=e.theme,o=i(e,["tag","className","wrap","elementRef","theme"]),u="function"===typeof B&&"string"===typeof t?B:t||B,I=Object.assign({},o);C.forEach(function(e){delete I[e]}),"function"===typeof B&&"string"===typeof t&&(I.tag=t),r&&("string"===typeof u?I.ref=r:I.elementRef=r);var b=(0,d.default)(n,(0,g.parseThemeOptions)(l||null),"function"===typeof Z?Z(o):Z);if(a||G){if(!o.children)return null;delete I.children;var p=s.Children.only(o.children);return s.cloneElement(p,Object.assign({},p.props,I,{className:b}))}return s.createElement(u,Object.assign({className:b},I))}}]),t}(s.Component),Object.defineProperty(t,"displayName",{enumerable:!0,writable:!0,value:u}),Object.defineProperty(t,"defaultProps",{enumerable:!0,writable:!0,value:Object.assign({},b,{tag:B})}),Object.defineProperty(t,"isSimpleTag",{enumerable:!0,writable:!0,value:!0}),n};t.simpleTag=I},function(e,t,n){"use strict";function i(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.withRipple=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(0),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(o),u=n(38),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.unbounded,n=e.surface,o=void 0===n||n;return function(e){var n,d;return d=n=function(n){function d(){return c(this,d),a(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return r(d,n),l(d,[{key:"render",value:function(){var n=this.props,c=n.ripple,a=i(n,["ripple"]);return c&&!a.cssOnly?s.createElement(u.Ripple,Object.assign({},a,{unbounded:a.unbounded||t,surface:a.surface||o}),s.createElement(e,a)):s.createElement(e,a)}}]),d}(s.Component),Object.defineProperty(n,"displayName",{enumerable:!0,writable:!0,value:"withRipple("+(e.displayName||"Unknown")+")"}),Object.defineProperty(n,"defaultProps",{enumerable:!0,writable:!0,value:{ripple:!0}}),d}};t.withRipple=d},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function c(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Ripple=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function e(t,n,i){null===t&&(t=Function.prototype);var c=Object.getOwnPropertyDescriptor(t,n);if(void 0===c){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in c)return c.value;var r=c.get;if(void 0!==r)return r.call(i)},u=n(0),d=i(u),g=n(11),I=i(g),b=n(2),p=function(e){return e&&e.__esModule?e:{default:e}}(b),C=n(39),m=n(5),h=t.Ripple=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),o(t,[{key:"componentDidMount",value:function(){this.root_=I.findDOMNode(this),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this)}},{key:"syncWithProps",value:function(e){var t=this;this.root_=I.findDOMNode(this),(0,m.syncFoundationProp)(e.unbounded,this.unbounded,function(){return t.unbounded=!!e.unbounded}),(0,m.syncFoundationProp)(e.disabled,this.disabled,function(){return t.disabled=!!e.disabled})}},{key:"render",value:function(){var e=this.props,t=e.children,n=(e.className,e.primary),i=e.accent,a=e.unbounded,r=e.surface,l=(e.apiRef,c(e,["children","className","primary","accent","unbounded","surface","apiRef"])),o=d.Children.only(t),s=a?{"data-mdc-ripple-is-unbounded":!0}:{};return d.cloneElement(o,Object.assign({},o.props,l,s,{className:(0,p.default)(o.props.className,{"mdc-ripple-surface":void 0===r||r,"mdc-ripple-surface--primary":n,"mdc-ripple-surface--accent":i})}))}}]),t}((0,m.withFoundation)({constructor:C.MDCRipple,adapter:{}}));Object.defineProperty(h,"displayName",{enumerable:!0,writable:!0,value:"Ripple"}),t.default=h},function(e,t,n){!function(t,n){e.exports=n()}(0,function(){return function(e){function t(i){if(n[i])return n[i].exports;var c=n[i]={i:i,l:!1,exports:{}};return e[i].call(c.exports,c,c.exports,t),c.l=!0,c.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=4)}([function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.adapter_=t}return c(e,null,[{key:"cssClasses",get:function(){return{}}},{key:"strings",get:function(){return{}}},{key:"numbers",get:function(){return{}}},{key:"defaultAdapter",get:function(){return{}}}]),c(e,[{key:"init",value:function(){}},{key:"destroy",value:function(){}}]),e}();t.a=a},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=n(0),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;i(this,e),this.root_=t;for(var c=arguments.length,a=Array(c>2?c-2:0),r=2;r<c;r++)a[r-2]=arguments[r];this.initialize.apply(this,a),this.foundation_=void 0===n?this.getDefaultFoundation():n,this.foundation_.init(),this.initialSyncWithDOM()}return a(e,null,[{key:"attachTo",value:function(t){return new e(t,new c.a)}}]),a(e,[{key:"initialize",value:function(){}},{key:"getDefaultFoundation",value:function(){throw new Error("Subclasses must override getDefaultFoundation to return a properly configured foundation class")}},{key:"initialSyncWithDOM",value:function(){}},{key:"destroy",value:function(){this.foundation_.destroy()}},{key:"listen",value:function(e,t){this.root_.addEventListener(e,t)}},{key:"unlisten",value:function(e,t){this.root_.removeEventListener(e,t)}},{key:"emit",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=void 0;"function"===typeof CustomEvent?i=new CustomEvent(e,{detail:t,bubbles:n}):(i=document.createEvent("CustomEvent"),i.initCustomEvent(e,n,!1,t)),this.root_.dispatchEvent(i)}}]),e}();t.a=r},function(e,t,n){"use strict";function i(e){var t=e.document,n=t.createElement("div");n.className="mdc-ripple-surface--test-edge-var-bug",t.body.appendChild(n);var i=e.getComputedStyle(n),c=null!==i&&"solid"===i.borderTopStyle;return n.remove(),c}function c(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=o;if("boolean"===typeof o&&!t)return n;if(e.CSS&&"function"===typeof e.CSS.supports){var c=e.CSS.supports("--css-vars","yes"),a=e.CSS.supports("(--css-vars: yes)")&&e.CSS.supports("color","#00000000");return n=!(!c&&!a)&&!i(e),t||(o=n),n}}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(void 0===s||t){var n=!1;try{e.document.addEventListener("test",null,{get passive(){n=!0}})}catch(e){}s=n}return!!s&&{passive:!0}}function r(e){return["webkitMatchesSelector","msMatchesSelector","matches"].filter(function(t){return t in e}).pop()}function l(e,t,n){var i=t.x,c=t.y,a=i+n.left,r=c+n.top,l=void 0,o=void 0;return"touchstart"===e.type?(l=e.changedTouches[0].pageX-a,o=e.changedTouches[0].pageY-r):(l=e.pageX-a,o=e.pageY-r),{x:l,y:o}}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"supportsCssVariables",function(){return c}),n.d(t,"applyPassive",function(){return a}),n.d(t,"getMatchesProperty",function(){return r}),n.d(t,"getNormalizedEventCoords",function(){return l});var o=void 0,s=void 0},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();!function(){function e(){i(this,e)}c(e,[{key:"browserSupportsCssVars",value:function(){}},{key:"isUnbounded",value:function(){}},{key:"isSurfaceActive",value:function(){}},{key:"isSurfaceDisabled",value:function(){}},{key:"addClass",value:function(e){}},{key:"removeClass",value:function(e){}},{key:"containsEventTarget",value:function(e){}},{key:"registerInteractionHandler",value:function(e,t){}},{key:"deregisterInteractionHandler",value:function(e,t){}},{key:"registerDocumentInteractionHandler",value:function(e,t){}},{key:"deregisterDocumentInteractionHandler",value:function(e,t){}},{key:"registerResizeHandler",value:function(e){}},{key:"deregisterResizeHandler",value:function(e){}},{key:"updateCssVariable",value:function(e,t){}},{key:"computeBoundingRect",value:function(){}},{key:"getWindowPageOffset",value:function(){}}])}()},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"MDCRipple",function(){return u}),n.d(t,"RippleCapableSurface",function(){return d});var r=n(1),l=(n(3),n(5)),o=n(2);n.d(t,"MDCRippleFoundation",function(){return l.a}),n.d(t,"util",function(){return o});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(e){function t(){var e;i(this,t);for(var n=arguments.length,a=Array(n),r=0;r<n;r++)a[r]=arguments[r];var l=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a)));return l.disabled=!1,l.unbounded_,l}return a(t,e),s(t,[{key:"setUnbounded_",value:function(){this.foundation_.setUnbounded(this.unbounded_)}},{key:"activate",value:function(){this.foundation_.activate()}},{key:"deactivate",value:function(){this.foundation_.deactivate()}},{key:"layout",value:function(){this.foundation_.layout()}},{key:"getDefaultFoundation",value:function(){return new l.a(t.createAdapter(this))}},{key:"initialSyncWithDOM",value:function(){this.unbounded="mdcRippleIsUnbounded"in this.root_.dataset}},{key:"unbounded",get:function(){return this.unbounded_},set:function(e){this.unbounded_=Boolean(e),this.setUnbounded_()}}],[{key:"attachTo",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.isUnbounded,c=void 0===i?void 0:i,a=new t(e);return void 0!==c&&(a.unbounded=c),a}},{key:"createAdapter",value:function(e){var t=o.getMatchesProperty(HTMLElement.prototype);return{browserSupportsCssVars:function(){return o.supportsCssVariables(window)},isUnbounded:function(){return e.unbounded},isSurfaceActive:function(){return e.root_[t](":active")},isSurfaceDisabled:function(){return e.disabled},addClass:function(t){return e.root_.classList.add(t)},removeClass:function(t){return e.root_.classList.remove(t)},containsEventTarget:function(t){return e.root_.contains(t)},registerInteractionHandler:function(t,n){return e.root_.addEventListener(t,n,o.applyPassive())},deregisterInteractionHandler:function(t,n){return e.root_.removeEventListener(t,n,o.applyPassive())},registerDocumentInteractionHandler:function(e,t){return document.documentElement.addEventListener(e,t,o.applyPassive())},deregisterDocumentInteractionHandler:function(e,t){return document.documentElement.removeEventListener(e,t,o.applyPassive())},registerResizeHandler:function(e){return window.addEventListener("resize",e)},deregisterResizeHandler:function(e){return window.removeEventListener("resize",e)},updateCssVariable:function(t,n){return e.root_.style.setProperty(t,n)},computeBoundingRect:function(){return e.root_.getBoundingClientRect()},getWindowPageOffset:function(){return{x:window.pageXOffset,y:window.pageYOffset}}}}}]),t}(r.a),d=function e(){i(this,e)};d.prototype.root_,d.prototype.unbounded,d.prototype.disabled},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(0),l=(n(3),n(6)),o=n(2),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=["touchstart","pointerdown","mousedown","keydown"],g=["touchend","pointerup","mouseup"],I=[],b=function(e){function t(e){i(this,t);var n=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,s(t.defaultAdapter,e)));return n.layoutFrame_=0,n.frame_={width:0,height:0},n.activationState_=n.defaultActivationState_(),n.initialSize_=0,n.maxRadius_=0,n.activateHandler_=function(e){return n.activate_(e)},n.deactivateHandler_=function(e){return n.deactivate_(e)},n.focusHandler_=function(){return n.handleFocus()},n.blurHandler_=function(){return n.handleBlur()},n.resizeHandler_=function(){return n.layout()},n.unboundedCoords_={left:0,top:0},n.fgScale_=0,n.activationTimer_=0,n.fgDeactivationRemovalTimer_=0,n.activationAnimationHasEnded_=!1,n.activationTimerCallback_=function(){n.activationAnimationHasEnded_=!0,n.runDeactivationUXLogicIfReady_()},n.previousActivationEvent_=null,n}return a(t,e),u(t,null,[{key:"cssClasses",get:function(){return l.a}},{key:"strings",get:function(){return l.c}},{key:"numbers",get:function(){return l.b}},{key:"defaultAdapter",get:function(){return{browserSupportsCssVars:function(){},isUnbounded:function(){},isSurfaceActive:function(){},isSurfaceDisabled:function(){},addClass:function(){},removeClass:function(){},containsEventTarget:function(){},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){},registerDocumentInteractionHandler:function(){},deregisterDocumentInteractionHandler:function(){},registerResizeHandler:function(){},deregisterResizeHandler:function(){},updateCssVariable:function(){},computeBoundingRect:function(){},getWindowPageOffset:function(){}}}}]),u(t,[{key:"isSupported_",value:function(){return this.adapter_.browserSupportsCssVars()}},{key:"defaultActivationState_",value:function(){return{isActivated:!1,hasDeactivationUXRun:!1,wasActivatedByPointer:!1,wasElementMadeActive:!1,activationEvent:null,isProgrammatic:!1}}},{key:"init",value:function(){var e=this;if(this.isSupported_()){this.registerRootHandlers_();var n=t.cssClasses,i=n.ROOT,c=n.UNBOUNDED;requestAnimationFrame(function(){e.adapter_.addClass(i),e.adapter_.isUnbounded()&&(e.adapter_.addClass(c),e.layoutInternal_())})}}},{key:"destroy",value:function(){var e=this;if(this.isSupported_()){if(this.activationTimer_){clearTimeout(this.activationTimer_),this.activationTimer_=0;var n=t.cssClasses.FG_ACTIVATION;this.adapter_.removeClass(n)}this.deregisterRootHandlers_(),this.deregisterDeactivationHandlers_();var i=t.cssClasses,c=i.ROOT,a=i.UNBOUNDED;requestAnimationFrame(function(){e.adapter_.removeClass(c),e.adapter_.removeClass(a),e.removeCssVars_()})}}},{key:"registerRootHandlers_",value:function(){var e=this;d.forEach(function(t){e.adapter_.registerInteractionHandler(t,e.activateHandler_)}),this.adapter_.registerInteractionHandler("focus",this.focusHandler_),this.adapter_.registerInteractionHandler("blur",this.blurHandler_),this.adapter_.isUnbounded()&&this.adapter_.registerResizeHandler(this.resizeHandler_)}},{key:"registerDeactivationHandlers_",value:function(e){var t=this;"keydown"===e.type?this.adapter_.registerInteractionHandler("keyup",this.deactivateHandler_):g.forEach(function(e){t.adapter_.registerDocumentInteractionHandler(e,t.deactivateHandler_)})}},{key:"deregisterRootHandlers_",value:function(){var e=this;d.forEach(function(t){e.adapter_.deregisterInteractionHandler(t,e.activateHandler_)}),this.adapter_.deregisterInteractionHandler("focus",this.focusHandler_),this.adapter_.deregisterInteractionHandler("blur",this.blurHandler_),this.adapter_.isUnbounded()&&this.adapter_.deregisterResizeHandler(this.resizeHandler_)}},{key:"deregisterDeactivationHandlers_",value:function(){var e=this;this.adapter_.deregisterInteractionHandler("keyup",this.deactivateHandler_),g.forEach(function(t){e.adapter_.deregisterDocumentInteractionHandler(t,e.deactivateHandler_)})}},{key:"removeCssVars_",value:function(){var e=this,n=t.strings;Object.keys(n).forEach(function(t){0===t.indexOf("VAR_")&&e.adapter_.updateCssVariable(n[t],null)})}},{key:"activate_",value:function(e){var t=this;if(!this.adapter_.isSurfaceDisabled()){var n=this.activationState_;if(!n.isActivated){var i=this.previousActivationEvent_;if(!(i&&e&&i.type!==e.type)){n.isActivated=!0,n.isProgrammatic=null===e,n.activationEvent=e,n.wasActivatedByPointer=!n.isProgrammatic&&("mousedown"===e.type||"touchstart"===e.type||"pointerdown"===e.type);if(e&&I.length>0&&I.some(function(e){return t.adapter_.containsEventTarget(e)}))return void this.resetActivationState_();e&&(I.push(e.target),this.registerDeactivationHandlers_(e)),n.wasElementMadeActive=this.checkElementMadeActive_(e),n.wasElementMadeActive&&this.animateActivation_(),requestAnimationFrame(function(){I=[],n.wasElementMadeActive||" "!==e.key&&32!==e.keyCode||(n.wasElementMadeActive=t.checkElementMadeActive_(e),n.wasElementMadeActive&&t.animateActivation_()),n.wasElementMadeActive||(t.activationState_=t.defaultActivationState_())})}}}}},{key:"checkElementMadeActive_",value:function(e){return!e||"keydown"!==e.type||this.adapter_.isSurfaceActive()}},{key:"activate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.activate_(e)}},{key:"animateActivation_",value:function(){var e=this,n=t.strings,i=n.VAR_FG_TRANSLATE_START,c=n.VAR_FG_TRANSLATE_END,a=t.cssClasses,r=a.FG_DEACTIVATION,l=a.FG_ACTIVATION,o=t.numbers.DEACTIVATION_TIMEOUT_MS;this.layoutInternal_();var s="",u="";if(!this.adapter_.isUnbounded()){var d=this.getFgTranslationCoordinates_(),g=d.startPoint,I=d.endPoint;s=g.x+"px, "+g.y+"px",u=I.x+"px, "+I.y+"px"}this.adapter_.updateCssVariable(i,s),this.adapter_.updateCssVariable(c,u),clearTimeout(this.activationTimer_),clearTimeout(this.fgDeactivationRemovalTimer_),this.rmBoundedActivationClasses_(),this.adapter_.removeClass(r),this.adapter_.computeBoundingRect(),this.adapter_.addClass(l),this.activationTimer_=setTimeout(function(){return e.activationTimerCallback_()},o)}},{key:"getFgTranslationCoordinates_",value:function(){var e=this.activationState_,t=e.activationEvent,n=e.wasActivatedByPointer,i=void 0;return i=n?Object(o.getNormalizedEventCoords)(t,this.adapter_.getWindowPageOffset(),this.adapter_.computeBoundingRect()):{x:this.frame_.width/2,y:this.frame_.height/2},i={x:i.x-this.initialSize_/2,y:i.y-this.initialSize_/2},{startPoint:i,endPoint:{x:this.frame_.width/2-this.initialSize_/2,y:this.frame_.height/2-this.initialSize_/2}}}},{key:"runDeactivationUXLogicIfReady_",value:function(){var e=this,n=t.cssClasses.FG_DEACTIVATION,i=this.activationState_,c=i.hasDeactivationUXRun,a=i.isActivated;(c||!a)&&this.activationAnimationHasEnded_&&(this.rmBoundedActivationClasses_(),this.adapter_.addClass(n),this.fgDeactivationRemovalTimer_=setTimeout(function(){e.adapter_.removeClass(n)},l.b.FG_DEACTIVATION_MS))}},{key:"rmBoundedActivationClasses_",value:function(){var e=t.cssClasses.FG_ACTIVATION;this.adapter_.removeClass(e),this.activationAnimationHasEnded_=!1,this.adapter_.computeBoundingRect()}},{key:"resetActivationState_",value:function(){var e=this;this.previousActivationEvent_=this.activationState_.activationEvent,this.activationState_=this.defaultActivationState_(),setTimeout(function(){return e.previousActivationEvent_=null},t.numbers.TAP_DELAY_MS)}},{key:"deactivate_",value:function(e){var t=this,n=this.activationState_;if(n.isActivated){var i=s({},n);if(n.isProgrammatic){requestAnimationFrame(function(){return t.animateDeactivation_(null,i)}),this.resetActivationState_()}else this.deregisterDeactivationHandlers_(),requestAnimationFrame(function(){t.activationState_.hasDeactivationUXRun=!0,t.animateDeactivation_(e,i),t.resetActivationState_()})}}},{key:"deactivate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.deactivate_(e)}},{key:"animateDeactivation_",value:function(e,t){var n=t.wasActivatedByPointer,i=t.wasElementMadeActive;(n||i)&&this.runDeactivationUXLogicIfReady_()}},{key:"layout",value:function(){var e=this;this.layoutFrame_&&cancelAnimationFrame(this.layoutFrame_),this.layoutFrame_=requestAnimationFrame(function(){e.layoutInternal_(),e.layoutFrame_=0})}},{key:"layoutInternal_",value:function(){var e=this;this.frame_=this.adapter_.computeBoundingRect();var n=Math.max(this.frame_.height,this.frame_.width);this.maxRadius_=this.adapter_.isUnbounded()?n:function(){return Math.sqrt(Math.pow(e.frame_.width,2)+Math.pow(e.frame_.height,2))+t.numbers.PADDING}(),this.initialSize_=n*t.numbers.INITIAL_ORIGIN_SCALE,this.fgScale_=this.maxRadius_/this.initialSize_,this.updateLayoutCssVars_()}},{key:"updateLayoutCssVars_",value:function(){var e=t.strings,n=e.VAR_FG_SIZE,i=e.VAR_LEFT,c=e.VAR_TOP,a=e.VAR_FG_SCALE;this.adapter_.updateCssVariable(n,this.initialSize_+"px"),this.adapter_.updateCssVariable(a,this.fgScale_),this.adapter_.isUnbounded()&&(this.unboundedCoords_={left:Math.round(this.frame_.width/2-this.initialSize_/2),top:Math.round(this.frame_.height/2-this.initialSize_/2)},this.adapter_.updateCssVariable(i,this.unboundedCoords_.left+"px"),this.adapter_.updateCssVariable(c,this.unboundedCoords_.top+"px"))}},{key:"setUnbounded",value:function(e){var n=t.cssClasses.UNBOUNDED;e?this.adapter_.addClass(n):this.adapter_.removeClass(n)}},{key:"handleFocus",value:function(){var e=this;requestAnimationFrame(function(){return e.adapter_.addClass(t.cssClasses.BG_FOCUSED)})}},{key:"handleBlur",value:function(){var e=this;requestAnimationFrame(function(){return e.adapter_.removeClass(t.cssClasses.BG_FOCUSED)})}}]),t}(r.a);t.a=b},function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"c",function(){return c}),n.d(t,"b",function(){return a});var i={ROOT:"mdc-ripple-upgraded",UNBOUNDED:"mdc-ripple-upgraded--unbounded",BG_FOCUSED:"mdc-ripple-upgraded--background-focused",FG_ACTIVATION:"mdc-ripple-upgraded--foreground-activation",FG_DEACTIVATION:"mdc-ripple-upgraded--foreground-deactivation"},c={VAR_LEFT:"--mdc-ripple-left",VAR_TOP:"--mdc-ripple-top",VAR_FG_SIZE:"--mdc-ripple-fg-size",VAR_FG_SCALE:"--mdc-ripple-fg-scale",VAR_FG_TRANSLATE_START:"--mdc-ripple-fg-translate-start",VAR_FG_TRANSLATE_END:"--mdc-ripple-fg-translate-end"},a={PADDING:10,INITIAL_ORIGIN_SCALE:.6,DEACTIVATION_TIMEOUT_MS:225,FG_DEACTIVATION_MS:150,TAP_DELAY_MS:300}}])})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=t.noop=function(){};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.randomId=function(e){return e+"-"+(Math.random()+Math.random()+1).toString(36).substring(2)}},function(e,t,n){"use strict";function i(){}var c=n(43);e.exports=function(){function e(e,t,n,i,a,r){if(r!==c){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=i,n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LineRipple=void 0;var i=n(0),c=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(i),n(1)),a=t.LineRipple=(0,c.simpleTag)({displayName:"LineRipple",classNames:"mdc-line-ripple"});t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FloatingLabel=void 0;var i=n(0),c=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(i),n(1)),a=t.FloatingLabel=(0,c.simpleTag)({displayName:"FloatingLabel",tag:"label",classNames:"mdc-floating-label"});t.default=a},function(e,t,n){"use strict";function i(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}Object.defineProperty(t,"__esModule",{value:!0}),t.NotchedOutlineIdle=t.NotchedOutline=void 0;var c=n(0),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(c),r=(t.NotchedOutline=function(){return a.createElement("div",{className:"mdc-notched-outline"},a.createElement("svg",null,a.createElement("path",{className:"mdc-notched-outline__path"})))},function(e){var t=i(e,[]);return a.createElement("div",Object.assign({},t,{className:"mdc-notched-outline__idle"}))});t.NotchedOutlineIdle=r},function(e,t,n){"use strict";function i(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.IconButton=t.IconButtonRoot=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function e(t,n,i){null===t&&(t=Function.prototype);var c=Object.getOwnPropertyDescriptor(t,n);if(void 0===c){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in c)return c.value;var r=c.get;if(void 0!==r)return r.call(i)},s=n(0),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(s),d=n(48),g=n(3),I=n(15),b=n(1),p=t.IconButtonRoot=(0,b.simpleTag)({displayName:"IconButtonRoot",tag:g.Icon,classNames:"mdc-icon-button",defaultProps:{role:"button",tabIndex:"0"}}),C=t.IconButton=function(e){function t(){return c(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),l(t,[{key:"isOn",value:function(){return void 0!==this.props.checked?this.props.checked:this.foundation_&&this.on}},{key:"initialize",value:function(){this.ripple_=this.initRipple_(),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initialize",this).call(this)}},{key:"syncWithProps",value:function(e){var t=this;(0,b.syncFoundationProp)(e.checked,this.on,function(){t.on=!!e.checked,t.foundation_&&t.foundation_.refreshToggleData()})}},{key:"renderIcon",value:function(){var e=this.props,t=e.use,n=e.children,c=e.onContent,a=e.offContent,r=(e.onLabel,e.offLabel,e.checked,i(e,["use","children","onContent","offContent","onLabel","offLabel","checked"])),l=this.isOn()&&c?c:a||t||n;return-1!==["url","component"].indexOf((0,I.getIconStrategy)(l,"auto",null))?u.createElement(g.Icon,Object.assign({},r,{use:l})):l}},{key:"render",value:function(){var e=this.props,t=(e.checked,e.onContent),n=e.offContent,c=e.onLabel,a=e.offLabel,r=e.label,l=(e.apiRef,e.use,i(e,["checked","onContent","offContent","onLabel","offLabel","label","apiRef","use"])),o=this.isOn(),s=r||a;return u.createElement(p,Object.assign({tag:"button"},l,{use:this.renderIcon(),elementRef:this.foundationRefs.root_,"aria-label":s,"aria-pressed":o,"aria-hidden":"true","data-toggle-on-content":t,"data-toggle-on-label":c,"data-toggle-off-content":n,"data-toggle-off-label":a}))}}]),t}((0,b.withFoundation)({constructor:d.MDCIconButtonToggle,adapter:{setText:function(){this.forceUpdate()}}}));Object.defineProperty(C,"displayName",{enumerable:!0,writable:!0,value:"IconButton"}),t.default=C},function(e,t,n){!function(t,n){e.exports=n()}(0,function(){return function(e){function t(i){if(n[i])return n[i].exports;var c=n[i]={i:i,l:!1,exports:{}};return e[i].call(c.exports,c,c.exports,t),c.l=!0,c.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=76)}({0:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.adapter_=t}return c(e,null,[{key:"cssClasses",get:function(){return{}}},{key:"strings",get:function(){return{}}},{key:"numbers",get:function(){return{}}},{key:"defaultAdapter",get:function(){return{}}}]),c(e,[{key:"init",value:function(){}},{key:"destroy",value:function(){}}]),e}();t.a=a},1:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=n(0),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;i(this,e),this.root_=t;for(var c=arguments.length,a=Array(c>2?c-2:0),r=2;r<c;r++)a[r-2]=arguments[r];this.initialize.apply(this,a),this.foundation_=void 0===n?this.getDefaultFoundation():n,this.foundation_.init(),this.initialSyncWithDOM()}return a(e,null,[{key:"attachTo",value:function(t){return new e(t,new c.a)}}]),a(e,[{key:"initialize",value:function(){}},{key:"getDefaultFoundation",value:function(){throw new Error("Subclasses must override getDefaultFoundation to return a properly configured foundation class")}},{key:"initialSyncWithDOM",value:function(){}},{key:"destroy",value:function(){this.foundation_.destroy()}},{key:"listen",value:function(e,t){this.root_.addEventListener(e,t)}},{key:"unlisten",value:function(e,t){this.root_.removeEventListener(e,t)}},{key:"emit",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=void 0;"function"===typeof CustomEvent?i=new CustomEvent(e,{detail:t,bubbles:n}):(i=document.createEvent("CustomEvent"),i.initCustomEvent(e,n,!1,t)),this.root_.dispatchEvent(i)}}]),e}();t.a=r},2:function(e,t,n){"use strict";function i(e){var t=e.document,n=t.createElement("div");n.className="mdc-ripple-surface--test-edge-var-bug",t.body.appendChild(n);var i=e.getComputedStyle(n),c=null!==i&&"solid"===i.borderTopStyle;return n.remove(),c}function c(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=o;if("boolean"===typeof o&&!t)return n;if(e.CSS&&"function"===typeof e.CSS.supports){var c=e.CSS.supports("--css-vars","yes"),a=e.CSS.supports("(--css-vars: yes)")&&e.CSS.supports("color","#00000000");return n=!(!c&&!a)&&!i(e),t||(o=n),n}}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(void 0===s||t){var n=!1;try{e.document.addEventListener("test",null,{get passive(){n=!0}})}catch(e){}s=n}return!!s&&{passive:!0}}function r(e){return["webkitMatchesSelector","msMatchesSelector","matches"].filter(function(t){return t in e}).pop()}function l(e,t,n){var i=t.x,c=t.y,a=i+n.left,r=c+n.top,l=void 0,o=void 0;return"touchstart"===e.type?(l=e.changedTouches[0].pageX-a,o=e.changedTouches[0].pageY-r):(l=e.pageX-a,o=e.pageY-r),{x:l,y:o}}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"supportsCssVariables",function(){return c}),n.d(t,"applyPassive",function(){return a}),n.d(t,"getMatchesProperty",function(){return r}),n.d(t,"getNormalizedEventCoords",function(){return l});var o=void 0,s=void 0},3:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();!function(){function e(){i(this,e)}c(e,[{key:"browserSupportsCssVars",value:function(){}},{key:"isUnbounded",value:function(){}},{key:"isSurfaceActive",value:function(){}},{key:"isSurfaceDisabled",value:function(){}},{key:"addClass",value:function(e){}},{key:"removeClass",value:function(e){}},{key:"containsEventTarget",value:function(e){}},{key:"registerInteractionHandler",value:function(e,t){}},{key:"deregisterInteractionHandler",value:function(e,t){}},{key:"registerDocumentInteractionHandler",value:function(e,t){}},{key:"deregisterDocumentInteractionHandler",value:function(e,t){}},{key:"registerResizeHandler",value:function(e){}},{key:"deregisterResizeHandler",value:function(e){}},{key:"updateCssVariable",value:function(e,t){}},{key:"computeBoundingRect",value:function(){}},{key:"getWindowPageOffset",value:function(){}}])}()},4:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"MDCRipple",function(){return u}),n.d(t,"RippleCapableSurface",function(){return d});var r=n(1),l=(n(3),n(5)),o=n(2);n.d(t,"MDCRippleFoundation",function(){return l.a}),n.d(t,"util",function(){return o});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(e){function t(){var e;i(this,t);for(var n=arguments.length,a=Array(n),r=0;r<n;r++)a[r]=arguments[r];var l=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a)));return l.disabled=!1,l.unbounded_,l}return a(t,e),s(t,[{key:"setUnbounded_",value:function(){this.foundation_.setUnbounded(this.unbounded_)}},{key:"activate",value:function(){this.foundation_.activate()}},{key:"deactivate",value:function(){this.foundation_.deactivate()}},{key:"layout",value:function(){this.foundation_.layout()}},{key:"getDefaultFoundation",value:function(){return new l.a(t.createAdapter(this))}},{key:"initialSyncWithDOM",value:function(){this.unbounded="mdcRippleIsUnbounded"in this.root_.dataset}},{key:"unbounded",get:function(){return this.unbounded_},set:function(e){this.unbounded_=Boolean(e),this.setUnbounded_()}}],[{key:"attachTo",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.isUnbounded,c=void 0===i?void 0:i,a=new t(e);return void 0!==c&&(a.unbounded=c),a}},{key:"createAdapter",value:function(e){var t=o.getMatchesProperty(HTMLElement.prototype);return{browserSupportsCssVars:function(){return o.supportsCssVariables(window)},isUnbounded:function(){return e.unbounded},isSurfaceActive:function(){return e.root_[t](":active")},isSurfaceDisabled:function(){return e.disabled},addClass:function(t){return e.root_.classList.add(t)},removeClass:function(t){return e.root_.classList.remove(t)},containsEventTarget:function(t){return e.root_.contains(t)},registerInteractionHandler:function(t,n){return e.root_.addEventListener(t,n,o.applyPassive())},deregisterInteractionHandler:function(t,n){return e.root_.removeEventListener(t,n,o.applyPassive())},registerDocumentInteractionHandler:function(e,t){return document.documentElement.addEventListener(e,t,o.applyPassive())},deregisterDocumentInteractionHandler:function(e,t){return document.documentElement.removeEventListener(e,t,o.applyPassive())},registerResizeHandler:function(e){return window.addEventListener("resize",e)},deregisterResizeHandler:function(e){return window.removeEventListener("resize",e)},updateCssVariable:function(t,n){return e.root_.style.setProperty(t,n)},computeBoundingRect:function(){return e.root_.getBoundingClientRect()},getWindowPageOffset:function(){return{x:window.pageXOffset,y:window.pageYOffset}}}}}]),t}(r.a),d=function e(){i(this,e)};d.prototype.root_,d.prototype.unbounded,d.prototype.disabled},5:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(0),l=(n(3),n(6)),o=n(2),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=["touchstart","pointerdown","mousedown","keydown"],g=["touchend","pointerup","mouseup"],I=[],b=function(e){function t(e){i(this,t);var n=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,s(t.defaultAdapter,e)));return n.layoutFrame_=0,n.frame_={width:0,height:0},n.activationState_=n.defaultActivationState_(),n.initialSize_=0,n.maxRadius_=0,n.activateHandler_=function(e){return n.activate_(e)},n.deactivateHandler_=function(e){return n.deactivate_(e)},n.focusHandler_=function(){return n.handleFocus()},n.blurHandler_=function(){return n.handleBlur()},n.resizeHandler_=function(){return n.layout()},n.unboundedCoords_={left:0,top:0},n.fgScale_=0,n.activationTimer_=0,n.fgDeactivationRemovalTimer_=0,n.activationAnimationHasEnded_=!1,n.activationTimerCallback_=function(){n.activationAnimationHasEnded_=!0,n.runDeactivationUXLogicIfReady_()},n.previousActivationEvent_=null,n}return a(t,e),u(t,null,[{key:"cssClasses",get:function(){return l.a}},{key:"strings",get:function(){return l.c}},{key:"numbers",get:function(){return l.b}},{key:"defaultAdapter",get:function(){return{browserSupportsCssVars:function(){},isUnbounded:function(){},isSurfaceActive:function(){},isSurfaceDisabled:function(){},addClass:function(){},removeClass:function(){},containsEventTarget:function(){},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){},registerDocumentInteractionHandler:function(){},deregisterDocumentInteractionHandler:function(){},registerResizeHandler:function(){},deregisterResizeHandler:function(){},updateCssVariable:function(){},computeBoundingRect:function(){},getWindowPageOffset:function(){}}}}]),u(t,[{key:"isSupported_",value:function(){return this.adapter_.browserSupportsCssVars()}},{key:"defaultActivationState_",value:function(){return{isActivated:!1,hasDeactivationUXRun:!1,wasActivatedByPointer:!1,wasElementMadeActive:!1,activationEvent:null,isProgrammatic:!1}}},{key:"init",value:function(){var e=this;if(this.isSupported_()){this.registerRootHandlers_();var n=t.cssClasses,i=n.ROOT,c=n.UNBOUNDED;requestAnimationFrame(function(){e.adapter_.addClass(i),e.adapter_.isUnbounded()&&(e.adapter_.addClass(c),e.layoutInternal_())})}}},{key:"destroy",value:function(){var e=this;if(this.isSupported_()){if(this.activationTimer_){clearTimeout(this.activationTimer_),this.activationTimer_=0;var n=t.cssClasses.FG_ACTIVATION;this.adapter_.removeClass(n)}this.deregisterRootHandlers_(),this.deregisterDeactivationHandlers_();var i=t.cssClasses,c=i.ROOT,a=i.UNBOUNDED;requestAnimationFrame(function(){e.adapter_.removeClass(c),e.adapter_.removeClass(a),e.removeCssVars_()})}}},{key:"registerRootHandlers_",value:function(){var e=this;d.forEach(function(t){e.adapter_.registerInteractionHandler(t,e.activateHandler_)}),this.adapter_.registerInteractionHandler("focus",this.focusHandler_),this.adapter_.registerInteractionHandler("blur",this.blurHandler_),this.adapter_.isUnbounded()&&this.adapter_.registerResizeHandler(this.resizeHandler_)}},{key:"registerDeactivationHandlers_",value:function(e){var t=this;"keydown"===e.type?this.adapter_.registerInteractionHandler("keyup",this.deactivateHandler_):g.forEach(function(e){t.adapter_.registerDocumentInteractionHandler(e,t.deactivateHandler_)})}},{key:"deregisterRootHandlers_",value:function(){var e=this;d.forEach(function(t){e.adapter_.deregisterInteractionHandler(t,e.activateHandler_)}),this.adapter_.deregisterInteractionHandler("focus",this.focusHandler_),this.adapter_.deregisterInteractionHandler("blur",this.blurHandler_),this.adapter_.isUnbounded()&&this.adapter_.deregisterResizeHandler(this.resizeHandler_)}},{key:"deregisterDeactivationHandlers_",value:function(){var e=this;this.adapter_.deregisterInteractionHandler("keyup",this.deactivateHandler_),g.forEach(function(t){e.adapter_.deregisterDocumentInteractionHandler(t,e.deactivateHandler_)})}},{key:"removeCssVars_",value:function(){var e=this,n=t.strings;Object.keys(n).forEach(function(t){0===t.indexOf("VAR_")&&e.adapter_.updateCssVariable(n[t],null)})}},{key:"activate_",value:function(e){var t=this;if(!this.adapter_.isSurfaceDisabled()){var n=this.activationState_;if(!n.isActivated){var i=this.previousActivationEvent_;if(!(i&&e&&i.type!==e.type)){n.isActivated=!0,n.isProgrammatic=null===e,n.activationEvent=e,n.wasActivatedByPointer=!n.isProgrammatic&&("mousedown"===e.type||"touchstart"===e.type||"pointerdown"===e.type);if(e&&I.length>0&&I.some(function(e){return t.adapter_.containsEventTarget(e)}))return void this.resetActivationState_();e&&(I.push(e.target),this.registerDeactivationHandlers_(e)),n.wasElementMadeActive=this.checkElementMadeActive_(e),n.wasElementMadeActive&&this.animateActivation_(),requestAnimationFrame(function(){I=[],n.wasElementMadeActive||" "!==e.key&&32!==e.keyCode||(n.wasElementMadeActive=t.checkElementMadeActive_(e),n.wasElementMadeActive&&t.animateActivation_()),n.wasElementMadeActive||(t.activationState_=t.defaultActivationState_())})}}}}},{key:"checkElementMadeActive_",value:function(e){return!e||"keydown"!==e.type||this.adapter_.isSurfaceActive()}},{key:"activate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.activate_(e)}},{key:"animateActivation_",value:function(){var e=this,n=t.strings,i=n.VAR_FG_TRANSLATE_START,c=n.VAR_FG_TRANSLATE_END,a=t.cssClasses,r=a.FG_DEACTIVATION,l=a.FG_ACTIVATION,o=t.numbers.DEACTIVATION_TIMEOUT_MS;this.layoutInternal_();var s="",u="";if(!this.adapter_.isUnbounded()){var d=this.getFgTranslationCoordinates_(),g=d.startPoint,I=d.endPoint;s=g.x+"px, "+g.y+"px",u=I.x+"px, "+I.y+"px"}this.adapter_.updateCssVariable(i,s),this.adapter_.updateCssVariable(c,u),clearTimeout(this.activationTimer_),clearTimeout(this.fgDeactivationRemovalTimer_),this.rmBoundedActivationClasses_(),this.adapter_.removeClass(r),this.adapter_.computeBoundingRect(),this.adapter_.addClass(l),this.activationTimer_=setTimeout(function(){return e.activationTimerCallback_()},o)}},{key:"getFgTranslationCoordinates_",value:function(){var e=this.activationState_,t=e.activationEvent,n=e.wasActivatedByPointer,i=void 0;return i=n?Object(o.getNormalizedEventCoords)(t,this.adapter_.getWindowPageOffset(),this.adapter_.computeBoundingRect()):{x:this.frame_.width/2,y:this.frame_.height/2},i={x:i.x-this.initialSize_/2,y:i.y-this.initialSize_/2},{startPoint:i,endPoint:{x:this.frame_.width/2-this.initialSize_/2,y:this.frame_.height/2-this.initialSize_/2}}}},{key:"runDeactivationUXLogicIfReady_",value:function(){var e=this,n=t.cssClasses.FG_DEACTIVATION,i=this.activationState_,c=i.hasDeactivationUXRun,a=i.isActivated;(c||!a)&&this.activationAnimationHasEnded_&&(this.rmBoundedActivationClasses_(),this.adapter_.addClass(n),this.fgDeactivationRemovalTimer_=setTimeout(function(){e.adapter_.removeClass(n)},l.b.FG_DEACTIVATION_MS))}},{key:"rmBoundedActivationClasses_",value:function(){var e=t.cssClasses.FG_ACTIVATION;this.adapter_.removeClass(e),this.activationAnimationHasEnded_=!1,this.adapter_.computeBoundingRect()}},{key:"resetActivationState_",value:function(){var e=this;this.previousActivationEvent_=this.activationState_.activationEvent,this.activationState_=this.defaultActivationState_(),setTimeout(function(){return e.previousActivationEvent_=null},t.numbers.TAP_DELAY_MS)}},{key:"deactivate_",value:function(e){var t=this,n=this.activationState_;if(n.isActivated){var i=s({},n);if(n.isProgrammatic){requestAnimationFrame(function(){return t.animateDeactivation_(null,i)}),this.resetActivationState_()}else this.deregisterDeactivationHandlers_(),requestAnimationFrame(function(){t.activationState_.hasDeactivationUXRun=!0,t.animateDeactivation_(e,i),t.resetActivationState_()})}}},{key:"deactivate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.deactivate_(e)}},{key:"animateDeactivation_",value:function(e,t){var n=t.wasActivatedByPointer,i=t.wasElementMadeActive;(n||i)&&this.runDeactivationUXLogicIfReady_()}},{key:"layout",value:function(){var e=this;this.layoutFrame_&&cancelAnimationFrame(this.layoutFrame_),this.layoutFrame_=requestAnimationFrame(function(){e.layoutInternal_(),e.layoutFrame_=0})}},{key:"layoutInternal_",value:function(){var e=this;this.frame_=this.adapter_.computeBoundingRect();var n=Math.max(this.frame_.height,this.frame_.width);this.maxRadius_=this.adapter_.isUnbounded()?n:function(){return Math.sqrt(Math.pow(e.frame_.width,2)+Math.pow(e.frame_.height,2))+t.numbers.PADDING}(),this.initialSize_=n*t.numbers.INITIAL_ORIGIN_SCALE,this.fgScale_=this.maxRadius_/this.initialSize_,this.updateLayoutCssVars_()}},{key:"updateLayoutCssVars_",value:function(){var e=t.strings,n=e.VAR_FG_SIZE,i=e.VAR_LEFT,c=e.VAR_TOP,a=e.VAR_FG_SCALE;this.adapter_.updateCssVariable(n,this.initialSize_+"px"),this.adapter_.updateCssVariable(a,this.fgScale_),this.adapter_.isUnbounded()&&(this.unboundedCoords_={left:Math.round(this.frame_.width/2-this.initialSize_/2),top:Math.round(this.frame_.height/2-this.initialSize_/2)},this.adapter_.updateCssVariable(i,this.unboundedCoords_.left+"px"),this.adapter_.updateCssVariable(c,this.unboundedCoords_.top+"px"))}},{key:"setUnbounded",value:function(e){var n=t.cssClasses.UNBOUNDED;e?this.adapter_.addClass(n):this.adapter_.removeClass(n)}},{key:"handleFocus",value:function(){var e=this;requestAnimationFrame(function(){return e.adapter_.addClass(t.cssClasses.BG_FOCUSED)})}},{key:"handleBlur",value:function(){var e=this;requestAnimationFrame(function(){return e.adapter_.removeClass(t.cssClasses.BG_FOCUSED)})}}]),t}(r.a);t.a=b},6:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"c",function(){return c}),n.d(t,"b",function(){return a});var i={ROOT:"mdc-ripple-upgraded",UNBOUNDED:"mdc-ripple-upgraded--unbounded",BG_FOCUSED:"mdc-ripple-upgraded--background-focused",FG_ACTIVATION:"mdc-ripple-upgraded--foreground-activation",FG_DEACTIVATION:"mdc-ripple-upgraded--foreground-deactivation"},c={VAR_LEFT:"--mdc-ripple-left",VAR_TOP:"--mdc-ripple-top",VAR_FG_SIZE:"--mdc-ripple-fg-size",VAR_FG_SCALE:"--mdc-ripple-fg-scale",VAR_FG_TRANSLATE_START:"--mdc-ripple-fg-translate-start",VAR_FG_TRANSLATE_END:"--mdc-ripple-fg-translate-end"},a={PADDING:10,INITIAL_ORIGIN_SCALE:.6,DEACTIVATION_TIMEOUT_MS:225,FG_DEACTIVATION_MS:150,TAP_DELAY_MS:300}},76:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"MDCIconButtonToggle",function(){return d});var r=n(1),l=n(77),o=n(4);n.d(t,"MDCIconButtonToggleFoundation",function(){return l.a});var s=function e(t,n,i){null===t&&(t=Function.prototype);var c=Object.getOwnPropertyDescriptor(t,n);if(void 0===c){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in c)return c.value;var r=c.get;if(void 0!==r)return r.call(i)},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function(e){function t(){var e;i(this,t);for(var n=arguments.length,a=Array(n),r=0;r<n;r++)a[r]=arguments[r];var l=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a)));return l.ripple_=l.initRipple_(),l}return a(t,e),u(t,null,[{key:"attachTo",value:function(e){return new t(e)}}]),u(t,[{key:"initRipple_",value:function(){var e=new o.MDCRipple(this.root_);return e.unbounded=!0,e}},{key:"destroy",value:function(){this.ripple_.destroy(),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"getDefaultFoundation",value:function(){var e=this;return new l.a({addClass:function(t){return e.iconEl_.classList.add(t)},removeClass:function(t){return e.iconEl_.classList.remove(t)},registerInteractionHandler:function(t,n){return e.root_.addEventListener(t,n)},deregisterInteractionHandler:function(t,n){return e.root_.removeEventListener(t,n)},setText:function(t){return e.iconEl_.textContent=t},getAttr:function(t){return e.root_.getAttribute(t)},setAttr:function(t,n){return e.root_.setAttribute(t,n)},notifyChange:function(t){return e.emit(l.a.strings.CHANGE_EVENT,t)}})}},{key:"initialSyncWithDOM",value:function(){this.on="true"===this.root_.getAttribute(l.a.strings.ARIA_PRESSED)}},{key:"refreshToggleData",value:function(){this.foundation_.refreshToggleData()}},{key:"iconEl_",get:function(){var e=this.root_.dataset.iconInnerSelector;return e?this.root_.querySelector(e):this.root_}},{key:"ripple",get:function(){return this.ripple_}},{key:"on",get:function(){return this.foundation_.isOn()},set:function(e){this.foundation_.toggle(e)}}]),t}(r.a)},77:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(0),l=(n(78),n(79)),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(e){function t(e){i(this,t);var n=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,o(t.defaultAdapter,e))),a=t.strings.ARIA_PRESSED;return n.on_="true"===n.adapter_.getAttr(a),n.disabled_=!1,n.toggleOnData_=null,n.toggleOffData_=null,n.clickHandler_=function(){return n.toggleFromEvt_()},n}return a(t,e),s(t,null,[{key:"cssClasses",get:function(){return l.a}},{key:"strings",get:function(){return l.b}},{key:"defaultAdapter",get:function(){return{addClass:function(){},removeClass:function(){},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){},setText:function(){},getAttr:function(){return""},setAttr:function(){},notifyChange:function(){}}}}]),s(t,[{key:"init",value:function(){this.refreshToggleData(),this.adapter_.registerInteractionHandler("click",this.clickHandler_)}},{key:"destroy",value:function(){this.adapter_.deregisterInteractionHandler("click",this.clickHandler_)}},{key:"refreshToggleData",value:function(){this.toggleOnData_={label:this.adapter_.getAttr(l.b.DATA_TOGGLE_ON_LABEL),content:this.adapter_.getAttr(l.b.DATA_TOGGLE_ON_CONTENT),cssClass:this.adapter_.getAttr(l.b.DATA_TOGGLE_ON_CLASS)},this.toggleOffData_={label:this.adapter_.getAttr(l.b.DATA_TOGGLE_OFF_LABEL),content:this.adapter_.getAttr(l.b.DATA_TOGGLE_OFF_CONTENT),cssClass:this.adapter_.getAttr(l.b.DATA_TOGGLE_OFF_CLASS)}}},{key:"toggleFromEvt_",value:function(){this.toggle();var e=this.on_;this.adapter_.notifyChange({isOn:e})}},{key:"isOn",value:function(){return this.on_}},{key:"toggle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.on_;this.on_=e;var n=t.strings,i=n.ARIA_LABEL,c=n.ARIA_PRESSED;this.adapter_.setAttr(c,this.on_.toString());var a=this.on_?this.toggleOffData_:this.toggleOnData_,r=a.cssClass;r&&this.adapter_.removeClass(r);var l=this.on_?this.toggleOnData_:this.toggleOffData_,o=l.content,s=l.label,u=l.cssClass;u&&this.adapter_.addClass(u),o&&this.adapter_.setText(o),s&&this.adapter_.setAttr(i,s)}}]),t}(r.a),d=function e(){i(this,e)};d.prototype.label,d.prototype.content,d.prototype.cssClass,t.a=u},78:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();!function(){function e(){i(this,e)}c(e,[{key:"addClass",value:function(e){}},{key:"removeClass",value:function(e){}},{key:"registerInteractionHandler",value:function(e,t){}},{key:"deregisterInteractionHandler",value:function(e,t){}},{key:"setText",value:function(e){}},{key:"getAttr",value:function(e){}},{key:"setAttr",value:function(e,t){}},{key:"notifyChange",value:function(e){}}])}()},79:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return c});var i={ROOT:"mdc-icon-button"},c={DATA_TOGGLE_ON_LABEL:"data-toggle-on-label",DATA_TOGGLE_ON_CONTENT:"data-toggle-on-content",DATA_TOGGLE_ON_CLASS:"data-toggle-on-class",DATA_TOGGLE_OFF_LABEL:"data-toggle-off-label",DATA_TOGGLE_OFF_CONTENT:"data-toggle-off-content",DATA_TOGGLE_OFF_CLASS:"data-toggle-off-class",ARIA_PRESSED:"aria-pressed",ARIA_LABEL:"aria-label",CHANGE_EVENT:"MDCIconButtonToggle:change"}}})})},function(e,t,n){"use strict";function i(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}Object.defineProperty(t,"__esModule",{value:!0}),t.ThemeProvider=t.Theme=void 0;var c=n(0),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(c),r=n(1),l=n(13),o=(0,r.simpleTag)({tag:"span"}),s=function(e){var t=e.use,n=i(e,["use"]);return a.createElement(o,Object.assign({theme:t},n))};t.Theme=s,s.displayName="Theme";var u=function(e){var t=e.options,n=e.style,c=void 0===n?{}:n,r=i(e,["options","style"]),o=Object.keys(t).reduce(function(e,n){var i=t[n];return e["--mdc-theme-"+(0,l.toDashCase)(n)]=i,e},{}),s=c,u=Object.assign({},s,o);return a.createElement("div",Object.assign({},r,{style:u}))};t.ThemeProvider=u,u.displayName="ThemeProvider"},function(e,t,n){"use strict";function i(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.Grid=t.GridInner=t.GridCell=t.GridRoot=void 0;var o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function e(t,n,i){null===t&&(t=Function.prototype);var c=Object.getOwnPropertyDescriptor(t,n);if(void 0===c){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in c)return c.value;var r=c.get;if(void 0!==r)return r.call(i)},d=n(0),g=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(d),I=n(1),b=t.GridRoot=(0,I.simpleTag)({displayName:"GridRoot",classNames:function(e){var t;return["mdc-layout-grid",(t={},l(t,"mdc-layout-grid__cell--align-"+(e.align||""),void 0!==e.align),l(t,"mdc-layout-grid--fixed-column-width",e.fixedColumnWidth),t)]},consumeProps:["fixedColumnWidth","align"]}),p=(t.GridCell=function(e){function t(){return c(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),s(t,[{key:"render",value:function(){return u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this)}}]),t}((0,I.simpleTag)({displayName:"GridCell",defaultProps:{span:void 0,phone:void 0,tablet:void 0,desktop:void 0,order:void 0},classNames:function(e){var t;return["mdc-layout-grid__cell",(t={},l(t,"mdc-layout-grid__cell--order-"+(e.order||""),void 0!==e.order),l(t,"mdc-layout-grid__cell--align-"+(e.align||""),void 0!==e.align),l(t,"mdc-layout-grid__cell--span-"+(e.span||""),void 0!==e.span),l(t,"mdc-layout-grid__cell--span-"+(e.phone||"")+"-phone",void 0!==e.phone),l(t,"mdc-layout-grid__cell--span-"+(e.tablet||"")+"-tablet",void 0!==e.tablet),l(t,"mdc-layout-grid__cell--span-"+(e.desktop||"")+"-desktop",void 0!==e.desktop),t)]},consumeProps:["span","phone","tablet","desktop","order","align"]})),t.GridInner=(0,I.simpleTag)({displayName:"GridInner",classNames:"mdc-layout-grid__inner"})),C=function(e){var t=e.children,n=i(e,["children"]),c=t,a=!(c&&"object"===("undefined"===typeof c?"undefined":o(c))&&"GridInner"===(c.type||{}).displayName);return g.createElement(b,n,a?g.createElement(p,null,t):t)};t.Grid=C,C.displayName="Grid"},function(e,t,n){"use strict";function i(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.LinearProgress=t.LinearProgressBarInner=t.LinearProgressSecondaryBar=t.LinearProgressPrimaryBar=t.LinearProgressBuffer=t.LinearProgressBufferingDots=t.LinearProgressRoot=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(0),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(o),u=n(52),d=n(1),g=t.LinearProgressRoot=(0,d.simpleTag)({displayName:"LinearProgressRoot",tag:"nav",classNames:function(e){return["mdc-linear-progress",{"mdc-linear-progress--indeterminate":!e.determinate,"mdc-linear-progress--reversed":e.reversed}]},defaultProps:{role:"progressbar",determinate:!0,reversed:!1,accent:!1},consumeProps:["determinate","reversed","accent"]}),I=t.LinearProgressBufferingDots=(0,d.simpleTag)({displayName:"LinearProgressBufferingDots",classNames:"mdc-linear-progress__buffering-dots"}),b=t.LinearProgressBuffer=(0,d.simpleTag)({displayName:"LinearProgressBuffer",classNames:"mdc-linear-progress__buffer"}),p=t.LinearProgressPrimaryBar=(0,d.simpleTag)({displayName:"LinearProgressPrimaryBar",classNames:"mdc-linear-progress__bar mdc-linear-progress__primary-bar"}),C=t.LinearProgressSecondaryBar=(0,d.simpleTag)({displayName:"LinearProgressSecondaryBar",classNames:"mdc-linear-progress__bar mdc-linear-progress__secondary-bar"}),m=t.LinearProgressBarInner=(0,d.simpleTag)({displayName:"LinearProgressBarInner",classNames:"mdc-linear-progress__bar-inner"}),h=t.LinearProgress=function(e){function t(){return c(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),l(t,[{key:"syncWithProps",value:function(e){var t=this;(0,d.syncFoundationProp)(e.progress,this.progress,function(){return t.progress=e.progress}),(0,d.syncFoundationProp)(e.buffer,this.buffer,function(){return t.buffer=e.buffer}),(0,d.syncFoundationProp)(e.determinate,this.determinate,function(){return t.determinate=e.determinate}),(0,d.syncFoundationProp)(e.reversed,this.reversed,function(){return t.reversed=e.reversed})}},{key:"render",value:function(){var e=this.props,t=(e.progress,e.buffer,i(e,["progress","buffer"])),n=this.foundationRefs.root_;return s.createElement(g,Object.assign({elementRef:n},t),s.createElement(I,null),s.createElement(b,null),s.createElement(p,null,s.createElement(m,null)),s.createElement(C,null,s.createElement(m,null)))}}]),t}((0,d.withFoundation)({constructor:u.MDCLinearProgress,adapter:{}}));Object.defineProperty(h,"displayName",{enumerable:!0,writable:!0,value:"LinearProgress"}),Object.defineProperty(h,"defaultProps",{enumerable:!0,writable:!0,value:{progress:0,buffer:void 0,determinate:!0,reversed:!1}}),t.default=h},function(e,t,n){!function(t,n){e.exports=n()}(0,function(){return function(e){function t(i){if(n[i])return n[i].exports;var c=n[i]={i:i,l:!1,exports:{}};return e[i].call(c.exports,c,c.exports,t),c.l=!0,c.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=80)}({0:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.adapter_=t}return c(e,null,[{key:"cssClasses",get:function(){return{}}},{key:"strings",get:function(){return{}}},{key:"numbers",get:function(){return{}}},{key:"defaultAdapter",get:function(){return{}}}]),c(e,[{key:"init",value:function(){}},{key:"destroy",value:function(){}}]),e}();t.a=a},1:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=n(0),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;i(this,e),this.root_=t;for(var c=arguments.length,a=Array(c>2?c-2:0),r=2;r<c;r++)a[r-2]=arguments[r];this.initialize.apply(this,a),this.foundation_=void 0===n?this.getDefaultFoundation():n,this.foundation_.init(),this.initialSyncWithDOM()}return a(e,null,[{key:"attachTo",value:function(t){return new e(t,new c.a)}}]),a(e,[{key:"initialize",value:function(){}},{key:"getDefaultFoundation",value:function(){throw new Error("Subclasses must override getDefaultFoundation to return a properly configured foundation class")}},{key:"initialSyncWithDOM",value:function(){}},{key:"destroy",value:function(){this.foundation_.destroy()}},{key:"listen",value:function(e,t){this.root_.addEventListener(e,t)}},{key:"unlisten",value:function(e,t){this.root_.removeEventListener(e,t)}},{key:"emit",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=void 0;"function"===typeof CustomEvent?i=new CustomEvent(e,{detail:t,bubbles:n}):(i=document.createEvent("CustomEvent"),i.initCustomEvent(e,n,!1,t)),this.root_.dispatchEvent(i)}}]),e}();t.a=r},7:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),c=n(1);n.d(t,"MDCFoundation",function(){return i.a}),n.d(t,"MDCComponent",function(){return c.a})},8:function(e,t,n){"use strict";function i(e){return void 0!==e.document&&"function"===typeof e.document.createElement}function c(e){return e in s||e in u}function a(e,t,n){return t[e].styleProperty in n.style?t[e].noPrefix:t[e].webkitPrefix}function r(e,t){if(!i(e)||!c(t))return t;var n=t in s?s:u,r=e.document.createElement("div");return n===s?a(t,n,r):n[t].noPrefix in r.style?n[t].noPrefix:n[t].webkitPrefix}function l(e,t){return r(e,t)}function o(e,t){return r(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"transformStyleProperties",function(){return d}),n.d(t,"getCorrectEventName",function(){return l}),n.d(t,"getCorrectPropertyName",function(){return o});var s={animationstart:{noPrefix:"animationstart",webkitPrefix:"webkitAnimationStart",styleProperty:"animation"},animationend:{noPrefix:"animationend",webkitPrefix:"webkitAnimationEnd",styleProperty:"animation"},animationiteration:{noPrefix:"animationiteration",webkitPrefix:"webkitAnimationIteration",styleProperty:"animation"},transitionend:{noPrefix:"transitionend",webkitPrefix:"webkitTransitionEnd",styleProperty:"transition"}},u={animation:{noPrefix:"animation",webkitPrefix:"-webkit-animation"},transform:{noPrefix:"transform",webkitPrefix:"-webkit-transform"},transition:{noPrefix:"transition",webkitPrefix:"-webkit-transition"}},d=["transform","WebkitTransform","MozTransform","OTransform","MSTransform"]},80:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"MDCLinearProgress",function(){return s});var r=n(7),l=n(81);n.d(t,"MDCLinearProgressFoundation",function(){return l.a});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(e){function t(){return i(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),o(t,[{key:"open",value:function(){this.foundation_.open()}},{key:"close",value:function(){this.foundation_.close()}},{key:"getDefaultFoundation",value:function(){var e=this;return new l.a({addClass:function(t){return e.root_.classList.add(t)},getPrimaryBar:function(){return e.root_.querySelector(l.a.strings.PRIMARY_BAR_SELECTOR)},getBuffer:function(){return e.root_.querySelector(l.a.strings.BUFFER_SELECTOR)},hasClass:function(t){return e.root_.classList.contains(t)},removeClass:function(t){return e.root_.classList.remove(t)},setStyle:function(e,t,n){return e.style[t]=n}})}},{key:"determinate",set:function(e){this.foundation_.setDeterminate(e)}},{key:"progress",set:function(e){this.foundation_.setProgress(e)}},{key:"buffer",set:function(e){this.foundation_.setBuffer(e)}},{key:"reverse",set:function(e){this.foundation_.setReverse(e)}}],[{key:"attachTo",value:function(e){return new t(e)}}]),t}(r.MDCComponent)},81:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(7),l=n(8),o=n(82),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function(e){function t(e){return i(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,s(t.defaultAdapter,e)))}return a(t,e),u(t,null,[{key:"cssClasses",get:function(){return o.a}},{key:"strings",get:function(){return o.b}},{key:"defaultAdapter",get:function(){return{addClass:function(){},getPrimaryBar:function(){},getBuffer:function(){},hasClass:function(){return!1},removeClass:function(){},setStyle:function(){}}}}]),u(t,[{key:"init",value:function(){this.determinate_=!this.adapter_.hasClass(o.a.INDETERMINATE_CLASS),this.reverse_=this.adapter_.hasClass(o.a.REVERSED_CLASS),this.progress_=0}},{key:"setDeterminate",value:function(e){this.determinate_=e,this.determinate_?(this.adapter_.removeClass(o.a.INDETERMINATE_CLASS),this.setScale_(this.adapter_.getPrimaryBar(),this.progress_)):(this.adapter_.addClass(o.a.INDETERMINATE_CLASS),this.setScale_(this.adapter_.getPrimaryBar(),1),this.setScale_(this.adapter_.getBuffer(),1))}},{key:"setProgress",value:function(e){this.progress_=e,this.determinate_&&this.setScale_(this.adapter_.getPrimaryBar(),e)}},{key:"setBuffer",value:function(e){this.determinate_&&this.setScale_(this.adapter_.getBuffer(),e)}},{key:"setReverse",value:function(e){this.reverse_=e,this.reverse_?this.adapter_.addClass(o.a.REVERSED_CLASS):this.adapter_.removeClass(o.a.REVERSED_CLASS)}},{key:"open",value:function(){this.adapter_.removeClass(o.a.CLOSED_CLASS)}},{key:"close",value:function(){this.adapter_.addClass(o.a.CLOSED_CLASS)}},{key:"setScale_",value:function(e,t){var n=this,i="scaleX("+t+")";l.transformStyleProperties.forEach(function(t){n.adapter_.setStyle(e,t,i)})}}]),t}(r.MDCFoundation);t.a=d},82:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return c});var i={CLOSED_CLASS:"mdc-linear-progress--closed",INDETERMINATE_CLASS:"mdc-linear-progress--indeterminate",REVERSED_CLASS:"mdc-linear-progress--reversed"},c={PRIMARY_BAR_SELECTOR:".mdc-linear-progress__primary-bar",BUFFER_SELECTOR:".mdc-linear-progress__buffer"}}})})},function(e,t,n){"use strict";e.exports=n(54)},function(module,exports,__webpack_require__){!function(e,t){module.exports=t()}("undefined"!==typeof self&&self,function(){return function(e){function t(i){if(n[i])return n[i].exports;var c=n[i]={i:i,l:!1,exports:{}};return e[i].call(c.exports,c,c.exports,t),c.l=!0,c.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=27)}([function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\n/*eslint no-console: 0*/\n\n/**\n * eyeson Logger implement debug|info|warn|error methods.\n **/\nexports.default = function () {\n  return {\n    error: function error() {\n      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return console.error(args);\n    },\n    warn: function warn() {\n      for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      return console.warn(args);\n    },\n    info: function info() {\n      for (var _len3 = arguments.length, args = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        args[_key3] = arguments[_key3];\n      }\n\n      return console.log(args);\n    },\n    debug: function debug() {\n      if (!console.debug) {\n        return null;\n      }\n\n      for (var _len4 = arguments.length, args = Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        args[_key4] = arguments[_key4];\n      }\n\n      return console.debug(args);\n    }\n  };\n}();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvTG9nZ2VyLmpzP2VlNmUiXSwic291cmNlc0NvbnRlbnQiOlsiLyplc2xpbnQgbm8tY29uc29sZTogMCovXG5cbi8qKlxuICogZXllc29uIExvZ2dlciBpbXBsZW1lbnQgZGVidWd8aW5mb3x3YXJufGVycm9yIG1ldGhvZHMuXG4gKiovXG5leHBvcnQgZGVmYXVsdCAoZnVuY3Rpb24oKSB7XG4gIHJldHVybiB7XG4gICAgZXJyb3I6IGZ1bmN0aW9uKC4uLmFyZ3MpIHtcbiAgICAgIHJldHVybiBjb25zb2xlLmVycm9yKGFyZ3MpO1xuICAgIH0sXG4gICAgd2FybjogZnVuY3Rpb24oLi4uYXJncykge1xuICAgICAgcmV0dXJuIGNvbnNvbGUud2FybihhcmdzKTtcbiAgICB9LFxuICAgIGluZm86IGZ1bmN0aW9uKC4uLmFyZ3MpIHtcbiAgICAgIHJldHVybiBjb25zb2xlLmxvZyhhcmdzKTtcbiAgICB9LFxuICAgIGRlYnVnOiBmdW5jdGlvbiguLi5hcmdzKSB7XG4gICAgICBpZiAoIWNvbnNvbGUuZGVidWcpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICByZXR1cm4gY29uc29sZS5kZWJ1ZyhhcmdzKTtcbiAgICB9XG4gIH07XG59KCkpO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNyYy9Mb2dnZXIuanMiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQUFBO0FBQUE7QUFDQTtBQUdBO0FBQ0E7QUFmQTtBQWlCQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///0\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Logger = __webpack_require__(/*! ./../Logger */ 0);\n\nvar _Logger2 = _interopRequireDefault(_Logger);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nvar BaseEvent = function () {\n  function BaseEvent(context) {\n    _classCallCheck(this, BaseEvent);\n\n    this.context = context;\n  }\n\n  _createClass(BaseEvent, [{\n    key: \'handle\',\n    value: function handle(msg) {\n      _Logger2.default.error(\'BaseEvent::handle is not implemented\', msg);\n    }\n  }]);\n\n  return BaseEvent;\n}();\n\nexports.default = BaseEvent;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvZXZlbnRzL0Jhc2VFdmVudC5qcz8yZDU0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBMb2dnZXIgZnJvbSAnLi8uLi9Mb2dnZXInO1xuXG5jbGFzcyBCYXNlRXZlbnQge1xuICBjb25zdHJ1Y3Rvcihjb250ZXh0KSB7XG4gICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgfVxuXG4gIGhhbmRsZShtc2cpIHtcbiAgICBMb2dnZXIuZXJyb3IoJ0Jhc2VFdmVudDo6aGFuZGxlIGlzIG5vdCBpbXBsZW1lbnRlZCcsIG1zZyk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQmFzZUV2ZW50O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNyYy9ldmVudHMvQmFzZUV2ZW50LmpzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBO0FBQ0E7Ozs7Ozs7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUFHQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///1\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _BaseEvent2 = __webpack_require__(/*! ./BaseEvent */ 1);\n\nvar _BaseEvent3 = _interopRequireDefault(_BaseEvent2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar PublicEvent = function (_BaseEvent) {\n  _inherits(PublicEvent, _BaseEvent);\n\n  function PublicEvent() {\n    _classCallCheck(this, PublicEvent);\n\n    return _possibleConstructorReturn(this, (PublicEvent.__proto__ || Object.getPrototypeOf(PublicEvent)).apply(this, arguments));\n  }\n\n  _createClass(PublicEvent, [{\n    key: \'handle\',\n    value: function handle(msg) {\n      if (msg._src === \'client\') {\n        return;\n      }\n\n      Reflect.deleteProperty(msg, \'_src\');\n      this.context.listeners.forEach(function (callback) {\n        return callback(msg);\n      });\n    }\n  }]);\n\n  return PublicEvent;\n}(_BaseEvent3.default);\n\nexports.default = PublicEvent;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvZXZlbnRzL1B1YmxpY0V2ZW50LmpzPzBmODAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEJhc2VFdmVudCBmcm9tICcuL0Jhc2VFdmVudCc7XG5cbmNsYXNzIFB1YmxpY0V2ZW50IGV4dGVuZHMgQmFzZUV2ZW50IHtcbiAgaGFuZGxlKG1zZykge1xuICAgIGlmIChtc2cuX3NyYyA9PT0gJ2NsaWVudCcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBSZWZsZWN0LmRlbGV0ZVByb3BlcnR5KG1zZywgJ19zcmMnKTtcbiAgICB0aGlzLmNvbnRleHQubGlzdGVuZXJzLmZvckVhY2goY2FsbGJhY2sgPT4gY2FsbGJhY2sobXNnKSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUHVibGljRXZlbnQ7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc3JjL2V2ZW50cy9QdWJsaWNFdmVudC5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUNBOzs7Ozs7Ozs7OztBQUNBOzs7Ozs7Ozs7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBOzs7Ozs7QUFHQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///2\n')},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _DeviceManager = __webpack_require__(/*! ./DeviceManager */ 12);\n\nvar _DeviceManager2 = _interopRequireDefault(_DeviceManager);\n\nvar _Logger = __webpack_require__(/*! ./Logger */ 0);\n\nvar _Logger2 = _interopRequireDefault(_Logger);\n\nvar _FeatureDetector = __webpack_require__(/*! ./FeatureDetector */ 4);\n\nvar _FeatureDetector2 = _interopRequireDefault(_FeatureDetector);\n\nvar _NinjaStream = __webpack_require__(/*! ./NinjaStream */ 71);\n\nvar _NinjaStream2 = _interopRequireDefault(_NinjaStream);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * eyeson Media Stream Handler.\n **/\nvar MediaStreamHandler = function () {\n\n  /**\n   * Valid options are { audio: true/false, video: true/false }\n   **/\n  function MediaStreamHandler(options, existingStream) {\n    _classCallCheck(this, MediaStreamHandler);\n\n    this.options = options || { audio: true, video: true, eco: false };\n\n    this.existingStream = existingStream || null;\n\n    this.getUserMedia = this.getUserMedia.bind(this);\n    this.adjustAudioTrack = this.adjustAudioTrack.bind(this);\n    this.adjustVideoTrack = this.adjustVideoTrack.bind(this);\n  }\n\n  _createClass(MediaStreamHandler, [{\n    key: 'start',\n    value: function start(onSuccess, onError) {\n      _Logger2.default.debug('MediaStreamHandler::start', this.options);\n      return this.getUserMedia().then(onSuccess).catch(onError);\n    }\n\n    /**\n     * We always acquire a stream with at least audio enabled and adjust\n     * the desired mute behaviour via the track.\n     * Unless, we have no camera and microphones. In that case we use a\n     * NinjaStream.\n     * If the browser does not support updating the peerConnection\n     * we acquire a audio and video stream and adjust the tracks accordingly.\n     *\n     * In case of replaceTrack support we stop the tracks before\n     * acquiring a new stream. Since stopping a track also stops the source.\n     * So, at least in Safari we'd stop the camera if the old and new track\n     * use the same source.\n     * Furthermore Safari on iOS behaves differently again. Camera muting\n     * _sometimes_ freezes the remote stream video playback (audio fine).\n     **/\n\n  }, {\n    key: 'getUserMedia',\n    value: function getUserMedia() {\n      var _this = this;\n\n      _Logger2.default.debug('MediaStreamHandler::getUserMedia');\n\n      if (this.existingStream && _FeatureDetector2.default.isIOSDevice()) {\n        return new Promise(function (resolve, reject) {\n          try {\n            _this.existingStream.getVideoTracks()[0].enabled = _this.options.video;\n            resolve(_this.existingStream);\n          } catch (error) {\n            reject(error);\n          }\n        });\n      }\n\n      if (this.existingStream && _FeatureDetector2.default.hasReplaceTrack()) {\n        MediaStreamHandler.stop(this.existingStream);\n      }\n\n      var options = {\n        video: _FeatureDetector2.default.hasCaptureStream() || this.options.eco ? this.options.video : true,\n        audio: true\n      };\n\n      return _DeviceManager2.default.fetchInputDevices().then(function (devices) {\n        if (devices.length === 0) {\n          _this.options = { audio: false, video: false };\n          return new _NinjaStream2.default().stream;\n        }\n        return _DeviceManager2.default.getMediaConstraints(options).then(function (constraints) {\n          return navigator.mediaDevices.getUserMedia(constraints);\n        });\n      }).then(this.adjustVideoTrack).then(this.adjustAudioTrack).catch(function (error) {\n        _Logger2.default.error('MediaStreamHandler::getUserMedia ', error);\n        return Promise.reject(error);\n      });\n    }\n\n    /**\n     * Adjust audio and video tracks according to the supplied options.\n     * We stop the video track so the camera indicator isn't active.\n     **/\n\n  }, {\n    key: 'adjustVideoTrack',\n    value: function adjustVideoTrack(stream) {\n      // We add a filler video track, unless we're in eco mode, which would result\n      // in sdp with media section for video & recvonly. Meaning we'd still\n      // receive video.\n\n      if (_FeatureDetector2.default.hasReplaceTrack() && _FeatureDetector2.default.hasCaptureStream() && !this.options.eco) {\n        if (stream && stream.getVideoTracks().length === 0) {\n          var _stream$getVideoTrack = new _NinjaStream2.default().stream.getVideoTracks(),\n              _stream$getVideoTrack2 = _slicedToArray(_stream$getVideoTrack, 1),\n              fillerTrack = _stream$getVideoTrack2[0];\n\n          stream.addTrack(fillerTrack, stream);\n        }\n      }\n\n      if (stream && stream.getVideoTracks().length === 1) {\n        stream.getVideoTracks()[0].enabled = this.options.video;\n        if (this.options.video === false) {\n          stream.getVideoTracks()[0].stop();\n        }\n      }\n      return stream;\n    }\n  }, {\n    key: 'adjustAudioTrack',\n    value: function adjustAudioTrack(stream) {\n      if (stream && stream.getAudioTracks().length === 1) {\n        stream.getAudioTracks()[0].enabled = this.options.audio;\n      }\n      return stream;\n    }\n  }], [{\n    key: 'hasAudio',\n    value: function hasAudio(stream) {\n      return stream.getAudioTracks().length > 0 && stream.getAudioTracks()[0].enabled;\n    }\n  }, {\n    key: 'hasVideo',\n    value: function hasVideo(stream) {\n      return stream.getVideoTracks().length > 0 && stream.getVideoTracks()[0].enabled;\n    }\n  }, {\n    key: 'isScreenStream',\n    value: function isScreenStream(stream) {\n      return MediaStreamHandler.hasVideo(stream) && /screen|monitor|window|web-contents-media-stream/i.test(stream.getVideoTracks()[0].label);\n    }\n  }, {\n    key: 'isCameraStream',\n    value: function isCameraStream(stream) {\n      return MediaStreamHandler.hasVideo(stream) && !MediaStreamHandler.isScreenStream(stream);\n    }\n  }, {\n    key: 'mute',\n    value: function mute(stream) {\n      if (stream.getAudioTracks().length !== 1) {\n        return;\n      }\n      stream.getAudioTracks()[0].enabled = false;\n    }\n  }, {\n    key: 'unmute',\n    value: function unmute(stream) {\n      if (stream.getAudioTracks().length !== 1) {\n        return;\n      }\n      stream.getAudioTracks()[0].enabled = true;\n    }\n  }, {\n    key: 'stop',\n    value: function stop(stream) {\n      _Logger2.default.debug('MediaStreamHandler::stop: ', stream);\n      stream.getTracks().forEach(function (track) {\n        return track.stop();\n      });\n      if (stream.stop) {\n        stream.stop();\n      }\n    }\n  }]);\n\n  return MediaStreamHandler;\n}();\n\nexports.default = MediaStreamHandler;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvTWVkaWFTdHJlYW1IYW5kbGVyLmpzPzQyMGUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IERldmljZU1hbmFnZXIgZnJvbSAnLi9EZXZpY2VNYW5hZ2VyJztcbmltcG9ydCBMb2dnZXIgZnJvbSAnLi9Mb2dnZXInO1xuaW1wb3J0IEZlYXR1cmVEZXRlY3RvciBmcm9tICcuL0ZlYXR1cmVEZXRlY3Rvcic7XG5pbXBvcnQgTmluamFTdHJlYW0gZnJvbSAnLi9OaW5qYVN0cmVhbSc7XG5cbi8qKlxuICogZXllc29uIE1lZGlhIFN0cmVhbSBIYW5kbGVyLlxuICoqL1xuY2xhc3MgTWVkaWFTdHJlYW1IYW5kbGVyIHtcblxuICAvKipcbiAgICogVmFsaWQgb3B0aW9ucyBhcmUgeyBhdWRpbzogdHJ1ZS9mYWxzZSwgdmlkZW86IHRydWUvZmFsc2UgfVxuICAgKiovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMsIGV4aXN0aW5nU3RyZWFtKSB7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucyB8fCB7IGF1ZGlvOiB0cnVlLCB2aWRlbzogdHJ1ZSwgZWNvOiBmYWxzZSB9O1xuXG4gICAgdGhpcy5leGlzdGluZ1N0cmVhbSA9IGV4aXN0aW5nU3RyZWFtIHx8IG51bGw7XG5cbiAgICB0aGlzLmdldFVzZXJNZWRpYSA9IHRoaXMuZ2V0VXNlck1lZGlhLmJpbmQodGhpcyk7XG4gICAgdGhpcy5hZGp1c3RBdWRpb1RyYWNrID0gdGhpcy5hZGp1c3RBdWRpb1RyYWNrLmJpbmQodGhpcyk7XG4gICAgdGhpcy5hZGp1c3RWaWRlb1RyYWNrID0gdGhpcy5hZGp1c3RWaWRlb1RyYWNrLmJpbmQodGhpcyk7XG4gIH1cblxuICBzdGFydChvblN1Y2Nlc3MsIG9uRXJyb3IpIHtcbiAgICBMb2dnZXIuZGVidWcoJ01lZGlhU3RyZWFtSGFuZGxlcjo6c3RhcnQnLCB0aGlzLm9wdGlvbnMpO1xuICAgIHJldHVybiB0aGlzLmdldFVzZXJNZWRpYSgpXG4gICAgICAudGhlbihvblN1Y2Nlc3MpXG4gICAgICAuY2F0Y2gob25FcnJvcik7XG4gIH1cblxuICAvKipcbiAgICogV2UgYWx3YXlzIGFjcXVpcmUgYSBzdHJlYW0gd2l0aCBhdCBsZWFzdCBhdWRpbyBlbmFibGVkIGFuZCBhZGp1c3RcbiAgICogdGhlIGRlc2lyZWQgbXV0ZSBiZWhhdmlvdXIgdmlhIHRoZSB0cmFjay5cbiAgICogVW5sZXNzLCB3ZSBoYXZlIG5vIGNhbWVyYSBhbmQgbWljcm9waG9uZXMuIEluIHRoYXQgY2FzZSB3ZSB1c2UgYVxuICAgKiBOaW5qYVN0cmVhbS5cbiAgICogSWYgdGhlIGJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCB1cGRhdGluZyB0aGUgcGVlckNvbm5lY3Rpb25cbiAgICogd2UgYWNxdWlyZSBhIGF1ZGlvIGFuZCB2aWRlbyBzdHJlYW0gYW5kIGFkanVzdCB0aGUgdHJhY2tzIGFjY29yZGluZ2x5LlxuICAgKlxuICAgKiBJbiBjYXNlIG9mIHJlcGxhY2VUcmFjayBzdXBwb3J0IHdlIHN0b3AgdGhlIHRyYWNrcyBiZWZvcmVcbiAgICogYWNxdWlyaW5nIGEgbmV3IHN0cmVhbS4gU2luY2Ugc3RvcHBpbmcgYSB0cmFjayBhbHNvIHN0b3BzIHRoZSBzb3VyY2UuXG4gICAqIFNvLCBhdCBsZWFzdCBpbiBTYWZhcmkgd2UnZCBzdG9wIHRoZSBjYW1lcmEgaWYgdGhlIG9sZCBhbmQgbmV3IHRyYWNrXG4gICAqIHVzZSB0aGUgc2FtZSBzb3VyY2UuXG4gICAqIEZ1cnRoZXJtb3JlIFNhZmFyaSBvbiBpT1MgYmVoYXZlcyBkaWZmZXJlbnRseSBhZ2Fpbi4gQ2FtZXJhIG11dGluZ1xuICAgKiBfc29tZXRpbWVzXyBmcmVlemVzIHRoZSByZW1vdGUgc3RyZWFtIHZpZGVvIHBsYXliYWNrIChhdWRpbyBmaW5lKS5cbiAgICoqL1xuICBnZXRVc2VyTWVkaWEoKSB7XG4gICAgTG9nZ2VyLmRlYnVnKCdNZWRpYVN0cmVhbUhhbmRsZXI6OmdldFVzZXJNZWRpYScpO1xuXG4gICAgaWYgKHRoaXMuZXhpc3RpbmdTdHJlYW0gJiYgRmVhdHVyZURldGVjdG9yLmlzSU9TRGV2aWNlKCkpIHtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdGhpcy5leGlzdGluZ1N0cmVhbS5nZXRWaWRlb1RyYWNrcygpWzBdLmVuYWJsZWQgPSB0aGlzLm9wdGlvbnMudmlkZW87XG4gICAgICAgICAgcmVzb2x2ZSh0aGlzLmV4aXN0aW5nU3RyZWFtKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5leGlzdGluZ1N0cmVhbSAmJiBGZWF0dXJlRGV0ZWN0b3IuaGFzUmVwbGFjZVRyYWNrKCkpIHtcbiAgICAgIE1lZGlhU3RyZWFtSGFuZGxlci5zdG9wKHRoaXMuZXhpc3RpbmdTdHJlYW0pO1xuICAgIH1cblxuICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICB2aWRlbzpcbiAgICAgICAgRmVhdHVyZURldGVjdG9yLmhhc0NhcHR1cmVTdHJlYW0oKSB8fCB0aGlzLm9wdGlvbnMuZWNvXG4gICAgICAgICAgPyB0aGlzLm9wdGlvbnMudmlkZW9cbiAgICAgICAgICA6IHRydWUsXG4gICAgICBhdWRpbzogdHJ1ZVxuICAgIH07XG5cbiAgICByZXR1cm4gRGV2aWNlTWFuYWdlci5mZXRjaElucHV0RGV2aWNlcygpXG4gICAgICAudGhlbihkZXZpY2VzID0+IHtcbiAgICAgICAgaWYgKGRldmljZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgdGhpcy5vcHRpb25zID0geyBhdWRpbzogZmFsc2UsIHZpZGVvOiBmYWxzZSB9O1xuICAgICAgICAgIHJldHVybiBuZXcgTmluamFTdHJlYW0oKS5zdHJlYW07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIERldmljZU1hbmFnZXIuZ2V0TWVkaWFDb25zdHJhaW50cyhvcHRpb25zKS50aGVuKGNvbnN0cmFpbnRzID0+XG4gICAgICAgICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoY29uc3RyYWludHMpXG4gICAgICAgICk7XG4gICAgICB9KVxuICAgICAgLnRoZW4odGhpcy5hZGp1c3RWaWRlb1RyYWNrKVxuICAgICAgLnRoZW4odGhpcy5hZGp1c3RBdWRpb1RyYWNrKVxuICAgICAgLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgTG9nZ2VyLmVycm9yKCdNZWRpYVN0cmVhbUhhbmRsZXI6OmdldFVzZXJNZWRpYSAnLCBlcnJvcik7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7XG4gICAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGp1c3QgYXVkaW8gYW5kIHZpZGVvIHRyYWNrcyBhY2NvcmRpbmcgdG8gdGhlIHN1cHBsaWVkIG9wdGlvbnMuXG4gICAqIFdlIHN0b3AgdGhlIHZpZGVvIHRyYWNrIHNvIHRoZSBjYW1lcmEgaW5kaWNhdG9yIGlzbid0IGFjdGl2ZS5cbiAgICoqL1xuICBhZGp1c3RWaWRlb1RyYWNrKHN0cmVhbSkge1xuICAgIC8vIFdlIGFkZCBhIGZpbGxlciB2aWRlbyB0cmFjaywgdW5sZXNzIHdlJ3JlIGluIGVjbyBtb2RlLCB3aGljaCB3b3VsZCByZXN1bHRcbiAgICAvLyBpbiBzZHAgd2l0aCBtZWRpYSBzZWN0aW9uIGZvciB2aWRlbyAmIHJlY3Zvbmx5LiBNZWFuaW5nIHdlJ2Qgc3RpbGxcbiAgICAvLyByZWNlaXZlIHZpZGVvLlxuXG4gICAgaWYgKFxuICAgICAgRmVhdHVyZURldGVjdG9yLmhhc1JlcGxhY2VUcmFjaygpICYmXG4gICAgICBGZWF0dXJlRGV0ZWN0b3IuaGFzQ2FwdHVyZVN0cmVhbSgpICYmXG4gICAgICAhdGhpcy5vcHRpb25zLmVjb1xuICAgICkge1xuICAgICAgaWYgKHN0cmVhbSAmJiBzdHJlYW0uZ2V0VmlkZW9UcmFja3MoKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgY29uc3QgW2ZpbGxlclRyYWNrXSA9IG5ldyBOaW5qYVN0cmVhbSgpLnN0cmVhbS5nZXRWaWRlb1RyYWNrcygpO1xuICAgICAgICBzdHJlYW0uYWRkVHJhY2soZmlsbGVyVHJhY2ssIHN0cmVhbSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHN0cmVhbSAmJiBzdHJlYW0uZ2V0VmlkZW9UcmFja3MoKS5sZW5ndGggPT09IDEpIHtcbiAgICAgIHN0cmVhbS5nZXRWaWRlb1RyYWNrcygpWzBdLmVuYWJsZWQgPSB0aGlzLm9wdGlvbnMudmlkZW87XG4gICAgICBpZiAodGhpcy5vcHRpb25zLnZpZGVvID09PSBmYWxzZSkge1xuICAgICAgICBzdHJlYW0uZ2V0VmlkZW9UcmFja3MoKVswXS5zdG9wKCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzdHJlYW07XG4gIH1cblxuICBhZGp1c3RBdWRpb1RyYWNrKHN0cmVhbSkge1xuICAgIGlmIChzdHJlYW0gJiYgc3RyZWFtLmdldEF1ZGlvVHJhY2tzKCkubGVuZ3RoID09PSAxKSB7XG4gICAgICBzdHJlYW0uZ2V0QXVkaW9UcmFja3MoKVswXS5lbmFibGVkID0gdGhpcy5vcHRpb25zLmF1ZGlvO1xuICAgIH1cbiAgICByZXR1cm4gc3RyZWFtO1xuICB9XG5cbiAgc3RhdGljIGhhc0F1ZGlvKHN0cmVhbSkge1xuICAgIHJldHVybiAoXG4gICAgICBzdHJlYW0uZ2V0QXVkaW9UcmFja3MoKS5sZW5ndGggPiAwICYmIHN0cmVhbS5nZXRBdWRpb1RyYWNrcygpWzBdLmVuYWJsZWRcbiAgICApO1xuICB9XG5cbiAgc3RhdGljIGhhc1ZpZGVvKHN0cmVhbSkge1xuICAgIHJldHVybiAoXG4gICAgICBzdHJlYW0uZ2V0VmlkZW9UcmFja3MoKS5sZW5ndGggPiAwICYmIHN0cmVhbS5nZXRWaWRlb1RyYWNrcygpWzBdLmVuYWJsZWRcbiAgICApO1xuICB9XG5cbiAgc3RhdGljIGlzU2NyZWVuU3RyZWFtKHN0cmVhbSkge1xuICAgIHJldHVybiAoXG4gICAgICBNZWRpYVN0cmVhbUhhbmRsZXIuaGFzVmlkZW8oc3RyZWFtKSAmJlxuICAgICAgKC9zY3JlZW58bW9uaXRvcnx3aW5kb3d8d2ViLWNvbnRlbnRzLW1lZGlhLXN0cmVhbS9pKS50ZXN0KFxuICAgICAgICBzdHJlYW0uZ2V0VmlkZW9UcmFja3MoKVswXS5sYWJlbFxuICAgICAgKVxuICAgICk7XG4gIH1cblxuICBzdGF0aWMgaXNDYW1lcmFTdHJlYW0oc3RyZWFtKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIE1lZGlhU3RyZWFtSGFuZGxlci5oYXNWaWRlbyhzdHJlYW0pICYmXG4gICAgICAhTWVkaWFTdHJlYW1IYW5kbGVyLmlzU2NyZWVuU3RyZWFtKHN0cmVhbSlcbiAgICApO1xuICB9XG5cbiAgc3RhdGljIG11dGUoc3RyZWFtKSB7XG4gICAgaWYgKHN0cmVhbS5nZXRBdWRpb1RyYWNrcygpLmxlbmd0aCAhPT0gMSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzdHJlYW0uZ2V0QXVkaW9UcmFja3MoKVswXS5lbmFibGVkID0gZmFsc2U7XG4gIH1cblxuICBzdGF0aWMgdW5tdXRlKHN0cmVhbSkge1xuICAgIGlmIChzdHJlYW0uZ2V0QXVkaW9UcmFja3MoKS5sZW5ndGggIT09IDEpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc3RyZWFtLmdldEF1ZGlvVHJhY2tzKClbMF0uZW5hYmxlZCA9IHRydWU7XG4gIH1cblxuICBzdGF0aWMgc3RvcChzdHJlYW0pIHtcbiAgICBMb2dnZXIuZGVidWcoJ01lZGlhU3RyZWFtSGFuZGxlcjo6c3RvcDogJywgc3RyZWFtKTtcbiAgICBzdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaCh0cmFjayA9PiB0cmFjay5zdG9wKCkpO1xuICAgIGlmIChzdHJlYW0uc3RvcCkge1xuICAgICAgc3RyZWFtLnN0b3AoKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgTWVkaWFTdHJlYW1IYW5kbGVyO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNyYy9NZWRpYVN0cmVhbUhhbmRsZXIuanMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7Ozs7O0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTs7O0FBR0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQWVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFMQTtBQUNBO0FBT0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUdBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBR0E7OztBQUVBO0FBQ0E7QUFHQTs7O0FBRUE7QUFDQTtBQU1BOzs7QUFFQTtBQUNBO0FBSUE7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQUdBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///3\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; /* eslint-disable max-lines */\n\n\nvar _Logger = __webpack_require__(/*! ./Logger */ 0);\n\nvar _Logger2 = _interopRequireDefault(_Logger);\n\nvar _webrtcAdapter = __webpack_require__(/*! webrtc-adapter */ 22);\n\nvar _webrtcAdapter2 = _interopRequireDefault(_webrtcAdapter);\n\nvar _platform2 = __webpack_require__(/*! platform */ 66);\n\nvar _platform3 = _interopRequireDefault(_platform2);\n\nvar _FullscreenHelper = __webpack_require__(/*! ./FullscreenHelper */ 25);\n\nvar _FullscreenHelper2 = _interopRequireDefault(_FullscreenHelper);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Feature Detector.\n **/\nexports.default = function () {\n  return {\n    environment: function environment() {\n      return {\n        canPip: this.hasPipSupport(),\n        isPhone: this.isPhone(),\n        inIframe: this.inIframe(),\n        isIncognito: this.isIncognito(),\n        canUseEyeson: this.canUseEyeson(),\n        canFullscreen: this.canFullscreen(),\n        hasMobileDevice: this.hasMobileDevice(),\n        canToggleCamera: this.canToggleCamera(),\n        canScreenCapture: this.canScreenCapture(),\n        canAdjustSettings: this.canAdjustDeviceSettings(),\n        canHandlePresentation: this.canHandlePresentation(),\n        isExperimentalBrowser: this.isExperimentalBrowser(),\n        canHandlePreviewActions: this.canHandlePreviewActions()\n      };\n    },\n\n    platform: function platform() {\n      return _platform3.default;\n    },\n\n    /**\n     * Test if user can use eyeson service.\n     **/\n    canUseEyeson: function canUseEyeson() {\n      return this.canHandleMediaStreams() && this.canHandlePeerConnection() && (this.isEdge() ? this.isRecentEdge() : true) && !this.isWebView();\n    },\n\n    /**\n     * Test if user agent support get user media.\n     *\n     * TODO: Does not consider: webkitGetUserMedia, oGetUserMedia or\n     *   msGetUserMedia\n     **/\n    canHandleMediaStreams: function canHandleMediaStreams() {\n      return ['getUserMedia', 'mozGetUserMedia'].filter(function (method) {\n        return method in navigator;\n      }).length > 0;\n    },\n\n    /**\n     * Test if user agent supports peer connections.\n     **/\n    canHandlePeerConnection: function canHandlePeerConnection() {\n      return Boolean(['RTCPeerConnection', 'webkitRTCPeerConnection', 'mozRTCPeerConnection'].find(function (method) {\n        return method in window;\n      }));\n    },\n\n    /**\n     * Test if user agent has support for senders and receivers.\n     * http://w3c.github.io/webrtc-pc/#rtcpeerconnection-interface-extensions\n     **/\n    hasSenderReceiverSupport: function hasSenderReceiverSupport() {\n      return 'mozRTCPeerConnection' in window;\n    },\n\n    hasReplaceTrack: function hasReplaceTrack() {\n      return this.hasSenders() && 'replaceTrack' in window.RTCRtpSender.prototype;\n    },\n\n    hasCaptureStream: function hasCaptureStream() {\n      return 'captureStream' in window.HTMLMediaElement.prototype;\n    },\n\n    hasSenders: function hasSenders() {\n      return 'RTCRtpSender' in window;\n    },\n\n    /**\n     * Test if user agent supports changing of audio output.\n     **/\n    canChangeAudioOutput: function canChangeAudioOutput() {\n      return 'setSinkId' in document.createElement('video');\n    },\n\n    /**\n     * Test if user agent supports changing the microphone.\n     * For now, simply check if we're dealing with Safari, haven't found a\n     * better way to check this yet.\n     * https://bugs.webkit.org/show_bug.cgi?id=175975\n     **/\n    canChangeMicrophone: function canChangeMicrophone() {\n      return _webrtcAdapter2.default.browserDetails.browser !== 'safari' && !this.isTestSuite();\n    },\n\n    /**\n     * Test if user agent supports remembering devices.\n     * For now, simply check if we're dealing with Safari, haven't found a\n     * better way to check this yet.\n     * https://bugs.webkit.org/show_bug.cgi?id=175975\n     **/\n    canChangeCamera: function canChangeCamera() {\n      return !this.isIOSDevice() && !this.isTestSuite();\n    },\n\n    /**\n     * Test if user agent supports screen capture feature.\n     * Essentially, we're testing if the user is running Chrome or Firefox.\n     * Strictly speaking other browsers might support screen capture\n     * functionality but we don't support those yet.\n     *\n     * The DesktopCapture API is only available to secure domains.\n     *\n     **/\n    canScreenCapture: function canScreenCapture() {\n      var details = _webrtcAdapter2.default.browserDetails;\n      if (window.location.protocol === 'http:') {\n        return false;\n      }\n      if (details.browser === 'chrome' && details.version >= 50) {\n        return true;\n      }\n      if (details.browser === 'firefox' && details.version >= 52) {\n        return true;\n      }\n      return false;\n    },\n\n    requiresExtension: function requiresExtension() {\n      return _webrtcAdapter2.default.browserDetails.browser === 'chrome';\n    },\n\n    offersOwnDeviceSelection: function offersOwnDeviceSelection() {\n      return _webrtcAdapter2.default.browserDetails.browser === 'firefox';\n    },\n\n    /**\n     * Unfortunately we had issues with higher resolution constraints on\n     * Safari (iOS and Mac).\n     **/\n    requiresLowerConstraints: function requiresLowerConstraints() {\n      return _webrtcAdapter2.default.browserDetails.browser === 'safari';\n    },\n\n    browserName: function browserName() {\n      var name = _webrtcAdapter2.default.browserDetails.browser.replace(/\\w\\S*/g, function (txt) {\n        return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();\n      });\n      return name;\n    },\n\n    browserVersion: function browserVersion() {\n      return _webrtcAdapter2.default.browserDetails.version;\n    },\n\n    isEdge: function isEdge() {\n      return _webrtcAdapter2.default.browserDetails.browser === 'edge';\n    },\n\n    /**\n     * Older versions of Edge (20.10240) et al. pass through adapter until\n     * they hit RTCIceTransport and blow up.\n     **/\n    isRecentEdge: function isRecentEdge() {\n      if (!this.isEdge()) {\n        return false;\n      }\n      return _webrtcAdapter2.default.browserDetails.version > 15000;\n    },\n\n    isExperimentalBrowser: function isExperimentalBrowser() {\n      return ['safari', 'edge'].includes(_webrtcAdapter2.default.browserDetails.browser);\n    },\n\n    /**\n     * Unfortunately Safari on iOS pauses the local camera during PIP,\n     * and afterwards the remote video is frozen.\n     **/\n    hasPipSupport: function hasPipSupport() {\n      var video = document.createElement('video');\n      var hasSupport = Boolean(video.webkitSupportsPresentationMode);\n      if (video.remove) {\n        video.remove();\n      }\n      return hasSupport && !this.isIOSDevice();\n    },\n\n    /**\n     * Check user agent if it is an Android device.\n     **/\n    isAndroidDevice: function isAndroidDevice() {\n      return Boolean(navigator.userAgent.match(/Android/i));\n    },\n\n    /**\n     * Check user agent if it is an iOS device.\n     **/\n    isIOSDevice: function isIOSDevice() {\n      return Boolean(navigator.userAgent.match(/iPhone|iPad|iPod/i));\n    },\n\n    /**\n     * Check user agent if it is an iPhone.\n     **/\n    isIPhone: function isIPhone() {\n      return Boolean(navigator.userAgent.match(/iPhone/i));\n    },\n\n    /**\n     * As a solution for mobile sites, our Android engineers recommend to\n     * specifically detect \u201cmobile\u201d in the User-Agent string as well as\n     * \u201candroid.\u201d\n     *\n     * https://webmasters.googleblog.com/2011/03/mo-better-to-also-detect-mobile-user.html\n     **/\n    isAndroidPhone: function isAndroidPhone() {\n      var isAndroid = /(android)/i.test(navigator.userAgent);\n      var isMobile = /(mobile)/i.test(navigator.userAgent);\n      return isAndroid && isMobile;\n    },\n\n    /**\n     * Is the app running inside an iFrame.\n     * https://stackoverflow.com/a/326076/980524\n     **/\n    inIframe: function inIframe() {\n      try {\n        return window.self !== window.top;\n      } catch (error) {\n        return true;\n      }\n    },\n\n    /**\n     * Phone vs. tablet\n     **/\n    isPhone: function isPhone() {\n      return this.isIPhone() || this.isAndroidPhone();\n    },\n\n    /**\n     * ...\n     **/\n    hasMobileDevice: function hasMobileDevice() {\n      return this.isIOSDevice() || this.isAndroidDevice();\n    },\n\n    /**\n     * Is the app running on a touch device.\n     * https://stackoverflow.com/a/4819886/980524\n     **/\n    isTouchDevice: function isTouchDevice() {\n      return Boolean('ontouchstart' in window || navigator.maxTouchPoints);\n    },\n\n    /**\n     * https://stackoverflow.com/a/27805491/980524\n     **/\n    isIncognito: function isIncognito() {\n      var _this = this;\n\n      if (this._isIncognito) {\n        return this._isIncognito;\n      }\n\n      var fs = window.RequestFileSystem || window.webkitRequestFileSystem;\n      if (!fs) {\n        _Logger2.default.warn('FeatureDetector::isIncognito check failed');\n        this._isIncognito = false;\n        return false;\n      }\n\n      fs(window.TEMPORARY, 100, function () {\n        _this._isIncognito = false;\n      }, function () {\n        _this._isIncognito = true && _webrtcAdapter2.default.browserDetails.browser === 'chrome';\n      });\n      return false;\n    },\n\n    /**\n     * Unfortunately the facebook streaming procedure doesn't work on Safari\n     * on iOS. Facebook's popup hints that it is not compatible with EDGE.\n     **/\n    canLiveStreamToFacebook: function canLiveStreamToFacebook() {\n      return !this.isIOSDevice() && !this.isEdge() && !this.isTestSuite();\n    },\n\n    /**\n     * iOS doesn't propagate tap events to react when we have display tooltips.\n     * This results in annoying \"double taps\" from the user.\n     * But the tooltips aren't designed for touch devices anyway.\n     **/\n    canDisplayTooltips: function canDisplayTooltips() {\n      return !this.isIOSDevice() && !this.isTestSuite();\n    },\n\n    /**\n     * iOS doesn't handle stream switching properly, the remote stream freezes\n     * sometimes when making changes.\n     **/\n    canAdjustDeviceSettings: function canAdjustDeviceSettings() {\n      return !this.isIOSDevice();\n    },\n\n    /**\n     * iOS doesn't handle stream switching properly, the remote stream freezes\n     * sometimes when making changes.\n     **/\n    canToggleCamera: function canToggleCamera() {\n      return !this.isIOSDevice();\n    },\n\n    /**\n     * We've decided that the preview actions should not be accessible on the\n     * iPhone.\n     **/\n    canHandlePreviewActions: function canHandlePreviewActions() {\n      return !this.isIPhone();\n    },\n\n    /**\n     * We've decided that the presentation should not be accessible on the\n     * iPhone.\n     **/\n    canHandlePresentation: function canHandlePresentation() {\n      return !this.isIPhone();\n    },\n\n    /**\n     * Edge doesn't have this property and raises an error when trying to\n     * access it.\n     **/\n    supportsBlurOnSVG: function supportsBlurOnSVG() {\n      return typeof SVGElement !== 'undefined' && typeof SVGElement.prototype.blur !== 'undefined';\n    },\n\n    /**\n     * Chrome will throw a SecurityException when trying to read the\n     * `localStorage` property.\n     **/\n    hasLocalStorage: function hasLocalStorage() {\n      try {\n        var hasLocalStorage = _typeof(window.localStorage) === 'object' && window.localStorage !== null;\n        window.localStorage.setItem('eyeson.test', 'test');\n        var canGet = window.localStorage.getItem('eyeson.test') === 'test';\n        return hasLocalStorage && canGet;\n      } catch (error) {\n        _Logger2.default.warn('FeatureDetector::hasLocalStorage:', error.message);\n        return false;\n      }\n    },\n\n    canFullscreen: function canFullscreen() {\n      return new _FullscreenHelper2.default().canFullscreen();\n    },\n\n    isFullscreen: function isFullscreen() {\n      return new _FullscreenHelper2.default().isFullscreen();\n    },\n\n    canShare: function canShare() {\n      return Boolean(navigator.share);\n    },\n\n    /**\n     * https://developer.chrome.com/multidevice/user-agent#webview_user_agent\n     *\n     * If you\u2019re attempting to differentiate between the WebView and Chrome for\n     * Android, you should look for the presence of the Version/_X.X_ string in\n     * the WebView user-agent string.\n     *\n     * In the newer versions of WebView, you can differentiate the WebView by\n     * looking for the wv field as highlighted below\n     **/\n    isWebView: function isWebView() {\n      return (/Version\\/|wv/i.test(navigator.userAgent) && this.isAndroidDevice()\n      );\n    },\n\n    isTestSuite: function isTestSuite() {\n      return _webrtcAdapter2.default.browserDetails.browser === 'test-suite';\n    }\n  };\n}();\n/* eslint-enable max-lines *///# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvRmVhdHVyZURldGVjdG9yLmpzPzRhMjYiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgbWF4LWxpbmVzICovXG5pbXBvcnQgTG9nZ2VyIGZyb20gJy4vTG9nZ2VyJztcbmltcG9ydCBhZGFwdGVyIGZyb20gJ3dlYnJ0Yy1hZGFwdGVyJztcbmltcG9ydCBwbGF0Zm9ybSBmcm9tICdwbGF0Zm9ybSc7XG5pbXBvcnQgRnVsbHNjcmVlbkhlbHBlciBmcm9tICcuL0Z1bGxzY3JlZW5IZWxwZXInO1xuXG4vKipcbiAqIEZlYXR1cmUgRGV0ZWN0b3IuXG4gKiovXG5leHBvcnQgZGVmYXVsdCAoZnVuY3Rpb24oKSB7XG4gIHJldHVybiB7XG4gICAgZW52aXJvbm1lbnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgY2FuUGlwOiB0aGlzLmhhc1BpcFN1cHBvcnQoKSxcbiAgICAgICAgaXNQaG9uZTogdGhpcy5pc1Bob25lKCksXG4gICAgICAgIGluSWZyYW1lOiB0aGlzLmluSWZyYW1lKCksXG4gICAgICAgIGlzSW5jb2duaXRvOiB0aGlzLmlzSW5jb2duaXRvKCksXG4gICAgICAgIGNhblVzZUV5ZXNvbjogdGhpcy5jYW5Vc2VFeWVzb24oKSxcbiAgICAgICAgY2FuRnVsbHNjcmVlbjogdGhpcy5jYW5GdWxsc2NyZWVuKCksXG4gICAgICAgIGhhc01vYmlsZURldmljZTogdGhpcy5oYXNNb2JpbGVEZXZpY2UoKSxcbiAgICAgICAgY2FuVG9nZ2xlQ2FtZXJhOiB0aGlzLmNhblRvZ2dsZUNhbWVyYSgpLFxuICAgICAgICBjYW5TY3JlZW5DYXB0dXJlOiB0aGlzLmNhblNjcmVlbkNhcHR1cmUoKSxcbiAgICAgICAgY2FuQWRqdXN0U2V0dGluZ3M6IHRoaXMuY2FuQWRqdXN0RGV2aWNlU2V0dGluZ3MoKSxcbiAgICAgICAgY2FuSGFuZGxlUHJlc2VudGF0aW9uOiB0aGlzLmNhbkhhbmRsZVByZXNlbnRhdGlvbigpLFxuICAgICAgICBpc0V4cGVyaW1lbnRhbEJyb3dzZXI6IHRoaXMuaXNFeHBlcmltZW50YWxCcm93c2VyKCksXG4gICAgICAgIGNhbkhhbmRsZVByZXZpZXdBY3Rpb25zOiB0aGlzLmNhbkhhbmRsZVByZXZpZXdBY3Rpb25zKClcbiAgICAgIH07XG4gICAgfSxcblxuICAgIHBsYXRmb3JtOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBwbGF0Zm9ybTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogVGVzdCBpZiB1c2VyIGNhbiB1c2UgZXllc29uIHNlcnZpY2UuXG4gICAgICoqL1xuICAgIGNhblVzZUV5ZXNvbjogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICB0aGlzLmNhbkhhbmRsZU1lZGlhU3RyZWFtcygpICYmXG4gICAgICAgIHRoaXMuY2FuSGFuZGxlUGVlckNvbm5lY3Rpb24oKSAmJlxuICAgICAgICAodGhpcy5pc0VkZ2UoKSA/IHRoaXMuaXNSZWNlbnRFZGdlKCkgOiB0cnVlKSAmJlxuICAgICAgICAhdGhpcy5pc1dlYlZpZXcoKVxuICAgICAgKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogVGVzdCBpZiB1c2VyIGFnZW50IHN1cHBvcnQgZ2V0IHVzZXIgbWVkaWEuXG4gICAgICpcbiAgICAgKiBUT0RPOiBEb2VzIG5vdCBjb25zaWRlcjogd2Via2l0R2V0VXNlck1lZGlhLCBvR2V0VXNlck1lZGlhIG9yXG4gICAgICogICBtc0dldFVzZXJNZWRpYVxuICAgICAqKi9cbiAgICBjYW5IYW5kbGVNZWRpYVN0cmVhbXM6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgWydnZXRVc2VyTWVkaWEnLCAnbW96R2V0VXNlck1lZGlhJ10uZmlsdGVyKFxuICAgICAgICAgIG1ldGhvZCA9PiBtZXRob2QgaW4gbmF2aWdhdG9yXG4gICAgICAgICkubGVuZ3RoID4gMFxuICAgICAgKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogVGVzdCBpZiB1c2VyIGFnZW50IHN1cHBvcnRzIHBlZXIgY29ubmVjdGlvbnMuXG4gICAgICoqL1xuICAgIGNhbkhhbmRsZVBlZXJDb25uZWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBCb29sZWFuKFxuICAgICAgICBbXG4gICAgICAgICAgJ1JUQ1BlZXJDb25uZWN0aW9uJyxcbiAgICAgICAgICAnd2Via2l0UlRDUGVlckNvbm5lY3Rpb24nLFxuICAgICAgICAgICdtb3pSVENQZWVyQ29ubmVjdGlvbidcbiAgICAgICAgXS5maW5kKG1ldGhvZCA9PiBtZXRob2QgaW4gd2luZG93KVxuICAgICAgKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogVGVzdCBpZiB1c2VyIGFnZW50IGhhcyBzdXBwb3J0IGZvciBzZW5kZXJzIGFuZCByZWNlaXZlcnMuXG4gICAgICogaHR0cDovL3czYy5naXRodWIuaW8vd2VicnRjLXBjLyNydGNwZWVyY29ubmVjdGlvbi1pbnRlcmZhY2UtZXh0ZW5zaW9uc1xuICAgICAqKi9cbiAgICBoYXNTZW5kZXJSZWNlaXZlclN1cHBvcnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuICdtb3pSVENQZWVyQ29ubmVjdGlvbicgaW4gd2luZG93O1xuICAgIH0sXG5cbiAgICBoYXNSZXBsYWNlVHJhY2s6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgdGhpcy5oYXNTZW5kZXJzKCkgJiYgJ3JlcGxhY2VUcmFjaycgaW4gd2luZG93LlJUQ1J0cFNlbmRlci5wcm90b3R5cGVcbiAgICAgICk7XG4gICAgfSxcblxuICAgIGhhc0NhcHR1cmVTdHJlYW06IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuICdjYXB0dXJlU3RyZWFtJyBpbiB3aW5kb3cuSFRNTE1lZGlhRWxlbWVudC5wcm90b3R5cGU7XG4gICAgfSxcblxuICAgIGhhc1NlbmRlcnM6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuICdSVENSdHBTZW5kZXInIGluIHdpbmRvdztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogVGVzdCBpZiB1c2VyIGFnZW50IHN1cHBvcnRzIGNoYW5naW5nIG9mIGF1ZGlvIG91dHB1dC5cbiAgICAgKiovXG4gICAgY2FuQ2hhbmdlQXVkaW9PdXRwdXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuICdzZXRTaW5rSWQnIGluIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFRlc3QgaWYgdXNlciBhZ2VudCBzdXBwb3J0cyBjaGFuZ2luZyB0aGUgbWljcm9waG9uZS5cbiAgICAgKiBGb3Igbm93LCBzaW1wbHkgY2hlY2sgaWYgd2UncmUgZGVhbGluZyB3aXRoIFNhZmFyaSwgaGF2ZW4ndCBmb3VuZCBhXG4gICAgICogYmV0dGVyIHdheSB0byBjaGVjayB0aGlzIHlldC5cbiAgICAgKiBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTc1OTc1XG4gICAgICoqL1xuICAgIGNhbkNoYW5nZU1pY3JvcGhvbmU6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGFkYXB0ZXIuYnJvd3NlckRldGFpbHMuYnJvd3NlciAhPT0gJ3NhZmFyaScgJiYgIXRoaXMuaXNUZXN0U3VpdGUoKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogVGVzdCBpZiB1c2VyIGFnZW50IHN1cHBvcnRzIHJlbWVtYmVyaW5nIGRldmljZXMuXG4gICAgICogRm9yIG5vdywgc2ltcGx5IGNoZWNrIGlmIHdlJ3JlIGRlYWxpbmcgd2l0aCBTYWZhcmksIGhhdmVuJ3QgZm91bmQgYVxuICAgICAqIGJldHRlciB3YXkgdG8gY2hlY2sgdGhpcyB5ZXQuXG4gICAgICogaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTE3NTk3NVxuICAgICAqKi9cbiAgICBjYW5DaGFuZ2VDYW1lcmE6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuICF0aGlzLmlzSU9TRGV2aWNlKCkgJiYgIXRoaXMuaXNUZXN0U3VpdGUoKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogVGVzdCBpZiB1c2VyIGFnZW50IHN1cHBvcnRzIHNjcmVlbiBjYXB0dXJlIGZlYXR1cmUuXG4gICAgICogRXNzZW50aWFsbHksIHdlJ3JlIHRlc3RpbmcgaWYgdGhlIHVzZXIgaXMgcnVubmluZyBDaHJvbWUgb3IgRmlyZWZveC5cbiAgICAgKiBTdHJpY3RseSBzcGVha2luZyBvdGhlciBicm93c2VycyBtaWdodCBzdXBwb3J0IHNjcmVlbiBjYXB0dXJlXG4gICAgICogZnVuY3Rpb25hbGl0eSBidXQgd2UgZG9uJ3Qgc3VwcG9ydCB0aG9zZSB5ZXQuXG4gICAgICpcbiAgICAgKiBUaGUgRGVza3RvcENhcHR1cmUgQVBJIGlzIG9ubHkgYXZhaWxhYmxlIHRvIHNlY3VyZSBkb21haW5zLlxuICAgICAqXG4gICAgICoqL1xuICAgIGNhblNjcmVlbkNhcHR1cmU6IGZ1bmN0aW9uKCkge1xuICAgICAgY29uc3QgZGV0YWlscyA9IGFkYXB0ZXIuYnJvd3NlckRldGFpbHM7XG4gICAgICBpZiAod2luZG93LmxvY2F0aW9uLnByb3RvY29sID09PSAnaHR0cDonKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGlmIChkZXRhaWxzLmJyb3dzZXIgPT09ICdjaHJvbWUnICYmIGRldGFpbHMudmVyc2lvbiA+PSA1MCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGlmIChkZXRhaWxzLmJyb3dzZXIgPT09ICdmaXJlZm94JyAmJiBkZXRhaWxzLnZlcnNpb24gPj0gNTIpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSxcblxuICAgIHJlcXVpcmVzRXh0ZW5zaW9uOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBhZGFwdGVyLmJyb3dzZXJEZXRhaWxzLmJyb3dzZXIgPT09ICdjaHJvbWUnO1xuICAgIH0sXG5cbiAgICBvZmZlcnNPd25EZXZpY2VTZWxlY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGFkYXB0ZXIuYnJvd3NlckRldGFpbHMuYnJvd3NlciA9PT0gJ2ZpcmVmb3gnO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBVbmZvcnR1bmF0ZWx5IHdlIGhhZCBpc3N1ZXMgd2l0aCBoaWdoZXIgcmVzb2x1dGlvbiBjb25zdHJhaW50cyBvblxuICAgICAqIFNhZmFyaSAoaU9TIGFuZCBNYWMpLlxuICAgICAqKi9cbiAgICByZXF1aXJlc0xvd2VyQ29uc3RyYWludHM6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGFkYXB0ZXIuYnJvd3NlckRldGFpbHMuYnJvd3NlciA9PT0gJ3NhZmFyaSc7XG4gICAgfSxcblxuICAgIGJyb3dzZXJOYW1lOiBmdW5jdGlvbigpIHtcbiAgICAgIGxldCBuYW1lID0gYWRhcHRlci5icm93c2VyRGV0YWlscy5icm93c2VyLnJlcGxhY2UoL1xcd1xcUyovZywgdHh0ID0+IHtcbiAgICAgICAgcmV0dXJuIHR4dC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHR4dC5zdWJzdHIoMSkudG9Mb3dlckNhc2UoKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIG5hbWU7XG4gICAgfSxcblxuICAgIGJyb3dzZXJWZXJzaW9uOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBhZGFwdGVyLmJyb3dzZXJEZXRhaWxzLnZlcnNpb247XG4gICAgfSxcblxuICAgIGlzRWRnZTogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gYWRhcHRlci5icm93c2VyRGV0YWlscy5icm93c2VyID09PSAnZWRnZSc7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIE9sZGVyIHZlcnNpb25zIG9mIEVkZ2UgKDIwLjEwMjQwKSBldCBhbC4gcGFzcyB0aHJvdWdoIGFkYXB0ZXIgdW50aWxcbiAgICAgKiB0aGV5IGhpdCBSVENJY2VUcmFuc3BvcnQgYW5kIGJsb3cgdXAuXG4gICAgICoqL1xuICAgIGlzUmVjZW50RWRnZTogZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoIXRoaXMuaXNFZGdlKCkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGFkYXB0ZXIuYnJvd3NlckRldGFpbHMudmVyc2lvbiA+IDE1MDAwO1xuICAgIH0sXG5cbiAgICBpc0V4cGVyaW1lbnRhbEJyb3dzZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIFsnc2FmYXJpJywgJ2VkZ2UnXS5pbmNsdWRlcyhhZGFwdGVyLmJyb3dzZXJEZXRhaWxzLmJyb3dzZXIpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBVbmZvcnR1bmF0ZWx5IFNhZmFyaSBvbiBpT1MgcGF1c2VzIHRoZSBsb2NhbCBjYW1lcmEgZHVyaW5nIFBJUCxcbiAgICAgKiBhbmQgYWZ0ZXJ3YXJkcyB0aGUgcmVtb3RlIHZpZGVvIGlzIGZyb3plbi5cbiAgICAgKiovXG4gICAgaGFzUGlwU3VwcG9ydDogZnVuY3Rpb24oKSB7XG4gICAgICBjb25zdCB2aWRlbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyk7XG4gICAgICBjb25zdCBoYXNTdXBwb3J0ID0gQm9vbGVhbih2aWRlby53ZWJraXRTdXBwb3J0c1ByZXNlbnRhdGlvbk1vZGUpO1xuICAgICAgaWYgKHZpZGVvLnJlbW92ZSkge1xuICAgICAgICB2aWRlby5yZW1vdmUoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBoYXNTdXBwb3J0ICYmICF0aGlzLmlzSU9TRGV2aWNlKCk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENoZWNrIHVzZXIgYWdlbnQgaWYgaXQgaXMgYW4gQW5kcm9pZCBkZXZpY2UuXG4gICAgICoqL1xuICAgIGlzQW5kcm9pZERldmljZTogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gQm9vbGVhbihuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9BbmRyb2lkL2kpKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgdXNlciBhZ2VudCBpZiBpdCBpcyBhbiBpT1MgZGV2aWNlLlxuICAgICAqKi9cbiAgICBpc0lPU0RldmljZTogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gQm9vbGVhbihuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9pUGhvbmV8aVBhZHxpUG9kL2kpKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgdXNlciBhZ2VudCBpZiBpdCBpcyBhbiBpUGhvbmUuXG4gICAgICoqL1xuICAgIGlzSVBob25lOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBCb29sZWFuKG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL2lQaG9uZS9pKSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEFzIGEgc29sdXRpb24gZm9yIG1vYmlsZSBzaXRlcywgb3VyIEFuZHJvaWQgZW5naW5lZXJzIHJlY29tbWVuZCB0b1xuICAgICAqIHNwZWNpZmljYWxseSBkZXRlY3Qg4oCcbW9iaWxl4oCdIGluIHRoZSBVc2VyLUFnZW50IHN0cmluZyBhcyB3ZWxsIGFzXG4gICAgICog4oCcYW5kcm9pZC7igJ1cbiAgICAgKlxuICAgICAqIGh0dHBzOi8vd2VibWFzdGVycy5nb29nbGVibG9nLmNvbS8yMDExLzAzL21vLWJldHRlci10by1hbHNvLWRldGVjdC1tb2JpbGUtdXNlci5odG1sXG4gICAgICoqL1xuICAgIGlzQW5kcm9pZFBob25lOiBmdW5jdGlvbigpIHtcbiAgICAgIGNvbnN0IGlzQW5kcm9pZCA9ICgvKGFuZHJvaWQpL2kpLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG4gICAgICBjb25zdCBpc01vYmlsZSA9ICgvKG1vYmlsZSkvaSkudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcbiAgICAgIHJldHVybiBpc0FuZHJvaWQgJiYgaXNNb2JpbGU7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIElzIHRoZSBhcHAgcnVubmluZyBpbnNpZGUgYW4gaUZyYW1lLlxuICAgICAqIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8zMjYwNzYvOTgwNTI0XG4gICAgICoqL1xuICAgIGluSWZyYW1lOiBmdW5jdGlvbigpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiB3aW5kb3cuc2VsZiAhPT0gd2luZG93LnRvcDtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBQaG9uZSB2cy4gdGFibGV0XG4gICAgICoqL1xuICAgIGlzUGhvbmU6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuaXNJUGhvbmUoKSB8fCB0aGlzLmlzQW5kcm9pZFBob25lKCk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIC4uLlxuICAgICAqKi9cbiAgICBoYXNNb2JpbGVEZXZpY2U6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuaXNJT1NEZXZpY2UoKSB8fCB0aGlzLmlzQW5kcm9pZERldmljZSgpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBJcyB0aGUgYXBwIHJ1bm5pbmcgb24gYSB0b3VjaCBkZXZpY2UuXG4gICAgICogaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzQ4MTk4ODYvOTgwNTI0XG4gICAgICoqL1xuICAgIGlzVG91Y2hEZXZpY2U6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIEJvb2xlYW4oJ29udG91Y2hzdGFydCcgaW4gd2luZG93IHx8IG5hdmlnYXRvci5tYXhUb3VjaFBvaW50cyk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yNzgwNTQ5MS85ODA1MjRcbiAgICAgKiovXG4gICAgaXNJbmNvZ25pdG86IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKHRoaXMuX2lzSW5jb2duaXRvKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pc0luY29nbml0bztcbiAgICAgIH1cblxuICAgICAgY29uc3QgZnMgPSB3aW5kb3cuUmVxdWVzdEZpbGVTeXN0ZW0gfHwgd2luZG93LndlYmtpdFJlcXVlc3RGaWxlU3lzdGVtO1xuICAgICAgaWYgKCFmcykge1xuICAgICAgICBMb2dnZXIud2FybignRmVhdHVyZURldGVjdG9yOjppc0luY29nbml0byBjaGVjayBmYWlsZWQnKTtcbiAgICAgICAgdGhpcy5faXNJbmNvZ25pdG8gPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBmcyhcbiAgICAgICAgd2luZG93LlRFTVBPUkFSWSxcbiAgICAgICAgMTAwLFxuICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgdGhpcy5faXNJbmNvZ25pdG8gPSBmYWxzZTtcbiAgICAgICAgfSxcbiAgICAgICAgKCkgPT4ge1xuICAgICAgICAgIHRoaXMuX2lzSW5jb2duaXRvID1cbiAgICAgICAgICAgIHRydWUgJiYgYWRhcHRlci5icm93c2VyRGV0YWlscy5icm93c2VyID09PSAnY2hyb21lJztcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogVW5mb3J0dW5hdGVseSB0aGUgZmFjZWJvb2sgc3RyZWFtaW5nIHByb2NlZHVyZSBkb2Vzbid0IHdvcmsgb24gU2FmYXJpXG4gICAgICogb24gaU9TLiBGYWNlYm9vaydzIHBvcHVwIGhpbnRzIHRoYXQgaXQgaXMgbm90IGNvbXBhdGlibGUgd2l0aCBFREdFLlxuICAgICAqKi9cbiAgICBjYW5MaXZlU3RyZWFtVG9GYWNlYm9vazogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gIXRoaXMuaXNJT1NEZXZpY2UoKSAmJiAhdGhpcy5pc0VkZ2UoKSAmJiAhdGhpcy5pc1Rlc3RTdWl0ZSgpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBpT1MgZG9lc24ndCBwcm9wYWdhdGUgdGFwIGV2ZW50cyB0byByZWFjdCB3aGVuIHdlIGhhdmUgZGlzcGxheSB0b29sdGlwcy5cbiAgICAgKiBUaGlzIHJlc3VsdHMgaW4gYW5ub3lpbmcgXCJkb3VibGUgdGFwc1wiIGZyb20gdGhlIHVzZXIuXG4gICAgICogQnV0IHRoZSB0b29sdGlwcyBhcmVuJ3QgZGVzaWduZWQgZm9yIHRvdWNoIGRldmljZXMgYW55d2F5LlxuICAgICAqKi9cbiAgICBjYW5EaXNwbGF5VG9vbHRpcHM6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuICF0aGlzLmlzSU9TRGV2aWNlKCkgJiYgIXRoaXMuaXNUZXN0U3VpdGUoKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogaU9TIGRvZXNuJ3QgaGFuZGxlIHN0cmVhbSBzd2l0Y2hpbmcgcHJvcGVybHksIHRoZSByZW1vdGUgc3RyZWFtIGZyZWV6ZXNcbiAgICAgKiBzb21ldGltZXMgd2hlbiBtYWtpbmcgY2hhbmdlcy5cbiAgICAgKiovXG4gICAgY2FuQWRqdXN0RGV2aWNlU2V0dGluZ3M6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuICF0aGlzLmlzSU9TRGV2aWNlKCk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIGlPUyBkb2Vzbid0IGhhbmRsZSBzdHJlYW0gc3dpdGNoaW5nIHByb3Blcmx5LCB0aGUgcmVtb3RlIHN0cmVhbSBmcmVlemVzXG4gICAgICogc29tZXRpbWVzIHdoZW4gbWFraW5nIGNoYW5nZXMuXG4gICAgICoqL1xuICAgIGNhblRvZ2dsZUNhbWVyYTogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gIXRoaXMuaXNJT1NEZXZpY2UoKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogV2UndmUgZGVjaWRlZCB0aGF0IHRoZSBwcmV2aWV3IGFjdGlvbnMgc2hvdWxkIG5vdCBiZSBhY2Nlc3NpYmxlIG9uIHRoZVxuICAgICAqIGlQaG9uZS5cbiAgICAgKiovXG4gICAgY2FuSGFuZGxlUHJldmlld0FjdGlvbnM6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuICF0aGlzLmlzSVBob25lKCk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFdlJ3ZlIGRlY2lkZWQgdGhhdCB0aGUgcHJlc2VudGF0aW9uIHNob3VsZCBub3QgYmUgYWNjZXNzaWJsZSBvbiB0aGVcbiAgICAgKiBpUGhvbmUuXG4gICAgICoqL1xuICAgIGNhbkhhbmRsZVByZXNlbnRhdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gIXRoaXMuaXNJUGhvbmUoKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogRWRnZSBkb2Vzbid0IGhhdmUgdGhpcyBwcm9wZXJ0eSBhbmQgcmFpc2VzIGFuIGVycm9yIHdoZW4gdHJ5aW5nIHRvXG4gICAgICogYWNjZXNzIGl0LlxuICAgICAqKi9cbiAgICBzdXBwb3J0c0JsdXJPblNWRzogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICB0eXBlb2YgU1ZHRWxlbWVudCAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgdHlwZW9mIFNWR0VsZW1lbnQucHJvdG90eXBlLmJsdXIgIT09ICd1bmRlZmluZWQnXG4gICAgICApO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDaHJvbWUgd2lsbCB0aHJvdyBhIFNlY3VyaXR5RXhjZXB0aW9uIHdoZW4gdHJ5aW5nIHRvIHJlYWQgdGhlXG4gICAgICogYGxvY2FsU3RvcmFnZWAgcHJvcGVydHkuXG4gICAgICoqL1xuICAgIGhhc0xvY2FsU3RvcmFnZTogZnVuY3Rpb24oKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBoYXNMb2NhbFN0b3JhZ2UgPVxuICAgICAgICAgIHR5cGVvZiB3aW5kb3cubG9jYWxTdG9yYWdlID09PSAnb2JqZWN0JyAmJlxuICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2UgIT09IG51bGw7XG4gICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZXllc29uLnRlc3QnLCAndGVzdCcpO1xuICAgICAgICBjb25zdCBjYW5HZXQgPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2V5ZXNvbi50ZXN0JykgPT09ICd0ZXN0JztcbiAgICAgICAgcmV0dXJuIGhhc0xvY2FsU3RvcmFnZSAmJiBjYW5HZXQ7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBMb2dnZXIud2FybignRmVhdHVyZURldGVjdG9yOjpoYXNMb2NhbFN0b3JhZ2U6JywgZXJyb3IubWVzc2FnZSk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgY2FuRnVsbHNjcmVlbjogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gbmV3IEZ1bGxzY3JlZW5IZWxwZXIoKS5jYW5GdWxsc2NyZWVuKCk7XG4gICAgfSxcblxuICAgIGlzRnVsbHNjcmVlbjogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gbmV3IEZ1bGxzY3JlZW5IZWxwZXIoKS5pc0Z1bGxzY3JlZW4oKTtcbiAgICB9LFxuXG4gICAgY2FuU2hhcmU6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIEJvb2xlYW4obmF2aWdhdG9yLnNoYXJlKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogaHR0cHM6Ly9kZXZlbG9wZXIuY2hyb21lLmNvbS9tdWx0aWRldmljZS91c2VyLWFnZW50I3dlYnZpZXdfdXNlcl9hZ2VudFxuICAgICAqXG4gICAgICogSWYgeW914oCZcmUgYXR0ZW1wdGluZyB0byBkaWZmZXJlbnRpYXRlIGJldHdlZW4gdGhlIFdlYlZpZXcgYW5kIENocm9tZSBmb3JcbiAgICAgKiBBbmRyb2lkLCB5b3Ugc2hvdWxkIGxvb2sgZm9yIHRoZSBwcmVzZW5jZSBvZiB0aGUgVmVyc2lvbi9fWC5YXyBzdHJpbmcgaW5cbiAgICAgKiB0aGUgV2ViVmlldyB1c2VyLWFnZW50IHN0cmluZy5cbiAgICAgKlxuICAgICAqIEluIHRoZSBuZXdlciB2ZXJzaW9ucyBvZiBXZWJWaWV3LCB5b3UgY2FuIGRpZmZlcmVudGlhdGUgdGhlIFdlYlZpZXcgYnlcbiAgICAgKiBsb29raW5nIGZvciB0aGUgd3YgZmllbGQgYXMgaGlnaGxpZ2h0ZWQgYmVsb3dcbiAgICAgKiovXG4gICAgaXNXZWJWaWV3OiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIC9WZXJzaW9uXFwvfHd2L2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSAmJiB0aGlzLmlzQW5kcm9pZERldmljZSgpXG4gICAgICApO1xuICAgIH0sXG5cbiAgICBpc1Rlc3RTdWl0ZTogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gYWRhcHRlci5icm93c2VyRGV0YWlscy5icm93c2VyID09PSAndGVzdC1zdWl0ZSc7XG4gICAgfVxuICB9O1xufSgpKTtcbi8qIGVzbGludC1lbmFibGUgbWF4LWxpbmVzICovXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc3JjL0ZlYXR1cmVEZXRlY3Rvci5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBREE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7Ozs7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWJBO0FBZUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7Ozs7OztBQU1BO0FBQ0E7QUFFQTtBQUFBO0FBR0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBS0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7OztBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBSUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7O0FBVUE7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTlZQTtBQWdaQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///4\n")},function(module,exports,__webpack_require__){"use strict";eval("/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n\n\nvar logDisabled_ = true;\nvar deprecationWarnings_ = true;\n\n/**\n * Extract browser version out of the provided user agent string.\n *\n * @param {!string} uastring userAgent string.\n * @param {!string} expr Regular expression used as match criteria.\n * @param {!number} pos position in the version string to be returned.\n * @return {!number} browser version.\n */\nfunction extractVersion(uastring, expr, pos) {\n  var match = uastring.match(expr);\n  return match && match.length >= pos && parseInt(match[pos], 10);\n}\n\n// Wraps the peerconnection event eventNameToWrap in a function\n// which returns the modified event object.\nfunction wrapPeerConnectionEvent(window, eventNameToWrap, wrapper) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  var proto = window.RTCPeerConnection.prototype;\n  var nativeAddEventListener = proto.addEventListener;\n  proto.addEventListener = function(nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap) {\n      return nativeAddEventListener.apply(this, arguments);\n    }\n    var wrappedCallback = function(e) {\n      cb(wrapper(e));\n    };\n    this._eventMap = this._eventMap || {};\n    this._eventMap[cb] = wrappedCallback;\n    return nativeAddEventListener.apply(this, [nativeEventName,\n      wrappedCallback]);\n  };\n\n  var nativeRemoveEventListener = proto.removeEventListener;\n  proto.removeEventListener = function(nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap || !this._eventMap\n        || !this._eventMap[cb]) {\n      return nativeRemoveEventListener.apply(this, arguments);\n    }\n    var unwrappedCb = this._eventMap[cb];\n    delete this._eventMap[cb];\n    return nativeRemoveEventListener.apply(this, [nativeEventName,\n      unwrappedCb]);\n  };\n\n  Object.defineProperty(proto, 'on' + eventNameToWrap, {\n    get: function() {\n      return this['_on' + eventNameToWrap];\n    },\n    set: function(cb) {\n      if (this['_on' + eventNameToWrap]) {\n        this.removeEventListener(eventNameToWrap,\n            this['_on' + eventNameToWrap]);\n        delete this['_on' + eventNameToWrap];\n      }\n      if (cb) {\n        this.addEventListener(eventNameToWrap,\n            this['_on' + eventNameToWrap] = cb);\n      }\n    }\n  });\n}\n\n// Utility methods.\nmodule.exports = {\n  extractVersion: extractVersion,\n  wrapPeerConnectionEvent: wrapPeerConnectionEvent,\n  disableLog: function(bool) {\n    if (typeof bool !== 'boolean') {\n      return new Error('Argument type: ' + typeof bool +\n          '. Please use a boolean.');\n    }\n    logDisabled_ = bool;\n    return (bool) ? 'adapter.js logging disabled' :\n        'adapter.js logging enabled';\n  },\n\n  /**\n   * Disable or enable deprecation warnings\n   * @param {!boolean} bool set to true to disable warnings.\n   */\n  disableWarnings: function(bool) {\n    if (typeof bool !== 'boolean') {\n      return new Error('Argument type: ' + typeof bool +\n          '. Please use a boolean.');\n    }\n    deprecationWarnings_ = !bool;\n    return 'adapter.js deprecation warnings ' + (bool ? 'disabled' : 'enabled');\n  },\n\n  log: function() {\n    if (typeof window === 'object') {\n      if (logDisabled_) {\n        return;\n      }\n      if (typeof console !== 'undefined' && typeof console.log === 'function') {\n        console.log.apply(console, arguments);\n      }\n    }\n  },\n\n  /**\n   * Shows a deprecation warning suggesting the modern and spec-compatible API.\n   */\n  deprecated: function(oldMethod, newMethod) {\n    if (!deprecationWarnings_) {\n      return;\n    }\n    console.warn(oldMethod + ' is deprecated, please use ' + newMethod +\n        ' instead.');\n  },\n\n  /**\n   * Browser detector.\n   *\n   * @return {object} result containing browser and version\n   *     properties.\n   */\n  detectBrowser: function(window) {\n    var navigator = window && window.navigator;\n\n    // Returned result object.\n    var result = {};\n    result.browser = null;\n    result.version = null;\n\n    // Fail early if it's not a browser\n    if (typeof window === 'undefined' || !window.navigator) {\n      result.browser = 'Not a browser.';\n      return result;\n    }\n\n    if (navigator.mozGetUserMedia) { // Firefox.\n      result.browser = 'firefox';\n      result.version = extractVersion(navigator.userAgent,\n          /Firefox\\/(\\d+)\\./, 1);\n    } else if (navigator.webkitGetUserMedia) {\n      // Chrome, Chromium, Webview, Opera.\n      // Version matches Chrome/WebRTC version.\n      result.browser = 'chrome';\n      result.version = extractVersion(navigator.userAgent,\n          /Chrom(e|ium)\\/(\\d+)\\./, 2);\n    } else if (navigator.mediaDevices &&\n        navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/)) { // Edge.\n      result.browser = 'edge';\n      result.version = extractVersion(navigator.userAgent,\n          /Edge\\/(\\d+).(\\d+)$/, 2);\n    } else if (navigator.mediaDevices &&\n        navigator.userAgent.match(/AppleWebKit\\/(\\d+)\\./)) { // Safari.\n      result.browser = 'safari';\n      result.version = extractVersion(navigator.userAgent,\n          /AppleWebKit\\/(\\d+)\\./, 1);\n    } else { // Default fallthrough: not supported.\n      result.browser = 'Not a supported browser.';\n      return result;\n    }\n\n    return result;\n  }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy93ZWJydGMtYWRhcHRlci9zcmMvanMvdXRpbHMuanM/ZWU2NSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogIENvcHlyaWdodCAoYykgMjAxNiBUaGUgV2ViUlRDIHByb2plY3QgYXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYSBCU0Qtc3R5bGUgbGljZW5zZVxuICogIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhlIHNvdXJjZVxuICogIHRyZWUuXG4gKi9cbiAvKiBlc2xpbnQtZW52IG5vZGUgKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIGxvZ0Rpc2FibGVkXyA9IHRydWU7XG52YXIgZGVwcmVjYXRpb25XYXJuaW5nc18gPSB0cnVlO1xuXG4vKipcbiAqIEV4dHJhY3QgYnJvd3NlciB2ZXJzaW9uIG91dCBvZiB0aGUgcHJvdmlkZWQgdXNlciBhZ2VudCBzdHJpbmcuXG4gKlxuICogQHBhcmFtIHshc3RyaW5nfSB1YXN0cmluZyB1c2VyQWdlbnQgc3RyaW5nLlxuICogQHBhcmFtIHshc3RyaW5nfSBleHByIFJlZ3VsYXIgZXhwcmVzc2lvbiB1c2VkIGFzIG1hdGNoIGNyaXRlcmlhLlxuICogQHBhcmFtIHshbnVtYmVyfSBwb3MgcG9zaXRpb24gaW4gdGhlIHZlcnNpb24gc3RyaW5nIHRvIGJlIHJldHVybmVkLlxuICogQHJldHVybiB7IW51bWJlcn0gYnJvd3NlciB2ZXJzaW9uLlxuICovXG5mdW5jdGlvbiBleHRyYWN0VmVyc2lvbih1YXN0cmluZywgZXhwciwgcG9zKSB7XG4gIHZhciBtYXRjaCA9IHVhc3RyaW5nLm1hdGNoKGV4cHIpO1xuICByZXR1cm4gbWF0Y2ggJiYgbWF0Y2gubGVuZ3RoID49IHBvcyAmJiBwYXJzZUludChtYXRjaFtwb3NdLCAxMCk7XG59XG5cbi8vIFdyYXBzIHRoZSBwZWVyY29ubmVjdGlvbiBldmVudCBldmVudE5hbWVUb1dyYXAgaW4gYSBmdW5jdGlvblxuLy8gd2hpY2ggcmV0dXJucyB0aGUgbW9kaWZpZWQgZXZlbnQgb2JqZWN0LlxuZnVuY3Rpb24gd3JhcFBlZXJDb25uZWN0aW9uRXZlbnQod2luZG93LCBldmVudE5hbWVUb1dyYXAsIHdyYXBwZXIpIHtcbiAgaWYgKCF3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24pIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIHByb3RvID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZTtcbiAgdmFyIG5hdGl2ZUFkZEV2ZW50TGlzdGVuZXIgPSBwcm90by5hZGRFdmVudExpc3RlbmVyO1xuICBwcm90by5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24obmF0aXZlRXZlbnROYW1lLCBjYikge1xuICAgIGlmIChuYXRpdmVFdmVudE5hbWUgIT09IGV2ZW50TmFtZVRvV3JhcCkge1xuICAgICAgcmV0dXJuIG5hdGl2ZUFkZEV2ZW50TGlzdGVuZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gICAgdmFyIHdyYXBwZWRDYWxsYmFjayA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgIGNiKHdyYXBwZXIoZSkpO1xuICAgIH07XG4gICAgdGhpcy5fZXZlbnRNYXAgPSB0aGlzLl9ldmVudE1hcCB8fCB7fTtcbiAgICB0aGlzLl9ldmVudE1hcFtjYl0gPSB3cmFwcGVkQ2FsbGJhY2s7XG4gICAgcmV0dXJuIG5hdGl2ZUFkZEV2ZW50TGlzdGVuZXIuYXBwbHkodGhpcywgW25hdGl2ZUV2ZW50TmFtZSxcbiAgICAgIHdyYXBwZWRDYWxsYmFja10pO1xuICB9O1xuXG4gIHZhciBuYXRpdmVSZW1vdmVFdmVudExpc3RlbmVyID0gcHJvdG8ucmVtb3ZlRXZlbnRMaXN0ZW5lcjtcbiAgcHJvdG8ucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uKG5hdGl2ZUV2ZW50TmFtZSwgY2IpIHtcbiAgICBpZiAobmF0aXZlRXZlbnROYW1lICE9PSBldmVudE5hbWVUb1dyYXAgfHwgIXRoaXMuX2V2ZW50TWFwXG4gICAgICAgIHx8ICF0aGlzLl9ldmVudE1hcFtjYl0pIHtcbiAgICAgIHJldHVybiBuYXRpdmVSZW1vdmVFdmVudExpc3RlbmVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuICAgIHZhciB1bndyYXBwZWRDYiA9IHRoaXMuX2V2ZW50TWFwW2NiXTtcbiAgICBkZWxldGUgdGhpcy5fZXZlbnRNYXBbY2JdO1xuICAgIHJldHVybiBuYXRpdmVSZW1vdmVFdmVudExpc3RlbmVyLmFwcGx5KHRoaXMsIFtuYXRpdmVFdmVudE5hbWUsXG4gICAgICB1bndyYXBwZWRDYl0pO1xuICB9O1xuXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwcm90bywgJ29uJyArIGV2ZW50TmFtZVRvV3JhcCwge1xuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpc1snX29uJyArIGV2ZW50TmFtZVRvV3JhcF07XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uKGNiKSB7XG4gICAgICBpZiAodGhpc1snX29uJyArIGV2ZW50TmFtZVRvV3JhcF0pIHtcbiAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50TmFtZVRvV3JhcCxcbiAgICAgICAgICAgIHRoaXNbJ19vbicgKyBldmVudE5hbWVUb1dyYXBdKTtcbiAgICAgICAgZGVsZXRlIHRoaXNbJ19vbicgKyBldmVudE5hbWVUb1dyYXBdO1xuICAgICAgfVxuICAgICAgaWYgKGNiKSB7XG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWVUb1dyYXAsXG4gICAgICAgICAgICB0aGlzWydfb24nICsgZXZlbnROYW1lVG9XcmFwXSA9IGNiKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xufVxuXG4vLyBVdGlsaXR5IG1ldGhvZHMuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgZXh0cmFjdFZlcnNpb246IGV4dHJhY3RWZXJzaW9uLFxuICB3cmFwUGVlckNvbm5lY3Rpb25FdmVudDogd3JhcFBlZXJDb25uZWN0aW9uRXZlbnQsXG4gIGRpc2FibGVMb2c6IGZ1bmN0aW9uKGJvb2wpIHtcbiAgICBpZiAodHlwZW9mIGJvb2wgIT09ICdib29sZWFuJykge1xuICAgICAgcmV0dXJuIG5ldyBFcnJvcignQXJndW1lbnQgdHlwZTogJyArIHR5cGVvZiBib29sICtcbiAgICAgICAgICAnLiBQbGVhc2UgdXNlIGEgYm9vbGVhbi4nKTtcbiAgICB9XG4gICAgbG9nRGlzYWJsZWRfID0gYm9vbDtcbiAgICByZXR1cm4gKGJvb2wpID8gJ2FkYXB0ZXIuanMgbG9nZ2luZyBkaXNhYmxlZCcgOlxuICAgICAgICAnYWRhcHRlci5qcyBsb2dnaW5nIGVuYWJsZWQnO1xuICB9LFxuXG4gIC8qKlxuICAgKiBEaXNhYmxlIG9yIGVuYWJsZSBkZXByZWNhdGlvbiB3YXJuaW5nc1xuICAgKiBAcGFyYW0geyFib29sZWFufSBib29sIHNldCB0byB0cnVlIHRvIGRpc2FibGUgd2FybmluZ3MuXG4gICAqL1xuICBkaXNhYmxlV2FybmluZ3M6IGZ1bmN0aW9uKGJvb2wpIHtcbiAgICBpZiAodHlwZW9mIGJvb2wgIT09ICdib29sZWFuJykge1xuICAgICAgcmV0dXJuIG5ldyBFcnJvcignQXJndW1lbnQgdHlwZTogJyArIHR5cGVvZiBib29sICtcbiAgICAgICAgICAnLiBQbGVhc2UgdXNlIGEgYm9vbGVhbi4nKTtcbiAgICB9XG4gICAgZGVwcmVjYXRpb25XYXJuaW5nc18gPSAhYm9vbDtcbiAgICByZXR1cm4gJ2FkYXB0ZXIuanMgZGVwcmVjYXRpb24gd2FybmluZ3MgJyArIChib29sID8gJ2Rpc2FibGVkJyA6ICdlbmFibGVkJyk7XG4gIH0sXG5cbiAgbG9nOiBmdW5jdGlvbigpIHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHtcbiAgICAgIGlmIChsb2dEaXNhYmxlZF8pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgY29uc29sZS5sb2cgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgY29uc29sZS5sb2cuYXBwbHkoY29uc29sZSwgYXJndW1lbnRzKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFNob3dzIGEgZGVwcmVjYXRpb24gd2FybmluZyBzdWdnZXN0aW5nIHRoZSBtb2Rlcm4gYW5kIHNwZWMtY29tcGF0aWJsZSBBUEkuXG4gICAqL1xuICBkZXByZWNhdGVkOiBmdW5jdGlvbihvbGRNZXRob2QsIG5ld01ldGhvZCkge1xuICAgIGlmICghZGVwcmVjYXRpb25XYXJuaW5nc18pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc29sZS53YXJuKG9sZE1ldGhvZCArICcgaXMgZGVwcmVjYXRlZCwgcGxlYXNlIHVzZSAnICsgbmV3TWV0aG9kICtcbiAgICAgICAgJyBpbnN0ZWFkLicpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBCcm93c2VyIGRldGVjdG9yLlxuICAgKlxuICAgKiBAcmV0dXJuIHtvYmplY3R9IHJlc3VsdCBjb250YWluaW5nIGJyb3dzZXIgYW5kIHZlcnNpb25cbiAgICogICAgIHByb3BlcnRpZXMuXG4gICAqL1xuICBkZXRlY3RCcm93c2VyOiBmdW5jdGlvbih3aW5kb3cpIHtcbiAgICB2YXIgbmF2aWdhdG9yID0gd2luZG93ICYmIHdpbmRvdy5uYXZpZ2F0b3I7XG5cbiAgICAvLyBSZXR1cm5lZCByZXN1bHQgb2JqZWN0LlxuICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICByZXN1bHQuYnJvd3NlciA9IG51bGw7XG4gICAgcmVzdWx0LnZlcnNpb24gPSBudWxsO1xuXG4gICAgLy8gRmFpbCBlYXJseSBpZiBpdCdzIG5vdCBhIGJyb3dzZXJcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcgfHwgIXdpbmRvdy5uYXZpZ2F0b3IpIHtcbiAgICAgIHJlc3VsdC5icm93c2VyID0gJ05vdCBhIGJyb3dzZXIuJztcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgaWYgKG5hdmlnYXRvci5tb3pHZXRVc2VyTWVkaWEpIHsgLy8gRmlyZWZveC5cbiAgICAgIHJlc3VsdC5icm93c2VyID0gJ2ZpcmVmb3gnO1xuICAgICAgcmVzdWx0LnZlcnNpb24gPSBleHRyYWN0VmVyc2lvbihuYXZpZ2F0b3IudXNlckFnZW50LFxuICAgICAgICAgIC9GaXJlZm94XFwvKFxcZCspXFwuLywgMSk7XG4gICAgfSBlbHNlIGlmIChuYXZpZ2F0b3Iud2Via2l0R2V0VXNlck1lZGlhKSB7XG4gICAgICAvLyBDaHJvbWUsIENocm9taXVtLCBXZWJ2aWV3LCBPcGVyYS5cbiAgICAgIC8vIFZlcnNpb24gbWF0Y2hlcyBDaHJvbWUvV2ViUlRDIHZlcnNpb24uXG4gICAgICByZXN1bHQuYnJvd3NlciA9ICdjaHJvbWUnO1xuICAgICAgcmVzdWx0LnZlcnNpb24gPSBleHRyYWN0VmVyc2lvbihuYXZpZ2F0b3IudXNlckFnZW50LFxuICAgICAgICAgIC9DaHJvbShlfGl1bSlcXC8oXFxkKylcXC4vLCAyKTtcbiAgICB9IGVsc2UgaWYgKG5hdmlnYXRvci5tZWRpYURldmljZXMgJiZcbiAgICAgICAgbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvRWRnZVxcLyhcXGQrKS4oXFxkKykkLykpIHsgLy8gRWRnZS5cbiAgICAgIHJlc3VsdC5icm93c2VyID0gJ2VkZ2UnO1xuICAgICAgcmVzdWx0LnZlcnNpb24gPSBleHRyYWN0VmVyc2lvbihuYXZpZ2F0b3IudXNlckFnZW50LFxuICAgICAgICAgIC9FZGdlXFwvKFxcZCspLihcXGQrKSQvLCAyKTtcbiAgICB9IGVsc2UgaWYgKG5hdmlnYXRvci5tZWRpYURldmljZXMgJiZcbiAgICAgICAgbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvQXBwbGVXZWJLaXRcXC8oXFxkKylcXC4vKSkgeyAvLyBTYWZhcmkuXG4gICAgICByZXN1bHQuYnJvd3NlciA9ICdzYWZhcmknO1xuICAgICAgcmVzdWx0LnZlcnNpb24gPSBleHRyYWN0VmVyc2lvbihuYXZpZ2F0b3IudXNlckFnZW50LFxuICAgICAgICAgIC9BcHBsZVdlYktpdFxcLyhcXGQrKVxcLi8sIDEpO1xuICAgIH0gZWxzZSB7IC8vIERlZmF1bHQgZmFsbHRocm91Z2g6IG5vdCBzdXBwb3J0ZWQuXG4gICAgICByZXN1bHQuYnJvd3NlciA9ICdOb3QgYSBzdXBwb3J0ZWQgYnJvd3Nlci4nO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvd2VicnRjLWFkYXB0ZXIvc3JjL2pzL3V0aWxzLmpzXG4vLyBtb2R1bGUgaWQgPSA1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///5\n")},function(module,exports){eval("// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self\n  // eslint-disable-next-line no-new-func\n  : Function('return this')();\nif (typeof __g == 'number') __g = global; // eslint-disable-line no-undef\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL21vZHVsZXMvX2dsb2JhbC5qcz9jMDNiIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGh0dHBzOi8vZ2l0aHViLmNvbS96bG9pcm9jay9jb3JlLWpzL2lzc3Vlcy84NiNpc3N1ZWNvbW1lbnQtMTE1NzU5MDI4XG52YXIgZ2xvYmFsID0gbW9kdWxlLmV4cG9ydHMgPSB0eXBlb2Ygd2luZG93ICE9ICd1bmRlZmluZWQnICYmIHdpbmRvdy5NYXRoID09IE1hdGhcbiAgPyB3aW5kb3cgOiB0eXBlb2Ygc2VsZiAhPSAndW5kZWZpbmVkJyAmJiBzZWxmLk1hdGggPT0gTWF0aCA/IHNlbGZcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLW5ldy1mdW5jXG4gIDogRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcbmlmICh0eXBlb2YgX19nID09ICdudW1iZXInKSBfX2cgPSBnbG9iYWw7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW5kZWZcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9fZ2xvYmFsLmpzXG4vLyBtb2R1bGUgaWQgPSA2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///6\n")},function(module,exports){eval("var core = module.exports = { version: '2.5.1' };\nif (typeof __e == 'number') __e = core; // eslint-disable-line no-undef\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL21vZHVsZXMvX2NvcmUuanM/M2E2NyJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgY29yZSA9IG1vZHVsZS5leHBvcnRzID0geyB2ZXJzaW9uOiAnMi41LjEnIH07XG5pZiAodHlwZW9mIF9fZSA9PSAnbnVtYmVyJykgX19lID0gY29yZTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bmRlZlxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL19jb3JlLmpzXG4vLyBtb2R1bGUgaWQgPSA3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///7\n")},function(module,exports,__webpack_require__){eval("var dP = __webpack_require__(/*! ./_object-dp */ 30);\nvar createDesc = __webpack_require__(/*! ./_property-desc */ 35);\nmodule.exports = __webpack_require__(/*! ./_descriptors */ 10) ? function (object, key, value) {\n  return dP.f(object, key, createDesc(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL21vZHVsZXMvX2hpZGUuanM/ZGVmNyJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZFAgPSByZXF1aXJlKCcuL19vYmplY3QtZHAnKTtcbnZhciBjcmVhdGVEZXNjID0gcmVxdWlyZSgnLi9fcHJvcGVydHktZGVzYycpO1xubW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL19kZXNjcmlwdG9ycycpID8gZnVuY3Rpb24gKG9iamVjdCwga2V5LCB2YWx1ZSkge1xuICByZXR1cm4gZFAuZihvYmplY3QsIGtleSwgY3JlYXRlRGVzYygxLCB2YWx1ZSkpO1xufSA6IGZ1bmN0aW9uIChvYmplY3QsIGtleSwgdmFsdWUpIHtcbiAgb2JqZWN0W2tleV0gPSB2YWx1ZTtcbiAgcmV0dXJuIG9iamVjdDtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jb3JlLWpzL21vZHVsZXMvX2hpZGUuanNcbi8vIG1vZHVsZSBpZCA9IDhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///8\n")},function(module,exports){eval("module.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL21vZHVsZXMvX2lzLW9iamVjdC5qcz9hMGU5Il0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0KSB7XG4gIHJldHVybiB0eXBlb2YgaXQgPT09ICdvYmplY3QnID8gaXQgIT09IG51bGwgOiB0eXBlb2YgaXQgPT09ICdmdW5jdGlvbic7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL19pcy1vYmplY3QuanNcbi8vIG1vZHVsZSBpZCA9IDlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///9\n")},function(module,exports,__webpack_require__){eval("// Thank's IE8 for his funny defineProperty\nmodule.exports = !__webpack_require__(/*! ./_fails */ 11)(function () {\n  return Object.defineProperty({}, 'a', { get: function () { return 7; } }).a != 7;\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL19kZXNjcmlwdG9ycy5qcz9mNzQwIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoYW5rJ3MgSUU4IGZvciBoaXMgZnVubnkgZGVmaW5lUHJvcGVydHlcbm1vZHVsZS5leHBvcnRzID0gIXJlcXVpcmUoJy4vX2ZhaWxzJykoZnVuY3Rpb24gKCkge1xuICByZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LCAnYScsIHsgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiA3OyB9IH0pLmEgIT0gNztcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL19kZXNjcmlwdG9ycy5qc1xuLy8gbW9kdWxlIGlkID0gMTBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///10\n")},function(module,exports){eval("module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (e) {\n    return true;\n  }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL19mYWlscy5qcz8zZTMxIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGV4ZWMpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gISFleGVjKCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9fZmFpbHMuanNcbi8vIG1vZHVsZSBpZCA9IDExXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///11\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /* eslint-disable max-lines */\n\n\nvar _Logger = __webpack_require__(/*! ./Logger */ 0);\n\nvar _Logger2 = _interopRequireDefault(_Logger);\n\nvar _LocalStorage = __webpack_require__(/*! ./LocalStorage */ 70);\n\nvar _LocalStorage2 = _interopRequireDefault(_LocalStorage);\n\nvar _MediaStreamHandler = __webpack_require__(/*! ./MediaStreamHandler */ 3);\n\nvar _MediaStreamHandler2 = _interopRequireDefault(_MediaStreamHandler);\n\nvar _FeatureDetector = __webpack_require__(/*! ./FeatureDetector */ 4);\n\nvar _FeatureDetector2 = _interopRequireDefault(_FeatureDetector);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * eyeson Device Manager used to handle cameras, microphones and speakers.\n **/\nvar DeviceManager = function () {\n  /* eslint-disable max-statements */\n  function DeviceManager() {\n    var _this = this;\n\n    _classCallCheck(this, DeviceManager);\n\n    this.sinkId = 'default';\n    this.options = { audio: true, video: true, eco: false };\n    this.cameras = [];\n    this.listeners = [];\n    this.speakers = [];\n    this.microphones = [];\n    this.constraints = {};\n    this.terminationInProgress = false;\n\n    DeviceManager.getSinkId().then(function (sinkId) {\n      _this.sinkId = sinkId;\n    });\n\n    this.setStream = this.setStream.bind(this);\n    this.handleError = this.handleError.bind(this);\n    this.storeConstraints = this.storeConstraints.bind(this);\n    this.adjustAudioTrack = this.adjustAudioTrack.bind(this);\n    this.adjustConstraints = this.adjustConstraints.bind(this);\n  }\n  /* eslint-enable max-statements */\n\n  /**\n   * Get constraints for specified options { audio: true, video: true }\n   * If a specific device is chosen it has to be stored in localStorage or will\n   * be ignored.\n   **/\n\n\n  _createClass(DeviceManager, [{\n    key: 'start',\n\n\n    /**\n     * Sets cameras, microphones, and speakers and starts a video stream\n     * with supplied options.\n     **/\n    value: function start() {\n      var _this2 = this;\n\n      _Logger2.default.debug('DeviceManager::start');\n      this.watchForNewDevices();\n\n      return DeviceManager.fetchDevices().then(function (devices) {\n        _this2.cameras = devices.cameras;\n        _this2.microphones = devices.microphones;\n        _this2.speakers = devices.speakers;\n        _this2.options.audio = _this2.microphones.length > 0 ? _this2.options.audio : false;\n        _this2.options.video = _this2.cameras.length > 0 ? _this2.options.video : false;\n        _this2.options.eco = _this2.options.eco;\n        _this2.notify(devices);\n        return devices;\n      }).then(function () {\n        return DeviceManager.getMediaConstraints(_this2.options);\n      }).then(function (constraints) {\n        _this2.constraints = constraints;\n        return navigator.mediaDevices.getUserMedia(constraints);\n      }).then(this.setStream).then(this.adjustConstraints).catch(this.handleError);\n    }\n  }, {\n    key: 'stopStream',\n    value: function stopStream() {\n      _Logger2.default.debug('DeviceManager::stopStream');\n\n      if (!this.stream) {\n        return;\n      }\n\n      _MediaStreamHandler2.default.stop(this.stream);\n      this.stream = null;\n    }\n\n    /**\n     * Stop the media stream. Since we call getUserMedia on gotDevices we don't\n     * have a stream in that case.\n     **/\n\n  }, {\n    key: 'stop',\n    value: function stop() {\n      _Logger2.default.debug('DeviceManager::stop');\n\n      if (this.deviceWatcherInterval) {\n        clearInterval(this.deviceWatcherInterval);\n      }\n      this.stopStream();\n    }\n  }, {\n    key: 'terminate',\n    value: function terminate() {\n      _Logger2.default.debug('DeviceManager::terminate');\n      this.terminationInProgress = true;\n      this.stop();\n    }\n\n    /**\n     * Add new devices.\n     **/\n\n  }, {\n    key: 'watchForNewDevices',\n    value: function watchForNewDevices() {\n      var _this3 = this;\n\n      if (this.deviceWatcherInterval) {\n        clearInterval(this.deviceWatcherInterval);\n      }\n      this.deviceWatcherInterval = setInterval(function () {\n        DeviceManager.fetchDevices().then(function (devices) {\n          _this3.cameras = devices.cameras;\n          _this3.speakers = devices.speakers;\n          _this3.microphones = devices.microphones;\n          _this3.notify(devices);\n        }).catch(_this3.handleError);\n      }, 5000);\n    }\n\n    /**\n     * Register listeners for changes on devices.\n     **/\n\n  }, {\n    key: 'onChange',\n    value: function onChange(callback) {\n      this.listeners.push(callback);\n    }\n\n    /**\n     * Remove a listener.\n     **/\n\n  }, {\n    key: 'removeListener',\n    value: function removeListener(callback) {\n      this.listeners = this.listeners.filter(function (listener) {\n        return listener !== callback;\n      });\n    }\n\n    /**\n     * Wrapper around mediaDevices getUserMedia. Ensures a running stream is\n     * stopped and a new one started with newly defined constraints.\n     **/\n\n  }, {\n    key: 'update',\n    value: function update(constraints) {\n      this.constraints = constraints || this.constraints;\n      this.stop();\n\n      _Logger2.default.debug('DeviceManager::update', this.constraints);\n      navigator.mediaDevices.getUserMedia(this.constraints).then(this.setStream).catch(this.handleError);\n    }\n\n    /**\n     * Similar to update but instead of directly supplying constraints,\n     * update with options.\n     **/\n\n  }, {\n    key: 'updateWithOptions',\n    value: function updateWithOptions(options) {\n      var _this4 = this;\n\n      this.options = options || this.options;\n      this.stop();\n\n      _Logger2.default.debug('DeviceManager::updateWithOptions', this.options);\n      this.watchForNewDevices();\n\n      return DeviceManager.getMediaConstraints(this.options).then(function (constraints) {\n        _this4.constraints = constraints;\n        return navigator.mediaDevices.getUserMedia({\n          video: _this4.constraints.video,\n          audio: true\n        });\n      }).then(this.adjustAudioTrack).then(this.setStream).catch(this.handleError);\n    }\n  }, {\n    key: 'adjustAudioTrack',\n    value: function adjustAudioTrack(stream) {\n      if (stream.getAudioTracks().length === 1) {\n        stream.getAudioTracks()[0].enabled = this.options.audio;\n      }\n      return stream;\n    }\n  }, {\n    key: 'storeConstraints',\n    value: function storeConstraints() {\n      _Logger2.default.debug('DeviceManager::storeConstraints', this.constraints);\n      _LocalStorage2.default.store('mediaConstraints', this.constraints);\n      _LocalStorage2.default.store('sinkId', this.sinkId);\n    }\n\n    /**\n     * Set active stream.\n     *\n     * NOTE: This can be called _after_ we have already stopped.\n     **/\n\n  }, {\n    key: 'setStream',\n    value: function setStream(stream) {\n      _Logger2.default.debug('DeviceManager::setStream', stream);\n\n      this.stream = stream;\n      if (this.terminationInProgress) {\n        this.stop();\n      }\n\n      this.notify({\n        stream: this.stream,\n        constraints: this.constraints,\n        options: this.options\n      });\n      this.verifyStream();\n    }\n\n    /**\n     * Verify the stream is set up.\n     **/\n\n  }, {\n    key: 'verifyStream',\n    value: function verifyStream() {\n      _Logger2.default.debug('DeviceManager::verifyStream constraints:', this.constraints);\n      if (this.constraints.video && this.stream && this.stream.getVideoTracks().length === 0) {\n        this.handleError({ name: 'EyesonCameraError' });\n      }\n\n      if (this.constraints.audio && this.stream && this.stream.getAudioTracks().length === 0) {\n        this.handleError({ name: 'EyesonMicrophoneError' });\n      }\n    }\n\n    /**\n     * Set video input selection.\n     **/\n\n  }, {\n    key: 'setVideoInput',\n    value: function setVideoInput(deviceId) {\n      var videoConstraints = {};\n      Object.assign(videoConstraints, this.constraints.video, { deviceId: { exact: deviceId } });\n      this.constraints.video = videoConstraints;\n      this.update();\n    }\n\n    /**\n     * Set audio input selection.\n     **/\n\n  }, {\n    key: 'setAudioInput',\n    value: function setAudioInput(deviceId) {\n      var audioConstraints = {};\n      Object.assign(audioConstraints, this.constraints.audio, { deviceId: { exact: deviceId } });\n      this.constraints.audio = audioConstraints;\n      this.update();\n    }\n\n    /**\n     * Set and store audio output selection.\n     **/\n\n  }, {\n    key: 'setAudioOutput',\n    value: function setAudioOutput(sinkId) {\n      this.sinkId = sinkId;\n      _LocalStorage2.default.store('sinkId', this.sinkId);\n      this.notify({ sinkId: this.sinkId });\n    }\n\n    /**\n     * Since a user can choose a camera in the FF gUM prompt, we can run into a\n     * situation where the user selects camera 2 but we don't remember that\n     * choice, since they didn't use our select UI.  As a user that's quite\n     * frustrating since it seems like the preferred selection is not remembered\n     * at all and we preselect camera 1 in the next gUM request.\n     *\n     * To further complicate things: FF only has device labels after a stream has\n     * been acquired. So in order to match the acquired stream/videoTrack to the\n     * camera in use, we have to wait for gUM to complete and then query devices\n     * again.\n     **/\n\n  }, {\n    key: 'adjustConstraints',\n    value: function adjustConstraints() {\n      var _this5 = this;\n\n      if (!_FeatureDetector2.default.offersOwnDeviceSelection() || !this.stream) {\n        return;\n      }\n\n      navigator.mediaDevices.enumerateDevices().then(function (devices) {\n        var aConstraint = _this5.findTrackConstraint(_this5.stream.getAudioTracks(), devices);\n        var vConstraint = _this5.findTrackConstraint(_this5.stream.getVideoTracks(), devices);\n\n        var audio = Object.assign({}, _this5.constraints.audio, aConstraint);\n        var video = Object.assign({}, _this5.constraints.video, vConstraint);\n\n        _this5.constraints = { audio: audio, video: video };\n\n        _Logger2.default.debug('DeviceManager::adjustConstraints: ', _this5.constraints);\n        _this5.notify({ constraints: _this5.constraints });\n      });\n    }\n  }, {\n    key: 'findTrackConstraint',\n    value: function findTrackConstraint(tracks, devices) {\n      if (tracks.length === 0) {\n        return {};\n      }\n      var device = devices.find(function (dev) {\n        return dev.label === tracks[0].label;\n      });\n      return device ? { deviceId: { exact: device.deviceId } } : {};\n    }\n\n    /**\n     * Notify about error.\n     **/\n\n  }, {\n    key: 'handleError',\n    value: function handleError(error) {\n      _Logger2.default.debug('DeviceManager::handleError', error);\n      this.notify({ error: error, constraints: this.constraints });\n    }\n\n    /**\n     * Notify bound listeners about changes.\n     **/\n\n  }, {\n    key: 'notify',\n    value: function notify(state) {\n      this.listeners.forEach(function (listener) {\n        return listener(state);\n      });\n    }\n  }], [{\n    key: 'getMediaConstraints',\n    value: function getMediaConstraints(optionsParam) {\n      var options = optionsParam || { audio: true, video: true };\n      return navigator.mediaDevices.enumerateDevices().then(function (devices) {\n        return DeviceManager.determineConstraintsForDevices(devices, options);\n      }).catch(function (error) {\n        _Logger2.default.error('DeviceManager::getMediaConstraints ', error);\n      });\n    }\n\n    /* eslint-disable max-statements */\n\n  }, {\n    key: 'determineConstraintsForDevices',\n    value: function determineConstraintsForDevices(devices, options) {\n      var constraints = _LocalStorage2.default.load('mediaConstraints', options);\n\n      if (!('video' in constraints)) {\n        constraints.video = true;\n      }\n      if (!('audio' in constraints)) {\n        constraints.audio = true;\n      }\n\n      if (constraints.video.deviceId) {\n        var videoDeviceId = constraints.video.deviceId.exact;\n        if (!devices.find(function (device) {\n          return device.deviceId === videoDeviceId;\n        })) {\n          constraints.video = options.video;\n        }\n      }\n      if (constraints.audio.deviceId) {\n        var audioDeviceId = constraints.audio.deviceId.exact;\n        if (!devices.find(function (device) {\n          return device.deviceId === audioDeviceId;\n        })) {\n          constraints.audio = options.audio;\n        }\n      }\n\n      if (options.video === false) {\n        constraints.video = false;\n      }\n      if (options.video === true && constraints.video === false) {\n        constraints.video = true;\n      }\n      if (options.audio === true && constraints.audio === false) {\n        constraints.audio = true;\n      }\n\n      // In case we don't have a videoinput device but specify\n      // video: true, we get NotFoundError in FF & DevicesNotFoundError in\n      // Chrome.\n      if (devices.filter(function (device) {\n        return device.kind === 'videoinput';\n      }).length === 0) {\n        constraints.video = false;\n      }\n\n      if (constraints.video) {\n        if (_typeof(constraints.video) !== 'object') {\n          constraints.video = {};\n        }\n        if (_FeatureDetector2.default.requiresLowerConstraints()) {\n          constraints.video.width = { exact: 640 };\n          constraints.video.height = { exact: 480 };\n        } else {\n          constraints.video.width = { min: 640, ideal: 960, max: 960 };\n          constraints.video.height = { min: 480, ideal: 720, max: 720 };\n          constraints.video.aspectRatio = 1.333333333;\n        }\n      }\n\n      _Logger2.default.debug('DeviceManager::getMediaConstraints returned: ', constraints);\n      return constraints;\n    }\n    /* eslint-enable max-statements */\n\n    /**\n     * For now we handle the mobile options and constraints completely separately.\n     **/\n\n  }, {\n    key: 'getMobileMediaConstraints',\n    value: function getMobileMediaConstraints(options) {\n      var constraints = Object.assign({ audio: true, video: true }, options);\n      return new Promise(function (res) {\n        res(constraints);\n      });\n    }\n\n    /**\n     * Get sinkId.\n     **/\n\n  }, {\n    key: 'getSinkId',\n    value: function getSinkId() {\n      var sinkId = _LocalStorage2.default.load('sinkId', '');\n      return navigator.mediaDevices.enumerateDevices().then(function (devices) {\n        if (!devices.find(function (device) {\n          return device.deviceId === sinkId;\n        })) {\n          sinkId = 'default';\n        }\n        return sinkId;\n      });\n    }\n\n    /**\n     * Return available devices in a friendly format.\n     **/\n\n  }, {\n    key: 'fetchDevices',\n    value: function fetchDevices() {\n      return navigator.mediaDevices.enumerateDevices().then(function (devices) {\n        return {\n          cameras: devices.filter(function (device) {\n            return device.kind === 'videoinput';\n          }),\n          microphones: devices.filter(function (device) {\n            return device.kind === 'audioinput';\n          }),\n          speakers: devices.filter(function (device) {\n            return device.kind === 'audiooutput';\n          })\n        };\n      });\n    }\n  }, {\n    key: 'fetchInputDevices',\n    value: function fetchInputDevices() {\n      return navigator.mediaDevices.enumerateDevices().then(function (devices) {\n        return devices.filter(function (device) {\n          return device.kind.includes('input');\n        });\n      });\n    }\n  }]);\n\n  return DeviceManager;\n}();\n\nexports.default = DeviceManager;\n/* eslint-enable max-lines *///# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL0RldmljZU1hbmFnZXIuanM/NTU5OCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBtYXgtbGluZXMgKi9cbmltcG9ydCBMb2dnZXIgZnJvbSAnLi9Mb2dnZXInO1xuaW1wb3J0IExvY2FsU3RvcmFnZSBmcm9tICcuL0xvY2FsU3RvcmFnZSc7XG5pbXBvcnQgTWVkaWFTdHJlYW1IYW5kbGVyIGZyb20gJy4vTWVkaWFTdHJlYW1IYW5kbGVyJztcbmltcG9ydCBGZWF0dXJlRGV0ZWN0b3IgZnJvbSAnLi9GZWF0dXJlRGV0ZWN0b3InO1xuXG4vKipcbiAqIGV5ZXNvbiBEZXZpY2UgTWFuYWdlciB1c2VkIHRvIGhhbmRsZSBjYW1lcmFzLCBtaWNyb3Bob25lcyBhbmQgc3BlYWtlcnMuXG4gKiovXG5jbGFzcyBEZXZpY2VNYW5hZ2VyIHtcbiAgLyogZXNsaW50LWRpc2FibGUgbWF4LXN0YXRlbWVudHMgKi9cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5zaW5rSWQgPSAnZGVmYXVsdCc7XG4gICAgdGhpcy5vcHRpb25zID0geyBhdWRpbzogdHJ1ZSwgdmlkZW86IHRydWUsIGVjbzogZmFsc2UgfTtcbiAgICB0aGlzLmNhbWVyYXMgPSBbXTtcbiAgICB0aGlzLmxpc3RlbmVycyA9IFtdO1xuICAgIHRoaXMuc3BlYWtlcnMgPSBbXTtcbiAgICB0aGlzLm1pY3JvcGhvbmVzID0gW107XG4gICAgdGhpcy5jb25zdHJhaW50cyA9IHt9O1xuICAgIHRoaXMudGVybWluYXRpb25JblByb2dyZXNzID0gZmFsc2U7XG5cbiAgICBEZXZpY2VNYW5hZ2VyLmdldFNpbmtJZCgpLnRoZW4oc2lua0lkID0+IHtcbiAgICAgIHRoaXMuc2lua0lkID0gc2lua0lkO1xuICAgIH0pO1xuXG4gICAgdGhpcy5zZXRTdHJlYW0gPSB0aGlzLnNldFN0cmVhbS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuaGFuZGxlRXJyb3IgPSB0aGlzLmhhbmRsZUVycm9yLmJpbmQodGhpcyk7XG4gICAgdGhpcy5zdG9yZUNvbnN0cmFpbnRzID0gdGhpcy5zdG9yZUNvbnN0cmFpbnRzLmJpbmQodGhpcyk7XG4gICAgdGhpcy5hZGp1c3RBdWRpb1RyYWNrID0gdGhpcy5hZGp1c3RBdWRpb1RyYWNrLmJpbmQodGhpcyk7XG4gICAgdGhpcy5hZGp1c3RDb25zdHJhaW50cyA9IHRoaXMuYWRqdXN0Q29uc3RyYWludHMuYmluZCh0aGlzKTtcbiAgfVxuICAvKiBlc2xpbnQtZW5hYmxlIG1heC1zdGF0ZW1lbnRzICovXG5cbiAgLyoqXG4gICAqIEdldCBjb25zdHJhaW50cyBmb3Igc3BlY2lmaWVkIG9wdGlvbnMgeyBhdWRpbzogdHJ1ZSwgdmlkZW86IHRydWUgfVxuICAgKiBJZiBhIHNwZWNpZmljIGRldmljZSBpcyBjaG9zZW4gaXQgaGFzIHRvIGJlIHN0b3JlZCBpbiBsb2NhbFN0b3JhZ2Ugb3Igd2lsbFxuICAgKiBiZSBpZ25vcmVkLlxuICAgKiovXG4gIHN0YXRpYyBnZXRNZWRpYUNvbnN0cmFpbnRzKG9wdGlvbnNQYXJhbSkge1xuICAgIGNvbnN0IG9wdGlvbnMgPSBvcHRpb25zUGFyYW0gfHwgeyBhdWRpbzogdHJ1ZSwgdmlkZW86IHRydWUgfTtcbiAgICByZXR1cm4gbmF2aWdhdG9yLm1lZGlhRGV2aWNlc1xuICAgICAgLmVudW1lcmF0ZURldmljZXMoKVxuICAgICAgLnRoZW4oZGV2aWNlcyA9PiB7XG4gICAgICAgIHJldHVybiBEZXZpY2VNYW5hZ2VyLmRldGVybWluZUNvbnN0cmFpbnRzRm9yRGV2aWNlcyhkZXZpY2VzLCBvcHRpb25zKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICBMb2dnZXIuZXJyb3IoJ0RldmljZU1hbmFnZXI6OmdldE1lZGlhQ29uc3RyYWludHMgJywgZXJyb3IpO1xuICAgICAgfSk7XG4gIH1cblxuICAvKiBlc2xpbnQtZGlzYWJsZSBtYXgtc3RhdGVtZW50cyAqL1xuICBzdGF0aWMgZGV0ZXJtaW5lQ29uc3RyYWludHNGb3JEZXZpY2VzKGRldmljZXMsIG9wdGlvbnMpIHtcbiAgICBsZXQgY29uc3RyYWludHMgPSBMb2NhbFN0b3JhZ2UubG9hZCgnbWVkaWFDb25zdHJhaW50cycsIG9wdGlvbnMpO1xuXG4gICAgaWYgKCEoJ3ZpZGVvJyBpbiBjb25zdHJhaW50cykpIHtcbiAgICAgIGNvbnN0cmFpbnRzLnZpZGVvID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKCEoJ2F1ZGlvJyBpbiBjb25zdHJhaW50cykpIHtcbiAgICAgIGNvbnN0cmFpbnRzLmF1ZGlvID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAoY29uc3RyYWludHMudmlkZW8uZGV2aWNlSWQpIHtcbiAgICAgIGNvbnN0IHZpZGVvRGV2aWNlSWQgPSBjb25zdHJhaW50cy52aWRlby5kZXZpY2VJZC5leGFjdDtcbiAgICAgIGlmICghZGV2aWNlcy5maW5kKGRldmljZSA9PiBkZXZpY2UuZGV2aWNlSWQgPT09IHZpZGVvRGV2aWNlSWQpKSB7XG4gICAgICAgIGNvbnN0cmFpbnRzLnZpZGVvID0gb3B0aW9ucy52aWRlbztcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGNvbnN0cmFpbnRzLmF1ZGlvLmRldmljZUlkKSB7XG4gICAgICBjb25zdCBhdWRpb0RldmljZUlkID0gY29uc3RyYWludHMuYXVkaW8uZGV2aWNlSWQuZXhhY3Q7XG4gICAgICBpZiAoIWRldmljZXMuZmluZChkZXZpY2UgPT4gZGV2aWNlLmRldmljZUlkID09PSBhdWRpb0RldmljZUlkKSkge1xuICAgICAgICBjb25zdHJhaW50cy5hdWRpbyA9IG9wdGlvbnMuYXVkaW87XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMudmlkZW8gPT09IGZhbHNlKSB7XG4gICAgICBjb25zdHJhaW50cy52aWRlbyA9IGZhbHNlO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy52aWRlbyA9PT0gdHJ1ZSAmJiBjb25zdHJhaW50cy52aWRlbyA9PT0gZmFsc2UpIHtcbiAgICAgIGNvbnN0cmFpbnRzLnZpZGVvID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMuYXVkaW8gPT09IHRydWUgJiYgY29uc3RyYWludHMuYXVkaW8gPT09IGZhbHNlKSB7XG4gICAgICBjb25zdHJhaW50cy5hdWRpbyA9IHRydWU7XG4gICAgfVxuXG4gICAgLy8gSW4gY2FzZSB3ZSBkb24ndCBoYXZlIGEgdmlkZW9pbnB1dCBkZXZpY2UgYnV0IHNwZWNpZnlcbiAgICAvLyB2aWRlbzogdHJ1ZSwgd2UgZ2V0IE5vdEZvdW5kRXJyb3IgaW4gRkYgJiBEZXZpY2VzTm90Rm91bmRFcnJvciBpblxuICAgIC8vIENocm9tZS5cbiAgICBpZiAoZGV2aWNlcy5maWx0ZXIoZGV2aWNlID0+IGRldmljZS5raW5kID09PSAndmlkZW9pbnB1dCcpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29uc3RyYWludHMudmlkZW8gPSBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoY29uc3RyYWludHMudmlkZW8pIHtcbiAgICAgIGlmICh0eXBlb2YgY29uc3RyYWludHMudmlkZW8gIT09ICdvYmplY3QnKSB7XG4gICAgICAgIGNvbnN0cmFpbnRzLnZpZGVvID0ge307XG4gICAgICB9XG4gICAgICBpZiAoRmVhdHVyZURldGVjdG9yLnJlcXVpcmVzTG93ZXJDb25zdHJhaW50cygpKSB7XG4gICAgICAgIGNvbnN0cmFpbnRzLnZpZGVvLndpZHRoID0geyBleGFjdDogNjQwIH07XG4gICAgICAgIGNvbnN0cmFpbnRzLnZpZGVvLmhlaWdodCA9IHsgZXhhY3Q6IDQ4MCB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3RyYWludHMudmlkZW8ud2lkdGggPSB7IG1pbjogNjQwLCBpZGVhbDogOTYwLCBtYXg6IDk2MCB9O1xuICAgICAgICBjb25zdHJhaW50cy52aWRlby5oZWlnaHQgPSB7IG1pbjogNDgwLCBpZGVhbDogNzIwLCBtYXg6IDcyMCB9O1xuICAgICAgICBjb25zdHJhaW50cy52aWRlby5hc3BlY3RSYXRpbyA9IDEuMzMzMzMzMzMzO1xuICAgICAgfVxuICAgIH1cblxuICAgIExvZ2dlci5kZWJ1ZygnRGV2aWNlTWFuYWdlcjo6Z2V0TWVkaWFDb25zdHJhaW50cyByZXR1cm5lZDogJywgY29uc3RyYWludHMpO1xuICAgIHJldHVybiBjb25zdHJhaW50cztcbiAgfVxuICAvKiBlc2xpbnQtZW5hYmxlIG1heC1zdGF0ZW1lbnRzICovXG5cbiAgLyoqXG4gICAqIEZvciBub3cgd2UgaGFuZGxlIHRoZSBtb2JpbGUgb3B0aW9ucyBhbmQgY29uc3RyYWludHMgY29tcGxldGVseSBzZXBhcmF0ZWx5LlxuICAgKiovXG4gIHN0YXRpYyBnZXRNb2JpbGVNZWRpYUNvbnN0cmFpbnRzKG9wdGlvbnMpIHtcbiAgICBsZXQgY29uc3RyYWludHMgPSBPYmplY3QuYXNzaWduKHsgYXVkaW86IHRydWUsIHZpZGVvOiB0cnVlIH0sIG9wdGlvbnMpO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXMgPT4ge1xuICAgICAgcmVzKGNvbnN0cmFpbnRzKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgc2lua0lkLlxuICAgKiovXG4gIHN0YXRpYyBnZXRTaW5rSWQoKSB7XG4gICAgbGV0IHNpbmtJZCA9IExvY2FsU3RvcmFnZS5sb2FkKCdzaW5rSWQnLCAnJyk7XG4gICAgcmV0dXJuIG5hdmlnYXRvci5tZWRpYURldmljZXMuZW51bWVyYXRlRGV2aWNlcygpLnRoZW4oZGV2aWNlcyA9PiB7XG4gICAgICBpZiAoIWRldmljZXMuZmluZChkZXZpY2UgPT4gZGV2aWNlLmRldmljZUlkID09PSBzaW5rSWQpKSB7XG4gICAgICAgIHNpbmtJZCA9ICdkZWZhdWx0JztcbiAgICAgIH1cbiAgICAgIHJldHVybiBzaW5rSWQ7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIGF2YWlsYWJsZSBkZXZpY2VzIGluIGEgZnJpZW5kbHkgZm9ybWF0LlxuICAgKiovXG4gIHN0YXRpYyBmZXRjaERldmljZXMoKSB7XG4gICAgcmV0dXJuIG5hdmlnYXRvci5tZWRpYURldmljZXMuZW51bWVyYXRlRGV2aWNlcygpLnRoZW4oZGV2aWNlcyA9PiB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBjYW1lcmFzOiBkZXZpY2VzLmZpbHRlcihkZXZpY2UgPT4gZGV2aWNlLmtpbmQgPT09ICd2aWRlb2lucHV0JyksXG4gICAgICAgIG1pY3JvcGhvbmVzOiBkZXZpY2VzLmZpbHRlcihkZXZpY2UgPT4gZGV2aWNlLmtpbmQgPT09ICdhdWRpb2lucHV0JyksXG4gICAgICAgIHNwZWFrZXJzOiBkZXZpY2VzLmZpbHRlcihkZXZpY2UgPT4gZGV2aWNlLmtpbmQgPT09ICdhdWRpb291dHB1dCcpXG4gICAgICB9O1xuICAgIH0pO1xuICB9XG5cbiAgc3RhdGljIGZldGNoSW5wdXREZXZpY2VzKCkge1xuICAgIHJldHVybiBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmVudW1lcmF0ZURldmljZXMoKS50aGVuKGRldmljZXMgPT4ge1xuICAgICAgcmV0dXJuIGRldmljZXMuZmlsdGVyKGRldmljZSA9PiBkZXZpY2Uua2luZC5pbmNsdWRlcygnaW5wdXQnKSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyBjYW1lcmFzLCBtaWNyb3Bob25lcywgYW5kIHNwZWFrZXJzIGFuZCBzdGFydHMgYSB2aWRlbyBzdHJlYW1cbiAgICogd2l0aCBzdXBwbGllZCBvcHRpb25zLlxuICAgKiovXG4gIHN0YXJ0KCkge1xuICAgIExvZ2dlci5kZWJ1ZygnRGV2aWNlTWFuYWdlcjo6c3RhcnQnKTtcbiAgICB0aGlzLndhdGNoRm9yTmV3RGV2aWNlcygpO1xuXG4gICAgcmV0dXJuIERldmljZU1hbmFnZXIuZmV0Y2hEZXZpY2VzKClcbiAgICAgIC50aGVuKGRldmljZXMgPT4ge1xuICAgICAgICB0aGlzLmNhbWVyYXMgPSBkZXZpY2VzLmNhbWVyYXM7XG4gICAgICAgIHRoaXMubWljcm9waG9uZXMgPSBkZXZpY2VzLm1pY3JvcGhvbmVzO1xuICAgICAgICB0aGlzLnNwZWFrZXJzID0gZGV2aWNlcy5zcGVha2VycztcbiAgICAgICAgdGhpcy5vcHRpb25zLmF1ZGlvID1cbiAgICAgICAgICB0aGlzLm1pY3JvcGhvbmVzLmxlbmd0aCA+IDAgPyB0aGlzLm9wdGlvbnMuYXVkaW8gOiBmYWxzZTtcbiAgICAgICAgdGhpcy5vcHRpb25zLnZpZGVvID1cbiAgICAgICAgICB0aGlzLmNhbWVyYXMubGVuZ3RoID4gMCA/IHRoaXMub3B0aW9ucy52aWRlbyA6IGZhbHNlO1xuICAgICAgICB0aGlzLm9wdGlvbnMuZWNvID0gdGhpcy5vcHRpb25zLmVjbztcbiAgICAgICAgdGhpcy5ub3RpZnkoZGV2aWNlcyk7XG4gICAgICAgIHJldHVybiBkZXZpY2VzO1xuICAgICAgfSlcbiAgICAgIC50aGVuKCgpID0+IERldmljZU1hbmFnZXIuZ2V0TWVkaWFDb25zdHJhaW50cyh0aGlzLm9wdGlvbnMpKVxuICAgICAgLnRoZW4oY29uc3RyYWludHMgPT4ge1xuICAgICAgICB0aGlzLmNvbnN0cmFpbnRzID0gY29uc3RyYWludHM7XG4gICAgICAgIHJldHVybiBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYShjb25zdHJhaW50cyk7XG4gICAgICB9KVxuICAgICAgLnRoZW4odGhpcy5zZXRTdHJlYW0pXG4gICAgICAudGhlbih0aGlzLmFkanVzdENvbnN0cmFpbnRzKVxuICAgICAgLmNhdGNoKHRoaXMuaGFuZGxlRXJyb3IpO1xuICB9XG5cbiAgc3RvcFN0cmVhbSgpIHtcbiAgICBMb2dnZXIuZGVidWcoJ0RldmljZU1hbmFnZXI6OnN0b3BTdHJlYW0nKTtcblxuICAgIGlmICghdGhpcy5zdHJlYW0pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBNZWRpYVN0cmVhbUhhbmRsZXIuc3RvcCh0aGlzLnN0cmVhbSk7XG4gICAgdGhpcy5zdHJlYW0gPSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0b3AgdGhlIG1lZGlhIHN0cmVhbS4gU2luY2Ugd2UgY2FsbCBnZXRVc2VyTWVkaWEgb24gZ290RGV2aWNlcyB3ZSBkb24ndFxuICAgKiBoYXZlIGEgc3RyZWFtIGluIHRoYXQgY2FzZS5cbiAgICoqL1xuICBzdG9wKCkge1xuICAgIExvZ2dlci5kZWJ1ZygnRGV2aWNlTWFuYWdlcjo6c3RvcCcpO1xuXG4gICAgaWYgKHRoaXMuZGV2aWNlV2F0Y2hlckludGVydmFsKSB7XG4gICAgICBjbGVhckludGVydmFsKHRoaXMuZGV2aWNlV2F0Y2hlckludGVydmFsKTtcbiAgICB9XG4gICAgdGhpcy5zdG9wU3RyZWFtKCk7XG4gIH1cblxuICB0ZXJtaW5hdGUoKSB7XG4gICAgTG9nZ2VyLmRlYnVnKCdEZXZpY2VNYW5hZ2VyOjp0ZXJtaW5hdGUnKTtcbiAgICB0aGlzLnRlcm1pbmF0aW9uSW5Qcm9ncmVzcyA9IHRydWU7XG4gICAgdGhpcy5zdG9wKCk7XG4gIH1cblxuICAvKipcbiAgICogQWRkIG5ldyBkZXZpY2VzLlxuICAgKiovXG4gIHdhdGNoRm9yTmV3RGV2aWNlcygpIHtcbiAgICBpZiAodGhpcy5kZXZpY2VXYXRjaGVySW50ZXJ2YWwpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5kZXZpY2VXYXRjaGVySW50ZXJ2YWwpO1xuICAgIH1cbiAgICB0aGlzLmRldmljZVdhdGNoZXJJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgIERldmljZU1hbmFnZXIuZmV0Y2hEZXZpY2VzKClcbiAgICAgICAgLnRoZW4oZGV2aWNlcyA9PiB7XG4gICAgICAgICAgdGhpcy5jYW1lcmFzID0gZGV2aWNlcy5jYW1lcmFzO1xuICAgICAgICAgIHRoaXMuc3BlYWtlcnMgPSBkZXZpY2VzLnNwZWFrZXJzO1xuICAgICAgICAgIHRoaXMubWljcm9waG9uZXMgPSBkZXZpY2VzLm1pY3JvcGhvbmVzO1xuICAgICAgICAgIHRoaXMubm90aWZ5KGRldmljZXMpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2godGhpcy5oYW5kbGVFcnJvcik7XG4gICAgfSwgNTAwMCk7XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXIgbGlzdGVuZXJzIGZvciBjaGFuZ2VzIG9uIGRldmljZXMuXG4gICAqKi9cbiAgb25DaGFuZ2UoY2FsbGJhY2spIHtcbiAgICB0aGlzLmxpc3RlbmVycy5wdXNoKGNhbGxiYWNrKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgYSBsaXN0ZW5lci5cbiAgICoqL1xuICByZW1vdmVMaXN0ZW5lcihjYWxsYmFjaykge1xuICAgIHRoaXMubGlzdGVuZXJzID0gdGhpcy5saXN0ZW5lcnMuZmlsdGVyKGxpc3RlbmVyID0+IGxpc3RlbmVyICE9PSBjYWxsYmFjayk7XG4gIH1cblxuICAvKipcbiAgICogV3JhcHBlciBhcm91bmQgbWVkaWFEZXZpY2VzIGdldFVzZXJNZWRpYS4gRW5zdXJlcyBhIHJ1bm5pbmcgc3RyZWFtIGlzXG4gICAqIHN0b3BwZWQgYW5kIGEgbmV3IG9uZSBzdGFydGVkIHdpdGggbmV3bHkgZGVmaW5lZCBjb25zdHJhaW50cy5cbiAgICoqL1xuICB1cGRhdGUoY29uc3RyYWludHMpIHtcbiAgICB0aGlzLmNvbnN0cmFpbnRzID0gY29uc3RyYWludHMgfHwgdGhpcy5jb25zdHJhaW50cztcbiAgICB0aGlzLnN0b3AoKTtcblxuICAgIExvZ2dlci5kZWJ1ZygnRGV2aWNlTWFuYWdlcjo6dXBkYXRlJywgdGhpcy5jb25zdHJhaW50cyk7XG4gICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlc1xuICAgICAgLmdldFVzZXJNZWRpYSh0aGlzLmNvbnN0cmFpbnRzKVxuICAgICAgLnRoZW4odGhpcy5zZXRTdHJlYW0pXG4gICAgICAuY2F0Y2godGhpcy5oYW5kbGVFcnJvcik7XG4gIH1cblxuICAvKipcbiAgICogU2ltaWxhciB0byB1cGRhdGUgYnV0IGluc3RlYWQgb2YgZGlyZWN0bHkgc3VwcGx5aW5nIGNvbnN0cmFpbnRzLFxuICAgKiB1cGRhdGUgd2l0aCBvcHRpb25zLlxuICAgKiovXG4gIHVwZGF0ZVdpdGhPcHRpb25zKG9wdGlvbnMpIHtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zIHx8IHRoaXMub3B0aW9ucztcbiAgICB0aGlzLnN0b3AoKTtcblxuICAgIExvZ2dlci5kZWJ1ZygnRGV2aWNlTWFuYWdlcjo6dXBkYXRlV2l0aE9wdGlvbnMnLCB0aGlzLm9wdGlvbnMpO1xuICAgIHRoaXMud2F0Y2hGb3JOZXdEZXZpY2VzKCk7XG5cbiAgICByZXR1cm4gRGV2aWNlTWFuYWdlci5nZXRNZWRpYUNvbnN0cmFpbnRzKHRoaXMub3B0aW9ucylcbiAgICAgIC50aGVuKGNvbnN0cmFpbnRzID0+IHtcbiAgICAgICAgdGhpcy5jb25zdHJhaW50cyA9IGNvbnN0cmFpbnRzO1xuICAgICAgICByZXR1cm4gbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoe1xuICAgICAgICAgIHZpZGVvOiB0aGlzLmNvbnN0cmFpbnRzLnZpZGVvLFxuICAgICAgICAgIGF1ZGlvOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgfSlcbiAgICAgIC50aGVuKHRoaXMuYWRqdXN0QXVkaW9UcmFjaylcbiAgICAgIC50aGVuKHRoaXMuc2V0U3RyZWFtKVxuICAgICAgLmNhdGNoKHRoaXMuaGFuZGxlRXJyb3IpO1xuICB9XG5cbiAgYWRqdXN0QXVkaW9UcmFjayhzdHJlYW0pIHtcbiAgICBpZiAoc3RyZWFtLmdldEF1ZGlvVHJhY2tzKCkubGVuZ3RoID09PSAxKSB7XG4gICAgICBzdHJlYW0uZ2V0QXVkaW9UcmFja3MoKVswXS5lbmFibGVkID0gdGhpcy5vcHRpb25zLmF1ZGlvO1xuICAgIH1cbiAgICByZXR1cm4gc3RyZWFtO1xuICB9XG5cbiAgc3RvcmVDb25zdHJhaW50cygpIHtcbiAgICBMb2dnZXIuZGVidWcoJ0RldmljZU1hbmFnZXI6OnN0b3JlQ29uc3RyYWludHMnLCB0aGlzLmNvbnN0cmFpbnRzKTtcbiAgICBMb2NhbFN0b3JhZ2Uuc3RvcmUoJ21lZGlhQ29uc3RyYWludHMnLCB0aGlzLmNvbnN0cmFpbnRzKTtcbiAgICBMb2NhbFN0b3JhZ2Uuc3RvcmUoJ3NpbmtJZCcsIHRoaXMuc2lua0lkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgYWN0aXZlIHN0cmVhbS5cbiAgICpcbiAgICogTk9URTogVGhpcyBjYW4gYmUgY2FsbGVkIF9hZnRlcl8gd2UgaGF2ZSBhbHJlYWR5IHN0b3BwZWQuXG4gICAqKi9cbiAgc2V0U3RyZWFtKHN0cmVhbSkge1xuICAgIExvZ2dlci5kZWJ1ZygnRGV2aWNlTWFuYWdlcjo6c2V0U3RyZWFtJywgc3RyZWFtKTtcblxuICAgIHRoaXMuc3RyZWFtID0gc3RyZWFtO1xuICAgIGlmICh0aGlzLnRlcm1pbmF0aW9uSW5Qcm9ncmVzcykge1xuICAgICAgdGhpcy5zdG9wKCk7XG4gICAgfVxuXG4gICAgdGhpcy5ub3RpZnkoe1xuICAgICAgc3RyZWFtOiB0aGlzLnN0cmVhbSxcbiAgICAgIGNvbnN0cmFpbnRzOiB0aGlzLmNvbnN0cmFpbnRzLFxuICAgICAgb3B0aW9uczogdGhpcy5vcHRpb25zXG4gICAgfSk7XG4gICAgdGhpcy52ZXJpZnlTdHJlYW0oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJpZnkgdGhlIHN0cmVhbSBpcyBzZXQgdXAuXG4gICAqKi9cbiAgdmVyaWZ5U3RyZWFtKCkge1xuICAgIExvZ2dlci5kZWJ1ZygnRGV2aWNlTWFuYWdlcjo6dmVyaWZ5U3RyZWFtIGNvbnN0cmFpbnRzOicsIHRoaXMuY29uc3RyYWludHMpO1xuICAgIGlmIChcbiAgICAgIHRoaXMuY29uc3RyYWludHMudmlkZW8gJiZcbiAgICAgIHRoaXMuc3RyZWFtICYmXG4gICAgICB0aGlzLnN0cmVhbS5nZXRWaWRlb1RyYWNrcygpLmxlbmd0aCA9PT0gMFxuICAgICkge1xuICAgICAgdGhpcy5oYW5kbGVFcnJvcih7IG5hbWU6ICdFeWVzb25DYW1lcmFFcnJvcicgfSk7XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgdGhpcy5jb25zdHJhaW50cy5hdWRpbyAmJlxuICAgICAgdGhpcy5zdHJlYW0gJiZcbiAgICAgIHRoaXMuc3RyZWFtLmdldEF1ZGlvVHJhY2tzKCkubGVuZ3RoID09PSAwXG4gICAgKSB7XG4gICAgICB0aGlzLmhhbmRsZUVycm9yKHsgbmFtZTogJ0V5ZXNvbk1pY3JvcGhvbmVFcnJvcicgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNldCB2aWRlbyBpbnB1dCBzZWxlY3Rpb24uXG4gICAqKi9cbiAgc2V0VmlkZW9JbnB1dChkZXZpY2VJZCkge1xuICAgIGxldCB2aWRlb0NvbnN0cmFpbnRzID0ge307XG4gICAgT2JqZWN0LmFzc2lnbih2aWRlb0NvbnN0cmFpbnRzLFxuICAgICAgdGhpcy5jb25zdHJhaW50cy52aWRlbyxcbiAgICAgIHsgZGV2aWNlSWQ6IHsgZXhhY3Q6IGRldmljZUlkIH0gfVxuICAgICk7XG4gICAgdGhpcy5jb25zdHJhaW50cy52aWRlbyA9IHZpZGVvQ29uc3RyYWludHM7XG4gICAgdGhpcy51cGRhdGUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgYXVkaW8gaW5wdXQgc2VsZWN0aW9uLlxuICAgKiovXG4gIHNldEF1ZGlvSW5wdXQoZGV2aWNlSWQpIHtcbiAgICBsZXQgYXVkaW9Db25zdHJhaW50cyA9IHt9O1xuICAgIE9iamVjdC5hc3NpZ24oYXVkaW9Db25zdHJhaW50cywgdGhpcy5jb25zdHJhaW50cy5hdWRpbyxcbiAgICAgIHsgZGV2aWNlSWQ6IHsgZXhhY3Q6IGRldmljZUlkIH0gfVxuICAgICk7XG4gICAgdGhpcy5jb25zdHJhaW50cy5hdWRpbyA9IGF1ZGlvQ29uc3RyYWludHM7XG4gICAgdGhpcy51cGRhdGUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgYW5kIHN0b3JlIGF1ZGlvIG91dHB1dCBzZWxlY3Rpb24uXG4gICAqKi9cbiAgc2V0QXVkaW9PdXRwdXQoc2lua0lkKSB7XG4gICAgdGhpcy5zaW5rSWQgPSBzaW5rSWQ7XG4gICAgTG9jYWxTdG9yYWdlLnN0b3JlKCdzaW5rSWQnLCB0aGlzLnNpbmtJZCk7XG4gICAgdGhpcy5ub3RpZnkoeyBzaW5rSWQ6IHRoaXMuc2lua0lkIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFNpbmNlIGEgdXNlciBjYW4gY2hvb3NlIGEgY2FtZXJhIGluIHRoZSBGRiBnVU0gcHJvbXB0LCB3ZSBjYW4gcnVuIGludG8gYVxuICAgKiBzaXR1YXRpb24gd2hlcmUgdGhlIHVzZXIgc2VsZWN0cyBjYW1lcmEgMiBidXQgd2UgZG9uJ3QgcmVtZW1iZXIgdGhhdFxuICAgKiBjaG9pY2UsIHNpbmNlIHRoZXkgZGlkbid0IHVzZSBvdXIgc2VsZWN0IFVJLiAgQXMgYSB1c2VyIHRoYXQncyBxdWl0ZVxuICAgKiBmcnVzdHJhdGluZyBzaW5jZSBpdCBzZWVtcyBsaWtlIHRoZSBwcmVmZXJyZWQgc2VsZWN0aW9uIGlzIG5vdCByZW1lbWJlcmVkXG4gICAqIGF0IGFsbCBhbmQgd2UgcHJlc2VsZWN0IGNhbWVyYSAxIGluIHRoZSBuZXh0IGdVTSByZXF1ZXN0LlxuICAgKlxuICAgKiBUbyBmdXJ0aGVyIGNvbXBsaWNhdGUgdGhpbmdzOiBGRiBvbmx5IGhhcyBkZXZpY2UgbGFiZWxzIGFmdGVyIGEgc3RyZWFtIGhhc1xuICAgKiBiZWVuIGFjcXVpcmVkLiBTbyBpbiBvcmRlciB0byBtYXRjaCB0aGUgYWNxdWlyZWQgc3RyZWFtL3ZpZGVvVHJhY2sgdG8gdGhlXG4gICAqIGNhbWVyYSBpbiB1c2UsIHdlIGhhdmUgdG8gd2FpdCBmb3IgZ1VNIHRvIGNvbXBsZXRlIGFuZCB0aGVuIHF1ZXJ5IGRldmljZXNcbiAgICogYWdhaW4uXG4gICAqKi9cbiAgYWRqdXN0Q29uc3RyYWludHMoKSB7XG4gICAgaWYgKCFGZWF0dXJlRGV0ZWN0b3Iub2ZmZXJzT3duRGV2aWNlU2VsZWN0aW9uKCkgfHwgIXRoaXMuc3RyZWFtKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5lbnVtZXJhdGVEZXZpY2VzKCkudGhlbihkZXZpY2VzID0+IHtcbiAgICAgIGNvbnN0IGFDb25zdHJhaW50ID0gdGhpcy5maW5kVHJhY2tDb25zdHJhaW50KFxuICAgICAgICB0aGlzLnN0cmVhbS5nZXRBdWRpb1RyYWNrcygpLFxuICAgICAgICBkZXZpY2VzXG4gICAgICApO1xuICAgICAgY29uc3QgdkNvbnN0cmFpbnQgPSB0aGlzLmZpbmRUcmFja0NvbnN0cmFpbnQoXG4gICAgICAgIHRoaXMuc3RyZWFtLmdldFZpZGVvVHJhY2tzKCksXG4gICAgICAgIGRldmljZXNcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IGF1ZGlvID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5jb25zdHJhaW50cy5hdWRpbywgYUNvbnN0cmFpbnQpO1xuICAgICAgY29uc3QgdmlkZW8gPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmNvbnN0cmFpbnRzLnZpZGVvLCB2Q29uc3RyYWludCk7XG5cbiAgICAgIHRoaXMuY29uc3RyYWludHMgPSB7IGF1ZGlvOiBhdWRpbywgdmlkZW86IHZpZGVvIH07XG5cbiAgICAgIExvZ2dlci5kZWJ1ZygnRGV2aWNlTWFuYWdlcjo6YWRqdXN0Q29uc3RyYWludHM6ICcsIHRoaXMuY29uc3RyYWludHMpO1xuICAgICAgdGhpcy5ub3RpZnkoeyBjb25zdHJhaW50czogdGhpcy5jb25zdHJhaW50cyB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGZpbmRUcmFja0NvbnN0cmFpbnQodHJhY2tzLCBkZXZpY2VzKSB7XG4gICAgaWYgKHRyYWNrcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiB7fTtcbiAgICB9XG4gICAgY29uc3QgZGV2aWNlID0gZGV2aWNlcy5maW5kKGRldiA9PiBkZXYubGFiZWwgPT09IHRyYWNrc1swXS5sYWJlbCk7XG4gICAgcmV0dXJuIGRldmljZSA/IHsgZGV2aWNlSWQ6IHsgZXhhY3Q6IGRldmljZS5kZXZpY2VJZCB9IH0gOiB7fTtcbiAgfVxuXG4gIC8qKlxuICAgKiBOb3RpZnkgYWJvdXQgZXJyb3IuXG4gICAqKi9cbiAgaGFuZGxlRXJyb3IoZXJyb3IpIHtcbiAgICBMb2dnZXIuZGVidWcoJ0RldmljZU1hbmFnZXI6OmhhbmRsZUVycm9yJywgZXJyb3IpO1xuICAgIHRoaXMubm90aWZ5KHsgZXJyb3I6IGVycm9yLCBjb25zdHJhaW50czogdGhpcy5jb25zdHJhaW50cyB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBOb3RpZnkgYm91bmQgbGlzdGVuZXJzIGFib3V0IGNoYW5nZXMuXG4gICAqKi9cbiAgbm90aWZ5KHN0YXRlKSB7XG4gICAgdGhpcy5saXN0ZW5lcnMuZm9yRWFjaChsaXN0ZW5lciA9PiBsaXN0ZW5lcihzdGF0ZSkpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IERldmljZU1hbmFnZXI7XG4vKiBlc2xpbnQtZW5hYmxlIG1heC1saW5lcyAqL1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNyYy9EZXZpY2VNYW5hZ2VyLmpzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7Ozs7Ozs7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7QUF1SEE7Ozs7QUFJQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFJQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQUdBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQUdBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBOzs7Ozs7O0FBSUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFJQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUFHQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQUdBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7QUFZQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQUdBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7OztBQTNZQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFIQTtBQUtBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBOzs7Ozs7QUE4UkE7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///12\n")},function(module,exports,__webpack_require__){eval("var global = __webpack_require__(/*! ./_global */ 6);\nvar core = __webpack_require__(/*! ./_core */ 7);\nvar hide = __webpack_require__(/*! ./_hide */ 8);\nvar redefine = __webpack_require__(/*! ./_redefine */ 36);\nvar ctx = __webpack_require__(/*! ./_ctx */ 38);\nvar PROTOTYPE = 'prototype';\n\nvar $export = function (type, name, source) {\n  var IS_FORCED = type & $export.F;\n  var IS_GLOBAL = type & $export.G;\n  var IS_STATIC = type & $export.S;\n  var IS_PROTO = type & $export.P;\n  var IS_BIND = type & $export.B;\n  var target = IS_GLOBAL ? global : IS_STATIC ? global[name] || (global[name] = {}) : (global[name] || {})[PROTOTYPE];\n  var exports = IS_GLOBAL ? core : core[name] || (core[name] = {});\n  var expProto = exports[PROTOTYPE] || (exports[PROTOTYPE] = {});\n  var key, own, out, exp;\n  if (IS_GLOBAL) source = name;\n  for (key in source) {\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    // export native or passed\n    out = (own ? target : source)[key];\n    // bind timers to global for call from export context\n    exp = IS_BIND && own ? ctx(out, global) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // extend global\n    if (target) redefine(target, key, out, type & $export.U);\n    // export\n    if (exports[key] != out) hide(exports, key, exp);\n    if (IS_PROTO && expProto[key] != out) expProto[key] = out;\n  }\n};\nglobal.core = core;\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library`\nmodule.exports = $export;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL19leHBvcnQuanM/YjI3ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZ2xvYmFsID0gcmVxdWlyZSgnLi9fZ2xvYmFsJyk7XG52YXIgY29yZSA9IHJlcXVpcmUoJy4vX2NvcmUnKTtcbnZhciBoaWRlID0gcmVxdWlyZSgnLi9faGlkZScpO1xudmFyIHJlZGVmaW5lID0gcmVxdWlyZSgnLi9fcmVkZWZpbmUnKTtcbnZhciBjdHggPSByZXF1aXJlKCcuL19jdHgnKTtcbnZhciBQUk9UT1RZUEUgPSAncHJvdG90eXBlJztcblxudmFyICRleHBvcnQgPSBmdW5jdGlvbiAodHlwZSwgbmFtZSwgc291cmNlKSB7XG4gIHZhciBJU19GT1JDRUQgPSB0eXBlICYgJGV4cG9ydC5GO1xuICB2YXIgSVNfR0xPQkFMID0gdHlwZSAmICRleHBvcnQuRztcbiAgdmFyIElTX1NUQVRJQyA9IHR5cGUgJiAkZXhwb3J0LlM7XG4gIHZhciBJU19QUk9UTyA9IHR5cGUgJiAkZXhwb3J0LlA7XG4gIHZhciBJU19CSU5EID0gdHlwZSAmICRleHBvcnQuQjtcbiAgdmFyIHRhcmdldCA9IElTX0dMT0JBTCA/IGdsb2JhbCA6IElTX1NUQVRJQyA/IGdsb2JhbFtuYW1lXSB8fCAoZ2xvYmFsW25hbWVdID0ge30pIDogKGdsb2JhbFtuYW1lXSB8fCB7fSlbUFJPVE9UWVBFXTtcbiAgdmFyIGV4cG9ydHMgPSBJU19HTE9CQUwgPyBjb3JlIDogY29yZVtuYW1lXSB8fCAoY29yZVtuYW1lXSA9IHt9KTtcbiAgdmFyIGV4cFByb3RvID0gZXhwb3J0c1tQUk9UT1RZUEVdIHx8IChleHBvcnRzW1BST1RPVFlQRV0gPSB7fSk7XG4gIHZhciBrZXksIG93biwgb3V0LCBleHA7XG4gIGlmIChJU19HTE9CQUwpIHNvdXJjZSA9IG5hbWU7XG4gIGZvciAoa2V5IGluIHNvdXJjZSkge1xuICAgIC8vIGNvbnRhaW5zIGluIG5hdGl2ZVxuICAgIG93biA9ICFJU19GT1JDRUQgJiYgdGFyZ2V0ICYmIHRhcmdldFtrZXldICE9PSB1bmRlZmluZWQ7XG4gICAgLy8gZXhwb3J0IG5hdGl2ZSBvciBwYXNzZWRcbiAgICBvdXQgPSAob3duID8gdGFyZ2V0IDogc291cmNlKVtrZXldO1xuICAgIC8vIGJpbmQgdGltZXJzIHRvIGdsb2JhbCBmb3IgY2FsbCBmcm9tIGV4cG9ydCBjb250ZXh0XG4gICAgZXhwID0gSVNfQklORCAmJiBvd24gPyBjdHgob3V0LCBnbG9iYWwpIDogSVNfUFJPVE8gJiYgdHlwZW9mIG91dCA9PSAnZnVuY3Rpb24nID8gY3R4KEZ1bmN0aW9uLmNhbGwsIG91dCkgOiBvdXQ7XG4gICAgLy8gZXh0ZW5kIGdsb2JhbFxuICAgIGlmICh0YXJnZXQpIHJlZGVmaW5lKHRhcmdldCwga2V5LCBvdXQsIHR5cGUgJiAkZXhwb3J0LlUpO1xuICAgIC8vIGV4cG9ydFxuICAgIGlmIChleHBvcnRzW2tleV0gIT0gb3V0KSBoaWRlKGV4cG9ydHMsIGtleSwgZXhwKTtcbiAgICBpZiAoSVNfUFJPVE8gJiYgZXhwUHJvdG9ba2V5XSAhPSBvdXQpIGV4cFByb3RvW2tleV0gPSBvdXQ7XG4gIH1cbn07XG5nbG9iYWwuY29yZSA9IGNvcmU7XG4vLyB0eXBlIGJpdG1hcFxuJGV4cG9ydC5GID0gMTsgICAvLyBmb3JjZWRcbiRleHBvcnQuRyA9IDI7ICAgLy8gZ2xvYmFsXG4kZXhwb3J0LlMgPSA0OyAgIC8vIHN0YXRpY1xuJGV4cG9ydC5QID0gODsgICAvLyBwcm90b1xuJGV4cG9ydC5CID0gMTY7ICAvLyBiaW5kXG4kZXhwb3J0LlcgPSAzMjsgIC8vIHdyYXBcbiRleHBvcnQuVSA9IDY0OyAgLy8gc2FmZVxuJGV4cG9ydC5SID0gMTI4OyAvLyByZWFsIHByb3RvIG1ldGhvZCBmb3IgYGxpYnJhcnlgXG5tb2R1bGUuZXhwb3J0cyA9ICRleHBvcnQ7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jb3JlLWpzL21vZHVsZXMvX2V4cG9ydC5qc1xuLy8gbW9kdWxlIGlkID0gMTNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///13\n")},function(module,exports){eval("var id = 0;\nvar px = Math.random();\nmodule.exports = function (key) {\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL191aWQuanM/YjlmNyJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgaWQgPSAwO1xudmFyIHB4ID0gTWF0aC5yYW5kb20oKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGtleSkge1xuICByZXR1cm4gJ1N5bWJvbCgnLmNvbmNhdChrZXkgPT09IHVuZGVmaW5lZCA/ICcnIDoga2V5LCAnKV8nLCAoKytpZCArIHB4KS50b1N0cmluZygzNikpO1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9fdWlkLmpzXG4vLyBtb2R1bGUgaWQgPSAxNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///14\n")},function(module,exports){eval("module.exports = function (it) {\n  if (typeof it != 'function') throw TypeError(it + ' is not a function!');\n  return it;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTUuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL19hLWZ1bmN0aW9uLmpzP2FjOGEiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaXQpIHtcbiAgaWYgKHR5cGVvZiBpdCAhPSAnZnVuY3Rpb24nKSB0aHJvdyBUeXBlRXJyb3IoaXQgKyAnIGlzIG5vdCBhIGZ1bmN0aW9uIScpO1xuICByZXR1cm4gaXQ7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL19hLWZ1bmN0aW9uLmpzXG4vLyBtb2R1bGUgaWQgPSAxNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///15\n")},function(module,exports,__webpack_require__){eval("// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = __webpack_require__(/*! ./_cof */ 41);\n// eslint-disable-next-line no-prototype-builtins\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function (it) {\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL19pb2JqZWN0LmpzPzg3NDciXSwic291cmNlc0NvbnRlbnQiOlsiLy8gZmFsbGJhY2sgZm9yIG5vbi1hcnJheS1saWtlIEVTMyBhbmQgbm9uLWVudW1lcmFibGUgb2xkIFY4IHN0cmluZ3NcbnZhciBjb2YgPSByZXF1aXJlKCcuL19jb2YnKTtcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wcm90b3R5cGUtYnVpbHRpbnNcbm1vZHVsZS5leHBvcnRzID0gT2JqZWN0KCd6JykucHJvcGVydHlJc0VudW1lcmFibGUoMCkgPyBPYmplY3QgOiBmdW5jdGlvbiAoaXQpIHtcbiAgcmV0dXJuIGNvZihpdCkgPT0gJ1N0cmluZycgPyBpdC5zcGxpdCgnJykgOiBPYmplY3QoaXQpO1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9faW9iamVjdC5qc1xuLy8gbW9kdWxlIGlkID0gMTZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///16\n")},function(module,exports){eval('// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError("Can\'t call method on  " + it);\n  return it;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTcuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL19kZWZpbmVkLmpzPzRjMWUiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gNy4yLjEgUmVxdWlyZU9iamVjdENvZXJjaWJsZShhcmd1bWVudClcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0KSB7XG4gIGlmIChpdCA9PSB1bmRlZmluZWQpIHRocm93IFR5cGVFcnJvcihcIkNhbid0IGNhbGwgbWV0aG9kIG9uICBcIiArIGl0KTtcbiAgcmV0dXJuIGl0O1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9fZGVmaW5lZC5qc1xuLy8gbW9kdWxlIGlkID0gMTdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///17\n')},function(module,exports,__webpack_require__){eval("// 7.1.15 ToLength\nvar toInteger = __webpack_require__(/*! ./_to-integer */ 19);\nvar min = Math.min;\nmodule.exports = function (it) {\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTguanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL190by1sZW5ndGguanM/YWIwMSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyA3LjEuMTUgVG9MZW5ndGhcbnZhciB0b0ludGVnZXIgPSByZXF1aXJlKCcuL190by1pbnRlZ2VyJyk7XG52YXIgbWluID0gTWF0aC5taW47XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdCkge1xuICByZXR1cm4gaXQgPiAwID8gbWluKHRvSW50ZWdlcihpdCksIDB4MWZmZmZmZmZmZmZmZmYpIDogMDsgLy8gcG93KDIsIDUzKSAtIDEgPT0gOTAwNzE5OTI1NDc0MDk5MVxufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9fdG8tbGVuZ3RoLmpzXG4vLyBtb2R1bGUgaWQgPSAxOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///18\n")},function(module,exports){eval("// 7.1.4 ToInteger\nvar ceil = Math.ceil;\nvar floor = Math.floor;\nmodule.exports = function (it) {\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTkuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL190by1pbnRlZ2VyLmpzPzBhMDQiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gNy4xLjQgVG9JbnRlZ2VyXG52YXIgY2VpbCA9IE1hdGguY2VpbDtcbnZhciBmbG9vciA9IE1hdGguZmxvb3I7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdCkge1xuICByZXR1cm4gaXNOYU4oaXQgPSAraXQpID8gMCA6IChpdCA+IDAgPyBmbG9vciA6IGNlaWwpKGl0KTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jb3JlLWpzL21vZHVsZXMvX3RvLWludGVnZXIuanNcbi8vIG1vZHVsZSBpZCA9IDE5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///19\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /* eslint-disable max-lines */\n\n\nvar _Logger = __webpack_require__(/*! ./Logger */ 0);\n\nvar _Logger2 = _interopRequireDefault(_Logger);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * eyeson Communications Api\n **/\nvar ComApi = function () {\n  function ComApi(uri, token) {\n    _classCallCheck(this, ComApi);\n\n    this.uri = uri;\n    this.token = token.replace(/\\W+/g, '');\n    this.cache = { users: [] };\n  }\n\n  _createClass(ComApi, [{\n    key: '_request',\n    value: function _request(path) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      return fetch(new Request(this.uri + path), options);\n    }\n\n    /**\n     * NOTE: slightly adjusted from:\n     * https://gist.github.com/ghinda/8442a57f22099bdb2e34\n     **/\n    /* eslint-disable */\n\n  }, {\n    key: '_objectToFormData',\n    value: function _objectToFormData(obj, form, namespace) {\n      var fd = form || new FormData();\n      var formKey = null;\n\n      for (var property in obj) {\n        if (!obj.hasOwnProperty(property)) {\n          return;\n        }\n        if (namespace) {\n          // adjusted, skip \"int props\" for layout api\n          var prop = isNaN(parseInt(property)) ? property : '';\n          formKey = namespace + '[' + prop + ']';\n        } else {\n          formKey = property;\n        }\n        // if the property is an object, but not a File, use recursivity.\n        if (_typeof(obj[property]) === 'object' && !(obj[property] instanceof File)) {\n          this._objectToFormData(obj[property], fd, property);\n        } else {\n          // if it's a string or a File object\n          fd.append(formKey, obj[property]);\n        }\n      }\n\n      return fd;\n    }\n    /* eslint-enable */\n\n  }, {\n    key: '_post',\n    value: function _post(path, data) {\n      return this._request(path, {\n        method: 'POST',\n        body: this._objectToFormData(data)\n      });\n    }\n  }, {\n    key: '_put',\n    value: function _put(path, data) {\n      var formData = new FormData();\n      for (var key in data) {\n        // eslint-disable-line guard-for-in\n        formData.append(key, data[key]);\n      }\n      return this._request(path, {\n        method: 'PUT',\n        body: formData\n      });\n    }\n  }, {\n    key: '_handleError',\n    value: function _handleError(error) {\n      _Logger2.default.error('ComApi::handleError', error);\n    }\n  }, {\n    key: '_jsonResponse',\n    value: function _jsonResponse(response) {\n      return new Promise(function (resolve, reject) {\n        if (!response.ok) {\n          _Logger2.default.warn('Could not fetch data from api.');\n          reject(response);\n        }\n\n        response.json().then(resolve).catch(reject);\n      });\n    }\n\n    /**\n     * Fetch room details including the user and credentials from com-api.\n     **/\n\n  }, {\n    key: 'getRoom',\n    value: function getRoom(callback) {\n      return this._request('/rooms/' + this.token).then(this._jsonResponse).then(callback).catch(function (error) {\n        return callback({ error: error });\n      });\n    }\n\n    /**\n     * Retrieve user information. Will use cache on multiple requests.\n     **/\n\n  }, {\n    key: 'getUser',\n    value: function getUser(userId, callback) {\n      var _this = this;\n\n      var user = this.cache.users.find(function (cachedUser) {\n        return cachedUser.id === userId;\n      });\n\n      if (user) {\n        callback(user);\n        return null;\n      }\n\n      return this._request('/rooms/' + this.token + '/users/' + userId).then(this._jsonResponse).then(function (apiUser) {\n        var users = _this.cache.users.filter(function (cachedUser) {\n          return cachedUser.id !== userId;\n        });\n        apiUser.apiId = apiUser.id;\n        apiUser.id = userId;\n        users.push(apiUser);\n        _this.cache.users = users;\n        callback(apiUser);\n      }).catch(this._handleError);\n    }\n\n    /**\n     * Get files from api.\n     **/\n\n  }, {\n    key: 'getFiles',\n    value: function getFiles(callback) {\n      return this._request('/rooms/' + this.token + '/files').then(this._jsonResponse).then(callback).catch(this._handleError);\n    }\n\n    /**\n     * Upload a file.\n     **/\n\n  }, {\n    key: 'uploadFile',\n    value: function uploadFile(file, callback) {\n      return this._post('/rooms/' + this.token + '/files', { file: file }).then(this._jsonResponse).then(callback).catch(this._handleError);\n    }\n\n    /**\n     * Delete a file.\n     **/\n\n  }, {\n    key: 'deleteFile',\n    value: function deleteFile(file) {\n      var path = file.links.self.replace(this.uri, '');\n      return this._request(path, { method: 'DELETE' }).catch(this._handleError);\n    }\n\n    /**\n     * Request a guest user from api.\n     **/\n\n  }, {\n    key: 'requestUser',\n    value: function requestUser(user, callback) {\n      return this._post('/guests/' + this.token, { name: user.name, email: user.email }).then(this._jsonResponse).then(callback).catch(function (error) {\n        return callback({ error: error });\n      });\n    }\n\n    /**\n     * Present some document in room.\n     **/\n\n  }, {\n    key: 'present',\n    value: function present(slide) {\n      return this._post('/rooms/' + this.token + '/presentation', { slide: slide }).catch(this._handleError);\n    }\n\n    /**\n     * Stop presenting.\n     **/\n\n  }, {\n    key: 'stopPresent',\n    value: function stopPresent() {\n      return this._request('/rooms/' + this.token + '/presentation', { method: 'DELETE' }).catch(this._handleError);\n    }\n\n    /**\n     * Broadcast to a platform.\n     **/\n    /* eslint-disable camelcase */\n\n  }, {\n    key: 'startBroadcast',\n    value: function startBroadcast(data, platform) {\n      return this._post('/rooms/' + this.token + '/broadcasts', {\n        platform: platform,\n        player_url: data.playerUrl || '',\n        stream_url: data.streamUrl\n      }).catch(this._handleError);\n    }\n    /* eslint-enable camelcase */\n\n    /**\n     * Broadcast to a platform.\n     **/\n    /* eslint-disable camelcase */\n\n  }, {\n    key: 'publishBroadcast',\n    value: function publishBroadcast(data, platform) {\n      return this._put('/rooms/' + this.token + '/broadcasts/' + platform, { player_url: data.playerUrl }).catch(this._handleError);\n    }\n    /* eslint-enable camelcase */\n\n    /**\n     * Stop a broadcast from a platform.\n     **/\n\n  }, {\n    key: 'stopBroadcast',\n    value: function stopBroadcast(platform) {\n      return this._request('/rooms/' + this.token + '/broadcasts/' + platform, { method: 'DELETE' }).catch(this._handleError);\n    }\n\n    /**\n     * Stop all broadcasts.\n     **/\n\n  }, {\n    key: 'stopAllBroadcasts',\n    value: function stopAllBroadcasts() {\n      return this._request('/rooms/' + this.token + '/broadcasts', { method: 'DELETE' }).catch(this._handleError);\n    }\n\n    /**\n     * Start a recording.\n     **/\n\n  }, {\n    key: 'startRecording',\n    value: function startRecording() {\n      return this._post('/rooms/' + this.token + '/recording', {}).catch(this._handleError);\n    }\n\n    /**\n     * Stop a recording\n     **/\n\n  }, {\n    key: 'stopRecording',\n    value: function stopRecording() {\n      return this._request('/rooms/' + this.token + '/recording', { method: 'DELETE' }).catch(this._handleError);\n    }\n\n    /**\n     * Set layout\n     * params object either as { layout: 'auto' } or { users: [ id1, id2 ...] }\n     **/\n\n  }, {\n    key: 'setLayout',\n    value: function setLayout(params) {\n      return this._post('/rooms/' + this.token + '/layout', params).catch(this._handleError);\n    }\n\n    /**\n     * Set layer\n     *\n     * params object: {\n     *   insert: {\n     *     icon:    user['avatar'],\n     *     title:   \"#{user['name']}:\",\n     *     content: question.truncate(280)\n     *   }\n     * }\n     *\n     **/\n\n  }, {\n    key: 'setLayer',\n    value: function setLayer(params) {\n      return this._post('/rooms/' + this.token + '/layers', params).catch(this._handleError);\n    }\n\n    /**\n     * Clear front most layer\n     **/\n\n  }, {\n    key: 'clearFrontLayer',\n    value: function clearFrontLayer() {\n      return this._request('/rooms/' + this.token + '/layers/1', { method: 'DELETE' }).catch(this._handleError);\n    }\n\n    /**\n     * Take a snapshot of the current podium\n     **/\n\n  }, {\n    key: 'takeSnapshot',\n    value: function takeSnapshot() {\n      return this._post('/rooms/' + this.token + '/snapshot');\n    }\n\n    /**\n     * Annotate current podium\n     **/\n\n  }, {\n    key: 'createAnnotation',\n    value: function createAnnotation(callback, onError) {\n      var _this2 = this;\n\n      return this._post('/rooms/' + this.token + '/annotation').then(this._jsonResponse).then(callback).catch(function (error) {\n        onError(error);\n        _this2._handleError(error);\n      });\n    }\n\n    /**\n     * Annotate current podium\n     **/\n\n  }, {\n    key: 'stopAnnotation',\n    value: function stopAnnotation() {\n      return this._request('/rooms/' + this.token + '/annotation', { method: 'DELETE' }).catch(this._handleError);\n    }\n\n    /**\n     * Get a list of available playbacks\n     **/\n\n  }, {\n    key: 'getPlaybacks',\n    value: function getPlaybacks(callback) {\n      return this._request('/rooms/' + this.token + '/playbacks').then(this._jsonResponse).then(callback).catch(this._handleError);\n    }\n\n    /**\n     * Start a playback\n     **/\n\n  }, {\n    key: 'startPlayback',\n    value: function startPlayback(playback) {\n      return this._post('/rooms/' + this.token + '/playbacks', { playback: playback });\n    }\n\n    /**\n     * Stop a playback identified by play_id\n     **/\n\n  }, {\n    key: 'stopPlayback',\n    value: function stopPlayback(playback) {\n      return this._request('/rooms/' + this.token + '/playbacks/' + playback.play_id, { method: 'DELETE' }).catch(this._handleError);\n    }\n  }]);\n\n  return ComApi;\n}();\n\nexports.default = ComApi;\n/* eslint-enable max-lines *///# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL0NvbUFwaS5qcz8wMTMzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIG1heC1saW5lcyAqL1xuaW1wb3J0IExvZ2dlciBmcm9tICcuL0xvZ2dlcic7XG5cbi8qKlxuICogZXllc29uIENvbW11bmljYXRpb25zIEFwaVxuICoqL1xuY2xhc3MgQ29tQXBpIHtcbiAgY29uc3RydWN0b3IodXJpLCB0b2tlbikge1xuICAgIHRoaXMudXJpICAgPSB1cmk7XG4gICAgdGhpcy50b2tlbiA9IHRva2VuLnJlcGxhY2UoL1xcVysvZywgJycpO1xuICAgIHRoaXMuY2FjaGUgPSB7IHVzZXJzOiBbXSB9O1xuICB9XG5cbiAgX3JlcXVlc3QocGF0aCwgb3B0aW9ucz17fSkge1xuICAgIHJldHVybiBmZXRjaChuZXcgUmVxdWVzdCh0aGlzLnVyaStwYXRoKSwgb3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICogTk9URTogc2xpZ2h0bHkgYWRqdXN0ZWQgZnJvbTpcbiAgICogaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vZ2hpbmRhLzg0NDJhNTdmMjIwOTliZGIyZTM0XG4gICAqKi9cbiAgIC8qIGVzbGludC1kaXNhYmxlICovXG4gIF9vYmplY3RUb0Zvcm1EYXRhKG9iaiwgZm9ybSwgbmFtZXNwYWNlKSB7XG4gICAgbGV0IGZkID0gZm9ybSB8fCBuZXcgRm9ybURhdGEoKTtcbiAgICBsZXQgZm9ybUtleSA9IG51bGw7XG5cbiAgICBmb3IgKGxldCBwcm9wZXJ0eSBpbiBvYmopIHtcbiAgICAgIGlmICghb2JqLmhhc093blByb3BlcnR5KHByb3BlcnR5KSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAobmFtZXNwYWNlKSB7XG4gICAgICAgIC8vIGFkanVzdGVkLCBza2lwIFwiaW50IHByb3BzXCIgZm9yIGxheW91dCBhcGlcbiAgICAgICAgbGV0IHByb3AgPSBpc05hTihwYXJzZUludChwcm9wZXJ0eSkpID8gcHJvcGVydHkgOiAnJztcbiAgICAgICAgZm9ybUtleSA9IG5hbWVzcGFjZSArICdbJyArIHByb3AgKyAnXSc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmb3JtS2V5ID0gcHJvcGVydHk7XG4gICAgICB9XG4gICAgICAvLyBpZiB0aGUgcHJvcGVydHkgaXMgYW4gb2JqZWN0LCBidXQgbm90IGEgRmlsZSwgdXNlIHJlY3Vyc2l2aXR5LlxuICAgICAgaWYgKHR5cGVvZiBvYmpbcHJvcGVydHldID09PSAnb2JqZWN0JyAmJiAhKG9ialtwcm9wZXJ0eV0gaW5zdGFuY2VvZiBGaWxlKSkge1xuICAgICAgICB0aGlzLl9vYmplY3RUb0Zvcm1EYXRhKG9ialtwcm9wZXJ0eV0sIGZkLCBwcm9wZXJ0eSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBpZiBpdCdzIGEgc3RyaW5nIG9yIGEgRmlsZSBvYmplY3RcbiAgICAgICAgZmQuYXBwZW5kKGZvcm1LZXksIG9ialtwcm9wZXJ0eV0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBmZDtcbiAgfVxuICAvKiBlc2xpbnQtZW5hYmxlICovXG5cbiAgX3Bvc3QocGF0aCwgZGF0YSkge1xuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KHBhdGgsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keTogICB0aGlzLl9vYmplY3RUb0Zvcm1EYXRhKGRhdGEpXG4gICAgfSk7XG4gIH1cblxuICBfcHV0KHBhdGgsIGRhdGEpIHtcbiAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgIGZvciAoY29uc3Qga2V5IGluIGRhdGEpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBndWFyZC1mb3ItaW5cbiAgICAgIGZvcm1EYXRhLmFwcGVuZChrZXksIGRhdGFba2V5XSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KHBhdGgsIHtcbiAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICBib2R5OiAgIGZvcm1EYXRhXG4gICAgfSk7XG4gIH1cblxuICBfaGFuZGxlRXJyb3IoZXJyb3IpIHtcbiAgICBMb2dnZXIuZXJyb3IoJ0NvbUFwaTo6aGFuZGxlRXJyb3InLCBlcnJvcik7XG4gIH1cblxuICBfanNvblJlc3BvbnNlKHJlc3BvbnNlKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgTG9nZ2VyLndhcm4oJ0NvdWxkIG5vdCBmZXRjaCBkYXRhIGZyb20gYXBpLicpO1xuICAgICAgICByZWplY3QocmVzcG9uc2UpO1xuICAgICAgfVxuXG4gICAgICByZXNwb25zZS5qc29uKClcbiAgICAgICAgLnRoZW4ocmVzb2x2ZSlcbiAgICAgICAgLmNhdGNoKHJlamVjdCk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRmV0Y2ggcm9vbSBkZXRhaWxzIGluY2x1ZGluZyB0aGUgdXNlciBhbmQgY3JlZGVudGlhbHMgZnJvbSBjb20tYXBpLlxuICAgKiovXG4gIGdldFJvb20oY2FsbGJhY2spIHtcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgL3Jvb21zLyR7dGhpcy50b2tlbn1gKVxuICAgICAgLnRoZW4odGhpcy5fanNvblJlc3BvbnNlKVxuICAgICAgLnRoZW4oY2FsbGJhY2spXG4gICAgICAuY2F0Y2goZXJyb3IgPT4gY2FsbGJhY2soeyBlcnJvcjogZXJyb3IgfSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlIHVzZXIgaW5mb3JtYXRpb24uIFdpbGwgdXNlIGNhY2hlIG9uIG11bHRpcGxlIHJlcXVlc3RzLlxuICAgKiovXG4gIGdldFVzZXIodXNlcklkLCBjYWxsYmFjaykge1xuICAgIGNvbnN0IHVzZXIgPSB0aGlzLmNhY2hlLnVzZXJzLmZpbmQoY2FjaGVkVXNlciA9PiBjYWNoZWRVc2VyLmlkID09PSB1c2VySWQpO1xuXG4gICAgaWYgKHVzZXIpIHtcbiAgICAgIGNhbGxiYWNrKHVzZXIpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYC9yb29tcy8ke3RoaXMudG9rZW59L3VzZXJzLyR7dXNlcklkfWApXG4gICAgICAudGhlbih0aGlzLl9qc29uUmVzcG9uc2UpXG4gICAgICAudGhlbihhcGlVc2VyID0+IHtcbiAgICAgICAgbGV0IHVzZXJzID0gdGhpcy5jYWNoZS51c2Vycy5maWx0ZXIoY2FjaGVkVXNlciA9PiBjYWNoZWRVc2VyLmlkICE9PSB1c2VySWQpO1xuICAgICAgICBhcGlVc2VyLmFwaUlkID0gYXBpVXNlci5pZDtcbiAgICAgICAgYXBpVXNlci5pZCA9IHVzZXJJZDtcbiAgICAgICAgdXNlcnMucHVzaChhcGlVc2VyKTtcbiAgICAgICAgdGhpcy5jYWNoZS51c2VycyA9IHVzZXJzO1xuICAgICAgICBjYWxsYmFjayhhcGlVc2VyKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2godGhpcy5faGFuZGxlRXJyb3IpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBmaWxlcyBmcm9tIGFwaS5cbiAgICoqL1xuICBnZXRGaWxlcyhjYWxsYmFjaykge1xuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAvcm9vbXMvJHt0aGlzLnRva2VufS9maWxlc2ApXG4gICAgICAudGhlbih0aGlzLl9qc29uUmVzcG9uc2UpXG4gICAgICAudGhlbihjYWxsYmFjaylcbiAgICAgIC5jYXRjaCh0aGlzLl9oYW5kbGVFcnJvcik7XG4gIH1cblxuICAvKipcbiAgICogVXBsb2FkIGEgZmlsZS5cbiAgICoqL1xuICB1cGxvYWRGaWxlKGZpbGUsIGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIHRoaXMuX3Bvc3QoYC9yb29tcy8ke3RoaXMudG9rZW59L2ZpbGVzYCwgeyBmaWxlIH0pXG4gICAgICAudGhlbih0aGlzLl9qc29uUmVzcG9uc2UpXG4gICAgICAudGhlbihjYWxsYmFjaylcbiAgICAgIC5jYXRjaCh0aGlzLl9oYW5kbGVFcnJvcik7XG5cbiAgfVxuXG4gIC8qKlxuICAgKiBEZWxldGUgYSBmaWxlLlxuICAgKiovXG4gIGRlbGV0ZUZpbGUoZmlsZSkge1xuICAgIGNvbnN0IHBhdGggPSBmaWxlLmxpbmtzLnNlbGYucmVwbGFjZSh0aGlzLnVyaSwgJycpO1xuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KHBhdGgsIHsgbWV0aG9kOiAnREVMRVRFJyB9KVxuICAgICAgLmNhdGNoKHRoaXMuX2hhbmRsZUVycm9yKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXF1ZXN0IGEgZ3Vlc3QgdXNlciBmcm9tIGFwaS5cbiAgICoqL1xuICByZXF1ZXN0VXNlcih1c2VyLCBjYWxsYmFjaykge1xuICAgIHJldHVybiB0aGlzXG4gICAgICAuX3Bvc3QoJy9ndWVzdHMvJyt0aGlzLnRva2VuLCB7IG5hbWU6IHVzZXIubmFtZSwgZW1haWw6IHVzZXIuZW1haWwgfSlcbiAgICAgIC50aGVuKHRoaXMuX2pzb25SZXNwb25zZSlcbiAgICAgIC50aGVuKGNhbGxiYWNrKVxuICAgICAgLmNhdGNoKGVycm9yID0+IGNhbGxiYWNrKHsgZXJyb3I6IGVycm9yIH0pKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQcmVzZW50IHNvbWUgZG9jdW1lbnQgaW4gcm9vbS5cbiAgICoqL1xuICBwcmVzZW50KHNsaWRlKSB7XG4gICAgcmV0dXJuIHRoaXMuX3Bvc3QoYC9yb29tcy8ke3RoaXMudG9rZW59L3ByZXNlbnRhdGlvbmAsIHsgc2xpZGUgfSlcbiAgICAuY2F0Y2godGhpcy5faGFuZGxlRXJyb3IpO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0b3AgcHJlc2VudGluZy5cbiAgICoqL1xuICBzdG9wUHJlc2VudCgpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgL3Jvb21zLyR7dGhpcy50b2tlbn0vcHJlc2VudGF0aW9uYCxcbiAgICAgIHsgbWV0aG9kOiAnREVMRVRFJyB9KVxuICAgICAgLmNhdGNoKHRoaXMuX2hhbmRsZUVycm9yKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBCcm9hZGNhc3QgdG8gYSBwbGF0Zm9ybS5cbiAgICoqL1xuICAvKiBlc2xpbnQtZGlzYWJsZSBjYW1lbGNhc2UgKi9cbiAgc3RhcnRCcm9hZGNhc3QoZGF0YSwgcGxhdGZvcm0pIHtcbiAgICByZXR1cm4gdGhpcy5fcG9zdChgL3Jvb21zLyR7dGhpcy50b2tlbn0vYnJvYWRjYXN0c2AsIHtcbiAgICAgIHBsYXRmb3JtOiAgICAgcGxhdGZvcm0sXG4gICAgICBwbGF5ZXJfdXJsOiAgIGRhdGEucGxheWVyVXJsIHx8ICcnLFxuICAgICAgc3RyZWFtX3VybDogICBkYXRhLnN0cmVhbVVybFxuICAgIH0pLmNhdGNoKHRoaXMuX2hhbmRsZUVycm9yKTtcbiAgfVxuICAvKiBlc2xpbnQtZW5hYmxlIGNhbWVsY2FzZSAqL1xuXG4gIC8qKlxuICAgKiBCcm9hZGNhc3QgdG8gYSBwbGF0Zm9ybS5cbiAgICoqL1xuICAvKiBlc2xpbnQtZGlzYWJsZSBjYW1lbGNhc2UgKi9cbiAgcHVibGlzaEJyb2FkY2FzdChkYXRhLCBwbGF0Zm9ybSkge1xuICAgIHJldHVybiB0aGlzLl9wdXQoYC9yb29tcy8ke3RoaXMudG9rZW59L2Jyb2FkY2FzdHMvJHtwbGF0Zm9ybX1gLFxuICAgICAgeyBwbGF5ZXJfdXJsOiBkYXRhLnBsYXllclVybCB9KVxuICAgICAgLmNhdGNoKHRoaXMuX2hhbmRsZUVycm9yKTtcbiAgfVxuICAvKiBlc2xpbnQtZW5hYmxlIGNhbWVsY2FzZSAqL1xuXG4gIC8qKlxuICAgKiBTdG9wIGEgYnJvYWRjYXN0IGZyb20gYSBwbGF0Zm9ybS5cbiAgICoqL1xuICBzdG9wQnJvYWRjYXN0KHBsYXRmb3JtKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYC9yb29tcy8ke3RoaXMudG9rZW59L2Jyb2FkY2FzdHMvJHtwbGF0Zm9ybX1gLFxuICAgICAgeyBtZXRob2Q6ICdERUxFVEUnIH0pXG4gICAgICAuY2F0Y2godGhpcy5faGFuZGxlRXJyb3IpO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0b3AgYWxsIGJyb2FkY2FzdHMuXG4gICAqKi9cbiAgc3RvcEFsbEJyb2FkY2FzdHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYC9yb29tcy8ke3RoaXMudG9rZW59L2Jyb2FkY2FzdHNgLFxuICAgICAgeyBtZXRob2Q6ICdERUxFVEUnIH0pXG4gICAgICAuY2F0Y2godGhpcy5faGFuZGxlRXJyb3IpO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0YXJ0IGEgcmVjb3JkaW5nLlxuICAgKiovXG4gIHN0YXJ0UmVjb3JkaW5nKCkge1xuICAgIHJldHVybiB0aGlzLl9wb3N0KGAvcm9vbXMvJHt0aGlzLnRva2VufS9yZWNvcmRpbmdgLCB7fSlcbiAgICAgIC5jYXRjaCh0aGlzLl9oYW5kbGVFcnJvcik7XG4gIH1cblxuICAvKipcbiAgICogU3RvcCBhIHJlY29yZGluZ1xuICAgKiovXG4gIHN0b3BSZWNvcmRpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYC9yb29tcy8ke3RoaXMudG9rZW59L3JlY29yZGluZ2AsXG4gICAgICB7IG1ldGhvZDogJ0RFTEVURScgfSlcbiAgICAgIC5jYXRjaCh0aGlzLl9oYW5kbGVFcnJvcik7XG4gIH1cblxuICAvKipcbiAgICogU2V0IGxheW91dFxuICAgKiBwYXJhbXMgb2JqZWN0IGVpdGhlciBhcyB7IGxheW91dDogJ2F1dG8nIH0gb3IgeyB1c2VyczogWyBpZDEsIGlkMiAuLi5dIH1cbiAgICoqL1xuICBzZXRMYXlvdXQocGFyYW1zKSB7XG4gICAgcmV0dXJuIHRoaXMuX3Bvc3QoYC9yb29tcy8ke3RoaXMudG9rZW59L2xheW91dGAsIHBhcmFtcylcbiAgICAgIC5jYXRjaCh0aGlzLl9oYW5kbGVFcnJvcik7XG4gIH1cblxuICAvKipcbiAgICogU2V0IGxheWVyXG4gICAqXG4gICAqIHBhcmFtcyBvYmplY3Q6IHtcbiAgICogICBpbnNlcnQ6IHtcbiAgICogICAgIGljb246ICAgIHVzZXJbJ2F2YXRhciddLFxuICAgKiAgICAgdGl0bGU6ICAgXCIje3VzZXJbJ25hbWUnXX06XCIsXG4gICAqICAgICBjb250ZW50OiBxdWVzdGlvbi50cnVuY2F0ZSgyODApXG4gICAqICAgfVxuICAgKiB9XG4gICAqXG4gICAqKi9cbiAgc2V0TGF5ZXIocGFyYW1zKSB7XG4gICAgcmV0dXJuIHRoaXMuX3Bvc3QoYC9yb29tcy8ke3RoaXMudG9rZW59L2xheWVyc2AsIHBhcmFtcylcbiAgICAgIC5jYXRjaCh0aGlzLl9oYW5kbGVFcnJvcik7XG4gIH1cblxuICAvKipcbiAgICogQ2xlYXIgZnJvbnQgbW9zdCBsYXllclxuICAgKiovXG4gIGNsZWFyRnJvbnRMYXllcigpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgL3Jvb21zLyR7dGhpcy50b2tlbn0vbGF5ZXJzLzFgLFxuICAgICAgeyBtZXRob2Q6ICdERUxFVEUnIH0pXG4gICAgICAuY2F0Y2godGhpcy5faGFuZGxlRXJyb3IpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRha2UgYSBzbmFwc2hvdCBvZiB0aGUgY3VycmVudCBwb2RpdW1cbiAgICoqL1xuICB0YWtlU25hcHNob3QoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3Bvc3QoYC9yb29tcy8ke3RoaXMudG9rZW59L3NuYXBzaG90YCk7XG4gIH1cblxuICAvKipcbiAgICogQW5ub3RhdGUgY3VycmVudCBwb2RpdW1cbiAgICoqL1xuICBjcmVhdGVBbm5vdGF0aW9uKGNhbGxiYWNrLCBvbkVycm9yKSB7XG4gICAgcmV0dXJuIHRoaXMuX3Bvc3QoYC9yb29tcy8ke3RoaXMudG9rZW59L2Fubm90YXRpb25gKVxuICAgICAgLnRoZW4odGhpcy5fanNvblJlc3BvbnNlKVxuICAgICAgLnRoZW4oY2FsbGJhY2spXG4gICAgICAuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICBvbkVycm9yKGVycm9yKTtcbiAgICAgICAgdGhpcy5faGFuZGxlRXJyb3IoZXJyb3IpO1xuICAgICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQW5ub3RhdGUgY3VycmVudCBwb2RpdW1cbiAgICoqL1xuICBzdG9wQW5ub3RhdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgL3Jvb21zLyR7dGhpcy50b2tlbn0vYW5ub3RhdGlvbmAsXG4gICAgICB7IG1ldGhvZDogJ0RFTEVURScgfSlcbiAgICAgIC5jYXRjaCh0aGlzLl9oYW5kbGVFcnJvcik7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGEgbGlzdCBvZiBhdmFpbGFibGUgcGxheWJhY2tzXG4gICAqKi9cbiAgZ2V0UGxheWJhY2tzKGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYC9yb29tcy8ke3RoaXMudG9rZW59L3BsYXliYWNrc2ApXG4gICAgICAudGhlbih0aGlzLl9qc29uUmVzcG9uc2UpXG4gICAgICAudGhlbihjYWxsYmFjaylcbiAgICAgIC5jYXRjaCh0aGlzLl9oYW5kbGVFcnJvcik7XG4gIH1cblxuICAvKipcbiAgICogU3RhcnQgYSBwbGF5YmFja1xuICAgKiovXG4gIHN0YXJ0UGxheWJhY2socGxheWJhY2spIHtcbiAgICByZXR1cm4gdGhpcy5fcG9zdChgL3Jvb21zLyR7dGhpcy50b2tlbn0vcGxheWJhY2tzYCwgeyBwbGF5YmFjazogcGxheWJhY2sgfSk7XG4gIH1cblxuICAvKipcbiAgICogU3RvcCBhIHBsYXliYWNrIGlkZW50aWZpZWQgYnkgcGxheV9pZFxuICAgKiovXG4gIHN0b3BQbGF5YmFjayhwbGF5YmFjaykge1xuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAvcm9vbXMvJHt0aGlzLnRva2VufS9wbGF5YmFja3MvJHtwbGF5YmFjay5wbGF5X2lkfWAsXG4gICAgICB7IG1ldGhvZDogJ0RFTEVURScgfSlcbiAgICAgIC5jYXRjaCh0aGlzLl9oYW5kbGVFcnJvcik7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ29tQXBpO1xuLyogZXNsaW50LWVuYWJsZSBtYXgtbGluZXMgKi9cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBzcmMvQ29tQXBpLmpzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7Ozs7Ozs7QUFDQTs7O0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUlBO0FBQ0E7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7OztBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUFHQTtBQUNBO0FBR0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FBR0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7Ozs7OztBQUdBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7Ozs7OztBQUdBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7Ozs7OztBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7Ozs7O0FBR0E7QUFDQTtBQUlBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7Ozs7OztBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBOzs7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7Ozs7OztBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7Ozs7OztBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7Ozs7OztBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7Ozs7Ozs7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7QUFZQTtBQUNBO0FBRUE7QUFDQTtBQUNBOzs7Ozs7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQUNBOzs7Ozs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUFHQTtBQUFBO0FBQ0E7QUFBQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTs7Ozs7O0FBR0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTs7Ozs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FBR0E7QUFDQTtBQUdBOzs7Ozs7QUFHQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///20\n")},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\n/* eslint-disable */\n/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing.\n *\n * @see https://davidwalsh.name/javascript-debounce-function\n **/\nexports.default = function (func, wait, immediate) {\n  var timeout;\n  return function () {\n    var context = this,\n        args = arguments;\n    var later = function later() {\n      timeout = null;\n      if (!immediate) func.apply(context, args);\n    };\n    var callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n    if (callNow) func.apply(context, args);\n  };\n};\n/* eslint-enable *///# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL3V0aWxzL2RlYm91bmNlLmpzP2QyMTAiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgKi9cbi8qKlxuICogUmV0dXJucyBhIGZ1bmN0aW9uLCB0aGF0LCBhcyBsb25nIGFzIGl0IGNvbnRpbnVlcyB0byBiZSBpbnZva2VkLCB3aWxsIG5vdFxuICogYmUgdHJpZ2dlcmVkLiBUaGUgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgYWZ0ZXIgaXQgc3RvcHMgYmVpbmcgY2FsbGVkIGZvclxuICogTiBtaWxsaXNlY29uZHMuIElmIGBpbW1lZGlhdGVgIGlzIHBhc3NlZCwgdHJpZ2dlciB0aGUgZnVuY3Rpb24gb24gdGhlXG4gKiBsZWFkaW5nIGVkZ2UsIGluc3RlYWQgb2YgdGhlIHRyYWlsaW5nLlxuICpcbiAqIEBzZWUgaHR0cHM6Ly9kYXZpZHdhbHNoLm5hbWUvamF2YXNjcmlwdC1kZWJvdW5jZS1mdW5jdGlvblxuICoqL1xuZXhwb3J0IGRlZmF1bHQgKGZ1bmMsIHdhaXQsIGltbWVkaWF0ZSkgPT4ge1xuICB2YXIgdGltZW91dDtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBjb250ZXh0ID0gdGhpcywgYXJncyA9IGFyZ3VtZW50cztcbiAgICB2YXIgbGF0ZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgIHRpbWVvdXQgPSBudWxsO1xuICAgICAgaWYgKCFpbW1lZGlhdGUpIGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgfTtcbiAgICB2YXIgY2FsbE5vdyA9IGltbWVkaWF0ZSAmJiAhdGltZW91dDtcbiAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQpO1xuICAgIGlmIChjYWxsTm93KSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICB9O1xufVxuLyogZXNsaW50LWVuYWJsZSAqL1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNyYy91dGlscy9kZWJvdW5jZS5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTs7Ozs7Ozs7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///21\n')},function(module,exports,__webpack_require__){"use strict";eval("/* WEBPACK VAR INJECTION */(function(global) {/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n\n\n\nvar adapterFactory = __webpack_require__(/*! ./adapter_factory.js */ 56);\nmodule.exports = adapterFactory({window: global.window});\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! ./../../../webpack/buildin/global.js */ 23)))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvd2VicnRjLWFkYXB0ZXIvc3JjL2pzL2FkYXB0ZXJfY29yZS5qcz81OTFmIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiAgQ29weXJpZ2h0IChjKSAyMDE2IFRoZSBXZWJSVEMgcHJvamVjdCBhdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqICBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhIEJTRC1zdHlsZSBsaWNlbnNlXG4gKiAgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGUgc291cmNlXG4gKiAgdHJlZS5cbiAqL1xuIC8qIGVzbGludC1lbnYgbm9kZSAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBhZGFwdGVyRmFjdG9yeSA9IHJlcXVpcmUoJy4vYWRhcHRlcl9mYWN0b3J5LmpzJyk7XG5tb2R1bGUuZXhwb3J0cyA9IGFkYXB0ZXJGYWN0b3J5KHt3aW5kb3c6IGdsb2JhbC53aW5kb3d9KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL3dlYnJ0Yy1hZGFwdGVyL3NyYy9qcy9hZGFwdGVyX2NvcmUuanNcbi8vIG1vZHVsZSBpZCA9IDIyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///22\n")},function(module,exports){eval('var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function("return this")() || (1,eval)("this");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === "object")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it\'s\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vZ2xvYmFsLmpzPzJkZGQiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIGc7XHJcblxyXG4vLyBUaGlzIHdvcmtzIGluIG5vbi1zdHJpY3QgbW9kZVxyXG5nID0gKGZ1bmN0aW9uKCkge1xyXG5cdHJldHVybiB0aGlzO1xyXG59KSgpO1xyXG5cclxudHJ5IHtcclxuXHQvLyBUaGlzIHdvcmtzIGlmIGV2YWwgaXMgYWxsb3dlZCAoc2VlIENTUClcclxuXHRnID0gZyB8fCBGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCkgfHwgKDEsZXZhbCkoXCJ0aGlzXCIpO1xyXG59IGNhdGNoKGUpIHtcclxuXHQvLyBUaGlzIHdvcmtzIGlmIHRoZSB3aW5kb3cgcmVmZXJlbmNlIGlzIGF2YWlsYWJsZVxyXG5cdGlmKHR5cGVvZiB3aW5kb3cgPT09IFwib2JqZWN0XCIpXHJcblx0XHRnID0gd2luZG93O1xyXG59XHJcblxyXG4vLyBnIGNhbiBzdGlsbCBiZSB1bmRlZmluZWQsIGJ1dCBub3RoaW5nIHRvIGRvIGFib3V0IGl0Li4uXHJcbi8vIFdlIHJldHVybiB1bmRlZmluZWQsIGluc3RlYWQgb2Ygbm90aGluZyBoZXJlLCBzbyBpdCdzXHJcbi8vIGVhc2llciB0byBoYW5kbGUgdGhpcyBjYXNlLiBpZighZ2xvYmFsKSB7IC4uLn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZztcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gKHdlYnBhY2spL2J1aWxkaW4vZ2xvYmFsLmpzXG4vLyBtb2R1bGUgaWQgPSAyM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///23\n')},function(module,exports,__webpack_require__){"use strict";eval(" /* eslint-env node */\n\n\n// SDP helpers.\nvar SDPUtils = {};\n\n// Generate an alphanumeric identifier for cname or mids.\n// TODO: use UUIDs instead? https://gist.github.com/jed/982883\nSDPUtils.generateIdentifier = function() {\n  return Math.random().toString(36).substr(2, 10);\n};\n\n// The RTCP CNAME used by all peerconnections from the same JS.\nSDPUtils.localCName = SDPUtils.generateIdentifier();\n\n// Splits SDP into lines, dealing with both CRLF and LF.\nSDPUtils.splitLines = function(blob) {\n  return blob.trim().split('\\n').map(function(line) {\n    return line.trim();\n  });\n};\n// Splits SDP into sessionpart and mediasections. Ensures CRLF.\nSDPUtils.splitSections = function(blob) {\n  var parts = blob.split('\\nm=');\n  return parts.map(function(part, index) {\n    return (index > 0 ? 'm=' + part : part).trim() + '\\r\\n';\n  });\n};\n\n// returns the session description.\nSDPUtils.getDescription = function(blob) {\n  var sections = SDPUtils.splitSections(blob);\n  return sections && sections[0];\n};\n\n// returns the individual media sections.\nSDPUtils.getMediaSections = function(blob) {\n  var sections = SDPUtils.splitSections(blob);\n  sections.shift();\n  return sections;\n};\n\n// Returns lines that start with a certain prefix.\nSDPUtils.matchPrefix = function(blob, prefix) {\n  return SDPUtils.splitLines(blob).filter(function(line) {\n    return line.indexOf(prefix) === 0;\n  });\n};\n\n// Parses an ICE candidate line. Sample input:\n// candidate:702786350 2 udp 41819902 8.8.8.8 60769 typ relay raddr 8.8.8.8\n// rport 55996\"\nSDPUtils.parseCandidate = function(line) {\n  var parts;\n  // Parse both variants.\n  if (line.indexOf('a=candidate:') === 0) {\n    parts = line.substring(12).split(' ');\n  } else {\n    parts = line.substring(10).split(' ');\n  }\n\n  var candidate = {\n    foundation: parts[0],\n    component: parseInt(parts[1], 10),\n    protocol: parts[2].toLowerCase(),\n    priority: parseInt(parts[3], 10),\n    ip: parts[4],\n    port: parseInt(parts[5], 10),\n    // skip parts[6] == 'typ'\n    type: parts[7]\n  };\n\n  for (var i = 8; i < parts.length; i += 2) {\n    switch (parts[i]) {\n      case 'raddr':\n        candidate.relatedAddress = parts[i + 1];\n        break;\n      case 'rport':\n        candidate.relatedPort = parseInt(parts[i + 1], 10);\n        break;\n      case 'tcptype':\n        candidate.tcpType = parts[i + 1];\n        break;\n      case 'ufrag':\n        candidate.ufrag = parts[i + 1]; // for backward compability.\n        candidate.usernameFragment = parts[i + 1];\n        break;\n      default: // extension handling, in particular ufrag\n        candidate[parts[i]] = parts[i + 1];\n        break;\n    }\n  }\n  return candidate;\n};\n\n// Translates a candidate object into SDP candidate attribute.\nSDPUtils.writeCandidate = function(candidate) {\n  var sdp = [];\n  sdp.push(candidate.foundation);\n  sdp.push(candidate.component);\n  sdp.push(candidate.protocol.toUpperCase());\n  sdp.push(candidate.priority);\n  sdp.push(candidate.ip);\n  sdp.push(candidate.port);\n\n  var type = candidate.type;\n  sdp.push('typ');\n  sdp.push(type);\n  if (type !== 'host' && candidate.relatedAddress &&\n      candidate.relatedPort) {\n    sdp.push('raddr');\n    sdp.push(candidate.relatedAddress); // was: relAddr\n    sdp.push('rport');\n    sdp.push(candidate.relatedPort); // was: relPort\n  }\n  if (candidate.tcpType && candidate.protocol.toLowerCase() === 'tcp') {\n    sdp.push('tcptype');\n    sdp.push(candidate.tcpType);\n  }\n  if (candidate.ufrag) {\n    sdp.push('ufrag');\n    sdp.push(candidate.ufrag);\n  }\n  return 'candidate:' + sdp.join(' ');\n};\n\n// Parses an ice-options line, returns an array of option tags.\n// a=ice-options:foo bar\nSDPUtils.parseIceOptions = function(line) {\n  return line.substr(14).split(' ');\n}\n\n// Parses an rtpmap line, returns RTCRtpCoddecParameters. Sample input:\n// a=rtpmap:111 opus/48000/2\nSDPUtils.parseRtpMap = function(line) {\n  var parts = line.substr(9).split(' ');\n  var parsed = {\n    payloadType: parseInt(parts.shift(), 10) // was: id\n  };\n\n  parts = parts[0].split('/');\n\n  parsed.name = parts[0];\n  parsed.clockRate = parseInt(parts[1], 10); // was: clockrate\n  // was: channels\n  parsed.numChannels = parts.length === 3 ? parseInt(parts[2], 10) : 1;\n  return parsed;\n};\n\n// Generate an a=rtpmap line from RTCRtpCodecCapability or\n// RTCRtpCodecParameters.\nSDPUtils.writeRtpMap = function(codec) {\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  return 'a=rtpmap:' + pt + ' ' + codec.name + '/' + codec.clockRate +\n      (codec.numChannels !== 1 ? '/' + codec.numChannels : '') + '\\r\\n';\n};\n\n// Parses an a=extmap line (headerextension from RFC 5285). Sample input:\n// a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n// a=extmap:2/sendonly urn:ietf:params:rtp-hdrext:toffset\nSDPUtils.parseExtmap = function(line) {\n  var parts = line.substr(9).split(' ');\n  return {\n    id: parseInt(parts[0], 10),\n    direction: parts[0].indexOf('/') > 0 ? parts[0].split('/')[1] : 'sendrecv',\n    uri: parts[1]\n  };\n};\n\n// Generates a=extmap line from RTCRtpHeaderExtensionParameters or\n// RTCRtpHeaderExtension.\nSDPUtils.writeExtmap = function(headerExtension) {\n  return 'a=extmap:' + (headerExtension.id || headerExtension.preferredId) +\n      (headerExtension.direction && headerExtension.direction !== 'sendrecv'\n          ? '/' + headerExtension.direction\n          : '') +\n      ' ' + headerExtension.uri + '\\r\\n';\n};\n\n// Parses an ftmp line, returns dictionary. Sample input:\n// a=fmtp:96 vbr=on;cng=on\n// Also deals with vbr=on; cng=on\nSDPUtils.parseFmtp = function(line) {\n  var parsed = {};\n  var kv;\n  var parts = line.substr(line.indexOf(' ') + 1).split(';');\n  for (var j = 0; j < parts.length; j++) {\n    kv = parts[j].trim().split('=');\n    parsed[kv[0].trim()] = kv[1];\n  }\n  return parsed;\n};\n\n// Generates an a=ftmp line from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeFmtp = function(codec) {\n  var line = '';\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.parameters && Object.keys(codec.parameters).length) {\n    var params = [];\n    Object.keys(codec.parameters).forEach(function(param) {\n      params.push(param + '=' + codec.parameters[param]);\n    });\n    line += 'a=fmtp:' + pt + ' ' + params.join(';') + '\\r\\n';\n  }\n  return line;\n};\n\n// Parses an rtcp-fb line, returns RTCPRtcpFeedback object. Sample input:\n// a=rtcp-fb:98 nack rpsi\nSDPUtils.parseRtcpFb = function(line) {\n  var parts = line.substr(line.indexOf(' ') + 1).split(' ');\n  return {\n    type: parts.shift(),\n    parameter: parts.join(' ')\n  };\n};\n// Generate a=rtcp-fb lines from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeRtcpFb = function(codec) {\n  var lines = '';\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.rtcpFeedback && codec.rtcpFeedback.length) {\n    // FIXME: special handling for trr-int?\n    codec.rtcpFeedback.forEach(function(fb) {\n      lines += 'a=rtcp-fb:' + pt + ' ' + fb.type +\n      (fb.parameter && fb.parameter.length ? ' ' + fb.parameter : '') +\n          '\\r\\n';\n    });\n  }\n  return lines;\n};\n\n// Parses an RFC 5576 ssrc media attribute. Sample input:\n// a=ssrc:3735928559 cname:something\nSDPUtils.parseSsrcMedia = function(line) {\n  var sp = line.indexOf(' ');\n  var parts = {\n    ssrc: parseInt(line.substr(7, sp - 7), 10)\n  };\n  var colon = line.indexOf(':', sp);\n  if (colon > -1) {\n    parts.attribute = line.substr(sp + 1, colon - sp - 1);\n    parts.value = line.substr(colon + 1);\n  } else {\n    parts.attribute = line.substr(sp + 1);\n  }\n  return parts;\n};\n\n// Extracts the MID (RFC 5888) from a media section.\n// returns the MID or undefined if no mid line was found.\nSDPUtils.getMid = function(mediaSection) {\n  var mid = SDPUtils.matchPrefix(mediaSection, 'a=mid:')[0];\n  if (mid) {\n    return mid.substr(6);\n  }\n}\n\nSDPUtils.parseFingerprint = function(line) {\n  var parts = line.substr(14).split(' ');\n  return {\n    algorithm: parts[0].toLowerCase(), // algorithm is case-sensitive in Edge.\n    value: parts[1]\n  };\n};\n\n// Extracts DTLS parameters from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the fingerprint line as input. See also getIceParameters.\nSDPUtils.getDtlsParameters = function(mediaSection, sessionpart) {\n  var lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\n      'a=fingerprint:');\n  // Note: a=setup line is ignored since we use the 'auto' role.\n  // Note2: 'algorithm' is not case sensitive except in Edge.\n  return {\n    role: 'auto',\n    fingerprints: lines.map(SDPUtils.parseFingerprint)\n  };\n};\n\n// Serializes DTLS parameters to SDP.\nSDPUtils.writeDtlsParameters = function(params, setupType) {\n  var sdp = 'a=setup:' + setupType + '\\r\\n';\n  params.fingerprints.forEach(function(fp) {\n    sdp += 'a=fingerprint:' + fp.algorithm + ' ' + fp.value + '\\r\\n';\n  });\n  return sdp;\n};\n// Parses ICE information from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the ice-ufrag and ice-pwd lines as input.\nSDPUtils.getIceParameters = function(mediaSection, sessionpart) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  // Search in session part, too.\n  lines = lines.concat(SDPUtils.splitLines(sessionpart));\n  var iceParameters = {\n    usernameFragment: lines.filter(function(line) {\n      return line.indexOf('a=ice-ufrag:') === 0;\n    })[0].substr(12),\n    password: lines.filter(function(line) {\n      return line.indexOf('a=ice-pwd:') === 0;\n    })[0].substr(10)\n  };\n  return iceParameters;\n};\n\n// Serializes ICE parameters to SDP.\nSDPUtils.writeIceParameters = function(params) {\n  return 'a=ice-ufrag:' + params.usernameFragment + '\\r\\n' +\n      'a=ice-pwd:' + params.password + '\\r\\n';\n};\n\n// Parses the SDP media section and returns RTCRtpParameters.\nSDPUtils.parseRtpParameters = function(mediaSection) {\n  var description = {\n    codecs: [],\n    headerExtensions: [],\n    fecMechanisms: [],\n    rtcp: []\n  };\n  var lines = SDPUtils.splitLines(mediaSection);\n  var mline = lines[0].split(' ');\n  for (var i = 3; i < mline.length; i++) { // find all codecs from mline[3..]\n    var pt = mline[i];\n    var rtpmapline = SDPUtils.matchPrefix(\n        mediaSection, 'a=rtpmap:' + pt + ' ')[0];\n    if (rtpmapline) {\n      var codec = SDPUtils.parseRtpMap(rtpmapline);\n      var fmtps = SDPUtils.matchPrefix(\n          mediaSection, 'a=fmtp:' + pt + ' ');\n      // Only the first a=fmtp:<pt> is considered.\n      codec.parameters = fmtps.length ? SDPUtils.parseFmtp(fmtps[0]) : {};\n      codec.rtcpFeedback = SDPUtils.matchPrefix(\n          mediaSection, 'a=rtcp-fb:' + pt + ' ')\n        .map(SDPUtils.parseRtcpFb);\n      description.codecs.push(codec);\n      // parse FEC mechanisms from rtpmap lines.\n      switch (codec.name.toUpperCase()) {\n        case 'RED':\n        case 'ULPFEC':\n          description.fecMechanisms.push(codec.name.toUpperCase());\n          break;\n        default: // only RED and ULPFEC are recognized as FEC mechanisms.\n          break;\n      }\n    }\n  }\n  SDPUtils.matchPrefix(mediaSection, 'a=extmap:').forEach(function(line) {\n    description.headerExtensions.push(SDPUtils.parseExtmap(line));\n  });\n  // FIXME: parse rtcp.\n  return description;\n};\n\n// Generates parts of the SDP media section describing the capabilities /\n// parameters.\nSDPUtils.writeRtpDescription = function(kind, caps) {\n  var sdp = '';\n\n  // Build the mline.\n  sdp += 'm=' + kind + ' ';\n  sdp += caps.codecs.length > 0 ? '9' : '0'; // reject if no codecs.\n  sdp += ' UDP/TLS/RTP/SAVPF ';\n  sdp += caps.codecs.map(function(codec) {\n    if (codec.preferredPayloadType !== undefined) {\n      return codec.preferredPayloadType;\n    }\n    return codec.payloadType;\n  }).join(' ') + '\\r\\n';\n\n  sdp += 'c=IN IP4 0.0.0.0\\r\\n';\n  sdp += 'a=rtcp:9 IN IP4 0.0.0.0\\r\\n';\n\n  // Add a=rtpmap lines for each codec. Also fmtp and rtcp-fb.\n  caps.codecs.forEach(function(codec) {\n    sdp += SDPUtils.writeRtpMap(codec);\n    sdp += SDPUtils.writeFmtp(codec);\n    sdp += SDPUtils.writeRtcpFb(codec);\n  });\n  var maxptime = 0;\n  caps.codecs.forEach(function(codec) {\n    if (codec.maxptime > maxptime) {\n      maxptime = codec.maxptime;\n    }\n  });\n  if (maxptime > 0) {\n    sdp += 'a=maxptime:' + maxptime + '\\r\\n';\n  }\n  sdp += 'a=rtcp-mux\\r\\n';\n\n  caps.headerExtensions.forEach(function(extension) {\n    sdp += SDPUtils.writeExtmap(extension);\n  });\n  // FIXME: write fecMechanisms.\n  return sdp;\n};\n\n// Parses the SDP media section and returns an array of\n// RTCRtpEncodingParameters.\nSDPUtils.parseRtpEncodingParameters = function(mediaSection) {\n  var encodingParameters = [];\n  var description = SDPUtils.parseRtpParameters(mediaSection);\n  var hasRed = description.fecMechanisms.indexOf('RED') !== -1;\n  var hasUlpfec = description.fecMechanisms.indexOf('ULPFEC') !== -1;\n\n  // filter a=ssrc:... cname:, ignore PlanB-msid\n  var ssrcs = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n  .map(function(line) {\n    return SDPUtils.parseSsrcMedia(line);\n  })\n  .filter(function(parts) {\n    return parts.attribute === 'cname';\n  });\n  var primarySsrc = ssrcs.length > 0 && ssrcs[0].ssrc;\n  var secondarySsrc;\n\n  var flows = SDPUtils.matchPrefix(mediaSection, 'a=ssrc-group:FID')\n  .map(function(line) {\n    var parts = line.split(' ');\n    parts.shift();\n    return parts.map(function(part) {\n      return parseInt(part, 10);\n    });\n  });\n  if (flows.length > 0 && flows[0].length > 1 && flows[0][0] === primarySsrc) {\n    secondarySsrc = flows[0][1];\n  }\n\n  description.codecs.forEach(function(codec) {\n    if (codec.name.toUpperCase() === 'RTX' && codec.parameters.apt) {\n      var encParam = {\n        ssrc: primarySsrc,\n        codecPayloadType: parseInt(codec.parameters.apt, 10),\n        rtx: {\n          ssrc: secondarySsrc\n        }\n      };\n      encodingParameters.push(encParam);\n      if (hasRed) {\n        encParam = JSON.parse(JSON.stringify(encParam));\n        encParam.fec = {\n          ssrc: secondarySsrc,\n          mechanism: hasUlpfec ? 'red+ulpfec' : 'red'\n        };\n        encodingParameters.push(encParam);\n      }\n    }\n  });\n  if (encodingParameters.length === 0 && primarySsrc) {\n    encodingParameters.push({\n      ssrc: primarySsrc\n    });\n  }\n\n  // we support both b=AS and b=TIAS but interpret AS as TIAS.\n  var bandwidth = SDPUtils.matchPrefix(mediaSection, 'b=');\n  if (bandwidth.length) {\n    if (bandwidth[0].indexOf('b=TIAS:') === 0) {\n      bandwidth = parseInt(bandwidth[0].substr(7), 10);\n    } else if (bandwidth[0].indexOf('b=AS:') === 0) {\n      // use formula from JSEP to convert b=AS to TIAS value.\n      bandwidth = parseInt(bandwidth[0].substr(5), 10) * 1000 * 0.95\n          - (50 * 40 * 8);\n    } else {\n      bandwidth = undefined;\n    }\n    encodingParameters.forEach(function(params) {\n      params.maxBitrate = bandwidth;\n    });\n  }\n  return encodingParameters;\n};\n\n// parses http://draft.ortc.org/#rtcrtcpparameters*\nSDPUtils.parseRtcpParameters = function(mediaSection) {\n  var rtcpParameters = {};\n\n  var cname;\n  // Gets the first SSRC. Note that with RTX there might be multiple\n  // SSRCs.\n  var remoteSsrc = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n      .map(function(line) {\n        return SDPUtils.parseSsrcMedia(line);\n      })\n      .filter(function(obj) {\n        return obj.attribute === 'cname';\n      })[0];\n  if (remoteSsrc) {\n    rtcpParameters.cname = remoteSsrc.value;\n    rtcpParameters.ssrc = remoteSsrc.ssrc;\n  }\n\n  // Edge uses the compound attribute instead of reducedSize\n  // compound is !reducedSize\n  var rsize = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-rsize');\n  rtcpParameters.reducedSize = rsize.length > 0;\n  rtcpParameters.compound = rsize.length === 0;\n\n  // parses the rtcp-mux attr\u0456bute.\n  // Note that Edge does not support unmuxed RTCP.\n  var mux = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-mux');\n  rtcpParameters.mux = mux.length > 0;\n\n  return rtcpParameters;\n};\n\n// parses either a=msid: or a=ssrc:... msid lines and returns\n// the id of the MediaStream and MediaStreamTrack.\nSDPUtils.parseMsid = function(mediaSection) {\n  var parts;\n  var spec = SDPUtils.matchPrefix(mediaSection, 'a=msid:');\n  if (spec.length === 1) {\n    parts = spec[0].substr(7).split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n  var planB = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n  .map(function(line) {\n    return SDPUtils.parseSsrcMedia(line);\n  })\n  .filter(function(parts) {\n    return parts.attribute === 'msid';\n  });\n  if (planB.length > 0) {\n    parts = planB[0].value.split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n};\n\n// Generate a session ID for SDP.\n// https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-20#section-5.2.1\n// recommends using a cryptographically random +ve 64-bit value\n// but right now this should be acceptable and within the right range\nSDPUtils.generateSessionId = function() {\n  return Math.random().toString().substr(2, 21);\n};\n\n// Write boilder plate for start of SDP\n// sessId argument is optional - if not supplied it will\n// be generated randomly\n// sessVersion is optional and defaults to 2\nSDPUtils.writeSessionBoilerplate = function(sessId, sessVer) {\n  var sessionId;\n  var version = sessVer !== undefined ? sessVer : 2;\n  if (sessId) {\n    sessionId = sessId;\n  } else {\n    sessionId = SDPUtils.generateSessionId();\n  }\n  // FIXME: sess-id should be an NTP timestamp.\n  return 'v=0\\r\\n' +\n      'o=thisisadapterortc ' + sessionId + ' ' + version + ' IN IP4 127.0.0.1\\r\\n' +\n      's=-\\r\\n' +\n      't=0 0\\r\\n';\n};\n\nSDPUtils.writeMediaSection = function(transceiver, caps, type, stream) {\n  var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\n\n  // Map ICE parameters (ufrag, pwd) to SDP.\n  sdp += SDPUtils.writeIceParameters(\n      transceiver.iceGatherer.getLocalParameters());\n\n  // Map DTLS parameters to SDP.\n  sdp += SDPUtils.writeDtlsParameters(\n      transceiver.dtlsTransport.getLocalParameters(),\n      type === 'offer' ? 'actpass' : 'active');\n\n  sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\n\n  if (transceiver.direction) {\n    sdp += 'a=' + transceiver.direction + '\\r\\n';\n  } else if (transceiver.rtpSender && transceiver.rtpReceiver) {\n    sdp += 'a=sendrecv\\r\\n';\n  } else if (transceiver.rtpSender) {\n    sdp += 'a=sendonly\\r\\n';\n  } else if (transceiver.rtpReceiver) {\n    sdp += 'a=recvonly\\r\\n';\n  } else {\n    sdp += 'a=inactive\\r\\n';\n  }\n\n  if (transceiver.rtpSender) {\n    // spec.\n    var msid = 'msid:' + stream.id + ' ' +\n        transceiver.rtpSender.track.id + '\\r\\n';\n    sdp += 'a=' + msid;\n\n    // for Chrome.\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n        ' ' + msid;\n    if (transceiver.sendEncodingParameters[0].rtx) {\n      sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n          ' ' + msid;\n      sdp += 'a=ssrc-group:FID ' +\n          transceiver.sendEncodingParameters[0].ssrc + ' ' +\n          transceiver.sendEncodingParameters[0].rtx.ssrc +\n          '\\r\\n';\n    }\n  }\n  // FIXME: this should be written by writeRtpDescription.\n  sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n      ' cname:' + SDPUtils.localCName + '\\r\\n';\n  if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n        ' cname:' + SDPUtils.localCName + '\\r\\n';\n  }\n  return sdp;\n};\n\n// Gets the direction from the mediaSection or the sessionpart.\nSDPUtils.getDirection = function(mediaSection, sessionpart) {\n  // Look for sendrecv, sendonly, recvonly, inactive, default to sendrecv.\n  var lines = SDPUtils.splitLines(mediaSection);\n  for (var i = 0; i < lines.length; i++) {\n    switch (lines[i]) {\n      case 'a=sendrecv':\n      case 'a=sendonly':\n      case 'a=recvonly':\n      case 'a=inactive':\n        return lines[i].substr(2);\n      default:\n        // FIXME: What should happen here?\n    }\n  }\n  if (sessionpart) {\n    return SDPUtils.getDirection(sessionpart);\n  }\n  return 'sendrecv';\n};\n\nSDPUtils.getKind = function(mediaSection) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  var mline = lines[0].split(' ');\n  return mline[0].substr(2);\n};\n\nSDPUtils.isRejected = function(mediaSection) {\n  return mediaSection.split(' ', 2)[1] === '0';\n};\n\nSDPUtils.parseMLine = function(mediaSection) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  var parts = lines[0].substr(2).split(' ');\n  return {\n    kind: parts[0],\n    port: parseInt(parts[1], 10),\n    protocol: parts[2],\n    fmt: parts.slice(3).join(' ')\n  };\n};\n\nSDPUtils.parseOLine = function(mediaSection) {\n  var line = SDPUtils.matchPrefix(mediaSection, 'o=')[0];\n  var parts = line.substr(2).split(' ');\n  return {\n    username: parts[0],\n    sessionId: parts[1],\n    sessionVersion: parseInt(parts[2], 10),\n    netType: parts[3],\n    addressType: parts[4],\n    address: parts[5],\n  };\n}\n\n// Expose public methods.\nif (true) {\n  module.exports = SDPUtils;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvc2RwL3NkcC5qcz81ZWUzIl0sInNvdXJjZXNDb250ZW50IjpbIiAvKiBlc2xpbnQtZW52IG5vZGUgKi9cbid1c2Ugc3RyaWN0JztcblxuLy8gU0RQIGhlbHBlcnMuXG52YXIgU0RQVXRpbHMgPSB7fTtcblxuLy8gR2VuZXJhdGUgYW4gYWxwaGFudW1lcmljIGlkZW50aWZpZXIgZm9yIGNuYW1lIG9yIG1pZHMuXG4vLyBUT0RPOiB1c2UgVVVJRHMgaW5zdGVhZD8gaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vamVkLzk4Mjg4M1xuU0RQVXRpbHMuZ2VuZXJhdGVJZGVudGlmaWVyID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgMTApO1xufTtcblxuLy8gVGhlIFJUQ1AgQ05BTUUgdXNlZCBieSBhbGwgcGVlcmNvbm5lY3Rpb25zIGZyb20gdGhlIHNhbWUgSlMuXG5TRFBVdGlscy5sb2NhbENOYW1lID0gU0RQVXRpbHMuZ2VuZXJhdGVJZGVudGlmaWVyKCk7XG5cbi8vIFNwbGl0cyBTRFAgaW50byBsaW5lcywgZGVhbGluZyB3aXRoIGJvdGggQ1JMRiBhbmQgTEYuXG5TRFBVdGlscy5zcGxpdExpbmVzID0gZnVuY3Rpb24oYmxvYikge1xuICByZXR1cm4gYmxvYi50cmltKCkuc3BsaXQoJ1xcbicpLm1hcChmdW5jdGlvbihsaW5lKSB7XG4gICAgcmV0dXJuIGxpbmUudHJpbSgpO1xuICB9KTtcbn07XG4vLyBTcGxpdHMgU0RQIGludG8gc2Vzc2lvbnBhcnQgYW5kIG1lZGlhc2VjdGlvbnMuIEVuc3VyZXMgQ1JMRi5cblNEUFV0aWxzLnNwbGl0U2VjdGlvbnMgPSBmdW5jdGlvbihibG9iKSB7XG4gIHZhciBwYXJ0cyA9IGJsb2Iuc3BsaXQoJ1xcbm09Jyk7XG4gIHJldHVybiBwYXJ0cy5tYXAoZnVuY3Rpb24ocGFydCwgaW5kZXgpIHtcbiAgICByZXR1cm4gKGluZGV4ID4gMCA/ICdtPScgKyBwYXJ0IDogcGFydCkudHJpbSgpICsgJ1xcclxcbic7XG4gIH0pO1xufTtcblxuLy8gcmV0dXJucyB0aGUgc2Vzc2lvbiBkZXNjcmlwdGlvbi5cblNEUFV0aWxzLmdldERlc2NyaXB0aW9uID0gZnVuY3Rpb24oYmxvYikge1xuICB2YXIgc2VjdGlvbnMgPSBTRFBVdGlscy5zcGxpdFNlY3Rpb25zKGJsb2IpO1xuICByZXR1cm4gc2VjdGlvbnMgJiYgc2VjdGlvbnNbMF07XG59O1xuXG4vLyByZXR1cm5zIHRoZSBpbmRpdmlkdWFsIG1lZGlhIHNlY3Rpb25zLlxuU0RQVXRpbHMuZ2V0TWVkaWFTZWN0aW9ucyA9IGZ1bmN0aW9uKGJsb2IpIHtcbiAgdmFyIHNlY3Rpb25zID0gU0RQVXRpbHMuc3BsaXRTZWN0aW9ucyhibG9iKTtcbiAgc2VjdGlvbnMuc2hpZnQoKTtcbiAgcmV0dXJuIHNlY3Rpb25zO1xufTtcblxuLy8gUmV0dXJucyBsaW5lcyB0aGF0IHN0YXJ0IHdpdGggYSBjZXJ0YWluIHByZWZpeC5cblNEUFV0aWxzLm1hdGNoUHJlZml4ID0gZnVuY3Rpb24oYmxvYiwgcHJlZml4KSB7XG4gIHJldHVybiBTRFBVdGlscy5zcGxpdExpbmVzKGJsb2IpLmZpbHRlcihmdW5jdGlvbihsaW5lKSB7XG4gICAgcmV0dXJuIGxpbmUuaW5kZXhPZihwcmVmaXgpID09PSAwO1xuICB9KTtcbn07XG5cbi8vIFBhcnNlcyBhbiBJQ0UgY2FuZGlkYXRlIGxpbmUuIFNhbXBsZSBpbnB1dDpcbi8vIGNhbmRpZGF0ZTo3MDI3ODYzNTAgMiB1ZHAgNDE4MTk5MDIgOC44LjguOCA2MDc2OSB0eXAgcmVsYXkgcmFkZHIgOC44LjguOFxuLy8gcnBvcnQgNTU5OTZcIlxuU0RQVXRpbHMucGFyc2VDYW5kaWRhdGUgPSBmdW5jdGlvbihsaW5lKSB7XG4gIHZhciBwYXJ0cztcbiAgLy8gUGFyc2UgYm90aCB2YXJpYW50cy5cbiAgaWYgKGxpbmUuaW5kZXhPZignYT1jYW5kaWRhdGU6JykgPT09IDApIHtcbiAgICBwYXJ0cyA9IGxpbmUuc3Vic3RyaW5nKDEyKS5zcGxpdCgnICcpO1xuICB9IGVsc2Uge1xuICAgIHBhcnRzID0gbGluZS5zdWJzdHJpbmcoMTApLnNwbGl0KCcgJyk7XG4gIH1cblxuICB2YXIgY2FuZGlkYXRlID0ge1xuICAgIGZvdW5kYXRpb246IHBhcnRzWzBdLFxuICAgIGNvbXBvbmVudDogcGFyc2VJbnQocGFydHNbMV0sIDEwKSxcbiAgICBwcm90b2NvbDogcGFydHNbMl0udG9Mb3dlckNhc2UoKSxcbiAgICBwcmlvcml0eTogcGFyc2VJbnQocGFydHNbM10sIDEwKSxcbiAgICBpcDogcGFydHNbNF0sXG4gICAgcG9ydDogcGFyc2VJbnQocGFydHNbNV0sIDEwKSxcbiAgICAvLyBza2lwIHBhcnRzWzZdID09ICd0eXAnXG4gICAgdHlwZTogcGFydHNbN11cbiAgfTtcblxuICBmb3IgKHZhciBpID0gODsgaSA8IHBhcnRzLmxlbmd0aDsgaSArPSAyKSB7XG4gICAgc3dpdGNoIChwYXJ0c1tpXSkge1xuICAgICAgY2FzZSAncmFkZHInOlxuICAgICAgICBjYW5kaWRhdGUucmVsYXRlZEFkZHJlc3MgPSBwYXJ0c1tpICsgMV07XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncnBvcnQnOlxuICAgICAgICBjYW5kaWRhdGUucmVsYXRlZFBvcnQgPSBwYXJzZUludChwYXJ0c1tpICsgMV0sIDEwKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd0Y3B0eXBlJzpcbiAgICAgICAgY2FuZGlkYXRlLnRjcFR5cGUgPSBwYXJ0c1tpICsgMV07XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAndWZyYWcnOlxuICAgICAgICBjYW5kaWRhdGUudWZyYWcgPSBwYXJ0c1tpICsgMV07IC8vIGZvciBiYWNrd2FyZCBjb21wYWJpbGl0eS5cbiAgICAgICAgY2FuZGlkYXRlLnVzZXJuYW1lRnJhZ21lbnQgPSBwYXJ0c1tpICsgMV07XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDogLy8gZXh0ZW5zaW9uIGhhbmRsaW5nLCBpbiBwYXJ0aWN1bGFyIHVmcmFnXG4gICAgICAgIGNhbmRpZGF0ZVtwYXJ0c1tpXV0gPSBwYXJ0c1tpICsgMV07XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICByZXR1cm4gY2FuZGlkYXRlO1xufTtcblxuLy8gVHJhbnNsYXRlcyBhIGNhbmRpZGF0ZSBvYmplY3QgaW50byBTRFAgY2FuZGlkYXRlIGF0dHJpYnV0ZS5cblNEUFV0aWxzLndyaXRlQ2FuZGlkYXRlID0gZnVuY3Rpb24oY2FuZGlkYXRlKSB7XG4gIHZhciBzZHAgPSBbXTtcbiAgc2RwLnB1c2goY2FuZGlkYXRlLmZvdW5kYXRpb24pO1xuICBzZHAucHVzaChjYW5kaWRhdGUuY29tcG9uZW50KTtcbiAgc2RwLnB1c2goY2FuZGlkYXRlLnByb3RvY29sLnRvVXBwZXJDYXNlKCkpO1xuICBzZHAucHVzaChjYW5kaWRhdGUucHJpb3JpdHkpO1xuICBzZHAucHVzaChjYW5kaWRhdGUuaXApO1xuICBzZHAucHVzaChjYW5kaWRhdGUucG9ydCk7XG5cbiAgdmFyIHR5cGUgPSBjYW5kaWRhdGUudHlwZTtcbiAgc2RwLnB1c2goJ3R5cCcpO1xuICBzZHAucHVzaCh0eXBlKTtcbiAgaWYgKHR5cGUgIT09ICdob3N0JyAmJiBjYW5kaWRhdGUucmVsYXRlZEFkZHJlc3MgJiZcbiAgICAgIGNhbmRpZGF0ZS5yZWxhdGVkUG9ydCkge1xuICAgIHNkcC5wdXNoKCdyYWRkcicpO1xuICAgIHNkcC5wdXNoKGNhbmRpZGF0ZS5yZWxhdGVkQWRkcmVzcyk7IC8vIHdhczogcmVsQWRkclxuICAgIHNkcC5wdXNoKCdycG9ydCcpO1xuICAgIHNkcC5wdXNoKGNhbmRpZGF0ZS5yZWxhdGVkUG9ydCk7IC8vIHdhczogcmVsUG9ydFxuICB9XG4gIGlmIChjYW5kaWRhdGUudGNwVHlwZSAmJiBjYW5kaWRhdGUucHJvdG9jb2wudG9Mb3dlckNhc2UoKSA9PT0gJ3RjcCcpIHtcbiAgICBzZHAucHVzaCgndGNwdHlwZScpO1xuICAgIHNkcC5wdXNoKGNhbmRpZGF0ZS50Y3BUeXBlKTtcbiAgfVxuICBpZiAoY2FuZGlkYXRlLnVmcmFnKSB7XG4gICAgc2RwLnB1c2goJ3VmcmFnJyk7XG4gICAgc2RwLnB1c2goY2FuZGlkYXRlLnVmcmFnKTtcbiAgfVxuICByZXR1cm4gJ2NhbmRpZGF0ZTonICsgc2RwLmpvaW4oJyAnKTtcbn07XG5cbi8vIFBhcnNlcyBhbiBpY2Utb3B0aW9ucyBsaW5lLCByZXR1cm5zIGFuIGFycmF5IG9mIG9wdGlvbiB0YWdzLlxuLy8gYT1pY2Utb3B0aW9uczpmb28gYmFyXG5TRFBVdGlscy5wYXJzZUljZU9wdGlvbnMgPSBmdW5jdGlvbihsaW5lKSB7XG4gIHJldHVybiBsaW5lLnN1YnN0cigxNCkuc3BsaXQoJyAnKTtcbn1cblxuLy8gUGFyc2VzIGFuIHJ0cG1hcCBsaW5lLCByZXR1cm5zIFJUQ1J0cENvZGRlY1BhcmFtZXRlcnMuIFNhbXBsZSBpbnB1dDpcbi8vIGE9cnRwbWFwOjExMSBvcHVzLzQ4MDAwLzJcblNEUFV0aWxzLnBhcnNlUnRwTWFwID0gZnVuY3Rpb24obGluZSkge1xuICB2YXIgcGFydHMgPSBsaW5lLnN1YnN0cig5KS5zcGxpdCgnICcpO1xuICB2YXIgcGFyc2VkID0ge1xuICAgIHBheWxvYWRUeXBlOiBwYXJzZUludChwYXJ0cy5zaGlmdCgpLCAxMCkgLy8gd2FzOiBpZFxuICB9O1xuXG4gIHBhcnRzID0gcGFydHNbMF0uc3BsaXQoJy8nKTtcblxuICBwYXJzZWQubmFtZSA9IHBhcnRzWzBdO1xuICBwYXJzZWQuY2xvY2tSYXRlID0gcGFyc2VJbnQocGFydHNbMV0sIDEwKTsgLy8gd2FzOiBjbG9ja3JhdGVcbiAgLy8gd2FzOiBjaGFubmVsc1xuICBwYXJzZWQubnVtQ2hhbm5lbHMgPSBwYXJ0cy5sZW5ndGggPT09IDMgPyBwYXJzZUludChwYXJ0c1syXSwgMTApIDogMTtcbiAgcmV0dXJuIHBhcnNlZDtcbn07XG5cbi8vIEdlbmVyYXRlIGFuIGE9cnRwbWFwIGxpbmUgZnJvbSBSVENSdHBDb2RlY0NhcGFiaWxpdHkgb3Jcbi8vIFJUQ1J0cENvZGVjUGFyYW1ldGVycy5cblNEUFV0aWxzLndyaXRlUnRwTWFwID0gZnVuY3Rpb24oY29kZWMpIHtcbiAgdmFyIHB0ID0gY29kZWMucGF5bG9hZFR5cGU7XG4gIGlmIChjb2RlYy5wcmVmZXJyZWRQYXlsb2FkVHlwZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgcHQgPSBjb2RlYy5wcmVmZXJyZWRQYXlsb2FkVHlwZTtcbiAgfVxuICByZXR1cm4gJ2E9cnRwbWFwOicgKyBwdCArICcgJyArIGNvZGVjLm5hbWUgKyAnLycgKyBjb2RlYy5jbG9ja1JhdGUgK1xuICAgICAgKGNvZGVjLm51bUNoYW5uZWxzICE9PSAxID8gJy8nICsgY29kZWMubnVtQ2hhbm5lbHMgOiAnJykgKyAnXFxyXFxuJztcbn07XG5cbi8vIFBhcnNlcyBhbiBhPWV4dG1hcCBsaW5lIChoZWFkZXJleHRlbnNpb24gZnJvbSBSRkMgNTI4NSkuIFNhbXBsZSBpbnB1dDpcbi8vIGE9ZXh0bWFwOjIgdXJuOmlldGY6cGFyYW1zOnJ0cC1oZHJleHQ6dG9mZnNldFxuLy8gYT1leHRtYXA6Mi9zZW5kb25seSB1cm46aWV0ZjpwYXJhbXM6cnRwLWhkcmV4dDp0b2Zmc2V0XG5TRFBVdGlscy5wYXJzZUV4dG1hcCA9IGZ1bmN0aW9uKGxpbmUpIHtcbiAgdmFyIHBhcnRzID0gbGluZS5zdWJzdHIoOSkuc3BsaXQoJyAnKTtcbiAgcmV0dXJuIHtcbiAgICBpZDogcGFyc2VJbnQocGFydHNbMF0sIDEwKSxcbiAgICBkaXJlY3Rpb246IHBhcnRzWzBdLmluZGV4T2YoJy8nKSA+IDAgPyBwYXJ0c1swXS5zcGxpdCgnLycpWzFdIDogJ3NlbmRyZWN2JyxcbiAgICB1cmk6IHBhcnRzWzFdXG4gIH07XG59O1xuXG4vLyBHZW5lcmF0ZXMgYT1leHRtYXAgbGluZSBmcm9tIFJUQ1J0cEhlYWRlckV4dGVuc2lvblBhcmFtZXRlcnMgb3Jcbi8vIFJUQ1J0cEhlYWRlckV4dGVuc2lvbi5cblNEUFV0aWxzLndyaXRlRXh0bWFwID0gZnVuY3Rpb24oaGVhZGVyRXh0ZW5zaW9uKSB7XG4gIHJldHVybiAnYT1leHRtYXA6JyArIChoZWFkZXJFeHRlbnNpb24uaWQgfHwgaGVhZGVyRXh0ZW5zaW9uLnByZWZlcnJlZElkKSArXG4gICAgICAoaGVhZGVyRXh0ZW5zaW9uLmRpcmVjdGlvbiAmJiBoZWFkZXJFeHRlbnNpb24uZGlyZWN0aW9uICE9PSAnc2VuZHJlY3YnXG4gICAgICAgICAgPyAnLycgKyBoZWFkZXJFeHRlbnNpb24uZGlyZWN0aW9uXG4gICAgICAgICAgOiAnJykgK1xuICAgICAgJyAnICsgaGVhZGVyRXh0ZW5zaW9uLnVyaSArICdcXHJcXG4nO1xufTtcblxuLy8gUGFyc2VzIGFuIGZ0bXAgbGluZSwgcmV0dXJucyBkaWN0aW9uYXJ5LiBTYW1wbGUgaW5wdXQ6XG4vLyBhPWZtdHA6OTYgdmJyPW9uO2NuZz1vblxuLy8gQWxzbyBkZWFscyB3aXRoIHZicj1vbjsgY25nPW9uXG5TRFBVdGlscy5wYXJzZUZtdHAgPSBmdW5jdGlvbihsaW5lKSB7XG4gIHZhciBwYXJzZWQgPSB7fTtcbiAgdmFyIGt2O1xuICB2YXIgcGFydHMgPSBsaW5lLnN1YnN0cihsaW5lLmluZGV4T2YoJyAnKSArIDEpLnNwbGl0KCc7Jyk7XG4gIGZvciAodmFyIGogPSAwOyBqIDwgcGFydHMubGVuZ3RoOyBqKyspIHtcbiAgICBrdiA9IHBhcnRzW2pdLnRyaW0oKS5zcGxpdCgnPScpO1xuICAgIHBhcnNlZFtrdlswXS50cmltKCldID0ga3ZbMV07XG4gIH1cbiAgcmV0dXJuIHBhcnNlZDtcbn07XG5cbi8vIEdlbmVyYXRlcyBhbiBhPWZ0bXAgbGluZSBmcm9tIFJUQ1J0cENvZGVjQ2FwYWJpbGl0eSBvciBSVENSdHBDb2RlY1BhcmFtZXRlcnMuXG5TRFBVdGlscy53cml0ZUZtdHAgPSBmdW5jdGlvbihjb2RlYykge1xuICB2YXIgbGluZSA9ICcnO1xuICB2YXIgcHQgPSBjb2RlYy5wYXlsb2FkVHlwZTtcbiAgaWYgKGNvZGVjLnByZWZlcnJlZFBheWxvYWRUeXBlICE9PSB1bmRlZmluZWQpIHtcbiAgICBwdCA9IGNvZGVjLnByZWZlcnJlZFBheWxvYWRUeXBlO1xuICB9XG4gIGlmIChjb2RlYy5wYXJhbWV0ZXJzICYmIE9iamVjdC5rZXlzKGNvZGVjLnBhcmFtZXRlcnMpLmxlbmd0aCkge1xuICAgIHZhciBwYXJhbXMgPSBbXTtcbiAgICBPYmplY3Qua2V5cyhjb2RlYy5wYXJhbWV0ZXJzKS5mb3JFYWNoKGZ1bmN0aW9uKHBhcmFtKSB7XG4gICAgICBwYXJhbXMucHVzaChwYXJhbSArICc9JyArIGNvZGVjLnBhcmFtZXRlcnNbcGFyYW1dKTtcbiAgICB9KTtcbiAgICBsaW5lICs9ICdhPWZtdHA6JyArIHB0ICsgJyAnICsgcGFyYW1zLmpvaW4oJzsnKSArICdcXHJcXG4nO1xuICB9XG4gIHJldHVybiBsaW5lO1xufTtcblxuLy8gUGFyc2VzIGFuIHJ0Y3AtZmIgbGluZSwgcmV0dXJucyBSVENQUnRjcEZlZWRiYWNrIG9iamVjdC4gU2FtcGxlIGlucHV0OlxuLy8gYT1ydGNwLWZiOjk4IG5hY2sgcnBzaVxuU0RQVXRpbHMucGFyc2VSdGNwRmIgPSBmdW5jdGlvbihsaW5lKSB7XG4gIHZhciBwYXJ0cyA9IGxpbmUuc3Vic3RyKGxpbmUuaW5kZXhPZignICcpICsgMSkuc3BsaXQoJyAnKTtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiBwYXJ0cy5zaGlmdCgpLFxuICAgIHBhcmFtZXRlcjogcGFydHMuam9pbignICcpXG4gIH07XG59O1xuLy8gR2VuZXJhdGUgYT1ydGNwLWZiIGxpbmVzIGZyb20gUlRDUnRwQ29kZWNDYXBhYmlsaXR5IG9yIFJUQ1J0cENvZGVjUGFyYW1ldGVycy5cblNEUFV0aWxzLndyaXRlUnRjcEZiID0gZnVuY3Rpb24oY29kZWMpIHtcbiAgdmFyIGxpbmVzID0gJyc7XG4gIHZhciBwdCA9IGNvZGVjLnBheWxvYWRUeXBlO1xuICBpZiAoY29kZWMucHJlZmVycmVkUGF5bG9hZFR5cGUgIT09IHVuZGVmaW5lZCkge1xuICAgIHB0ID0gY29kZWMucHJlZmVycmVkUGF5bG9hZFR5cGU7XG4gIH1cbiAgaWYgKGNvZGVjLnJ0Y3BGZWVkYmFjayAmJiBjb2RlYy5ydGNwRmVlZGJhY2subGVuZ3RoKSB7XG4gICAgLy8gRklYTUU6IHNwZWNpYWwgaGFuZGxpbmcgZm9yIHRyci1pbnQ/XG4gICAgY29kZWMucnRjcEZlZWRiYWNrLmZvckVhY2goZnVuY3Rpb24oZmIpIHtcbiAgICAgIGxpbmVzICs9ICdhPXJ0Y3AtZmI6JyArIHB0ICsgJyAnICsgZmIudHlwZSArXG4gICAgICAoZmIucGFyYW1ldGVyICYmIGZiLnBhcmFtZXRlci5sZW5ndGggPyAnICcgKyBmYi5wYXJhbWV0ZXIgOiAnJykgK1xuICAgICAgICAgICdcXHJcXG4nO1xuICAgIH0pO1xuICB9XG4gIHJldHVybiBsaW5lcztcbn07XG5cbi8vIFBhcnNlcyBhbiBSRkMgNTU3NiBzc3JjIG1lZGlhIGF0dHJpYnV0ZS4gU2FtcGxlIGlucHV0OlxuLy8gYT1zc3JjOjM3MzU5Mjg1NTkgY25hbWU6c29tZXRoaW5nXG5TRFBVdGlscy5wYXJzZVNzcmNNZWRpYSA9IGZ1bmN0aW9uKGxpbmUpIHtcbiAgdmFyIHNwID0gbGluZS5pbmRleE9mKCcgJyk7XG4gIHZhciBwYXJ0cyA9IHtcbiAgICBzc3JjOiBwYXJzZUludChsaW5lLnN1YnN0cig3LCBzcCAtIDcpLCAxMClcbiAgfTtcbiAgdmFyIGNvbG9uID0gbGluZS5pbmRleE9mKCc6Jywgc3ApO1xuICBpZiAoY29sb24gPiAtMSkge1xuICAgIHBhcnRzLmF0dHJpYnV0ZSA9IGxpbmUuc3Vic3RyKHNwICsgMSwgY29sb24gLSBzcCAtIDEpO1xuICAgIHBhcnRzLnZhbHVlID0gbGluZS5zdWJzdHIoY29sb24gKyAxKTtcbiAgfSBlbHNlIHtcbiAgICBwYXJ0cy5hdHRyaWJ1dGUgPSBsaW5lLnN1YnN0cihzcCArIDEpO1xuICB9XG4gIHJldHVybiBwYXJ0cztcbn07XG5cbi8vIEV4dHJhY3RzIHRoZSBNSUQgKFJGQyA1ODg4KSBmcm9tIGEgbWVkaWEgc2VjdGlvbi5cbi8vIHJldHVybnMgdGhlIE1JRCBvciB1bmRlZmluZWQgaWYgbm8gbWlkIGxpbmUgd2FzIGZvdW5kLlxuU0RQVXRpbHMuZ2V0TWlkID0gZnVuY3Rpb24obWVkaWFTZWN0aW9uKSB7XG4gIHZhciBtaWQgPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdhPW1pZDonKVswXTtcbiAgaWYgKG1pZCkge1xuICAgIHJldHVybiBtaWQuc3Vic3RyKDYpO1xuICB9XG59XG5cblNEUFV0aWxzLnBhcnNlRmluZ2VycHJpbnQgPSBmdW5jdGlvbihsaW5lKSB7XG4gIHZhciBwYXJ0cyA9IGxpbmUuc3Vic3RyKDE0KS5zcGxpdCgnICcpO1xuICByZXR1cm4ge1xuICAgIGFsZ29yaXRobTogcGFydHNbMF0udG9Mb3dlckNhc2UoKSwgLy8gYWxnb3JpdGhtIGlzIGNhc2Utc2Vuc2l0aXZlIGluIEVkZ2UuXG4gICAgdmFsdWU6IHBhcnRzWzFdXG4gIH07XG59O1xuXG4vLyBFeHRyYWN0cyBEVExTIHBhcmFtZXRlcnMgZnJvbSBTRFAgbWVkaWEgc2VjdGlvbiBvciBzZXNzaW9ucGFydC5cbi8vIEZJWE1FOiBmb3IgY29uc2lzdGVuY3kgd2l0aCBvdGhlciBmdW5jdGlvbnMgdGhpcyBzaG91bGQgb25seVxuLy8gICBnZXQgdGhlIGZpbmdlcnByaW50IGxpbmUgYXMgaW5wdXQuIFNlZSBhbHNvIGdldEljZVBhcmFtZXRlcnMuXG5TRFBVdGlscy5nZXREdGxzUGFyYW1ldGVycyA9IGZ1bmN0aW9uKG1lZGlhU2VjdGlvbiwgc2Vzc2lvbnBhcnQpIHtcbiAgdmFyIGxpbmVzID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uICsgc2Vzc2lvbnBhcnQsXG4gICAgICAnYT1maW5nZXJwcmludDonKTtcbiAgLy8gTm90ZTogYT1zZXR1cCBsaW5lIGlzIGlnbm9yZWQgc2luY2Ugd2UgdXNlIHRoZSAnYXV0bycgcm9sZS5cbiAgLy8gTm90ZTI6ICdhbGdvcml0aG0nIGlzIG5vdCBjYXNlIHNlbnNpdGl2ZSBleGNlcHQgaW4gRWRnZS5cbiAgcmV0dXJuIHtcbiAgICByb2xlOiAnYXV0bycsXG4gICAgZmluZ2VycHJpbnRzOiBsaW5lcy5tYXAoU0RQVXRpbHMucGFyc2VGaW5nZXJwcmludClcbiAgfTtcbn07XG5cbi8vIFNlcmlhbGl6ZXMgRFRMUyBwYXJhbWV0ZXJzIHRvIFNEUC5cblNEUFV0aWxzLndyaXRlRHRsc1BhcmFtZXRlcnMgPSBmdW5jdGlvbihwYXJhbXMsIHNldHVwVHlwZSkge1xuICB2YXIgc2RwID0gJ2E9c2V0dXA6JyArIHNldHVwVHlwZSArICdcXHJcXG4nO1xuICBwYXJhbXMuZmluZ2VycHJpbnRzLmZvckVhY2goZnVuY3Rpb24oZnApIHtcbiAgICBzZHAgKz0gJ2E9ZmluZ2VycHJpbnQ6JyArIGZwLmFsZ29yaXRobSArICcgJyArIGZwLnZhbHVlICsgJ1xcclxcbic7XG4gIH0pO1xuICByZXR1cm4gc2RwO1xufTtcbi8vIFBhcnNlcyBJQ0UgaW5mb3JtYXRpb24gZnJvbSBTRFAgbWVkaWEgc2VjdGlvbiBvciBzZXNzaW9ucGFydC5cbi8vIEZJWE1FOiBmb3IgY29uc2lzdGVuY3kgd2l0aCBvdGhlciBmdW5jdGlvbnMgdGhpcyBzaG91bGQgb25seVxuLy8gICBnZXQgdGhlIGljZS11ZnJhZyBhbmQgaWNlLXB3ZCBsaW5lcyBhcyBpbnB1dC5cblNEUFV0aWxzLmdldEljZVBhcmFtZXRlcnMgPSBmdW5jdGlvbihtZWRpYVNlY3Rpb24sIHNlc3Npb25wYXJ0KSB7XG4gIHZhciBsaW5lcyA9IFNEUFV0aWxzLnNwbGl0TGluZXMobWVkaWFTZWN0aW9uKTtcbiAgLy8gU2VhcmNoIGluIHNlc3Npb24gcGFydCwgdG9vLlxuICBsaW5lcyA9IGxpbmVzLmNvbmNhdChTRFBVdGlscy5zcGxpdExpbmVzKHNlc3Npb25wYXJ0KSk7XG4gIHZhciBpY2VQYXJhbWV0ZXJzID0ge1xuICAgIHVzZXJuYW1lRnJhZ21lbnQ6IGxpbmVzLmZpbHRlcihmdW5jdGlvbihsaW5lKSB7XG4gICAgICByZXR1cm4gbGluZS5pbmRleE9mKCdhPWljZS11ZnJhZzonKSA9PT0gMDtcbiAgICB9KVswXS5zdWJzdHIoMTIpLFxuICAgIHBhc3N3b3JkOiBsaW5lcy5maWx0ZXIoZnVuY3Rpb24obGluZSkge1xuICAgICAgcmV0dXJuIGxpbmUuaW5kZXhPZignYT1pY2UtcHdkOicpID09PSAwO1xuICAgIH0pWzBdLnN1YnN0cigxMClcbiAgfTtcbiAgcmV0dXJuIGljZVBhcmFtZXRlcnM7XG59O1xuXG4vLyBTZXJpYWxpemVzIElDRSBwYXJhbWV0ZXJzIHRvIFNEUC5cblNEUFV0aWxzLndyaXRlSWNlUGFyYW1ldGVycyA9IGZ1bmN0aW9uKHBhcmFtcykge1xuICByZXR1cm4gJ2E9aWNlLXVmcmFnOicgKyBwYXJhbXMudXNlcm5hbWVGcmFnbWVudCArICdcXHJcXG4nICtcbiAgICAgICdhPWljZS1wd2Q6JyArIHBhcmFtcy5wYXNzd29yZCArICdcXHJcXG4nO1xufTtcblxuLy8gUGFyc2VzIHRoZSBTRFAgbWVkaWEgc2VjdGlvbiBhbmQgcmV0dXJucyBSVENSdHBQYXJhbWV0ZXJzLlxuU0RQVXRpbHMucGFyc2VSdHBQYXJhbWV0ZXJzID0gZnVuY3Rpb24obWVkaWFTZWN0aW9uKSB7XG4gIHZhciBkZXNjcmlwdGlvbiA9IHtcbiAgICBjb2RlY3M6IFtdLFxuICAgIGhlYWRlckV4dGVuc2lvbnM6IFtdLFxuICAgIGZlY01lY2hhbmlzbXM6IFtdLFxuICAgIHJ0Y3A6IFtdXG4gIH07XG4gIHZhciBsaW5lcyA9IFNEUFV0aWxzLnNwbGl0TGluZXMobWVkaWFTZWN0aW9uKTtcbiAgdmFyIG1saW5lID0gbGluZXNbMF0uc3BsaXQoJyAnKTtcbiAgZm9yICh2YXIgaSA9IDM7IGkgPCBtbGluZS5sZW5ndGg7IGkrKykgeyAvLyBmaW5kIGFsbCBjb2RlY3MgZnJvbSBtbGluZVszLi5dXG4gICAgdmFyIHB0ID0gbWxpbmVbaV07XG4gICAgdmFyIHJ0cG1hcGxpbmUgPSBTRFBVdGlscy5tYXRjaFByZWZpeChcbiAgICAgICAgbWVkaWFTZWN0aW9uLCAnYT1ydHBtYXA6JyArIHB0ICsgJyAnKVswXTtcbiAgICBpZiAocnRwbWFwbGluZSkge1xuICAgICAgdmFyIGNvZGVjID0gU0RQVXRpbHMucGFyc2VSdHBNYXAocnRwbWFwbGluZSk7XG4gICAgICB2YXIgZm10cHMgPSBTRFBVdGlscy5tYXRjaFByZWZpeChcbiAgICAgICAgICBtZWRpYVNlY3Rpb24sICdhPWZtdHA6JyArIHB0ICsgJyAnKTtcbiAgICAgIC8vIE9ubHkgdGhlIGZpcnN0IGE9Zm10cDo8cHQ+IGlzIGNvbnNpZGVyZWQuXG4gICAgICBjb2RlYy5wYXJhbWV0ZXJzID0gZm10cHMubGVuZ3RoID8gU0RQVXRpbHMucGFyc2VGbXRwKGZtdHBzWzBdKSA6IHt9O1xuICAgICAgY29kZWMucnRjcEZlZWRiYWNrID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgoXG4gICAgICAgICAgbWVkaWFTZWN0aW9uLCAnYT1ydGNwLWZiOicgKyBwdCArICcgJylcbiAgICAgICAgLm1hcChTRFBVdGlscy5wYXJzZVJ0Y3BGYik7XG4gICAgICBkZXNjcmlwdGlvbi5jb2RlY3MucHVzaChjb2RlYyk7XG4gICAgICAvLyBwYXJzZSBGRUMgbWVjaGFuaXNtcyBmcm9tIHJ0cG1hcCBsaW5lcy5cbiAgICAgIHN3aXRjaCAoY29kZWMubmFtZS50b1VwcGVyQ2FzZSgpKSB7XG4gICAgICAgIGNhc2UgJ1JFRCc6XG4gICAgICAgIGNhc2UgJ1VMUEZFQyc6XG4gICAgICAgICAgZGVzY3JpcHRpb24uZmVjTWVjaGFuaXNtcy5wdXNoKGNvZGVjLm5hbWUudG9VcHBlckNhc2UoKSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6IC8vIG9ubHkgUkVEIGFuZCBVTFBGRUMgYXJlIHJlY29nbml6ZWQgYXMgRkVDIG1lY2hhbmlzbXMuXG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ2E9ZXh0bWFwOicpLmZvckVhY2goZnVuY3Rpb24obGluZSkge1xuICAgIGRlc2NyaXB0aW9uLmhlYWRlckV4dGVuc2lvbnMucHVzaChTRFBVdGlscy5wYXJzZUV4dG1hcChsaW5lKSk7XG4gIH0pO1xuICAvLyBGSVhNRTogcGFyc2UgcnRjcC5cbiAgcmV0dXJuIGRlc2NyaXB0aW9uO1xufTtcblxuLy8gR2VuZXJhdGVzIHBhcnRzIG9mIHRoZSBTRFAgbWVkaWEgc2VjdGlvbiBkZXNjcmliaW5nIHRoZSBjYXBhYmlsaXRpZXMgL1xuLy8gcGFyYW1ldGVycy5cblNEUFV0aWxzLndyaXRlUnRwRGVzY3JpcHRpb24gPSBmdW5jdGlvbihraW5kLCBjYXBzKSB7XG4gIHZhciBzZHAgPSAnJztcblxuICAvLyBCdWlsZCB0aGUgbWxpbmUuXG4gIHNkcCArPSAnbT0nICsga2luZCArICcgJztcbiAgc2RwICs9IGNhcHMuY29kZWNzLmxlbmd0aCA+IDAgPyAnOScgOiAnMCc7IC8vIHJlamVjdCBpZiBubyBjb2RlY3MuXG4gIHNkcCArPSAnIFVEUC9UTFMvUlRQL1NBVlBGICc7XG4gIHNkcCArPSBjYXBzLmNvZGVjcy5tYXAoZnVuY3Rpb24oY29kZWMpIHtcbiAgICBpZiAoY29kZWMucHJlZmVycmVkUGF5bG9hZFR5cGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGNvZGVjLnByZWZlcnJlZFBheWxvYWRUeXBlO1xuICAgIH1cbiAgICByZXR1cm4gY29kZWMucGF5bG9hZFR5cGU7XG4gIH0pLmpvaW4oJyAnKSArICdcXHJcXG4nO1xuXG4gIHNkcCArPSAnYz1JTiBJUDQgMC4wLjAuMFxcclxcbic7XG4gIHNkcCArPSAnYT1ydGNwOjkgSU4gSVA0IDAuMC4wLjBcXHJcXG4nO1xuXG4gIC8vIEFkZCBhPXJ0cG1hcCBsaW5lcyBmb3IgZWFjaCBjb2RlYy4gQWxzbyBmbXRwIGFuZCBydGNwLWZiLlxuICBjYXBzLmNvZGVjcy5mb3JFYWNoKGZ1bmN0aW9uKGNvZGVjKSB7XG4gICAgc2RwICs9IFNEUFV0aWxzLndyaXRlUnRwTWFwKGNvZGVjKTtcbiAgICBzZHAgKz0gU0RQVXRpbHMud3JpdGVGbXRwKGNvZGVjKTtcbiAgICBzZHAgKz0gU0RQVXRpbHMud3JpdGVSdGNwRmIoY29kZWMpO1xuICB9KTtcbiAgdmFyIG1heHB0aW1lID0gMDtcbiAgY2Fwcy5jb2RlY3MuZm9yRWFjaChmdW5jdGlvbihjb2RlYykge1xuICAgIGlmIChjb2RlYy5tYXhwdGltZSA+IG1heHB0aW1lKSB7XG4gICAgICBtYXhwdGltZSA9IGNvZGVjLm1heHB0aW1lO1xuICAgIH1cbiAgfSk7XG4gIGlmIChtYXhwdGltZSA+IDApIHtcbiAgICBzZHAgKz0gJ2E9bWF4cHRpbWU6JyArIG1heHB0aW1lICsgJ1xcclxcbic7XG4gIH1cbiAgc2RwICs9ICdhPXJ0Y3AtbXV4XFxyXFxuJztcblxuICBjYXBzLmhlYWRlckV4dGVuc2lvbnMuZm9yRWFjaChmdW5jdGlvbihleHRlbnNpb24pIHtcbiAgICBzZHAgKz0gU0RQVXRpbHMud3JpdGVFeHRtYXAoZXh0ZW5zaW9uKTtcbiAgfSk7XG4gIC8vIEZJWE1FOiB3cml0ZSBmZWNNZWNoYW5pc21zLlxuICByZXR1cm4gc2RwO1xufTtcblxuLy8gUGFyc2VzIHRoZSBTRFAgbWVkaWEgc2VjdGlvbiBhbmQgcmV0dXJucyBhbiBhcnJheSBvZlxuLy8gUlRDUnRwRW5jb2RpbmdQYXJhbWV0ZXJzLlxuU0RQVXRpbHMucGFyc2VSdHBFbmNvZGluZ1BhcmFtZXRlcnMgPSBmdW5jdGlvbihtZWRpYVNlY3Rpb24pIHtcbiAgdmFyIGVuY29kaW5nUGFyYW1ldGVycyA9IFtdO1xuICB2YXIgZGVzY3JpcHRpb24gPSBTRFBVdGlscy5wYXJzZVJ0cFBhcmFtZXRlcnMobWVkaWFTZWN0aW9uKTtcbiAgdmFyIGhhc1JlZCA9IGRlc2NyaXB0aW9uLmZlY01lY2hhbmlzbXMuaW5kZXhPZignUkVEJykgIT09IC0xO1xuICB2YXIgaGFzVWxwZmVjID0gZGVzY3JpcHRpb24uZmVjTWVjaGFuaXNtcy5pbmRleE9mKCdVTFBGRUMnKSAhPT0gLTE7XG5cbiAgLy8gZmlsdGVyIGE9c3NyYzouLi4gY25hbWU6LCBpZ25vcmUgUGxhbkItbXNpZFxuICB2YXIgc3NyY3MgPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdhPXNzcmM6JylcbiAgLm1hcChmdW5jdGlvbihsaW5lKSB7XG4gICAgcmV0dXJuIFNEUFV0aWxzLnBhcnNlU3NyY01lZGlhKGxpbmUpO1xuICB9KVxuICAuZmlsdGVyKGZ1bmN0aW9uKHBhcnRzKSB7XG4gICAgcmV0dXJuIHBhcnRzLmF0dHJpYnV0ZSA9PT0gJ2NuYW1lJztcbiAgfSk7XG4gIHZhciBwcmltYXJ5U3NyYyA9IHNzcmNzLmxlbmd0aCA+IDAgJiYgc3NyY3NbMF0uc3NyYztcbiAgdmFyIHNlY29uZGFyeVNzcmM7XG5cbiAgdmFyIGZsb3dzID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uLCAnYT1zc3JjLWdyb3VwOkZJRCcpXG4gIC5tYXAoZnVuY3Rpb24obGluZSkge1xuICAgIHZhciBwYXJ0cyA9IGxpbmUuc3BsaXQoJyAnKTtcbiAgICBwYXJ0cy5zaGlmdCgpO1xuICAgIHJldHVybiBwYXJ0cy5tYXAoZnVuY3Rpb24ocGFydCkge1xuICAgICAgcmV0dXJuIHBhcnNlSW50KHBhcnQsIDEwKTtcbiAgICB9KTtcbiAgfSk7XG4gIGlmIChmbG93cy5sZW5ndGggPiAwICYmIGZsb3dzWzBdLmxlbmd0aCA+IDEgJiYgZmxvd3NbMF1bMF0gPT09IHByaW1hcnlTc3JjKSB7XG4gICAgc2Vjb25kYXJ5U3NyYyA9IGZsb3dzWzBdWzFdO1xuICB9XG5cbiAgZGVzY3JpcHRpb24uY29kZWNzLmZvckVhY2goZnVuY3Rpb24oY29kZWMpIHtcbiAgICBpZiAoY29kZWMubmFtZS50b1VwcGVyQ2FzZSgpID09PSAnUlRYJyAmJiBjb2RlYy5wYXJhbWV0ZXJzLmFwdCkge1xuICAgICAgdmFyIGVuY1BhcmFtID0ge1xuICAgICAgICBzc3JjOiBwcmltYXJ5U3NyYyxcbiAgICAgICAgY29kZWNQYXlsb2FkVHlwZTogcGFyc2VJbnQoY29kZWMucGFyYW1ldGVycy5hcHQsIDEwKSxcbiAgICAgICAgcnR4OiB7XG4gICAgICAgICAgc3NyYzogc2Vjb25kYXJ5U3NyY1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgZW5jb2RpbmdQYXJhbWV0ZXJzLnB1c2goZW5jUGFyYW0pO1xuICAgICAgaWYgKGhhc1JlZCkge1xuICAgICAgICBlbmNQYXJhbSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZW5jUGFyYW0pKTtcbiAgICAgICAgZW5jUGFyYW0uZmVjID0ge1xuICAgICAgICAgIHNzcmM6IHNlY29uZGFyeVNzcmMsXG4gICAgICAgICAgbWVjaGFuaXNtOiBoYXNVbHBmZWMgPyAncmVkK3VscGZlYycgOiAncmVkJ1xuICAgICAgICB9O1xuICAgICAgICBlbmNvZGluZ1BhcmFtZXRlcnMucHVzaChlbmNQYXJhbSk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbiAgaWYgKGVuY29kaW5nUGFyYW1ldGVycy5sZW5ndGggPT09IDAgJiYgcHJpbWFyeVNzcmMpIHtcbiAgICBlbmNvZGluZ1BhcmFtZXRlcnMucHVzaCh7XG4gICAgICBzc3JjOiBwcmltYXJ5U3NyY1xuICAgIH0pO1xuICB9XG5cbiAgLy8gd2Ugc3VwcG9ydCBib3RoIGI9QVMgYW5kIGI9VElBUyBidXQgaW50ZXJwcmV0IEFTIGFzIFRJQVMuXG4gIHZhciBiYW5kd2lkdGggPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdiPScpO1xuICBpZiAoYmFuZHdpZHRoLmxlbmd0aCkge1xuICAgIGlmIChiYW5kd2lkdGhbMF0uaW5kZXhPZignYj1USUFTOicpID09PSAwKSB7XG4gICAgICBiYW5kd2lkdGggPSBwYXJzZUludChiYW5kd2lkdGhbMF0uc3Vic3RyKDcpLCAxMCk7XG4gICAgfSBlbHNlIGlmIChiYW5kd2lkdGhbMF0uaW5kZXhPZignYj1BUzonKSA9PT0gMCkge1xuICAgICAgLy8gdXNlIGZvcm11bGEgZnJvbSBKU0VQIHRvIGNvbnZlcnQgYj1BUyB0byBUSUFTIHZhbHVlLlxuICAgICAgYmFuZHdpZHRoID0gcGFyc2VJbnQoYmFuZHdpZHRoWzBdLnN1YnN0cig1KSwgMTApICogMTAwMCAqIDAuOTVcbiAgICAgICAgICAtICg1MCAqIDQwICogOCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGJhbmR3aWR0aCA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgZW5jb2RpbmdQYXJhbWV0ZXJzLmZvckVhY2goZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgICBwYXJhbXMubWF4Qml0cmF0ZSA9IGJhbmR3aWR0aDtcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gZW5jb2RpbmdQYXJhbWV0ZXJzO1xufTtcblxuLy8gcGFyc2VzIGh0dHA6Ly9kcmFmdC5vcnRjLm9yZy8jcnRjcnRjcHBhcmFtZXRlcnMqXG5TRFBVdGlscy5wYXJzZVJ0Y3BQYXJhbWV0ZXJzID0gZnVuY3Rpb24obWVkaWFTZWN0aW9uKSB7XG4gIHZhciBydGNwUGFyYW1ldGVycyA9IHt9O1xuXG4gIHZhciBjbmFtZTtcbiAgLy8gR2V0cyB0aGUgZmlyc3QgU1NSQy4gTm90ZSB0aGF0IHdpdGggUlRYIHRoZXJlIG1pZ2h0IGJlIG11bHRpcGxlXG4gIC8vIFNTUkNzLlxuICB2YXIgcmVtb3RlU3NyYyA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ2E9c3NyYzonKVxuICAgICAgLm1hcChmdW5jdGlvbihsaW5lKSB7XG4gICAgICAgIHJldHVybiBTRFBVdGlscy5wYXJzZVNzcmNNZWRpYShsaW5lKTtcbiAgICAgIH0pXG4gICAgICAuZmlsdGVyKGZ1bmN0aW9uKG9iaikge1xuICAgICAgICByZXR1cm4gb2JqLmF0dHJpYnV0ZSA9PT0gJ2NuYW1lJztcbiAgICAgIH0pWzBdO1xuICBpZiAocmVtb3RlU3NyYykge1xuICAgIHJ0Y3BQYXJhbWV0ZXJzLmNuYW1lID0gcmVtb3RlU3NyYy52YWx1ZTtcbiAgICBydGNwUGFyYW1ldGVycy5zc3JjID0gcmVtb3RlU3NyYy5zc3JjO1xuICB9XG5cbiAgLy8gRWRnZSB1c2VzIHRoZSBjb21wb3VuZCBhdHRyaWJ1dGUgaW5zdGVhZCBvZiByZWR1Y2VkU2l6ZVxuICAvLyBjb21wb3VuZCBpcyAhcmVkdWNlZFNpemVcbiAgdmFyIHJzaXplID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uLCAnYT1ydGNwLXJzaXplJyk7XG4gIHJ0Y3BQYXJhbWV0ZXJzLnJlZHVjZWRTaXplID0gcnNpemUubGVuZ3RoID4gMDtcbiAgcnRjcFBhcmFtZXRlcnMuY29tcG91bmQgPSByc2l6ZS5sZW5ndGggPT09IDA7XG5cbiAgLy8gcGFyc2VzIHRoZSBydGNwLW11eCBhdHRy0ZZidXRlLlxuICAvLyBOb3RlIHRoYXQgRWRnZSBkb2VzIG5vdCBzdXBwb3J0IHVubXV4ZWQgUlRDUC5cbiAgdmFyIG11eCA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ2E9cnRjcC1tdXgnKTtcbiAgcnRjcFBhcmFtZXRlcnMubXV4ID0gbXV4Lmxlbmd0aCA+IDA7XG5cbiAgcmV0dXJuIHJ0Y3BQYXJhbWV0ZXJzO1xufTtcblxuLy8gcGFyc2VzIGVpdGhlciBhPW1zaWQ6IG9yIGE9c3NyYzouLi4gbXNpZCBsaW5lcyBhbmQgcmV0dXJuc1xuLy8gdGhlIGlkIG9mIHRoZSBNZWRpYVN0cmVhbSBhbmQgTWVkaWFTdHJlYW1UcmFjay5cblNEUFV0aWxzLnBhcnNlTXNpZCA9IGZ1bmN0aW9uKG1lZGlhU2VjdGlvbikge1xuICB2YXIgcGFydHM7XG4gIHZhciBzcGVjID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uLCAnYT1tc2lkOicpO1xuICBpZiAoc3BlYy5sZW5ndGggPT09IDEpIHtcbiAgICBwYXJ0cyA9IHNwZWNbMF0uc3Vic3RyKDcpLnNwbGl0KCcgJyk7XG4gICAgcmV0dXJuIHtzdHJlYW06IHBhcnRzWzBdLCB0cmFjazogcGFydHNbMV19O1xuICB9XG4gIHZhciBwbGFuQiA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ2E9c3NyYzonKVxuICAubWFwKGZ1bmN0aW9uKGxpbmUpIHtcbiAgICByZXR1cm4gU0RQVXRpbHMucGFyc2VTc3JjTWVkaWEobGluZSk7XG4gIH0pXG4gIC5maWx0ZXIoZnVuY3Rpb24ocGFydHMpIHtcbiAgICByZXR1cm4gcGFydHMuYXR0cmlidXRlID09PSAnbXNpZCc7XG4gIH0pO1xuICBpZiAocGxhbkIubGVuZ3RoID4gMCkge1xuICAgIHBhcnRzID0gcGxhbkJbMF0udmFsdWUuc3BsaXQoJyAnKTtcbiAgICByZXR1cm4ge3N0cmVhbTogcGFydHNbMF0sIHRyYWNrOiBwYXJ0c1sxXX07XG4gIH1cbn07XG5cbi8vIEdlbmVyYXRlIGEgc2Vzc2lvbiBJRCBmb3IgU0RQLlxuLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL2RyYWZ0LWlldGYtcnRjd2ViLWpzZXAtMjAjc2VjdGlvbi01LjIuMVxuLy8gcmVjb21tZW5kcyB1c2luZyBhIGNyeXB0b2dyYXBoaWNhbGx5IHJhbmRvbSArdmUgNjQtYml0IHZhbHVlXG4vLyBidXQgcmlnaHQgbm93IHRoaXMgc2hvdWxkIGJlIGFjY2VwdGFibGUgYW5kIHdpdGhpbiB0aGUgcmlnaHQgcmFuZ2VcblNEUFV0aWxzLmdlbmVyYXRlU2Vzc2lvbklkID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKCkuc3Vic3RyKDIsIDIxKTtcbn07XG5cbi8vIFdyaXRlIGJvaWxkZXIgcGxhdGUgZm9yIHN0YXJ0IG9mIFNEUFxuLy8gc2Vzc0lkIGFyZ3VtZW50IGlzIG9wdGlvbmFsIC0gaWYgbm90IHN1cHBsaWVkIGl0IHdpbGxcbi8vIGJlIGdlbmVyYXRlZCByYW5kb21seVxuLy8gc2Vzc1ZlcnNpb24gaXMgb3B0aW9uYWwgYW5kIGRlZmF1bHRzIHRvIDJcblNEUFV0aWxzLndyaXRlU2Vzc2lvbkJvaWxlcnBsYXRlID0gZnVuY3Rpb24oc2Vzc0lkLCBzZXNzVmVyKSB7XG4gIHZhciBzZXNzaW9uSWQ7XG4gIHZhciB2ZXJzaW9uID0gc2Vzc1ZlciAhPT0gdW5kZWZpbmVkID8gc2Vzc1ZlciA6IDI7XG4gIGlmIChzZXNzSWQpIHtcbiAgICBzZXNzaW9uSWQgPSBzZXNzSWQ7XG4gIH0gZWxzZSB7XG4gICAgc2Vzc2lvbklkID0gU0RQVXRpbHMuZ2VuZXJhdGVTZXNzaW9uSWQoKTtcbiAgfVxuICAvLyBGSVhNRTogc2Vzcy1pZCBzaG91bGQgYmUgYW4gTlRQIHRpbWVzdGFtcC5cbiAgcmV0dXJuICd2PTBcXHJcXG4nICtcbiAgICAgICdvPXRoaXNpc2FkYXB0ZXJvcnRjICcgKyBzZXNzaW9uSWQgKyAnICcgKyB2ZXJzaW9uICsgJyBJTiBJUDQgMTI3LjAuMC4xXFxyXFxuJyArXG4gICAgICAncz0tXFxyXFxuJyArXG4gICAgICAndD0wIDBcXHJcXG4nO1xufTtcblxuU0RQVXRpbHMud3JpdGVNZWRpYVNlY3Rpb24gPSBmdW5jdGlvbih0cmFuc2NlaXZlciwgY2FwcywgdHlwZSwgc3RyZWFtKSB7XG4gIHZhciBzZHAgPSBTRFBVdGlscy53cml0ZVJ0cERlc2NyaXB0aW9uKHRyYW5zY2VpdmVyLmtpbmQsIGNhcHMpO1xuXG4gIC8vIE1hcCBJQ0UgcGFyYW1ldGVycyAodWZyYWcsIHB3ZCkgdG8gU0RQLlxuICBzZHAgKz0gU0RQVXRpbHMud3JpdGVJY2VQYXJhbWV0ZXJzKFxuICAgICAgdHJhbnNjZWl2ZXIuaWNlR2F0aGVyZXIuZ2V0TG9jYWxQYXJhbWV0ZXJzKCkpO1xuXG4gIC8vIE1hcCBEVExTIHBhcmFtZXRlcnMgdG8gU0RQLlxuICBzZHAgKz0gU0RQVXRpbHMud3JpdGVEdGxzUGFyYW1ldGVycyhcbiAgICAgIHRyYW5zY2VpdmVyLmR0bHNUcmFuc3BvcnQuZ2V0TG9jYWxQYXJhbWV0ZXJzKCksXG4gICAgICB0eXBlID09PSAnb2ZmZXInID8gJ2FjdHBhc3MnIDogJ2FjdGl2ZScpO1xuXG4gIHNkcCArPSAnYT1taWQ6JyArIHRyYW5zY2VpdmVyLm1pZCArICdcXHJcXG4nO1xuXG4gIGlmICh0cmFuc2NlaXZlci5kaXJlY3Rpb24pIHtcbiAgICBzZHAgKz0gJ2E9JyArIHRyYW5zY2VpdmVyLmRpcmVjdGlvbiArICdcXHJcXG4nO1xuICB9IGVsc2UgaWYgKHRyYW5zY2VpdmVyLnJ0cFNlbmRlciAmJiB0cmFuc2NlaXZlci5ydHBSZWNlaXZlcikge1xuICAgIHNkcCArPSAnYT1zZW5kcmVjdlxcclxcbic7XG4gIH0gZWxzZSBpZiAodHJhbnNjZWl2ZXIucnRwU2VuZGVyKSB7XG4gICAgc2RwICs9ICdhPXNlbmRvbmx5XFxyXFxuJztcbiAgfSBlbHNlIGlmICh0cmFuc2NlaXZlci5ydHBSZWNlaXZlcikge1xuICAgIHNkcCArPSAnYT1yZWN2b25seVxcclxcbic7XG4gIH0gZWxzZSB7XG4gICAgc2RwICs9ICdhPWluYWN0aXZlXFxyXFxuJztcbiAgfVxuXG4gIGlmICh0cmFuc2NlaXZlci5ydHBTZW5kZXIpIHtcbiAgICAvLyBzcGVjLlxuICAgIHZhciBtc2lkID0gJ21zaWQ6JyArIHN0cmVhbS5pZCArICcgJyArXG4gICAgICAgIHRyYW5zY2VpdmVyLnJ0cFNlbmRlci50cmFjay5pZCArICdcXHJcXG4nO1xuICAgIHNkcCArPSAnYT0nICsgbXNpZDtcblxuICAgIC8vIGZvciBDaHJvbWUuXG4gICAgc2RwICs9ICdhPXNzcmM6JyArIHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0uc3NyYyArXG4gICAgICAgICcgJyArIG1zaWQ7XG4gICAgaWYgKHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4KSB7XG4gICAgICBzZHAgKz0gJ2E9c3NyYzonICsgdHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHguc3NyYyArXG4gICAgICAgICAgJyAnICsgbXNpZDtcbiAgICAgIHNkcCArPSAnYT1zc3JjLWdyb3VwOkZJRCAnICtcbiAgICAgICAgICB0cmFuc2NlaXZlci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnNzcmMgKyAnICcgK1xuICAgICAgICAgIHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4LnNzcmMgK1xuICAgICAgICAgICdcXHJcXG4nO1xuICAgIH1cbiAgfVxuICAvLyBGSVhNRTogdGhpcyBzaG91bGQgYmUgd3JpdHRlbiBieSB3cml0ZVJ0cERlc2NyaXB0aW9uLlxuICBzZHAgKz0gJ2E9c3NyYzonICsgdHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5zc3JjICtcbiAgICAgICcgY25hbWU6JyArIFNEUFV0aWxzLmxvY2FsQ05hbWUgKyAnXFxyXFxuJztcbiAgaWYgKHRyYW5zY2VpdmVyLnJ0cFNlbmRlciAmJiB0cmFuc2NlaXZlci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eCkge1xuICAgIHNkcCArPSAnYT1zc3JjOicgKyB0cmFuc2NlaXZlci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eC5zc3JjICtcbiAgICAgICAgJyBjbmFtZTonICsgU0RQVXRpbHMubG9jYWxDTmFtZSArICdcXHJcXG4nO1xuICB9XG4gIHJldHVybiBzZHA7XG59O1xuXG4vLyBHZXRzIHRoZSBkaXJlY3Rpb24gZnJvbSB0aGUgbWVkaWFTZWN0aW9uIG9yIHRoZSBzZXNzaW9ucGFydC5cblNEUFV0aWxzLmdldERpcmVjdGlvbiA9IGZ1bmN0aW9uKG1lZGlhU2VjdGlvbiwgc2Vzc2lvbnBhcnQpIHtcbiAgLy8gTG9vayBmb3Igc2VuZHJlY3YsIHNlbmRvbmx5LCByZWN2b25seSwgaW5hY3RpdmUsIGRlZmF1bHQgdG8gc2VuZHJlY3YuXG4gIHZhciBsaW5lcyA9IFNEUFV0aWxzLnNwbGl0TGluZXMobWVkaWFTZWN0aW9uKTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykge1xuICAgIHN3aXRjaCAobGluZXNbaV0pIHtcbiAgICAgIGNhc2UgJ2E9c2VuZHJlY3YnOlxuICAgICAgY2FzZSAnYT1zZW5kb25seSc6XG4gICAgICBjYXNlICdhPXJlY3Zvbmx5JzpcbiAgICAgIGNhc2UgJ2E9aW5hY3RpdmUnOlxuICAgICAgICByZXR1cm4gbGluZXNbaV0uc3Vic3RyKDIpO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgLy8gRklYTUU6IFdoYXQgc2hvdWxkIGhhcHBlbiBoZXJlP1xuICAgIH1cbiAgfVxuICBpZiAoc2Vzc2lvbnBhcnQpIHtcbiAgICByZXR1cm4gU0RQVXRpbHMuZ2V0RGlyZWN0aW9uKHNlc3Npb25wYXJ0KTtcbiAgfVxuICByZXR1cm4gJ3NlbmRyZWN2Jztcbn07XG5cblNEUFV0aWxzLmdldEtpbmQgPSBmdW5jdGlvbihtZWRpYVNlY3Rpb24pIHtcbiAgdmFyIGxpbmVzID0gU0RQVXRpbHMuc3BsaXRMaW5lcyhtZWRpYVNlY3Rpb24pO1xuICB2YXIgbWxpbmUgPSBsaW5lc1swXS5zcGxpdCgnICcpO1xuICByZXR1cm4gbWxpbmVbMF0uc3Vic3RyKDIpO1xufTtcblxuU0RQVXRpbHMuaXNSZWplY3RlZCA9IGZ1bmN0aW9uKG1lZGlhU2VjdGlvbikge1xuICByZXR1cm4gbWVkaWFTZWN0aW9uLnNwbGl0KCcgJywgMilbMV0gPT09ICcwJztcbn07XG5cblNEUFV0aWxzLnBhcnNlTUxpbmUgPSBmdW5jdGlvbihtZWRpYVNlY3Rpb24pIHtcbiAgdmFyIGxpbmVzID0gU0RQVXRpbHMuc3BsaXRMaW5lcyhtZWRpYVNlY3Rpb24pO1xuICB2YXIgcGFydHMgPSBsaW5lc1swXS5zdWJzdHIoMikuc3BsaXQoJyAnKTtcbiAgcmV0dXJuIHtcbiAgICBraW5kOiBwYXJ0c1swXSxcbiAgICBwb3J0OiBwYXJzZUludChwYXJ0c1sxXSwgMTApLFxuICAgIHByb3RvY29sOiBwYXJ0c1syXSxcbiAgICBmbXQ6IHBhcnRzLnNsaWNlKDMpLmpvaW4oJyAnKVxuICB9O1xufTtcblxuU0RQVXRpbHMucGFyc2VPTGluZSA9IGZ1bmN0aW9uKG1lZGlhU2VjdGlvbikge1xuICB2YXIgbGluZSA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ289JylbMF07XG4gIHZhciBwYXJ0cyA9IGxpbmUuc3Vic3RyKDIpLnNwbGl0KCcgJyk7XG4gIHJldHVybiB7XG4gICAgdXNlcm5hbWU6IHBhcnRzWzBdLFxuICAgIHNlc3Npb25JZDogcGFydHNbMV0sXG4gICAgc2Vzc2lvblZlcnNpb246IHBhcnNlSW50KHBhcnRzWzJdLCAxMCksXG4gICAgbmV0VHlwZTogcGFydHNbM10sXG4gICAgYWRkcmVzc1R5cGU6IHBhcnRzWzRdLFxuICAgIGFkZHJlc3M6IHBhcnRzWzVdLFxuICB9O1xufVxuXG4vLyBFeHBvc2UgcHVibGljIG1ldGhvZHMuXG5pZiAodHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSBTRFBVdGlscztcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL3NkcC9zZHAuanNcbi8vIG1vZHVsZSBpZCA9IDI0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///24\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _screenfull = __webpack_require__(/*! screenfull */ 68);\n\nvar _screenfull2 = _interopRequireDefault(_screenfull);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar FullscreenHelper = function () {\n  function FullscreenHelper() {\n    _classCallCheck(this, FullscreenHelper);\n\n    this.onChange = this.onChange.bind(this);\n    this.hasSupport = _screenfull2.default && _screenfull2.default.enabled;\n  }\n\n  _createClass(FullscreenHelper, [{\n    key: 'toggle',\n    value: function toggle() {\n      return this.isFullscreen() ? _screenfull2.default.exit() : _screenfull2.default.request();\n    }\n  }, {\n    key: 'canFullscreen',\n    value: function canFullscreen() {\n      return this.hasSupport;\n    }\n  }, {\n    key: 'isFullscreen',\n    value: function isFullscreen() {\n      return this.hasSupport && _screenfull2.default.isFullscreen;\n    }\n  }, {\n    key: 'onChange',\n    value: function onChange(callback) {\n      var _this = this;\n\n      if (!this.hasSupport) {\n        return;\n      }\n\n      _screenfull2.default.on('change', function () {\n        callback(_this.isFullscreen());\n      });\n    }\n  }, {\n    key: 'off',\n    value: function off() {\n      if (!this.hasSupport) {\n        return;\n      }\n\n      _screenfull2.default.off('change');\n    }\n  }]);\n\n  return FullscreenHelper;\n}();\n\nexports.default = FullscreenHelper;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL0Z1bGxzY3JlZW5IZWxwZXIuanM/MTAxMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgc2NyZWVuZnVsbCBmcm9tICdzY3JlZW5mdWxsJztcblxuY2xhc3MgRnVsbHNjcmVlbkhlbHBlciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMub25DaGFuZ2UgPSB0aGlzLm9uQ2hhbmdlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5oYXNTdXBwb3J0ID0gc2NyZWVuZnVsbCAmJiBzY3JlZW5mdWxsLmVuYWJsZWQ7XG4gIH1cblxuICB0b2dnbGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNGdWxsc2NyZWVuKCkgPyBzY3JlZW5mdWxsLmV4aXQoKSA6IHNjcmVlbmZ1bGwucmVxdWVzdCgpO1xuICB9XG5cbiAgY2FuRnVsbHNjcmVlbigpIHtcbiAgICByZXR1cm4gdGhpcy5oYXNTdXBwb3J0O1xuICB9XG5cbiAgaXNGdWxsc2NyZWVuKCkge1xuICAgIHJldHVybiB0aGlzLmhhc1N1cHBvcnQgJiYgc2NyZWVuZnVsbC5pc0Z1bGxzY3JlZW47XG4gIH1cblxuICBvbkNoYW5nZShjYWxsYmFjaykge1xuICAgIGlmICghdGhpcy5oYXNTdXBwb3J0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgc2NyZWVuZnVsbC5vbignY2hhbmdlJywgKCkgPT4ge1xuICAgICAgY2FsbGJhY2sodGhpcy5pc0Z1bGxzY3JlZW4oKSk7XG4gICAgfSk7XG4gIH1cblxuICBvZmYoKSB7XG4gICAgaWYgKCF0aGlzLmhhc1N1cHBvcnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzY3JlZW5mdWxsLm9mZignY2hhbmdlJyk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRnVsbHNjcmVlbkhlbHBlcjtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBzcmMvRnVsbHNjcmVlbkhlbHBlci5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUNBOzs7Ozs7O0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQUdBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///25\n")},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _BaseEvent2 = __webpack_require__(/*! ./BaseEvent */ 1);\n\nvar _BaseEvent3 = _interopRequireDefault(_BaseEvent2);\n\nvar _Logger = __webpack_require__(/*! ../Logger */ 0);\n\nvar _Logger2 = _interopRequireDefault(_Logger);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * Forward an event.\n **/\nvar ForwardEvent = function (_BaseEvent) {\n  _inherits(ForwardEvent, _BaseEvent);\n\n  function ForwardEvent() {\n    _classCallCheck(this, ForwardEvent);\n\n    return _possibleConstructorReturn(this, (ForwardEvent.__proto__ || Object.getPrototypeOf(ForwardEvent)).apply(this, arguments));\n  }\n\n  _createClass(ForwardEvent, [{\n    key: \'handle\',\n    value: function handle(msg) {\n      _Logger2.default.debug(\'ForwardEvent::handle\', msg);\n      this.context.listeners.forEach(function (callback) {\n        return callback(msg);\n      });\n    }\n  }]);\n\n  return ForwardEvent;\n}(_BaseEvent3.default);\n\nexports.default = ForwardEvent;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2V2ZW50cy9Gb3J3YXJkRXZlbnQuanM/ZWJiMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQmFzZUV2ZW50IGZyb20gJy4vQmFzZUV2ZW50JztcbmltcG9ydCBMb2dnZXIgZnJvbSAnLi4vTG9nZ2VyJztcblxuLyoqXG4gKiBGb3J3YXJkIGFuIGV2ZW50LlxuICoqL1xuY2xhc3MgRm9yd2FyZEV2ZW50IGV4dGVuZHMgQmFzZUV2ZW50IHtcbiAgaGFuZGxlKG1zZykge1xuICAgIExvZ2dlci5kZWJ1ZygnRm9yd2FyZEV2ZW50OjpoYW5kbGUnLCBtc2cpO1xuICAgIHRoaXMuY29udGV4dC5saXN0ZW5lcnMuZm9yRWFjaChjYWxsYmFjayA9PiBjYWxsYmFjayhtc2cpKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBGb3J3YXJkRXZlbnQ7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc3JjL2V2ZW50cy9Gb3J3YXJkRXZlbnQuanMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7Ozs7Ozs7Ozs7QUFDQTs7O0FBR0E7Ozs7Ozs7Ozs7O0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBOzs7Ozs7QUFHQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///26\n')},function(e,t,n){n(28),n(46),e.exports=n(51)},function(module,exports,__webpack_require__){eval("__webpack_require__(/*! ../../modules/es7.array.includes */ 29);\nmodule.exports = __webpack_require__(/*! ../../modules/_core */ 7).Array.includes;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjguanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9mbi9hcnJheS9pbmNsdWRlcy5qcz81ZjFlIl0sInNvdXJjZXNDb250ZW50IjpbInJlcXVpcmUoJy4uLy4uL21vZHVsZXMvZXM3LmFycmF5LmluY2x1ZGVzJyk7XG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4uLy4uL21vZHVsZXMvX2NvcmUnKS5BcnJheS5pbmNsdWRlcztcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NvcmUtanMvZm4vYXJyYXkvaW5jbHVkZXMuanNcbi8vIG1vZHVsZSBpZCA9IDI4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///28\n")},function(module,exports,__webpack_require__){"use strict";eval("\n// https://github.com/tc39/Array.prototype.includes\nvar $export = __webpack_require__(/*! ./_export */ 13);\nvar $includes = __webpack_require__(/*! ./_array-includes */ 39)(true);\n\n$export($export.P, 'Array', {\n  includes: function includes(el /* , fromIndex = 0 */) {\n    return $includes(this, el, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n__webpack_require__(/*! ./_add-to-unscopables */ 43)('includes');\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjkuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL2VzNy5hcnJheS5pbmNsdWRlcy5qcz9kOWExIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0Jztcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS90YzM5L0FycmF5LnByb3RvdHlwZS5pbmNsdWRlc1xudmFyICRleHBvcnQgPSByZXF1aXJlKCcuL19leHBvcnQnKTtcbnZhciAkaW5jbHVkZXMgPSByZXF1aXJlKCcuL19hcnJheS1pbmNsdWRlcycpKHRydWUpO1xuXG4kZXhwb3J0KCRleHBvcnQuUCwgJ0FycmF5Jywge1xuICBpbmNsdWRlczogZnVuY3Rpb24gaW5jbHVkZXMoZWwgLyogLCBmcm9tSW5kZXggPSAwICovKSB7XG4gICAgcmV0dXJuICRpbmNsdWRlcyh0aGlzLCBlbCwgYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQpO1xuICB9XG59KTtcblxucmVxdWlyZSgnLi9fYWRkLXRvLXVuc2NvcGFibGVzJykoJ2luY2x1ZGVzJyk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jb3JlLWpzL21vZHVsZXMvZXM3LmFycmF5LmluY2x1ZGVzLmpzXG4vLyBtb2R1bGUgaWQgPSAyOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///29\n")},function(module,exports,__webpack_require__){eval("var anObject = __webpack_require__(/*! ./_an-object */ 31);\nvar IE8_DOM_DEFINE = __webpack_require__(/*! ./_ie8-dom-define */ 32);\nvar toPrimitive = __webpack_require__(/*! ./_to-primitive */ 34);\nvar dP = Object.defineProperty;\n\nexports.f = __webpack_require__(/*! ./_descriptors */ 10) ? Object.defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return dP(O, P, Attributes);\n  } catch (e) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported!');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL19vYmplY3QtZHAuanM/NmIyZCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgYW5PYmplY3QgPSByZXF1aXJlKCcuL19hbi1vYmplY3QnKTtcbnZhciBJRThfRE9NX0RFRklORSA9IHJlcXVpcmUoJy4vX2llOC1kb20tZGVmaW5lJyk7XG52YXIgdG9QcmltaXRpdmUgPSByZXF1aXJlKCcuL190by1wcmltaXRpdmUnKTtcbnZhciBkUCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcblxuZXhwb3J0cy5mID0gcmVxdWlyZSgnLi9fZGVzY3JpcHRvcnMnKSA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSA6IGZ1bmN0aW9uIGRlZmluZVByb3BlcnR5KE8sIFAsIEF0dHJpYnV0ZXMpIHtcbiAgYW5PYmplY3QoTyk7XG4gIFAgPSB0b1ByaW1pdGl2ZShQLCB0cnVlKTtcbiAgYW5PYmplY3QoQXR0cmlidXRlcyk7XG4gIGlmIChJRThfRE9NX0RFRklORSkgdHJ5IHtcbiAgICByZXR1cm4gZFAoTywgUCwgQXR0cmlidXRlcyk7XG4gIH0gY2F0Y2ggKGUpIHsgLyogZW1wdHkgKi8gfVxuICBpZiAoJ2dldCcgaW4gQXR0cmlidXRlcyB8fCAnc2V0JyBpbiBBdHRyaWJ1dGVzKSB0aHJvdyBUeXBlRXJyb3IoJ0FjY2Vzc29ycyBub3Qgc3VwcG9ydGVkIScpO1xuICBpZiAoJ3ZhbHVlJyBpbiBBdHRyaWJ1dGVzKSBPW1BdID0gQXR0cmlidXRlcy52YWx1ZTtcbiAgcmV0dXJuIE87XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL19vYmplY3QtZHAuanNcbi8vIG1vZHVsZSBpZCA9IDMwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///30\n")},function(module,exports,__webpack_require__){eval("var isObject = __webpack_require__(/*! ./_is-object */ 9);\nmodule.exports = function (it) {\n  if (!isObject(it)) throw TypeError(it + ' is not an object!');\n  return it;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL19hbi1vYmplY3QuanM/ZjA4MSJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgaXNPYmplY3QgPSByZXF1aXJlKCcuL19pcy1vYmplY3QnKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0KSB7XG4gIGlmICghaXNPYmplY3QoaXQpKSB0aHJvdyBUeXBlRXJyb3IoaXQgKyAnIGlzIG5vdCBhbiBvYmplY3QhJyk7XG4gIHJldHVybiBpdDtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jb3JlLWpzL21vZHVsZXMvX2FuLW9iamVjdC5qc1xuLy8gbW9kdWxlIGlkID0gMzFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///31\n")},function(module,exports,__webpack_require__){eval("module.exports = !__webpack_require__(/*! ./_descriptors */ 10) && !__webpack_require__(/*! ./_fails */ 11)(function () {\n  return Object.defineProperty(__webpack_require__(/*! ./_dom-create */ 33)('div'), 'a', { get: function () { return 7; } }).a != 7;\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL19pZTgtZG9tLWRlZmluZS5qcz81M2Y1Il0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gIXJlcXVpcmUoJy4vX2Rlc2NyaXB0b3JzJykgJiYgIXJlcXVpcmUoJy4vX2ZhaWxzJykoZnVuY3Rpb24gKCkge1xuICByZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KHJlcXVpcmUoJy4vX2RvbS1jcmVhdGUnKSgnZGl2JyksICdhJywgeyBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIDc7IH0gfSkuYSAhPSA3O1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jb3JlLWpzL21vZHVsZXMvX2llOC1kb20tZGVmaW5lLmpzXG4vLyBtb2R1bGUgaWQgPSAzMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///32\n")},function(module,exports,__webpack_require__){eval("var isObject = __webpack_require__(/*! ./_is-object */ 9);\nvar document = __webpack_require__(/*! ./_global */ 6).document;\n// typeof document.createElement is 'object' in old IE\nvar is = isObject(document) && isObject(document.createElement);\nmodule.exports = function (it) {\n  return is ? document.createElement(it) : {};\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL19kb20tY3JlYXRlLmpzP2ZlOTkiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi9faXMtb2JqZWN0Jyk7XG52YXIgZG9jdW1lbnQgPSByZXF1aXJlKCcuL19nbG9iYWwnKS5kb2N1bWVudDtcbi8vIHR5cGVvZiBkb2N1bWVudC5jcmVhdGVFbGVtZW50IGlzICdvYmplY3QnIGluIG9sZCBJRVxudmFyIGlzID0gaXNPYmplY3QoZG9jdW1lbnQpICYmIGlzT2JqZWN0KGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaXQpIHtcbiAgcmV0dXJuIGlzID8gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChpdCkgOiB7fTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jb3JlLWpzL21vZHVsZXMvX2RvbS1jcmVhdGUuanNcbi8vIG1vZHVsZSBpZCA9IDMzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///33\n")},function(module,exports,__webpack_require__){eval("// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = __webpack_require__(/*! ./_is-object */ 9);\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (it, S) {\n  if (!isObject(it)) return it;\n  var fn, val;\n  if (S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL190by1wcmltaXRpdmUuanM/YmM1OCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyA3LjEuMSBUb1ByaW1pdGl2ZShpbnB1dCBbLCBQcmVmZXJyZWRUeXBlXSlcbnZhciBpc09iamVjdCA9IHJlcXVpcmUoJy4vX2lzLW9iamVjdCcpO1xuLy8gaW5zdGVhZCBvZiB0aGUgRVM2IHNwZWMgdmVyc2lvbiwgd2UgZGlkbid0IGltcGxlbWVudCBAQHRvUHJpbWl0aXZlIGNhc2Vcbi8vIGFuZCB0aGUgc2Vjb25kIGFyZ3VtZW50IC0gZmxhZyAtIHByZWZlcnJlZCB0eXBlIGlzIGEgc3RyaW5nXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdCwgUykge1xuICBpZiAoIWlzT2JqZWN0KGl0KSkgcmV0dXJuIGl0O1xuICB2YXIgZm4sIHZhbDtcbiAgaWYgKFMgJiYgdHlwZW9mIChmbiA9IGl0LnRvU3RyaW5nKSA9PSAnZnVuY3Rpb24nICYmICFpc09iamVjdCh2YWwgPSBmbi5jYWxsKGl0KSkpIHJldHVybiB2YWw7XG4gIGlmICh0eXBlb2YgKGZuID0gaXQudmFsdWVPZikgPT0gJ2Z1bmN0aW9uJyAmJiAhaXNPYmplY3QodmFsID0gZm4uY2FsbChpdCkpKSByZXR1cm4gdmFsO1xuICBpZiAoIVMgJiYgdHlwZW9mIChmbiA9IGl0LnRvU3RyaW5nKSA9PSAnZnVuY3Rpb24nICYmICFpc09iamVjdCh2YWwgPSBmbi5jYWxsKGl0KSkpIHJldHVybiB2YWw7XG4gIHRocm93IFR5cGVFcnJvcihcIkNhbid0IGNvbnZlcnQgb2JqZWN0IHRvIHByaW1pdGl2ZSB2YWx1ZVwiKTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jb3JlLWpzL21vZHVsZXMvX3RvLXByaW1pdGl2ZS5qc1xuLy8gbW9kdWxlIGlkID0gMzRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///34\n")},function(module,exports){eval("module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzUuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL19wcm9wZXJ0eS1kZXNjLmpzPzljNDAiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYml0bWFwLCB2YWx1ZSkge1xuICByZXR1cm4ge1xuICAgIGVudW1lcmFibGU6ICEoYml0bWFwICYgMSksXG4gICAgY29uZmlndXJhYmxlOiAhKGJpdG1hcCAmIDIpLFxuICAgIHdyaXRhYmxlOiAhKGJpdG1hcCAmIDQpLFxuICAgIHZhbHVlOiB2YWx1ZVxuICB9O1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9fcHJvcGVydHktZGVzYy5qc1xuLy8gbW9kdWxlIGlkID0gMzVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///35\n")},function(module,exports,__webpack_require__){eval("var global = __webpack_require__(/*! ./_global */ 6);\nvar hide = __webpack_require__(/*! ./_hide */ 8);\nvar has = __webpack_require__(/*! ./_has */ 37);\nvar SRC = __webpack_require__(/*! ./_uid */ 14)('src');\nvar TO_STRING = 'toString';\nvar $toString = Function[TO_STRING];\nvar TPL = ('' + $toString).split(TO_STRING);\n\n__webpack_require__(/*! ./_core */ 7).inspectSource = function (it) {\n  return $toString.call(it);\n};\n\n(module.exports = function (O, key, val, safe) {\n  var isFunction = typeof val == 'function';\n  if (isFunction) has(val, 'name') || hide(val, 'name', key);\n  if (O[key] === val) return;\n  if (isFunction) has(val, SRC) || hide(val, SRC, O[key] ? '' + O[key] : TPL.join(String(key)));\n  if (O === global) {\n    O[key] = val;\n  } else if (!safe) {\n    delete O[key];\n    hide(O, key, val);\n  } else if (O[key]) {\n    O[key] = val;\n  } else {\n    hide(O, key, val);\n  }\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n})(Function.prototype, TO_STRING, function toString() {\n  return typeof this == 'function' && this[SRC] || $toString.call(this);\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL19yZWRlZmluZS5qcz84YTQzIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBnbG9iYWwgPSByZXF1aXJlKCcuL19nbG9iYWwnKTtcbnZhciBoaWRlID0gcmVxdWlyZSgnLi9faGlkZScpO1xudmFyIGhhcyA9IHJlcXVpcmUoJy4vX2hhcycpO1xudmFyIFNSQyA9IHJlcXVpcmUoJy4vX3VpZCcpKCdzcmMnKTtcbnZhciBUT19TVFJJTkcgPSAndG9TdHJpbmcnO1xudmFyICR0b1N0cmluZyA9IEZ1bmN0aW9uW1RPX1NUUklOR107XG52YXIgVFBMID0gKCcnICsgJHRvU3RyaW5nKS5zcGxpdChUT19TVFJJTkcpO1xuXG5yZXF1aXJlKCcuL19jb3JlJykuaW5zcGVjdFNvdXJjZSA9IGZ1bmN0aW9uIChpdCkge1xuICByZXR1cm4gJHRvU3RyaW5nLmNhbGwoaXQpO1xufTtcblxuKG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKE8sIGtleSwgdmFsLCBzYWZlKSB7XG4gIHZhciBpc0Z1bmN0aW9uID0gdHlwZW9mIHZhbCA9PSAnZnVuY3Rpb24nO1xuICBpZiAoaXNGdW5jdGlvbikgaGFzKHZhbCwgJ25hbWUnKSB8fCBoaWRlKHZhbCwgJ25hbWUnLCBrZXkpO1xuICBpZiAoT1trZXldID09PSB2YWwpIHJldHVybjtcbiAgaWYgKGlzRnVuY3Rpb24pIGhhcyh2YWwsIFNSQykgfHwgaGlkZSh2YWwsIFNSQywgT1trZXldID8gJycgKyBPW2tleV0gOiBUUEwuam9pbihTdHJpbmcoa2V5KSkpO1xuICBpZiAoTyA9PT0gZ2xvYmFsKSB7XG4gICAgT1trZXldID0gdmFsO1xuICB9IGVsc2UgaWYgKCFzYWZlKSB7XG4gICAgZGVsZXRlIE9ba2V5XTtcbiAgICBoaWRlKE8sIGtleSwgdmFsKTtcbiAgfSBlbHNlIGlmIChPW2tleV0pIHtcbiAgICBPW2tleV0gPSB2YWw7XG4gIH0gZWxzZSB7XG4gICAgaGlkZShPLCBrZXksIHZhbCk7XG4gIH1cbi8vIGFkZCBmYWtlIEZ1bmN0aW9uI3RvU3RyaW5nIGZvciBjb3JyZWN0IHdvcmsgd3JhcHBlZCBtZXRob2RzIC8gY29uc3RydWN0b3JzIHdpdGggbWV0aG9kcyBsaWtlIExvRGFzaCBpc05hdGl2ZVxufSkoRnVuY3Rpb24ucHJvdG90eXBlLCBUT19TVFJJTkcsIGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuICByZXR1cm4gdHlwZW9mIHRoaXMgPT0gJ2Z1bmN0aW9uJyAmJiB0aGlzW1NSQ10gfHwgJHRvU3RyaW5nLmNhbGwodGhpcyk7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9fcmVkZWZpbmUuanNcbi8vIG1vZHVsZSBpZCA9IDM2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///36\n")},function(module,exports){eval("var hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzcuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL19oYXMuanM/ZWVkYiJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgaGFzT3duUHJvcGVydHkgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0LCBrZXkpIHtcbiAgcmV0dXJuIGhhc093blByb3BlcnR5LmNhbGwoaXQsIGtleSk7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL19oYXMuanNcbi8vIG1vZHVsZSBpZCA9IDM3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///37\n")},function(module,exports,__webpack_require__){eval("// optional / simple context binding\nvar aFunction = __webpack_require__(/*! ./_a-function */ 15);\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzguanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL19jdHguanM/MjRiMSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBvcHRpb25hbCAvIHNpbXBsZSBjb250ZXh0IGJpbmRpbmdcbnZhciBhRnVuY3Rpb24gPSByZXF1aXJlKCcuL19hLWZ1bmN0aW9uJyk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChmbiwgdGhhdCwgbGVuZ3RoKSB7XG4gIGFGdW5jdGlvbihmbik7XG4gIGlmICh0aGF0ID09PSB1bmRlZmluZWQpIHJldHVybiBmbjtcbiAgc3dpdGNoIChsZW5ndGgpIHtcbiAgICBjYXNlIDE6IHJldHVybiBmdW5jdGlvbiAoYSkge1xuICAgICAgcmV0dXJuIGZuLmNhbGwodGhhdCwgYSk7XG4gICAgfTtcbiAgICBjYXNlIDI6IHJldHVybiBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgcmV0dXJuIGZuLmNhbGwodGhhdCwgYSwgYik7XG4gICAgfTtcbiAgICBjYXNlIDM6IHJldHVybiBmdW5jdGlvbiAoYSwgYiwgYykge1xuICAgICAgcmV0dXJuIGZuLmNhbGwodGhhdCwgYSwgYiwgYyk7XG4gICAgfTtcbiAgfVxuICByZXR1cm4gZnVuY3Rpb24gKC8qIC4uLmFyZ3MgKi8pIHtcbiAgICByZXR1cm4gZm4uYXBwbHkodGhhdCwgYXJndW1lbnRzKTtcbiAgfTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jb3JlLWpzL21vZHVsZXMvX2N0eC5qc1xuLy8gbW9kdWxlIGlkID0gMzhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///38\n")},function(module,exports,__webpack_require__){eval("// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = __webpack_require__(/*! ./_to-iobject */ 40);\nvar toLength = __webpack_require__(/*! ./_to-length */ 18);\nvar toAbsoluteIndex = __webpack_require__(/*! ./_to-absolute-index */ 42);\nmodule.exports = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) if (IS_INCLUDES || index in O) {\n      if (O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzkuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL19hcnJheS1pbmNsdWRlcy5qcz81M2JmIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGZhbHNlIC0+IEFycmF5I2luZGV4T2Zcbi8vIHRydWUgIC0+IEFycmF5I2luY2x1ZGVzXG52YXIgdG9JT2JqZWN0ID0gcmVxdWlyZSgnLi9fdG8taW9iamVjdCcpO1xudmFyIHRvTGVuZ3RoID0gcmVxdWlyZSgnLi9fdG8tbGVuZ3RoJyk7XG52YXIgdG9BYnNvbHV0ZUluZGV4ID0gcmVxdWlyZSgnLi9fdG8tYWJzb2x1dGUtaW5kZXgnKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKElTX0lOQ0xVREVTKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoJHRoaXMsIGVsLCBmcm9tSW5kZXgpIHtcbiAgICB2YXIgTyA9IHRvSU9iamVjdCgkdGhpcyk7XG4gICAgdmFyIGxlbmd0aCA9IHRvTGVuZ3RoKE8ubGVuZ3RoKTtcbiAgICB2YXIgaW5kZXggPSB0b0Fic29sdXRlSW5kZXgoZnJvbUluZGV4LCBsZW5ndGgpO1xuICAgIHZhciB2YWx1ZTtcbiAgICAvLyBBcnJheSNpbmNsdWRlcyB1c2VzIFNhbWVWYWx1ZVplcm8gZXF1YWxpdHkgYWxnb3JpdGhtXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNlbGYtY29tcGFyZVxuICAgIGlmIChJU19JTkNMVURFUyAmJiBlbCAhPSBlbCkgd2hpbGUgKGxlbmd0aCA+IGluZGV4KSB7XG4gICAgICB2YWx1ZSA9IE9baW5kZXgrK107XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tc2VsZi1jb21wYXJlXG4gICAgICBpZiAodmFsdWUgIT0gdmFsdWUpIHJldHVybiB0cnVlO1xuICAgIC8vIEFycmF5I2luZGV4T2YgaWdub3JlcyBob2xlcywgQXJyYXkjaW5jbHVkZXMgLSBub3RcbiAgICB9IGVsc2UgZm9yICg7bGVuZ3RoID4gaW5kZXg7IGluZGV4KyspIGlmIChJU19JTkNMVURFUyB8fCBpbmRleCBpbiBPKSB7XG4gICAgICBpZiAoT1tpbmRleF0gPT09IGVsKSByZXR1cm4gSVNfSU5DTFVERVMgfHwgaW5kZXggfHwgMDtcbiAgICB9IHJldHVybiAhSVNfSU5DTFVERVMgJiYgLTE7XG4gIH07XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL19hcnJheS1pbmNsdWRlcy5qc1xuLy8gbW9kdWxlIGlkID0gMzlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///39\n")},function(module,exports,__webpack_require__){eval("// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = __webpack_require__(/*! ./_iobject */ 16);\nvar defined = __webpack_require__(/*! ./_defined */ 17);\nmodule.exports = function (it) {\n  return IObject(defined(it));\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL190by1pb2JqZWN0LmpzP2VjZGQiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gdG8gaW5kZXhlZCBvYmplY3QsIHRvT2JqZWN0IHdpdGggZmFsbGJhY2sgZm9yIG5vbi1hcnJheS1saWtlIEVTMyBzdHJpbmdzXG52YXIgSU9iamVjdCA9IHJlcXVpcmUoJy4vX2lvYmplY3QnKTtcbnZhciBkZWZpbmVkID0gcmVxdWlyZSgnLi9fZGVmaW5lZCcpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaXQpIHtcbiAgcmV0dXJuIElPYmplY3QoZGVmaW5lZChpdCkpO1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9fdG8taW9iamVjdC5qc1xuLy8gbW9kdWxlIGlkID0gNDBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///40\n")},function(module,exports){eval("var toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL19jb2YuanM/NzljMyJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgdG9TdHJpbmcgPSB7fS50b1N0cmluZztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaXQpIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwoaXQpLnNsaWNlKDgsIC0xKTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jb3JlLWpzL21vZHVsZXMvX2NvZi5qc1xuLy8gbW9kdWxlIGlkID0gNDFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///41\n")},function(module,exports,__webpack_require__){eval("var toInteger = __webpack_require__(/*! ./_to-integer */ 19);\nvar max = Math.max;\nvar min = Math.min;\nmodule.exports = function (index, length) {\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL190by1hYnNvbHV0ZS1pbmRleC5qcz9jODZhIl0sInNvdXJjZXNDb250ZW50IjpbInZhciB0b0ludGVnZXIgPSByZXF1aXJlKCcuL190by1pbnRlZ2VyJyk7XG52YXIgbWF4ID0gTWF0aC5tYXg7XG52YXIgbWluID0gTWF0aC5taW47XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpbmRleCwgbGVuZ3RoKSB7XG4gIGluZGV4ID0gdG9JbnRlZ2VyKGluZGV4KTtcbiAgcmV0dXJuIGluZGV4IDwgMCA/IG1heChpbmRleCArIGxlbmd0aCwgMCkgOiBtaW4oaW5kZXgsIGxlbmd0aCk7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL190by1hYnNvbHV0ZS1pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gNDJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///42\n")},function(module,exports,__webpack_require__){eval("// 22.1.3.31 Array.prototype[@@unscopables]\nvar UNSCOPABLES = __webpack_require__(/*! ./_wks */ 44)('unscopables');\nvar ArrayProto = Array.prototype;\nif (ArrayProto[UNSCOPABLES] == undefined) __webpack_require__(/*! ./_hide */ 8)(ArrayProto, UNSCOPABLES, {});\nmodule.exports = function (key) {\n  ArrayProto[UNSCOPABLES][key] = true;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL19hZGQtdG8tdW5zY29wYWJsZXMuanM/Yzc2NiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyAyMi4xLjMuMzEgQXJyYXkucHJvdG90eXBlW0BAdW5zY29wYWJsZXNdXG52YXIgVU5TQ09QQUJMRVMgPSByZXF1aXJlKCcuL193a3MnKSgndW5zY29wYWJsZXMnKTtcbnZhciBBcnJheVByb3RvID0gQXJyYXkucHJvdG90eXBlO1xuaWYgKEFycmF5UHJvdG9bVU5TQ09QQUJMRVNdID09IHVuZGVmaW5lZCkgcmVxdWlyZSgnLi9faGlkZScpKEFycmF5UHJvdG8sIFVOU0NPUEFCTEVTLCB7fSk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgQXJyYXlQcm90b1tVTlNDT1BBQkxFU11ba2V5XSA9IHRydWU7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL19hZGQtdG8tdW5zY29wYWJsZXMuanNcbi8vIG1vZHVsZSBpZCA9IDQzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///43\n")},function(module,exports,__webpack_require__){eval("var store = __webpack_require__(/*! ./_shared */ 45)('wks');\nvar uid = __webpack_require__(/*! ./_uid */ 14);\nvar Symbol = __webpack_require__(/*! ./_global */ 6).Symbol;\nvar USE_SYMBOL = typeof Symbol == 'function';\n\nvar $exports = module.exports = function (name) {\n  return store[name] || (store[name] =\n    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n};\n\n$exports.store = store;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL193a3MuanM/ZDQxOCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgc3RvcmUgPSByZXF1aXJlKCcuL19zaGFyZWQnKSgnd2tzJyk7XG52YXIgdWlkID0gcmVxdWlyZSgnLi9fdWlkJyk7XG52YXIgU3ltYm9sID0gcmVxdWlyZSgnLi9fZ2xvYmFsJykuU3ltYm9sO1xudmFyIFVTRV9TWU1CT0wgPSB0eXBlb2YgU3ltYm9sID09ICdmdW5jdGlvbic7XG5cbnZhciAkZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgcmV0dXJuIHN0b3JlW25hbWVdIHx8IChzdG9yZVtuYW1lXSA9XG4gICAgVVNFX1NZTUJPTCAmJiBTeW1ib2xbbmFtZV0gfHwgKFVTRV9TWU1CT0wgPyBTeW1ib2wgOiB1aWQpKCdTeW1ib2wuJyArIG5hbWUpKTtcbn07XG5cbiRleHBvcnRzLnN0b3JlID0gc3RvcmU7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jb3JlLWpzL21vZHVsZXMvX3drcy5qc1xuLy8gbW9kdWxlIGlkID0gNDRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///44\n")},function(module,exports,__webpack_require__){eval("var global = __webpack_require__(/*! ./_global */ 6);\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || (global[SHARED] = {});\nmodule.exports = function (key) {\n  return store[key] || (store[key] = {});\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDUuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL19zaGFyZWQuanM/MjlkNiJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZ2xvYmFsID0gcmVxdWlyZSgnLi9fZ2xvYmFsJyk7XG52YXIgU0hBUkVEID0gJ19fY29yZS1qc19zaGFyZWRfXyc7XG52YXIgc3RvcmUgPSBnbG9iYWxbU0hBUkVEXSB8fCAoZ2xvYmFsW1NIQVJFRF0gPSB7fSk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgcmV0dXJuIHN0b3JlW2tleV0gfHwgKHN0b3JlW2tleV0gPSB7fSk7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL19zaGFyZWQuanNcbi8vIG1vZHVsZSBpZCA9IDQ1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///45\n")},function(module,exports,__webpack_require__){eval("__webpack_require__(/*! ../../modules/es6.array.reduce */ 47);\nmodule.exports = __webpack_require__(/*! ../../modules/_core */ 7).Array.reduce;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9mbi9hcnJheS9yZWR1Y2UuanM/ZWYwMCJdLCJzb3VyY2VzQ29udGVudCI6WyJyZXF1aXJlKCcuLi8uLi9tb2R1bGVzL2VzNi5hcnJheS5yZWR1Y2UnKTtcbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi4vLi4vbW9kdWxlcy9fY29yZScpLkFycmF5LnJlZHVjZTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NvcmUtanMvZm4vYXJyYXkvcmVkdWNlLmpzXG4vLyBtb2R1bGUgaWQgPSA0NlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///46\n")},function(module,exports,__webpack_require__){"use strict";eval("\nvar $export = __webpack_require__(/*! ./_export */ 13);\nvar $reduce = __webpack_require__(/*! ./_array-reduce */ 48);\n\n$export($export.P + $export.F * !__webpack_require__(/*! ./_strict-method */ 50)([].reduce, true), 'Array', {\n  // 22.1.3.18 / 15.4.4.21 Array.prototype.reduce(callbackfn [, initialValue])\n  reduce: function reduce(callbackfn /* , initialValue */) {\n    return $reduce(this, callbackfn, arguments.length, arguments[1], false);\n  }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDcuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL2VzNi5hcnJheS5yZWR1Y2UuanM/MzY4OCJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG52YXIgJGV4cG9ydCA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpO1xudmFyICRyZWR1Y2UgPSByZXF1aXJlKCcuL19hcnJheS1yZWR1Y2UnKTtcblxuJGV4cG9ydCgkZXhwb3J0LlAgKyAkZXhwb3J0LkYgKiAhcmVxdWlyZSgnLi9fc3RyaWN0LW1ldGhvZCcpKFtdLnJlZHVjZSwgdHJ1ZSksICdBcnJheScsIHtcbiAgLy8gMjIuMS4zLjE4IC8gMTUuNC40LjIxIEFycmF5LnByb3RvdHlwZS5yZWR1Y2UoY2FsbGJhY2tmbiBbLCBpbml0aWFsVmFsdWVdKVxuICByZWR1Y2U6IGZ1bmN0aW9uIHJlZHVjZShjYWxsYmFja2ZuIC8qICwgaW5pdGlhbFZhbHVlICovKSB7XG4gICAgcmV0dXJuICRyZWR1Y2UodGhpcywgY2FsbGJhY2tmbiwgYXJndW1lbnRzLmxlbmd0aCwgYXJndW1lbnRzWzFdLCBmYWxzZSk7XG4gIH1cbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL2VzNi5hcnJheS5yZWR1Y2UuanNcbi8vIG1vZHVsZSBpZCA9IDQ3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///47\n")},function(module,exports,__webpack_require__){eval("var aFunction = __webpack_require__(/*! ./_a-function */ 15);\nvar toObject = __webpack_require__(/*! ./_to-object */ 49);\nvar IObject = __webpack_require__(/*! ./_iobject */ 16);\nvar toLength = __webpack_require__(/*! ./_to-length */ 18);\n\nmodule.exports = function (that, callbackfn, aLen, memo, isRight) {\n  aFunction(callbackfn);\n  var O = toObject(that);\n  var self = IObject(O);\n  var length = toLength(O.length);\n  var index = isRight ? length - 1 : 0;\n  var i = isRight ? -1 : 1;\n  if (aLen < 2) for (;;) {\n    if (index in self) {\n      memo = self[index];\n      index += i;\n      break;\n    }\n    index += i;\n    if (isRight ? index < 0 : length <= index) {\n      throw TypeError('Reduce of empty array with no initial value');\n    }\n  }\n  for (;isRight ? index >= 0 : length > index; index += i) if (index in self) {\n    memo = callbackfn(memo, self[index], index, O);\n  }\n  return memo;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDguanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL19hcnJheS1yZWR1Y2UuanM/YzE4MCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgYUZ1bmN0aW9uID0gcmVxdWlyZSgnLi9fYS1mdW5jdGlvbicpO1xudmFyIHRvT2JqZWN0ID0gcmVxdWlyZSgnLi9fdG8tb2JqZWN0Jyk7XG52YXIgSU9iamVjdCA9IHJlcXVpcmUoJy4vX2lvYmplY3QnKTtcbnZhciB0b0xlbmd0aCA9IHJlcXVpcmUoJy4vX3RvLWxlbmd0aCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICh0aGF0LCBjYWxsYmFja2ZuLCBhTGVuLCBtZW1vLCBpc1JpZ2h0KSB7XG4gIGFGdW5jdGlvbihjYWxsYmFja2ZuKTtcbiAgdmFyIE8gPSB0b09iamVjdCh0aGF0KTtcbiAgdmFyIHNlbGYgPSBJT2JqZWN0KE8pO1xuICB2YXIgbGVuZ3RoID0gdG9MZW5ndGgoTy5sZW5ndGgpO1xuICB2YXIgaW5kZXggPSBpc1JpZ2h0ID8gbGVuZ3RoIC0gMSA6IDA7XG4gIHZhciBpID0gaXNSaWdodCA/IC0xIDogMTtcbiAgaWYgKGFMZW4gPCAyKSBmb3IgKDs7KSB7XG4gICAgaWYgKGluZGV4IGluIHNlbGYpIHtcbiAgICAgIG1lbW8gPSBzZWxmW2luZGV4XTtcbiAgICAgIGluZGV4ICs9IGk7XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgaW5kZXggKz0gaTtcbiAgICBpZiAoaXNSaWdodCA/IGluZGV4IDwgMCA6IGxlbmd0aCA8PSBpbmRleCkge1xuICAgICAgdGhyb3cgVHlwZUVycm9yKCdSZWR1Y2Ugb2YgZW1wdHkgYXJyYXkgd2l0aCBubyBpbml0aWFsIHZhbHVlJyk7XG4gICAgfVxuICB9XG4gIGZvciAoO2lzUmlnaHQgPyBpbmRleCA+PSAwIDogbGVuZ3RoID4gaW5kZXg7IGluZGV4ICs9IGkpIGlmIChpbmRleCBpbiBzZWxmKSB7XG4gICAgbWVtbyA9IGNhbGxiYWNrZm4obWVtbywgc2VsZltpbmRleF0sIGluZGV4LCBPKTtcbiAgfVxuICByZXR1cm4gbWVtbztcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jb3JlLWpzL21vZHVsZXMvX2FycmF5LXJlZHVjZS5qc1xuLy8gbW9kdWxlIGlkID0gNDhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///48\n")},function(module,exports,__webpack_require__){eval("// 7.1.13 ToObject(argument)\nvar defined = __webpack_require__(/*! ./_defined */ 17);\nmodule.exports = function (it) {\n  return Object(defined(it));\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDkuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL190by1vYmplY3QuanM/ZTA0OCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyA3LjEuMTMgVG9PYmplY3QoYXJndW1lbnQpXG52YXIgZGVmaW5lZCA9IHJlcXVpcmUoJy4vX2RlZmluZWQnKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0KSB7XG4gIHJldHVybiBPYmplY3QoZGVmaW5lZChpdCkpO1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9fdG8tb2JqZWN0LmpzXG4vLyBtb2R1bGUgaWQgPSA0OVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///49\n")},function(module,exports,__webpack_require__){"use strict";eval("\nvar fails = __webpack_require__(/*! ./_fails */ 11);\n\nmodule.exports = function (method, arg) {\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call\n    arg ? method.call(null, function () { /* empty */ }, 1) : method.call(null);\n  });\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL19zdHJpY3QtbWV0aG9kLmpzP2M5NmYiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xudmFyIGZhaWxzID0gcmVxdWlyZSgnLi9fZmFpbHMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAobWV0aG9kLCBhcmcpIHtcbiAgcmV0dXJuICEhbWV0aG9kICYmIGZhaWxzKGZ1bmN0aW9uICgpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdXNlbGVzcy1jYWxsXG4gICAgYXJnID8gbWV0aG9kLmNhbGwobnVsbCwgZnVuY3Rpb24gKCkgeyAvKiBlbXB0eSAqLyB9LCAxKSA6IG1ldGhvZC5jYWxsKG51bGwpO1xuICB9KTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jb3JlLWpzL21vZHVsZXMvX3N0cmljdC1tZXRob2QuanNcbi8vIG1vZHVsZSBpZCA9IDUwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///50\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; /* eslint-disable max-lines */\n/* global module */\n\n\nvar _ComApi = __webpack_require__(/*! ./ComApi */ 20);\n\nvar _ComApi2 = _interopRequireDefault(_ComApi);\n\nvar _Logger = __webpack_require__(/*! ./Logger */ 0);\n\nvar _Logger2 = _interopRequireDefault(_Logger);\n\nvar _SoundMeter = __webpack_require__(/*! ./SoundMeter */ 52);\n\nvar _SoundMeter2 = _interopRequireDefault(_SoundMeter);\n\nvar _EventHandler = __webpack_require__(/*! ./EventHandler */ 53);\n\nvar _EventHandler2 = _interopRequireDefault(_EventHandler);\n\nvar _DeviceManager = __webpack_require__(/*! ./DeviceManager */ 12);\n\nvar _DeviceManager2 = _interopRequireDefault(_DeviceManager);\n\nvar _WssConnection = __webpack_require__(/*! ./WssConnection */ 116);\n\nvar _WssConnection2 = _interopRequireDefault(_WssConnection);\n\nvar _FeatureDetector = __webpack_require__(/*! ./FeatureDetector */ 4);\n\nvar _FeatureDetector2 = _interopRequireDefault(_FeatureDetector);\n\nvar _ActivityMonitor = __webpack_require__(/*! ./ActivityMonitor */ 118);\n\nvar _ActivityMonitor2 = _interopRequireDefault(_ActivityMonitor);\n\nvar _FullscreenHelper = __webpack_require__(/*! ./FullscreenHelper */ 25);\n\nvar _FullscreenHelper2 = _interopRequireDefault(_FullscreenHelper);\n\nvar _ConferenceSession = __webpack_require__(/*! ./ConferenceSession */ 119);\n\nvar _ConferenceSession2 = _interopRequireDefault(_ConferenceSession);\n\nvar _ConnectionMonitor = __webpack_require__(/*! ./ConnectionMonitor */ 120);\n\nvar _ConnectionMonitor2 = _interopRequireDefault(_ConnectionMonitor);\n\nvar _MediaStreamHandler = __webpack_require__(/*! ./MediaStreamHandler */ 3);\n\nvar _MediaStreamHandler2 = _interopRequireDefault(_MediaStreamHandler);\n\nvar _debounce = __webpack_require__(/*! ./utils/debounce */ 21);\n\nvar _debounce2 = _interopRequireDefault(_debounce);\n\nvar _throttle = __webpack_require__(/*! ./utils/throttle */ 121);\n\nvar _throttle2 = _interopRequireDefault(_throttle);\n\nvar _dateHelper = __webpack_require__(/*! ./utils/dateHelper */ 122);\n\nvar _dateHelper2 = _interopRequireDefault(_dateHelper);\n\nvar _EventDispatcher = __webpack_require__(/*! ./utils/EventDispatcher */ 123);\n\nvar _EventDispatcher2 = _interopRequireDefault(_EventDispatcher);\n\nvar _GiphyApi = __webpack_require__(/*! ./utils/GiphyApi */ 124);\n\nvar _GiphyApi2 = _interopRequireDefault(_GiphyApi);\n\nvar _YouTubeApi = __webpack_require__(/*! ./utils/YouTubeApi */ 125);\n\nvar _YouTubeApi2 = _interopRequireDefault(_YouTubeApi);\n\nvar _FacebookApi = __webpack_require__(/*! ./utils/FacebookApi */ 126);\n\nvar _FacebookApi2 = _interopRequireDefault(_FacebookApi);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * eyeson lib core.\n **/\nvar core = { eventHandler: new _EventHandler2.default() };\n\n/**\n * Initial connection status change updater.\n **/\nvar updateStatus = function updateStatus(status) {\n  core.eventHandler.send({ type: 'connection', connectionStatus: status });\n};\n\nvar keepRoomAlive = function keepRoomAlive() {\n  core.keepRoomAlive = setInterval(function () {\n    core.rtConnection.send({ message: 'user_joins' });\n  }, 30000);\n};\n\n/**\n * Remove this once WSS messages arrive reliably.\n **/\nvar pollingFallback = function pollingFallback() {\n  core.pollingFallbackInterval = setInterval(function () {\n    if (core.eventHandler._connection) {\n      _Logger2.default.debug('eyeson::pollingFallback: connection set, clearing interval.');\n      clearInterval(core.pollingFallbackInterval);\n      return;\n    }\n\n    core.comApi.getRoom(function (data) {\n      if (data.ready === true) {\n        _Logger2.default.debug('eyeson::pollingFallback: room ready');\n        core.eventHandler.send({ type: 'room_ready', content: data });\n        return;\n      }\n      _Logger2.default.debug('eyeson::pollingFallback: room not ready');\n    });\n  }, 5000);\n};\n\n/**\n * Load initial room data: user files and active presentation slide.\n **/\nvar loadInitialInfos = function loadInitialInfos(data) {\n  if (data.presentation) {\n    core.eventHandler.send({ type: 'slide', content: data.presentation.slide });\n  }\n  if (data.broadcasts) {\n    core.eventHandler.send({\n      type: 'broadcasts_update',\n      broadcasts: data.broadcasts\n    });\n  }\n  core.comApi.getFiles(function (fileData) {\n    core.eventHandler.send({ type: 'files_update', files: fileData.files });\n  });\n};\n\n/**\n * Join a session and listen to any events. eventHandler keeps all the\n * stuff.\n **/\nvar joinSession = function joinSession(mediaOptions) {\n  if (!core.eventHandler._connection) {\n    _Logger2.default.error('You tried to join a session that is not yet available. ' + 'Before calling join, a connection status of connected has ' + 'to be received.');\n    return;\n  }\n\n  var session = new _ConferenceSession2.default(core.eventHandler._connection, mediaOptions);\n  session.setMonitor(core.eventHandler.monitor);\n  core.eventHandler.session = session;\n\n  session.start();\n  loadInitialInfos(core.eventHandler._rtData);\n  clearInterval(core.keepRoomAlive);\n  this.session = session; // eslint-disable-line no-invalid-this\n};\n\n/**\n * Initialise our connections once the room is available.\n * At this point we start the rtConnection session but not the sipConnection\n * session (mediaSession).\n *\n **/\n/* eslint-disable max-statements */\nvar prepareConnection = function prepareConnection(eyeson) {\n  updateStatus('fetch_room');\n\n  core.comApi.getRoom(function (data) {\n    if (data.error) {\n      _Logger2.default.warn('eyeson::prepareConnection', data.error);\n      updateStatus('access_denied');\n      return;\n    }\n    updateStatus('received_room');\n\n    core.rtConnection = new _WssConnection2.default(data.links.websocket);\n    eyeson.room = data.room;\n    eyeson.user = data.user;\n    eyeson.links = data.links;\n\n    core.eventHandler.rtConnection = core.rtConnection;\n    core.rtConnection.startSession();\n\n    core.eventHandler.monitor = new _ConnectionMonitor2.default();\n    core.eventHandler.api = core.comApi;\n    keepRoomAlive();\n    pollingFallback();\n  });\n};\n/* eslint-enable max-statements */\n\n/****** The following represents the public API, adapt with caution! *********/\nmodule.exports = {\n  config: {\n    api: 'https://api.eyeson.team',\n    youtube: { key: '', client: '' }\n  },\n  core: core,\n\n  /****** Public data ********************************************************/\n\n  /**\n   * The room, user and links to be updated when fetched from the ComAPI.\n   **/\n  room: {},\n  user: {},\n  links: {},\n\n  /****** Public classes *****************************************************/\n\n  /**\n   * Fetch and manage devices.\n   **/\n  DeviceManager: _DeviceManager2.default,\n\n  /**\n   * Provides helper to detect certain feature support.\n   **/\n  FeatureDetector: _FeatureDetector2.default,\n\n  /**\n   * Listen to audio and expose changes.\n   **/\n  SoundMeter: _SoundMeter2.default,\n\n  /**\n   * Write to logs whatever you want and disable on production.\n   **/\n  Logger: _Logger2.default,\n\n  /**\n   * Media-stream helper.\n   **/\n  MediaStreamHandler: _MediaStreamHandler2.default,\n\n  /**\n   * YouTube Stream API\n   **/\n  YouTubeApi: _YouTubeApi2.default,\n\n  /**\n   * Facebook Stream API\n   **/\n  FacebookApi: _FacebookApi2.default,\n\n  /**\n   * Giphy API\n   **/\n  GiphyApi: _GiphyApi2.default,\n\n  /**\n   * Activity Monitor\n   **/\n  ActivityMonitor: _ActivityMonitor2.default,\n\n  /**\n   * Full Screen Helper\n   **/\n  FullscreenHelper: _FullscreenHelper2.default,\n\n  /**\n   * Some date helper.\n   **/\n  date: _dateHelper2.default,\n\n  /**\n   * Provide debounce method.\n   **/\n  debounce: _debounce2.default,\n\n  /**\n   * Provide throttle method.\n   **/\n  throttle: _throttle2.default,\n\n  /**\n   * Dispatch events on a specific target.\n   **/\n  dispatchOn: function dispatchOn(target) {\n    undefined.onEvent(function (msg) {\n      return (0, _EventDispatcher2.default)(target, msg);\n    }); // eslint-disable-line no-invalid-this\n  },\n\n  /****** Public helper methods **********************************************/\n\n  /**\n   * Attach event listener\n   **/\n  onEvent: function onEvent(listener) {\n    if (typeof listener !== 'function') {\n      _Logger2.default.error('A listener to eyeson events has to be of type function.' + ' The argument passed to onEvent is of type ' + (typeof listener === 'undefined' ? 'undefined' : _typeof(listener)) + '.');\n      return;\n    }\n    core.eventHandler.onReceive(listener);\n  },\n\n  /**\n   * Remove event listener\n   **/\n  offEvent: function offEvent(listener) {\n    core.eventHandler.removeListener(listener);\n  },\n\n  /**\n   * Prepare required core connections.\n   **/\n  connect: function connect(token) {\n    _Logger2.default.debug('eyeson::connect', token);\n    core.comApi = new _ComApi2.default(this.config.api, token);\n    prepareConnection(this);\n  },\n\n  /**\n   * Join a session with supplied mediaOptions (audio/video).\n   **/\n  join: function join(mediaOptions) {\n    _Logger2.default.debug('eyeson::join', mediaOptions);\n    joinSession.bind(this, mediaOptions)();\n  },\n\n  /**\n   * Start an eyeson room meeting.\n   **/\n  start: function start(token) {\n    var _this = this;\n\n    var mediaOptions = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : { audio: true, video: true };\n\n    _Logger2.default.debug('eyeson::start');\n    var joinOnConnect = function joinOnConnect(event) {\n      if (event.connectionStatus !== 'ready') {\n        return;\n      }\n      _this.offEvent(joinOnConnect);\n      _this.join(mediaOptions);\n    };\n    this.onEvent(joinOnConnect);\n    this.connect(token);\n  },\n\n  /**\n   * Destroy and cleanup a session.\n   **/\n  destroy: function destroy() {\n    _Logger2.default.debug('eyeson::destroy');\n    clearInterval(core.keepRoomAlive);\n    core.eventHandler.destroy();\n    core.eventHandler = new _EventHandler2.default();\n  },\n\n  /**\n   * Receive an event from client.\n   **/\n  send: function send(msg) {\n    msg._src = 'client';\n    return core.eventHandler.send(msg);\n  },\n\n  /**\n   * When invoked repeatedly, will only actually call the original function at\n   * most once per every wait milliseconds.\n   **/\n  throttledSend: function throttledSend(msg) {\n    var _this2 = this;\n\n    if (!this._throttledSend) {\n      this._throttledSend = (0, _throttle2.default)(function (message) {\n        return _this2.send(message);\n      }, 500);\n    }\n\n    return this._throttledSend(msg);\n  }\n};\n\n/* eslint-enable max-lines *///# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2V5ZXNvbi5qcz83MDA2Il0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIG1heC1saW5lcyAqL1xuLyogZ2xvYmFsIG1vZHVsZSAqL1xuaW1wb3J0IENvbUFwaSBmcm9tICcuL0NvbUFwaSc7XG5pbXBvcnQgTG9nZ2VyIGZyb20gJy4vTG9nZ2VyJztcbmltcG9ydCBTb3VuZE1ldGVyIGZyb20gJy4vU291bmRNZXRlcic7XG5pbXBvcnQgRXZlbnRIYW5kbGVyIGZyb20gJy4vRXZlbnRIYW5kbGVyJztcbmltcG9ydCBEZXZpY2VNYW5hZ2VyIGZyb20gJy4vRGV2aWNlTWFuYWdlcic7XG5pbXBvcnQgV3NzQ29ubmVjdGlvbiBmcm9tICcuL1dzc0Nvbm5lY3Rpb24nO1xuaW1wb3J0IEZlYXR1cmVEZXRlY3RvciBmcm9tICcuL0ZlYXR1cmVEZXRlY3Rvcic7XG5pbXBvcnQgQWN0aXZpdHlNb25pdG9yIGZyb20gJy4vQWN0aXZpdHlNb25pdG9yJztcbmltcG9ydCBGdWxsc2NyZWVuSGVscGVyIGZyb20gJy4vRnVsbHNjcmVlbkhlbHBlcic7XG5pbXBvcnQgQ29uZmVyZW5jZVNlc3Npb24gZnJvbSAnLi9Db25mZXJlbmNlU2Vzc2lvbic7XG5pbXBvcnQgQ29ubmVjdGlvbk1vbml0b3IgZnJvbSAnLi9Db25uZWN0aW9uTW9uaXRvcic7XG5pbXBvcnQgTWVkaWFTdHJlYW1IYW5kbGVyIGZyb20gJy4vTWVkaWFTdHJlYW1IYW5kbGVyJztcblxuaW1wb3J0IGRlYm91bmNlIGZyb20gJy4vdXRpbHMvZGVib3VuY2UnO1xuaW1wb3J0IHRocm90dGxlIGZyb20gJy4vdXRpbHMvdGhyb3R0bGUnO1xuaW1wb3J0IGRhdGVIZWxwZXIgZnJvbSAnLi91dGlscy9kYXRlSGVscGVyJztcbmltcG9ydCBkaXNwYXRjaE9uIGZyb20gJy4vdXRpbHMvRXZlbnREaXNwYXRjaGVyJztcbmltcG9ydCBHaXBoeUFwaSBmcm9tICcuL3V0aWxzL0dpcGh5QXBpJztcbmltcG9ydCBZb3VUdWJlQXBpIGZyb20gJy4vdXRpbHMvWW91VHViZUFwaSc7XG5pbXBvcnQgRmFjZWJvb2tBcGkgZnJvbSAnLi91dGlscy9GYWNlYm9va0FwaSc7XG5cbi8qKlxuICogZXllc29uIGxpYiBjb3JlLlxuICoqL1xubGV0IGNvcmUgPSB7IGV2ZW50SGFuZGxlcjogbmV3IEV2ZW50SGFuZGxlcigpIH07XG5cbi8qKlxuICogSW5pdGlhbCBjb25uZWN0aW9uIHN0YXR1cyBjaGFuZ2UgdXBkYXRlci5cbiAqKi9cbmNvbnN0IHVwZGF0ZVN0YXR1cyA9IHN0YXR1cyA9PiB7XG4gIGNvcmUuZXZlbnRIYW5kbGVyLnNlbmQoeyB0eXBlOiAnY29ubmVjdGlvbicsIGNvbm5lY3Rpb25TdGF0dXM6IHN0YXR1cyB9KTtcbn07XG5cbmNvbnN0IGtlZXBSb29tQWxpdmUgPSAoKSA9PiB7XG4gIGNvcmUua2VlcFJvb21BbGl2ZSA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICBjb3JlLnJ0Q29ubmVjdGlvbi5zZW5kKHsgbWVzc2FnZTogJ3VzZXJfam9pbnMnIH0pO1xuICB9LCAzMDAwMCk7XG59O1xuXG4vKipcbiAqIFJlbW92ZSB0aGlzIG9uY2UgV1NTIG1lc3NhZ2VzIGFycml2ZSByZWxpYWJseS5cbiAqKi9cbmNvbnN0IHBvbGxpbmdGYWxsYmFjayA9ICgpID0+IHtcbiAgY29yZS5wb2xsaW5nRmFsbGJhY2tJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICBpZiAoY29yZS5ldmVudEhhbmRsZXIuX2Nvbm5lY3Rpb24pIHtcbiAgICAgIExvZ2dlci5kZWJ1ZyhcbiAgICAgICAgJ2V5ZXNvbjo6cG9sbGluZ0ZhbGxiYWNrOiBjb25uZWN0aW9uIHNldCwgY2xlYXJpbmcgaW50ZXJ2YWwuJ1xuICAgICAgKTtcbiAgICAgIGNsZWFySW50ZXJ2YWwoY29yZS5wb2xsaW5nRmFsbGJhY2tJbnRlcnZhbCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29yZS5jb21BcGkuZ2V0Um9vbShkYXRhID0+IHtcbiAgICAgIGlmIChkYXRhLnJlYWR5ID09PSB0cnVlKSB7XG4gICAgICAgIExvZ2dlci5kZWJ1ZygnZXllc29uOjpwb2xsaW5nRmFsbGJhY2s6IHJvb20gcmVhZHknKTtcbiAgICAgICAgY29yZS5ldmVudEhhbmRsZXIuc2VuZCh7IHR5cGU6ICdyb29tX3JlYWR5JywgY29udGVudDogZGF0YSB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgTG9nZ2VyLmRlYnVnKCdleWVzb246OnBvbGxpbmdGYWxsYmFjazogcm9vbSBub3QgcmVhZHknKTtcbiAgICB9KTtcbiAgfSwgNTAwMCk7XG59O1xuXG4vKipcbiAqIExvYWQgaW5pdGlhbCByb29tIGRhdGE6IHVzZXIgZmlsZXMgYW5kIGFjdGl2ZSBwcmVzZW50YXRpb24gc2xpZGUuXG4gKiovXG5jb25zdCBsb2FkSW5pdGlhbEluZm9zID0gZGF0YSA9PiB7XG4gIGlmIChkYXRhLnByZXNlbnRhdGlvbikge1xuICAgIGNvcmUuZXZlbnRIYW5kbGVyLnNlbmQoeyB0eXBlOiAnc2xpZGUnLCBjb250ZW50OiBkYXRhLnByZXNlbnRhdGlvbi5zbGlkZSB9KTtcbiAgfVxuICBpZiAoZGF0YS5icm9hZGNhc3RzKSB7XG4gICAgY29yZS5ldmVudEhhbmRsZXIuc2VuZCh7XG4gICAgICB0eXBlOiAnYnJvYWRjYXN0c191cGRhdGUnLFxuICAgICAgYnJvYWRjYXN0czogZGF0YS5icm9hZGNhc3RzXG4gICAgfSk7XG4gIH1cbiAgY29yZS5jb21BcGkuZ2V0RmlsZXMoZmlsZURhdGEgPT4ge1xuICAgIGNvcmUuZXZlbnRIYW5kbGVyLnNlbmQoeyB0eXBlOiAnZmlsZXNfdXBkYXRlJywgZmlsZXM6IGZpbGVEYXRhLmZpbGVzIH0pO1xuICB9KTtcbn07XG5cbi8qKlxuICogSm9pbiBhIHNlc3Npb24gYW5kIGxpc3RlbiB0byBhbnkgZXZlbnRzLiBldmVudEhhbmRsZXIga2VlcHMgYWxsIHRoZVxuICogc3R1ZmYuXG4gKiovXG5jb25zdCBqb2luU2Vzc2lvbiA9IGZ1bmN0aW9uKG1lZGlhT3B0aW9ucykge1xuICBpZiAoIWNvcmUuZXZlbnRIYW5kbGVyLl9jb25uZWN0aW9uKSB7XG4gICAgTG9nZ2VyLmVycm9yKFxuICAgICAgJ1lvdSB0cmllZCB0byBqb2luIGEgc2Vzc2lvbiB0aGF0IGlzIG5vdCB5ZXQgYXZhaWxhYmxlLiAnICtcbiAgICAgICAgJ0JlZm9yZSBjYWxsaW5nIGpvaW4sIGEgY29ubmVjdGlvbiBzdGF0dXMgb2YgY29ubmVjdGVkIGhhcyAnICtcbiAgICAgICAgJ3RvIGJlIHJlY2VpdmVkLidcbiAgICApO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IHNlc3Npb24gPSBuZXcgQ29uZmVyZW5jZVNlc3Npb24oXG4gICAgY29yZS5ldmVudEhhbmRsZXIuX2Nvbm5lY3Rpb24sXG4gICAgbWVkaWFPcHRpb25zXG4gICk7XG4gIHNlc3Npb24uc2V0TW9uaXRvcihjb3JlLmV2ZW50SGFuZGxlci5tb25pdG9yKTtcbiAgY29yZS5ldmVudEhhbmRsZXIuc2Vzc2lvbiA9IHNlc3Npb247XG5cbiAgc2Vzc2lvbi5zdGFydCgpO1xuICBsb2FkSW5pdGlhbEluZm9zKGNvcmUuZXZlbnRIYW5kbGVyLl9ydERhdGEpO1xuICBjbGVhckludGVydmFsKGNvcmUua2VlcFJvb21BbGl2ZSk7XG4gIHRoaXMuc2Vzc2lvbiA9IHNlc3Npb247IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8taW52YWxpZC10aGlzXG59O1xuXG4vKipcbiAqIEluaXRpYWxpc2Ugb3VyIGNvbm5lY3Rpb25zIG9uY2UgdGhlIHJvb20gaXMgYXZhaWxhYmxlLlxuICogQXQgdGhpcyBwb2ludCB3ZSBzdGFydCB0aGUgcnRDb25uZWN0aW9uIHNlc3Npb24gYnV0IG5vdCB0aGUgc2lwQ29ubmVjdGlvblxuICogc2Vzc2lvbiAobWVkaWFTZXNzaW9uKS5cbiAqXG4gKiovXG4vKiBlc2xpbnQtZGlzYWJsZSBtYXgtc3RhdGVtZW50cyAqL1xuY29uc3QgcHJlcGFyZUNvbm5lY3Rpb24gPSBmdW5jdGlvbihleWVzb24pIHtcbiAgdXBkYXRlU3RhdHVzKCdmZXRjaF9yb29tJyk7XG5cbiAgY29yZS5jb21BcGkuZ2V0Um9vbShkYXRhID0+IHtcbiAgICBpZiAoZGF0YS5lcnJvcikge1xuICAgICAgTG9nZ2VyLndhcm4oJ2V5ZXNvbjo6cHJlcGFyZUNvbm5lY3Rpb24nLCBkYXRhLmVycm9yKTtcbiAgICAgIHVwZGF0ZVN0YXR1cygnYWNjZXNzX2RlbmllZCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB1cGRhdGVTdGF0dXMoJ3JlY2VpdmVkX3Jvb20nKTtcblxuICAgIGNvcmUucnRDb25uZWN0aW9uID0gbmV3IFdzc0Nvbm5lY3Rpb24oZGF0YS5saW5rcy53ZWJzb2NrZXQpO1xuICAgIGV5ZXNvbi5yb29tID0gZGF0YS5yb29tO1xuICAgIGV5ZXNvbi51c2VyID0gZGF0YS51c2VyO1xuICAgIGV5ZXNvbi5saW5rcyA9IGRhdGEubGlua3M7XG5cbiAgICBjb3JlLmV2ZW50SGFuZGxlci5ydENvbm5lY3Rpb24gPSBjb3JlLnJ0Q29ubmVjdGlvbjtcbiAgICBjb3JlLnJ0Q29ubmVjdGlvbi5zdGFydFNlc3Npb24oKTtcblxuICAgIGNvcmUuZXZlbnRIYW5kbGVyLm1vbml0b3IgPSBuZXcgQ29ubmVjdGlvbk1vbml0b3IoKTtcbiAgICBjb3JlLmV2ZW50SGFuZGxlci5hcGkgPSBjb3JlLmNvbUFwaTtcbiAgICBrZWVwUm9vbUFsaXZlKCk7XG4gICAgcG9sbGluZ0ZhbGxiYWNrKCk7XG4gIH0pO1xufTtcbi8qIGVzbGludC1lbmFibGUgbWF4LXN0YXRlbWVudHMgKi9cblxuLyoqKioqKiBUaGUgZm9sbG93aW5nIHJlcHJlc2VudHMgdGhlIHB1YmxpYyBBUEksIGFkYXB0IHdpdGggY2F1dGlvbiEgKioqKioqKioqL1xubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGNvbmZpZzoge1xuICAgIGFwaTogJ2h0dHBzOi8vYXBpLmV5ZXNvbi50ZWFtJyxcbiAgICB5b3V0dWJlOiB7IGtleTogJycsIGNsaWVudDogJycgfVxuICB9LFxuICBjb3JlOiBjb3JlLFxuXG4gIC8qKioqKiogUHVibGljIGRhdGEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgLyoqXG4gICAqIFRoZSByb29tLCB1c2VyIGFuZCBsaW5rcyB0byBiZSB1cGRhdGVkIHdoZW4gZmV0Y2hlZCBmcm9tIHRoZSBDb21BUEkuXG4gICAqKi9cbiAgcm9vbToge30sXG4gIHVzZXI6IHt9LFxuICBsaW5rczoge30sXG5cbiAgLyoqKioqKiBQdWJsaWMgY2xhc3NlcyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAvKipcbiAgICogRmV0Y2ggYW5kIG1hbmFnZSBkZXZpY2VzLlxuICAgKiovXG4gIERldmljZU1hbmFnZXI6IERldmljZU1hbmFnZXIsXG5cbiAgLyoqXG4gICAqIFByb3ZpZGVzIGhlbHBlciB0byBkZXRlY3QgY2VydGFpbiBmZWF0dXJlIHN1cHBvcnQuXG4gICAqKi9cbiAgRmVhdHVyZURldGVjdG9yOiBGZWF0dXJlRGV0ZWN0b3IsXG5cbiAgLyoqXG4gICAqIExpc3RlbiB0byBhdWRpbyBhbmQgZXhwb3NlIGNoYW5nZXMuXG4gICAqKi9cbiAgU291bmRNZXRlcjogU291bmRNZXRlcixcblxuICAvKipcbiAgICogV3JpdGUgdG8gbG9ncyB3aGF0ZXZlciB5b3Ugd2FudCBhbmQgZGlzYWJsZSBvbiBwcm9kdWN0aW9uLlxuICAgKiovXG4gIExvZ2dlcjogTG9nZ2VyLFxuXG4gIC8qKlxuICAgKiBNZWRpYS1zdHJlYW0gaGVscGVyLlxuICAgKiovXG4gIE1lZGlhU3RyZWFtSGFuZGxlcjogTWVkaWFTdHJlYW1IYW5kbGVyLFxuXG4gIC8qKlxuICAgKiBZb3VUdWJlIFN0cmVhbSBBUElcbiAgICoqL1xuICBZb3VUdWJlQXBpOiBZb3VUdWJlQXBpLFxuXG4gIC8qKlxuICAgKiBGYWNlYm9vayBTdHJlYW0gQVBJXG4gICAqKi9cbiAgRmFjZWJvb2tBcGk6IEZhY2Vib29rQXBpLFxuXG4gIC8qKlxuICAgKiBHaXBoeSBBUElcbiAgICoqL1xuICBHaXBoeUFwaTogR2lwaHlBcGksXG5cbiAgLyoqXG4gICAqIEFjdGl2aXR5IE1vbml0b3JcbiAgICoqL1xuICBBY3Rpdml0eU1vbml0b3I6IEFjdGl2aXR5TW9uaXRvcixcblxuICAvKipcbiAgICogRnVsbCBTY3JlZW4gSGVscGVyXG4gICAqKi9cbiAgRnVsbHNjcmVlbkhlbHBlcjogRnVsbHNjcmVlbkhlbHBlcixcblxuICAvKipcbiAgICogU29tZSBkYXRlIGhlbHBlci5cbiAgICoqL1xuICBkYXRlOiBkYXRlSGVscGVyLFxuXG4gIC8qKlxuICAgKiBQcm92aWRlIGRlYm91bmNlIG1ldGhvZC5cbiAgICoqL1xuICBkZWJvdW5jZTogZGVib3VuY2UsXG5cbiAgLyoqXG4gICAqIFByb3ZpZGUgdGhyb3R0bGUgbWV0aG9kLlxuICAgKiovXG4gIHRocm90dGxlOiB0aHJvdHRsZSxcblxuICAvKipcbiAgICogRGlzcGF0Y2ggZXZlbnRzIG9uIGEgc3BlY2lmaWMgdGFyZ2V0LlxuICAgKiovXG4gIGRpc3BhdGNoT246IHRhcmdldCA9PiB7XG4gICAgdGhpcy5vbkV2ZW50KG1zZyA9PiBkaXNwYXRjaE9uKHRhcmdldCwgbXNnKSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8taW52YWxpZC10aGlzXG4gIH0sXG5cbiAgLyoqKioqKiBQdWJsaWMgaGVscGVyIG1ldGhvZHMgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAvKipcbiAgICogQXR0YWNoIGV2ZW50IGxpc3RlbmVyXG4gICAqKi9cbiAgb25FdmVudDogbGlzdGVuZXIgPT4ge1xuICAgIGlmICh0eXBlb2YgbGlzdGVuZXIgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIExvZ2dlci5lcnJvcihcbiAgICAgICAgJ0EgbGlzdGVuZXIgdG8gZXllc29uIGV2ZW50cyBoYXMgdG8gYmUgb2YgdHlwZSBmdW5jdGlvbi4nICtcbiAgICAgICAgICAnIFRoZSBhcmd1bWVudCBwYXNzZWQgdG8gb25FdmVudCBpcyBvZiB0eXBlICcgK1xuICAgICAgICAgIHR5cGVvZiBsaXN0ZW5lciArXG4gICAgICAgICAgJy4nXG4gICAgICApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb3JlLmV2ZW50SGFuZGxlci5vblJlY2VpdmUobGlzdGVuZXIpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBSZW1vdmUgZXZlbnQgbGlzdGVuZXJcbiAgICoqL1xuICBvZmZFdmVudDogbGlzdGVuZXIgPT4ge1xuICAgIGNvcmUuZXZlbnRIYW5kbGVyLnJlbW92ZUxpc3RlbmVyKGxpc3RlbmVyKTtcbiAgfSxcblxuICAvKipcbiAgICogUHJlcGFyZSByZXF1aXJlZCBjb3JlIGNvbm5lY3Rpb25zLlxuICAgKiovXG4gIGNvbm5lY3Q6IGZ1bmN0aW9uKHRva2VuKSB7XG4gICAgTG9nZ2VyLmRlYnVnKCdleWVzb246OmNvbm5lY3QnLCB0b2tlbik7XG4gICAgY29yZS5jb21BcGkgPSBuZXcgQ29tQXBpKHRoaXMuY29uZmlnLmFwaSwgdG9rZW4pO1xuICAgIHByZXBhcmVDb25uZWN0aW9uKHRoaXMpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBKb2luIGEgc2Vzc2lvbiB3aXRoIHN1cHBsaWVkIG1lZGlhT3B0aW9ucyAoYXVkaW8vdmlkZW8pLlxuICAgKiovXG4gIGpvaW46IGZ1bmN0aW9uKG1lZGlhT3B0aW9ucykge1xuICAgIExvZ2dlci5kZWJ1ZygnZXllc29uOjpqb2luJywgbWVkaWFPcHRpb25zKTtcbiAgICBqb2luU2Vzc2lvbi5iaW5kKHRoaXMsIG1lZGlhT3B0aW9ucykoKTtcbiAgfSxcblxuICAvKipcbiAgICogU3RhcnQgYW4gZXllc29uIHJvb20gbWVldGluZy5cbiAgICoqL1xuICBzdGFydDogZnVuY3Rpb24odG9rZW4sIG1lZGlhT3B0aW9ucyA9IHsgYXVkaW86IHRydWUsIHZpZGVvOiB0cnVlIH0pIHtcbiAgICBMb2dnZXIuZGVidWcoJ2V5ZXNvbjo6c3RhcnQnKTtcbiAgICBjb25zdCBqb2luT25Db25uZWN0ID0gZXZlbnQgPT4ge1xuICAgICAgaWYgKGV2ZW50LmNvbm5lY3Rpb25TdGF0dXMgIT09ICdyZWFkeScpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdGhpcy5vZmZFdmVudChqb2luT25Db25uZWN0KTtcbiAgICAgIHRoaXMuam9pbihtZWRpYU9wdGlvbnMpO1xuICAgIH07XG4gICAgdGhpcy5vbkV2ZW50KGpvaW5PbkNvbm5lY3QpO1xuICAgIHRoaXMuY29ubmVjdCh0b2tlbik7XG4gIH0sXG5cbiAgLyoqXG4gICAqIERlc3Ryb3kgYW5kIGNsZWFudXAgYSBzZXNzaW9uLlxuICAgKiovXG4gIGRlc3Ryb3k6IGZ1bmN0aW9uKCkge1xuICAgIExvZ2dlci5kZWJ1ZygnZXllc29uOjpkZXN0cm95Jyk7XG4gICAgY2xlYXJJbnRlcnZhbChjb3JlLmtlZXBSb29tQWxpdmUpO1xuICAgIGNvcmUuZXZlbnRIYW5kbGVyLmRlc3Ryb3koKTtcbiAgICBjb3JlLmV2ZW50SGFuZGxlciA9IG5ldyBFdmVudEhhbmRsZXIoKTtcbiAgfSxcblxuICAvKipcbiAgICogUmVjZWl2ZSBhbiBldmVudCBmcm9tIGNsaWVudC5cbiAgICoqL1xuICBzZW5kOiBmdW5jdGlvbihtc2cpIHtcbiAgICBtc2cuX3NyYyA9ICdjbGllbnQnO1xuICAgIHJldHVybiBjb3JlLmV2ZW50SGFuZGxlci5zZW5kKG1zZyk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFdoZW4gaW52b2tlZCByZXBlYXRlZGx5LCB3aWxsIG9ubHkgYWN0dWFsbHkgY2FsbCB0aGUgb3JpZ2luYWwgZnVuY3Rpb24gYXRcbiAgICogbW9zdCBvbmNlIHBlciBldmVyeSB3YWl0IG1pbGxpc2Vjb25kcy5cbiAgICoqL1xuICB0aHJvdHRsZWRTZW5kOiBmdW5jdGlvbihtc2cpIHtcbiAgICBpZiAoIXRoaXMuX3Rocm90dGxlZFNlbmQpIHtcbiAgICAgIHRoaXMuX3Rocm90dGxlZFNlbmQgPSB0aHJvdHRsZShtZXNzYWdlID0+IHRoaXMuc2VuZChtZXNzYWdlKSwgNTAwKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fdGhyb3R0bGVkU2VuZChtc2cpO1xuICB9XG59O1xuXG4vKiBlc2xpbnQtZW5hYmxlIG1heC1saW5lcyAqL1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNyYy9leWVzb24uanMiXSwibWFwcGluZ3MiOiI7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFDQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7OztBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFJQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBaExBO0FBQ0E7QUFrTEEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///51\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Logger = __webpack_require__(/*! ./Logger */ 0);\n\nvar _Logger2 = _interopRequireDefault(_Logger);\n\nvar _debounce = __webpack_require__(/*! ./utils/debounce */ 21);\n\nvar _debounce2 = _interopRequireDefault(_debounce);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Sound Meter that generates a number correlated to audio volume. The meter\n * itself displays nothing, but it makes the instantaneous and time-decaying\n * volumes available for inspection. It also reports on the fraction of samples\n * that were at or near the top of the measurement range.\n **/\nvar SoundMeter = function () {\n  function SoundMeter() {\n    _classCallCheck(this, SoundMeter);\n\n    this.level = 0;\n    this.instant = 0.0;\n    this.intervalCounter = 0;\n    this.silenceDuration = 0;\n    this.init();\n  }\n\n  /**\n   * Initialize audio context and prepare script processor to read input\n   * channel data.\n   **/\n\n\n  _createClass(SoundMeter, [{\n    key: 'init',\n    value: function init() {\n      var _this = this;\n\n      var AudioContext = window.AudioContext || window.webkitAudioContext;\n      if (typeof AudioContext === 'undefined') {\n        _Logger2.default.error('AudioContext is not available. Probably the current' + ' user agent does not support this feature. Use the feature detector' + ' to hide not supported elements. Any call on onUpdate will not' + ' send values.');\n        return;\n      }\n\n      this.context = new AudioContext();\n      this.script = this.context.createScriptProcessor(2048, 1, 1);\n      this.script.onaudioprocess = function (event) {\n        var input = event.inputBuffer.getChannelData(0);\n        var sum = input.reduce(function (prev, current) {\n          return prev + current * current;\n        }, 0);\n        _this.instant = Math.sqrt(sum / input.length) * 100;\n      };\n    }\n\n    /**\n     * Connect to a media stream.\n     **/\n\n  }, {\n    key: 'connectToSource',\n    value: function connectToSource(stream) {\n      if (!this.context || stream.getAudioTracks().length < 1) {\n        return this;\n      }\n      _Logger2.default.debug('SoundMeter::connectToSource', stream);\n      this.mic = this.context.createMediaStreamSource(stream);\n      this.mic.connect(this.script);\n      this.script.connect(this.context.destination);\n      return this;\n    }\n\n    /**\n     * Stop read interval and disconnect from stream.\n     **/\n\n  }, {\n    key: 'stop',\n    value: function stop() {\n      if (!this.context) {\n        return;\n      }\n\n      clearInterval(this.audioMeterInterval);\n      clearInterval(this.readInterval);\n      if (this.mic) {\n        this.mic.disconnect();\n      }\n      this.script.disconnect();\n      if (this.context.close) {\n        this.context.close();\n      }\n    }\n  }, {\n    key: 'onUpdate',\n    value: function onUpdate(listener) {\n      if (!this.context) {\n        return;\n      }\n\n      if (this.audioMeterInterval) {\n        clearInterval(this.audioMeterInterval);\n      }\n      this.readInterval = setInterval(this.readAudioLevel.bind(this, listener), SoundMeter.updateInterval);\n    }\n\n    /**\n     * Read audio level. Avoids triggering a re-render of the device-dialog\n     * when the change is below 1% which wouldn't be noticable anyways.\n     *\n     * NOTE: When an USB Microphone is abruptly disconnected. The\n     * intervalCounter reacts: when switching to a different mic, it seems to\n     * take a bit to not return 0.00 for the audio level.\n     **/\n    /* eslint-disable max-statements */\n\n  }, {\n    key: 'readAudioLevel',\n    value: function readAudioLevel(update) {\n      var audioLevel = this.level;\n\n      // Handle microphone disconnect\n      if (audioLevel === 0 && this.instant === 0 && this.intervalCounter > 5) {\n        this.silenceDuration++;\n        if (this.silenceDuration > 25) {\n          (0, _debounce2.default)(function () {\n            update({ error: 'EyesonMicrophoneError' });\n          }, 1000);\n        }\n      }\n\n      // Clear a MicrophoneError once we get a signal, intervalCounter might be\n      // too low sometimes.\n      if (this.level !== this.instant) {\n        this.silenceDuration = 0;\n        var diff = Math.abs(audioLevel - this.instant);\n        audioLevel = this.instant;\n\n        if (audioLevel > 0.7 || diff > 1) {\n          this.level = this.instant;\n          update({ value: this.level });\n        }\n      }\n\n      this.intervalCounter++;\n    }\n    /* eslint-enable max-statements */\n\n  }]);\n\n  return SoundMeter;\n}();\n\nSoundMeter.updateInterval = 100;\n\nexports.default = SoundMeter;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL1NvdW5kTWV0ZXIuanM/ZTNjOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTG9nZ2VyIGZyb20gJy4vTG9nZ2VyJztcbmltcG9ydCBkZWJvdW5jZSBmcm9tICcuL3V0aWxzL2RlYm91bmNlJztcblxuLyoqXG4gKiBTb3VuZCBNZXRlciB0aGF0IGdlbmVyYXRlcyBhIG51bWJlciBjb3JyZWxhdGVkIHRvIGF1ZGlvIHZvbHVtZS4gVGhlIG1ldGVyXG4gKiBpdHNlbGYgZGlzcGxheXMgbm90aGluZywgYnV0IGl0IG1ha2VzIHRoZSBpbnN0YW50YW5lb3VzIGFuZCB0aW1lLWRlY2F5aW5nXG4gKiB2b2x1bWVzIGF2YWlsYWJsZSBmb3IgaW5zcGVjdGlvbi4gSXQgYWxzbyByZXBvcnRzIG9uIHRoZSBmcmFjdGlvbiBvZiBzYW1wbGVzXG4gKiB0aGF0IHdlcmUgYXQgb3IgbmVhciB0aGUgdG9wIG9mIHRoZSBtZWFzdXJlbWVudCByYW5nZS5cbiAqKi9cbmNsYXNzIFNvdW5kTWV0ZXIge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmxldmVsID0gMDtcbiAgICB0aGlzLmluc3RhbnQgPSAwLjA7XG4gICAgdGhpcy5pbnRlcnZhbENvdW50ZXIgPSAwO1xuICAgIHRoaXMuc2lsZW5jZUR1cmF0aW9uID0gMDtcbiAgICB0aGlzLmluaXQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIGF1ZGlvIGNvbnRleHQgYW5kIHByZXBhcmUgc2NyaXB0IHByb2Nlc3NvciB0byByZWFkIGlucHV0XG4gICAqIGNoYW5uZWwgZGF0YS5cbiAgICoqL1xuICBpbml0KCkge1xuICAgIGNvbnN0IEF1ZGlvQ29udGV4dCA9IHdpbmRvdy5BdWRpb0NvbnRleHQgfHwgd2luZG93LndlYmtpdEF1ZGlvQ29udGV4dDtcbiAgICBpZiAodHlwZW9mIEF1ZGlvQ29udGV4dCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIExvZ2dlci5lcnJvcihcbiAgICAgICAgJ0F1ZGlvQ29udGV4dCBpcyBub3QgYXZhaWxhYmxlLiBQcm9iYWJseSB0aGUgY3VycmVudCcgK1xuICAgICAgICAgICcgdXNlciBhZ2VudCBkb2VzIG5vdCBzdXBwb3J0IHRoaXMgZmVhdHVyZS4gVXNlIHRoZSBmZWF0dXJlIGRldGVjdG9yJyArXG4gICAgICAgICAgJyB0byBoaWRlIG5vdCBzdXBwb3J0ZWQgZWxlbWVudHMuIEFueSBjYWxsIG9uIG9uVXBkYXRlIHdpbGwgbm90JyArXG4gICAgICAgICAgJyBzZW5kIHZhbHVlcy4nXG4gICAgICApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuY29udGV4dCA9IG5ldyBBdWRpb0NvbnRleHQoKTtcbiAgICB0aGlzLnNjcmlwdCA9IHRoaXMuY29udGV4dC5jcmVhdGVTY3JpcHRQcm9jZXNzb3IoMjA0OCwgMSwgMSk7XG4gICAgdGhpcy5zY3JpcHQub25hdWRpb3Byb2Nlc3MgPSBldmVudCA9PiB7XG4gICAgICBjb25zdCBpbnB1dCA9IGV2ZW50LmlucHV0QnVmZmVyLmdldENoYW5uZWxEYXRhKDApO1xuICAgICAgY29uc3Qgc3VtID0gaW5wdXQucmVkdWNlKChwcmV2LCBjdXJyZW50KSA9PiB7XG4gICAgICAgIHJldHVybiBwcmV2ICsgKGN1cnJlbnQgKiBjdXJyZW50KTtcbiAgICAgIH0sIDApO1xuICAgICAgdGhpcy5pbnN0YW50ID0gTWF0aC5zcXJ0KHN1bSAvIGlucHV0Lmxlbmd0aCkgKiAxMDA7XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb25uZWN0IHRvIGEgbWVkaWEgc3RyZWFtLlxuICAgKiovXG4gIGNvbm5lY3RUb1NvdXJjZShzdHJlYW0pIHtcbiAgICBpZiAoIXRoaXMuY29udGV4dCB8fCBzdHJlYW0uZ2V0QXVkaW9UcmFja3MoKS5sZW5ndGggPCAxKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgTG9nZ2VyLmRlYnVnKCdTb3VuZE1ldGVyOjpjb25uZWN0VG9Tb3VyY2UnLCBzdHJlYW0pO1xuICAgIHRoaXMubWljID0gdGhpcy5jb250ZXh0LmNyZWF0ZU1lZGlhU3RyZWFtU291cmNlKHN0cmVhbSk7XG4gICAgdGhpcy5taWMuY29ubmVjdCh0aGlzLnNjcmlwdCk7XG4gICAgdGhpcy5zY3JpcHQuY29ubmVjdCh0aGlzLmNvbnRleHQuZGVzdGluYXRpb24pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0b3AgcmVhZCBpbnRlcnZhbCBhbmQgZGlzY29ubmVjdCBmcm9tIHN0cmVhbS5cbiAgICoqL1xuICBzdG9wKCkge1xuICAgIGlmICghdGhpcy5jb250ZXh0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY2xlYXJJbnRlcnZhbCh0aGlzLmF1ZGlvTWV0ZXJJbnRlcnZhbCk7XG4gICAgY2xlYXJJbnRlcnZhbCh0aGlzLnJlYWRJbnRlcnZhbCk7XG4gICAgaWYgKHRoaXMubWljKSB7XG4gICAgICB0aGlzLm1pYy5kaXNjb25uZWN0KCk7XG4gICAgfVxuICAgIHRoaXMuc2NyaXB0LmRpc2Nvbm5lY3QoKTtcbiAgICBpZiAodGhpcy5jb250ZXh0LmNsb3NlKSB7XG4gICAgICB0aGlzLmNvbnRleHQuY2xvc2UoKTtcbiAgICB9XG4gIH1cblxuICBvblVwZGF0ZShsaXN0ZW5lcikge1xuICAgIGlmICghdGhpcy5jb250ZXh0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuYXVkaW9NZXRlckludGVydmFsKSB7XG4gICAgICBjbGVhckludGVydmFsKHRoaXMuYXVkaW9NZXRlckludGVydmFsKTtcbiAgICB9XG4gICAgdGhpcy5yZWFkSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChcbiAgICAgIHRoaXMucmVhZEF1ZGlvTGV2ZWwuYmluZCh0aGlzLCBsaXN0ZW5lciksXG4gICAgICBTb3VuZE1ldGVyLnVwZGF0ZUludGVydmFsXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWFkIGF1ZGlvIGxldmVsLiBBdm9pZHMgdHJpZ2dlcmluZyBhIHJlLXJlbmRlciBvZiB0aGUgZGV2aWNlLWRpYWxvZ1xuICAgKiB3aGVuIHRoZSBjaGFuZ2UgaXMgYmVsb3cgMSUgd2hpY2ggd291bGRuJ3QgYmUgbm90aWNhYmxlIGFueXdheXMuXG4gICAqXG4gICAqIE5PVEU6IFdoZW4gYW4gVVNCIE1pY3JvcGhvbmUgaXMgYWJydXB0bHkgZGlzY29ubmVjdGVkLiBUaGVcbiAgICogaW50ZXJ2YWxDb3VudGVyIHJlYWN0czogd2hlbiBzd2l0Y2hpbmcgdG8gYSBkaWZmZXJlbnQgbWljLCBpdCBzZWVtcyB0b1xuICAgKiB0YWtlIGEgYml0IHRvIG5vdCByZXR1cm4gMC4wMCBmb3IgdGhlIGF1ZGlvIGxldmVsLlxuICAgKiovXG4gIC8qIGVzbGludC1kaXNhYmxlIG1heC1zdGF0ZW1lbnRzICovXG4gIHJlYWRBdWRpb0xldmVsKHVwZGF0ZSkge1xuICAgIGxldCBhdWRpb0xldmVsID0gdGhpcy5sZXZlbDtcblxuICAgIC8vIEhhbmRsZSBtaWNyb3Bob25lIGRpc2Nvbm5lY3RcbiAgICBpZiAoYXVkaW9MZXZlbCA9PT0gMCAmJiB0aGlzLmluc3RhbnQgPT09IDAgJiYgdGhpcy5pbnRlcnZhbENvdW50ZXIgPiA1KSB7XG4gICAgICB0aGlzLnNpbGVuY2VEdXJhdGlvbisrO1xuICAgICAgaWYgKHRoaXMuc2lsZW5jZUR1cmF0aW9uID4gMjUpIHtcbiAgICAgICAgZGVib3VuY2UoKCkgPT4ge1xuICAgICAgICAgIHVwZGF0ZSh7IGVycm9yOiAnRXllc29uTWljcm9waG9uZUVycm9yJyB9KTtcbiAgICAgICAgfSwgMTAwMCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2xlYXIgYSBNaWNyb3Bob25lRXJyb3Igb25jZSB3ZSBnZXQgYSBzaWduYWwsIGludGVydmFsQ291bnRlciBtaWdodCBiZVxuICAgIC8vIHRvbyBsb3cgc29tZXRpbWVzLlxuICAgIGlmICh0aGlzLmxldmVsICE9PSB0aGlzLmluc3RhbnQpIHtcbiAgICAgIHRoaXMuc2lsZW5jZUR1cmF0aW9uID0gMDtcbiAgICAgIGxldCBkaWZmID0gTWF0aC5hYnMoYXVkaW9MZXZlbCAtIHRoaXMuaW5zdGFudCk7XG4gICAgICBhdWRpb0xldmVsID0gdGhpcy5pbnN0YW50O1xuXG4gICAgICBpZiAoYXVkaW9MZXZlbCA+IDAuNyB8fCBkaWZmID4gMSkge1xuICAgICAgICB0aGlzLmxldmVsID0gdGhpcy5pbnN0YW50O1xuICAgICAgICB1cGRhdGUoeyB2YWx1ZTogdGhpcy5sZXZlbCB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmludGVydmFsQ291bnRlcisrO1xuICB9XG4gIC8qIGVzbGludC1lbmFibGUgbWF4LXN0YXRlbWVudHMgKi9cbn1cblxuU291bmRNZXRlci51cGRhdGVJbnRlcnZhbCA9IDEwMDtcblxuZXhwb3J0IGRlZmF1bHQgU291bmRNZXRlcjtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBzcmMvU291bmRNZXRlci5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7Ozs7O0FBQ0E7Ozs7OztBQU1BO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7QUFJQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7Ozs7Ozs7O0FBUUE7QUFDQTs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUFFQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///52\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Logger = __webpack_require__(/*! ./Logger */ 0);\n\nvar _Logger2 = _interopRequireDefault(_Logger);\n\nvar _ExtensionAdapter = __webpack_require__(/*! ./ExtensionAdapter */ 54);\n\nvar _ExtensionAdapter2 = _interopRequireDefault(_ExtensionAdapter);\n\nvar _ScreenCaptureSession = __webpack_require__(/*! ./ScreenCaptureSession */ 55);\n\nvar _ScreenCaptureSession2 = _interopRequireDefault(_ScreenCaptureSession);\n\nvar _PlaybackEvents = __webpack_require__(/*! ./events/PlaybackEvents */ 73);\n\nvar _AnnotationEvents = __webpack_require__(/*! ./events/AnnotationEvents */ 74);\n\nvar _IgnoreEvent = __webpack_require__(/*! ./events/IgnoreEvent */ 75);\n\nvar _IgnoreEvent2 = _interopRequireDefault(_IgnoreEvent);\n\nvar _PublicEvent = __webpack_require__(/*! ./events/PublicEvent */ 2);\n\nvar _PublicEvent2 = _interopRequireDefault(_PublicEvent);\n\nvar _PodiumEvent = __webpack_require__(/*! ./events/PodiumEvent */ 76);\n\nvar _PodiumEvent2 = _interopRequireDefault(_PodiumEvent);\n\nvar _PresentEvent = __webpack_require__(/*! ./events/PresentEvent */ 78);\n\nvar _PresentEvent2 = _interopRequireDefault(_PresentEvent);\n\nvar _ForwardEvent = __webpack_require__(/*! ./events/ForwardEvent */ 26);\n\nvar _ForwardEvent2 = _interopRequireDefault(_ForwardEvent);\n\nvar _SnapshotEvent = __webpack_require__(/*! ./events/SnapshotEvent */ 79);\n\nvar _SnapshotEvent2 = _interopRequireDefault(_SnapshotEvent);\n\nvar _SetLayerEvent = __webpack_require__(/*! ./events/SetLayerEvent */ 80);\n\nvar _SetLayerEvent2 = _interopRequireDefault(_SetLayerEvent);\n\nvar _SendChatEvent = __webpack_require__(/*! ./events/SendChatEvent */ 81);\n\nvar _SendChatEvent2 = _interopRequireDefault(_SendChatEvent);\n\nvar _LoadFilesEvent = __webpack_require__(/*! ./events/LoadFilesEvent */ 82);\n\nvar _LoadFilesEvent2 = _interopRequireDefault(_LoadFilesEvent);\n\nvar _SetLayoutEvent = __webpack_require__(/*! ./events/SetLayoutEvent */ 83);\n\nvar _SetLayoutEvent2 = _interopRequireDefault(_SetLayoutEvent);\n\nvar _RoomReadyEvent = __webpack_require__(/*! ./events/RoomReadyEvent */ 84);\n\nvar _RoomReadyEvent2 = _interopRequireDefault(_RoomReadyEvent);\n\nvar _FetchRoomEvent = __webpack_require__(/*! ./events/FetchRoomEvent */ 91);\n\nvar _FetchRoomEvent2 = _interopRequireDefault(_FetchRoomEvent);\n\nvar _DeleteFileEvent = __webpack_require__(/*! ./events/DeleteFileEvent */ 92);\n\nvar _DeleteFileEvent2 = _interopRequireDefault(_DeleteFileEvent);\n\nvar _UploadFileEvent = __webpack_require__(/*! ./events/UploadFileEvent */ 93);\n\nvar _UploadFileEvent2 = _interopRequireDefault(_UploadFileEvent);\n\nvar _ReceiveChatEvent = __webpack_require__(/*! ./events/ReceiveChatEvent */ 94);\n\nvar _ReceiveChatEvent2 = _interopRequireDefault(_ReceiveChatEvent);\n\nvar _StopYouTubeEvent = __webpack_require__(/*! ./events/StopYouTubeEvent */ 95);\n\nvar _StopYouTubeEvent2 = _interopRequireDefault(_StopYouTubeEvent);\n\nvar _ChangeStreamEvent = __webpack_require__(/*! ./events/ChangeStreamEvent */ 96);\n\nvar _ChangeStreamEvent2 = _interopRequireDefault(_ChangeStreamEvent);\n\nvar _ToggleCameraEvent = __webpack_require__(/*! ./events/ToggleCameraEvent */ 97);\n\nvar _ToggleCameraEvent2 = _interopRequireDefault(_ToggleCameraEvent);\n\nvar _StartYouTubeEvent = __webpack_require__(/*! ./events/StartYouTubeEvent */ 99);\n\nvar _StartYouTubeEvent2 = _interopRequireDefault(_StartYouTubeEvent);\n\nvar _StopFacebookEvent = __webpack_require__(/*! ./events/StopFacebookEvent */ 100);\n\nvar _StopFacebookEvent2 = _interopRequireDefault(_StopFacebookEvent);\n\nvar _AcceptSessionEvent = __webpack_require__(/*! ./events/AcceptSessionEvent */ 101);\n\nvar _AcceptSessionEvent2 = _interopRequireDefault(_AcceptSessionEvent);\n\nvar _RestartStreamEvent = __webpack_require__(/*! ./events/RestartStreamEvent */ 102);\n\nvar _RestartStreamEvent2 = _interopRequireDefault(_RestartStreamEvent);\n\nvar _StartFacebookEvent = __webpack_require__(/*! ./events/StartFacebookEvent */ 103);\n\nvar _StartFacebookEvent2 = _interopRequireDefault(_StartFacebookEvent);\n\nvar _StopRecordingEvent = __webpack_require__(/*! ./events/StopRecordingEvent */ 104);\n\nvar _StopRecordingEvent2 = _interopRequireDefault(_StopRecordingEvent);\n\nvar _ScreenCaptureEvent = __webpack_require__(/*! ./events/ScreenCaptureEvent */ 105);\n\nvar _ScreenCaptureEvent2 = _interopRequireDefault(_ScreenCaptureEvent);\n\nvar _StartRecordingEvent = __webpack_require__(/*! ./events/StartRecordingEvent */ 106);\n\nvar _StartRecordingEvent2 = _interopRequireDefault(_StartRecordingEvent);\n\nvar _StopPresentingEvent = __webpack_require__(/*! ./events/StopPresentingEvent */ 107);\n\nvar _StopPresentingEvent2 = _interopRequireDefault(_StopPresentingEvent);\n\nvar _StopBroadcastsEvent = __webpack_require__(/*! ./events/StopBroadcastsEvent */ 108);\n\nvar _StopBroadcastsEvent2 = _interopRequireDefault(_StopBroadcastsEvent);\n\nvar _ClearFrontLayerEvent = __webpack_require__(/*! ./events/ClearFrontLayerEvent */ 109);\n\nvar _ClearFrontLayerEvent2 = _interopRequireDefault(_ClearFrontLayerEvent);\n\nvar _PublishBroadcastEvent = __webpack_require__(/*! ./events/PublishBroadcastEvent */ 110);\n\nvar _PublishBroadcastEvent2 = _interopRequireDefault(_PublishBroadcastEvent);\n\nvar _RequestGuestUserEvent = __webpack_require__(/*! ./events/RequestGuestUserEvent */ 111);\n\nvar _RequestGuestUserEvent2 = _interopRequireDefault(_RequestGuestUserEvent);\n\nvar _HandleStreamOfferEvent = __webpack_require__(/*! ./events/HandleStreamOfferEvent */ 112);\n\nvar _HandleStreamOfferEvent2 = _interopRequireDefault(_HandleStreamOfferEvent);\n\nvar _HandleStreamAnswerEvent = __webpack_require__(/*! ./events/HandleStreamAnswerEvent */ 113);\n\nvar _HandleStreamAnswerEvent2 = _interopRequireDefault(_HandleStreamAnswerEvent);\n\nvar _ReceiveScreenCaptureEvent = __webpack_require__(/*! ./events/ReceiveScreenCaptureEvent */ 114);\n\nvar _ReceiveScreenCaptureEvent2 = _interopRequireDefault(_ReceiveScreenCaptureEvent);\n\nvar _ParticipantListUpdateEvent = __webpack_require__(/*! ./events/ParticipantListUpdateEvent */ 115);\n\nvar _ParticipantListUpdateEvent2 = _interopRequireDefault(_ParticipantListUpdateEvent);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Event Handler uses the connection credentials for the room and\n * the user to setup a (monitored) connection, start a session and\n * listen for any events.\n **/\nvar EventHandler = function () {\n  function EventHandler() {\n    _classCallCheck(this, EventHandler);\n\n    this.listeners = [];\n    this._session = null;\n    this._monitor = null;\n    this._connection = null;\n    this._rtConnection = null;\n    this.captureSession = null;\n    this.extensionAdapter = new _ExtensionAdapter2.default();\n\n    this.send = this.send.bind(this);\n    this.startCaptureSession = this.startCaptureSession.bind(this);\n    this.endCaptureSession = this.endCaptureSession.bind(this);\n  }\n\n  /* eslint-disable max-statements */\n\n\n  _createClass(EventHandler, [{\n    key: 'destroy',\n    value: function destroy() {\n      if (this._monitor) {\n        this._monitor.destroy();\n      }\n      if (this._connection) {\n        this._connection.close();\n      }\n      if (this._rtConnection) {\n        this._rtConnection.close();\n      }\n      if (this._session) {\n        this._session.end();\n      }\n      if (this.extensionAdapter) {\n        this.extensionAdapter.destroy();\n      }\n      this._api = null;\n      this._session = null;\n      this._monitor = null;\n      this._connection = null;\n      this._rtConnection = null;\n    }\n    /* eslint-enable max-statements */\n\n  }, {\n    key: 'startCaptureSession',\n    value: function startCaptureSession(audio) {\n      this.captureSession = new _ScreenCaptureSession2.default(audio, this);\n      this.captureSession.init();\n    }\n  }, {\n    key: 'endCaptureSession',\n    value: function endCaptureSession() {\n      if (this.captureSession) {\n        this.captureSession.end();\n        this.captureSession = null;\n      }\n    }\n\n    /**\n     * Register a new listeners.\n     **/\n\n  }, {\n    key: 'onReceive',\n    value: function onReceive(callback) {\n      _Logger2.default.debug('EventHandler::onReceive');\n      this.listeners.push(callback);\n    }\n\n    /**\n     * Unregisters a listener.\n     **/\n\n  }, {\n    key: 'removeListener',\n    value: function removeListener(callback) {\n      this.listeners = this.listeners.filter(function (listener) {\n        return listener !== callback;\n      });\n    }\n\n    /**\n     * On receiving an event, notify all registered listeners.\n     **/\n    /* eslint-disable camelcase */\n\n  }, {\n    key: 'send',\n    value: function send(msg) {\n      _Logger2.default.debug('EventHandler::send', msg);\n      new ({\n        chat: _ReceiveChatEvent2.default,\n        accept: _AcceptSessionEvent2.default,\n        podium: _PodiumEvent2.default,\n        present: _PresentEvent2.default,\n        snapshot: _SnapshotEvent2.default,\n        send_chat: _SendChatEvent2.default,\n        set_layer: _SetLayerEvent2.default,\n        set_layout: _SetLayoutEvent2.default,\n        fetch_room: _FetchRoomEvent2.default,\n        room_ready: _RoomReadyEvent2.default,\n        room_setup: _RoomReadyEvent2.default,\n        load_files: _LoadFilesEvent2.default,\n        memberlist: _ParticipantListUpdateEvent2.default,\n        upload_file: _UploadFileEvent2.default,\n        delete_file: _DeleteFileEvent2.default,\n        stream_offer: _HandleStreamOfferEvent2.default,\n        stop_youtube: _StopYouTubeEvent2.default,\n        stream_answer: _HandleStreamAnswerEvent2.default,\n        start_youtube: _StartYouTubeEvent2.default,\n        change_stream: _ChangeStreamEvent2.default,\n        toggle_camera: _ToggleCameraEvent2.default,\n        stop_facebook: _StopFacebookEvent2.default,\n        get_playbacks: _PlaybackEvents.GetPlaybacksEvent,\n        stop_playback: _PlaybackEvents.StopPlaybackEvent,\n        start_playback: _PlaybackEvents.StartPlaybackEvent,\n        restart_stream: _RestartStreamEvent2.default,\n        start_facebook: _StartFacebookEvent2.default,\n        stop_recording: _StopRecordingEvent2.default,\n        receive_screen: _ReceiveScreenCaptureEvent2.default,\n        stop_broadcasts: _StopBroadcastsEvent2.default,\n        start_recording: _StartRecordingEvent2.default,\n        stop_presenting: _StopPresentingEvent2.default,\n        stop_annotation: _AnnotationEvents.StopAnnotationEvent,\n        start_annotation: _AnnotationEvents.StartAnnotationEvent,\n        publish_broadcast: _PublishBroadcastEvent2.default,\n        clear_front_layer: _ClearFrontLayerEvent2.default,\n        request_guest_user: _RequestGuestUserEvent2.default,\n        start_screen_capture: _ScreenCaptureEvent2.default,\n\n        end_screen: _ForwardEvent2.default,\n        capture_error: _ForwardEvent2.default,\n        options_update: _ForwardEvent2.default,\n        ext_not_installed: _ForwardEvent2.default,\n        broadcasts_update: _ForwardEvent2.default,\n        facebook_logged_in: _ForwardEvent2.default,\n        facebook_published: _ForwardEvent2.default,\n        handle_youtube_error: _ForwardEvent2.default,\n        handle_facebook_error: _ForwardEvent2.default,\n\n        recording: _IgnoreEvent2.default,\n        ext_cancel: _IgnoreEvent2.default,\n        ext_installed: _IgnoreEvent2.default,\n        message_status: _IgnoreEvent2.default,\n        moderator_info: _IgnoreEvent2.default\n      }[msg.type] || _PublicEvent2.default)(this).handle(msg);\n    }\n    /* eslint-enable camelcase */\n\n  }, {\n    key: 'connection',\n    set: function set(con) {\n      if (this._connection) {\n        _Logger2.default.error('A connection is already set. If you are trying to start a new' + ' session you have to end the current one first.');\n        return;\n      }\n      this._connection = con;\n      this._connection.onMessage(this.send);\n    }\n  }, {\n    key: 'rtConnection',\n    set: function set(con) {\n      if (this._rtConnection) {\n        _Logger2.default.error('A real-time connection is already set. If you are trying to start' + ' a new session you have the close the current before.');\n        return;\n      }\n      this._rtConnection = con;\n      this._rtConnection.onMessage(this.send);\n    }\n  }, {\n    key: 'monitor',\n    set: function set(mon) {\n      if (this._monitor) {\n        _Logger2.default.error('A monitor is already set. If you are trying to start a new' + ' session you have to end the current one first.');\n        return;\n      }\n      this._monitor = mon;\n      this._monitor.onError(this.send);\n    },\n    get: function get() {\n      return this._monitor;\n    }\n  }, {\n    key: 'session',\n    set: function set(ses) {\n      if (this._session) {\n        _Logger2.default.error('A session is already set. If you are trying to start a new' + ' session you have to end the current one first.');\n        return;\n      }\n      this._session = ses;\n      this._session.onEvent(this.send);\n    }\n  }, {\n    key: 'api',\n    set: function set(api) {\n      this._api = api;\n    }\n  }, {\n    key: 'rtData',\n    set: function set(data) {\n      this._rtData = data;\n    }\n  }]);\n\n  return EventHandler;\n}();\n\nexports.default = EventHandler;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL0V2ZW50SGFuZGxlci5qcz9jMjg4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBMb2dnZXIgZnJvbSAnLi9Mb2dnZXInO1xuXG5pbXBvcnQgRXh0ZW5zaW9uQWRhcHRlciBmcm9tICcuL0V4dGVuc2lvbkFkYXB0ZXInO1xuaW1wb3J0IFNjcmVlbkNhcHR1cmVTZXNzaW9uIGZyb20gJy4vU2NyZWVuQ2FwdHVyZVNlc3Npb24nO1xuXG5pbXBvcnQge1xuICBHZXRQbGF5YmFja3NFdmVudCxcbiAgU3RvcFBsYXliYWNrRXZlbnQsXG4gIFN0YXJ0UGxheWJhY2tFdmVudFxufSBmcm9tICcuL2V2ZW50cy9QbGF5YmFja0V2ZW50cyc7XG5cbmltcG9ydCB7XG4gIFN0YXJ0QW5ub3RhdGlvbkV2ZW50LFxuICBTdG9wQW5ub3RhdGlvbkV2ZW50XG59IGZyb20gJy4vZXZlbnRzL0Fubm90YXRpb25FdmVudHMnO1xuXG5pbXBvcnQgSWdub3JlRXZlbnQgZnJvbSAnLi9ldmVudHMvSWdub3JlRXZlbnQnO1xuaW1wb3J0IFB1YmxpY0V2ZW50IGZyb20gJy4vZXZlbnRzL1B1YmxpY0V2ZW50JztcbmltcG9ydCBQb2RpdW1FdmVudCBmcm9tICcuL2V2ZW50cy9Qb2RpdW1FdmVudCc7XG5pbXBvcnQgUHJlc2VudEV2ZW50IGZyb20gJy4vZXZlbnRzL1ByZXNlbnRFdmVudCc7XG5pbXBvcnQgRm9yd2FyZEV2ZW50IGZyb20gJy4vZXZlbnRzL0ZvcndhcmRFdmVudCc7XG5pbXBvcnQgU25hcHNob3RFdmVudCBmcm9tICcuL2V2ZW50cy9TbmFwc2hvdEV2ZW50JztcbmltcG9ydCBTZXRMYXllckV2ZW50IGZyb20gJy4vZXZlbnRzL1NldExheWVyRXZlbnQnO1xuaW1wb3J0IFNlbmRDaGF0RXZlbnQgZnJvbSAnLi9ldmVudHMvU2VuZENoYXRFdmVudCc7XG5pbXBvcnQgTG9hZEZpbGVzRXZlbnQgZnJvbSAnLi9ldmVudHMvTG9hZEZpbGVzRXZlbnQnO1xuaW1wb3J0IFNldExheW91dEV2ZW50IGZyb20gJy4vZXZlbnRzL1NldExheW91dEV2ZW50JztcbmltcG9ydCBSb29tUmVhZHlFdmVudCBmcm9tICcuL2V2ZW50cy9Sb29tUmVhZHlFdmVudCc7XG5pbXBvcnQgRmV0Y2hSb29tRXZlbnQgZnJvbSAnLi9ldmVudHMvRmV0Y2hSb29tRXZlbnQnO1xuaW1wb3J0IERlbGV0ZUZpbGVFdmVudCBmcm9tICcuL2V2ZW50cy9EZWxldGVGaWxlRXZlbnQnO1xuaW1wb3J0IFVwbG9hZEZpbGVFdmVudCBmcm9tICcuL2V2ZW50cy9VcGxvYWRGaWxlRXZlbnQnO1xuaW1wb3J0IFJlY2VpdmVDaGF0RXZlbnQgZnJvbSAnLi9ldmVudHMvUmVjZWl2ZUNoYXRFdmVudCc7XG5pbXBvcnQgU3RvcFlvdVR1YmVFdmVudCBmcm9tICcuL2V2ZW50cy9TdG9wWW91VHViZUV2ZW50JztcbmltcG9ydCBDaGFuZ2VTdHJlYW1FdmVudCBmcm9tICcuL2V2ZW50cy9DaGFuZ2VTdHJlYW1FdmVudCc7XG5pbXBvcnQgVG9nZ2xlQ2FtZXJhRXZlbnQgZnJvbSAnLi9ldmVudHMvVG9nZ2xlQ2FtZXJhRXZlbnQnO1xuaW1wb3J0IFN0YXJ0WW91VHViZUV2ZW50IGZyb20gJy4vZXZlbnRzL1N0YXJ0WW91VHViZUV2ZW50JztcbmltcG9ydCBTdG9wRmFjZWJvb2tFdmVudCBmcm9tICcuL2V2ZW50cy9TdG9wRmFjZWJvb2tFdmVudCc7XG5pbXBvcnQgQWNjZXB0U2Vzc2lvbkV2ZW50IGZyb20gJy4vZXZlbnRzL0FjY2VwdFNlc3Npb25FdmVudCc7XG5pbXBvcnQgUmVzdGFydFN0cmVhbUV2ZW50IGZyb20gJy4vZXZlbnRzL1Jlc3RhcnRTdHJlYW1FdmVudCc7XG5pbXBvcnQgU3RhcnRGYWNlYm9va0V2ZW50IGZyb20gJy4vZXZlbnRzL1N0YXJ0RmFjZWJvb2tFdmVudCc7XG5pbXBvcnQgU3RvcFJlY29yZGluZ0V2ZW50IGZyb20gJy4vZXZlbnRzL1N0b3BSZWNvcmRpbmdFdmVudCc7XG5pbXBvcnQgU2NyZWVuQ2FwdHVyZUV2ZW50IGZyb20gJy4vZXZlbnRzL1NjcmVlbkNhcHR1cmVFdmVudCc7XG5pbXBvcnQgU3RhcnRSZWNvcmRpbmdFdmVudCBmcm9tICcuL2V2ZW50cy9TdGFydFJlY29yZGluZ0V2ZW50JztcbmltcG9ydCBTdG9wUHJlc2VudGluZ0V2ZW50IGZyb20gJy4vZXZlbnRzL1N0b3BQcmVzZW50aW5nRXZlbnQnO1xuaW1wb3J0IFN0b3BCcm9hZGNhc3RzRXZlbnQgZnJvbSAnLi9ldmVudHMvU3RvcEJyb2FkY2FzdHNFdmVudCc7XG5pbXBvcnQgQ2xlYXJGcm9udExheWVyRXZlbnQgZnJvbSAnLi9ldmVudHMvQ2xlYXJGcm9udExheWVyRXZlbnQnO1xuaW1wb3J0IFB1Ymxpc2hCcm9hZGNhc3RFdmVudCBmcm9tICcuL2V2ZW50cy9QdWJsaXNoQnJvYWRjYXN0RXZlbnQnO1xuaW1wb3J0IFJlcXVlc3RHdWVzdFVzZXJFdmVudCBmcm9tICcuL2V2ZW50cy9SZXF1ZXN0R3Vlc3RVc2VyRXZlbnQnO1xuaW1wb3J0IEhhbmRsZVN0cmVhbU9mZmVyRXZlbnQgZnJvbSAnLi9ldmVudHMvSGFuZGxlU3RyZWFtT2ZmZXJFdmVudCc7XG5pbXBvcnQgSGFuZGxlU3RyZWFtQW5zd2VyRXZlbnQgZnJvbSAnLi9ldmVudHMvSGFuZGxlU3RyZWFtQW5zd2VyRXZlbnQnO1xuaW1wb3J0IFJlY2VpdmVTY3JlZW5DYXB0dXJlRXZlbnQgZnJvbSAnLi9ldmVudHMvUmVjZWl2ZVNjcmVlbkNhcHR1cmVFdmVudCc7XG5pbXBvcnQgUGFydGljaXBhbnRMaXN0VXBkYXRlRXZlbnQgZnJvbSAnLi9ldmVudHMvUGFydGljaXBhbnRMaXN0VXBkYXRlRXZlbnQnO1xuXG4vKipcbiAqIEV2ZW50IEhhbmRsZXIgdXNlcyB0aGUgY29ubmVjdGlvbiBjcmVkZW50aWFscyBmb3IgdGhlIHJvb20gYW5kXG4gKiB0aGUgdXNlciB0byBzZXR1cCBhIChtb25pdG9yZWQpIGNvbm5lY3Rpb24sIHN0YXJ0IGEgc2Vzc2lvbiBhbmRcbiAqIGxpc3RlbiBmb3IgYW55IGV2ZW50cy5cbiAqKi9cbmNsYXNzIEV2ZW50SGFuZGxlciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMubGlzdGVuZXJzID0gW107XG4gICAgdGhpcy5fc2Vzc2lvbiA9IG51bGw7XG4gICAgdGhpcy5fbW9uaXRvciA9IG51bGw7XG4gICAgdGhpcy5fY29ubmVjdGlvbiA9IG51bGw7XG4gICAgdGhpcy5fcnRDb25uZWN0aW9uID0gbnVsbDtcbiAgICB0aGlzLmNhcHR1cmVTZXNzaW9uID0gbnVsbDtcbiAgICB0aGlzLmV4dGVuc2lvbkFkYXB0ZXIgPSBuZXcgRXh0ZW5zaW9uQWRhcHRlcigpO1xuXG4gICAgdGhpcy5zZW5kID0gdGhpcy5zZW5kLmJpbmQodGhpcyk7XG4gICAgdGhpcy5zdGFydENhcHR1cmVTZXNzaW9uID0gdGhpcy5zdGFydENhcHR1cmVTZXNzaW9uLmJpbmQodGhpcyk7XG4gICAgdGhpcy5lbmRDYXB0dXJlU2Vzc2lvbiA9IHRoaXMuZW5kQ2FwdHVyZVNlc3Npb24uYmluZCh0aGlzKTtcbiAgfVxuXG4gIC8qIGVzbGludC1kaXNhYmxlIG1heC1zdGF0ZW1lbnRzICovXG4gIGRlc3Ryb3koKSB7XG4gICAgaWYgKHRoaXMuX21vbml0b3IpIHtcbiAgICAgIHRoaXMuX21vbml0b3IuZGVzdHJveSgpO1xuICAgIH1cbiAgICBpZiAodGhpcy5fY29ubmVjdGlvbikge1xuICAgICAgdGhpcy5fY29ubmVjdGlvbi5jbG9zZSgpO1xuICAgIH1cbiAgICBpZiAodGhpcy5fcnRDb25uZWN0aW9uKSB7XG4gICAgICB0aGlzLl9ydENvbm5lY3Rpb24uY2xvc2UoKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuX3Nlc3Npb24pIHtcbiAgICAgIHRoaXMuX3Nlc3Npb24uZW5kKCk7XG4gICAgfVxuICAgIGlmICh0aGlzLmV4dGVuc2lvbkFkYXB0ZXIpIHtcbiAgICAgIHRoaXMuZXh0ZW5zaW9uQWRhcHRlci5kZXN0cm95KCk7XG4gICAgfVxuICAgIHRoaXMuX2FwaSA9IG51bGw7XG4gICAgdGhpcy5fc2Vzc2lvbiA9IG51bGw7XG4gICAgdGhpcy5fbW9uaXRvciA9IG51bGw7XG4gICAgdGhpcy5fY29ubmVjdGlvbiA9IG51bGw7XG4gICAgdGhpcy5fcnRDb25uZWN0aW9uID0gbnVsbDtcbiAgfVxuICAvKiBlc2xpbnQtZW5hYmxlIG1heC1zdGF0ZW1lbnRzICovXG5cbiAgc2V0IGNvbm5lY3Rpb24oY29uKSB7XG4gICAgaWYgKHRoaXMuX2Nvbm5lY3Rpb24pIHtcbiAgICAgIExvZ2dlci5lcnJvcihcbiAgICAgICAgJ0EgY29ubmVjdGlvbiBpcyBhbHJlYWR5IHNldC4gSWYgeW91IGFyZSB0cnlpbmcgdG8gc3RhcnQgYSBuZXcnICtcbiAgICAgICAgJyBzZXNzaW9uIHlvdSBoYXZlIHRvIGVuZCB0aGUgY3VycmVudCBvbmUgZmlyc3QuJ1xuICAgICAgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fY29ubmVjdGlvbiA9IGNvbjtcbiAgICB0aGlzLl9jb25uZWN0aW9uLm9uTWVzc2FnZSh0aGlzLnNlbmQpO1xuICB9XG5cbiAgc2V0IHJ0Q29ubmVjdGlvbihjb24pIHtcbiAgICBpZiAodGhpcy5fcnRDb25uZWN0aW9uKSB7XG4gICAgICBMb2dnZXIuZXJyb3IoXG4gICAgICAgICdBIHJlYWwtdGltZSBjb25uZWN0aW9uIGlzIGFscmVhZHkgc2V0LiBJZiB5b3UgYXJlIHRyeWluZyB0byBzdGFydCcgK1xuICAgICAgICAnIGEgbmV3IHNlc3Npb24geW91IGhhdmUgdGhlIGNsb3NlIHRoZSBjdXJyZW50IGJlZm9yZS4nXG4gICAgICApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9ydENvbm5lY3Rpb24gPSBjb247XG4gICAgdGhpcy5fcnRDb25uZWN0aW9uLm9uTWVzc2FnZSh0aGlzLnNlbmQpO1xuICB9XG5cbiAgc2V0IG1vbml0b3IobW9uKSB7XG4gICAgaWYgKHRoaXMuX21vbml0b3IpIHtcbiAgICAgIExvZ2dlci5lcnJvcihcbiAgICAgICAgJ0EgbW9uaXRvciBpcyBhbHJlYWR5IHNldC4gSWYgeW91IGFyZSB0cnlpbmcgdG8gc3RhcnQgYSBuZXcnICtcbiAgICAgICAgJyBzZXNzaW9uIHlvdSBoYXZlIHRvIGVuZCB0aGUgY3VycmVudCBvbmUgZmlyc3QuJ1xuICAgICAgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fbW9uaXRvciA9IG1vbjtcbiAgICB0aGlzLl9tb25pdG9yLm9uRXJyb3IodGhpcy5zZW5kKTtcbiAgfVxuXG4gIHNldCBzZXNzaW9uKHNlcykge1xuICAgIGlmICh0aGlzLl9zZXNzaW9uKSB7XG4gICAgICBMb2dnZXIuZXJyb3IoXG4gICAgICAgICdBIHNlc3Npb24gaXMgYWxyZWFkeSBzZXQuIElmIHlvdSBhcmUgdHJ5aW5nIHRvIHN0YXJ0IGEgbmV3JyArXG4gICAgICAgICcgc2Vzc2lvbiB5b3UgaGF2ZSB0byBlbmQgdGhlIGN1cnJlbnQgb25lIGZpcnN0LidcbiAgICAgICk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX3Nlc3Npb24gPSBzZXM7XG4gICAgdGhpcy5fc2Vzc2lvbi5vbkV2ZW50KHRoaXMuc2VuZCk7XG4gIH1cblxuICBzZXQgYXBpKGFwaSkge1xuICAgIHRoaXMuX2FwaSA9IGFwaTtcbiAgfVxuXG4gIHNldCBydERhdGEoZGF0YSkge1xuICAgIHRoaXMuX3J0RGF0YSA9IGRhdGE7XG4gIH1cblxuICBnZXQgbW9uaXRvcigpIHtcbiAgICByZXR1cm4gdGhpcy5fbW9uaXRvcjtcbiAgfVxuXG4gIHN0YXJ0Q2FwdHVyZVNlc3Npb24oYXVkaW8pIHtcbiAgICB0aGlzLmNhcHR1cmVTZXNzaW9uID0gbmV3IFNjcmVlbkNhcHR1cmVTZXNzaW9uKGF1ZGlvLCB0aGlzKTtcbiAgICB0aGlzLmNhcHR1cmVTZXNzaW9uLmluaXQoKTtcbiAgfVxuXG4gIGVuZENhcHR1cmVTZXNzaW9uKCkge1xuICAgIGlmICh0aGlzLmNhcHR1cmVTZXNzaW9uKSB7XG4gICAgICB0aGlzLmNhcHR1cmVTZXNzaW9uLmVuZCgpO1xuICAgICAgdGhpcy5jYXB0dXJlU2Vzc2lvbiA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVyIGEgbmV3IGxpc3RlbmVycy5cbiAgICoqL1xuICBvblJlY2VpdmUoY2FsbGJhY2spIHtcbiAgICBMb2dnZXIuZGVidWcoJ0V2ZW50SGFuZGxlcjo6b25SZWNlaXZlJyk7XG4gICAgdGhpcy5saXN0ZW5lcnMucHVzaChjYWxsYmFjayk7XG4gIH1cblxuICAvKipcbiAgICogVW5yZWdpc3RlcnMgYSBsaXN0ZW5lci5cbiAgICoqL1xuICByZW1vdmVMaXN0ZW5lcihjYWxsYmFjaykge1xuICAgIHRoaXMubGlzdGVuZXJzID0gdGhpcy5saXN0ZW5lcnMuZmlsdGVyKGxpc3RlbmVyID0+IGxpc3RlbmVyICE9PSBjYWxsYmFjayk7XG4gIH1cblxuICAvKipcbiAgICogT24gcmVjZWl2aW5nIGFuIGV2ZW50LCBub3RpZnkgYWxsIHJlZ2lzdGVyZWQgbGlzdGVuZXJzLlxuICAgKiovXG4gIC8qIGVzbGludC1kaXNhYmxlIGNhbWVsY2FzZSAqL1xuICBzZW5kKG1zZykge1xuICAgIExvZ2dlci5kZWJ1ZygnRXZlbnRIYW5kbGVyOjpzZW5kJywgbXNnKTtcbiAgICBuZXcgKHtcbiAgICAgIGNoYXQ6IFJlY2VpdmVDaGF0RXZlbnQsXG4gICAgICBhY2NlcHQ6IEFjY2VwdFNlc3Npb25FdmVudCxcbiAgICAgIHBvZGl1bTogUG9kaXVtRXZlbnQsXG4gICAgICBwcmVzZW50OiBQcmVzZW50RXZlbnQsXG4gICAgICBzbmFwc2hvdDogU25hcHNob3RFdmVudCxcbiAgICAgIHNlbmRfY2hhdDogU2VuZENoYXRFdmVudCxcbiAgICAgIHNldF9sYXllcjogU2V0TGF5ZXJFdmVudCxcbiAgICAgIHNldF9sYXlvdXQ6IFNldExheW91dEV2ZW50LFxuICAgICAgZmV0Y2hfcm9vbTogRmV0Y2hSb29tRXZlbnQsXG4gICAgICByb29tX3JlYWR5OiBSb29tUmVhZHlFdmVudCxcbiAgICAgIHJvb21fc2V0dXA6IFJvb21SZWFkeUV2ZW50LFxuICAgICAgbG9hZF9maWxlczogTG9hZEZpbGVzRXZlbnQsXG4gICAgICBtZW1iZXJsaXN0OiBQYXJ0aWNpcGFudExpc3RVcGRhdGVFdmVudCxcbiAgICAgIHVwbG9hZF9maWxlOiBVcGxvYWRGaWxlRXZlbnQsXG4gICAgICBkZWxldGVfZmlsZTogRGVsZXRlRmlsZUV2ZW50LFxuICAgICAgc3RyZWFtX29mZmVyOiBIYW5kbGVTdHJlYW1PZmZlckV2ZW50LFxuICAgICAgc3RvcF95b3V0dWJlOiBTdG9wWW91VHViZUV2ZW50LFxuICAgICAgc3RyZWFtX2Fuc3dlcjogSGFuZGxlU3RyZWFtQW5zd2VyRXZlbnQsXG4gICAgICBzdGFydF95b3V0dWJlOiBTdGFydFlvdVR1YmVFdmVudCxcbiAgICAgIGNoYW5nZV9zdHJlYW06IENoYW5nZVN0cmVhbUV2ZW50LFxuICAgICAgdG9nZ2xlX2NhbWVyYTogVG9nZ2xlQ2FtZXJhRXZlbnQsXG4gICAgICBzdG9wX2ZhY2Vib29rOiBTdG9wRmFjZWJvb2tFdmVudCxcbiAgICAgIGdldF9wbGF5YmFja3M6IEdldFBsYXliYWNrc0V2ZW50LFxuICAgICAgc3RvcF9wbGF5YmFjazogU3RvcFBsYXliYWNrRXZlbnQsXG4gICAgICBzdGFydF9wbGF5YmFjazogU3RhcnRQbGF5YmFja0V2ZW50LFxuICAgICAgcmVzdGFydF9zdHJlYW06IFJlc3RhcnRTdHJlYW1FdmVudCxcbiAgICAgIHN0YXJ0X2ZhY2Vib29rOiBTdGFydEZhY2Vib29rRXZlbnQsXG4gICAgICBzdG9wX3JlY29yZGluZzogU3RvcFJlY29yZGluZ0V2ZW50LFxuICAgICAgcmVjZWl2ZV9zY3JlZW46IFJlY2VpdmVTY3JlZW5DYXB0dXJlRXZlbnQsXG4gICAgICBzdG9wX2Jyb2FkY2FzdHM6IFN0b3BCcm9hZGNhc3RzRXZlbnQsXG4gICAgICBzdGFydF9yZWNvcmRpbmc6IFN0YXJ0UmVjb3JkaW5nRXZlbnQsXG4gICAgICBzdG9wX3ByZXNlbnRpbmc6IFN0b3BQcmVzZW50aW5nRXZlbnQsXG4gICAgICBzdG9wX2Fubm90YXRpb246IFN0b3BBbm5vdGF0aW9uRXZlbnQsXG4gICAgICBzdGFydF9hbm5vdGF0aW9uOiBTdGFydEFubm90YXRpb25FdmVudCxcbiAgICAgIHB1Ymxpc2hfYnJvYWRjYXN0OiBQdWJsaXNoQnJvYWRjYXN0RXZlbnQsXG4gICAgICBjbGVhcl9mcm9udF9sYXllcjogQ2xlYXJGcm9udExheWVyRXZlbnQsXG4gICAgICByZXF1ZXN0X2d1ZXN0X3VzZXI6IFJlcXVlc3RHdWVzdFVzZXJFdmVudCxcbiAgICAgIHN0YXJ0X3NjcmVlbl9jYXB0dXJlOiBTY3JlZW5DYXB0dXJlRXZlbnQsXG5cbiAgICAgIGVuZF9zY3JlZW46IEZvcndhcmRFdmVudCxcbiAgICAgIGNhcHR1cmVfZXJyb3I6IEZvcndhcmRFdmVudCxcbiAgICAgIG9wdGlvbnNfdXBkYXRlOiBGb3J3YXJkRXZlbnQsXG4gICAgICBleHRfbm90X2luc3RhbGxlZDogRm9yd2FyZEV2ZW50LFxuICAgICAgYnJvYWRjYXN0c191cGRhdGU6IEZvcndhcmRFdmVudCxcbiAgICAgIGZhY2Vib29rX2xvZ2dlZF9pbjogRm9yd2FyZEV2ZW50LFxuICAgICAgZmFjZWJvb2tfcHVibGlzaGVkOiBGb3J3YXJkRXZlbnQsXG4gICAgICBoYW5kbGVfeW91dHViZV9lcnJvcjogRm9yd2FyZEV2ZW50LFxuICAgICAgaGFuZGxlX2ZhY2Vib29rX2Vycm9yOiBGb3J3YXJkRXZlbnQsXG5cbiAgICAgIHJlY29yZGluZzogSWdub3JlRXZlbnQsXG4gICAgICBleHRfY2FuY2VsOiBJZ25vcmVFdmVudCxcbiAgICAgIGV4dF9pbnN0YWxsZWQ6IElnbm9yZUV2ZW50LFxuICAgICAgbWVzc2FnZV9zdGF0dXM6IElnbm9yZUV2ZW50LFxuICAgICAgbW9kZXJhdG9yX2luZm86IElnbm9yZUV2ZW50XG4gICAgfVttc2cudHlwZV0gfHwgUHVibGljRXZlbnQpKHRoaXMpLmhhbmRsZShtc2cpO1xuICB9XG4gIC8qIGVzbGludC1lbmFibGUgY2FtZWxjYXNlICovXG59XG5cbmV4cG9ydCBkZWZhdWx0IEV2ZW50SGFuZGxlcjtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBzcmMvRXZlbnRIYW5kbGVyLmpzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBO0FBQ0E7OztBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBSUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7Ozs7OztBQUNBOzs7OztBQUtBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBNkRBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQUdBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBOzs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF0REE7QUF3REE7QUFDQTtBQUNBOzs7QUF2SkE7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXNCQTtBQUNBO0FBQ0E7OztBQXRCQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7Ozs7O0FBbUdBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///53\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * eyeson Extension Adapter\n *\n * Communication with the chrome extension goes through window. This adapter\n * plugs into window, relays extension related messages to its listeners\n * (ConferenceEventHandler) and provides a method for triggering the extension.\n **/\nvar ExtensionAdapter = function () {\n  function ExtensionAdapter() {\n    _classCallCheck(this, ExtensionAdapter);\n\n    this.listeners = [];\n    this.extensionIsInstalled = false;\n\n    this.request = this.request.bind(this);\n    this.handlePong = this.handlePong.bind(this);\n    this.handleCancel = this.handleCancel.bind(this);\n    this.handleSuccess = this.handleSuccess.bind(this);\n    this.handleWindowEvent = this.handleWindowEvent.bind(this);\n\n    window.addEventListener('message', this.handleWindowEvent);\n    this.ping();\n  }\n\n  /**\n   * The extension emits 3 different events:\n   * - It pings once the content-script has been evaluated.\n   * - Sends a dialog success message once user selected a window to share.\n   * - Sends a cancel message if the user cancels window selection.\n   **/\n\n\n  _createClass(ExtensionAdapter, [{\n    key: 'handleWindowEvent',\n    value: function handleWindowEvent(event) {\n      if (event.origin !== window.location.origin) {\n        return;\n      }\n      if (!event.data) {\n        return;\n      }\n\n      var map = {\n        SS_PONG: this.handlePong,\n        SS_DIALOG_SUCCESS: this.handleSuccess,\n        SS_DIALOG_CANCEL: this.handleCancel\n      };\n      if (map[event.data.type]) {\n        map[event.data.type](event);\n      }\n    }\n  }, {\n    key: 'handlePong',\n    value: function handlePong() {\n      this.extensionIsInstalled = true;\n      this.notify({ type: 'ext_installed' });\n    }\n\n    /**\n     * The event contains an identifier from the background script\n     * (which window/tab/screen the user selected in the picker).\n     * This is needed for any getUserMedia trying to receive\n     **/\n\n  }, {\n    key: 'handleSuccess',\n    value: function handleSuccess(event) {\n      this.notify({\n        type: 'receive_screen',\n        streamId: event.data.streamId\n      });\n    }\n  }, {\n    key: 'handleCancel',\n    value: function handleCancel() {\n      this.notify({ type: 'ext_cancel' });\n    }\n  }, {\n    key: 'ping',\n    value: function ping() {\n      this.post('SS_PING');\n    }\n  }, {\n    key: 'request',\n    value: function request() {\n      this.post('SS_UI_REQUEST');\n    }\n  }, {\n    key: 'cancelRequest',\n    value: function cancelRequest() {\n      this.post('SS_UI_CANCEL');\n    }\n  }, {\n    key: 'post',\n    value: function post(type, text) {\n      window.postMessage({\n        type: type,\n        text: text,\n        url: location.origin\n      }, '*');\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      window.removeEventListener('message', this.handleWindowEvent);\n    }\n  }, {\n    key: 'onMessage',\n    value: function onMessage(msgHandler) {\n      this.listeners.push(msgHandler);\n    }\n  }, {\n    key: 'offMessage',\n    value: function offMessage(msgHandler) {\n      var idx = this.listeners.indexOf(msgHandler);\n      if (idx !== -1) {\n        this.listeners.splice(idx, 1);\n      }\n      return this;\n    }\n  }, {\n    key: 'notify',\n    value: function notify(msg) {\n      this.listeners.forEach(function (listener) {\n        return listener(msg);\n      });\n    }\n  }]);\n\n  return ExtensionAdapter;\n}();\n\nexports.default = ExtensionAdapter;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL0V4dGVuc2lvbkFkYXB0ZXIuanM/YjM1NyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIGV5ZXNvbiBFeHRlbnNpb24gQWRhcHRlclxuICpcbiAqIENvbW11bmljYXRpb24gd2l0aCB0aGUgY2hyb21lIGV4dGVuc2lvbiBnb2VzIHRocm91Z2ggd2luZG93LiBUaGlzIGFkYXB0ZXJcbiAqIHBsdWdzIGludG8gd2luZG93LCByZWxheXMgZXh0ZW5zaW9uIHJlbGF0ZWQgbWVzc2FnZXMgdG8gaXRzIGxpc3RlbmVyc1xuICogKENvbmZlcmVuY2VFdmVudEhhbmRsZXIpIGFuZCBwcm92aWRlcyBhIG1ldGhvZCBmb3IgdHJpZ2dlcmluZyB0aGUgZXh0ZW5zaW9uLlxuICoqL1xuY2xhc3MgRXh0ZW5zaW9uQWRhcHRlciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMubGlzdGVuZXJzID0gW107XG4gICAgdGhpcy5leHRlbnNpb25Jc0luc3RhbGxlZCA9IGZhbHNlO1xuXG4gICAgdGhpcy5yZXF1ZXN0ID0gdGhpcy5yZXF1ZXN0LmJpbmQodGhpcyk7XG4gICAgdGhpcy5oYW5kbGVQb25nID0gdGhpcy5oYW5kbGVQb25nLmJpbmQodGhpcyk7XG4gICAgdGhpcy5oYW5kbGVDYW5jZWwgPSB0aGlzLmhhbmRsZUNhbmNlbC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuaGFuZGxlU3VjY2VzcyA9IHRoaXMuaGFuZGxlU3VjY2Vzcy5iaW5kKHRoaXMpO1xuICAgIHRoaXMuaGFuZGxlV2luZG93RXZlbnQgPSB0aGlzLmhhbmRsZVdpbmRvd0V2ZW50LmJpbmQodGhpcyk7XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIHRoaXMuaGFuZGxlV2luZG93RXZlbnQpO1xuICAgIHRoaXMucGluZygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBleHRlbnNpb24gZW1pdHMgMyBkaWZmZXJlbnQgZXZlbnRzOlxuICAgKiAtIEl0IHBpbmdzIG9uY2UgdGhlIGNvbnRlbnQtc2NyaXB0IGhhcyBiZWVuIGV2YWx1YXRlZC5cbiAgICogLSBTZW5kcyBhIGRpYWxvZyBzdWNjZXNzIG1lc3NhZ2Ugb25jZSB1c2VyIHNlbGVjdGVkIGEgd2luZG93IHRvIHNoYXJlLlxuICAgKiAtIFNlbmRzIGEgY2FuY2VsIG1lc3NhZ2UgaWYgdGhlIHVzZXIgY2FuY2VscyB3aW5kb3cgc2VsZWN0aW9uLlxuICAgKiovXG4gIGhhbmRsZVdpbmRvd0V2ZW50KGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50Lm9yaWdpbiAhPT0gd2luZG93LmxvY2F0aW9uLm9yaWdpbikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoIWV2ZW50LmRhdGEpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBtYXAgPSB7XG4gICAgICBTU19QT05HOiB0aGlzLmhhbmRsZVBvbmcsXG4gICAgICBTU19ESUFMT0dfU1VDQ0VTUzogdGhpcy5oYW5kbGVTdWNjZXNzLFxuICAgICAgU1NfRElBTE9HX0NBTkNFTDogdGhpcy5oYW5kbGVDYW5jZWxcbiAgICB9O1xuICAgIGlmIChtYXBbZXZlbnQuZGF0YS50eXBlXSkge1xuICAgICAgbWFwW2V2ZW50LmRhdGEudHlwZV0oZXZlbnQpO1xuICAgIH1cbiAgfVxuXG4gIGhhbmRsZVBvbmcoKSB7XG4gICAgdGhpcy5leHRlbnNpb25Jc0luc3RhbGxlZCA9IHRydWU7XG4gICAgdGhpcy5ub3RpZnkoeyB0eXBlOiAnZXh0X2luc3RhbGxlZCcgfSk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGV2ZW50IGNvbnRhaW5zIGFuIGlkZW50aWZpZXIgZnJvbSB0aGUgYmFja2dyb3VuZCBzY3JpcHRcbiAgICogKHdoaWNoIHdpbmRvdy90YWIvc2NyZWVuIHRoZSB1c2VyIHNlbGVjdGVkIGluIHRoZSBwaWNrZXIpLlxuICAgKiBUaGlzIGlzIG5lZWRlZCBmb3IgYW55IGdldFVzZXJNZWRpYSB0cnlpbmcgdG8gcmVjZWl2ZVxuICAgKiovXG4gIGhhbmRsZVN1Y2Nlc3MoZXZlbnQpIHtcbiAgICB0aGlzLm5vdGlmeSh7XG4gICAgICB0eXBlOiAncmVjZWl2ZV9zY3JlZW4nLFxuICAgICAgc3RyZWFtSWQ6IGV2ZW50LmRhdGEuc3RyZWFtSWRcbiAgICB9KTtcbiAgfVxuXG4gIGhhbmRsZUNhbmNlbCgpIHtcbiAgICB0aGlzLm5vdGlmeSh7IHR5cGU6ICdleHRfY2FuY2VsJyB9KTtcbiAgfVxuXG4gIHBpbmcoKSB7XG4gICAgdGhpcy5wb3N0KCdTU19QSU5HJyk7XG4gIH1cblxuICByZXF1ZXN0KCkge1xuICAgIHRoaXMucG9zdCgnU1NfVUlfUkVRVUVTVCcpO1xuICB9XG5cbiAgY2FuY2VsUmVxdWVzdCgpIHtcbiAgICB0aGlzLnBvc3QoJ1NTX1VJX0NBTkNFTCcpO1xuICB9XG5cbiAgcG9zdCh0eXBlLCB0ZXh0KSB7XG4gICAgd2luZG93LnBvc3RNZXNzYWdlKFxuICAgICAge1xuICAgICAgICB0eXBlOiB0eXBlLFxuICAgICAgICB0ZXh0OiB0ZXh0LFxuICAgICAgICB1cmw6IGxvY2F0aW9uLm9yaWdpblxuICAgICAgfSxcbiAgICAgICcqJ1xuICAgICk7XG4gIH1cblxuICBkZXN0cm95KCkge1xuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgdGhpcy5oYW5kbGVXaW5kb3dFdmVudCk7XG4gIH1cblxuICBvbk1lc3NhZ2UobXNnSGFuZGxlcikge1xuICAgIHRoaXMubGlzdGVuZXJzLnB1c2gobXNnSGFuZGxlcik7XG4gIH1cblxuICBvZmZNZXNzYWdlKG1zZ0hhbmRsZXIpIHtcbiAgICBjb25zdCBpZHggPSB0aGlzLmxpc3RlbmVycy5pbmRleE9mKG1zZ0hhbmRsZXIpO1xuICAgIGlmIChpZHggIT09IC0xKSB7XG4gICAgICB0aGlzLmxpc3RlbmVycy5zcGxpY2UoaWR4LCAxKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBub3RpZnkobXNnKSB7XG4gICAgdGhpcy5saXN0ZW5lcnMuZm9yRWFjaChsaXN0ZW5lciA9PiBsaXN0ZW5lcihtc2cpKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBFeHRlbnNpb25BZGFwdGVyO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNyYy9FeHRlbnNpb25BZGFwdGVyLmpzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUE7Ozs7Ozs7QUFPQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFIQTtBQU9BOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7Ozs7OztBQUdBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///54\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Logger = __webpack_require__(/*! ./Logger */ 0);\n\nvar _Logger2 = _interopRequireDefault(_Logger);\n\nvar _FeatureDetector = __webpack_require__(/*! ./FeatureDetector */ 4);\n\nvar _FeatureDetector2 = _interopRequireDefault(_FeatureDetector);\n\nvar _ExtensionCaptureSession = __webpack_require__(/*! ./ExtensionCaptureSession */ 69);\n\nvar _ExtensionCaptureSession2 = _interopRequireDefault(_ExtensionCaptureSession);\n\nvar _NavigatorCaptureSession = __webpack_require__(/*! ./NavigatorCaptureSession */ 72);\n\nvar _NavigatorCaptureSession2 = _interopRequireDefault(_NavigatorCaptureSession);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * eyeson Screen Capture Session\n * Delegates to ExtensionCaptureSession or NavigatorCaptureSession\n **/\nvar ScreenCaptureSession = function () {\n  function ScreenCaptureSession(audioEnabled, eventHandler) {\n    _classCallCheck(this, ScreenCaptureSession);\n\n    this.eventHandler = eventHandler;\n    this.started = false;\n    this.requestedPresenter = false;\n\n    this.end = this.end.bind(this);\n    this.send = this.send.bind(this);\n    this.notify = this.notify.bind(this);\n    this.showPicker = this.showPicker.bind(this);\n    this.acquirePresentationRole = this.acquirePresentationRole.bind(this);\n\n    // Note: requires .binded notify\n    this.captureSession = this.determineCaptureSession(audioEnabled);\n  }\n\n  /**\n   * Public methods\n   **/\n\n\n  _createClass(ScreenCaptureSession, [{\n    key: 'init',\n    value: function init() {\n      this.captureSession.init().then(this.acquirePresentationRole).catch(_Logger2.default.error);\n    }\n  }, {\n    key: 'showPicker',\n    value: function showPicker() {\n      this.captureSession.showPicker();\n    }\n  }, {\n    key: 'start',\n    value: function start(streamId) {\n      var _this = this;\n\n      return this.captureSession.start(streamId).then(function () {\n        _this.started = true;\n      });\n    }\n  }, {\n    key: 'end',\n    value: function end() {\n      this.started = false;\n      this.captureSession.end();\n    }\n\n    // for test suite\n\n  }, {\n    key: 'getScreenStream',\n    value: function getScreenStream() {\n      this.captureSession.getScreenStream();\n    }\n  }, {\n    key: 'determineCaptureSession',\n    value: function determineCaptureSession(audioEnabled) {\n      return _FeatureDetector2.default.requiresExtension() ? new _ExtensionCaptureSession2.default(audioEnabled, this.eventHandler, this.send, this.notify) : new _NavigatorCaptureSession2.default(this.eventHandler, this.send, this.notify);\n    }\n  }, {\n    key: 'acquirePresentationRole',\n    value: function acquirePresentationRole() {\n      this.requestedPresenter = true;\n      this.send({ type: 'set_presenter', on: true });\n    }\n  }, {\n    key: 'notify',\n    value: function notify(msg) {\n      if (!this.eventHandler) {\n        return;\n      }\n\n      if (['ext_not_installed', 'ext_cancel'].includes(msg.type)) {\n        this.requestedPresenter = false;\n        this.end();\n      }\n\n      this.eventHandler.send(msg);\n    }\n  }, {\n    key: 'send',\n    value: function send(msg) {\n      if (!this.eventHandler) {\n        return;\n      }\n      this.eventHandler._session.send(msg);\n    }\n  }, {\n    key: 'stream',\n    get: function get() {\n      return this.captureSession.stream;\n    }\n  }, {\n    key: 'installer',\n    get: function get() {\n      return this.captureSession.installer;\n    }\n  }, {\n    key: 'captureConstraints',\n    get: function get() {\n      return this.captureSession.captureConstraints;\n    }\n  }, {\n    key: 'streamId',\n    set: function set(streamId) {\n      this.captureSession.streamId = streamId;\n    }\n  }]);\n\n  return ScreenCaptureSession;\n}();\n\nexports.default = ScreenCaptureSession;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTUuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL1NjcmVlbkNhcHR1cmVTZXNzaW9uLmpzPzVhNDMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IExvZ2dlciBmcm9tICcuL0xvZ2dlcic7XG5pbXBvcnQgRmVhdHVyZURldGVjdG9yIGZyb20gJy4vRmVhdHVyZURldGVjdG9yJztcbmltcG9ydCBFeHRlbnNpb25DYXB0dXJlU2Vzc2lvbiBmcm9tICcuL0V4dGVuc2lvbkNhcHR1cmVTZXNzaW9uJztcbmltcG9ydCBOYXZpZ2F0b3JDYXB0dXJlU2Vzc2lvbiBmcm9tICcuL05hdmlnYXRvckNhcHR1cmVTZXNzaW9uJztcblxuLyoqXG4gKiBleWVzb24gU2NyZWVuIENhcHR1cmUgU2Vzc2lvblxuICogRGVsZWdhdGVzIHRvIEV4dGVuc2lvbkNhcHR1cmVTZXNzaW9uIG9yIE5hdmlnYXRvckNhcHR1cmVTZXNzaW9uXG4gKiovXG5jbGFzcyBTY3JlZW5DYXB0dXJlU2Vzc2lvbiB7XG4gIGNvbnN0cnVjdG9yKGF1ZGlvRW5hYmxlZCwgZXZlbnRIYW5kbGVyKSB7XG4gICAgdGhpcy5ldmVudEhhbmRsZXIgPSBldmVudEhhbmRsZXI7XG4gICAgdGhpcy5zdGFydGVkID0gZmFsc2U7XG4gICAgdGhpcy5yZXF1ZXN0ZWRQcmVzZW50ZXIgPSBmYWxzZTtcblxuICAgIHRoaXMuZW5kID0gdGhpcy5lbmQuYmluZCh0aGlzKTtcbiAgICB0aGlzLnNlbmQgPSB0aGlzLnNlbmQuYmluZCh0aGlzKTtcbiAgICB0aGlzLm5vdGlmeSA9IHRoaXMubm90aWZ5LmJpbmQodGhpcyk7XG4gICAgdGhpcy5zaG93UGlja2VyID0gdGhpcy5zaG93UGlja2VyLmJpbmQodGhpcyk7XG4gICAgdGhpcy5hY3F1aXJlUHJlc2VudGF0aW9uUm9sZSA9IHRoaXMuYWNxdWlyZVByZXNlbnRhdGlvblJvbGUuYmluZCh0aGlzKTtcblxuICAgIC8vIE5vdGU6IHJlcXVpcmVzIC5iaW5kZWQgbm90aWZ5XG4gICAgdGhpcy5jYXB0dXJlU2Vzc2lvbiA9IHRoaXMuZGV0ZXJtaW5lQ2FwdHVyZVNlc3Npb24oYXVkaW9FbmFibGVkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQdWJsaWMgbWV0aG9kc1xuICAgKiovXG4gIGluaXQoKSB7XG4gICAgdGhpcy5jYXB0dXJlU2Vzc2lvblxuICAgICAgLmluaXQoKVxuICAgICAgLnRoZW4odGhpcy5hY3F1aXJlUHJlc2VudGF0aW9uUm9sZSlcbiAgICAgIC5jYXRjaChMb2dnZXIuZXJyb3IpO1xuICB9XG5cbiAgc2hvd1BpY2tlcigpIHtcbiAgICB0aGlzLmNhcHR1cmVTZXNzaW9uLnNob3dQaWNrZXIoKTtcbiAgfVxuXG4gIHN0YXJ0KHN0cmVhbUlkKSB7XG4gICAgcmV0dXJuIHRoaXMuY2FwdHVyZVNlc3Npb24uc3RhcnQoc3RyZWFtSWQpLnRoZW4oKCkgPT4ge1xuICAgICAgdGhpcy5zdGFydGVkID0gdHJ1ZTtcbiAgICB9KTtcbiAgfVxuXG4gIGVuZCgpIHtcbiAgICB0aGlzLnN0YXJ0ZWQgPSBmYWxzZTtcbiAgICB0aGlzLmNhcHR1cmVTZXNzaW9uLmVuZCgpO1xuICB9XG5cbiAgLy8gZm9yIHRlc3Qgc3VpdGVcbiAgZ2V0U2NyZWVuU3RyZWFtKCkge1xuICAgIHRoaXMuY2FwdHVyZVNlc3Npb24uZ2V0U2NyZWVuU3RyZWFtKCk7XG4gIH1cblxuICBkZXRlcm1pbmVDYXB0dXJlU2Vzc2lvbihhdWRpb0VuYWJsZWQpIHtcbiAgICByZXR1cm4gRmVhdHVyZURldGVjdG9yLnJlcXVpcmVzRXh0ZW5zaW9uKClcbiAgICAgID8gbmV3IEV4dGVuc2lvbkNhcHR1cmVTZXNzaW9uKFxuICAgICAgICAgIGF1ZGlvRW5hYmxlZCxcbiAgICAgICAgICB0aGlzLmV2ZW50SGFuZGxlcixcbiAgICAgICAgICB0aGlzLnNlbmQsXG4gICAgICAgICAgdGhpcy5ub3RpZnlcbiAgICAgICAgKVxuICAgICAgOiBuZXcgTmF2aWdhdG9yQ2FwdHVyZVNlc3Npb24odGhpcy5ldmVudEhhbmRsZXIsIHRoaXMuc2VuZCwgdGhpcy5ub3RpZnkpO1xuICB9XG5cbiAgZ2V0IHN0cmVhbSgpIHtcbiAgICByZXR1cm4gdGhpcy5jYXB0dXJlU2Vzc2lvbi5zdHJlYW07XG4gIH1cblxuICBnZXQgaW5zdGFsbGVyKCkge1xuICAgIHJldHVybiB0aGlzLmNhcHR1cmVTZXNzaW9uLmluc3RhbGxlcjtcbiAgfVxuXG4gIGdldCBjYXB0dXJlQ29uc3RyYWludHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuY2FwdHVyZVNlc3Npb24uY2FwdHVyZUNvbnN0cmFpbnRzO1xuICB9XG5cbiAgc2V0IHN0cmVhbUlkKHN0cmVhbUlkKSB7XG4gICAgdGhpcy5jYXB0dXJlU2Vzc2lvbi5zdHJlYW1JZCA9IHN0cmVhbUlkO1xuICB9XG5cbiAgYWNxdWlyZVByZXNlbnRhdGlvblJvbGUoKSB7XG4gICAgdGhpcy5yZXF1ZXN0ZWRQcmVzZW50ZXIgPSB0cnVlO1xuICAgIHRoaXMuc2VuZCh7IHR5cGU6ICdzZXRfcHJlc2VudGVyJywgb246IHRydWUgfSk7XG4gIH1cblxuICBub3RpZnkobXNnKSB7XG4gICAgaWYgKCF0aGlzLmV2ZW50SGFuZGxlcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChbJ2V4dF9ub3RfaW5zdGFsbGVkJywgJ2V4dF9jYW5jZWwnXS5pbmNsdWRlcyhtc2cudHlwZSkpIHtcbiAgICAgIHRoaXMucmVxdWVzdGVkUHJlc2VudGVyID0gZmFsc2U7XG4gICAgICB0aGlzLmVuZCgpO1xuICAgIH1cblxuICAgIHRoaXMuZXZlbnRIYW5kbGVyLnNlbmQobXNnKTtcbiAgfVxuXG4gIHNlbmQobXNnKSB7XG4gICAgaWYgKCF0aGlzLmV2ZW50SGFuZGxlcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmV2ZW50SGFuZGxlci5fc2Vzc2lvbi5zZW5kKG1zZyk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU2NyZWVuQ2FwdHVyZVNlc3Npb247XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc3JjL1NjcmVlbkNhcHR1cmVTZXNzaW9uLmpzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7Ozs7Ozs7QUFDQTs7OztBQUlBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7O0FBR0E7QUFDQTtBQUlBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBUUE7OztBQWtCQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQXZDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7Ozs7OztBQTRCQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///55\n")},function(module,exports,__webpack_require__){"use strict";eval("/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n\n\n\nvar utils = __webpack_require__(/*! ./utils */ 5);\n// Shimming starts here.\nmodule.exports = function(dependencies, opts) {\n  var window = dependencies && dependencies.window;\n\n  var options = {\n    shimChrome: true,\n    shimFirefox: true,\n    shimEdge: true,\n    shimSafari: true,\n  };\n\n  for (var key in opts) {\n    if (hasOwnProperty.call(opts, key)) {\n      options[key] = opts[key];\n    }\n  }\n\n  // Utils.\n  var logging = utils.log;\n  var browserDetails = utils.detectBrowser(window);\n\n  // Uncomment the line below if you want logging to occur, including logging\n  // for the switch statement below. Can also be turned on in the browser via\n  // adapter.disableLog(false), but then logging from the switch statement below\n  // will not appear.\n  // require('./utils').disableLog(false);\n\n  // Browser shims.\n  var chromeShim = __webpack_require__(/*! ./chrome/chrome_shim */ 57) || null;\n  var edgeShim = __webpack_require__(/*! ./edge/edge_shim */ 59) || null;\n  var firefoxShim = __webpack_require__(/*! ./firefox/firefox_shim */ 62) || null;\n  var safariShim = __webpack_require__(/*! ./safari/safari_shim */ 64) || null;\n  var commonShim = __webpack_require__(/*! ./common_shim */ 65) || null;\n\n  // Export to the adapter global object visible in the browser.\n  var adapter = {\n    browserDetails: browserDetails,\n    commonShim: commonShim,\n    extractVersion: utils.extractVersion,\n    disableLog: utils.disableLog,\n    disableWarnings: utils.disableWarnings\n  };\n\n  // Shim browser if found.\n  switch (browserDetails.browser) {\n    case 'chrome':\n      if (!chromeShim || !chromeShim.shimPeerConnection ||\n          !options.shimChrome) {\n        logging('Chrome shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming chrome.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = chromeShim;\n      commonShim.shimCreateObjectURL(window);\n\n      chromeShim.shimGetUserMedia(window);\n      chromeShim.shimMediaStream(window);\n      chromeShim.shimSourceObject(window);\n      chromeShim.shimPeerConnection(window);\n      chromeShim.shimOnTrack(window);\n      chromeShim.shimAddTrackRemoveTrack(window);\n      chromeShim.shimGetSendersWithDtmf(window);\n\n      commonShim.shimRTCIceCandidate(window);\n      commonShim.shimMaxMessageSize(window);\n      commonShim.shimSendThrowTypeError(window);\n      break;\n    case 'firefox':\n      if (!firefoxShim || !firefoxShim.shimPeerConnection ||\n          !options.shimFirefox) {\n        logging('Firefox shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming firefox.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = firefoxShim;\n      commonShim.shimCreateObjectURL(window);\n\n      firefoxShim.shimGetUserMedia(window);\n      firefoxShim.shimSourceObject(window);\n      firefoxShim.shimPeerConnection(window);\n      firefoxShim.shimOnTrack(window);\n      firefoxShim.shimRemoveStream(window);\n\n      commonShim.shimRTCIceCandidate(window);\n      commonShim.shimMaxMessageSize(window);\n      commonShim.shimSendThrowTypeError(window);\n      break;\n    case 'edge':\n      if (!edgeShim || !edgeShim.shimPeerConnection || !options.shimEdge) {\n        logging('MS edge shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming edge.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = edgeShim;\n      commonShim.shimCreateObjectURL(window);\n\n      edgeShim.shimGetUserMedia(window);\n      edgeShim.shimPeerConnection(window);\n      edgeShim.shimReplaceTrack(window);\n\n      // the edge shim implements the full RTCIceCandidate object.\n\n      commonShim.shimMaxMessageSize(window);\n      commonShim.shimSendThrowTypeError(window);\n      break;\n    case 'safari':\n      if (!safariShim || !options.shimSafari) {\n        logging('Safari shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming safari.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = safariShim;\n      commonShim.shimCreateObjectURL(window);\n\n      safariShim.shimRTCIceServerUrls(window);\n      safariShim.shimCallbacksAPI(window);\n      safariShim.shimLocalStreamsAPI(window);\n      safariShim.shimRemoteStreamsAPI(window);\n      safariShim.shimTrackEventTransceiver(window);\n      safariShim.shimGetUserMedia(window);\n      safariShim.shimCreateOfferLegacy(window);\n\n      commonShim.shimRTCIceCandidate(window);\n      commonShim.shimMaxMessageSize(window);\n      commonShim.shimSendThrowTypeError(window);\n      break;\n    default:\n      logging('Unsupported browser!');\n      break;\n  }\n\n  return adapter;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvd2VicnRjLWFkYXB0ZXIvc3JjL2pzL2FkYXB0ZXJfZmFjdG9yeS5qcz84M2UyIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiAgQ29weXJpZ2h0IChjKSAyMDE2IFRoZSBXZWJSVEMgcHJvamVjdCBhdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqICBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhIEJTRC1zdHlsZSBsaWNlbnNlXG4gKiAgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGUgc291cmNlXG4gKiAgdHJlZS5cbiAqL1xuIC8qIGVzbGludC1lbnYgbm9kZSAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcbi8vIFNoaW1taW5nIHN0YXJ0cyBoZXJlLlxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihkZXBlbmRlbmNpZXMsIG9wdHMpIHtcbiAgdmFyIHdpbmRvdyA9IGRlcGVuZGVuY2llcyAmJiBkZXBlbmRlbmNpZXMud2luZG93O1xuXG4gIHZhciBvcHRpb25zID0ge1xuICAgIHNoaW1DaHJvbWU6IHRydWUsXG4gICAgc2hpbUZpcmVmb3g6IHRydWUsXG4gICAgc2hpbUVkZ2U6IHRydWUsXG4gICAgc2hpbVNhZmFyaTogdHJ1ZSxcbiAgfTtcblxuICBmb3IgKHZhciBrZXkgaW4gb3B0cykge1xuICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKG9wdHMsIGtleSkpIHtcbiAgICAgIG9wdGlvbnNba2V5XSA9IG9wdHNba2V5XTtcbiAgICB9XG4gIH1cblxuICAvLyBVdGlscy5cbiAgdmFyIGxvZ2dpbmcgPSB1dGlscy5sb2c7XG4gIHZhciBicm93c2VyRGV0YWlscyA9IHV0aWxzLmRldGVjdEJyb3dzZXIod2luZG93KTtcblxuICAvLyBVbmNvbW1lbnQgdGhlIGxpbmUgYmVsb3cgaWYgeW91IHdhbnQgbG9nZ2luZyB0byBvY2N1ciwgaW5jbHVkaW5nIGxvZ2dpbmdcbiAgLy8gZm9yIHRoZSBzd2l0Y2ggc3RhdGVtZW50IGJlbG93LiBDYW4gYWxzbyBiZSB0dXJuZWQgb24gaW4gdGhlIGJyb3dzZXIgdmlhXG4gIC8vIGFkYXB0ZXIuZGlzYWJsZUxvZyhmYWxzZSksIGJ1dCB0aGVuIGxvZ2dpbmcgZnJvbSB0aGUgc3dpdGNoIHN0YXRlbWVudCBiZWxvd1xuICAvLyB3aWxsIG5vdCBhcHBlYXIuXG4gIC8vIHJlcXVpcmUoJy4vdXRpbHMnKS5kaXNhYmxlTG9nKGZhbHNlKTtcblxuICAvLyBCcm93c2VyIHNoaW1zLlxuICB2YXIgY2hyb21lU2hpbSA9IHJlcXVpcmUoJy4vY2hyb21lL2Nocm9tZV9zaGltJykgfHwgbnVsbDtcbiAgdmFyIGVkZ2VTaGltID0gcmVxdWlyZSgnLi9lZGdlL2VkZ2Vfc2hpbScpIHx8IG51bGw7XG4gIHZhciBmaXJlZm94U2hpbSA9IHJlcXVpcmUoJy4vZmlyZWZveC9maXJlZm94X3NoaW0nKSB8fCBudWxsO1xuICB2YXIgc2FmYXJpU2hpbSA9IHJlcXVpcmUoJy4vc2FmYXJpL3NhZmFyaV9zaGltJykgfHwgbnVsbDtcbiAgdmFyIGNvbW1vblNoaW0gPSByZXF1aXJlKCcuL2NvbW1vbl9zaGltJykgfHwgbnVsbDtcblxuICAvLyBFeHBvcnQgdG8gdGhlIGFkYXB0ZXIgZ2xvYmFsIG9iamVjdCB2aXNpYmxlIGluIHRoZSBicm93c2VyLlxuICB2YXIgYWRhcHRlciA9IHtcbiAgICBicm93c2VyRGV0YWlsczogYnJvd3NlckRldGFpbHMsXG4gICAgY29tbW9uU2hpbTogY29tbW9uU2hpbSxcbiAgICBleHRyYWN0VmVyc2lvbjogdXRpbHMuZXh0cmFjdFZlcnNpb24sXG4gICAgZGlzYWJsZUxvZzogdXRpbHMuZGlzYWJsZUxvZyxcbiAgICBkaXNhYmxlV2FybmluZ3M6IHV0aWxzLmRpc2FibGVXYXJuaW5nc1xuICB9O1xuXG4gIC8vIFNoaW0gYnJvd3NlciBpZiBmb3VuZC5cbiAgc3dpdGNoIChicm93c2VyRGV0YWlscy5icm93c2VyKSB7XG4gICAgY2FzZSAnY2hyb21lJzpcbiAgICAgIGlmICghY2hyb21lU2hpbSB8fCAhY2hyb21lU2hpbS5zaGltUGVlckNvbm5lY3Rpb24gfHxcbiAgICAgICAgICAhb3B0aW9ucy5zaGltQ2hyb21lKSB7XG4gICAgICAgIGxvZ2dpbmcoJ0Nocm9tZSBzaGltIGlzIG5vdCBpbmNsdWRlZCBpbiB0aGlzIGFkYXB0ZXIgcmVsZWFzZS4nKTtcbiAgICAgICAgcmV0dXJuIGFkYXB0ZXI7XG4gICAgICB9XG4gICAgICBsb2dnaW5nKCdhZGFwdGVyLmpzIHNoaW1taW5nIGNocm9tZS4nKTtcbiAgICAgIC8vIEV4cG9ydCB0byB0aGUgYWRhcHRlciBnbG9iYWwgb2JqZWN0IHZpc2libGUgaW4gdGhlIGJyb3dzZXIuXG4gICAgICBhZGFwdGVyLmJyb3dzZXJTaGltID0gY2hyb21lU2hpbTtcbiAgICAgIGNvbW1vblNoaW0uc2hpbUNyZWF0ZU9iamVjdFVSTCh3aW5kb3cpO1xuXG4gICAgICBjaHJvbWVTaGltLnNoaW1HZXRVc2VyTWVkaWEod2luZG93KTtcbiAgICAgIGNocm9tZVNoaW0uc2hpbU1lZGlhU3RyZWFtKHdpbmRvdyk7XG4gICAgICBjaHJvbWVTaGltLnNoaW1Tb3VyY2VPYmplY3Qod2luZG93KTtcbiAgICAgIGNocm9tZVNoaW0uc2hpbVBlZXJDb25uZWN0aW9uKHdpbmRvdyk7XG4gICAgICBjaHJvbWVTaGltLnNoaW1PblRyYWNrKHdpbmRvdyk7XG4gICAgICBjaHJvbWVTaGltLnNoaW1BZGRUcmFja1JlbW92ZVRyYWNrKHdpbmRvdyk7XG4gICAgICBjaHJvbWVTaGltLnNoaW1HZXRTZW5kZXJzV2l0aER0bWYod2luZG93KTtcblxuICAgICAgY29tbW9uU2hpbS5zaGltUlRDSWNlQ2FuZGlkYXRlKHdpbmRvdyk7XG4gICAgICBjb21tb25TaGltLnNoaW1NYXhNZXNzYWdlU2l6ZSh3aW5kb3cpO1xuICAgICAgY29tbW9uU2hpbS5zaGltU2VuZFRocm93VHlwZUVycm9yKHdpbmRvdyk7XG4gICAgICBicmVhaztcbiAgICBjYXNlICdmaXJlZm94JzpcbiAgICAgIGlmICghZmlyZWZveFNoaW0gfHwgIWZpcmVmb3hTaGltLnNoaW1QZWVyQ29ubmVjdGlvbiB8fFxuICAgICAgICAgICFvcHRpb25zLnNoaW1GaXJlZm94KSB7XG4gICAgICAgIGxvZ2dpbmcoJ0ZpcmVmb3ggc2hpbSBpcyBub3QgaW5jbHVkZWQgaW4gdGhpcyBhZGFwdGVyIHJlbGVhc2UuJyk7XG4gICAgICAgIHJldHVybiBhZGFwdGVyO1xuICAgICAgfVxuICAgICAgbG9nZ2luZygnYWRhcHRlci5qcyBzaGltbWluZyBmaXJlZm94LicpO1xuICAgICAgLy8gRXhwb3J0IHRvIHRoZSBhZGFwdGVyIGdsb2JhbCBvYmplY3QgdmlzaWJsZSBpbiB0aGUgYnJvd3Nlci5cbiAgICAgIGFkYXB0ZXIuYnJvd3NlclNoaW0gPSBmaXJlZm94U2hpbTtcbiAgICAgIGNvbW1vblNoaW0uc2hpbUNyZWF0ZU9iamVjdFVSTCh3aW5kb3cpO1xuXG4gICAgICBmaXJlZm94U2hpbS5zaGltR2V0VXNlck1lZGlhKHdpbmRvdyk7XG4gICAgICBmaXJlZm94U2hpbS5zaGltU291cmNlT2JqZWN0KHdpbmRvdyk7XG4gICAgICBmaXJlZm94U2hpbS5zaGltUGVlckNvbm5lY3Rpb24od2luZG93KTtcbiAgICAgIGZpcmVmb3hTaGltLnNoaW1PblRyYWNrKHdpbmRvdyk7XG4gICAgICBmaXJlZm94U2hpbS5zaGltUmVtb3ZlU3RyZWFtKHdpbmRvdyk7XG5cbiAgICAgIGNvbW1vblNoaW0uc2hpbVJUQ0ljZUNhbmRpZGF0ZSh3aW5kb3cpO1xuICAgICAgY29tbW9uU2hpbS5zaGltTWF4TWVzc2FnZVNpemUod2luZG93KTtcbiAgICAgIGNvbW1vblNoaW0uc2hpbVNlbmRUaHJvd1R5cGVFcnJvcih3aW5kb3cpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnZWRnZSc6XG4gICAgICBpZiAoIWVkZ2VTaGltIHx8ICFlZGdlU2hpbS5zaGltUGVlckNvbm5lY3Rpb24gfHwgIW9wdGlvbnMuc2hpbUVkZ2UpIHtcbiAgICAgICAgbG9nZ2luZygnTVMgZWRnZSBzaGltIGlzIG5vdCBpbmNsdWRlZCBpbiB0aGlzIGFkYXB0ZXIgcmVsZWFzZS4nKTtcbiAgICAgICAgcmV0dXJuIGFkYXB0ZXI7XG4gICAgICB9XG4gICAgICBsb2dnaW5nKCdhZGFwdGVyLmpzIHNoaW1taW5nIGVkZ2UuJyk7XG4gICAgICAvLyBFeHBvcnQgdG8gdGhlIGFkYXB0ZXIgZ2xvYmFsIG9iamVjdCB2aXNpYmxlIGluIHRoZSBicm93c2VyLlxuICAgICAgYWRhcHRlci5icm93c2VyU2hpbSA9IGVkZ2VTaGltO1xuICAgICAgY29tbW9uU2hpbS5zaGltQ3JlYXRlT2JqZWN0VVJMKHdpbmRvdyk7XG5cbiAgICAgIGVkZ2VTaGltLnNoaW1HZXRVc2VyTWVkaWEod2luZG93KTtcbiAgICAgIGVkZ2VTaGltLnNoaW1QZWVyQ29ubmVjdGlvbih3aW5kb3cpO1xuICAgICAgZWRnZVNoaW0uc2hpbVJlcGxhY2VUcmFjayh3aW5kb3cpO1xuXG4gICAgICAvLyB0aGUgZWRnZSBzaGltIGltcGxlbWVudHMgdGhlIGZ1bGwgUlRDSWNlQ2FuZGlkYXRlIG9iamVjdC5cblxuICAgICAgY29tbW9uU2hpbS5zaGltTWF4TWVzc2FnZVNpemUod2luZG93KTtcbiAgICAgIGNvbW1vblNoaW0uc2hpbVNlbmRUaHJvd1R5cGVFcnJvcih3aW5kb3cpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnc2FmYXJpJzpcbiAgICAgIGlmICghc2FmYXJpU2hpbSB8fCAhb3B0aW9ucy5zaGltU2FmYXJpKSB7XG4gICAgICAgIGxvZ2dpbmcoJ1NhZmFyaSBzaGltIGlzIG5vdCBpbmNsdWRlZCBpbiB0aGlzIGFkYXB0ZXIgcmVsZWFzZS4nKTtcbiAgICAgICAgcmV0dXJuIGFkYXB0ZXI7XG4gICAgICB9XG4gICAgICBsb2dnaW5nKCdhZGFwdGVyLmpzIHNoaW1taW5nIHNhZmFyaS4nKTtcbiAgICAgIC8vIEV4cG9ydCB0byB0aGUgYWRhcHRlciBnbG9iYWwgb2JqZWN0IHZpc2libGUgaW4gdGhlIGJyb3dzZXIuXG4gICAgICBhZGFwdGVyLmJyb3dzZXJTaGltID0gc2FmYXJpU2hpbTtcbiAgICAgIGNvbW1vblNoaW0uc2hpbUNyZWF0ZU9iamVjdFVSTCh3aW5kb3cpO1xuXG4gICAgICBzYWZhcmlTaGltLnNoaW1SVENJY2VTZXJ2ZXJVcmxzKHdpbmRvdyk7XG4gICAgICBzYWZhcmlTaGltLnNoaW1DYWxsYmFja3NBUEkod2luZG93KTtcbiAgICAgIHNhZmFyaVNoaW0uc2hpbUxvY2FsU3RyZWFtc0FQSSh3aW5kb3cpO1xuICAgICAgc2FmYXJpU2hpbS5zaGltUmVtb3RlU3RyZWFtc0FQSSh3aW5kb3cpO1xuICAgICAgc2FmYXJpU2hpbS5zaGltVHJhY2tFdmVudFRyYW5zY2VpdmVyKHdpbmRvdyk7XG4gICAgICBzYWZhcmlTaGltLnNoaW1HZXRVc2VyTWVkaWEod2luZG93KTtcbiAgICAgIHNhZmFyaVNoaW0uc2hpbUNyZWF0ZU9mZmVyTGVnYWN5KHdpbmRvdyk7XG5cbiAgICAgIGNvbW1vblNoaW0uc2hpbVJUQ0ljZUNhbmRpZGF0ZSh3aW5kb3cpO1xuICAgICAgY29tbW9uU2hpbS5zaGltTWF4TWVzc2FnZVNpemUod2luZG93KTtcbiAgICAgIGNvbW1vblNoaW0uc2hpbVNlbmRUaHJvd1R5cGVFcnJvcih3aW5kb3cpO1xuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIGxvZ2dpbmcoJ1Vuc3VwcG9ydGVkIGJyb3dzZXIhJyk7XG4gICAgICBicmVhaztcbiAgfVxuXG4gIHJldHVybiBhZGFwdGVyO1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL3dlYnJ0Yy1hZGFwdGVyL3NyYy9qcy9hZGFwdGVyX2ZhY3RvcnkuanNcbi8vIG1vZHVsZSBpZCA9IDU2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///56\n")},function(module,exports,__webpack_require__){"use strict";eval("\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n\nvar utils = __webpack_require__(/*! ../utils.js */ 5);\nvar logging = utils.log;\n\nmodule.exports = {\n  shimGetUserMedia: __webpack_require__(/*! ./getusermedia */ 58),\n  shimMediaStream: function(window) {\n    window.MediaStream = window.MediaStream || window.webkitMediaStream;\n  },\n\n  shimOnTrack: function(window) {\n    if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n        window.RTCPeerConnection.prototype)) {\n      Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n        get: function() {\n          return this._ontrack;\n        },\n        set: function(f) {\n          if (this._ontrack) {\n            this.removeEventListener('track', this._ontrack);\n          }\n          this.addEventListener('track', this._ontrack = f);\n        }\n      });\n      var origSetRemoteDescription =\n          window.RTCPeerConnection.prototype.setRemoteDescription;\n      window.RTCPeerConnection.prototype.setRemoteDescription = function() {\n        var pc = this;\n        if (!pc._ontrackpoly) {\n          pc._ontrackpoly = function(e) {\n            // onaddstream does not fire when a track is added to an existing\n            // stream. But stream.onaddtrack is implemented so we use that.\n            e.stream.addEventListener('addtrack', function(te) {\n              var receiver;\n              if (window.RTCPeerConnection.prototype.getReceivers) {\n                receiver = pc.getReceivers().find(function(r) {\n                  return r.track && r.track.id === te.track.id;\n                });\n              } else {\n                receiver = {track: te.track};\n              }\n\n              var event = new Event('track');\n              event.track = te.track;\n              event.receiver = receiver;\n              event.transceiver = {receiver: receiver};\n              event.streams = [e.stream];\n              pc.dispatchEvent(event);\n            });\n            e.stream.getTracks().forEach(function(track) {\n              var receiver;\n              if (window.RTCPeerConnection.prototype.getReceivers) {\n                receiver = pc.getReceivers().find(function(r) {\n                  return r.track && r.track.id === track.id;\n                });\n              } else {\n                receiver = {track: track};\n              }\n              var event = new Event('track');\n              event.track = track;\n              event.receiver = receiver;\n              event.transceiver = {receiver: receiver};\n              event.streams = [e.stream];\n              pc.dispatchEvent(event);\n            });\n          };\n          pc.addEventListener('addstream', pc._ontrackpoly);\n        }\n        return origSetRemoteDescription.apply(pc, arguments);\n      };\n    } else if (!('RTCRtpTransceiver' in window)) {\n      utils.wrapPeerConnectionEvent(window, 'track', function(e) {\n        if (!e.transceiver) {\n          e.transceiver = {receiver: e.receiver};\n        }\n        return e;\n      });\n    }\n  },\n\n  shimGetSendersWithDtmf: function(window) {\n    // Overrides addTrack/removeTrack, depends on shimAddTrackRemoveTrack.\n    if (typeof window === 'object' && window.RTCPeerConnection &&\n        !('getSenders' in window.RTCPeerConnection.prototype) &&\n        'createDTMFSender' in window.RTCPeerConnection.prototype) {\n      var shimSenderWithDtmf = function(pc, track) {\n        return {\n          track: track,\n          get dtmf() {\n            if (this._dtmf === undefined) {\n              if (track.kind === 'audio') {\n                this._dtmf = pc.createDTMFSender(track);\n              } else {\n                this._dtmf = null;\n              }\n            }\n            return this._dtmf;\n          },\n          _pc: pc\n        };\n      };\n\n      // augment addTrack when getSenders is not available.\n      if (!window.RTCPeerConnection.prototype.getSenders) {\n        window.RTCPeerConnection.prototype.getSenders = function() {\n          this._senders = this._senders || [];\n          return this._senders.slice(); // return a copy of the internal state.\n        };\n        var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n        window.RTCPeerConnection.prototype.addTrack = function(track, stream) {\n          var pc = this;\n          var sender = origAddTrack.apply(pc, arguments);\n          if (!sender) {\n            sender = shimSenderWithDtmf(pc, track);\n            pc._senders.push(sender);\n          }\n          return sender;\n        };\n\n        var origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n        window.RTCPeerConnection.prototype.removeTrack = function(sender) {\n          var pc = this;\n          origRemoveTrack.apply(pc, arguments);\n          var idx = pc._senders.indexOf(sender);\n          if (idx !== -1) {\n            pc._senders.splice(idx, 1);\n          }\n        };\n      }\n      var origAddStream = window.RTCPeerConnection.prototype.addStream;\n      window.RTCPeerConnection.prototype.addStream = function(stream) {\n        var pc = this;\n        pc._senders = pc._senders || [];\n        origAddStream.apply(pc, [stream]);\n        stream.getTracks().forEach(function(track) {\n          pc._senders.push(shimSenderWithDtmf(pc, track));\n        });\n      };\n\n      var origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n      window.RTCPeerConnection.prototype.removeStream = function(stream) {\n        var pc = this;\n        pc._senders = pc._senders || [];\n        origRemoveStream.apply(pc, [stream]);\n\n        stream.getTracks().forEach(function(track) {\n          var sender = pc._senders.find(function(s) {\n            return s.track === track;\n          });\n          if (sender) {\n            pc._senders.splice(pc._senders.indexOf(sender), 1); // remove sender\n          }\n        });\n      };\n    } else if (typeof window === 'object' && window.RTCPeerConnection &&\n               'getSenders' in window.RTCPeerConnection.prototype &&\n               'createDTMFSender' in window.RTCPeerConnection.prototype &&\n               window.RTCRtpSender &&\n               !('dtmf' in window.RTCRtpSender.prototype)) {\n      var origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n      window.RTCPeerConnection.prototype.getSenders = function() {\n        var pc = this;\n        var senders = origGetSenders.apply(pc, []);\n        senders.forEach(function(sender) {\n          sender._pc = pc;\n        });\n        return senders;\n      };\n\n      Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n        get: function() {\n          if (this._dtmf === undefined) {\n            if (this.track.kind === 'audio') {\n              this._dtmf = this._pc.createDTMFSender(this.track);\n            } else {\n              this._dtmf = null;\n            }\n          }\n          return this._dtmf;\n        }\n      });\n    }\n  },\n\n  shimSourceObject: function(window) {\n    var URL = window && window.URL;\n\n    if (typeof window === 'object') {\n      if (window.HTMLMediaElement &&\n        !('srcObject' in window.HTMLMediaElement.prototype)) {\n        // Shim the srcObject property, once, when HTMLMediaElement is found.\n        Object.defineProperty(window.HTMLMediaElement.prototype, 'srcObject', {\n          get: function() {\n            return this._srcObject;\n          },\n          set: function(stream) {\n            var self = this;\n            // Use _srcObject as a private property for this shim\n            this._srcObject = stream;\n            if (this.src) {\n              URL.revokeObjectURL(this.src);\n            }\n\n            if (!stream) {\n              this.src = '';\n              return undefined;\n            }\n            this.src = URL.createObjectURL(stream);\n            // We need to recreate the blob url when a track is added or\n            // removed. Doing it manually since we want to avoid a recursion.\n            stream.addEventListener('addtrack', function() {\n              if (self.src) {\n                URL.revokeObjectURL(self.src);\n              }\n              self.src = URL.createObjectURL(stream);\n            });\n            stream.addEventListener('removetrack', function() {\n              if (self.src) {\n                URL.revokeObjectURL(self.src);\n              }\n              self.src = URL.createObjectURL(stream);\n            });\n          }\n        });\n      }\n    }\n  },\n\n  shimAddTrackRemoveTrackWithNative: function(window) {\n    // shim addTrack/removeTrack with native variants in order to make\n    // the interactions with legacy getLocalStreams behave as in other browsers.\n    // Keeps a mapping stream.id => [stream, rtpsenders...]\n    window.RTCPeerConnection.prototype.getLocalStreams = function() {\n      var pc = this;\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      return Object.keys(this._shimmedLocalStreams).map(function(streamId) {\n        return pc._shimmedLocalStreams[streamId][0];\n      });\n    };\n\n    var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n    window.RTCPeerConnection.prototype.addTrack = function(track, stream) {\n      if (!stream) {\n        return origAddTrack.apply(this, arguments);\n      }\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n      var sender = origAddTrack.apply(this, arguments);\n      if (!this._shimmedLocalStreams[stream.id]) {\n        this._shimmedLocalStreams[stream.id] = [stream, sender];\n      } else if (this._shimmedLocalStreams[stream.id].indexOf(sender) === -1) {\n        this._shimmedLocalStreams[stream.id].push(sender);\n      }\n      return sender;\n    };\n\n    var origAddStream = window.RTCPeerConnection.prototype.addStream;\n    window.RTCPeerConnection.prototype.addStream = function(stream) {\n      var pc = this;\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n      stream.getTracks().forEach(function(track) {\n        var alreadyExists = pc.getSenders().find(function(s) {\n          return s.track === track;\n        });\n        if (alreadyExists) {\n          throw new DOMException('Track already exists.',\n              'InvalidAccessError');\n        }\n      });\n      var existingSenders = pc.getSenders();\n      origAddStream.apply(this, arguments);\n      var newSenders = pc.getSenders().filter(function(newSender) {\n        return existingSenders.indexOf(newSender) === -1;\n      });\n      this._shimmedLocalStreams[stream.id] = [stream].concat(newSenders);\n    };\n\n    var origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n    window.RTCPeerConnection.prototype.removeStream = function(stream) {\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      delete this._shimmedLocalStreams[stream.id];\n      return origRemoveStream.apply(this, arguments);\n    };\n\n    var origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n    window.RTCPeerConnection.prototype.removeTrack = function(sender) {\n      var pc = this;\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      if (sender) {\n        Object.keys(this._shimmedLocalStreams).forEach(function(streamId) {\n          var idx = pc._shimmedLocalStreams[streamId].indexOf(sender);\n          if (idx !== -1) {\n            pc._shimmedLocalStreams[streamId].splice(idx, 1);\n          }\n          if (pc._shimmedLocalStreams[streamId].length === 1) {\n            delete pc._shimmedLocalStreams[streamId];\n          }\n        });\n      }\n      return origRemoveTrack.apply(this, arguments);\n    };\n  },\n\n  shimAddTrackRemoveTrack: function(window) {\n    var browserDetails = utils.detectBrowser(window);\n    // shim addTrack and removeTrack.\n    if (window.RTCPeerConnection.prototype.addTrack &&\n        browserDetails.version >= 65) {\n      return this.shimAddTrackRemoveTrackWithNative(window);\n    }\n\n    // also shim pc.getLocalStreams when addTrack is shimmed\n    // to return the original streams.\n    var origGetLocalStreams = window.RTCPeerConnection.prototype\n        .getLocalStreams;\n    window.RTCPeerConnection.prototype.getLocalStreams = function() {\n      var pc = this;\n      var nativeStreams = origGetLocalStreams.apply(this);\n      pc._reverseStreams = pc._reverseStreams || {};\n      return nativeStreams.map(function(stream) {\n        return pc._reverseStreams[stream.id];\n      });\n    };\n\n    var origAddStream = window.RTCPeerConnection.prototype.addStream;\n    window.RTCPeerConnection.prototype.addStream = function(stream) {\n      var pc = this;\n      pc._streams = pc._streams || {};\n      pc._reverseStreams = pc._reverseStreams || {};\n\n      stream.getTracks().forEach(function(track) {\n        var alreadyExists = pc.getSenders().find(function(s) {\n          return s.track === track;\n        });\n        if (alreadyExists) {\n          throw new DOMException('Track already exists.',\n              'InvalidAccessError');\n        }\n      });\n      // Add identity mapping for consistency with addTrack.\n      // Unless this is being used with a stream from addTrack.\n      if (!pc._reverseStreams[stream.id]) {\n        var newStream = new window.MediaStream(stream.getTracks());\n        pc._streams[stream.id] = newStream;\n        pc._reverseStreams[newStream.id] = stream;\n        stream = newStream;\n      }\n      origAddStream.apply(pc, [stream]);\n    };\n\n    var origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n    window.RTCPeerConnection.prototype.removeStream = function(stream) {\n      var pc = this;\n      pc._streams = pc._streams || {};\n      pc._reverseStreams = pc._reverseStreams || {};\n\n      origRemoveStream.apply(pc, [(pc._streams[stream.id] || stream)]);\n      delete pc._reverseStreams[(pc._streams[stream.id] ?\n          pc._streams[stream.id].id : stream.id)];\n      delete pc._streams[stream.id];\n    };\n\n    window.RTCPeerConnection.prototype.addTrack = function(track, stream) {\n      var pc = this;\n      if (pc.signalingState === 'closed') {\n        throw new DOMException(\n          'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n          'InvalidStateError');\n      }\n      var streams = [].slice.call(arguments, 1);\n      if (streams.length !== 1 ||\n          !streams[0].getTracks().find(function(t) {\n            return t === track;\n          })) {\n        // this is not fully correct but all we can manage without\n        // [[associated MediaStreams]] internal slot.\n        throw new DOMException(\n          'The adapter.js addTrack polyfill only supports a single ' +\n          ' stream which is associated with the specified track.',\n          'NotSupportedError');\n      }\n\n      var alreadyExists = pc.getSenders().find(function(s) {\n        return s.track === track;\n      });\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n            'InvalidAccessError');\n      }\n\n      pc._streams = pc._streams || {};\n      pc._reverseStreams = pc._reverseStreams || {};\n      var oldStream = pc._streams[stream.id];\n      if (oldStream) {\n        // this is using odd Chrome behaviour, use with caution:\n        // https://bugs.chromium.org/p/webrtc/issues/detail?id=7815\n        // Note: we rely on the high-level addTrack/dtmf shim to\n        // create the sender with a dtmf sender.\n        oldStream.addTrack(track);\n\n        // Trigger ONN async.\n        Promise.resolve().then(function() {\n          pc.dispatchEvent(new Event('negotiationneeded'));\n        });\n      } else {\n        var newStream = new window.MediaStream([track]);\n        pc._streams[stream.id] = newStream;\n        pc._reverseStreams[newStream.id] = stream;\n        pc.addStream(newStream);\n      }\n      return pc.getSenders().find(function(s) {\n        return s.track === track;\n      });\n    };\n\n    // replace the internal stream id with the external one and\n    // vice versa.\n    function replaceInternalStreamId(pc, description) {\n      var sdp = description.sdp;\n      Object.keys(pc._reverseStreams || []).forEach(function(internalId) {\n        var externalStream = pc._reverseStreams[internalId];\n        var internalStream = pc._streams[externalStream.id];\n        sdp = sdp.replace(new RegExp(internalStream.id, 'g'),\n            externalStream.id);\n      });\n      return new RTCSessionDescription({\n        type: description.type,\n        sdp: sdp\n      });\n    }\n    function replaceExternalStreamId(pc, description) {\n      var sdp = description.sdp;\n      Object.keys(pc._reverseStreams || []).forEach(function(internalId) {\n        var externalStream = pc._reverseStreams[internalId];\n        var internalStream = pc._streams[externalStream.id];\n        sdp = sdp.replace(new RegExp(externalStream.id, 'g'),\n            internalStream.id);\n      });\n      return new RTCSessionDescription({\n        type: description.type,\n        sdp: sdp\n      });\n    }\n    ['createOffer', 'createAnswer'].forEach(function(method) {\n      var nativeMethod = window.RTCPeerConnection.prototype[method];\n      window.RTCPeerConnection.prototype[method] = function() {\n        var pc = this;\n        var args = arguments;\n        var isLegacyCall = arguments.length &&\n            typeof arguments[0] === 'function';\n        if (isLegacyCall) {\n          return nativeMethod.apply(pc, [\n            function(description) {\n              var desc = replaceInternalStreamId(pc, description);\n              args[0].apply(null, [desc]);\n            },\n            function(err) {\n              if (args[1]) {\n                args[1].apply(null, err);\n              }\n            }, arguments[2]\n          ]);\n        }\n        return nativeMethod.apply(pc, arguments)\n        .then(function(description) {\n          return replaceInternalStreamId(pc, description);\n        });\n      };\n    });\n\n    var origSetLocalDescription =\n        window.RTCPeerConnection.prototype.setLocalDescription;\n    window.RTCPeerConnection.prototype.setLocalDescription = function() {\n      var pc = this;\n      if (!arguments.length || !arguments[0].type) {\n        return origSetLocalDescription.apply(pc, arguments);\n      }\n      arguments[0] = replaceExternalStreamId(pc, arguments[0]);\n      return origSetLocalDescription.apply(pc, arguments);\n    };\n\n    // TODO: mangle getStats: https://w3c.github.io/webrtc-stats/#dom-rtcmediastreamstats-streamidentifier\n\n    var origLocalDescription = Object.getOwnPropertyDescriptor(\n        window.RTCPeerConnection.prototype, 'localDescription');\n    Object.defineProperty(window.RTCPeerConnection.prototype,\n        'localDescription', {\n          get: function() {\n            var pc = this;\n            var description = origLocalDescription.get.apply(this);\n            if (description.type === '') {\n              return description;\n            }\n            return replaceInternalStreamId(pc, description);\n          }\n        });\n\n    window.RTCPeerConnection.prototype.removeTrack = function(sender) {\n      var pc = this;\n      if (pc.signalingState === 'closed') {\n        throw new DOMException(\n          'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n          'InvalidStateError');\n      }\n      // We can not yet check for sender instanceof RTCRtpSender\n      // since we shim RTPSender. So we check if sender._pc is set.\n      if (!sender._pc) {\n        throw new DOMException('Argument 1 of RTCPeerConnection.removeTrack ' +\n            'does not implement interface RTCRtpSender.', 'TypeError');\n      }\n      var isLocal = sender._pc === pc;\n      if (!isLocal) {\n        throw new DOMException('Sender was not created by this connection.',\n            'InvalidAccessError');\n      }\n\n      // Search for the native stream the senders track belongs to.\n      pc._streams = pc._streams || {};\n      var stream;\n      Object.keys(pc._streams).forEach(function(streamid) {\n        var hasTrack = pc._streams[streamid].getTracks().find(function(track) {\n          return sender.track === track;\n        });\n        if (hasTrack) {\n          stream = pc._streams[streamid];\n        }\n      });\n\n      if (stream) {\n        if (stream.getTracks().length === 1) {\n          // if this is the last track of the stream, remove the stream. This\n          // takes care of any shimmed _senders.\n          pc.removeStream(pc._reverseStreams[stream.id]);\n        } else {\n          // relying on the same odd chrome behaviour as above.\n          stream.removeTrack(sender.track);\n        }\n        pc.dispatchEvent(new Event('negotiationneeded'));\n      }\n    };\n  },\n\n  shimPeerConnection: function(window) {\n    var browserDetails = utils.detectBrowser(window);\n\n    // The RTCPeerConnection object.\n    if (!window.RTCPeerConnection && window.webkitRTCPeerConnection) {\n      window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n        // Translate iceTransportPolicy to iceTransports,\n        // see https://code.google.com/p/webrtc/issues/detail?id=4869\n        // this was fixed in M56 along with unprefixing RTCPeerConnection.\n        logging('PeerConnection');\n        if (pcConfig && pcConfig.iceTransportPolicy) {\n          pcConfig.iceTransports = pcConfig.iceTransportPolicy;\n        }\n\n        return new window.webkitRTCPeerConnection(pcConfig, pcConstraints);\n      };\n      window.RTCPeerConnection.prototype =\n          window.webkitRTCPeerConnection.prototype;\n      // wrap static methods. Currently just generateCertificate.\n      if (window.webkitRTCPeerConnection.generateCertificate) {\n        Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n          get: function() {\n            return window.webkitRTCPeerConnection.generateCertificate;\n          }\n        });\n      }\n    } else {\n      // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\n      var OrigPeerConnection = window.RTCPeerConnection;\n      window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n        if (pcConfig && pcConfig.iceServers) {\n          var newIceServers = [];\n          for (var i = 0; i < pcConfig.iceServers.length; i++) {\n            var server = pcConfig.iceServers[i];\n            if (!server.hasOwnProperty('urls') &&\n                server.hasOwnProperty('url')) {\n              utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n              server = JSON.parse(JSON.stringify(server));\n              server.urls = server.url;\n              newIceServers.push(server);\n            } else {\n              newIceServers.push(pcConfig.iceServers[i]);\n            }\n          }\n          pcConfig.iceServers = newIceServers;\n        }\n        return new OrigPeerConnection(pcConfig, pcConstraints);\n      };\n      window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;\n      // wrap static methods. Currently just generateCertificate.\n      Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n        get: function() {\n          return OrigPeerConnection.generateCertificate;\n        }\n      });\n    }\n\n    var origGetStats = window.RTCPeerConnection.prototype.getStats;\n    window.RTCPeerConnection.prototype.getStats = function(selector,\n        successCallback, errorCallback) {\n      var pc = this;\n      var args = arguments;\n\n      // If selector is a function then we are in the old style stats so just\n      // pass back the original getStats format to avoid breaking old users.\n      if (arguments.length > 0 && typeof selector === 'function') {\n        return origGetStats.apply(this, arguments);\n      }\n\n      // When spec-style getStats is supported, return those when called with\n      // either no arguments or the selector argument is null.\n      if (origGetStats.length === 0 && (arguments.length === 0 ||\n          typeof arguments[0] !== 'function')) {\n        return origGetStats.apply(this, []);\n      }\n\n      var fixChromeStats_ = function(response) {\n        var standardReport = {};\n        var reports = response.result();\n        reports.forEach(function(report) {\n          var standardStats = {\n            id: report.id,\n            timestamp: report.timestamp,\n            type: {\n              localcandidate: 'local-candidate',\n              remotecandidate: 'remote-candidate'\n            }[report.type] || report.type\n          };\n          report.names().forEach(function(name) {\n            standardStats[name] = report.stat(name);\n          });\n          standardReport[standardStats.id] = standardStats;\n        });\n\n        return standardReport;\n      };\n\n      // shim getStats with maplike support\n      var makeMapStats = function(stats) {\n        return new Map(Object.keys(stats).map(function(key) {\n          return [key, stats[key]];\n        }));\n      };\n\n      if (arguments.length >= 2) {\n        var successCallbackWrapper_ = function(response) {\n          args[1](makeMapStats(fixChromeStats_(response)));\n        };\n\n        return origGetStats.apply(this, [successCallbackWrapper_,\n          arguments[0]]);\n      }\n\n      // promise-support\n      return new Promise(function(resolve, reject) {\n        origGetStats.apply(pc, [\n          function(response) {\n            resolve(makeMapStats(fixChromeStats_(response)));\n          }, reject]);\n      }).then(successCallback, errorCallback);\n    };\n\n    // add promise support -- natively available in Chrome 51\n    if (browserDetails.version < 51) {\n      ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n          .forEach(function(method) {\n            var nativeMethod = window.RTCPeerConnection.prototype[method];\n            window.RTCPeerConnection.prototype[method] = function() {\n              var args = arguments;\n              var pc = this;\n              var promise = new Promise(function(resolve, reject) {\n                nativeMethod.apply(pc, [args[0], resolve, reject]);\n              });\n              if (args.length < 2) {\n                return promise;\n              }\n              return promise.then(function() {\n                args[1].apply(null, []);\n              },\n              function(err) {\n                if (args.length >= 3) {\n                  args[2].apply(null, [err]);\n                }\n              });\n            };\n          });\n    }\n\n    // promise support for createOffer and createAnswer. Available (without\n    // bugs) since M52: crbug/619289\n    if (browserDetails.version < 52) {\n      ['createOffer', 'createAnswer'].forEach(function(method) {\n        var nativeMethod = window.RTCPeerConnection.prototype[method];\n        window.RTCPeerConnection.prototype[method] = function() {\n          var pc = this;\n          if (arguments.length < 1 || (arguments.length === 1 &&\n              typeof arguments[0] === 'object')) {\n            var opts = arguments.length === 1 ? arguments[0] : undefined;\n            return new Promise(function(resolve, reject) {\n              nativeMethod.apply(pc, [resolve, reject, opts]);\n            });\n          }\n          return nativeMethod.apply(this, arguments);\n        };\n      });\n    }\n\n    // shim implicit creation of RTCSessionDescription/RTCIceCandidate\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n        .forEach(function(method) {\n          var nativeMethod = window.RTCPeerConnection.prototype[method];\n          window.RTCPeerConnection.prototype[method] = function() {\n            arguments[0] = new ((method === 'addIceCandidate') ?\n                window.RTCIceCandidate :\n                window.RTCSessionDescription)(arguments[0]);\n            return nativeMethod.apply(this, arguments);\n          };\n        });\n\n    // support for addIceCandidate(null or undefined)\n    var nativeAddIceCandidate =\n        window.RTCPeerConnection.prototype.addIceCandidate;\n    window.RTCPeerConnection.prototype.addIceCandidate = function() {\n      if (!arguments[0]) {\n        if (arguments[1]) {\n          arguments[1].apply(null);\n        }\n        return Promise.resolve();\n      }\n      return nativeAddIceCandidate.apply(this, arguments);\n    };\n  }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTcuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvd2VicnRjLWFkYXB0ZXIvc3JjL2pzL2Nocm9tZS9jaHJvbWVfc2hpbS5qcz82MDQwIl0sInNvdXJjZXNDb250ZW50IjpbIlxuLypcbiAqICBDb3B5cmlnaHQgKGMpIDIwMTYgVGhlIFdlYlJUQyBwcm9qZWN0IGF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGEgQlNELXN0eWxlIGxpY2Vuc2VcbiAqICB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoZSBzb3VyY2VcbiAqICB0cmVlLlxuICovXG4gLyogZXNsaW50LWVudiBub2RlICovXG4ndXNlIHN0cmljdCc7XG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLi91dGlscy5qcycpO1xudmFyIGxvZ2dpbmcgPSB1dGlscy5sb2c7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBzaGltR2V0VXNlck1lZGlhOiByZXF1aXJlKCcuL2dldHVzZXJtZWRpYScpLFxuICBzaGltTWVkaWFTdHJlYW06IGZ1bmN0aW9uKHdpbmRvdykge1xuICAgIHdpbmRvdy5NZWRpYVN0cmVhbSA9IHdpbmRvdy5NZWRpYVN0cmVhbSB8fCB3aW5kb3cud2Via2l0TWVkaWFTdHJlYW07XG4gIH0sXG5cbiAgc2hpbU9uVHJhY2s6IGZ1bmN0aW9uKHdpbmRvdykge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JyAmJiB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24gJiYgISgnb250cmFjaycgaW5cbiAgICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSkpIHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLCAnb250cmFjaycsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5fb250cmFjaztcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbihmKSB7XG4gICAgICAgICAgaWYgKHRoaXMuX29udHJhY2spIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigndHJhY2snLCB0aGlzLl9vbnRyYWNrKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCd0cmFjaycsIHRoaXMuX29udHJhY2sgPSBmKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICB2YXIgb3JpZ1NldFJlbW90ZURlc2NyaXB0aW9uID1cbiAgICAgICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnNldFJlbW90ZURlc2NyaXB0aW9uO1xuICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5zZXRSZW1vdGVEZXNjcmlwdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgcGMgPSB0aGlzO1xuICAgICAgICBpZiAoIXBjLl9vbnRyYWNrcG9seSkge1xuICAgICAgICAgIHBjLl9vbnRyYWNrcG9seSA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIC8vIG9uYWRkc3RyZWFtIGRvZXMgbm90IGZpcmUgd2hlbiBhIHRyYWNrIGlzIGFkZGVkIHRvIGFuIGV4aXN0aW5nXG4gICAgICAgICAgICAvLyBzdHJlYW0uIEJ1dCBzdHJlYW0ub25hZGR0cmFjayBpcyBpbXBsZW1lbnRlZCBzbyB3ZSB1c2UgdGhhdC5cbiAgICAgICAgICAgIGUuc3RyZWFtLmFkZEV2ZW50TGlzdGVuZXIoJ2FkZHRyYWNrJywgZnVuY3Rpb24odGUpIHtcbiAgICAgICAgICAgICAgdmFyIHJlY2VpdmVyO1xuICAgICAgICAgICAgICBpZiAod2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRSZWNlaXZlcnMpIHtcbiAgICAgICAgICAgICAgICByZWNlaXZlciA9IHBjLmdldFJlY2VpdmVycygpLmZpbmQoZnVuY3Rpb24ocikge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHIudHJhY2sgJiYgci50cmFjay5pZCA9PT0gdGUudHJhY2suaWQ7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVjZWl2ZXIgPSB7dHJhY2s6IHRlLnRyYWNrfTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHZhciBldmVudCA9IG5ldyBFdmVudCgndHJhY2snKTtcbiAgICAgICAgICAgICAgZXZlbnQudHJhY2sgPSB0ZS50cmFjaztcbiAgICAgICAgICAgICAgZXZlbnQucmVjZWl2ZXIgPSByZWNlaXZlcjtcbiAgICAgICAgICAgICAgZXZlbnQudHJhbnNjZWl2ZXIgPSB7cmVjZWl2ZXI6IHJlY2VpdmVyfTtcbiAgICAgICAgICAgICAgZXZlbnQuc3RyZWFtcyA9IFtlLnN0cmVhbV07XG4gICAgICAgICAgICAgIHBjLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBlLnN0cmVhbS5nZXRUcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uKHRyYWNrKSB7XG4gICAgICAgICAgICAgIHZhciByZWNlaXZlcjtcbiAgICAgICAgICAgICAgaWYgKHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0UmVjZWl2ZXJzKSB7XG4gICAgICAgICAgICAgICAgcmVjZWl2ZXIgPSBwYy5nZXRSZWNlaXZlcnMoKS5maW5kKGZ1bmN0aW9uKHIpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiByLnRyYWNrICYmIHIudHJhY2suaWQgPT09IHRyYWNrLmlkO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVyID0ge3RyYWNrOiB0cmFja307XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdmFyIGV2ZW50ID0gbmV3IEV2ZW50KCd0cmFjaycpO1xuICAgICAgICAgICAgICBldmVudC50cmFjayA9IHRyYWNrO1xuICAgICAgICAgICAgICBldmVudC5yZWNlaXZlciA9IHJlY2VpdmVyO1xuICAgICAgICAgICAgICBldmVudC50cmFuc2NlaXZlciA9IHtyZWNlaXZlcjogcmVjZWl2ZXJ9O1xuICAgICAgICAgICAgICBldmVudC5zdHJlYW1zID0gW2Uuc3RyZWFtXTtcbiAgICAgICAgICAgICAgcGMuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9O1xuICAgICAgICAgIHBjLmFkZEV2ZW50TGlzdGVuZXIoJ2FkZHN0cmVhbScsIHBjLl9vbnRyYWNrcG9seSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9yaWdTZXRSZW1vdGVEZXNjcmlwdGlvbi5hcHBseShwYywgYXJndW1lbnRzKTtcbiAgICAgIH07XG4gICAgfSBlbHNlIGlmICghKCdSVENSdHBUcmFuc2NlaXZlcicgaW4gd2luZG93KSkge1xuICAgICAgdXRpbHMud3JhcFBlZXJDb25uZWN0aW9uRXZlbnQod2luZG93LCAndHJhY2snLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGlmICghZS50cmFuc2NlaXZlcikge1xuICAgICAgICAgIGUudHJhbnNjZWl2ZXIgPSB7cmVjZWl2ZXI6IGUucmVjZWl2ZXJ9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlO1xuICAgICAgfSk7XG4gICAgfVxuICB9LFxuXG4gIHNoaW1HZXRTZW5kZXJzV2l0aER0bWY6IGZ1bmN0aW9uKHdpbmRvdykge1xuICAgIC8vIE92ZXJyaWRlcyBhZGRUcmFjay9yZW1vdmVUcmFjaywgZGVwZW5kcyBvbiBzaGltQWRkVHJhY2tSZW1vdmVUcmFjay5cbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcgJiYgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uICYmXG4gICAgICAgICEoJ2dldFNlbmRlcnMnIGluIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUpICYmXG4gICAgICAgICdjcmVhdGVEVE1GU2VuZGVyJyBpbiB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlKSB7XG4gICAgICB2YXIgc2hpbVNlbmRlcldpdGhEdG1mID0gZnVuY3Rpb24ocGMsIHRyYWNrKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdHJhY2s6IHRyYWNrLFxuICAgICAgICAgIGdldCBkdG1mKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX2R0bWYgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICBpZiAodHJhY2sua2luZCA9PT0gJ2F1ZGlvJykge1xuICAgICAgICAgICAgICAgIHRoaXMuX2R0bWYgPSBwYy5jcmVhdGVEVE1GU2VuZGVyKHRyYWNrKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9kdG1mID0gbnVsbDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2R0bWY7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBfcGM6IHBjXG4gICAgICAgIH07XG4gICAgICB9O1xuXG4gICAgICAvLyBhdWdtZW50IGFkZFRyYWNrIHdoZW4gZ2V0U2VuZGVycyBpcyBub3QgYXZhaWxhYmxlLlxuICAgICAgaWYgKCF3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFNlbmRlcnMpIHtcbiAgICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTZW5kZXJzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdGhpcy5fc2VuZGVycyA9IHRoaXMuX3NlbmRlcnMgfHwgW107XG4gICAgICAgICAgcmV0dXJuIHRoaXMuX3NlbmRlcnMuc2xpY2UoKTsgLy8gcmV0dXJuIGEgY29weSBvZiB0aGUgaW50ZXJuYWwgc3RhdGUuXG4gICAgICAgIH07XG4gICAgICAgIHZhciBvcmlnQWRkVHJhY2sgPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYWNrO1xuICAgICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYWNrID0gZnVuY3Rpb24odHJhY2ssIHN0cmVhbSkge1xuICAgICAgICAgIHZhciBwYyA9IHRoaXM7XG4gICAgICAgICAgdmFyIHNlbmRlciA9IG9yaWdBZGRUcmFjay5hcHBseShwYywgYXJndW1lbnRzKTtcbiAgICAgICAgICBpZiAoIXNlbmRlcikge1xuICAgICAgICAgICAgc2VuZGVyID0gc2hpbVNlbmRlcldpdGhEdG1mKHBjLCB0cmFjayk7XG4gICAgICAgICAgICBwYy5fc2VuZGVycy5wdXNoKHNlbmRlcik7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBzZW5kZXI7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIG9yaWdSZW1vdmVUcmFjayA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlVHJhY2s7XG4gICAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlVHJhY2sgPSBmdW5jdGlvbihzZW5kZXIpIHtcbiAgICAgICAgICB2YXIgcGMgPSB0aGlzO1xuICAgICAgICAgIG9yaWdSZW1vdmVUcmFjay5hcHBseShwYywgYXJndW1lbnRzKTtcbiAgICAgICAgICB2YXIgaWR4ID0gcGMuX3NlbmRlcnMuaW5kZXhPZihzZW5kZXIpO1xuICAgICAgICAgIGlmIChpZHggIT09IC0xKSB7XG4gICAgICAgICAgICBwYy5fc2VuZGVycy5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICB2YXIgb3JpZ0FkZFN0cmVhbSA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkU3RyZWFtO1xuICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRTdHJlYW0gPSBmdW5jdGlvbihzdHJlYW0pIHtcbiAgICAgICAgdmFyIHBjID0gdGhpcztcbiAgICAgICAgcGMuX3NlbmRlcnMgPSBwYy5fc2VuZGVycyB8fCBbXTtcbiAgICAgICAgb3JpZ0FkZFN0cmVhbS5hcHBseShwYywgW3N0cmVhbV0pO1xuICAgICAgICBzdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbih0cmFjaykge1xuICAgICAgICAgIHBjLl9zZW5kZXJzLnB1c2goc2hpbVNlbmRlcldpdGhEdG1mKHBjLCB0cmFjaykpO1xuICAgICAgICB9KTtcbiAgICAgIH07XG5cbiAgICAgIHZhciBvcmlnUmVtb3ZlU3RyZWFtID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVTdHJlYW07XG4gICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnJlbW92ZVN0cmVhbSA9IGZ1bmN0aW9uKHN0cmVhbSkge1xuICAgICAgICB2YXIgcGMgPSB0aGlzO1xuICAgICAgICBwYy5fc2VuZGVycyA9IHBjLl9zZW5kZXJzIHx8IFtdO1xuICAgICAgICBvcmlnUmVtb3ZlU3RyZWFtLmFwcGx5KHBjLCBbc3RyZWFtXSk7XG5cbiAgICAgICAgc3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2goZnVuY3Rpb24odHJhY2spIHtcbiAgICAgICAgICB2YXIgc2VuZGVyID0gcGMuX3NlbmRlcnMuZmluZChmdW5jdGlvbihzKSB7XG4gICAgICAgICAgICByZXR1cm4gcy50cmFjayA9PT0gdHJhY2s7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgaWYgKHNlbmRlcikge1xuICAgICAgICAgICAgcGMuX3NlbmRlcnMuc3BsaWNlKHBjLl9zZW5kZXJzLmluZGV4T2Yoc2VuZGVyKSwgMSk7IC8vIHJlbW92ZSBzZW5kZXJcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnICYmIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiAmJlxuICAgICAgICAgICAgICAgJ2dldFNlbmRlcnMnIGluIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUgJiZcbiAgICAgICAgICAgICAgICdjcmVhdGVEVE1GU2VuZGVyJyBpbiB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlICYmXG4gICAgICAgICAgICAgICB3aW5kb3cuUlRDUnRwU2VuZGVyICYmXG4gICAgICAgICAgICAgICAhKCdkdG1mJyBpbiB3aW5kb3cuUlRDUnRwU2VuZGVyLnByb3RvdHlwZSkpIHtcbiAgICAgIHZhciBvcmlnR2V0U2VuZGVycyA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U2VuZGVycztcbiAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U2VuZGVycyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgcGMgPSB0aGlzO1xuICAgICAgICB2YXIgc2VuZGVycyA9IG9yaWdHZXRTZW5kZXJzLmFwcGx5KHBjLCBbXSk7XG4gICAgICAgIHNlbmRlcnMuZm9yRWFjaChmdW5jdGlvbihzZW5kZXIpIHtcbiAgICAgICAgICBzZW5kZXIuX3BjID0gcGM7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gc2VuZGVycztcbiAgICAgIH07XG5cbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3cuUlRDUnRwU2VuZGVyLnByb3RvdHlwZSwgJ2R0bWYnLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgaWYgKHRoaXMuX2R0bWYgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaWYgKHRoaXMudHJhY2sua2luZCA9PT0gJ2F1ZGlvJykge1xuICAgICAgICAgICAgICB0aGlzLl9kdG1mID0gdGhpcy5fcGMuY3JlYXRlRFRNRlNlbmRlcih0aGlzLnRyYWNrKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRoaXMuX2R0bWYgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gdGhpcy5fZHRtZjtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9LFxuXG4gIHNoaW1Tb3VyY2VPYmplY3Q6IGZ1bmN0aW9uKHdpbmRvdykge1xuICAgIHZhciBVUkwgPSB3aW5kb3cgJiYgd2luZG93LlVSTDtcblxuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0Jykge1xuICAgICAgaWYgKHdpbmRvdy5IVE1MTWVkaWFFbGVtZW50ICYmXG4gICAgICAgICEoJ3NyY09iamVjdCcgaW4gd2luZG93LkhUTUxNZWRpYUVsZW1lbnQucHJvdG90eXBlKSkge1xuICAgICAgICAvLyBTaGltIHRoZSBzcmNPYmplY3QgcHJvcGVydHksIG9uY2UsIHdoZW4gSFRNTE1lZGlhRWxlbWVudCBpcyBmb3VuZC5cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdy5IVE1MTWVkaWFFbGVtZW50LnByb3RvdHlwZSwgJ3NyY09iamVjdCcsIHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3NyY09iamVjdDtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNldDogZnVuY3Rpb24oc3RyZWFtKSB7XG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgICAgICAvLyBVc2UgX3NyY09iamVjdCBhcyBhIHByaXZhdGUgcHJvcGVydHkgZm9yIHRoaXMgc2hpbVxuICAgICAgICAgICAgdGhpcy5fc3JjT2JqZWN0ID0gc3RyZWFtO1xuICAgICAgICAgICAgaWYgKHRoaXMuc3JjKSB7XG4gICAgICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwodGhpcy5zcmMpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIXN0cmVhbSkge1xuICAgICAgICAgICAgICB0aGlzLnNyYyA9ICcnO1xuICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zcmMgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKHN0cmVhbSk7XG4gICAgICAgICAgICAvLyBXZSBuZWVkIHRvIHJlY3JlYXRlIHRoZSBibG9iIHVybCB3aGVuIGEgdHJhY2sgaXMgYWRkZWQgb3JcbiAgICAgICAgICAgIC8vIHJlbW92ZWQuIERvaW5nIGl0IG1hbnVhbGx5IHNpbmNlIHdlIHdhbnQgdG8gYXZvaWQgYSByZWN1cnNpb24uXG4gICAgICAgICAgICBzdHJlYW0uYWRkRXZlbnRMaXN0ZW5lcignYWRkdHJhY2snLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgaWYgKHNlbGYuc3JjKSB7XG4gICAgICAgICAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTChzZWxmLnNyYyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgc2VsZi5zcmMgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKHN0cmVhbSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHN0cmVhbS5hZGRFdmVudExpc3RlbmVyKCdyZW1vdmV0cmFjaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICBpZiAoc2VsZi5zcmMpIHtcbiAgICAgICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHNlbGYuc3JjKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBzZWxmLnNyYyA9IFVSTC5jcmVhdGVPYmplY3RVUkwoc3RyZWFtKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIHNoaW1BZGRUcmFja1JlbW92ZVRyYWNrV2l0aE5hdGl2ZTogZnVuY3Rpb24od2luZG93KSB7XG4gICAgLy8gc2hpbSBhZGRUcmFjay9yZW1vdmVUcmFjayB3aXRoIG5hdGl2ZSB2YXJpYW50cyBpbiBvcmRlciB0byBtYWtlXG4gICAgLy8gdGhlIGludGVyYWN0aW9ucyB3aXRoIGxlZ2FjeSBnZXRMb2NhbFN0cmVhbXMgYmVoYXZlIGFzIGluIG90aGVyIGJyb3dzZXJzLlxuICAgIC8vIEtlZXBzIGEgbWFwcGluZyBzdHJlYW0uaWQgPT4gW3N0cmVhbSwgcnRwc2VuZGVycy4uLl1cbiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldExvY2FsU3RyZWFtcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHBjID0gdGhpcztcbiAgICAgIHRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXMgPSB0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zIHx8IHt9O1xuICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXMpLm1hcChmdW5jdGlvbihzdHJlYW1JZCkge1xuICAgICAgICByZXR1cm4gcGMuX3NoaW1tZWRMb2NhbFN0cmVhbXNbc3RyZWFtSWRdWzBdO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIHZhciBvcmlnQWRkVHJhY2sgPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYWNrO1xuICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhY2sgPSBmdW5jdGlvbih0cmFjaywgc3RyZWFtKSB7XG4gICAgICBpZiAoIXN0cmVhbSkge1xuICAgICAgICByZXR1cm4gb3JpZ0FkZFRyYWNrLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9XG4gICAgICB0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zID0gdGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtcyB8fCB7fTtcblxuICAgICAgdmFyIHNlbmRlciA9IG9yaWdBZGRUcmFjay5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgaWYgKCF0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zW3N0cmVhbS5pZF0pIHtcbiAgICAgICAgdGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtc1tzdHJlYW0uaWRdID0gW3N0cmVhbSwgc2VuZGVyXTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtc1tzdHJlYW0uaWRdLmluZGV4T2Yoc2VuZGVyKSA9PT0gLTEpIHtcbiAgICAgICAgdGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtc1tzdHJlYW0uaWRdLnB1c2goc2VuZGVyKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzZW5kZXI7XG4gICAgfTtcblxuICAgIHZhciBvcmlnQWRkU3RyZWFtID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRTdHJlYW07XG4gICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRTdHJlYW0gPSBmdW5jdGlvbihzdHJlYW0pIHtcbiAgICAgIHZhciBwYyA9IHRoaXM7XG4gICAgICB0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zID0gdGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtcyB8fCB7fTtcblxuICAgICAgc3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2goZnVuY3Rpb24odHJhY2spIHtcbiAgICAgICAgdmFyIGFscmVhZHlFeGlzdHMgPSBwYy5nZXRTZW5kZXJzKCkuZmluZChmdW5jdGlvbihzKSB7XG4gICAgICAgICAgcmV0dXJuIHMudHJhY2sgPT09IHRyYWNrO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGFscmVhZHlFeGlzdHMpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKCdUcmFjayBhbHJlYWR5IGV4aXN0cy4nLFxuICAgICAgICAgICAgICAnSW52YWxpZEFjY2Vzc0Vycm9yJyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgdmFyIGV4aXN0aW5nU2VuZGVycyA9IHBjLmdldFNlbmRlcnMoKTtcbiAgICAgIG9yaWdBZGRTdHJlYW0uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIHZhciBuZXdTZW5kZXJzID0gcGMuZ2V0U2VuZGVycygpLmZpbHRlcihmdW5jdGlvbihuZXdTZW5kZXIpIHtcbiAgICAgICAgcmV0dXJuIGV4aXN0aW5nU2VuZGVycy5pbmRleE9mKG5ld1NlbmRlcikgPT09IC0xO1xuICAgICAgfSk7XG4gICAgICB0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zW3N0cmVhbS5pZF0gPSBbc3RyZWFtXS5jb25jYXQobmV3U2VuZGVycyk7XG4gICAgfTtcblxuICAgIHZhciBvcmlnUmVtb3ZlU3RyZWFtID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVTdHJlYW07XG4gICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVTdHJlYW0gPSBmdW5jdGlvbihzdHJlYW0pIHtcbiAgICAgIHRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXMgPSB0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zIHx8IHt9O1xuICAgICAgZGVsZXRlIHRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXNbc3RyZWFtLmlkXTtcbiAgICAgIHJldHVybiBvcmlnUmVtb3ZlU3RyZWFtLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfTtcblxuICAgIHZhciBvcmlnUmVtb3ZlVHJhY2sgPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnJlbW92ZVRyYWNrO1xuICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlVHJhY2sgPSBmdW5jdGlvbihzZW5kZXIpIHtcbiAgICAgIHZhciBwYyA9IHRoaXM7XG4gICAgICB0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zID0gdGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtcyB8fCB7fTtcbiAgICAgIGlmIChzZW5kZXIpIHtcbiAgICAgICAgT2JqZWN0LmtleXModGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtcykuZm9yRWFjaChmdW5jdGlvbihzdHJlYW1JZCkge1xuICAgICAgICAgIHZhciBpZHggPSBwYy5fc2hpbW1lZExvY2FsU3RyZWFtc1tzdHJlYW1JZF0uaW5kZXhPZihzZW5kZXIpO1xuICAgICAgICAgIGlmIChpZHggIT09IC0xKSB7XG4gICAgICAgICAgICBwYy5fc2hpbW1lZExvY2FsU3RyZWFtc1tzdHJlYW1JZF0uc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChwYy5fc2hpbW1lZExvY2FsU3RyZWFtc1tzdHJlYW1JZF0ubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICBkZWxldGUgcGMuX3NoaW1tZWRMb2NhbFN0cmVhbXNbc3RyZWFtSWRdO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gb3JpZ1JlbW92ZVRyYWNrLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfTtcbiAgfSxcblxuICBzaGltQWRkVHJhY2tSZW1vdmVUcmFjazogZnVuY3Rpb24od2luZG93KSB7XG4gICAgdmFyIGJyb3dzZXJEZXRhaWxzID0gdXRpbHMuZGV0ZWN0QnJvd3Nlcih3aW5kb3cpO1xuICAgIC8vIHNoaW0gYWRkVHJhY2sgYW5kIHJlbW92ZVRyYWNrLlxuICAgIGlmICh3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYWNrICYmXG4gICAgICAgIGJyb3dzZXJEZXRhaWxzLnZlcnNpb24gPj0gNjUpIHtcbiAgICAgIHJldHVybiB0aGlzLnNoaW1BZGRUcmFja1JlbW92ZVRyYWNrV2l0aE5hdGl2ZSh3aW5kb3cpO1xuICAgIH1cblxuICAgIC8vIGFsc28gc2hpbSBwYy5nZXRMb2NhbFN0cmVhbXMgd2hlbiBhZGRUcmFjayBpcyBzaGltbWVkXG4gICAgLy8gdG8gcmV0dXJuIHRoZSBvcmlnaW5hbCBzdHJlYW1zLlxuICAgIHZhciBvcmlnR2V0TG9jYWxTdHJlYW1zID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVxuICAgICAgICAuZ2V0TG9jYWxTdHJlYW1zO1xuICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0TG9jYWxTdHJlYW1zID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcGMgPSB0aGlzO1xuICAgICAgdmFyIG5hdGl2ZVN0cmVhbXMgPSBvcmlnR2V0TG9jYWxTdHJlYW1zLmFwcGx5KHRoaXMpO1xuICAgICAgcGMuX3JldmVyc2VTdHJlYW1zID0gcGMuX3JldmVyc2VTdHJlYW1zIHx8IHt9O1xuICAgICAgcmV0dXJuIG5hdGl2ZVN0cmVhbXMubWFwKGZ1bmN0aW9uKHN0cmVhbSkge1xuICAgICAgICByZXR1cm4gcGMuX3JldmVyc2VTdHJlYW1zW3N0cmVhbS5pZF07XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgdmFyIG9yaWdBZGRTdHJlYW0gPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFN0cmVhbTtcbiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFN0cmVhbSA9IGZ1bmN0aW9uKHN0cmVhbSkge1xuICAgICAgdmFyIHBjID0gdGhpcztcbiAgICAgIHBjLl9zdHJlYW1zID0gcGMuX3N0cmVhbXMgfHwge307XG4gICAgICBwYy5fcmV2ZXJzZVN0cmVhbXMgPSBwYy5fcmV2ZXJzZVN0cmVhbXMgfHwge307XG5cbiAgICAgIHN0cmVhbS5nZXRUcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uKHRyYWNrKSB7XG4gICAgICAgIHZhciBhbHJlYWR5RXhpc3RzID0gcGMuZ2V0U2VuZGVycygpLmZpbmQoZnVuY3Rpb24ocykge1xuICAgICAgICAgIHJldHVybiBzLnRyYWNrID09PSB0cmFjaztcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChhbHJlYWR5RXhpc3RzKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IERPTUV4Y2VwdGlvbignVHJhY2sgYWxyZWFkeSBleGlzdHMuJyxcbiAgICAgICAgICAgICAgJ0ludmFsaWRBY2Nlc3NFcnJvcicpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIC8vIEFkZCBpZGVudGl0eSBtYXBwaW5nIGZvciBjb25zaXN0ZW5jeSB3aXRoIGFkZFRyYWNrLlxuICAgICAgLy8gVW5sZXNzIHRoaXMgaXMgYmVpbmcgdXNlZCB3aXRoIGEgc3RyZWFtIGZyb20gYWRkVHJhY2suXG4gICAgICBpZiAoIXBjLl9yZXZlcnNlU3RyZWFtc1tzdHJlYW0uaWRdKSB7XG4gICAgICAgIHZhciBuZXdTdHJlYW0gPSBuZXcgd2luZG93Lk1lZGlhU3RyZWFtKHN0cmVhbS5nZXRUcmFja3MoKSk7XG4gICAgICAgIHBjLl9zdHJlYW1zW3N0cmVhbS5pZF0gPSBuZXdTdHJlYW07XG4gICAgICAgIHBjLl9yZXZlcnNlU3RyZWFtc1tuZXdTdHJlYW0uaWRdID0gc3RyZWFtO1xuICAgICAgICBzdHJlYW0gPSBuZXdTdHJlYW07XG4gICAgICB9XG4gICAgICBvcmlnQWRkU3RyZWFtLmFwcGx5KHBjLCBbc3RyZWFtXSk7XG4gICAgfTtcblxuICAgIHZhciBvcmlnUmVtb3ZlU3RyZWFtID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVTdHJlYW07XG4gICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVTdHJlYW0gPSBmdW5jdGlvbihzdHJlYW0pIHtcbiAgICAgIHZhciBwYyA9IHRoaXM7XG4gICAgICBwYy5fc3RyZWFtcyA9IHBjLl9zdHJlYW1zIHx8IHt9O1xuICAgICAgcGMuX3JldmVyc2VTdHJlYW1zID0gcGMuX3JldmVyc2VTdHJlYW1zIHx8IHt9O1xuXG4gICAgICBvcmlnUmVtb3ZlU3RyZWFtLmFwcGx5KHBjLCBbKHBjLl9zdHJlYW1zW3N0cmVhbS5pZF0gfHwgc3RyZWFtKV0pO1xuICAgICAgZGVsZXRlIHBjLl9yZXZlcnNlU3RyZWFtc1socGMuX3N0cmVhbXNbc3RyZWFtLmlkXSA/XG4gICAgICAgICAgcGMuX3N0cmVhbXNbc3RyZWFtLmlkXS5pZCA6IHN0cmVhbS5pZCldO1xuICAgICAgZGVsZXRlIHBjLl9zdHJlYW1zW3N0cmVhbS5pZF07XG4gICAgfTtcblxuICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhY2sgPSBmdW5jdGlvbih0cmFjaywgc3RyZWFtKSB7XG4gICAgICB2YXIgcGMgPSB0aGlzO1xuICAgICAgaWYgKHBjLnNpZ25hbGluZ1N0YXRlID09PSAnY2xvc2VkJykge1xuICAgICAgICB0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKFxuICAgICAgICAgICdUaGUgUlRDUGVlckNvbm5lY3Rpb25cXCdzIHNpZ25hbGluZ1N0YXRlIGlzIFxcJ2Nsb3NlZFxcJy4nLFxuICAgICAgICAgICdJbnZhbGlkU3RhdGVFcnJvcicpO1xuICAgICAgfVxuICAgICAgdmFyIHN0cmVhbXMgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gICAgICBpZiAoc3RyZWFtcy5sZW5ndGggIT09IDEgfHxcbiAgICAgICAgICAhc3RyZWFtc1swXS5nZXRUcmFja3MoKS5maW5kKGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHJldHVybiB0ID09PSB0cmFjaztcbiAgICAgICAgICB9KSkge1xuICAgICAgICAvLyB0aGlzIGlzIG5vdCBmdWxseSBjb3JyZWN0IGJ1dCBhbGwgd2UgY2FuIG1hbmFnZSB3aXRob3V0XG4gICAgICAgIC8vIFtbYXNzb2NpYXRlZCBNZWRpYVN0cmVhbXNdXSBpbnRlcm5hbCBzbG90LlxuICAgICAgICB0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKFxuICAgICAgICAgICdUaGUgYWRhcHRlci5qcyBhZGRUcmFjayBwb2x5ZmlsbCBvbmx5IHN1cHBvcnRzIGEgc2luZ2xlICcgK1xuICAgICAgICAgICcgc3RyZWFtIHdoaWNoIGlzIGFzc29jaWF0ZWQgd2l0aCB0aGUgc3BlY2lmaWVkIHRyYWNrLicsXG4gICAgICAgICAgJ05vdFN1cHBvcnRlZEVycm9yJyk7XG4gICAgICB9XG5cbiAgICAgIHZhciBhbHJlYWR5RXhpc3RzID0gcGMuZ2V0U2VuZGVycygpLmZpbmQoZnVuY3Rpb24ocykge1xuICAgICAgICByZXR1cm4gcy50cmFjayA9PT0gdHJhY2s7XG4gICAgICB9KTtcbiAgICAgIGlmIChhbHJlYWR5RXhpc3RzKSB7XG4gICAgICAgIHRocm93IG5ldyBET01FeGNlcHRpb24oJ1RyYWNrIGFscmVhZHkgZXhpc3RzLicsXG4gICAgICAgICAgICAnSW52YWxpZEFjY2Vzc0Vycm9yJyk7XG4gICAgICB9XG5cbiAgICAgIHBjLl9zdHJlYW1zID0gcGMuX3N0cmVhbXMgfHwge307XG4gICAgICBwYy5fcmV2ZXJzZVN0cmVhbXMgPSBwYy5fcmV2ZXJzZVN0cmVhbXMgfHwge307XG4gICAgICB2YXIgb2xkU3RyZWFtID0gcGMuX3N0cmVhbXNbc3RyZWFtLmlkXTtcbiAgICAgIGlmIChvbGRTdHJlYW0pIHtcbiAgICAgICAgLy8gdGhpcyBpcyB1c2luZyBvZGQgQ2hyb21lIGJlaGF2aW91ciwgdXNlIHdpdGggY2F1dGlvbjpcbiAgICAgICAgLy8gaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL3dlYnJ0Yy9pc3N1ZXMvZGV0YWlsP2lkPTc4MTVcbiAgICAgICAgLy8gTm90ZTogd2UgcmVseSBvbiB0aGUgaGlnaC1sZXZlbCBhZGRUcmFjay9kdG1mIHNoaW0gdG9cbiAgICAgICAgLy8gY3JlYXRlIHRoZSBzZW5kZXIgd2l0aCBhIGR0bWYgc2VuZGVyLlxuICAgICAgICBvbGRTdHJlYW0uYWRkVHJhY2sodHJhY2spO1xuXG4gICAgICAgIC8vIFRyaWdnZXIgT05OIGFzeW5jLlxuICAgICAgICBQcm9taXNlLnJlc29sdmUoKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHBjLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCduZWdvdGlhdGlvbm5lZWRlZCcpKTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgbmV3U3RyZWFtID0gbmV3IHdpbmRvdy5NZWRpYVN0cmVhbShbdHJhY2tdKTtcbiAgICAgICAgcGMuX3N0cmVhbXNbc3RyZWFtLmlkXSA9IG5ld1N0cmVhbTtcbiAgICAgICAgcGMuX3JldmVyc2VTdHJlYW1zW25ld1N0cmVhbS5pZF0gPSBzdHJlYW07XG4gICAgICAgIHBjLmFkZFN0cmVhbShuZXdTdHJlYW0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHBjLmdldFNlbmRlcnMoKS5maW5kKGZ1bmN0aW9uKHMpIHtcbiAgICAgICAgcmV0dXJuIHMudHJhY2sgPT09IHRyYWNrO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8vIHJlcGxhY2UgdGhlIGludGVybmFsIHN0cmVhbSBpZCB3aXRoIHRoZSBleHRlcm5hbCBvbmUgYW5kXG4gICAgLy8gdmljZSB2ZXJzYS5cbiAgICBmdW5jdGlvbiByZXBsYWNlSW50ZXJuYWxTdHJlYW1JZChwYywgZGVzY3JpcHRpb24pIHtcbiAgICAgIHZhciBzZHAgPSBkZXNjcmlwdGlvbi5zZHA7XG4gICAgICBPYmplY3Qua2V5cyhwYy5fcmV2ZXJzZVN0cmVhbXMgfHwgW10pLmZvckVhY2goZnVuY3Rpb24oaW50ZXJuYWxJZCkge1xuICAgICAgICB2YXIgZXh0ZXJuYWxTdHJlYW0gPSBwYy5fcmV2ZXJzZVN0cmVhbXNbaW50ZXJuYWxJZF07XG4gICAgICAgIHZhciBpbnRlcm5hbFN0cmVhbSA9IHBjLl9zdHJlYW1zW2V4dGVybmFsU3RyZWFtLmlkXTtcbiAgICAgICAgc2RwID0gc2RwLnJlcGxhY2UobmV3IFJlZ0V4cChpbnRlcm5hbFN0cmVhbS5pZCwgJ2cnKSxcbiAgICAgICAgICAgIGV4dGVybmFsU3RyZWFtLmlkKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIG5ldyBSVENTZXNzaW9uRGVzY3JpcHRpb24oe1xuICAgICAgICB0eXBlOiBkZXNjcmlwdGlvbi50eXBlLFxuICAgICAgICBzZHA6IHNkcFxuICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlcGxhY2VFeHRlcm5hbFN0cmVhbUlkKHBjLCBkZXNjcmlwdGlvbikge1xuICAgICAgdmFyIHNkcCA9IGRlc2NyaXB0aW9uLnNkcDtcbiAgICAgIE9iamVjdC5rZXlzKHBjLl9yZXZlcnNlU3RyZWFtcyB8fCBbXSkuZm9yRWFjaChmdW5jdGlvbihpbnRlcm5hbElkKSB7XG4gICAgICAgIHZhciBleHRlcm5hbFN0cmVhbSA9IHBjLl9yZXZlcnNlU3RyZWFtc1tpbnRlcm5hbElkXTtcbiAgICAgICAgdmFyIGludGVybmFsU3RyZWFtID0gcGMuX3N0cmVhbXNbZXh0ZXJuYWxTdHJlYW0uaWRdO1xuICAgICAgICBzZHAgPSBzZHAucmVwbGFjZShuZXcgUmVnRXhwKGV4dGVybmFsU3RyZWFtLmlkLCAnZycpLFxuICAgICAgICAgICAgaW50ZXJuYWxTdHJlYW0uaWQpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gbmV3IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbih7XG4gICAgICAgIHR5cGU6IGRlc2NyaXB0aW9uLnR5cGUsXG4gICAgICAgIHNkcDogc2RwXG4gICAgICB9KTtcbiAgICB9XG4gICAgWydjcmVhdGVPZmZlcicsICdjcmVhdGVBbnN3ZXInXS5mb3JFYWNoKGZ1bmN0aW9uKG1ldGhvZCkge1xuICAgICAgdmFyIG5hdGl2ZU1ldGhvZCA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbbWV0aG9kXTtcbiAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbbWV0aG9kXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgcGMgPSB0aGlzO1xuICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgICAgdmFyIGlzTGVnYWN5Q2FsbCA9IGFyZ3VtZW50cy5sZW5ndGggJiZcbiAgICAgICAgICAgIHR5cGVvZiBhcmd1bWVudHNbMF0gPT09ICdmdW5jdGlvbic7XG4gICAgICAgIGlmIChpc0xlZ2FjeUNhbGwpIHtcbiAgICAgICAgICByZXR1cm4gbmF0aXZlTWV0aG9kLmFwcGx5KHBjLCBbXG4gICAgICAgICAgICBmdW5jdGlvbihkZXNjcmlwdGlvbikge1xuICAgICAgICAgICAgICB2YXIgZGVzYyA9IHJlcGxhY2VJbnRlcm5hbFN0cmVhbUlkKHBjLCBkZXNjcmlwdGlvbik7XG4gICAgICAgICAgICAgIGFyZ3NbMF0uYXBwbHkobnVsbCwgW2Rlc2NdKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgICAgaWYgKGFyZ3NbMV0pIHtcbiAgICAgICAgICAgICAgICBhcmdzWzFdLmFwcGx5KG51bGwsIGVycik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIGFyZ3VtZW50c1syXVxuICAgICAgICAgIF0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuYXRpdmVNZXRob2QuYXBwbHkocGMsIGFyZ3VtZW50cylcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGVzY3JpcHRpb24pIHtcbiAgICAgICAgICByZXR1cm4gcmVwbGFjZUludGVybmFsU3RyZWFtSWQocGMsIGRlc2NyaXB0aW9uKTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgIH0pO1xuXG4gICAgdmFyIG9yaWdTZXRMb2NhbERlc2NyaXB0aW9uID1cbiAgICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5zZXRMb2NhbERlc2NyaXB0aW9uO1xuICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuc2V0TG9jYWxEZXNjcmlwdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHBjID0gdGhpcztcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCB8fCAhYXJndW1lbnRzWzBdLnR5cGUpIHtcbiAgICAgICAgcmV0dXJuIG9yaWdTZXRMb2NhbERlc2NyaXB0aW9uLmFwcGx5KHBjLCBhcmd1bWVudHMpO1xuICAgICAgfVxuICAgICAgYXJndW1lbnRzWzBdID0gcmVwbGFjZUV4dGVybmFsU3RyZWFtSWQocGMsIGFyZ3VtZW50c1swXSk7XG4gICAgICByZXR1cm4gb3JpZ1NldExvY2FsRGVzY3JpcHRpb24uYXBwbHkocGMsIGFyZ3VtZW50cyk7XG4gICAgfTtcblxuICAgIC8vIFRPRE86IG1hbmdsZSBnZXRTdGF0czogaHR0cHM6Ly93M2MuZ2l0aHViLmlvL3dlYnJ0Yy1zdGF0cy8jZG9tLXJ0Y21lZGlhc3RyZWFtc3RhdHMtc3RyZWFtaWRlbnRpZmllclxuXG4gICAgdmFyIG9yaWdMb2NhbERlc2NyaXB0aW9uID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihcbiAgICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSwgJ2xvY2FsRGVzY3JpcHRpb24nKTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSxcbiAgICAgICAgJ2xvY2FsRGVzY3JpcHRpb24nLCB7XG4gICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBwYyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgZGVzY3JpcHRpb24gPSBvcmlnTG9jYWxEZXNjcmlwdGlvbi5nZXQuYXBwbHkodGhpcyk7XG4gICAgICAgICAgICBpZiAoZGVzY3JpcHRpb24udHlwZSA9PT0gJycpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGRlc2NyaXB0aW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlcGxhY2VJbnRlcm5hbFN0cmVhbUlkKHBjLCBkZXNjcmlwdGlvbik7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlVHJhY2sgPSBmdW5jdGlvbihzZW5kZXIpIHtcbiAgICAgIHZhciBwYyA9IHRoaXM7XG4gICAgICBpZiAocGMuc2lnbmFsaW5nU3RhdGUgPT09ICdjbG9zZWQnKSB7XG4gICAgICAgIHRocm93IG5ldyBET01FeGNlcHRpb24oXG4gICAgICAgICAgJ1RoZSBSVENQZWVyQ29ubmVjdGlvblxcJ3Mgc2lnbmFsaW5nU3RhdGUgaXMgXFwnY2xvc2VkXFwnLicsXG4gICAgICAgICAgJ0ludmFsaWRTdGF0ZUVycm9yJyk7XG4gICAgICB9XG4gICAgICAvLyBXZSBjYW4gbm90IHlldCBjaGVjayBmb3Igc2VuZGVyIGluc3RhbmNlb2YgUlRDUnRwU2VuZGVyXG4gICAgICAvLyBzaW5jZSB3ZSBzaGltIFJUUFNlbmRlci4gU28gd2UgY2hlY2sgaWYgc2VuZGVyLl9wYyBpcyBzZXQuXG4gICAgICBpZiAoIXNlbmRlci5fcGMpIHtcbiAgICAgICAgdGhyb3cgbmV3IERPTUV4Y2VwdGlvbignQXJndW1lbnQgMSBvZiBSVENQZWVyQ29ubmVjdGlvbi5yZW1vdmVUcmFjayAnICtcbiAgICAgICAgICAgICdkb2VzIG5vdCBpbXBsZW1lbnQgaW50ZXJmYWNlIFJUQ1J0cFNlbmRlci4nLCAnVHlwZUVycm9yJyk7XG4gICAgICB9XG4gICAgICB2YXIgaXNMb2NhbCA9IHNlbmRlci5fcGMgPT09IHBjO1xuICAgICAgaWYgKCFpc0xvY2FsKSB7XG4gICAgICAgIHRocm93IG5ldyBET01FeGNlcHRpb24oJ1NlbmRlciB3YXMgbm90IGNyZWF0ZWQgYnkgdGhpcyBjb25uZWN0aW9uLicsXG4gICAgICAgICAgICAnSW52YWxpZEFjY2Vzc0Vycm9yJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIFNlYXJjaCBmb3IgdGhlIG5hdGl2ZSBzdHJlYW0gdGhlIHNlbmRlcnMgdHJhY2sgYmVsb25ncyB0by5cbiAgICAgIHBjLl9zdHJlYW1zID0gcGMuX3N0cmVhbXMgfHwge307XG4gICAgICB2YXIgc3RyZWFtO1xuICAgICAgT2JqZWN0LmtleXMocGMuX3N0cmVhbXMpLmZvckVhY2goZnVuY3Rpb24oc3RyZWFtaWQpIHtcbiAgICAgICAgdmFyIGhhc1RyYWNrID0gcGMuX3N0cmVhbXNbc3RyZWFtaWRdLmdldFRyYWNrcygpLmZpbmQoZnVuY3Rpb24odHJhY2spIHtcbiAgICAgICAgICByZXR1cm4gc2VuZGVyLnRyYWNrID09PSB0cmFjaztcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChoYXNUcmFjaykge1xuICAgICAgICAgIHN0cmVhbSA9IHBjLl9zdHJlYW1zW3N0cmVhbWlkXTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGlmIChzdHJlYW0pIHtcbiAgICAgICAgaWYgKHN0cmVhbS5nZXRUcmFja3MoKS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAvLyBpZiB0aGlzIGlzIHRoZSBsYXN0IHRyYWNrIG9mIHRoZSBzdHJlYW0sIHJlbW92ZSB0aGUgc3RyZWFtLiBUaGlzXG4gICAgICAgICAgLy8gdGFrZXMgY2FyZSBvZiBhbnkgc2hpbW1lZCBfc2VuZGVycy5cbiAgICAgICAgICBwYy5yZW1vdmVTdHJlYW0ocGMuX3JldmVyc2VTdHJlYW1zW3N0cmVhbS5pZF0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIHJlbHlpbmcgb24gdGhlIHNhbWUgb2RkIGNocm9tZSBiZWhhdmlvdXIgYXMgYWJvdmUuXG4gICAgICAgICAgc3RyZWFtLnJlbW92ZVRyYWNrKHNlbmRlci50cmFjayk7XG4gICAgICAgIH1cbiAgICAgICAgcGMuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ25lZ290aWF0aW9ubmVlZGVkJykpO1xuICAgICAgfVxuICAgIH07XG4gIH0sXG5cbiAgc2hpbVBlZXJDb25uZWN0aW9uOiBmdW5jdGlvbih3aW5kb3cpIHtcbiAgICB2YXIgYnJvd3NlckRldGFpbHMgPSB1dGlscy5kZXRlY3RCcm93c2VyKHdpbmRvdyk7XG5cbiAgICAvLyBUaGUgUlRDUGVlckNvbm5lY3Rpb24gb2JqZWN0LlxuICAgIGlmICghd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uICYmIHdpbmRvdy53ZWJraXRSVENQZWVyQ29ubmVjdGlvbikge1xuICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uID0gZnVuY3Rpb24ocGNDb25maWcsIHBjQ29uc3RyYWludHMpIHtcbiAgICAgICAgLy8gVHJhbnNsYXRlIGljZVRyYW5zcG9ydFBvbGljeSB0byBpY2VUcmFuc3BvcnRzLFxuICAgICAgICAvLyBzZWUgaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC93ZWJydGMvaXNzdWVzL2RldGFpbD9pZD00ODY5XG4gICAgICAgIC8vIHRoaXMgd2FzIGZpeGVkIGluIE01NiBhbG9uZyB3aXRoIHVucHJlZml4aW5nIFJUQ1BlZXJDb25uZWN0aW9uLlxuICAgICAgICBsb2dnaW5nKCdQZWVyQ29ubmVjdGlvbicpO1xuICAgICAgICBpZiAocGNDb25maWcgJiYgcGNDb25maWcuaWNlVHJhbnNwb3J0UG9saWN5KSB7XG4gICAgICAgICAgcGNDb25maWcuaWNlVHJhbnNwb3J0cyA9IHBjQ29uZmlnLmljZVRyYW5zcG9ydFBvbGljeTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBuZXcgd2luZG93LndlYmtpdFJUQ1BlZXJDb25uZWN0aW9uKHBjQ29uZmlnLCBwY0NvbnN0cmFpbnRzKTtcbiAgICAgIH07XG4gICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlID1cbiAgICAgICAgICB3aW5kb3cud2Via2l0UlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlO1xuICAgICAgLy8gd3JhcCBzdGF0aWMgbWV0aG9kcy4gQ3VycmVudGx5IGp1c3QgZ2VuZXJhdGVDZXJ0aWZpY2F0ZS5cbiAgICAgIGlmICh3aW5kb3cud2Via2l0UlRDUGVlckNvbm5lY3Rpb24uZ2VuZXJhdGVDZXJ0aWZpY2F0ZSkge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLCAnZ2VuZXJhdGVDZXJ0aWZpY2F0ZScsIHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy53ZWJraXRSVENQZWVyQ29ubmVjdGlvbi5nZW5lcmF0ZUNlcnRpZmljYXRlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIG1pZ3JhdGUgZnJvbSBub24tc3BlYyBSVENJY2VTZXJ2ZXIudXJsIHRvIFJUQ0ljZVNlcnZlci51cmxzXG4gICAgICB2YXIgT3JpZ1BlZXJDb25uZWN0aW9uID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uO1xuICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uID0gZnVuY3Rpb24ocGNDb25maWcsIHBjQ29uc3RyYWludHMpIHtcbiAgICAgICAgaWYgKHBjQ29uZmlnICYmIHBjQ29uZmlnLmljZVNlcnZlcnMpIHtcbiAgICAgICAgICB2YXIgbmV3SWNlU2VydmVycyA9IFtdO1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGNDb25maWcuaWNlU2VydmVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIHNlcnZlciA9IHBjQ29uZmlnLmljZVNlcnZlcnNbaV07XG4gICAgICAgICAgICBpZiAoIXNlcnZlci5oYXNPd25Qcm9wZXJ0eSgndXJscycpICYmXG4gICAgICAgICAgICAgICAgc2VydmVyLmhhc093blByb3BlcnR5KCd1cmwnKSkge1xuICAgICAgICAgICAgICB1dGlscy5kZXByZWNhdGVkKCdSVENJY2VTZXJ2ZXIudXJsJywgJ1JUQ0ljZVNlcnZlci51cmxzJyk7XG4gICAgICAgICAgICAgIHNlcnZlciA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoc2VydmVyKSk7XG4gICAgICAgICAgICAgIHNlcnZlci51cmxzID0gc2VydmVyLnVybDtcbiAgICAgICAgICAgICAgbmV3SWNlU2VydmVycy5wdXNoKHNlcnZlcik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBuZXdJY2VTZXJ2ZXJzLnB1c2gocGNDb25maWcuaWNlU2VydmVyc1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHBjQ29uZmlnLmljZVNlcnZlcnMgPSBuZXdJY2VTZXJ2ZXJzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgT3JpZ1BlZXJDb25uZWN0aW9uKHBjQ29uZmlnLCBwY0NvbnN0cmFpbnRzKTtcbiAgICAgIH07XG4gICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlID0gT3JpZ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZTtcbiAgICAgIC8vIHdyYXAgc3RhdGljIG1ldGhvZHMuIEN1cnJlbnRseSBqdXN0IGdlbmVyYXRlQ2VydGlmaWNhdGUuXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLCAnZ2VuZXJhdGVDZXJ0aWZpY2F0ZScsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gT3JpZ1BlZXJDb25uZWN0aW9uLmdlbmVyYXRlQ2VydGlmaWNhdGU7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHZhciBvcmlnR2V0U3RhdHMgPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFN0YXRzO1xuICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U3RhdHMgPSBmdW5jdGlvbihzZWxlY3RvcixcbiAgICAgICAgc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrKSB7XG4gICAgICB2YXIgcGMgPSB0aGlzO1xuICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG5cbiAgICAgIC8vIElmIHNlbGVjdG9yIGlzIGEgZnVuY3Rpb24gdGhlbiB3ZSBhcmUgaW4gdGhlIG9sZCBzdHlsZSBzdGF0cyBzbyBqdXN0XG4gICAgICAvLyBwYXNzIGJhY2sgdGhlIG9yaWdpbmFsIGdldFN0YXRzIGZvcm1hdCB0byBhdm9pZCBicmVha2luZyBvbGQgdXNlcnMuXG4gICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgdHlwZW9mIHNlbGVjdG9yID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiBvcmlnR2V0U3RhdHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH1cblxuICAgICAgLy8gV2hlbiBzcGVjLXN0eWxlIGdldFN0YXRzIGlzIHN1cHBvcnRlZCwgcmV0dXJuIHRob3NlIHdoZW4gY2FsbGVkIHdpdGhcbiAgICAgIC8vIGVpdGhlciBubyBhcmd1bWVudHMgb3IgdGhlIHNlbGVjdG9yIGFyZ3VtZW50IGlzIG51bGwuXG4gICAgICBpZiAob3JpZ0dldFN0YXRzLmxlbmd0aCA9PT0gMCAmJiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCB8fFxuICAgICAgICAgIHR5cGVvZiBhcmd1bWVudHNbMF0gIT09ICdmdW5jdGlvbicpKSB7XG4gICAgICAgIHJldHVybiBvcmlnR2V0U3RhdHMuYXBwbHkodGhpcywgW10pO1xuICAgICAgfVxuXG4gICAgICB2YXIgZml4Q2hyb21lU3RhdHNfID0gZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgdmFyIHN0YW5kYXJkUmVwb3J0ID0ge307XG4gICAgICAgIHZhciByZXBvcnRzID0gcmVzcG9uc2UucmVzdWx0KCk7XG4gICAgICAgIHJlcG9ydHMuZm9yRWFjaChmdW5jdGlvbihyZXBvcnQpIHtcbiAgICAgICAgICB2YXIgc3RhbmRhcmRTdGF0cyA9IHtcbiAgICAgICAgICAgIGlkOiByZXBvcnQuaWQsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IHJlcG9ydC50aW1lc3RhbXAsXG4gICAgICAgICAgICB0eXBlOiB7XG4gICAgICAgICAgICAgIGxvY2FsY2FuZGlkYXRlOiAnbG9jYWwtY2FuZGlkYXRlJyxcbiAgICAgICAgICAgICAgcmVtb3RlY2FuZGlkYXRlOiAncmVtb3RlLWNhbmRpZGF0ZSdcbiAgICAgICAgICAgIH1bcmVwb3J0LnR5cGVdIHx8IHJlcG9ydC50eXBlXG4gICAgICAgICAgfTtcbiAgICAgICAgICByZXBvcnQubmFtZXMoKS5mb3JFYWNoKGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgICAgICAgIHN0YW5kYXJkU3RhdHNbbmFtZV0gPSByZXBvcnQuc3RhdChuYW1lKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzdGFuZGFyZFJlcG9ydFtzdGFuZGFyZFN0YXRzLmlkXSA9IHN0YW5kYXJkU3RhdHM7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBzdGFuZGFyZFJlcG9ydDtcbiAgICAgIH07XG5cbiAgICAgIC8vIHNoaW0gZ2V0U3RhdHMgd2l0aCBtYXBsaWtlIHN1cHBvcnRcbiAgICAgIHZhciBtYWtlTWFwU3RhdHMgPSBmdW5jdGlvbihzdGF0cykge1xuICAgICAgICByZXR1cm4gbmV3IE1hcChPYmplY3Qua2V5cyhzdGF0cykubWFwKGZ1bmN0aW9uKGtleSkge1xuICAgICAgICAgIHJldHVybiBba2V5LCBzdGF0c1trZXldXTtcbiAgICAgICAgfSkpO1xuICAgICAgfTtcblxuICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPj0gMikge1xuICAgICAgICB2YXIgc3VjY2Vzc0NhbGxiYWNrV3JhcHBlcl8gPSBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgIGFyZ3NbMV0obWFrZU1hcFN0YXRzKGZpeENocm9tZVN0YXRzXyhyZXNwb25zZSkpKTtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gb3JpZ0dldFN0YXRzLmFwcGx5KHRoaXMsIFtzdWNjZXNzQ2FsbGJhY2tXcmFwcGVyXyxcbiAgICAgICAgICBhcmd1bWVudHNbMF1dKTtcbiAgICAgIH1cblxuICAgICAgLy8gcHJvbWlzZS1zdXBwb3J0XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIG9yaWdHZXRTdGF0cy5hcHBseShwYywgW1xuICAgICAgICAgIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICByZXNvbHZlKG1ha2VNYXBTdGF0cyhmaXhDaHJvbWVTdGF0c18ocmVzcG9uc2UpKSk7XG4gICAgICAgICAgfSwgcmVqZWN0XSk7XG4gICAgICB9KS50aGVuKHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsYmFjayk7XG4gICAgfTtcblxuICAgIC8vIGFkZCBwcm9taXNlIHN1cHBvcnQgLS0gbmF0aXZlbHkgYXZhaWxhYmxlIGluIENocm9tZSA1MVxuICAgIGlmIChicm93c2VyRGV0YWlscy52ZXJzaW9uIDwgNTEpIHtcbiAgICAgIFsnc2V0TG9jYWxEZXNjcmlwdGlvbicsICdzZXRSZW1vdGVEZXNjcmlwdGlvbicsICdhZGRJY2VDYW5kaWRhdGUnXVxuICAgICAgICAgIC5mb3JFYWNoKGZ1bmN0aW9uKG1ldGhvZCkge1xuICAgICAgICAgICAgdmFyIG5hdGl2ZU1ldGhvZCA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbbWV0aG9kXTtcbiAgICAgICAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbbWV0aG9kXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgICAgICAgICAgdmFyIHBjID0gdGhpcztcbiAgICAgICAgICAgICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICBuYXRpdmVNZXRob2QuYXBwbHkocGMsIFthcmdzWzBdLCByZXNvbHZlLCByZWplY3RdKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIGlmIChhcmdzLmxlbmd0aCA8IDIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByZXR1cm4gcHJvbWlzZS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGFyZ3NbMV0uYXBwbHkobnVsbCwgW10pO1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgICAgICBpZiAoYXJncy5sZW5ndGggPj0gMykge1xuICAgICAgICAgICAgICAgICAgYXJnc1syXS5hcHBseShudWxsLCBbZXJyXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gcHJvbWlzZSBzdXBwb3J0IGZvciBjcmVhdGVPZmZlciBhbmQgY3JlYXRlQW5zd2VyLiBBdmFpbGFibGUgKHdpdGhvdXRcbiAgICAvLyBidWdzKSBzaW5jZSBNNTI6IGNyYnVnLzYxOTI4OVxuICAgIGlmIChicm93c2VyRGV0YWlscy52ZXJzaW9uIDwgNTIpIHtcbiAgICAgIFsnY3JlYXRlT2ZmZXInLCAnY3JlYXRlQW5zd2VyJ10uZm9yRWFjaChmdW5jdGlvbihtZXRob2QpIHtcbiAgICAgICAgdmFyIG5hdGl2ZU1ldGhvZCA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbbWV0aG9kXTtcbiAgICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIHBjID0gdGhpcztcbiAgICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDEgfHwgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEgJiZcbiAgICAgICAgICAgICAgdHlwZW9mIGFyZ3VtZW50c1swXSA9PT0gJ29iamVjdCcpKSB7XG4gICAgICAgICAgICB2YXIgb3B0cyA9IGFyZ3VtZW50cy5sZW5ndGggPT09IDEgPyBhcmd1bWVudHNbMF0gOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgIG5hdGl2ZU1ldGhvZC5hcHBseShwYywgW3Jlc29sdmUsIHJlamVjdCwgb3B0c10pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBuYXRpdmVNZXRob2QuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIHNoaW0gaW1wbGljaXQgY3JlYXRpb24gb2YgUlRDU2Vzc2lvbkRlc2NyaXB0aW9uL1JUQ0ljZUNhbmRpZGF0ZVxuICAgIFsnc2V0TG9jYWxEZXNjcmlwdGlvbicsICdzZXRSZW1vdGVEZXNjcmlwdGlvbicsICdhZGRJY2VDYW5kaWRhdGUnXVxuICAgICAgICAuZm9yRWFjaChmdW5jdGlvbihtZXRob2QpIHtcbiAgICAgICAgICB2YXIgbmF0aXZlTWV0aG9kID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVttZXRob2RdO1xuICAgICAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbbWV0aG9kXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgYXJndW1lbnRzWzBdID0gbmV3ICgobWV0aG9kID09PSAnYWRkSWNlQ2FuZGlkYXRlJykgP1xuICAgICAgICAgICAgICAgIHdpbmRvdy5SVENJY2VDYW5kaWRhdGUgOlxuICAgICAgICAgICAgICAgIHdpbmRvdy5SVENTZXNzaW9uRGVzY3JpcHRpb24pKGFyZ3VtZW50c1swXSk7XG4gICAgICAgICAgICByZXR1cm4gbmF0aXZlTWV0aG9kLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgfTtcbiAgICAgICAgfSk7XG5cbiAgICAvLyBzdXBwb3J0IGZvciBhZGRJY2VDYW5kaWRhdGUobnVsbCBvciB1bmRlZmluZWQpXG4gICAgdmFyIG5hdGl2ZUFkZEljZUNhbmRpZGF0ZSA9XG4gICAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkSWNlQ2FuZGlkYXRlO1xuICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkSWNlQ2FuZGlkYXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoIWFyZ3VtZW50c1swXSkge1xuICAgICAgICBpZiAoYXJndW1lbnRzWzFdKSB7XG4gICAgICAgICAgYXJndW1lbnRzWzFdLmFwcGx5KG51bGwpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBuYXRpdmVBZGRJY2VDYW5kaWRhdGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9O1xuICB9XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvd2VicnRjLWFkYXB0ZXIvc3JjL2pzL2Nocm9tZS9jaHJvbWVfc2hpbS5qc1xuLy8gbW9kdWxlIGlkID0gNTdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///57\n")},function(module,exports,__webpack_require__){"use strict";eval("/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n\nvar utils = __webpack_require__(/*! ../utils.js */ 5);\nvar logging = utils.log;\n\n// Expose public methods.\nmodule.exports = function(window) {\n  var browserDetails = utils.detectBrowser(window);\n  var navigator = window && window.navigator;\n\n  var constraintsToChrome_ = function(c) {\n    if (typeof c !== 'object' || c.mandatory || c.optional) {\n      return c;\n    }\n    var cc = {};\n    Object.keys(c).forEach(function(key) {\n      if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n        return;\n      }\n      var r = (typeof c[key] === 'object') ? c[key] : {ideal: c[key]};\n      if (r.exact !== undefined && typeof r.exact === 'number') {\n        r.min = r.max = r.exact;\n      }\n      var oldname_ = function(prefix, name) {\n        if (prefix) {\n          return prefix + name.charAt(0).toUpperCase() + name.slice(1);\n        }\n        return (name === 'deviceId') ? 'sourceId' : name;\n      };\n      if (r.ideal !== undefined) {\n        cc.optional = cc.optional || [];\n        var oc = {};\n        if (typeof r.ideal === 'number') {\n          oc[oldname_('min', key)] = r.ideal;\n          cc.optional.push(oc);\n          oc = {};\n          oc[oldname_('max', key)] = r.ideal;\n          cc.optional.push(oc);\n        } else {\n          oc[oldname_('', key)] = r.ideal;\n          cc.optional.push(oc);\n        }\n      }\n      if (r.exact !== undefined && typeof r.exact !== 'number') {\n        cc.mandatory = cc.mandatory || {};\n        cc.mandatory[oldname_('', key)] = r.exact;\n      } else {\n        ['min', 'max'].forEach(function(mix) {\n          if (r[mix] !== undefined) {\n            cc.mandatory = cc.mandatory || {};\n            cc.mandatory[oldname_(mix, key)] = r[mix];\n          }\n        });\n      }\n    });\n    if (c.advanced) {\n      cc.optional = (cc.optional || []).concat(c.advanced);\n    }\n    return cc;\n  };\n\n  var shimConstraints_ = function(constraints, func) {\n    if (browserDetails.version >= 61) {\n      return func(constraints);\n    }\n    constraints = JSON.parse(JSON.stringify(constraints));\n    if (constraints && typeof constraints.audio === 'object') {\n      var remap = function(obj, a, b) {\n        if (a in obj && !(b in obj)) {\n          obj[b] = obj[a];\n          delete obj[a];\n        }\n      };\n      constraints = JSON.parse(JSON.stringify(constraints));\n      remap(constraints.audio, 'autoGainControl', 'googAutoGainControl');\n      remap(constraints.audio, 'noiseSuppression', 'googNoiseSuppression');\n      constraints.audio = constraintsToChrome_(constraints.audio);\n    }\n    if (constraints && typeof constraints.video === 'object') {\n      // Shim facingMode for mobile & surface pro.\n      var face = constraints.video.facingMode;\n      face = face && ((typeof face === 'object') ? face : {ideal: face});\n      var getSupportedFacingModeLies = browserDetails.version < 66;\n\n      if ((face && (face.exact === 'user' || face.exact === 'environment' ||\n                    face.ideal === 'user' || face.ideal === 'environment')) &&\n          !(navigator.mediaDevices.getSupportedConstraints &&\n            navigator.mediaDevices.getSupportedConstraints().facingMode &&\n            !getSupportedFacingModeLies)) {\n        delete constraints.video.facingMode;\n        var matches;\n        if (face.exact === 'environment' || face.ideal === 'environment') {\n          matches = ['back', 'rear'];\n        } else if (face.exact === 'user' || face.ideal === 'user') {\n          matches = ['front'];\n        }\n        if (matches) {\n          // Look for matches in label, or use last cam for back (typical).\n          return navigator.mediaDevices.enumerateDevices()\n          .then(function(devices) {\n            devices = devices.filter(function(d) {\n              return d.kind === 'videoinput';\n            });\n            var dev = devices.find(function(d) {\n              return matches.some(function(match) {\n                return d.label.toLowerCase().indexOf(match) !== -1;\n              });\n            });\n            if (!dev && devices.length && matches.indexOf('back') !== -1) {\n              dev = devices[devices.length - 1]; // more likely the back cam\n            }\n            if (dev) {\n              constraints.video.deviceId = face.exact ? {exact: dev.deviceId} :\n                                                        {ideal: dev.deviceId};\n            }\n            constraints.video = constraintsToChrome_(constraints.video);\n            logging('chrome: ' + JSON.stringify(constraints));\n            return func(constraints);\n          });\n        }\n      }\n      constraints.video = constraintsToChrome_(constraints.video);\n    }\n    logging('chrome: ' + JSON.stringify(constraints));\n    return func(constraints);\n  };\n\n  var shimError_ = function(e) {\n    return {\n      name: {\n        PermissionDeniedError: 'NotAllowedError',\n        InvalidStateError: 'NotReadableError',\n        DevicesNotFoundError: 'NotFoundError',\n        ConstraintNotSatisfiedError: 'OverconstrainedError',\n        TrackStartError: 'NotReadableError',\n        MediaDeviceFailedDueToShutdown: 'NotReadableError',\n        MediaDeviceKillSwitchOn: 'NotReadableError'\n      }[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraintName,\n      toString: function() {\n        return this.name + (this.message && ': ') + this.message;\n      }\n    };\n  };\n\n  var getUserMedia_ = function(constraints, onSuccess, onError) {\n    shimConstraints_(constraints, function(c) {\n      navigator.webkitGetUserMedia(c, onSuccess, function(e) {\n        if (onError) {\n          onError(shimError_(e));\n        }\n      });\n    });\n  };\n\n  navigator.getUserMedia = getUserMedia_;\n\n  // Returns the result of getUserMedia as a Promise.\n  var getUserMediaPromise_ = function(constraints) {\n    return new Promise(function(resolve, reject) {\n      navigator.getUserMedia(constraints, resolve, reject);\n    });\n  };\n\n  if (!navigator.mediaDevices) {\n    navigator.mediaDevices = {\n      getUserMedia: getUserMediaPromise_,\n      enumerateDevices: function() {\n        return new Promise(function(resolve) {\n          var kinds = {audio: 'audioinput', video: 'videoinput'};\n          return window.MediaStreamTrack.getSources(function(devices) {\n            resolve(devices.map(function(device) {\n              return {label: device.label,\n                kind: kinds[device.kind],\n                deviceId: device.id,\n                groupId: ''};\n            }));\n          });\n        });\n      },\n      getSupportedConstraints: function() {\n        return {\n          deviceId: true, echoCancellation: true, facingMode: true,\n          frameRate: true, height: true, width: true\n        };\n      }\n    };\n  }\n\n  // A shim for getUserMedia method on the mediaDevices object.\n  // TODO(KaptenJansson) remove once implemented in Chrome stable.\n  if (!navigator.mediaDevices.getUserMedia) {\n    navigator.mediaDevices.getUserMedia = function(constraints) {\n      return getUserMediaPromise_(constraints);\n    };\n  } else {\n    // Even though Chrome 45 has navigator.mediaDevices and a getUserMedia\n    // function which returns a Promise, it does not accept spec-style\n    // constraints.\n    var origGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(cs) {\n      return shimConstraints_(cs, function(c) {\n        return origGetUserMedia(c).then(function(stream) {\n          if (c.audio && !stream.getAudioTracks().length ||\n              c.video && !stream.getVideoTracks().length) {\n            stream.getTracks().forEach(function(track) {\n              track.stop();\n            });\n            throw new DOMException('', 'NotFoundError');\n          }\n          return stream;\n        }, function(e) {\n          return Promise.reject(shimError_(e));\n        });\n      });\n    };\n  }\n\n  // Dummy devicechange event methods.\n  // TODO(KaptenJansson) remove once implemented in Chrome stable.\n  if (typeof navigator.mediaDevices.addEventListener === 'undefined') {\n    navigator.mediaDevices.addEventListener = function() {\n      logging('Dummy mediaDevices.addEventListener called.');\n    };\n  }\n  if (typeof navigator.mediaDevices.removeEventListener === 'undefined') {\n    navigator.mediaDevices.removeEventListener = function() {\n      logging('Dummy mediaDevices.removeEventListener called.');\n    };\n  }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTguanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvd2VicnRjLWFkYXB0ZXIvc3JjL2pzL2Nocm9tZS9nZXR1c2VybWVkaWEuanM/YjZmZiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogIENvcHlyaWdodCAoYykgMjAxNiBUaGUgV2ViUlRDIHByb2plY3QgYXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYSBCU0Qtc3R5bGUgbGljZW5zZVxuICogIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhlIHNvdXJjZVxuICogIHRyZWUuXG4gKi9cbiAvKiBlc2xpbnQtZW52IG5vZGUgKi9cbid1c2Ugc3RyaWN0JztcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzLmpzJyk7XG52YXIgbG9nZ2luZyA9IHV0aWxzLmxvZztcblxuLy8gRXhwb3NlIHB1YmxpYyBtZXRob2RzLlxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbih3aW5kb3cpIHtcbiAgdmFyIGJyb3dzZXJEZXRhaWxzID0gdXRpbHMuZGV0ZWN0QnJvd3Nlcih3aW5kb3cpO1xuICB2YXIgbmF2aWdhdG9yID0gd2luZG93ICYmIHdpbmRvdy5uYXZpZ2F0b3I7XG5cbiAgdmFyIGNvbnN0cmFpbnRzVG9DaHJvbWVfID0gZnVuY3Rpb24oYykge1xuICAgIGlmICh0eXBlb2YgYyAhPT0gJ29iamVjdCcgfHwgYy5tYW5kYXRvcnkgfHwgYy5vcHRpb25hbCkge1xuICAgICAgcmV0dXJuIGM7XG4gICAgfVxuICAgIHZhciBjYyA9IHt9O1xuICAgIE9iamVjdC5rZXlzKGMpLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG4gICAgICBpZiAoa2V5ID09PSAncmVxdWlyZScgfHwga2V5ID09PSAnYWR2YW5jZWQnIHx8IGtleSA9PT0gJ21lZGlhU291cmNlJykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB2YXIgciA9ICh0eXBlb2YgY1trZXldID09PSAnb2JqZWN0JykgPyBjW2tleV0gOiB7aWRlYWw6IGNba2V5XX07XG4gICAgICBpZiAoci5leGFjdCAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiByLmV4YWN0ID09PSAnbnVtYmVyJykge1xuICAgICAgICByLm1pbiA9IHIubWF4ID0gci5leGFjdDtcbiAgICAgIH1cbiAgICAgIHZhciBvbGRuYW1lXyA9IGZ1bmN0aW9uKHByZWZpeCwgbmFtZSkge1xuICAgICAgICBpZiAocHJlZml4KSB7XG4gICAgICAgICAgcmV0dXJuIHByZWZpeCArIG5hbWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBuYW1lLnNsaWNlKDEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAobmFtZSA9PT0gJ2RldmljZUlkJykgPyAnc291cmNlSWQnIDogbmFtZTtcbiAgICAgIH07XG4gICAgICBpZiAoci5pZGVhbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNjLm9wdGlvbmFsID0gY2Mub3B0aW9uYWwgfHwgW107XG4gICAgICAgIHZhciBvYyA9IHt9O1xuICAgICAgICBpZiAodHlwZW9mIHIuaWRlYWwgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgb2Nbb2xkbmFtZV8oJ21pbicsIGtleSldID0gci5pZGVhbDtcbiAgICAgICAgICBjYy5vcHRpb25hbC5wdXNoKG9jKTtcbiAgICAgICAgICBvYyA9IHt9O1xuICAgICAgICAgIG9jW29sZG5hbWVfKCdtYXgnLCBrZXkpXSA9IHIuaWRlYWw7XG4gICAgICAgICAgY2Mub3B0aW9uYWwucHVzaChvYyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgb2Nbb2xkbmFtZV8oJycsIGtleSldID0gci5pZGVhbDtcbiAgICAgICAgICBjYy5vcHRpb25hbC5wdXNoKG9jKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHIuZXhhY3QgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2Ygci5leGFjdCAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgY2MubWFuZGF0b3J5ID0gY2MubWFuZGF0b3J5IHx8IHt9O1xuICAgICAgICBjYy5tYW5kYXRvcnlbb2xkbmFtZV8oJycsIGtleSldID0gci5leGFjdDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIFsnbWluJywgJ21heCddLmZvckVhY2goZnVuY3Rpb24obWl4KSB7XG4gICAgICAgICAgaWYgKHJbbWl4XSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjYy5tYW5kYXRvcnkgPSBjYy5tYW5kYXRvcnkgfHwge307XG4gICAgICAgICAgICBjYy5tYW5kYXRvcnlbb2xkbmFtZV8obWl4LCBrZXkpXSA9IHJbbWl4XTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGlmIChjLmFkdmFuY2VkKSB7XG4gICAgICBjYy5vcHRpb25hbCA9IChjYy5vcHRpb25hbCB8fCBbXSkuY29uY2F0KGMuYWR2YW5jZWQpO1xuICAgIH1cbiAgICByZXR1cm4gY2M7XG4gIH07XG5cbiAgdmFyIHNoaW1Db25zdHJhaW50c18gPSBmdW5jdGlvbihjb25zdHJhaW50cywgZnVuYykge1xuICAgIGlmIChicm93c2VyRGV0YWlscy52ZXJzaW9uID49IDYxKSB7XG4gICAgICByZXR1cm4gZnVuYyhjb25zdHJhaW50cyk7XG4gICAgfVxuICAgIGNvbnN0cmFpbnRzID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShjb25zdHJhaW50cykpO1xuICAgIGlmIChjb25zdHJhaW50cyAmJiB0eXBlb2YgY29uc3RyYWludHMuYXVkaW8gPT09ICdvYmplY3QnKSB7XG4gICAgICB2YXIgcmVtYXAgPSBmdW5jdGlvbihvYmosIGEsIGIpIHtcbiAgICAgICAgaWYgKGEgaW4gb2JqICYmICEoYiBpbiBvYmopKSB7XG4gICAgICAgICAgb2JqW2JdID0gb2JqW2FdO1xuICAgICAgICAgIGRlbGV0ZSBvYmpbYV07XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBjb25zdHJhaW50cyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoY29uc3RyYWludHMpKTtcbiAgICAgIHJlbWFwKGNvbnN0cmFpbnRzLmF1ZGlvLCAnYXV0b0dhaW5Db250cm9sJywgJ2dvb2dBdXRvR2FpbkNvbnRyb2wnKTtcbiAgICAgIHJlbWFwKGNvbnN0cmFpbnRzLmF1ZGlvLCAnbm9pc2VTdXBwcmVzc2lvbicsICdnb29nTm9pc2VTdXBwcmVzc2lvbicpO1xuICAgICAgY29uc3RyYWludHMuYXVkaW8gPSBjb25zdHJhaW50c1RvQ2hyb21lXyhjb25zdHJhaW50cy5hdWRpbyk7XG4gICAgfVxuICAgIGlmIChjb25zdHJhaW50cyAmJiB0eXBlb2YgY29uc3RyYWludHMudmlkZW8gPT09ICdvYmplY3QnKSB7XG4gICAgICAvLyBTaGltIGZhY2luZ01vZGUgZm9yIG1vYmlsZSAmIHN1cmZhY2UgcHJvLlxuICAgICAgdmFyIGZhY2UgPSBjb25zdHJhaW50cy52aWRlby5mYWNpbmdNb2RlO1xuICAgICAgZmFjZSA9IGZhY2UgJiYgKCh0eXBlb2YgZmFjZSA9PT0gJ29iamVjdCcpID8gZmFjZSA6IHtpZGVhbDogZmFjZX0pO1xuICAgICAgdmFyIGdldFN1cHBvcnRlZEZhY2luZ01vZGVMaWVzID0gYnJvd3NlckRldGFpbHMudmVyc2lvbiA8IDY2O1xuXG4gICAgICBpZiAoKGZhY2UgJiYgKGZhY2UuZXhhY3QgPT09ICd1c2VyJyB8fCBmYWNlLmV4YWN0ID09PSAnZW52aXJvbm1lbnQnIHx8XG4gICAgICAgICAgICAgICAgICAgIGZhY2UuaWRlYWwgPT09ICd1c2VyJyB8fCBmYWNlLmlkZWFsID09PSAnZW52aXJvbm1lbnQnKSkgJiZcbiAgICAgICAgICAhKG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0U3VwcG9ydGVkQ29uc3RyYWludHMgJiZcbiAgICAgICAgICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0U3VwcG9ydGVkQ29uc3RyYWludHMoKS5mYWNpbmdNb2RlICYmXG4gICAgICAgICAgICAhZ2V0U3VwcG9ydGVkRmFjaW5nTW9kZUxpZXMpKSB7XG4gICAgICAgIGRlbGV0ZSBjb25zdHJhaW50cy52aWRlby5mYWNpbmdNb2RlO1xuICAgICAgICB2YXIgbWF0Y2hlcztcbiAgICAgICAgaWYgKGZhY2UuZXhhY3QgPT09ICdlbnZpcm9ubWVudCcgfHwgZmFjZS5pZGVhbCA9PT0gJ2Vudmlyb25tZW50Jykge1xuICAgICAgICAgIG1hdGNoZXMgPSBbJ2JhY2snLCAncmVhciddO1xuICAgICAgICB9IGVsc2UgaWYgKGZhY2UuZXhhY3QgPT09ICd1c2VyJyB8fCBmYWNlLmlkZWFsID09PSAndXNlcicpIHtcbiAgICAgICAgICBtYXRjaGVzID0gWydmcm9udCddO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtYXRjaGVzKSB7XG4gICAgICAgICAgLy8gTG9vayBmb3IgbWF0Y2hlcyBpbiBsYWJlbCwgb3IgdXNlIGxhc3QgY2FtIGZvciBiYWNrICh0eXBpY2FsKS5cbiAgICAgICAgICByZXR1cm4gbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5lbnVtZXJhdGVEZXZpY2VzKClcbiAgICAgICAgICAudGhlbihmdW5jdGlvbihkZXZpY2VzKSB7XG4gICAgICAgICAgICBkZXZpY2VzID0gZGV2aWNlcy5maWx0ZXIoZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICByZXR1cm4gZC5raW5kID09PSAndmlkZW9pbnB1dCc7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZhciBkZXYgPSBkZXZpY2VzLmZpbmQoZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICByZXR1cm4gbWF0Y2hlcy5zb21lKGZ1bmN0aW9uKG1hdGNoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGQubGFiZWwudG9Mb3dlckNhc2UoKS5pbmRleE9mKG1hdGNoKSAhPT0gLTE7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoIWRldiAmJiBkZXZpY2VzLmxlbmd0aCAmJiBtYXRjaGVzLmluZGV4T2YoJ2JhY2snKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgZGV2ID0gZGV2aWNlc1tkZXZpY2VzLmxlbmd0aCAtIDFdOyAvLyBtb3JlIGxpa2VseSB0aGUgYmFjayBjYW1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkZXYpIHtcbiAgICAgICAgICAgICAgY29uc3RyYWludHMudmlkZW8uZGV2aWNlSWQgPSBmYWNlLmV4YWN0ID8ge2V4YWN0OiBkZXYuZGV2aWNlSWR9IDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2lkZWFsOiBkZXYuZGV2aWNlSWR9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3RyYWludHMudmlkZW8gPSBjb25zdHJhaW50c1RvQ2hyb21lXyhjb25zdHJhaW50cy52aWRlbyk7XG4gICAgICAgICAgICBsb2dnaW5nKCdjaHJvbWU6ICcgKyBKU09OLnN0cmluZ2lmeShjb25zdHJhaW50cykpO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmMoY29uc3RyYWludHMpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb25zdHJhaW50cy52aWRlbyA9IGNvbnN0cmFpbnRzVG9DaHJvbWVfKGNvbnN0cmFpbnRzLnZpZGVvKTtcbiAgICB9XG4gICAgbG9nZ2luZygnY2hyb21lOiAnICsgSlNPTi5zdHJpbmdpZnkoY29uc3RyYWludHMpKTtcbiAgICByZXR1cm4gZnVuYyhjb25zdHJhaW50cyk7XG4gIH07XG5cbiAgdmFyIHNoaW1FcnJvcl8gPSBmdW5jdGlvbihlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IHtcbiAgICAgICAgUGVybWlzc2lvbkRlbmllZEVycm9yOiAnTm90QWxsb3dlZEVycm9yJyxcbiAgICAgICAgSW52YWxpZFN0YXRlRXJyb3I6ICdOb3RSZWFkYWJsZUVycm9yJyxcbiAgICAgICAgRGV2aWNlc05vdEZvdW5kRXJyb3I6ICdOb3RGb3VuZEVycm9yJyxcbiAgICAgICAgQ29uc3RyYWludE5vdFNhdGlzZmllZEVycm9yOiAnT3ZlcmNvbnN0cmFpbmVkRXJyb3InLFxuICAgICAgICBUcmFja1N0YXJ0RXJyb3I6ICdOb3RSZWFkYWJsZUVycm9yJyxcbiAgICAgICAgTWVkaWFEZXZpY2VGYWlsZWREdWVUb1NodXRkb3duOiAnTm90UmVhZGFibGVFcnJvcicsXG4gICAgICAgIE1lZGlhRGV2aWNlS2lsbFN3aXRjaE9uOiAnTm90UmVhZGFibGVFcnJvcidcbiAgICAgIH1bZS5uYW1lXSB8fCBlLm5hbWUsXG4gICAgICBtZXNzYWdlOiBlLm1lc3NhZ2UsXG4gICAgICBjb25zdHJhaW50OiBlLmNvbnN0cmFpbnROYW1lLFxuICAgICAgdG9TdHJpbmc6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5uYW1lICsgKHRoaXMubWVzc2FnZSAmJiAnOiAnKSArIHRoaXMubWVzc2FnZTtcbiAgICAgIH1cbiAgICB9O1xuICB9O1xuXG4gIHZhciBnZXRVc2VyTWVkaWFfID0gZnVuY3Rpb24oY29uc3RyYWludHMsIG9uU3VjY2Vzcywgb25FcnJvcikge1xuICAgIHNoaW1Db25zdHJhaW50c18oY29uc3RyYWludHMsIGZ1bmN0aW9uKGMpIHtcbiAgICAgIG5hdmlnYXRvci53ZWJraXRHZXRVc2VyTWVkaWEoYywgb25TdWNjZXNzLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGlmIChvbkVycm9yKSB7XG4gICAgICAgICAgb25FcnJvcihzaGltRXJyb3JfKGUpKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgbmF2aWdhdG9yLmdldFVzZXJNZWRpYSA9IGdldFVzZXJNZWRpYV87XG5cbiAgLy8gUmV0dXJucyB0aGUgcmVzdWx0IG9mIGdldFVzZXJNZWRpYSBhcyBhIFByb21pc2UuXG4gIHZhciBnZXRVc2VyTWVkaWFQcm9taXNlXyA9IGZ1bmN0aW9uKGNvbnN0cmFpbnRzKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgbmF2aWdhdG9yLmdldFVzZXJNZWRpYShjb25zdHJhaW50cywgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICB9KTtcbiAgfTtcblxuICBpZiAoIW5hdmlnYXRvci5tZWRpYURldmljZXMpIHtcbiAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzID0ge1xuICAgICAgZ2V0VXNlck1lZGlhOiBnZXRVc2VyTWVkaWFQcm9taXNlXyxcbiAgICAgIGVudW1lcmF0ZURldmljZXM6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSkge1xuICAgICAgICAgIHZhciBraW5kcyA9IHthdWRpbzogJ2F1ZGlvaW5wdXQnLCB2aWRlbzogJ3ZpZGVvaW5wdXQnfTtcbiAgICAgICAgICByZXR1cm4gd2luZG93Lk1lZGlhU3RyZWFtVHJhY2suZ2V0U291cmNlcyhmdW5jdGlvbihkZXZpY2VzKSB7XG4gICAgICAgICAgICByZXNvbHZlKGRldmljZXMubWFwKGZ1bmN0aW9uKGRldmljZSkge1xuICAgICAgICAgICAgICByZXR1cm4ge2xhYmVsOiBkZXZpY2UubGFiZWwsXG4gICAgICAgICAgICAgICAga2luZDoga2luZHNbZGV2aWNlLmtpbmRdLFxuICAgICAgICAgICAgICAgIGRldmljZUlkOiBkZXZpY2UuaWQsXG4gICAgICAgICAgICAgICAgZ3JvdXBJZDogJyd9O1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBnZXRTdXBwb3J0ZWRDb25zdHJhaW50czogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgZGV2aWNlSWQ6IHRydWUsIGVjaG9DYW5jZWxsYXRpb246IHRydWUsIGZhY2luZ01vZGU6IHRydWUsXG4gICAgICAgICAgZnJhbWVSYXRlOiB0cnVlLCBoZWlnaHQ6IHRydWUsIHdpZHRoOiB0cnVlXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIC8vIEEgc2hpbSBmb3IgZ2V0VXNlck1lZGlhIG1ldGhvZCBvbiB0aGUgbWVkaWFEZXZpY2VzIG9iamVjdC5cbiAgLy8gVE9ETyhLYXB0ZW5KYW5zc29uKSByZW1vdmUgb25jZSBpbXBsZW1lbnRlZCBpbiBDaHJvbWUgc3RhYmxlLlxuICBpZiAoIW5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKSB7XG4gICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEgPSBmdW5jdGlvbihjb25zdHJhaW50cykge1xuICAgICAgcmV0dXJuIGdldFVzZXJNZWRpYVByb21pc2VfKGNvbnN0cmFpbnRzKTtcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIC8vIEV2ZW4gdGhvdWdoIENocm9tZSA0NSBoYXMgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcyBhbmQgYSBnZXRVc2VyTWVkaWFcbiAgICAvLyBmdW5jdGlvbiB3aGljaCByZXR1cm5zIGEgUHJvbWlzZSwgaXQgZG9lcyBub3QgYWNjZXB0IHNwZWMtc3R5bGVcbiAgICAvLyBjb25zdHJhaW50cy5cbiAgICB2YXIgb3JpZ0dldFVzZXJNZWRpYSA9IG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhLlxuICAgICAgICBiaW5kKG5hdmlnYXRvci5tZWRpYURldmljZXMpO1xuICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhID0gZnVuY3Rpb24oY3MpIHtcbiAgICAgIHJldHVybiBzaGltQ29uc3RyYWludHNfKGNzLCBmdW5jdGlvbihjKSB7XG4gICAgICAgIHJldHVybiBvcmlnR2V0VXNlck1lZGlhKGMpLnRoZW4oZnVuY3Rpb24oc3RyZWFtKSB7XG4gICAgICAgICAgaWYgKGMuYXVkaW8gJiYgIXN0cmVhbS5nZXRBdWRpb1RyYWNrcygpLmxlbmd0aCB8fFxuICAgICAgICAgICAgICBjLnZpZGVvICYmICFzdHJlYW0uZ2V0VmlkZW9UcmFja3MoKS5sZW5ndGgpIHtcbiAgICAgICAgICAgIHN0cmVhbS5nZXRUcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uKHRyYWNrKSB7XG4gICAgICAgICAgICAgIHRyYWNrLnN0b3AoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhyb3cgbmV3IERPTUV4Y2VwdGlvbignJywgJ05vdEZvdW5kRXJyb3InKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHN0cmVhbTtcbiAgICAgICAgfSwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChzaGltRXJyb3JfKGUpKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9O1xuICB9XG5cbiAgLy8gRHVtbXkgZGV2aWNlY2hhbmdlIGV2ZW50IG1ldGhvZHMuXG4gIC8vIFRPRE8oS2FwdGVuSmFuc3NvbikgcmVtb3ZlIG9uY2UgaW1wbGVtZW50ZWQgaW4gQ2hyb21lIHN0YWJsZS5cbiAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmFkZEV2ZW50TGlzdGVuZXIgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24oKSB7XG4gICAgICBsb2dnaW5nKCdEdW1teSBtZWRpYURldmljZXMuYWRkRXZlbnRMaXN0ZW5lciBjYWxsZWQuJyk7XG4gICAgfTtcbiAgfVxuICBpZiAodHlwZW9mIG5hdmlnYXRvci5tZWRpYURldmljZXMucmVtb3ZlRXZlbnRMaXN0ZW5lciA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgIGxvZ2dpbmcoJ0R1bW15IG1lZGlhRGV2aWNlcy5yZW1vdmVFdmVudExpc3RlbmVyIGNhbGxlZC4nKTtcbiAgICB9O1xuICB9XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvd2VicnRjLWFkYXB0ZXIvc3JjL2pzL2Nocm9tZS9nZXR1c2VybWVkaWEuanNcbi8vIG1vZHVsZSBpZCA9IDU4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///58\n")},function(module,exports,__webpack_require__){"use strict";eval("/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n\n\nvar utils = __webpack_require__(/*! ../utils */ 5);\nvar shimRTCPeerConnection = __webpack_require__(/*! rtcpeerconnection-shim */ 60);\n\nmodule.exports = {\n  shimGetUserMedia: __webpack_require__(/*! ./getusermedia */ 61),\n  shimPeerConnection: function(window) {\n    var browserDetails = utils.detectBrowser(window);\n\n    if (window.RTCIceGatherer) {\n      // ORTC defines an RTCIceCandidate object but no constructor.\n      // Not implemented in Edge.\n      if (!window.RTCIceCandidate) {\n        window.RTCIceCandidate = function(args) {\n          return args;\n        };\n      }\n      // ORTC does not have a session description object but\n      // other browsers (i.e. Chrome) that will support both PC and ORTC\n      // in the future might have this defined already.\n      if (!window.RTCSessionDescription) {\n        window.RTCSessionDescription = function(args) {\n          return args;\n        };\n      }\n      // this adds an additional event listener to MediaStrackTrack that signals\n      // when a tracks enabled property was changed. Workaround for a bug in\n      // addStream, see below. No longer required in 15025+\n      if (browserDetails.version < 15025) {\n        var origMSTEnabled = Object.getOwnPropertyDescriptor(\n            window.MediaStreamTrack.prototype, 'enabled');\n        Object.defineProperty(window.MediaStreamTrack.prototype, 'enabled', {\n          set: function(value) {\n            origMSTEnabled.set.call(this, value);\n            var ev = new Event('enabled');\n            ev.enabled = value;\n            this.dispatchEvent(ev);\n          }\n        });\n      }\n    }\n\n    // ORTC defines the DTMF sender a bit different.\n    // https://github.com/w3c/ortc/issues/714\n    if (window.RTCRtpSender && !('dtmf' in window.RTCRtpSender.prototype)) {\n      Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n        get: function() {\n          if (this._dtmf === undefined) {\n            if (this.track.kind === 'audio') {\n              this._dtmf = new window.RTCDtmfSender(this);\n            } else if (this.track.kind === 'video') {\n              this._dtmf = null;\n            }\n          }\n          return this._dtmf;\n        }\n      });\n    }\n\n    window.RTCPeerConnection =\n        shimRTCPeerConnection(window, browserDetails.version);\n  },\n  shimReplaceTrack: function(window) {\n    // ORTC has replaceTrack -- https://github.com/w3c/ortc/issues/614\n    if (window.RTCRtpSender &&\n        !('replaceTrack' in window.RTCRtpSender.prototype)) {\n      window.RTCRtpSender.prototype.replaceTrack =\n          window.RTCRtpSender.prototype.setTrack;\n    }\n  }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTkuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvd2VicnRjLWFkYXB0ZXIvc3JjL2pzL2VkZ2UvZWRnZV9zaGltLmpzP2I3MGQiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqICBDb3B5cmlnaHQgKGMpIDIwMTYgVGhlIFdlYlJUQyBwcm9qZWN0IGF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGEgQlNELXN0eWxlIGxpY2Vuc2VcbiAqICB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoZSBzb3VyY2VcbiAqICB0cmVlLlxuICovXG4gLyogZXNsaW50LWVudiBub2RlICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzJyk7XG52YXIgc2hpbVJUQ1BlZXJDb25uZWN0aW9uID0gcmVxdWlyZSgncnRjcGVlcmNvbm5lY3Rpb24tc2hpbScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgc2hpbUdldFVzZXJNZWRpYTogcmVxdWlyZSgnLi9nZXR1c2VybWVkaWEnKSxcbiAgc2hpbVBlZXJDb25uZWN0aW9uOiBmdW5jdGlvbih3aW5kb3cpIHtcbiAgICB2YXIgYnJvd3NlckRldGFpbHMgPSB1dGlscy5kZXRlY3RCcm93c2VyKHdpbmRvdyk7XG5cbiAgICBpZiAod2luZG93LlJUQ0ljZUdhdGhlcmVyKSB7XG4gICAgICAvLyBPUlRDIGRlZmluZXMgYW4gUlRDSWNlQ2FuZGlkYXRlIG9iamVjdCBidXQgbm8gY29uc3RydWN0b3IuXG4gICAgICAvLyBOb3QgaW1wbGVtZW50ZWQgaW4gRWRnZS5cbiAgICAgIGlmICghd2luZG93LlJUQ0ljZUNhbmRpZGF0ZSkge1xuICAgICAgICB3aW5kb3cuUlRDSWNlQ2FuZGlkYXRlID0gZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgIHJldHVybiBhcmdzO1xuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgLy8gT1JUQyBkb2VzIG5vdCBoYXZlIGEgc2Vzc2lvbiBkZXNjcmlwdGlvbiBvYmplY3QgYnV0XG4gICAgICAvLyBvdGhlciBicm93c2VycyAoaS5lLiBDaHJvbWUpIHRoYXQgd2lsbCBzdXBwb3J0IGJvdGggUEMgYW5kIE9SVENcbiAgICAgIC8vIGluIHRoZSBmdXR1cmUgbWlnaHQgaGF2ZSB0aGlzIGRlZmluZWQgYWxyZWFkeS5cbiAgICAgIGlmICghd2luZG93LlJUQ1Nlc3Npb25EZXNjcmlwdGlvbikge1xuICAgICAgICB3aW5kb3cuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uID0gZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgIHJldHVybiBhcmdzO1xuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgLy8gdGhpcyBhZGRzIGFuIGFkZGl0aW9uYWwgZXZlbnQgbGlzdGVuZXIgdG8gTWVkaWFTdHJhY2tUcmFjayB0aGF0IHNpZ25hbHNcbiAgICAgIC8vIHdoZW4gYSB0cmFja3MgZW5hYmxlZCBwcm9wZXJ0eSB3YXMgY2hhbmdlZC4gV29ya2Fyb3VuZCBmb3IgYSBidWcgaW5cbiAgICAgIC8vIGFkZFN0cmVhbSwgc2VlIGJlbG93LiBObyBsb25nZXIgcmVxdWlyZWQgaW4gMTUwMjUrXG4gICAgICBpZiAoYnJvd3NlckRldGFpbHMudmVyc2lvbiA8IDE1MDI1KSB7XG4gICAgICAgIHZhciBvcmlnTVNURW5hYmxlZCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoXG4gICAgICAgICAgICB3aW5kb3cuTWVkaWFTdHJlYW1UcmFjay5wcm90b3R5cGUsICdlbmFibGVkJyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3cuTWVkaWFTdHJlYW1UcmFjay5wcm90b3R5cGUsICdlbmFibGVkJywge1xuICAgICAgICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgIG9yaWdNU1RFbmFibGVkLnNldC5jYWxsKHRoaXMsIHZhbHVlKTtcbiAgICAgICAgICAgIHZhciBldiA9IG5ldyBFdmVudCgnZW5hYmxlZCcpO1xuICAgICAgICAgICAgZXYuZW5hYmxlZCA9IHZhbHVlO1xuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGV2KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIE9SVEMgZGVmaW5lcyB0aGUgRFRNRiBzZW5kZXIgYSBiaXQgZGlmZmVyZW50LlxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS93M2Mvb3J0Yy9pc3N1ZXMvNzE0XG4gICAgaWYgKHdpbmRvdy5SVENSdHBTZW5kZXIgJiYgISgnZHRtZicgaW4gd2luZG93LlJUQ1J0cFNlbmRlci5wcm90b3R5cGUpKSB7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LlJUQ1J0cFNlbmRlci5wcm90b3R5cGUsICdkdG1mJywge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmICh0aGlzLl9kdG1mID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnRyYWNrLmtpbmQgPT09ICdhdWRpbycpIHtcbiAgICAgICAgICAgICAgdGhpcy5fZHRtZiA9IG5ldyB3aW5kb3cuUlRDRHRtZlNlbmRlcih0aGlzKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy50cmFjay5raW5kID09PSAndmlkZW8nKSB7XG4gICAgICAgICAgICAgIHRoaXMuX2R0bWYgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gdGhpcy5fZHRtZjtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uID1cbiAgICAgICAgc2hpbVJUQ1BlZXJDb25uZWN0aW9uKHdpbmRvdywgYnJvd3NlckRldGFpbHMudmVyc2lvbik7XG4gIH0sXG4gIHNoaW1SZXBsYWNlVHJhY2s6IGZ1bmN0aW9uKHdpbmRvdykge1xuICAgIC8vIE9SVEMgaGFzIHJlcGxhY2VUcmFjayAtLSBodHRwczovL2dpdGh1Yi5jb20vdzNjL29ydGMvaXNzdWVzLzYxNFxuICAgIGlmICh3aW5kb3cuUlRDUnRwU2VuZGVyICYmXG4gICAgICAgICEoJ3JlcGxhY2VUcmFjaycgaW4gd2luZG93LlJUQ1J0cFNlbmRlci5wcm90b3R5cGUpKSB7XG4gICAgICB3aW5kb3cuUlRDUnRwU2VuZGVyLnByb3RvdHlwZS5yZXBsYWNlVHJhY2sgPVxuICAgICAgICAgIHdpbmRvdy5SVENSdHBTZW5kZXIucHJvdG90eXBlLnNldFRyYWNrO1xuICAgIH1cbiAgfVxufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL3dlYnJ0Yy1hZGFwdGVyL3NyYy9qcy9lZGdlL2VkZ2Vfc2hpbS5qc1xuLy8gbW9kdWxlIGlkID0gNTlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///59\n")},function(module,exports,__webpack_require__){"use strict";eval("/*\n *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n\n\nvar SDPUtils = __webpack_require__(/*! sdp */ 24);\n\nfunction writeMediaSection(transceiver, caps, type, stream, dtlsRole) {\n  var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\n\n  // Map ICE parameters (ufrag, pwd) to SDP.\n  sdp += SDPUtils.writeIceParameters(\n      transceiver.iceGatherer.getLocalParameters());\n\n  // Map DTLS parameters to SDP.\n  sdp += SDPUtils.writeDtlsParameters(\n      transceiver.dtlsTransport.getLocalParameters(),\n      type === 'offer' ? 'actpass' : dtlsRole || 'active');\n\n  sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\n\n  if (transceiver.rtpSender && transceiver.rtpReceiver) {\n    sdp += 'a=sendrecv\\r\\n';\n  } else if (transceiver.rtpSender) {\n    sdp += 'a=sendonly\\r\\n';\n  } else if (transceiver.rtpReceiver) {\n    sdp += 'a=recvonly\\r\\n';\n  } else {\n    sdp += 'a=inactive\\r\\n';\n  }\n\n  if (transceiver.rtpSender) {\n    var trackId = transceiver.rtpSender._initialTrackId ||\n        transceiver.rtpSender.track.id;\n    transceiver.rtpSender._initialTrackId = trackId;\n    // spec.\n    var msid = 'msid:' + (stream ? stream.id : '-') + ' ' +\n        trackId + '\\r\\n';\n    sdp += 'a=' + msid;\n    // for Chrome. Legacy should no longer be required.\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n        ' ' + msid;\n\n    // RTX\n    if (transceiver.sendEncodingParameters[0].rtx) {\n      sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n          ' ' + msid;\n      sdp += 'a=ssrc-group:FID ' +\n          transceiver.sendEncodingParameters[0].ssrc + ' ' +\n          transceiver.sendEncodingParameters[0].rtx.ssrc +\n          '\\r\\n';\n    }\n  }\n  // FIXME: this should be written by writeRtpDescription.\n  sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n      ' cname:' + SDPUtils.localCName + '\\r\\n';\n  if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n        ' cname:' + SDPUtils.localCName + '\\r\\n';\n  }\n  return sdp;\n}\n\n// Edge does not like\n// 1) stun: filtered after 14393 unless ?transport=udp is present\n// 2) turn: that does not have all of turn:host:port?transport=udp\n// 3) turn: with ipv6 addresses\n// 4) turn: occurring muliple times\nfunction filterIceServers(iceServers, edgeVersion) {\n  var hasTurn = false;\n  iceServers = JSON.parse(JSON.stringify(iceServers));\n  return iceServers.filter(function(server) {\n    if (server && (server.urls || server.url)) {\n      var urls = server.urls || server.url;\n      if (server.url && !server.urls) {\n        console.warn('RTCIceServer.url is deprecated! Use urls instead.');\n      }\n      var isString = typeof urls === 'string';\n      if (isString) {\n        urls = [urls];\n      }\n      urls = urls.filter(function(url) {\n        var validTurn = url.indexOf('turn:') === 0 &&\n            url.indexOf('transport=udp') !== -1 &&\n            url.indexOf('turn:[') === -1 &&\n            !hasTurn;\n\n        if (validTurn) {\n          hasTurn = true;\n          return true;\n        }\n        return url.indexOf('stun:') === 0 && edgeVersion >= 14393 &&\n            url.indexOf('?transport=udp') === -1;\n      });\n\n      delete server.url;\n      server.urls = isString ? urls[0] : urls;\n      return !!urls.length;\n    }\n  });\n}\n\n// Determines the intersection of local and remote capabilities.\nfunction getCommonCapabilities(localCapabilities, remoteCapabilities) {\n  var commonCapabilities = {\n    codecs: [],\n    headerExtensions: [],\n    fecMechanisms: []\n  };\n\n  var findCodecByPayloadType = function(pt, codecs) {\n    pt = parseInt(pt, 10);\n    for (var i = 0; i < codecs.length; i++) {\n      if (codecs[i].payloadType === pt ||\n          codecs[i].preferredPayloadType === pt) {\n        return codecs[i];\n      }\n    }\n  };\n\n  var rtxCapabilityMatches = function(lRtx, rRtx, lCodecs, rCodecs) {\n    var lCodec = findCodecByPayloadType(lRtx.parameters.apt, lCodecs);\n    var rCodec = findCodecByPayloadType(rRtx.parameters.apt, rCodecs);\n    return lCodec && rCodec &&\n        lCodec.name.toLowerCase() === rCodec.name.toLowerCase();\n  };\n\n  localCapabilities.codecs.forEach(function(lCodec) {\n    for (var i = 0; i < remoteCapabilities.codecs.length; i++) {\n      var rCodec = remoteCapabilities.codecs[i];\n      if (lCodec.name.toLowerCase() === rCodec.name.toLowerCase() &&\n          lCodec.clockRate === rCodec.clockRate) {\n        if (lCodec.name.toLowerCase() === 'rtx' &&\n            lCodec.parameters && rCodec.parameters.apt) {\n          // for RTX we need to find the local rtx that has a apt\n          // which points to the same local codec as the remote one.\n          if (!rtxCapabilityMatches(lCodec, rCodec,\n              localCapabilities.codecs, remoteCapabilities.codecs)) {\n            continue;\n          }\n        }\n        rCodec = JSON.parse(JSON.stringify(rCodec)); // deepcopy\n        // number of channels is the highest common number of channels\n        rCodec.numChannels = Math.min(lCodec.numChannels,\n            rCodec.numChannels);\n        // push rCodec so we reply with offerer payload type\n        commonCapabilities.codecs.push(rCodec);\n\n        // determine common feedback mechanisms\n        rCodec.rtcpFeedback = rCodec.rtcpFeedback.filter(function(fb) {\n          for (var j = 0; j < lCodec.rtcpFeedback.length; j++) {\n            if (lCodec.rtcpFeedback[j].type === fb.type &&\n                lCodec.rtcpFeedback[j].parameter === fb.parameter) {\n              return true;\n            }\n          }\n          return false;\n        });\n        // FIXME: also need to determine .parameters\n        //  see https://github.com/openpeer/ortc/issues/569\n        break;\n      }\n    }\n  });\n\n  localCapabilities.headerExtensions.forEach(function(lHeaderExtension) {\n    for (var i = 0; i < remoteCapabilities.headerExtensions.length;\n         i++) {\n      var rHeaderExtension = remoteCapabilities.headerExtensions[i];\n      if (lHeaderExtension.uri === rHeaderExtension.uri) {\n        commonCapabilities.headerExtensions.push(rHeaderExtension);\n        break;\n      }\n    }\n  });\n\n  // FIXME: fecMechanisms\n  return commonCapabilities;\n}\n\n// is action=setLocalDescription with type allowed in signalingState\nfunction isActionAllowedInSignalingState(action, type, signalingState) {\n  return {\n    offer: {\n      setLocalDescription: ['stable', 'have-local-offer'],\n      setRemoteDescription: ['stable', 'have-remote-offer']\n    },\n    answer: {\n      setLocalDescription: ['have-remote-offer', 'have-local-pranswer'],\n      setRemoteDescription: ['have-local-offer', 'have-remote-pranswer']\n    }\n  }[type][action].indexOf(signalingState) !== -1;\n}\n\nfunction maybeAddCandidate(iceTransport, candidate) {\n  // Edge's internal representation adds some fields therefore\n  // not all field\u0455 are taken into account.\n  var alreadyAdded = iceTransport.getRemoteCandidates()\n      .find(function(remoteCandidate) {\n        return candidate.foundation === remoteCandidate.foundation &&\n            candidate.ip === remoteCandidate.ip &&\n            candidate.port === remoteCandidate.port &&\n            candidate.priority === remoteCandidate.priority &&\n            candidate.protocol === remoteCandidate.protocol &&\n            candidate.type === remoteCandidate.type;\n      });\n  if (!alreadyAdded) {\n    iceTransport.addRemoteCandidate(candidate);\n  }\n  return !alreadyAdded;\n}\n\n\nfunction makeError(name, description) {\n  var e = new Error(description);\n  e.name = name;\n  // legacy error codes from https://heycam.github.io/webidl/#idl-DOMException-error-names\n  e.code = {\n    NotSupportedError: 9,\n    InvalidStateError: 11,\n    InvalidAccessError: 15,\n    TypeError: undefined,\n    OperationError: undefined\n  }[name];\n  return e;\n}\n\nmodule.exports = function(window, edgeVersion) {\n  // https://w3c.github.io/mediacapture-main/#mediastream\n  // Helper function to add the track to the stream and\n  // dispatch the event ourselves.\n  function addTrackToStreamAndFireEvent(track, stream) {\n    stream.addTrack(track);\n    stream.dispatchEvent(new window.MediaStreamTrackEvent('addtrack',\n        {track: track}));\n  }\n\n  function removeTrackFromStreamAndFireEvent(track, stream) {\n    stream.removeTrack(track);\n    stream.dispatchEvent(new window.MediaStreamTrackEvent('removetrack',\n        {track: track}));\n  }\n\n  function fireAddTrack(pc, track, receiver, streams) {\n    var trackEvent = new Event('track');\n    trackEvent.track = track;\n    trackEvent.receiver = receiver;\n    trackEvent.transceiver = {receiver: receiver};\n    trackEvent.streams = streams;\n    window.setTimeout(function() {\n      pc._dispatchEvent('track', trackEvent);\n    });\n  }\n\n  var RTCPeerConnection = function(config) {\n    var pc = this;\n\n    var _eventTarget = document.createDocumentFragment();\n    ['addEventListener', 'removeEventListener', 'dispatchEvent']\n        .forEach(function(method) {\n          pc[method] = _eventTarget[method].bind(_eventTarget);\n        });\n\n    this.canTrickleIceCandidates = null;\n\n    this.needNegotiation = false;\n\n    this.localStreams = [];\n    this.remoteStreams = [];\n\n    this.localDescription = null;\n    this.remoteDescription = null;\n\n    this.signalingState = 'stable';\n    this.iceConnectionState = 'new';\n    this.connectionState = 'new';\n    this.iceGatheringState = 'new';\n\n    config = JSON.parse(JSON.stringify(config || {}));\n\n    this.usingBundle = config.bundlePolicy === 'max-bundle';\n    if (config.rtcpMuxPolicy === 'negotiate') {\n      throw(makeError('NotSupportedError',\n          'rtcpMuxPolicy \\'negotiate\\' is not supported'));\n    } else if (!config.rtcpMuxPolicy) {\n      config.rtcpMuxPolicy = 'require';\n    }\n\n    switch (config.iceTransportPolicy) {\n      case 'all':\n      case 'relay':\n        break;\n      default:\n        config.iceTransportPolicy = 'all';\n        break;\n    }\n\n    switch (config.bundlePolicy) {\n      case 'balanced':\n      case 'max-compat':\n      case 'max-bundle':\n        break;\n      default:\n        config.bundlePolicy = 'balanced';\n        break;\n    }\n\n    config.iceServers = filterIceServers(config.iceServers || [], edgeVersion);\n\n    this._iceGatherers = [];\n    if (config.iceCandidatePoolSize) {\n      for (var i = config.iceCandidatePoolSize; i > 0; i--) {\n        this._iceGatherers.push(new window.RTCIceGatherer({\n          iceServers: config.iceServers,\n          gatherPolicy: config.iceTransportPolicy\n        }));\n      }\n    } else {\n      config.iceCandidatePoolSize = 0;\n    }\n\n    this._config = config;\n\n    // per-track iceGathers, iceTransports, dtlsTransports, rtpSenders, ...\n    // everything that is needed to describe a SDP m-line.\n    this.transceivers = [];\n\n    this._sdpSessionId = SDPUtils.generateSessionId();\n    this._sdpSessionVersion = 0;\n\n    this._dtlsRole = undefined; // role for a=setup to use in answers.\n\n    this._isClosed = false;\n  };\n\n  // set up event handlers on prototype\n  RTCPeerConnection.prototype.onicecandidate = null;\n  RTCPeerConnection.prototype.onaddstream = null;\n  RTCPeerConnection.prototype.ontrack = null;\n  RTCPeerConnection.prototype.onremovestream = null;\n  RTCPeerConnection.prototype.onsignalingstatechange = null;\n  RTCPeerConnection.prototype.oniceconnectionstatechange = null;\n  RTCPeerConnection.prototype.onconnectionstatechange = null;\n  RTCPeerConnection.prototype.onicegatheringstatechange = null;\n  RTCPeerConnection.prototype.onnegotiationneeded = null;\n  RTCPeerConnection.prototype.ondatachannel = null;\n\n  RTCPeerConnection.prototype._dispatchEvent = function(name, event) {\n    if (this._isClosed) {\n      return;\n    }\n    this.dispatchEvent(event);\n    if (typeof this['on' + name] === 'function') {\n      this['on' + name](event);\n    }\n  };\n\n  RTCPeerConnection.prototype._emitGatheringStateChange = function() {\n    var event = new Event('icegatheringstatechange');\n    this._dispatchEvent('icegatheringstatechange', event);\n  };\n\n  RTCPeerConnection.prototype.getConfiguration = function() {\n    return this._config;\n  };\n\n  RTCPeerConnection.prototype.getLocalStreams = function() {\n    return this.localStreams;\n  };\n\n  RTCPeerConnection.prototype.getRemoteStreams = function() {\n    return this.remoteStreams;\n  };\n\n  // internal helper to create a transceiver object.\n  // (which is not yet the same as the WebRTC 1.0 transceiver)\n  RTCPeerConnection.prototype._createTransceiver = function(kind, doNotAdd) {\n    var hasBundleTransport = this.transceivers.length > 0;\n    var transceiver = {\n      track: null,\n      iceGatherer: null,\n      iceTransport: null,\n      dtlsTransport: null,\n      localCapabilities: null,\n      remoteCapabilities: null,\n      rtpSender: null,\n      rtpReceiver: null,\n      kind: kind,\n      mid: null,\n      sendEncodingParameters: null,\n      recvEncodingParameters: null,\n      stream: null,\n      associatedRemoteMediaStreams: [],\n      wantReceive: true\n    };\n    if (this.usingBundle && hasBundleTransport) {\n      transceiver.iceTransport = this.transceivers[0].iceTransport;\n      transceiver.dtlsTransport = this.transceivers[0].dtlsTransport;\n    } else {\n      var transports = this._createIceAndDtlsTransports();\n      transceiver.iceTransport = transports.iceTransport;\n      transceiver.dtlsTransport = transports.dtlsTransport;\n    }\n    if (!doNotAdd) {\n      this.transceivers.push(transceiver);\n    }\n    return transceiver;\n  };\n\n  RTCPeerConnection.prototype.addTrack = function(track, stream) {\n    if (this._isClosed) {\n      throw makeError('InvalidStateError',\n          'Attempted to call addTrack on a closed peerconnection.');\n    }\n\n    var alreadyExists = this.transceivers.find(function(s) {\n      return s.track === track;\n    });\n\n    if (alreadyExists) {\n      throw makeError('InvalidAccessError', 'Track already exists.');\n    }\n\n    var transceiver;\n    for (var i = 0; i < this.transceivers.length; i++) {\n      if (!this.transceivers[i].track &&\n          this.transceivers[i].kind === track.kind) {\n        transceiver = this.transceivers[i];\n      }\n    }\n    if (!transceiver) {\n      transceiver = this._createTransceiver(track.kind);\n    }\n\n    this._maybeFireNegotiationNeeded();\n\n    if (this.localStreams.indexOf(stream) === -1) {\n      this.localStreams.push(stream);\n    }\n\n    transceiver.track = track;\n    transceiver.stream = stream;\n    transceiver.rtpSender = new window.RTCRtpSender(track,\n        transceiver.dtlsTransport);\n    return transceiver.rtpSender;\n  };\n\n  RTCPeerConnection.prototype.addStream = function(stream) {\n    var pc = this;\n    if (edgeVersion >= 15025) {\n      stream.getTracks().forEach(function(track) {\n        pc.addTrack(track, stream);\n      });\n    } else {\n      // Clone is necessary for local demos mostly, attaching directly\n      // to two different senders does not work (build 10547).\n      // Fixed in 15025 (or earlier)\n      var clonedStream = stream.clone();\n      stream.getTracks().forEach(function(track, idx) {\n        var clonedTrack = clonedStream.getTracks()[idx];\n        track.addEventListener('enabled', function(event) {\n          clonedTrack.enabled = event.enabled;\n        });\n      });\n      clonedStream.getTracks().forEach(function(track) {\n        pc.addTrack(track, clonedStream);\n      });\n    }\n  };\n\n  RTCPeerConnection.prototype.removeTrack = function(sender) {\n    if (this._isClosed) {\n      throw makeError('InvalidStateError',\n          'Attempted to call removeTrack on a closed peerconnection.');\n    }\n\n    if (!(sender instanceof window.RTCRtpSender)) {\n      throw new TypeError('Argument 1 of RTCPeerConnection.removeTrack ' +\n          'does not implement interface RTCRtpSender.');\n    }\n\n    var transceiver = this.transceivers.find(function(t) {\n      return t.rtpSender === sender;\n    });\n\n    if (!transceiver) {\n      throw makeError('InvalidAccessError',\n          'Sender was not created by this connection.');\n    }\n    var stream = transceiver.stream;\n\n    transceiver.rtpSender.stop();\n    transceiver.rtpSender = null;\n    transceiver.track = null;\n    transceiver.stream = null;\n\n    // remove the stream from the set of local streams\n    var localStreams = this.transceivers.map(function(t) {\n      return t.stream;\n    });\n    if (localStreams.indexOf(stream) === -1 &&\n        this.localStreams.indexOf(stream) > -1) {\n      this.localStreams.splice(this.localStreams.indexOf(stream), 1);\n    }\n\n    this._maybeFireNegotiationNeeded();\n  };\n\n  RTCPeerConnection.prototype.removeStream = function(stream) {\n    var pc = this;\n    stream.getTracks().forEach(function(track) {\n      var sender = pc.getSenders().find(function(s) {\n        return s.track === track;\n      });\n      if (sender) {\n        pc.removeTrack(sender);\n      }\n    });\n  };\n\n  RTCPeerConnection.prototype.getSenders = function() {\n    return this.transceivers.filter(function(transceiver) {\n      return !!transceiver.rtpSender;\n    })\n    .map(function(transceiver) {\n      return transceiver.rtpSender;\n    });\n  };\n\n  RTCPeerConnection.prototype.getReceivers = function() {\n    return this.transceivers.filter(function(transceiver) {\n      return !!transceiver.rtpReceiver;\n    })\n    .map(function(transceiver) {\n      return transceiver.rtpReceiver;\n    });\n  };\n\n\n  RTCPeerConnection.prototype._createIceGatherer = function(sdpMLineIndex,\n      usingBundle) {\n    var pc = this;\n    if (usingBundle && sdpMLineIndex > 0) {\n      return this.transceivers[0].iceGatherer;\n    } else if (this._iceGatherers.length) {\n      return this._iceGatherers.shift();\n    }\n    var iceGatherer = new window.RTCIceGatherer({\n      iceServers: this._config.iceServers,\n      gatherPolicy: this._config.iceTransportPolicy\n    });\n    Object.defineProperty(iceGatherer, 'state',\n        {value: 'new', writable: true}\n    );\n\n    this.transceivers[sdpMLineIndex].bufferedCandidateEvents = [];\n    this.transceivers[sdpMLineIndex].bufferCandidates = function(event) {\n      var end = !event.candidate || Object.keys(event.candidate).length === 0;\n      // polyfill since RTCIceGatherer.state is not implemented in\n      // Edge 10547 yet.\n      iceGatherer.state = end ? 'completed' : 'gathering';\n      if (pc.transceivers[sdpMLineIndex].bufferedCandidateEvents !== null) {\n        pc.transceivers[sdpMLineIndex].bufferedCandidateEvents.push(event);\n      }\n    };\n    iceGatherer.addEventListener('localcandidate',\n      this.transceivers[sdpMLineIndex].bufferCandidates);\n    return iceGatherer;\n  };\n\n  // start gathering from an RTCIceGatherer.\n  RTCPeerConnection.prototype._gather = function(mid, sdpMLineIndex) {\n    var pc = this;\n    var iceGatherer = this.transceivers[sdpMLineIndex].iceGatherer;\n    if (iceGatherer.onlocalcandidate) {\n      return;\n    }\n    var bufferedCandidateEvents =\n      this.transceivers[sdpMLineIndex].bufferedCandidateEvents;\n    this.transceivers[sdpMLineIndex].bufferedCandidateEvents = null;\n    iceGatherer.removeEventListener('localcandidate',\n      this.transceivers[sdpMLineIndex].bufferCandidates);\n    iceGatherer.onlocalcandidate = function(evt) {\n      if (pc.usingBundle && sdpMLineIndex > 0) {\n        // if we know that we use bundle we can drop candidates with\n        // \u0455dpMLineIndex > 0. If we don't do this then our state gets\n        // confused since we dispose the extra ice gatherer.\n        return;\n      }\n      var event = new Event('icecandidate');\n      event.candidate = {sdpMid: mid, sdpMLineIndex: sdpMLineIndex};\n\n      var cand = evt.candidate;\n      // Edge emits an empty object for RTCIceCandidateComplete\u2025\n      var end = !cand || Object.keys(cand).length === 0;\n      if (end) {\n        // polyfill since RTCIceGatherer.state is not implemented in\n        // Edge 10547 yet.\n        if (iceGatherer.state === 'new' || iceGatherer.state === 'gathering') {\n          iceGatherer.state = 'completed';\n        }\n      } else {\n        if (iceGatherer.state === 'new') {\n          iceGatherer.state = 'gathering';\n        }\n        // RTCIceCandidate doesn't have a component, needs to be added\n        cand.component = 1;\n        var serializedCandidate = SDPUtils.writeCandidate(cand);\n        event.candidate = Object.assign(event.candidate,\n            SDPUtils.parseCandidate(serializedCandidate));\n        event.candidate.candidate = serializedCandidate;\n      }\n\n      // update local description.\n      var sections = SDPUtils.getMediaSections(pc.localDescription.sdp);\n      if (!end) {\n        sections[event.candidate.sdpMLineIndex] +=\n            'a=' + event.candidate.candidate + '\\r\\n';\n      } else {\n        sections[event.candidate.sdpMLineIndex] +=\n            'a=end-of-candidates\\r\\n';\n      }\n      pc.localDescription.sdp =\n          SDPUtils.getDescription(pc.localDescription.sdp) +\n          sections.join('');\n      var complete = pc.transceivers.every(function(transceiver) {\n        return transceiver.iceGatherer &&\n            transceiver.iceGatherer.state === 'completed';\n      });\n\n      if (pc.iceGatheringState !== 'gathering') {\n        pc.iceGatheringState = 'gathering';\n        pc._emitGatheringStateChange();\n      }\n\n      // Emit candidate. Also emit null candidate when all gatherers are\n      // complete.\n      if (!end) {\n        pc._dispatchEvent('icecandidate', event);\n      }\n      if (complete) {\n        pc._dispatchEvent('icecandidate', new Event('icecandidate'));\n        pc.iceGatheringState = 'complete';\n        pc._emitGatheringStateChange();\n      }\n    };\n\n    // emit already gathered candidates.\n    window.setTimeout(function() {\n      bufferedCandidateEvents.forEach(function(e) {\n        iceGatherer.onlocalcandidate(e);\n      });\n    }, 0);\n  };\n\n  // Create ICE transport and DTLS transport.\n  RTCPeerConnection.prototype._createIceAndDtlsTransports = function() {\n    var pc = this;\n    var iceTransport = new window.RTCIceTransport(null);\n    iceTransport.onicestatechange = function() {\n      pc._updateIceConnectionState();\n      pc._updateConnectionState();\n    };\n\n    var dtlsTransport = new window.RTCDtlsTransport(iceTransport);\n    dtlsTransport.ondtlsstatechange = function() {\n      pc._updateConnectionState();\n    };\n    dtlsTransport.onerror = function() {\n      // onerror does not set state to failed by itself.\n      Object.defineProperty(dtlsTransport, 'state',\n          {value: 'failed', writable: true});\n      pc._updateConnectionState();\n    };\n\n    return {\n      iceTransport: iceTransport,\n      dtlsTransport: dtlsTransport\n    };\n  };\n\n  // Destroy ICE gatherer, ICE transport and DTLS transport.\n  // Without triggering the callbacks.\n  RTCPeerConnection.prototype._disposeIceAndDtlsTransports = function(\n      sdpMLineIndex) {\n    var iceGatherer = this.transceivers[sdpMLineIndex].iceGatherer;\n    if (iceGatherer) {\n      delete iceGatherer.onlocalcandidate;\n      delete this.transceivers[sdpMLineIndex].iceGatherer;\n    }\n    var iceTransport = this.transceivers[sdpMLineIndex].iceTransport;\n    if (iceTransport) {\n      delete iceTransport.onicestatechange;\n      delete this.transceivers[sdpMLineIndex].iceTransport;\n    }\n    var dtlsTransport = this.transceivers[sdpMLineIndex].dtlsTransport;\n    if (dtlsTransport) {\n      delete dtlsTransport.ondtlsstatechange;\n      delete dtlsTransport.onerror;\n      delete this.transceivers[sdpMLineIndex].dtlsTransport;\n    }\n  };\n\n  // Start the RTP Sender and Receiver for a transceiver.\n  RTCPeerConnection.prototype._transceive = function(transceiver,\n      send, recv) {\n    var params = getCommonCapabilities(transceiver.localCapabilities,\n        transceiver.remoteCapabilities);\n    if (send && transceiver.rtpSender) {\n      params.encodings = transceiver.sendEncodingParameters;\n      params.rtcp = {\n        cname: SDPUtils.localCName,\n        compound: transceiver.rtcpParameters.compound\n      };\n      if (transceiver.recvEncodingParameters.length) {\n        params.rtcp.ssrc = transceiver.recvEncodingParameters[0].ssrc;\n      }\n      transceiver.rtpSender.send(params);\n    }\n    if (recv && transceiver.rtpReceiver && params.codecs.length > 0) {\n      // remove RTX field in Edge 14942\n      if (transceiver.kind === 'video'\n          && transceiver.recvEncodingParameters\n          && edgeVersion < 15019) {\n        transceiver.recvEncodingParameters.forEach(function(p) {\n          delete p.rtx;\n        });\n      }\n      if (transceiver.recvEncodingParameters.length) {\n        params.encodings = transceiver.recvEncodingParameters;\n      } else {\n        params.encodings = [{}];\n      }\n      params.rtcp = {\n        compound: transceiver.rtcpParameters.compound\n      };\n      if (transceiver.rtcpParameters.cname) {\n        params.rtcp.cname = transceiver.rtcpParameters.cname;\n      }\n      if (transceiver.sendEncodingParameters.length) {\n        params.rtcp.ssrc = transceiver.sendEncodingParameters[0].ssrc;\n      }\n      transceiver.rtpReceiver.receive(params);\n    }\n  };\n\n  RTCPeerConnection.prototype.setLocalDescription = function(description) {\n    var pc = this;\n\n    // Note: pranswer is not supported.\n    if (['offer', 'answer'].indexOf(description.type) === -1) {\n      return Promise.reject(makeError('TypeError',\n          'Unsupported type \"' + description.type + '\"'));\n    }\n\n    if (!isActionAllowedInSignalingState('setLocalDescription',\n        description.type, pc.signalingState) || pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not set local ' + description.type +\n          ' in state ' + pc.signalingState));\n    }\n\n    var sections;\n    var sessionpart;\n    if (description.type === 'offer') {\n      // VERY limited support for SDP munging. Limited to:\n      // * changing the order of codecs\n      sections = SDPUtils.splitSections(description.sdp);\n      sessionpart = sections.shift();\n      sections.forEach(function(mediaSection, sdpMLineIndex) {\n        var caps = SDPUtils.parseRtpParameters(mediaSection);\n        pc.transceivers[sdpMLineIndex].localCapabilities = caps;\n      });\n\n      pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n        pc._gather(transceiver.mid, sdpMLineIndex);\n      });\n    } else if (description.type === 'answer') {\n      sections = SDPUtils.splitSections(pc.remoteDescription.sdp);\n      sessionpart = sections.shift();\n      var isIceLite = SDPUtils.matchPrefix(sessionpart,\n          'a=ice-lite').length > 0;\n      sections.forEach(function(mediaSection, sdpMLineIndex) {\n        var transceiver = pc.transceivers[sdpMLineIndex];\n        var iceGatherer = transceiver.iceGatherer;\n        var iceTransport = transceiver.iceTransport;\n        var dtlsTransport = transceiver.dtlsTransport;\n        var localCapabilities = transceiver.localCapabilities;\n        var remoteCapabilities = transceiver.remoteCapabilities;\n\n        // treat bundle-only as not-rejected.\n        var rejected = SDPUtils.isRejected(mediaSection) &&\n            SDPUtils.matchPrefix(mediaSection, 'a=bundle-only').length === 0;\n\n        if (!rejected && !transceiver.rejected) {\n          var remoteIceParameters = SDPUtils.getIceParameters(\n              mediaSection, sessionpart);\n          var remoteDtlsParameters = SDPUtils.getDtlsParameters(\n              mediaSection, sessionpart);\n          if (isIceLite) {\n            remoteDtlsParameters.role = 'server';\n          }\n\n          if (!pc.usingBundle || sdpMLineIndex === 0) {\n            pc._gather(transceiver.mid, sdpMLineIndex);\n            if (iceTransport.state === 'new') {\n              iceTransport.start(iceGatherer, remoteIceParameters,\n                  isIceLite ? 'controlling' : 'controlled');\n            }\n            if (dtlsTransport.state === 'new') {\n              dtlsTransport.start(remoteDtlsParameters);\n            }\n          }\n\n          // Calculate intersection of capabilities.\n          var params = getCommonCapabilities(localCapabilities,\n              remoteCapabilities);\n\n          // Start the RTCRtpSender. The RTCRtpReceiver for this\n          // transceiver has already been started in setRemoteDescription.\n          pc._transceive(transceiver,\n              params.codecs.length > 0,\n              false);\n        }\n      });\n    }\n\n    pc.localDescription = {\n      type: description.type,\n      sdp: description.sdp\n    };\n    if (description.type === 'offer') {\n      pc._updateSignalingState('have-local-offer');\n    } else {\n      pc._updateSignalingState('stable');\n    }\n\n    return Promise.resolve();\n  };\n\n  RTCPeerConnection.prototype.setRemoteDescription = function(description) {\n    var pc = this;\n\n    // Note: pranswer is not supported.\n    if (['offer', 'answer'].indexOf(description.type) === -1) {\n      return Promise.reject(makeError('TypeError',\n          'Unsupported type \"' + description.type + '\"'));\n    }\n\n    if (!isActionAllowedInSignalingState('setRemoteDescription',\n        description.type, pc.signalingState) || pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not set remote ' + description.type +\n          ' in state ' + pc.signalingState));\n    }\n\n    var streams = {};\n    pc.remoteStreams.forEach(function(stream) {\n      streams[stream.id] = stream;\n    });\n    var receiverList = [];\n    var sections = SDPUtils.splitSections(description.sdp);\n    var sessionpart = sections.shift();\n    var isIceLite = SDPUtils.matchPrefix(sessionpart,\n        'a=ice-lite').length > 0;\n    var usingBundle = SDPUtils.matchPrefix(sessionpart,\n        'a=group:BUNDLE ').length > 0;\n    pc.usingBundle = usingBundle;\n    var iceOptions = SDPUtils.matchPrefix(sessionpart,\n        'a=ice-options:')[0];\n    if (iceOptions) {\n      pc.canTrickleIceCandidates = iceOptions.substr(14).split(' ')\n          .indexOf('trickle') >= 0;\n    } else {\n      pc.canTrickleIceCandidates = false;\n    }\n\n    sections.forEach(function(mediaSection, sdpMLineIndex) {\n      var lines = SDPUtils.splitLines(mediaSection);\n      var kind = SDPUtils.getKind(mediaSection);\n      // treat bundle-only as not-rejected.\n      var rejected = SDPUtils.isRejected(mediaSection) &&\n          SDPUtils.matchPrefix(mediaSection, 'a=bundle-only').length === 0;\n      var protocol = lines[0].substr(2).split(' ')[2];\n\n      var direction = SDPUtils.getDirection(mediaSection, sessionpart);\n      var remoteMsid = SDPUtils.parseMsid(mediaSection);\n\n      var mid = SDPUtils.getMid(mediaSection) || SDPUtils.generateIdentifier();\n\n      // Reject datachannels which are not implemented yet.\n      if ((kind === 'application' && protocol === 'DTLS/SCTP') || rejected) {\n        // TODO: this is dangerous in the case where a non-rejected m-line\n        //     becomes rejected.\n        pc.transceivers[sdpMLineIndex] = {\n          mid: mid,\n          kind: kind,\n          rejected: true\n        };\n        return;\n      }\n\n      if (!rejected && pc.transceivers[sdpMLineIndex] &&\n          pc.transceivers[sdpMLineIndex].rejected) {\n        // recycle a rejected transceiver.\n        pc.transceivers[sdpMLineIndex] = pc._createTransceiver(kind, true);\n      }\n\n      var transceiver;\n      var iceGatherer;\n      var iceTransport;\n      var dtlsTransport;\n      var rtpReceiver;\n      var sendEncodingParameters;\n      var recvEncodingParameters;\n      var localCapabilities;\n\n      var track;\n      // FIXME: ensure the mediaSection has rtcp-mux set.\n      var remoteCapabilities = SDPUtils.parseRtpParameters(mediaSection);\n      var remoteIceParameters;\n      var remoteDtlsParameters;\n      if (!rejected) {\n        remoteIceParameters = SDPUtils.getIceParameters(mediaSection,\n            sessionpart);\n        remoteDtlsParameters = SDPUtils.getDtlsParameters(mediaSection,\n            sessionpart);\n        remoteDtlsParameters.role = 'client';\n      }\n      recvEncodingParameters =\n          SDPUtils.parseRtpEncodingParameters(mediaSection);\n\n      var rtcpParameters = SDPUtils.parseRtcpParameters(mediaSection);\n\n      var isComplete = SDPUtils.matchPrefix(mediaSection,\n          'a=end-of-candidates', sessionpart).length > 0;\n      var cands = SDPUtils.matchPrefix(mediaSection, 'a=candidate:')\n          .map(function(cand) {\n            return SDPUtils.parseCandidate(cand);\n          })\n          .filter(function(cand) {\n            return cand.component === 1;\n          });\n\n      // Check if we can use BUNDLE and dispose transports.\n      if ((description.type === 'offer' || description.type === 'answer') &&\n          !rejected && usingBundle && sdpMLineIndex > 0 &&\n          pc.transceivers[sdpMLineIndex]) {\n        pc._disposeIceAndDtlsTransports(sdpMLineIndex);\n        pc.transceivers[sdpMLineIndex].iceGatherer =\n            pc.transceivers[0].iceGatherer;\n        pc.transceivers[sdpMLineIndex].iceTransport =\n            pc.transceivers[0].iceTransport;\n        pc.transceivers[sdpMLineIndex].dtlsTransport =\n            pc.transceivers[0].dtlsTransport;\n        if (pc.transceivers[sdpMLineIndex].rtpSender) {\n          pc.transceivers[sdpMLineIndex].rtpSender.setTransport(\n              pc.transceivers[0].dtlsTransport);\n        }\n        if (pc.transceivers[sdpMLineIndex].rtpReceiver) {\n          pc.transceivers[sdpMLineIndex].rtpReceiver.setTransport(\n              pc.transceivers[0].dtlsTransport);\n        }\n      }\n      if (description.type === 'offer' && !rejected) {\n        transceiver = pc.transceivers[sdpMLineIndex] ||\n            pc._createTransceiver(kind);\n        transceiver.mid = mid;\n\n        if (!transceiver.iceGatherer) {\n          transceiver.iceGatherer = pc._createIceGatherer(sdpMLineIndex,\n              usingBundle);\n        }\n\n        if (cands.length && transceiver.iceTransport.state === 'new') {\n          if (isComplete && (!usingBundle || sdpMLineIndex === 0)) {\n            transceiver.iceTransport.setRemoteCandidates(cands);\n          } else {\n            cands.forEach(function(candidate) {\n              maybeAddCandidate(transceiver.iceTransport, candidate);\n            });\n          }\n        }\n\n        localCapabilities = window.RTCRtpReceiver.getCapabilities(kind);\n\n        // filter RTX until additional stuff needed for RTX is implemented\n        // in adapter.js\n        if (edgeVersion < 15019) {\n          localCapabilities.codecs = localCapabilities.codecs.filter(\n              function(codec) {\n                return codec.name !== 'rtx';\n              });\n        }\n\n        sendEncodingParameters = transceiver.sendEncodingParameters || [{\n          ssrc: (2 * sdpMLineIndex + 2) * 1001\n        }];\n\n        // TODO: rewrite to use http://w3c.github.io/webrtc-pc/#set-associated-remote-streams\n        var isNewTrack = false;\n        if (direction === 'sendrecv' || direction === 'sendonly') {\n          isNewTrack = !transceiver.rtpReceiver;\n          rtpReceiver = transceiver.rtpReceiver ||\n              new window.RTCRtpReceiver(transceiver.dtlsTransport, kind);\n\n          if (isNewTrack) {\n            var stream;\n            track = rtpReceiver.track;\n            // FIXME: does not work with Plan B.\n            if (remoteMsid && remoteMsid.stream === '-') {\n              // no-op. a stream id of '-' means: no associated stream.\n            } else if (remoteMsid) {\n              if (!streams[remoteMsid.stream]) {\n                streams[remoteMsid.stream] = new window.MediaStream();\n                Object.defineProperty(streams[remoteMsid.stream], 'id', {\n                  get: function() {\n                    return remoteMsid.stream;\n                  }\n                });\n              }\n              Object.defineProperty(track, 'id', {\n                get: function() {\n                  return remoteMsid.track;\n                }\n              });\n              stream = streams[remoteMsid.stream];\n            } else {\n              if (!streams.default) {\n                streams.default = new window.MediaStream();\n              }\n              stream = streams.default;\n            }\n            if (stream) {\n              addTrackToStreamAndFireEvent(track, stream);\n              transceiver.associatedRemoteMediaStreams.push(stream);\n            }\n            receiverList.push([track, rtpReceiver, stream]);\n          }\n        } else if (transceiver.rtpReceiver && transceiver.rtpReceiver.track) {\n          transceiver.associatedRemoteMediaStreams.forEach(function(s) {\n            var nativeTrack = s.getTracks().find(function(t) {\n              return t.id === transceiver.rtpReceiver.track.id;\n            });\n            if (nativeTrack) {\n              removeTrackFromStreamAndFireEvent(nativeTrack, s);\n            }\n          });\n          transceiver.associatedRemoteMediaStreams = [];\n        }\n\n        transceiver.localCapabilities = localCapabilities;\n        transceiver.remoteCapabilities = remoteCapabilities;\n        transceiver.rtpReceiver = rtpReceiver;\n        transceiver.rtcpParameters = rtcpParameters;\n        transceiver.sendEncodingParameters = sendEncodingParameters;\n        transceiver.recvEncodingParameters = recvEncodingParameters;\n\n        // Start the RTCRtpReceiver now. The RTPSender is started in\n        // setLocalDescription.\n        pc._transceive(pc.transceivers[sdpMLineIndex],\n            false,\n            isNewTrack);\n      } else if (description.type === 'answer' && !rejected) {\n        transceiver = pc.transceivers[sdpMLineIndex];\n        iceGatherer = transceiver.iceGatherer;\n        iceTransport = transceiver.iceTransport;\n        dtlsTransport = transceiver.dtlsTransport;\n        rtpReceiver = transceiver.rtpReceiver;\n        sendEncodingParameters = transceiver.sendEncodingParameters;\n        localCapabilities = transceiver.localCapabilities;\n\n        pc.transceivers[sdpMLineIndex].recvEncodingParameters =\n            recvEncodingParameters;\n        pc.transceivers[sdpMLineIndex].remoteCapabilities =\n            remoteCapabilities;\n        pc.transceivers[sdpMLineIndex].rtcpParameters = rtcpParameters;\n\n        if (cands.length && iceTransport.state === 'new') {\n          if ((isIceLite || isComplete) &&\n              (!usingBundle || sdpMLineIndex === 0)) {\n            iceTransport.setRemoteCandidates(cands);\n          } else {\n            cands.forEach(function(candidate) {\n              maybeAddCandidate(transceiver.iceTransport, candidate);\n            });\n          }\n        }\n\n        if (!usingBundle || sdpMLineIndex === 0) {\n          if (iceTransport.state === 'new') {\n            iceTransport.start(iceGatherer, remoteIceParameters,\n                'controlling');\n          }\n          if (dtlsTransport.state === 'new') {\n            dtlsTransport.start(remoteDtlsParameters);\n          }\n        }\n\n        pc._transceive(transceiver,\n            direction === 'sendrecv' || direction === 'recvonly',\n            direction === 'sendrecv' || direction === 'sendonly');\n\n        // TODO: rewrite to use http://w3c.github.io/webrtc-pc/#set-associated-remote-streams\n        if (rtpReceiver &&\n            (direction === 'sendrecv' || direction === 'sendonly')) {\n          track = rtpReceiver.track;\n          if (remoteMsid) {\n            if (!streams[remoteMsid.stream]) {\n              streams[remoteMsid.stream] = new window.MediaStream();\n            }\n            addTrackToStreamAndFireEvent(track, streams[remoteMsid.stream]);\n            receiverList.push([track, rtpReceiver, streams[remoteMsid.stream]]);\n          } else {\n            if (!streams.default) {\n              streams.default = new window.MediaStream();\n            }\n            addTrackToStreamAndFireEvent(track, streams.default);\n            receiverList.push([track, rtpReceiver, streams.default]);\n          }\n        } else {\n          // FIXME: actually the receiver should be created later.\n          delete transceiver.rtpReceiver;\n        }\n      }\n    });\n\n    if (pc._dtlsRole === undefined) {\n      pc._dtlsRole = description.type === 'offer' ? 'active' : 'passive';\n    }\n\n    pc.remoteDescription = {\n      type: description.type,\n      sdp: description.sdp\n    };\n    if (description.type === 'offer') {\n      pc._updateSignalingState('have-remote-offer');\n    } else {\n      pc._updateSignalingState('stable');\n    }\n    Object.keys(streams).forEach(function(sid) {\n      var stream = streams[sid];\n      if (stream.getTracks().length) {\n        if (pc.remoteStreams.indexOf(stream) === -1) {\n          pc.remoteStreams.push(stream);\n          var event = new Event('addstream');\n          event.stream = stream;\n          window.setTimeout(function() {\n            pc._dispatchEvent('addstream', event);\n          });\n        }\n\n        receiverList.forEach(function(item) {\n          var track = item[0];\n          var receiver = item[1];\n          if (stream.id !== item[2].id) {\n            return;\n          }\n          fireAddTrack(pc, track, receiver, [stream]);\n        });\n      }\n    });\n    receiverList.forEach(function(item) {\n      if (item[2]) {\n        return;\n      }\n      fireAddTrack(pc, item[0], item[1], []);\n    });\n\n    // check whether addIceCandidate({}) was called within four seconds after\n    // setRemoteDescription.\n    window.setTimeout(function() {\n      if (!(pc && pc.transceivers)) {\n        return;\n      }\n      pc.transceivers.forEach(function(transceiver) {\n        if (transceiver.iceTransport &&\n            transceiver.iceTransport.state === 'new' &&\n            transceiver.iceTransport.getRemoteCandidates().length > 0) {\n          console.warn('Timeout for addRemoteCandidate. Consider sending ' +\n              'an end-of-candidates notification');\n          transceiver.iceTransport.addRemoteCandidate({});\n        }\n      });\n    }, 4000);\n\n    return Promise.resolve();\n  };\n\n  RTCPeerConnection.prototype.close = function() {\n    this.transceivers.forEach(function(transceiver) {\n      /* not yet\n      if (transceiver.iceGatherer) {\n        transceiver.iceGatherer.close();\n      }\n      */\n      if (transceiver.iceTransport) {\n        transceiver.iceTransport.stop();\n      }\n      if (transceiver.dtlsTransport) {\n        transceiver.dtlsTransport.stop();\n      }\n      if (transceiver.rtpSender) {\n        transceiver.rtpSender.stop();\n      }\n      if (transceiver.rtpReceiver) {\n        transceiver.rtpReceiver.stop();\n      }\n    });\n    // FIXME: clean up tracks, local streams, remote streams, etc\n    this._isClosed = true;\n    this._updateSignalingState('closed');\n  };\n\n  // Update the signaling state.\n  RTCPeerConnection.prototype._updateSignalingState = function(newState) {\n    this.signalingState = newState;\n    var event = new Event('signalingstatechange');\n    this._dispatchEvent('signalingstatechange', event);\n  };\n\n  // Determine whether to fire the negotiationneeded event.\n  RTCPeerConnection.prototype._maybeFireNegotiationNeeded = function() {\n    var pc = this;\n    if (this.signalingState !== 'stable' || this.needNegotiation === true) {\n      return;\n    }\n    this.needNegotiation = true;\n    window.setTimeout(function() {\n      if (pc.needNegotiation) {\n        pc.needNegotiation = false;\n        var event = new Event('negotiationneeded');\n        pc._dispatchEvent('negotiationneeded', event);\n      }\n    }, 0);\n  };\n\n  // Update the ice connection state.\n  RTCPeerConnection.prototype._updateIceConnectionState = function() {\n    var newState;\n    var states = {\n      'new': 0,\n      closed: 0,\n      checking: 0,\n      connected: 0,\n      completed: 0,\n      disconnected: 0,\n      failed: 0\n    };\n    this.transceivers.forEach(function(transceiver) {\n      states[transceiver.iceTransport.state]++;\n    });\n\n    newState = 'new';\n    if (states.failed > 0) {\n      newState = 'failed';\n    } else if (states.checking > 0) {\n      newState = 'checking';\n    } else if (states.disconnected > 0) {\n      newState = 'disconnected';\n    } else if (states.new > 0) {\n      newState = 'new';\n    } else if (states.connected > 0) {\n      newState = 'connected';\n    } else if (states.completed > 0) {\n      newState = 'completed';\n    }\n\n    if (newState !== this.iceConnectionState) {\n      this.iceConnectionState = newState;\n      var event = new Event('iceconnectionstatechange');\n      this._dispatchEvent('iceconnectionstatechange', event);\n    }\n  };\n\n  // Update the connection state.\n  RTCPeerConnection.prototype._updateConnectionState = function() {\n    var newState;\n    var states = {\n      'new': 0,\n      closed: 0,\n      connecting: 0,\n      connected: 0,\n      completed: 0,\n      disconnected: 0,\n      failed: 0\n    };\n    this.transceivers.forEach(function(transceiver) {\n      states[transceiver.iceTransport.state]++;\n      states[transceiver.dtlsTransport.state]++;\n    });\n    // ICETransport.completed and connected are the same for this purpose.\n    states.connected += states.completed;\n\n    newState = 'new';\n    if (states.failed > 0) {\n      newState = 'failed';\n    } else if (states.connecting > 0) {\n      newState = 'connecting';\n    } else if (states.disconnected > 0) {\n      newState = 'disconnected';\n    } else if (states.new > 0) {\n      newState = 'new';\n    } else if (states.connected > 0) {\n      newState = 'connected';\n    }\n\n    if (newState !== this.connectionState) {\n      this.connectionState = newState;\n      var event = new Event('connectionstatechange');\n      this._dispatchEvent('connectionstatechange', event);\n    }\n  };\n\n  RTCPeerConnection.prototype.createOffer = function() {\n    var pc = this;\n\n    if (pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not call createOffer after close'));\n    }\n\n    var numAudioTracks = pc.transceivers.filter(function(t) {\n      return t.kind === 'audio';\n    }).length;\n    var numVideoTracks = pc.transceivers.filter(function(t) {\n      return t.kind === 'video';\n    }).length;\n\n    // Determine number of audio and video tracks we need to send/recv.\n    var offerOptions = arguments[0];\n    if (offerOptions) {\n      // Reject Chrome legacy constraints.\n      if (offerOptions.mandatory || offerOptions.optional) {\n        throw new TypeError(\n            'Legacy mandatory/optional constraints not supported.');\n      }\n      if (offerOptions.offerToReceiveAudio !== undefined) {\n        if (offerOptions.offerToReceiveAudio === true) {\n          numAudioTracks = 1;\n        } else if (offerOptions.offerToReceiveAudio === false) {\n          numAudioTracks = 0;\n        } else {\n          numAudioTracks = offerOptions.offerToReceiveAudio;\n        }\n      }\n      if (offerOptions.offerToReceiveVideo !== undefined) {\n        if (offerOptions.offerToReceiveVideo === true) {\n          numVideoTracks = 1;\n        } else if (offerOptions.offerToReceiveVideo === false) {\n          numVideoTracks = 0;\n        } else {\n          numVideoTracks = offerOptions.offerToReceiveVideo;\n        }\n      }\n    }\n\n    pc.transceivers.forEach(function(transceiver) {\n      if (transceiver.kind === 'audio') {\n        numAudioTracks--;\n        if (numAudioTracks < 0) {\n          transceiver.wantReceive = false;\n        }\n      } else if (transceiver.kind === 'video') {\n        numVideoTracks--;\n        if (numVideoTracks < 0) {\n          transceiver.wantReceive = false;\n        }\n      }\n    });\n\n    // Create M-lines for recvonly streams.\n    while (numAudioTracks > 0 || numVideoTracks > 0) {\n      if (numAudioTracks > 0) {\n        pc._createTransceiver('audio');\n        numAudioTracks--;\n      }\n      if (numVideoTracks > 0) {\n        pc._createTransceiver('video');\n        numVideoTracks--;\n      }\n    }\n\n    var sdp = SDPUtils.writeSessionBoilerplate(pc._sdpSessionId,\n        pc._sdpSessionVersion++);\n    pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n      // For each track, create an ice gatherer, ice transport,\n      // dtls transport, potentially rtpsender and rtpreceiver.\n      var track = transceiver.track;\n      var kind = transceiver.kind;\n      var mid = transceiver.mid || SDPUtils.generateIdentifier();\n      transceiver.mid = mid;\n\n      if (!transceiver.iceGatherer) {\n        transceiver.iceGatherer = pc._createIceGatherer(sdpMLineIndex,\n            pc.usingBundle);\n      }\n\n      var localCapabilities = window.RTCRtpSender.getCapabilities(kind);\n      // filter RTX until additional stuff needed for RTX is implemented\n      // in adapter.js\n      if (edgeVersion < 15019) {\n        localCapabilities.codecs = localCapabilities.codecs.filter(\n            function(codec) {\n              return codec.name !== 'rtx';\n            });\n      }\n      localCapabilities.codecs.forEach(function(codec) {\n        // work around https://bugs.chromium.org/p/webrtc/issues/detail?id=6552\n        // by adding level-asymmetry-allowed=1\n        if (codec.name === 'H264' &&\n            codec.parameters['level-asymmetry-allowed'] === undefined) {\n          codec.parameters['level-asymmetry-allowed'] = '1';\n        }\n\n        // for subsequent offers, we might have to re-use the payload\n        // type of the last offer.\n        if (transceiver.remoteCapabilities &&\n            transceiver.remoteCapabilities.codecs) {\n          transceiver.remoteCapabilities.codecs.forEach(function(remoteCodec) {\n            if (codec.name.toLowerCase() === remoteCodec.name.toLowerCase() &&\n                codec.clockRate === remoteCodec.clockRate) {\n              codec.preferredPayloadType = remoteCodec.payloadType;\n            }\n          });\n        }\n      });\n      localCapabilities.headerExtensions.forEach(function(hdrExt) {\n        var remoteExtensions = transceiver.remoteCapabilities &&\n            transceiver.remoteCapabilities.headerExtensions || [];\n        remoteExtensions.forEach(function(rHdrExt) {\n          if (hdrExt.uri === rHdrExt.uri) {\n            hdrExt.id = rHdrExt.id;\n          }\n        });\n      });\n\n      // generate an ssrc now, to be used later in rtpSender.send\n      var sendEncodingParameters = transceiver.sendEncodingParameters || [{\n        ssrc: (2 * sdpMLineIndex + 1) * 1001\n      }];\n      if (track) {\n        // add RTX\n        if (edgeVersion >= 15019 && kind === 'video' &&\n            !sendEncodingParameters[0].rtx) {\n          sendEncodingParameters[0].rtx = {\n            ssrc: sendEncodingParameters[0].ssrc + 1\n          };\n        }\n      }\n\n      if (transceiver.wantReceive) {\n        transceiver.rtpReceiver = new window.RTCRtpReceiver(\n            transceiver.dtlsTransport, kind);\n      }\n\n      transceiver.localCapabilities = localCapabilities;\n      transceiver.sendEncodingParameters = sendEncodingParameters;\n    });\n\n    // always offer BUNDLE and dispose on return if not supported.\n    if (pc._config.bundlePolicy !== 'max-compat') {\n      sdp += 'a=group:BUNDLE ' + pc.transceivers.map(function(t) {\n        return t.mid;\n      }).join(' ') + '\\r\\n';\n    }\n    sdp += 'a=ice-options:trickle\\r\\n';\n\n    pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n      sdp += writeMediaSection(transceiver, transceiver.localCapabilities,\n          'offer', transceiver.stream, pc._dtlsRole);\n      sdp += 'a=rtcp-rsize\\r\\n';\n\n      if (transceiver.iceGatherer && pc.iceGatheringState !== 'new' &&\n          (sdpMLineIndex === 0 || !pc.usingBundle)) {\n        transceiver.iceGatherer.getLocalCandidates().forEach(function(cand) {\n          cand.component = 1;\n          sdp += 'a=' + SDPUtils.writeCandidate(cand) + '\\r\\n';\n        });\n\n        if (transceiver.iceGatherer.state === 'completed') {\n          sdp += 'a=end-of-candidates\\r\\n';\n        }\n      }\n    });\n\n    var desc = new window.RTCSessionDescription({\n      type: 'offer',\n      sdp: sdp\n    });\n    return Promise.resolve(desc);\n  };\n\n  RTCPeerConnection.prototype.createAnswer = function() {\n    var pc = this;\n\n    if (pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not call createAnswer after close'));\n    }\n\n    if (!(pc.signalingState === 'have-remote-offer' ||\n        pc.signalingState === 'have-local-pranswer')) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not call createAnswer in signalingState ' + pc.signalingState));\n    }\n\n    var sdp = SDPUtils.writeSessionBoilerplate(pc._sdpSessionId,\n        pc._sdpSessionVersion++);\n    if (pc.usingBundle) {\n      sdp += 'a=group:BUNDLE ' + pc.transceivers.map(function(t) {\n        return t.mid;\n      }).join(' ') + '\\r\\n';\n    }\n    var mediaSectionsInOffer = SDPUtils.getMediaSections(\n        pc.remoteDescription.sdp).length;\n    pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n      if (sdpMLineIndex + 1 > mediaSectionsInOffer) {\n        return;\n      }\n      if (transceiver.rejected) {\n        if (transceiver.kind === 'application') {\n          sdp += 'm=application 0 DTLS/SCTP 5000\\r\\n';\n        } else if (transceiver.kind === 'audio') {\n          sdp += 'm=audio 0 UDP/TLS/RTP/SAVPF 0\\r\\n' +\n              'a=rtpmap:0 PCMU/8000\\r\\n';\n        } else if (transceiver.kind === 'video') {\n          sdp += 'm=video 0 UDP/TLS/RTP/SAVPF 120\\r\\n' +\n              'a=rtpmap:120 VP8/90000\\r\\n';\n        }\n        sdp += 'c=IN IP4 0.0.0.0\\r\\n' +\n            'a=inactive\\r\\n' +\n            'a=mid:' + transceiver.mid + '\\r\\n';\n        return;\n      }\n\n      // FIXME: look at direction.\n      if (transceiver.stream) {\n        var localTrack;\n        if (transceiver.kind === 'audio') {\n          localTrack = transceiver.stream.getAudioTracks()[0];\n        } else if (transceiver.kind === 'video') {\n          localTrack = transceiver.stream.getVideoTracks()[0];\n        }\n        if (localTrack) {\n          // add RTX\n          if (edgeVersion >= 15019 && transceiver.kind === 'video' &&\n              !transceiver.sendEncodingParameters[0].rtx) {\n            transceiver.sendEncodingParameters[0].rtx = {\n              ssrc: transceiver.sendEncodingParameters[0].ssrc + 1\n            };\n          }\n        }\n      }\n\n      // Calculate intersection of capabilities.\n      var commonCapabilities = getCommonCapabilities(\n          transceiver.localCapabilities,\n          transceiver.remoteCapabilities);\n\n      var hasRtx = commonCapabilities.codecs.filter(function(c) {\n        return c.name.toLowerCase() === 'rtx';\n      }).length;\n      if (!hasRtx && transceiver.sendEncodingParameters[0].rtx) {\n        delete transceiver.sendEncodingParameters[0].rtx;\n      }\n\n      sdp += writeMediaSection(transceiver, commonCapabilities,\n          'answer', transceiver.stream, pc._dtlsRole);\n      if (transceiver.rtcpParameters &&\n          transceiver.rtcpParameters.reducedSize) {\n        sdp += 'a=rtcp-rsize\\r\\n';\n      }\n    });\n\n    var desc = new window.RTCSessionDescription({\n      type: 'answer',\n      sdp: sdp\n    });\n    return Promise.resolve(desc);\n  };\n\n  RTCPeerConnection.prototype.addIceCandidate = function(candidate) {\n    var pc = this;\n    var sections;\n    if (candidate && !(candidate.sdpMLineIndex !== undefined ||\n        candidate.sdpMid)) {\n      return Promise.reject(new TypeError('sdpMLineIndex or sdpMid required'));\n    }\n\n    // TODO: needs to go into ops queue.\n    return new Promise(function(resolve, reject) {\n      if (!pc.remoteDescription) {\n        return reject(makeError('InvalidStateError',\n            'Can not add ICE candidate without a remote description'));\n      } else if (!candidate || candidate.candidate === '') {\n        for (var j = 0; j < pc.transceivers.length; j++) {\n          if (pc.transceivers[j].rejected) {\n            continue;\n          }\n          pc.transceivers[j].iceTransport.addRemoteCandidate({});\n          sections = SDPUtils.getMediaSections(pc.remoteDescription.sdp);\n          sections[j] += 'a=end-of-candidates\\r\\n';\n          pc.remoteDescription.sdp =\n              SDPUtils.getDescription(pc.remoteDescription.sdp) +\n              sections.join('');\n          if (pc.usingBundle) {\n            break;\n          }\n        }\n      } else {\n        var sdpMLineIndex = candidate.sdpMLineIndex;\n        if (candidate.sdpMid) {\n          for (var i = 0; i < pc.transceivers.length; i++) {\n            if (pc.transceivers[i].mid === candidate.sdpMid) {\n              sdpMLineIndex = i;\n              break;\n            }\n          }\n        }\n        var transceiver = pc.transceivers[sdpMLineIndex];\n        if (transceiver) {\n          if (transceiver.rejected) {\n            return resolve();\n          }\n          var cand = Object.keys(candidate.candidate).length > 0 ?\n              SDPUtils.parseCandidate(candidate.candidate) : {};\n          // Ignore Chrome's invalid candidates since Edge does not like them.\n          if (cand.protocol === 'tcp' && (cand.port === 0 || cand.port === 9)) {\n            return resolve();\n          }\n          // Ignore RTCP candidates, we assume RTCP-MUX.\n          if (cand.component && cand.component !== 1) {\n            return resolve();\n          }\n          // when using bundle, avoid adding candidates to the wrong\n          // ice transport. And avoid adding candidates added in the SDP.\n          if (sdpMLineIndex === 0 || (sdpMLineIndex > 0 &&\n              transceiver.iceTransport !== pc.transceivers[0].iceTransport)) {\n            if (!maybeAddCandidate(transceiver.iceTransport, cand)) {\n              return reject(makeError('OperationError',\n                  'Can not add ICE candidate'));\n            }\n          }\n\n          // update the remoteDescription.\n          var candidateString = candidate.candidate.trim();\n          if (candidateString.indexOf('a=') === 0) {\n            candidateString = candidateString.substr(2);\n          }\n          sections = SDPUtils.getMediaSections(pc.remoteDescription.sdp);\n          sections[sdpMLineIndex] += 'a=' +\n              (cand.type ? candidateString : 'end-of-candidates')\n              + '\\r\\n';\n          pc.remoteDescription.sdp = sections.join('');\n        } else {\n          return reject(makeError('OperationError',\n              'Can not add ICE candidate'));\n        }\n      }\n      resolve();\n    });\n  };\n\n  RTCPeerConnection.prototype.getStats = function() {\n    var promises = [];\n    this.transceivers.forEach(function(transceiver) {\n      ['rtpSender', 'rtpReceiver', 'iceGatherer', 'iceTransport',\n          'dtlsTransport'].forEach(function(method) {\n            if (transceiver[method]) {\n              promises.push(transceiver[method].getStats());\n            }\n          });\n    });\n    var fixStatsType = function(stat) {\n      return {\n        inboundrtp: 'inbound-rtp',\n        outboundrtp: 'outbound-rtp',\n        candidatepair: 'candidate-pair',\n        localcandidate: 'local-candidate',\n        remotecandidate: 'remote-candidate'\n      }[stat.type] || stat.type;\n    };\n    return new Promise(function(resolve) {\n      // shim getStats with maplike support\n      var results = new Map();\n      Promise.all(promises).then(function(res) {\n        res.forEach(function(result) {\n          Object.keys(result).forEach(function(id) {\n            result[id].type = fixStatsType(result[id]);\n            results.set(id, result[id]);\n          });\n        });\n        resolve(results);\n      });\n    });\n  };\n\n  // legacy callback shims. Should be moved to adapter.js some days.\n  var methods = ['createOffer', 'createAnswer'];\n  methods.forEach(function(method) {\n    var nativeMethod = RTCPeerConnection.prototype[method];\n    RTCPeerConnection.prototype[method] = function() {\n      var args = arguments;\n      if (typeof args[0] === 'function' ||\n          typeof args[1] === 'function') { // legacy\n        return nativeMethod.apply(this, [arguments[2]])\n        .then(function(description) {\n          if (typeof args[0] === 'function') {\n            args[0].apply(null, [description]);\n          }\n        }, function(error) {\n          if (typeof args[1] === 'function') {\n            args[1].apply(null, [error]);\n          }\n        });\n      }\n      return nativeMethod.apply(this, arguments);\n    };\n  });\n\n  methods = ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate'];\n  methods.forEach(function(method) {\n    var nativeMethod = RTCPeerConnection.prototype[method];\n    RTCPeerConnection.prototype[method] = function() {\n      var args = arguments;\n      if (typeof args[1] === 'function' ||\n          typeof args[2] === 'function') { // legacy\n        return nativeMethod.apply(this, arguments)\n        .then(function() {\n          if (typeof args[1] === 'function') {\n            args[1].apply(null);\n          }\n        }, function(error) {\n          if (typeof args[2] === 'function') {\n            args[2].apply(null, [error]);\n          }\n        });\n      }\n      return nativeMethod.apply(this, arguments);\n    };\n  });\n\n  // getStats is special. It doesn't have a spec legacy method yet we support\n  // getStats(something, cb) without error callbacks.\n  ['getStats'].forEach(function(method) {\n    var nativeMethod = RTCPeerConnection.prototype[method];\n    RTCPeerConnection.prototype[method] = function() {\n      var args = arguments;\n      if (typeof args[1] === 'function') {\n        return nativeMethod.apply(this, arguments)\n        .then(function() {\n          if (typeof args[1] === 'function') {\n            args[1].apply(null);\n          }\n        });\n      }\n      return nativeMethod.apply(this, arguments);\n    };\n  });\n\n  return RTCPeerConnection;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNjAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnRjcGVlcmNvbm5lY3Rpb24tc2hpbS9ydGNwZWVyY29ubmVjdGlvbi5qcz9iMGRhIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiAgQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBXZWJSVEMgcHJvamVjdCBhdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqICBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhIEJTRC1zdHlsZSBsaWNlbnNlXG4gKiAgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGUgc291cmNlXG4gKiAgdHJlZS5cbiAqL1xuIC8qIGVzbGludC1lbnYgbm9kZSAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgU0RQVXRpbHMgPSByZXF1aXJlKCdzZHAnKTtcblxuZnVuY3Rpb24gd3JpdGVNZWRpYVNlY3Rpb24odHJhbnNjZWl2ZXIsIGNhcHMsIHR5cGUsIHN0cmVhbSwgZHRsc1JvbGUpIHtcbiAgdmFyIHNkcCA9IFNEUFV0aWxzLndyaXRlUnRwRGVzY3JpcHRpb24odHJhbnNjZWl2ZXIua2luZCwgY2Fwcyk7XG5cbiAgLy8gTWFwIElDRSBwYXJhbWV0ZXJzICh1ZnJhZywgcHdkKSB0byBTRFAuXG4gIHNkcCArPSBTRFBVdGlscy53cml0ZUljZVBhcmFtZXRlcnMoXG4gICAgICB0cmFuc2NlaXZlci5pY2VHYXRoZXJlci5nZXRMb2NhbFBhcmFtZXRlcnMoKSk7XG5cbiAgLy8gTWFwIERUTFMgcGFyYW1ldGVycyB0byBTRFAuXG4gIHNkcCArPSBTRFBVdGlscy53cml0ZUR0bHNQYXJhbWV0ZXJzKFxuICAgICAgdHJhbnNjZWl2ZXIuZHRsc1RyYW5zcG9ydC5nZXRMb2NhbFBhcmFtZXRlcnMoKSxcbiAgICAgIHR5cGUgPT09ICdvZmZlcicgPyAnYWN0cGFzcycgOiBkdGxzUm9sZSB8fCAnYWN0aXZlJyk7XG5cbiAgc2RwICs9ICdhPW1pZDonICsgdHJhbnNjZWl2ZXIubWlkICsgJ1xcclxcbic7XG5cbiAgaWYgKHRyYW5zY2VpdmVyLnJ0cFNlbmRlciAmJiB0cmFuc2NlaXZlci5ydHBSZWNlaXZlcikge1xuICAgIHNkcCArPSAnYT1zZW5kcmVjdlxcclxcbic7XG4gIH0gZWxzZSBpZiAodHJhbnNjZWl2ZXIucnRwU2VuZGVyKSB7XG4gICAgc2RwICs9ICdhPXNlbmRvbmx5XFxyXFxuJztcbiAgfSBlbHNlIGlmICh0cmFuc2NlaXZlci5ydHBSZWNlaXZlcikge1xuICAgIHNkcCArPSAnYT1yZWN2b25seVxcclxcbic7XG4gIH0gZWxzZSB7XG4gICAgc2RwICs9ICdhPWluYWN0aXZlXFxyXFxuJztcbiAgfVxuXG4gIGlmICh0cmFuc2NlaXZlci5ydHBTZW5kZXIpIHtcbiAgICB2YXIgdHJhY2tJZCA9IHRyYW5zY2VpdmVyLnJ0cFNlbmRlci5faW5pdGlhbFRyYWNrSWQgfHxcbiAgICAgICAgdHJhbnNjZWl2ZXIucnRwU2VuZGVyLnRyYWNrLmlkO1xuICAgIHRyYW5zY2VpdmVyLnJ0cFNlbmRlci5faW5pdGlhbFRyYWNrSWQgPSB0cmFja0lkO1xuICAgIC8vIHNwZWMuXG4gICAgdmFyIG1zaWQgPSAnbXNpZDonICsgKHN0cmVhbSA/IHN0cmVhbS5pZCA6ICctJykgKyAnICcgK1xuICAgICAgICB0cmFja0lkICsgJ1xcclxcbic7XG4gICAgc2RwICs9ICdhPScgKyBtc2lkO1xuICAgIC8vIGZvciBDaHJvbWUuIExlZ2FjeSBzaG91bGQgbm8gbG9uZ2VyIGJlIHJlcXVpcmVkLlxuICAgIHNkcCArPSAnYT1zc3JjOicgKyB0cmFuc2NlaXZlci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnNzcmMgK1xuICAgICAgICAnICcgKyBtc2lkO1xuXG4gICAgLy8gUlRYXG4gICAgaWYgKHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4KSB7XG4gICAgICBzZHAgKz0gJ2E9c3NyYzonICsgdHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHguc3NyYyArXG4gICAgICAgICAgJyAnICsgbXNpZDtcbiAgICAgIHNkcCArPSAnYT1zc3JjLWdyb3VwOkZJRCAnICtcbiAgICAgICAgICB0cmFuc2NlaXZlci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnNzcmMgKyAnICcgK1xuICAgICAgICAgIHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4LnNzcmMgK1xuICAgICAgICAgICdcXHJcXG4nO1xuICAgIH1cbiAgfVxuICAvLyBGSVhNRTogdGhpcyBzaG91bGQgYmUgd3JpdHRlbiBieSB3cml0ZVJ0cERlc2NyaXB0aW9uLlxuICBzZHAgKz0gJ2E9c3NyYzonICsgdHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5zc3JjICtcbiAgICAgICcgY25hbWU6JyArIFNEUFV0aWxzLmxvY2FsQ05hbWUgKyAnXFxyXFxuJztcbiAgaWYgKHRyYW5zY2VpdmVyLnJ0cFNlbmRlciAmJiB0cmFuc2NlaXZlci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eCkge1xuICAgIHNkcCArPSAnYT1zc3JjOicgKyB0cmFuc2NlaXZlci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eC5zc3JjICtcbiAgICAgICAgJyBjbmFtZTonICsgU0RQVXRpbHMubG9jYWxDTmFtZSArICdcXHJcXG4nO1xuICB9XG4gIHJldHVybiBzZHA7XG59XG5cbi8vIEVkZ2UgZG9lcyBub3QgbGlrZVxuLy8gMSkgc3R1bjogZmlsdGVyZWQgYWZ0ZXIgMTQzOTMgdW5sZXNzID90cmFuc3BvcnQ9dWRwIGlzIHByZXNlbnRcbi8vIDIpIHR1cm46IHRoYXQgZG9lcyBub3QgaGF2ZSBhbGwgb2YgdHVybjpob3N0OnBvcnQ/dHJhbnNwb3J0PXVkcFxuLy8gMykgdHVybjogd2l0aCBpcHY2IGFkZHJlc3Nlc1xuLy8gNCkgdHVybjogb2NjdXJyaW5nIG11bGlwbGUgdGltZXNcbmZ1bmN0aW9uIGZpbHRlckljZVNlcnZlcnMoaWNlU2VydmVycywgZWRnZVZlcnNpb24pIHtcbiAgdmFyIGhhc1R1cm4gPSBmYWxzZTtcbiAgaWNlU2VydmVycyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoaWNlU2VydmVycykpO1xuICByZXR1cm4gaWNlU2VydmVycy5maWx0ZXIoZnVuY3Rpb24oc2VydmVyKSB7XG4gICAgaWYgKHNlcnZlciAmJiAoc2VydmVyLnVybHMgfHwgc2VydmVyLnVybCkpIHtcbiAgICAgIHZhciB1cmxzID0gc2VydmVyLnVybHMgfHwgc2VydmVyLnVybDtcbiAgICAgIGlmIChzZXJ2ZXIudXJsICYmICFzZXJ2ZXIudXJscykge1xuICAgICAgICBjb25zb2xlLndhcm4oJ1JUQ0ljZVNlcnZlci51cmwgaXMgZGVwcmVjYXRlZCEgVXNlIHVybHMgaW5zdGVhZC4nKTtcbiAgICAgIH1cbiAgICAgIHZhciBpc1N0cmluZyA9IHR5cGVvZiB1cmxzID09PSAnc3RyaW5nJztcbiAgICAgIGlmIChpc1N0cmluZykge1xuICAgICAgICB1cmxzID0gW3VybHNdO1xuICAgICAgfVxuICAgICAgdXJscyA9IHVybHMuZmlsdGVyKGZ1bmN0aW9uKHVybCkge1xuICAgICAgICB2YXIgdmFsaWRUdXJuID0gdXJsLmluZGV4T2YoJ3R1cm46JykgPT09IDAgJiZcbiAgICAgICAgICAgIHVybC5pbmRleE9mKCd0cmFuc3BvcnQ9dWRwJykgIT09IC0xICYmXG4gICAgICAgICAgICB1cmwuaW5kZXhPZigndHVybjpbJykgPT09IC0xICYmXG4gICAgICAgICAgICAhaGFzVHVybjtcblxuICAgICAgICBpZiAodmFsaWRUdXJuKSB7XG4gICAgICAgICAgaGFzVHVybiA9IHRydWU7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVybC5pbmRleE9mKCdzdHVuOicpID09PSAwICYmIGVkZ2VWZXJzaW9uID49IDE0MzkzICYmXG4gICAgICAgICAgICB1cmwuaW5kZXhPZignP3RyYW5zcG9ydD11ZHAnKSA9PT0gLTE7XG4gICAgICB9KTtcblxuICAgICAgZGVsZXRlIHNlcnZlci51cmw7XG4gICAgICBzZXJ2ZXIudXJscyA9IGlzU3RyaW5nID8gdXJsc1swXSA6IHVybHM7XG4gICAgICByZXR1cm4gISF1cmxzLmxlbmd0aDtcbiAgICB9XG4gIH0pO1xufVxuXG4vLyBEZXRlcm1pbmVzIHRoZSBpbnRlcnNlY3Rpb24gb2YgbG9jYWwgYW5kIHJlbW90ZSBjYXBhYmlsaXRpZXMuXG5mdW5jdGlvbiBnZXRDb21tb25DYXBhYmlsaXRpZXMobG9jYWxDYXBhYmlsaXRpZXMsIHJlbW90ZUNhcGFiaWxpdGllcykge1xuICB2YXIgY29tbW9uQ2FwYWJpbGl0aWVzID0ge1xuICAgIGNvZGVjczogW10sXG4gICAgaGVhZGVyRXh0ZW5zaW9uczogW10sXG4gICAgZmVjTWVjaGFuaXNtczogW11cbiAgfTtcblxuICB2YXIgZmluZENvZGVjQnlQYXlsb2FkVHlwZSA9IGZ1bmN0aW9uKHB0LCBjb2RlY3MpIHtcbiAgICBwdCA9IHBhcnNlSW50KHB0LCAxMCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb2RlY3MubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChjb2RlY3NbaV0ucGF5bG9hZFR5cGUgPT09IHB0IHx8XG4gICAgICAgICAgY29kZWNzW2ldLnByZWZlcnJlZFBheWxvYWRUeXBlID09PSBwdCkge1xuICAgICAgICByZXR1cm4gY29kZWNzW2ldO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICB2YXIgcnR4Q2FwYWJpbGl0eU1hdGNoZXMgPSBmdW5jdGlvbihsUnR4LCByUnR4LCBsQ29kZWNzLCByQ29kZWNzKSB7XG4gICAgdmFyIGxDb2RlYyA9IGZpbmRDb2RlY0J5UGF5bG9hZFR5cGUobFJ0eC5wYXJhbWV0ZXJzLmFwdCwgbENvZGVjcyk7XG4gICAgdmFyIHJDb2RlYyA9IGZpbmRDb2RlY0J5UGF5bG9hZFR5cGUoclJ0eC5wYXJhbWV0ZXJzLmFwdCwgckNvZGVjcyk7XG4gICAgcmV0dXJuIGxDb2RlYyAmJiByQ29kZWMgJiZcbiAgICAgICAgbENvZGVjLm5hbWUudG9Mb3dlckNhc2UoKSA9PT0gckNvZGVjLm5hbWUudG9Mb3dlckNhc2UoKTtcbiAgfTtcblxuICBsb2NhbENhcGFiaWxpdGllcy5jb2RlY3MuZm9yRWFjaChmdW5jdGlvbihsQ29kZWMpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlbW90ZUNhcGFiaWxpdGllcy5jb2RlY3MubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciByQ29kZWMgPSByZW1vdGVDYXBhYmlsaXRpZXMuY29kZWNzW2ldO1xuICAgICAgaWYgKGxDb2RlYy5uYW1lLnRvTG93ZXJDYXNlKCkgPT09IHJDb2RlYy5uYW1lLnRvTG93ZXJDYXNlKCkgJiZcbiAgICAgICAgICBsQ29kZWMuY2xvY2tSYXRlID09PSByQ29kZWMuY2xvY2tSYXRlKSB7XG4gICAgICAgIGlmIChsQ29kZWMubmFtZS50b0xvd2VyQ2FzZSgpID09PSAncnR4JyAmJlxuICAgICAgICAgICAgbENvZGVjLnBhcmFtZXRlcnMgJiYgckNvZGVjLnBhcmFtZXRlcnMuYXB0KSB7XG4gICAgICAgICAgLy8gZm9yIFJUWCB3ZSBuZWVkIHRvIGZpbmQgdGhlIGxvY2FsIHJ0eCB0aGF0IGhhcyBhIGFwdFxuICAgICAgICAgIC8vIHdoaWNoIHBvaW50cyB0byB0aGUgc2FtZSBsb2NhbCBjb2RlYyBhcyB0aGUgcmVtb3RlIG9uZS5cbiAgICAgICAgICBpZiAoIXJ0eENhcGFiaWxpdHlNYXRjaGVzKGxDb2RlYywgckNvZGVjLFxuICAgICAgICAgICAgICBsb2NhbENhcGFiaWxpdGllcy5jb2RlY3MsIHJlbW90ZUNhcGFiaWxpdGllcy5jb2RlY3MpKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgckNvZGVjID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShyQ29kZWMpKTsgLy8gZGVlcGNvcHlcbiAgICAgICAgLy8gbnVtYmVyIG9mIGNoYW5uZWxzIGlzIHRoZSBoaWdoZXN0IGNvbW1vbiBudW1iZXIgb2YgY2hhbm5lbHNcbiAgICAgICAgckNvZGVjLm51bUNoYW5uZWxzID0gTWF0aC5taW4obENvZGVjLm51bUNoYW5uZWxzLFxuICAgICAgICAgICAgckNvZGVjLm51bUNoYW5uZWxzKTtcbiAgICAgICAgLy8gcHVzaCByQ29kZWMgc28gd2UgcmVwbHkgd2l0aCBvZmZlcmVyIHBheWxvYWQgdHlwZVxuICAgICAgICBjb21tb25DYXBhYmlsaXRpZXMuY29kZWNzLnB1c2gockNvZGVjKTtcblxuICAgICAgICAvLyBkZXRlcm1pbmUgY29tbW9uIGZlZWRiYWNrIG1lY2hhbmlzbXNcbiAgICAgICAgckNvZGVjLnJ0Y3BGZWVkYmFjayA9IHJDb2RlYy5ydGNwRmVlZGJhY2suZmlsdGVyKGZ1bmN0aW9uKGZiKSB7XG4gICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBsQ29kZWMucnRjcEZlZWRiYWNrLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICBpZiAobENvZGVjLnJ0Y3BGZWVkYmFja1tqXS50eXBlID09PSBmYi50eXBlICYmXG4gICAgICAgICAgICAgICAgbENvZGVjLnJ0Y3BGZWVkYmFja1tqXS5wYXJhbWV0ZXIgPT09IGZiLnBhcmFtZXRlcikge1xuICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gRklYTUU6IGFsc28gbmVlZCB0byBkZXRlcm1pbmUgLnBhcmFtZXRlcnNcbiAgICAgICAgLy8gIHNlZSBodHRwczovL2dpdGh1Yi5jb20vb3BlbnBlZXIvb3J0Yy9pc3N1ZXMvNTY5XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgbG9jYWxDYXBhYmlsaXRpZXMuaGVhZGVyRXh0ZW5zaW9ucy5mb3JFYWNoKGZ1bmN0aW9uKGxIZWFkZXJFeHRlbnNpb24pIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlbW90ZUNhcGFiaWxpdGllcy5oZWFkZXJFeHRlbnNpb25zLmxlbmd0aDtcbiAgICAgICAgIGkrKykge1xuICAgICAgdmFyIHJIZWFkZXJFeHRlbnNpb24gPSByZW1vdGVDYXBhYmlsaXRpZXMuaGVhZGVyRXh0ZW5zaW9uc1tpXTtcbiAgICAgIGlmIChsSGVhZGVyRXh0ZW5zaW9uLnVyaSA9PT0gckhlYWRlckV4dGVuc2lvbi51cmkpIHtcbiAgICAgICAgY29tbW9uQ2FwYWJpbGl0aWVzLmhlYWRlckV4dGVuc2lvbnMucHVzaChySGVhZGVyRXh0ZW5zaW9uKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICAvLyBGSVhNRTogZmVjTWVjaGFuaXNtc1xuICByZXR1cm4gY29tbW9uQ2FwYWJpbGl0aWVzO1xufVxuXG4vLyBpcyBhY3Rpb249c2V0TG9jYWxEZXNjcmlwdGlvbiB3aXRoIHR5cGUgYWxsb3dlZCBpbiBzaWduYWxpbmdTdGF0ZVxuZnVuY3Rpb24gaXNBY3Rpb25BbGxvd2VkSW5TaWduYWxpbmdTdGF0ZShhY3Rpb24sIHR5cGUsIHNpZ25hbGluZ1N0YXRlKSB7XG4gIHJldHVybiB7XG4gICAgb2ZmZXI6IHtcbiAgICAgIHNldExvY2FsRGVzY3JpcHRpb246IFsnc3RhYmxlJywgJ2hhdmUtbG9jYWwtb2ZmZXInXSxcbiAgICAgIHNldFJlbW90ZURlc2NyaXB0aW9uOiBbJ3N0YWJsZScsICdoYXZlLXJlbW90ZS1vZmZlciddXG4gICAgfSxcbiAgICBhbnN3ZXI6IHtcbiAgICAgIHNldExvY2FsRGVzY3JpcHRpb246IFsnaGF2ZS1yZW1vdGUtb2ZmZXInLCAnaGF2ZS1sb2NhbC1wcmFuc3dlciddLFxuICAgICAgc2V0UmVtb3RlRGVzY3JpcHRpb246IFsnaGF2ZS1sb2NhbC1vZmZlcicsICdoYXZlLXJlbW90ZS1wcmFuc3dlciddXG4gICAgfVxuICB9W3R5cGVdW2FjdGlvbl0uaW5kZXhPZihzaWduYWxpbmdTdGF0ZSkgIT09IC0xO1xufVxuXG5mdW5jdGlvbiBtYXliZUFkZENhbmRpZGF0ZShpY2VUcmFuc3BvcnQsIGNhbmRpZGF0ZSkge1xuICAvLyBFZGdlJ3MgaW50ZXJuYWwgcmVwcmVzZW50YXRpb24gYWRkcyBzb21lIGZpZWxkcyB0aGVyZWZvcmVcbiAgLy8gbm90IGFsbCBmaWVsZNGVIGFyZSB0YWtlbiBpbnRvIGFjY291bnQuXG4gIHZhciBhbHJlYWR5QWRkZWQgPSBpY2VUcmFuc3BvcnQuZ2V0UmVtb3RlQ2FuZGlkYXRlcygpXG4gICAgICAuZmluZChmdW5jdGlvbihyZW1vdGVDYW5kaWRhdGUpIHtcbiAgICAgICAgcmV0dXJuIGNhbmRpZGF0ZS5mb3VuZGF0aW9uID09PSByZW1vdGVDYW5kaWRhdGUuZm91bmRhdGlvbiAmJlxuICAgICAgICAgICAgY2FuZGlkYXRlLmlwID09PSByZW1vdGVDYW5kaWRhdGUuaXAgJiZcbiAgICAgICAgICAgIGNhbmRpZGF0ZS5wb3J0ID09PSByZW1vdGVDYW5kaWRhdGUucG9ydCAmJlxuICAgICAgICAgICAgY2FuZGlkYXRlLnByaW9yaXR5ID09PSByZW1vdGVDYW5kaWRhdGUucHJpb3JpdHkgJiZcbiAgICAgICAgICAgIGNhbmRpZGF0ZS5wcm90b2NvbCA9PT0gcmVtb3RlQ2FuZGlkYXRlLnByb3RvY29sICYmXG4gICAgICAgICAgICBjYW5kaWRhdGUudHlwZSA9PT0gcmVtb3RlQ2FuZGlkYXRlLnR5cGU7XG4gICAgICB9KTtcbiAgaWYgKCFhbHJlYWR5QWRkZWQpIHtcbiAgICBpY2VUcmFuc3BvcnQuYWRkUmVtb3RlQ2FuZGlkYXRlKGNhbmRpZGF0ZSk7XG4gIH1cbiAgcmV0dXJuICFhbHJlYWR5QWRkZWQ7XG59XG5cblxuZnVuY3Rpb24gbWFrZUVycm9yKG5hbWUsIGRlc2NyaXB0aW9uKSB7XG4gIHZhciBlID0gbmV3IEVycm9yKGRlc2NyaXB0aW9uKTtcbiAgZS5uYW1lID0gbmFtZTtcbiAgLy8gbGVnYWN5IGVycm9yIGNvZGVzIGZyb20gaHR0cHM6Ly9oZXljYW0uZ2l0aHViLmlvL3dlYmlkbC8jaWRsLURPTUV4Y2VwdGlvbi1lcnJvci1uYW1lc1xuICBlLmNvZGUgPSB7XG4gICAgTm90U3VwcG9ydGVkRXJyb3I6IDksXG4gICAgSW52YWxpZFN0YXRlRXJyb3I6IDExLFxuICAgIEludmFsaWRBY2Nlc3NFcnJvcjogMTUsXG4gICAgVHlwZUVycm9yOiB1bmRlZmluZWQsXG4gICAgT3BlcmF0aW9uRXJyb3I6IHVuZGVmaW5lZFxuICB9W25hbWVdO1xuICByZXR1cm4gZTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbih3aW5kb3csIGVkZ2VWZXJzaW9uKSB7XG4gIC8vIGh0dHBzOi8vdzNjLmdpdGh1Yi5pby9tZWRpYWNhcHR1cmUtbWFpbi8jbWVkaWFzdHJlYW1cbiAgLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGFkZCB0aGUgdHJhY2sgdG8gdGhlIHN0cmVhbSBhbmRcbiAgLy8gZGlzcGF0Y2ggdGhlIGV2ZW50IG91cnNlbHZlcy5cbiAgZnVuY3Rpb24gYWRkVHJhY2tUb1N0cmVhbUFuZEZpcmVFdmVudCh0cmFjaywgc3RyZWFtKSB7XG4gICAgc3RyZWFtLmFkZFRyYWNrKHRyYWNrKTtcbiAgICBzdHJlYW0uZGlzcGF0Y2hFdmVudChuZXcgd2luZG93Lk1lZGlhU3RyZWFtVHJhY2tFdmVudCgnYWRkdHJhY2snLFxuICAgICAgICB7dHJhY2s6IHRyYWNrfSkpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVtb3ZlVHJhY2tGcm9tU3RyZWFtQW5kRmlyZUV2ZW50KHRyYWNrLCBzdHJlYW0pIHtcbiAgICBzdHJlYW0ucmVtb3ZlVHJhY2sodHJhY2spO1xuICAgIHN0cmVhbS5kaXNwYXRjaEV2ZW50KG5ldyB3aW5kb3cuTWVkaWFTdHJlYW1UcmFja0V2ZW50KCdyZW1vdmV0cmFjaycsXG4gICAgICAgIHt0cmFjazogdHJhY2t9KSk7XG4gIH1cblxuICBmdW5jdGlvbiBmaXJlQWRkVHJhY2socGMsIHRyYWNrLCByZWNlaXZlciwgc3RyZWFtcykge1xuICAgIHZhciB0cmFja0V2ZW50ID0gbmV3IEV2ZW50KCd0cmFjaycpO1xuICAgIHRyYWNrRXZlbnQudHJhY2sgPSB0cmFjaztcbiAgICB0cmFja0V2ZW50LnJlY2VpdmVyID0gcmVjZWl2ZXI7XG4gICAgdHJhY2tFdmVudC50cmFuc2NlaXZlciA9IHtyZWNlaXZlcjogcmVjZWl2ZXJ9O1xuICAgIHRyYWNrRXZlbnQuc3RyZWFtcyA9IHN0cmVhbXM7XG4gICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICBwYy5fZGlzcGF0Y2hFdmVudCgndHJhY2snLCB0cmFja0V2ZW50KTtcbiAgICB9KTtcbiAgfVxuXG4gIHZhciBSVENQZWVyQ29ubmVjdGlvbiA9IGZ1bmN0aW9uKGNvbmZpZykge1xuICAgIHZhciBwYyA9IHRoaXM7XG5cbiAgICB2YXIgX2V2ZW50VGFyZ2V0ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgIFsnYWRkRXZlbnRMaXN0ZW5lcicsICdyZW1vdmVFdmVudExpc3RlbmVyJywgJ2Rpc3BhdGNoRXZlbnQnXVxuICAgICAgICAuZm9yRWFjaChmdW5jdGlvbihtZXRob2QpIHtcbiAgICAgICAgICBwY1ttZXRob2RdID0gX2V2ZW50VGFyZ2V0W21ldGhvZF0uYmluZChfZXZlbnRUYXJnZXQpO1xuICAgICAgICB9KTtcblxuICAgIHRoaXMuY2FuVHJpY2tsZUljZUNhbmRpZGF0ZXMgPSBudWxsO1xuXG4gICAgdGhpcy5uZWVkTmVnb3RpYXRpb24gPSBmYWxzZTtcblxuICAgIHRoaXMubG9jYWxTdHJlYW1zID0gW107XG4gICAgdGhpcy5yZW1vdGVTdHJlYW1zID0gW107XG5cbiAgICB0aGlzLmxvY2FsRGVzY3JpcHRpb24gPSBudWxsO1xuICAgIHRoaXMucmVtb3RlRGVzY3JpcHRpb24gPSBudWxsO1xuXG4gICAgdGhpcy5zaWduYWxpbmdTdGF0ZSA9ICdzdGFibGUnO1xuICAgIHRoaXMuaWNlQ29ubmVjdGlvblN0YXRlID0gJ25ldyc7XG4gICAgdGhpcy5jb25uZWN0aW9uU3RhdGUgPSAnbmV3JztcbiAgICB0aGlzLmljZUdhdGhlcmluZ1N0YXRlID0gJ25ldyc7XG5cbiAgICBjb25maWcgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGNvbmZpZyB8fCB7fSkpO1xuXG4gICAgdGhpcy51c2luZ0J1bmRsZSA9IGNvbmZpZy5idW5kbGVQb2xpY3kgPT09ICdtYXgtYnVuZGxlJztcbiAgICBpZiAoY29uZmlnLnJ0Y3BNdXhQb2xpY3kgPT09ICduZWdvdGlhdGUnKSB7XG4gICAgICB0aHJvdyhtYWtlRXJyb3IoJ05vdFN1cHBvcnRlZEVycm9yJyxcbiAgICAgICAgICAncnRjcE11eFBvbGljeSBcXCduZWdvdGlhdGVcXCcgaXMgbm90IHN1cHBvcnRlZCcpKTtcbiAgICB9IGVsc2UgaWYgKCFjb25maWcucnRjcE11eFBvbGljeSkge1xuICAgICAgY29uZmlnLnJ0Y3BNdXhQb2xpY3kgPSAncmVxdWlyZSc7XG4gICAgfVxuXG4gICAgc3dpdGNoIChjb25maWcuaWNlVHJhbnNwb3J0UG9saWN5KSB7XG4gICAgICBjYXNlICdhbGwnOlxuICAgICAgY2FzZSAncmVsYXknOlxuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGNvbmZpZy5pY2VUcmFuc3BvcnRQb2xpY3kgPSAnYWxsJztcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgc3dpdGNoIChjb25maWcuYnVuZGxlUG9saWN5KSB7XG4gICAgICBjYXNlICdiYWxhbmNlZCc6XG4gICAgICBjYXNlICdtYXgtY29tcGF0JzpcbiAgICAgIGNhc2UgJ21heC1idW5kbGUnOlxuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGNvbmZpZy5idW5kbGVQb2xpY3kgPSAnYmFsYW5jZWQnO1xuICAgICAgICBicmVhaztcbiAgICB9XG5cbiAgICBjb25maWcuaWNlU2VydmVycyA9IGZpbHRlckljZVNlcnZlcnMoY29uZmlnLmljZVNlcnZlcnMgfHwgW10sIGVkZ2VWZXJzaW9uKTtcblxuICAgIHRoaXMuX2ljZUdhdGhlcmVycyA9IFtdO1xuICAgIGlmIChjb25maWcuaWNlQ2FuZGlkYXRlUG9vbFNpemUpIHtcbiAgICAgIGZvciAodmFyIGkgPSBjb25maWcuaWNlQ2FuZGlkYXRlUG9vbFNpemU7IGkgPiAwOyBpLS0pIHtcbiAgICAgICAgdGhpcy5faWNlR2F0aGVyZXJzLnB1c2gobmV3IHdpbmRvdy5SVENJY2VHYXRoZXJlcih7XG4gICAgICAgICAgaWNlU2VydmVyczogY29uZmlnLmljZVNlcnZlcnMsXG4gICAgICAgICAgZ2F0aGVyUG9saWN5OiBjb25maWcuaWNlVHJhbnNwb3J0UG9saWN5XG4gICAgICAgIH0pKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uZmlnLmljZUNhbmRpZGF0ZVBvb2xTaXplID0gMDtcbiAgICB9XG5cbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XG5cbiAgICAvLyBwZXItdHJhY2sgaWNlR2F0aGVycywgaWNlVHJhbnNwb3J0cywgZHRsc1RyYW5zcG9ydHMsIHJ0cFNlbmRlcnMsIC4uLlxuICAgIC8vIGV2ZXJ5dGhpbmcgdGhhdCBpcyBuZWVkZWQgdG8gZGVzY3JpYmUgYSBTRFAgbS1saW5lLlxuICAgIHRoaXMudHJhbnNjZWl2ZXJzID0gW107XG5cbiAgICB0aGlzLl9zZHBTZXNzaW9uSWQgPSBTRFBVdGlscy5nZW5lcmF0ZVNlc3Npb25JZCgpO1xuICAgIHRoaXMuX3NkcFNlc3Npb25WZXJzaW9uID0gMDtcblxuICAgIHRoaXMuX2R0bHNSb2xlID0gdW5kZWZpbmVkOyAvLyByb2xlIGZvciBhPXNldHVwIHRvIHVzZSBpbiBhbnN3ZXJzLlxuXG4gICAgdGhpcy5faXNDbG9zZWQgPSBmYWxzZTtcbiAgfTtcblxuICAvLyBzZXQgdXAgZXZlbnQgaGFuZGxlcnMgb24gcHJvdG90eXBlXG4gIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5vbmljZWNhbmRpZGF0ZSA9IG51bGw7XG4gIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5vbmFkZHN0cmVhbSA9IG51bGw7XG4gIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5vbnRyYWNrID0gbnVsbDtcbiAgUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLm9ucmVtb3Zlc3RyZWFtID0gbnVsbDtcbiAgUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLm9uc2lnbmFsaW5nc3RhdGVjaGFuZ2UgPSBudWxsO1xuICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUub25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2UgPSBudWxsO1xuICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUub25jb25uZWN0aW9uc3RhdGVjaGFuZ2UgPSBudWxsO1xuICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUub25pY2VnYXRoZXJpbmdzdGF0ZWNoYW5nZSA9IG51bGw7XG4gIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5vbm5lZ290aWF0aW9ubmVlZGVkID0gbnVsbDtcbiAgUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLm9uZGF0YWNoYW5uZWwgPSBudWxsO1xuXG4gIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5fZGlzcGF0Y2hFdmVudCA9IGZ1bmN0aW9uKG5hbWUsIGV2ZW50KSB7XG4gICAgaWYgKHRoaXMuX2lzQ2xvc2VkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgaWYgKHR5cGVvZiB0aGlzWydvbicgKyBuYW1lXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhpc1snb24nICsgbmFtZV0oZXZlbnQpO1xuICAgIH1cbiAgfTtcblxuICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuX2VtaXRHYXRoZXJpbmdTdGF0ZUNoYW5nZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBldmVudCA9IG5ldyBFdmVudCgnaWNlZ2F0aGVyaW5nc3RhdGVjaGFuZ2UnKTtcbiAgICB0aGlzLl9kaXNwYXRjaEV2ZW50KCdpY2VnYXRoZXJpbmdzdGF0ZWNoYW5nZScsIGV2ZW50KTtcbiAgfTtcblxuICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0Q29uZmlndXJhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9jb25maWc7XG4gIH07XG5cbiAgUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldExvY2FsU3RyZWFtcyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmxvY2FsU3RyZWFtcztcbiAgfTtcblxuICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0UmVtb3RlU3RyZWFtcyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnJlbW90ZVN0cmVhbXM7XG4gIH07XG5cbiAgLy8gaW50ZXJuYWwgaGVscGVyIHRvIGNyZWF0ZSBhIHRyYW5zY2VpdmVyIG9iamVjdC5cbiAgLy8gKHdoaWNoIGlzIG5vdCB5ZXQgdGhlIHNhbWUgYXMgdGhlIFdlYlJUQyAxLjAgdHJhbnNjZWl2ZXIpXG4gIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5fY3JlYXRlVHJhbnNjZWl2ZXIgPSBmdW5jdGlvbihraW5kLCBkb05vdEFkZCkge1xuICAgIHZhciBoYXNCdW5kbGVUcmFuc3BvcnQgPSB0aGlzLnRyYW5zY2VpdmVycy5sZW5ndGggPiAwO1xuICAgIHZhciB0cmFuc2NlaXZlciA9IHtcbiAgICAgIHRyYWNrOiBudWxsLFxuICAgICAgaWNlR2F0aGVyZXI6IG51bGwsXG4gICAgICBpY2VUcmFuc3BvcnQ6IG51bGwsXG4gICAgICBkdGxzVHJhbnNwb3J0OiBudWxsLFxuICAgICAgbG9jYWxDYXBhYmlsaXRpZXM6IG51bGwsXG4gICAgICByZW1vdGVDYXBhYmlsaXRpZXM6IG51bGwsXG4gICAgICBydHBTZW5kZXI6IG51bGwsXG4gICAgICBydHBSZWNlaXZlcjogbnVsbCxcbiAgICAgIGtpbmQ6IGtpbmQsXG4gICAgICBtaWQ6IG51bGwsXG4gICAgICBzZW5kRW5jb2RpbmdQYXJhbWV0ZXJzOiBudWxsLFxuICAgICAgcmVjdkVuY29kaW5nUGFyYW1ldGVyczogbnVsbCxcbiAgICAgIHN0cmVhbTogbnVsbCxcbiAgICAgIGFzc29jaWF0ZWRSZW1vdGVNZWRpYVN0cmVhbXM6IFtdLFxuICAgICAgd2FudFJlY2VpdmU6IHRydWVcbiAgICB9O1xuICAgIGlmICh0aGlzLnVzaW5nQnVuZGxlICYmIGhhc0J1bmRsZVRyYW5zcG9ydCkge1xuICAgICAgdHJhbnNjZWl2ZXIuaWNlVHJhbnNwb3J0ID0gdGhpcy50cmFuc2NlaXZlcnNbMF0uaWNlVHJhbnNwb3J0O1xuICAgICAgdHJhbnNjZWl2ZXIuZHRsc1RyYW5zcG9ydCA9IHRoaXMudHJhbnNjZWl2ZXJzWzBdLmR0bHNUcmFuc3BvcnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciB0cmFuc3BvcnRzID0gdGhpcy5fY3JlYXRlSWNlQW5kRHRsc1RyYW5zcG9ydHMoKTtcbiAgICAgIHRyYW5zY2VpdmVyLmljZVRyYW5zcG9ydCA9IHRyYW5zcG9ydHMuaWNlVHJhbnNwb3J0O1xuICAgICAgdHJhbnNjZWl2ZXIuZHRsc1RyYW5zcG9ydCA9IHRyYW5zcG9ydHMuZHRsc1RyYW5zcG9ydDtcbiAgICB9XG4gICAgaWYgKCFkb05vdEFkZCkge1xuICAgICAgdGhpcy50cmFuc2NlaXZlcnMucHVzaCh0cmFuc2NlaXZlcik7XG4gICAgfVxuICAgIHJldHVybiB0cmFuc2NlaXZlcjtcbiAgfTtcblxuICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhY2sgPSBmdW5jdGlvbih0cmFjaywgc3RyZWFtKSB7XG4gICAgaWYgKHRoaXMuX2lzQ2xvc2VkKSB7XG4gICAgICB0aHJvdyBtYWtlRXJyb3IoJ0ludmFsaWRTdGF0ZUVycm9yJyxcbiAgICAgICAgICAnQXR0ZW1wdGVkIHRvIGNhbGwgYWRkVHJhY2sgb24gYSBjbG9zZWQgcGVlcmNvbm5lY3Rpb24uJyk7XG4gICAgfVxuXG4gICAgdmFyIGFscmVhZHlFeGlzdHMgPSB0aGlzLnRyYW5zY2VpdmVycy5maW5kKGZ1bmN0aW9uKHMpIHtcbiAgICAgIHJldHVybiBzLnRyYWNrID09PSB0cmFjaztcbiAgICB9KTtcblxuICAgIGlmIChhbHJlYWR5RXhpc3RzKSB7XG4gICAgICB0aHJvdyBtYWtlRXJyb3IoJ0ludmFsaWRBY2Nlc3NFcnJvcicsICdUcmFjayBhbHJlYWR5IGV4aXN0cy4nKTtcbiAgICB9XG5cbiAgICB2YXIgdHJhbnNjZWl2ZXI7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnRyYW5zY2VpdmVycy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKCF0aGlzLnRyYW5zY2VpdmVyc1tpXS50cmFjayAmJlxuICAgICAgICAgIHRoaXMudHJhbnNjZWl2ZXJzW2ldLmtpbmQgPT09IHRyYWNrLmtpbmQpIHtcbiAgICAgICAgdHJhbnNjZWl2ZXIgPSB0aGlzLnRyYW5zY2VpdmVyc1tpXTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCF0cmFuc2NlaXZlcikge1xuICAgICAgdHJhbnNjZWl2ZXIgPSB0aGlzLl9jcmVhdGVUcmFuc2NlaXZlcih0cmFjay5raW5kKTtcbiAgICB9XG5cbiAgICB0aGlzLl9tYXliZUZpcmVOZWdvdGlhdGlvbk5lZWRlZCgpO1xuXG4gICAgaWYgKHRoaXMubG9jYWxTdHJlYW1zLmluZGV4T2Yoc3RyZWFtKSA9PT0gLTEpIHtcbiAgICAgIHRoaXMubG9jYWxTdHJlYW1zLnB1c2goc3RyZWFtKTtcbiAgICB9XG5cbiAgICB0cmFuc2NlaXZlci50cmFjayA9IHRyYWNrO1xuICAgIHRyYW5zY2VpdmVyLnN0cmVhbSA9IHN0cmVhbTtcbiAgICB0cmFuc2NlaXZlci5ydHBTZW5kZXIgPSBuZXcgd2luZG93LlJUQ1J0cFNlbmRlcih0cmFjayxcbiAgICAgICAgdHJhbnNjZWl2ZXIuZHRsc1RyYW5zcG9ydCk7XG4gICAgcmV0dXJuIHRyYW5zY2VpdmVyLnJ0cFNlbmRlcjtcbiAgfTtcblxuICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkU3RyZWFtID0gZnVuY3Rpb24oc3RyZWFtKSB7XG4gICAgdmFyIHBjID0gdGhpcztcbiAgICBpZiAoZWRnZVZlcnNpb24gPj0gMTUwMjUpIHtcbiAgICAgIHN0cmVhbS5nZXRUcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uKHRyYWNrKSB7XG4gICAgICAgIHBjLmFkZFRyYWNrKHRyYWNrLCBzdHJlYW0pO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIENsb25lIGlzIG5lY2Vzc2FyeSBmb3IgbG9jYWwgZGVtb3MgbW9zdGx5LCBhdHRhY2hpbmcgZGlyZWN0bHlcbiAgICAgIC8vIHRvIHR3byBkaWZmZXJlbnQgc2VuZGVycyBkb2VzIG5vdCB3b3JrIChidWlsZCAxMDU0NykuXG4gICAgICAvLyBGaXhlZCBpbiAxNTAyNSAob3IgZWFybGllcilcbiAgICAgIHZhciBjbG9uZWRTdHJlYW0gPSBzdHJlYW0uY2xvbmUoKTtcbiAgICAgIHN0cmVhbS5nZXRUcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uKHRyYWNrLCBpZHgpIHtcbiAgICAgICAgdmFyIGNsb25lZFRyYWNrID0gY2xvbmVkU3RyZWFtLmdldFRyYWNrcygpW2lkeF07XG4gICAgICAgIHRyYWNrLmFkZEV2ZW50TGlzdGVuZXIoJ2VuYWJsZWQnLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgIGNsb25lZFRyYWNrLmVuYWJsZWQgPSBldmVudC5lbmFibGVkO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgY2xvbmVkU3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2goZnVuY3Rpb24odHJhY2spIHtcbiAgICAgICAgcGMuYWRkVHJhY2sodHJhY2ssIGNsb25lZFN0cmVhbSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnJlbW92ZVRyYWNrID0gZnVuY3Rpb24oc2VuZGVyKSB7XG4gICAgaWYgKHRoaXMuX2lzQ2xvc2VkKSB7XG4gICAgICB0aHJvdyBtYWtlRXJyb3IoJ0ludmFsaWRTdGF0ZUVycm9yJyxcbiAgICAgICAgICAnQXR0ZW1wdGVkIHRvIGNhbGwgcmVtb3ZlVHJhY2sgb24gYSBjbG9zZWQgcGVlcmNvbm5lY3Rpb24uJyk7XG4gICAgfVxuXG4gICAgaWYgKCEoc2VuZGVyIGluc3RhbmNlb2Ygd2luZG93LlJUQ1J0cFNlbmRlcikpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IDEgb2YgUlRDUGVlckNvbm5lY3Rpb24ucmVtb3ZlVHJhY2sgJyArXG4gICAgICAgICAgJ2RvZXMgbm90IGltcGxlbWVudCBpbnRlcmZhY2UgUlRDUnRwU2VuZGVyLicpO1xuICAgIH1cblxuICAgIHZhciB0cmFuc2NlaXZlciA9IHRoaXMudHJhbnNjZWl2ZXJzLmZpbmQoZnVuY3Rpb24odCkge1xuICAgICAgcmV0dXJuIHQucnRwU2VuZGVyID09PSBzZW5kZXI7XG4gICAgfSk7XG5cbiAgICBpZiAoIXRyYW5zY2VpdmVyKSB7XG4gICAgICB0aHJvdyBtYWtlRXJyb3IoJ0ludmFsaWRBY2Nlc3NFcnJvcicsXG4gICAgICAgICAgJ1NlbmRlciB3YXMgbm90IGNyZWF0ZWQgYnkgdGhpcyBjb25uZWN0aW9uLicpO1xuICAgIH1cbiAgICB2YXIgc3RyZWFtID0gdHJhbnNjZWl2ZXIuc3RyZWFtO1xuXG4gICAgdHJhbnNjZWl2ZXIucnRwU2VuZGVyLnN0b3AoKTtcbiAgICB0cmFuc2NlaXZlci5ydHBTZW5kZXIgPSBudWxsO1xuICAgIHRyYW5zY2VpdmVyLnRyYWNrID0gbnVsbDtcbiAgICB0cmFuc2NlaXZlci5zdHJlYW0gPSBudWxsO1xuXG4gICAgLy8gcmVtb3ZlIHRoZSBzdHJlYW0gZnJvbSB0aGUgc2V0IG9mIGxvY2FsIHN0cmVhbXNcbiAgICB2YXIgbG9jYWxTdHJlYW1zID0gdGhpcy50cmFuc2NlaXZlcnMubWFwKGZ1bmN0aW9uKHQpIHtcbiAgICAgIHJldHVybiB0LnN0cmVhbTtcbiAgICB9KTtcbiAgICBpZiAobG9jYWxTdHJlYW1zLmluZGV4T2Yoc3RyZWFtKSA9PT0gLTEgJiZcbiAgICAgICAgdGhpcy5sb2NhbFN0cmVhbXMuaW5kZXhPZihzdHJlYW0pID4gLTEpIHtcbiAgICAgIHRoaXMubG9jYWxTdHJlYW1zLnNwbGljZSh0aGlzLmxvY2FsU3RyZWFtcy5pbmRleE9mKHN0cmVhbSksIDEpO1xuICAgIH1cblxuICAgIHRoaXMuX21heWJlRmlyZU5lZ290aWF0aW9uTmVlZGVkKCk7XG4gIH07XG5cbiAgUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnJlbW92ZVN0cmVhbSA9IGZ1bmN0aW9uKHN0cmVhbSkge1xuICAgIHZhciBwYyA9IHRoaXM7XG4gICAgc3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2goZnVuY3Rpb24odHJhY2spIHtcbiAgICAgIHZhciBzZW5kZXIgPSBwYy5nZXRTZW5kZXJzKCkuZmluZChmdW5jdGlvbihzKSB7XG4gICAgICAgIHJldHVybiBzLnRyYWNrID09PSB0cmFjaztcbiAgICAgIH0pO1xuICAgICAgaWYgKHNlbmRlcikge1xuICAgICAgICBwYy5yZW1vdmVUcmFjayhzZW5kZXIpO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTZW5kZXJzID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudHJhbnNjZWl2ZXJzLmZpbHRlcihmdW5jdGlvbih0cmFuc2NlaXZlcikge1xuICAgICAgcmV0dXJuICEhdHJhbnNjZWl2ZXIucnRwU2VuZGVyO1xuICAgIH0pXG4gICAgLm1hcChmdW5jdGlvbih0cmFuc2NlaXZlcikge1xuICAgICAgcmV0dXJuIHRyYW5zY2VpdmVyLnJ0cFNlbmRlcjtcbiAgICB9KTtcbiAgfTtcblxuICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0UmVjZWl2ZXJzID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudHJhbnNjZWl2ZXJzLmZpbHRlcihmdW5jdGlvbih0cmFuc2NlaXZlcikge1xuICAgICAgcmV0dXJuICEhdHJhbnNjZWl2ZXIucnRwUmVjZWl2ZXI7XG4gICAgfSlcbiAgICAubWFwKGZ1bmN0aW9uKHRyYW5zY2VpdmVyKSB7XG4gICAgICByZXR1cm4gdHJhbnNjZWl2ZXIucnRwUmVjZWl2ZXI7XG4gICAgfSk7XG4gIH07XG5cblxuICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuX2NyZWF0ZUljZUdhdGhlcmVyID0gZnVuY3Rpb24oc2RwTUxpbmVJbmRleCxcbiAgICAgIHVzaW5nQnVuZGxlKSB7XG4gICAgdmFyIHBjID0gdGhpcztcbiAgICBpZiAodXNpbmdCdW5kbGUgJiYgc2RwTUxpbmVJbmRleCA+IDApIHtcbiAgICAgIHJldHVybiB0aGlzLnRyYW5zY2VpdmVyc1swXS5pY2VHYXRoZXJlcjtcbiAgICB9IGVsc2UgaWYgKHRoaXMuX2ljZUdhdGhlcmVycy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9pY2VHYXRoZXJlcnMuc2hpZnQoKTtcbiAgICB9XG4gICAgdmFyIGljZUdhdGhlcmVyID0gbmV3IHdpbmRvdy5SVENJY2VHYXRoZXJlcih7XG4gICAgICBpY2VTZXJ2ZXJzOiB0aGlzLl9jb25maWcuaWNlU2VydmVycyxcbiAgICAgIGdhdGhlclBvbGljeTogdGhpcy5fY29uZmlnLmljZVRyYW5zcG9ydFBvbGljeVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpY2VHYXRoZXJlciwgJ3N0YXRlJyxcbiAgICAgICAge3ZhbHVlOiAnbmV3Jywgd3JpdGFibGU6IHRydWV9XG4gICAgKTtcblxuICAgIHRoaXMudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdLmJ1ZmZlcmVkQ2FuZGlkYXRlRXZlbnRzID0gW107XG4gICAgdGhpcy50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0uYnVmZmVyQ2FuZGlkYXRlcyA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICB2YXIgZW5kID0gIWV2ZW50LmNhbmRpZGF0ZSB8fCBPYmplY3Qua2V5cyhldmVudC5jYW5kaWRhdGUpLmxlbmd0aCA9PT0gMDtcbiAgICAgIC8vIHBvbHlmaWxsIHNpbmNlIFJUQ0ljZUdhdGhlcmVyLnN0YXRlIGlzIG5vdCBpbXBsZW1lbnRlZCBpblxuICAgICAgLy8gRWRnZSAxMDU0NyB5ZXQuXG4gICAgICBpY2VHYXRoZXJlci5zdGF0ZSA9IGVuZCA/ICdjb21wbGV0ZWQnIDogJ2dhdGhlcmluZyc7XG4gICAgICBpZiAocGMudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdLmJ1ZmZlcmVkQ2FuZGlkYXRlRXZlbnRzICE9PSBudWxsKSB7XG4gICAgICAgIHBjLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XS5idWZmZXJlZENhbmRpZGF0ZUV2ZW50cy5wdXNoKGV2ZW50KTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGljZUdhdGhlcmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2xvY2FsY2FuZGlkYXRlJyxcbiAgICAgIHRoaXMudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdLmJ1ZmZlckNhbmRpZGF0ZXMpO1xuICAgIHJldHVybiBpY2VHYXRoZXJlcjtcbiAgfTtcblxuICAvLyBzdGFydCBnYXRoZXJpbmcgZnJvbSBhbiBSVENJY2VHYXRoZXJlci5cbiAgUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLl9nYXRoZXIgPSBmdW5jdGlvbihtaWQsIHNkcE1MaW5lSW5kZXgpIHtcbiAgICB2YXIgcGMgPSB0aGlzO1xuICAgIHZhciBpY2VHYXRoZXJlciA9IHRoaXMudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdLmljZUdhdGhlcmVyO1xuICAgIGlmIChpY2VHYXRoZXJlci5vbmxvY2FsY2FuZGlkYXRlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBidWZmZXJlZENhbmRpZGF0ZUV2ZW50cyA9XG4gICAgICB0aGlzLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XS5idWZmZXJlZENhbmRpZGF0ZUV2ZW50cztcbiAgICB0aGlzLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XS5idWZmZXJlZENhbmRpZGF0ZUV2ZW50cyA9IG51bGw7XG4gICAgaWNlR2F0aGVyZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignbG9jYWxjYW5kaWRhdGUnLFxuICAgICAgdGhpcy50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0uYnVmZmVyQ2FuZGlkYXRlcyk7XG4gICAgaWNlR2F0aGVyZXIub25sb2NhbGNhbmRpZGF0ZSA9IGZ1bmN0aW9uKGV2dCkge1xuICAgICAgaWYgKHBjLnVzaW5nQnVuZGxlICYmIHNkcE1MaW5lSW5kZXggPiAwKSB7XG4gICAgICAgIC8vIGlmIHdlIGtub3cgdGhhdCB3ZSB1c2UgYnVuZGxlIHdlIGNhbiBkcm9wIGNhbmRpZGF0ZXMgd2l0aFxuICAgICAgICAvLyDRlWRwTUxpbmVJbmRleCA+IDAuIElmIHdlIGRvbid0IGRvIHRoaXMgdGhlbiBvdXIgc3RhdGUgZ2V0c1xuICAgICAgICAvLyBjb25mdXNlZCBzaW5jZSB3ZSBkaXNwb3NlIHRoZSBleHRyYSBpY2UgZ2F0aGVyZXIuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHZhciBldmVudCA9IG5ldyBFdmVudCgnaWNlY2FuZGlkYXRlJyk7XG4gICAgICBldmVudC5jYW5kaWRhdGUgPSB7c2RwTWlkOiBtaWQsIHNkcE1MaW5lSW5kZXg6IHNkcE1MaW5lSW5kZXh9O1xuXG4gICAgICB2YXIgY2FuZCA9IGV2dC5jYW5kaWRhdGU7XG4gICAgICAvLyBFZGdlIGVtaXRzIGFuIGVtcHR5IG9iamVjdCBmb3IgUlRDSWNlQ2FuZGlkYXRlQ29tcGxldGXigKVcbiAgICAgIHZhciBlbmQgPSAhY2FuZCB8fCBPYmplY3Qua2V5cyhjYW5kKS5sZW5ndGggPT09IDA7XG4gICAgICBpZiAoZW5kKSB7XG4gICAgICAgIC8vIHBvbHlmaWxsIHNpbmNlIFJUQ0ljZUdhdGhlcmVyLnN0YXRlIGlzIG5vdCBpbXBsZW1lbnRlZCBpblxuICAgICAgICAvLyBFZGdlIDEwNTQ3IHlldC5cbiAgICAgICAgaWYgKGljZUdhdGhlcmVyLnN0YXRlID09PSAnbmV3JyB8fCBpY2VHYXRoZXJlci5zdGF0ZSA9PT0gJ2dhdGhlcmluZycpIHtcbiAgICAgICAgICBpY2VHYXRoZXJlci5zdGF0ZSA9ICdjb21wbGV0ZWQnO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoaWNlR2F0aGVyZXIuc3RhdGUgPT09ICduZXcnKSB7XG4gICAgICAgICAgaWNlR2F0aGVyZXIuc3RhdGUgPSAnZ2F0aGVyaW5nJztcbiAgICAgICAgfVxuICAgICAgICAvLyBSVENJY2VDYW5kaWRhdGUgZG9lc24ndCBoYXZlIGEgY29tcG9uZW50LCBuZWVkcyB0byBiZSBhZGRlZFxuICAgICAgICBjYW5kLmNvbXBvbmVudCA9IDE7XG4gICAgICAgIHZhciBzZXJpYWxpemVkQ2FuZGlkYXRlID0gU0RQVXRpbHMud3JpdGVDYW5kaWRhdGUoY2FuZCk7XG4gICAgICAgIGV2ZW50LmNhbmRpZGF0ZSA9IE9iamVjdC5hc3NpZ24oZXZlbnQuY2FuZGlkYXRlLFxuICAgICAgICAgICAgU0RQVXRpbHMucGFyc2VDYW5kaWRhdGUoc2VyaWFsaXplZENhbmRpZGF0ZSkpO1xuICAgICAgICBldmVudC5jYW5kaWRhdGUuY2FuZGlkYXRlID0gc2VyaWFsaXplZENhbmRpZGF0ZTtcbiAgICAgIH1cblxuICAgICAgLy8gdXBkYXRlIGxvY2FsIGRlc2NyaXB0aW9uLlxuICAgICAgdmFyIHNlY3Rpb25zID0gU0RQVXRpbHMuZ2V0TWVkaWFTZWN0aW9ucyhwYy5sb2NhbERlc2NyaXB0aW9uLnNkcCk7XG4gICAgICBpZiAoIWVuZCkge1xuICAgICAgICBzZWN0aW9uc1tldmVudC5jYW5kaWRhdGUuc2RwTUxpbmVJbmRleF0gKz1cbiAgICAgICAgICAgICdhPScgKyBldmVudC5jYW5kaWRhdGUuY2FuZGlkYXRlICsgJ1xcclxcbic7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZWN0aW9uc1tldmVudC5jYW5kaWRhdGUuc2RwTUxpbmVJbmRleF0gKz1cbiAgICAgICAgICAgICdhPWVuZC1vZi1jYW5kaWRhdGVzXFxyXFxuJztcbiAgICAgIH1cbiAgICAgIHBjLmxvY2FsRGVzY3JpcHRpb24uc2RwID1cbiAgICAgICAgICBTRFBVdGlscy5nZXREZXNjcmlwdGlvbihwYy5sb2NhbERlc2NyaXB0aW9uLnNkcCkgK1xuICAgICAgICAgIHNlY3Rpb25zLmpvaW4oJycpO1xuICAgICAgdmFyIGNvbXBsZXRlID0gcGMudHJhbnNjZWl2ZXJzLmV2ZXJ5KGZ1bmN0aW9uKHRyYW5zY2VpdmVyKSB7XG4gICAgICAgIHJldHVybiB0cmFuc2NlaXZlci5pY2VHYXRoZXJlciAmJlxuICAgICAgICAgICAgdHJhbnNjZWl2ZXIuaWNlR2F0aGVyZXIuc3RhdGUgPT09ICdjb21wbGV0ZWQnO1xuICAgICAgfSk7XG5cbiAgICAgIGlmIChwYy5pY2VHYXRoZXJpbmdTdGF0ZSAhPT0gJ2dhdGhlcmluZycpIHtcbiAgICAgICAgcGMuaWNlR2F0aGVyaW5nU3RhdGUgPSAnZ2F0aGVyaW5nJztcbiAgICAgICAgcGMuX2VtaXRHYXRoZXJpbmdTdGF0ZUNoYW5nZSgpO1xuICAgICAgfVxuXG4gICAgICAvLyBFbWl0IGNhbmRpZGF0ZS4gQWxzbyBlbWl0IG51bGwgY2FuZGlkYXRlIHdoZW4gYWxsIGdhdGhlcmVycyBhcmVcbiAgICAgIC8vIGNvbXBsZXRlLlxuICAgICAgaWYgKCFlbmQpIHtcbiAgICAgICAgcGMuX2Rpc3BhdGNoRXZlbnQoJ2ljZWNhbmRpZGF0ZScsIGV2ZW50KTtcbiAgICAgIH1cbiAgICAgIGlmIChjb21wbGV0ZSkge1xuICAgICAgICBwYy5fZGlzcGF0Y2hFdmVudCgnaWNlY2FuZGlkYXRlJywgbmV3IEV2ZW50KCdpY2VjYW5kaWRhdGUnKSk7XG4gICAgICAgIHBjLmljZUdhdGhlcmluZ1N0YXRlID0gJ2NvbXBsZXRlJztcbiAgICAgICAgcGMuX2VtaXRHYXRoZXJpbmdTdGF0ZUNoYW5nZSgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBlbWl0IGFscmVhZHkgZ2F0aGVyZWQgY2FuZGlkYXRlcy5cbiAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIGJ1ZmZlcmVkQ2FuZGlkYXRlRXZlbnRzLmZvckVhY2goZnVuY3Rpb24oZSkge1xuICAgICAgICBpY2VHYXRoZXJlci5vbmxvY2FsY2FuZGlkYXRlKGUpO1xuICAgICAgfSk7XG4gICAgfSwgMCk7XG4gIH07XG5cbiAgLy8gQ3JlYXRlIElDRSB0cmFuc3BvcnQgYW5kIERUTFMgdHJhbnNwb3J0LlxuICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuX2NyZWF0ZUljZUFuZER0bHNUcmFuc3BvcnRzID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHBjID0gdGhpcztcbiAgICB2YXIgaWNlVHJhbnNwb3J0ID0gbmV3IHdpbmRvdy5SVENJY2VUcmFuc3BvcnQobnVsbCk7XG4gICAgaWNlVHJhbnNwb3J0Lm9uaWNlc3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgIHBjLl91cGRhdGVJY2VDb25uZWN0aW9uU3RhdGUoKTtcbiAgICAgIHBjLl91cGRhdGVDb25uZWN0aW9uU3RhdGUoKTtcbiAgICB9O1xuXG4gICAgdmFyIGR0bHNUcmFuc3BvcnQgPSBuZXcgd2luZG93LlJUQ0R0bHNUcmFuc3BvcnQoaWNlVHJhbnNwb3J0KTtcbiAgICBkdGxzVHJhbnNwb3J0Lm9uZHRsc3N0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gICAgICBwYy5fdXBkYXRlQ29ubmVjdGlvblN0YXRlKCk7XG4gICAgfTtcbiAgICBkdGxzVHJhbnNwb3J0Lm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICAgIC8vIG9uZXJyb3IgZG9lcyBub3Qgc2V0IHN0YXRlIHRvIGZhaWxlZCBieSBpdHNlbGYuXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZHRsc1RyYW5zcG9ydCwgJ3N0YXRlJyxcbiAgICAgICAgICB7dmFsdWU6ICdmYWlsZWQnLCB3cml0YWJsZTogdHJ1ZX0pO1xuICAgICAgcGMuX3VwZGF0ZUNvbm5lY3Rpb25TdGF0ZSgpO1xuICAgIH07XG5cbiAgICByZXR1cm4ge1xuICAgICAgaWNlVHJhbnNwb3J0OiBpY2VUcmFuc3BvcnQsXG4gICAgICBkdGxzVHJhbnNwb3J0OiBkdGxzVHJhbnNwb3J0XG4gICAgfTtcbiAgfTtcblxuICAvLyBEZXN0cm95IElDRSBnYXRoZXJlciwgSUNFIHRyYW5zcG9ydCBhbmQgRFRMUyB0cmFuc3BvcnQuXG4gIC8vIFdpdGhvdXQgdHJpZ2dlcmluZyB0aGUgY2FsbGJhY2tzLlxuICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuX2Rpc3Bvc2VJY2VBbmREdGxzVHJhbnNwb3J0cyA9IGZ1bmN0aW9uKFxuICAgICAgc2RwTUxpbmVJbmRleCkge1xuICAgIHZhciBpY2VHYXRoZXJlciA9IHRoaXMudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdLmljZUdhdGhlcmVyO1xuICAgIGlmIChpY2VHYXRoZXJlcikge1xuICAgICAgZGVsZXRlIGljZUdhdGhlcmVyLm9ubG9jYWxjYW5kaWRhdGU7XG4gICAgICBkZWxldGUgdGhpcy50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0uaWNlR2F0aGVyZXI7XG4gICAgfVxuICAgIHZhciBpY2VUcmFuc3BvcnQgPSB0aGlzLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XS5pY2VUcmFuc3BvcnQ7XG4gICAgaWYgKGljZVRyYW5zcG9ydCkge1xuICAgICAgZGVsZXRlIGljZVRyYW5zcG9ydC5vbmljZXN0YXRlY2hhbmdlO1xuICAgICAgZGVsZXRlIHRoaXMudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdLmljZVRyYW5zcG9ydDtcbiAgICB9XG4gICAgdmFyIGR0bHNUcmFuc3BvcnQgPSB0aGlzLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XS5kdGxzVHJhbnNwb3J0O1xuICAgIGlmIChkdGxzVHJhbnNwb3J0KSB7XG4gICAgICBkZWxldGUgZHRsc1RyYW5zcG9ydC5vbmR0bHNzdGF0ZWNoYW5nZTtcbiAgICAgIGRlbGV0ZSBkdGxzVHJhbnNwb3J0Lm9uZXJyb3I7XG4gICAgICBkZWxldGUgdGhpcy50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0uZHRsc1RyYW5zcG9ydDtcbiAgICB9XG4gIH07XG5cbiAgLy8gU3RhcnQgdGhlIFJUUCBTZW5kZXIgYW5kIFJlY2VpdmVyIGZvciBhIHRyYW5zY2VpdmVyLlxuICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuX3RyYW5zY2VpdmUgPSBmdW5jdGlvbih0cmFuc2NlaXZlcixcbiAgICAgIHNlbmQsIHJlY3YpIHtcbiAgICB2YXIgcGFyYW1zID0gZ2V0Q29tbW9uQ2FwYWJpbGl0aWVzKHRyYW5zY2VpdmVyLmxvY2FsQ2FwYWJpbGl0aWVzLFxuICAgICAgICB0cmFuc2NlaXZlci5yZW1vdGVDYXBhYmlsaXRpZXMpO1xuICAgIGlmIChzZW5kICYmIHRyYW5zY2VpdmVyLnJ0cFNlbmRlcikge1xuICAgICAgcGFyYW1zLmVuY29kaW5ncyA9IHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnM7XG4gICAgICBwYXJhbXMucnRjcCA9IHtcbiAgICAgICAgY25hbWU6IFNEUFV0aWxzLmxvY2FsQ05hbWUsXG4gICAgICAgIGNvbXBvdW5kOiB0cmFuc2NlaXZlci5ydGNwUGFyYW1ldGVycy5jb21wb3VuZFxuICAgICAgfTtcbiAgICAgIGlmICh0cmFuc2NlaXZlci5yZWN2RW5jb2RpbmdQYXJhbWV0ZXJzLmxlbmd0aCkge1xuICAgICAgICBwYXJhbXMucnRjcC5zc3JjID0gdHJhbnNjZWl2ZXIucmVjdkVuY29kaW5nUGFyYW1ldGVyc1swXS5zc3JjO1xuICAgICAgfVxuICAgICAgdHJhbnNjZWl2ZXIucnRwU2VuZGVyLnNlbmQocGFyYW1zKTtcbiAgICB9XG4gICAgaWYgKHJlY3YgJiYgdHJhbnNjZWl2ZXIucnRwUmVjZWl2ZXIgJiYgcGFyYW1zLmNvZGVjcy5sZW5ndGggPiAwKSB7XG4gICAgICAvLyByZW1vdmUgUlRYIGZpZWxkIGluIEVkZ2UgMTQ5NDJcbiAgICAgIGlmICh0cmFuc2NlaXZlci5raW5kID09PSAndmlkZW8nXG4gICAgICAgICAgJiYgdHJhbnNjZWl2ZXIucmVjdkVuY29kaW5nUGFyYW1ldGVyc1xuICAgICAgICAgICYmIGVkZ2VWZXJzaW9uIDwgMTUwMTkpIHtcbiAgICAgICAgdHJhbnNjZWl2ZXIucmVjdkVuY29kaW5nUGFyYW1ldGVycy5mb3JFYWNoKGZ1bmN0aW9uKHApIHtcbiAgICAgICAgICBkZWxldGUgcC5ydHg7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKHRyYW5zY2VpdmVyLnJlY3ZFbmNvZGluZ1BhcmFtZXRlcnMubGVuZ3RoKSB7XG4gICAgICAgIHBhcmFtcy5lbmNvZGluZ3MgPSB0cmFuc2NlaXZlci5yZWN2RW5jb2RpbmdQYXJhbWV0ZXJzO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGFyYW1zLmVuY29kaW5ncyA9IFt7fV07XG4gICAgICB9XG4gICAgICBwYXJhbXMucnRjcCA9IHtcbiAgICAgICAgY29tcG91bmQ6IHRyYW5zY2VpdmVyLnJ0Y3BQYXJhbWV0ZXJzLmNvbXBvdW5kXG4gICAgICB9O1xuICAgICAgaWYgKHRyYW5zY2VpdmVyLnJ0Y3BQYXJhbWV0ZXJzLmNuYW1lKSB7XG4gICAgICAgIHBhcmFtcy5ydGNwLmNuYW1lID0gdHJhbnNjZWl2ZXIucnRjcFBhcmFtZXRlcnMuY25hbWU7XG4gICAgICB9XG4gICAgICBpZiAodHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVycy5sZW5ndGgpIHtcbiAgICAgICAgcGFyYW1zLnJ0Y3Auc3NyYyA9IHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0uc3NyYztcbiAgICAgIH1cbiAgICAgIHRyYW5zY2VpdmVyLnJ0cFJlY2VpdmVyLnJlY2VpdmUocGFyYW1zKTtcbiAgICB9XG4gIH07XG5cbiAgUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnNldExvY2FsRGVzY3JpcHRpb24gPSBmdW5jdGlvbihkZXNjcmlwdGlvbikge1xuICAgIHZhciBwYyA9IHRoaXM7XG5cbiAgICAvLyBOb3RlOiBwcmFuc3dlciBpcyBub3Qgc3VwcG9ydGVkLlxuICAgIGlmIChbJ29mZmVyJywgJ2Fuc3dlciddLmluZGV4T2YoZGVzY3JpcHRpb24udHlwZSkgPT09IC0xKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobWFrZUVycm9yKCdUeXBlRXJyb3InLFxuICAgICAgICAgICdVbnN1cHBvcnRlZCB0eXBlIFwiJyArIGRlc2NyaXB0aW9uLnR5cGUgKyAnXCInKSk7XG4gICAgfVxuXG4gICAgaWYgKCFpc0FjdGlvbkFsbG93ZWRJblNpZ25hbGluZ1N0YXRlKCdzZXRMb2NhbERlc2NyaXB0aW9uJyxcbiAgICAgICAgZGVzY3JpcHRpb24udHlwZSwgcGMuc2lnbmFsaW5nU3RhdGUpIHx8IHBjLl9pc0Nsb3NlZCkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG1ha2VFcnJvcignSW52YWxpZFN0YXRlRXJyb3InLFxuICAgICAgICAgICdDYW4gbm90IHNldCBsb2NhbCAnICsgZGVzY3JpcHRpb24udHlwZSArXG4gICAgICAgICAgJyBpbiBzdGF0ZSAnICsgcGMuc2lnbmFsaW5nU3RhdGUpKTtcbiAgICB9XG5cbiAgICB2YXIgc2VjdGlvbnM7XG4gICAgdmFyIHNlc3Npb25wYXJ0O1xuICAgIGlmIChkZXNjcmlwdGlvbi50eXBlID09PSAnb2ZmZXInKSB7XG4gICAgICAvLyBWRVJZIGxpbWl0ZWQgc3VwcG9ydCBmb3IgU0RQIG11bmdpbmcuIExpbWl0ZWQgdG86XG4gICAgICAvLyAqIGNoYW5naW5nIHRoZSBvcmRlciBvZiBjb2RlY3NcbiAgICAgIHNlY3Rpb25zID0gU0RQVXRpbHMuc3BsaXRTZWN0aW9ucyhkZXNjcmlwdGlvbi5zZHApO1xuICAgICAgc2Vzc2lvbnBhcnQgPSBzZWN0aW9ucy5zaGlmdCgpO1xuICAgICAgc2VjdGlvbnMuZm9yRWFjaChmdW5jdGlvbihtZWRpYVNlY3Rpb24sIHNkcE1MaW5lSW5kZXgpIHtcbiAgICAgICAgdmFyIGNhcHMgPSBTRFBVdGlscy5wYXJzZVJ0cFBhcmFtZXRlcnMobWVkaWFTZWN0aW9uKTtcbiAgICAgICAgcGMudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdLmxvY2FsQ2FwYWJpbGl0aWVzID0gY2FwcztcbiAgICAgIH0pO1xuXG4gICAgICBwYy50cmFuc2NlaXZlcnMuZm9yRWFjaChmdW5jdGlvbih0cmFuc2NlaXZlciwgc2RwTUxpbmVJbmRleCkge1xuICAgICAgICBwYy5fZ2F0aGVyKHRyYW5zY2VpdmVyLm1pZCwgc2RwTUxpbmVJbmRleCk7XG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKGRlc2NyaXB0aW9uLnR5cGUgPT09ICdhbnN3ZXInKSB7XG4gICAgICBzZWN0aW9ucyA9IFNEUFV0aWxzLnNwbGl0U2VjdGlvbnMocGMucmVtb3RlRGVzY3JpcHRpb24uc2RwKTtcbiAgICAgIHNlc3Npb25wYXJ0ID0gc2VjdGlvbnMuc2hpZnQoKTtcbiAgICAgIHZhciBpc0ljZUxpdGUgPSBTRFBVdGlscy5tYXRjaFByZWZpeChzZXNzaW9ucGFydCxcbiAgICAgICAgICAnYT1pY2UtbGl0ZScpLmxlbmd0aCA+IDA7XG4gICAgICBzZWN0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uKG1lZGlhU2VjdGlvbiwgc2RwTUxpbmVJbmRleCkge1xuICAgICAgICB2YXIgdHJhbnNjZWl2ZXIgPSBwYy50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF07XG4gICAgICAgIHZhciBpY2VHYXRoZXJlciA9IHRyYW5zY2VpdmVyLmljZUdhdGhlcmVyO1xuICAgICAgICB2YXIgaWNlVHJhbnNwb3J0ID0gdHJhbnNjZWl2ZXIuaWNlVHJhbnNwb3J0O1xuICAgICAgICB2YXIgZHRsc1RyYW5zcG9ydCA9IHRyYW5zY2VpdmVyLmR0bHNUcmFuc3BvcnQ7XG4gICAgICAgIHZhciBsb2NhbENhcGFiaWxpdGllcyA9IHRyYW5zY2VpdmVyLmxvY2FsQ2FwYWJpbGl0aWVzO1xuICAgICAgICB2YXIgcmVtb3RlQ2FwYWJpbGl0aWVzID0gdHJhbnNjZWl2ZXIucmVtb3RlQ2FwYWJpbGl0aWVzO1xuXG4gICAgICAgIC8vIHRyZWF0IGJ1bmRsZS1vbmx5IGFzIG5vdC1yZWplY3RlZC5cbiAgICAgICAgdmFyIHJlamVjdGVkID0gU0RQVXRpbHMuaXNSZWplY3RlZChtZWRpYVNlY3Rpb24pICYmXG4gICAgICAgICAgICBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdhPWJ1bmRsZS1vbmx5JykubGVuZ3RoID09PSAwO1xuXG4gICAgICAgIGlmICghcmVqZWN0ZWQgJiYgIXRyYW5zY2VpdmVyLnJlamVjdGVkKSB7XG4gICAgICAgICAgdmFyIHJlbW90ZUljZVBhcmFtZXRlcnMgPSBTRFBVdGlscy5nZXRJY2VQYXJhbWV0ZXJzKFxuICAgICAgICAgICAgICBtZWRpYVNlY3Rpb24sIHNlc3Npb25wYXJ0KTtcbiAgICAgICAgICB2YXIgcmVtb3RlRHRsc1BhcmFtZXRlcnMgPSBTRFBVdGlscy5nZXREdGxzUGFyYW1ldGVycyhcbiAgICAgICAgICAgICAgbWVkaWFTZWN0aW9uLCBzZXNzaW9ucGFydCk7XG4gICAgICAgICAgaWYgKGlzSWNlTGl0ZSkge1xuICAgICAgICAgICAgcmVtb3RlRHRsc1BhcmFtZXRlcnMucm9sZSA9ICdzZXJ2ZXInO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICghcGMudXNpbmdCdW5kbGUgfHwgc2RwTUxpbmVJbmRleCA9PT0gMCkge1xuICAgICAgICAgICAgcGMuX2dhdGhlcih0cmFuc2NlaXZlci5taWQsIHNkcE1MaW5lSW5kZXgpO1xuICAgICAgICAgICAgaWYgKGljZVRyYW5zcG9ydC5zdGF0ZSA9PT0gJ25ldycpIHtcbiAgICAgICAgICAgICAgaWNlVHJhbnNwb3J0LnN0YXJ0KGljZUdhdGhlcmVyLCByZW1vdGVJY2VQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgaXNJY2VMaXRlID8gJ2NvbnRyb2xsaW5nJyA6ICdjb250cm9sbGVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZHRsc1RyYW5zcG9ydC5zdGF0ZSA9PT0gJ25ldycpIHtcbiAgICAgICAgICAgICAgZHRsc1RyYW5zcG9ydC5zdGFydChyZW1vdGVEdGxzUGFyYW1ldGVycyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gQ2FsY3VsYXRlIGludGVyc2VjdGlvbiBvZiBjYXBhYmlsaXRpZXMuXG4gICAgICAgICAgdmFyIHBhcmFtcyA9IGdldENvbW1vbkNhcGFiaWxpdGllcyhsb2NhbENhcGFiaWxpdGllcyxcbiAgICAgICAgICAgICAgcmVtb3RlQ2FwYWJpbGl0aWVzKTtcblxuICAgICAgICAgIC8vIFN0YXJ0IHRoZSBSVENSdHBTZW5kZXIuIFRoZSBSVENSdHBSZWNlaXZlciBmb3IgdGhpc1xuICAgICAgICAgIC8vIHRyYW5zY2VpdmVyIGhhcyBhbHJlYWR5IGJlZW4gc3RhcnRlZCBpbiBzZXRSZW1vdGVEZXNjcmlwdGlvbi5cbiAgICAgICAgICBwYy5fdHJhbnNjZWl2ZSh0cmFuc2NlaXZlcixcbiAgICAgICAgICAgICAgcGFyYW1zLmNvZGVjcy5sZW5ndGggPiAwLFxuICAgICAgICAgICAgICBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHBjLmxvY2FsRGVzY3JpcHRpb24gPSB7XG4gICAgICB0eXBlOiBkZXNjcmlwdGlvbi50eXBlLFxuICAgICAgc2RwOiBkZXNjcmlwdGlvbi5zZHBcbiAgICB9O1xuICAgIGlmIChkZXNjcmlwdGlvbi50eXBlID09PSAnb2ZmZXInKSB7XG4gICAgICBwYy5fdXBkYXRlU2lnbmFsaW5nU3RhdGUoJ2hhdmUtbG9jYWwtb2ZmZXInKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcGMuX3VwZGF0ZVNpZ25hbGluZ1N0YXRlKCdzdGFibGUnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gIH07XG5cbiAgUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnNldFJlbW90ZURlc2NyaXB0aW9uID0gZnVuY3Rpb24oZGVzY3JpcHRpb24pIHtcbiAgICB2YXIgcGMgPSB0aGlzO1xuXG4gICAgLy8gTm90ZTogcHJhbnN3ZXIgaXMgbm90IHN1cHBvcnRlZC5cbiAgICBpZiAoWydvZmZlcicsICdhbnN3ZXInXS5pbmRleE9mKGRlc2NyaXB0aW9uLnR5cGUpID09PSAtMSkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG1ha2VFcnJvcignVHlwZUVycm9yJyxcbiAgICAgICAgICAnVW5zdXBwb3J0ZWQgdHlwZSBcIicgKyBkZXNjcmlwdGlvbi50eXBlICsgJ1wiJykpO1xuICAgIH1cblxuICAgIGlmICghaXNBY3Rpb25BbGxvd2VkSW5TaWduYWxpbmdTdGF0ZSgnc2V0UmVtb3RlRGVzY3JpcHRpb24nLFxuICAgICAgICBkZXNjcmlwdGlvbi50eXBlLCBwYy5zaWduYWxpbmdTdGF0ZSkgfHwgcGMuX2lzQ2xvc2VkKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobWFrZUVycm9yKCdJbnZhbGlkU3RhdGVFcnJvcicsXG4gICAgICAgICAgJ0NhbiBub3Qgc2V0IHJlbW90ZSAnICsgZGVzY3JpcHRpb24udHlwZSArXG4gICAgICAgICAgJyBpbiBzdGF0ZSAnICsgcGMuc2lnbmFsaW5nU3RhdGUpKTtcbiAgICB9XG5cbiAgICB2YXIgc3RyZWFtcyA9IHt9O1xuICAgIHBjLnJlbW90ZVN0cmVhbXMuZm9yRWFjaChmdW5jdGlvbihzdHJlYW0pIHtcbiAgICAgIHN0cmVhbXNbc3RyZWFtLmlkXSA9IHN0cmVhbTtcbiAgICB9KTtcbiAgICB2YXIgcmVjZWl2ZXJMaXN0ID0gW107XG4gICAgdmFyIHNlY3Rpb25zID0gU0RQVXRpbHMuc3BsaXRTZWN0aW9ucyhkZXNjcmlwdGlvbi5zZHApO1xuICAgIHZhciBzZXNzaW9ucGFydCA9IHNlY3Rpb25zLnNoaWZ0KCk7XG4gICAgdmFyIGlzSWNlTGl0ZSA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KHNlc3Npb25wYXJ0LFxuICAgICAgICAnYT1pY2UtbGl0ZScpLmxlbmd0aCA+IDA7XG4gICAgdmFyIHVzaW5nQnVuZGxlID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgoc2Vzc2lvbnBhcnQsXG4gICAgICAgICdhPWdyb3VwOkJVTkRMRSAnKS5sZW5ndGggPiAwO1xuICAgIHBjLnVzaW5nQnVuZGxlID0gdXNpbmdCdW5kbGU7XG4gICAgdmFyIGljZU9wdGlvbnMgPSBTRFBVdGlscy5tYXRjaFByZWZpeChzZXNzaW9ucGFydCxcbiAgICAgICAgJ2E9aWNlLW9wdGlvbnM6JylbMF07XG4gICAgaWYgKGljZU9wdGlvbnMpIHtcbiAgICAgIHBjLmNhblRyaWNrbGVJY2VDYW5kaWRhdGVzID0gaWNlT3B0aW9ucy5zdWJzdHIoMTQpLnNwbGl0KCcgJylcbiAgICAgICAgICAuaW5kZXhPZigndHJpY2tsZScpID49IDA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBjLmNhblRyaWNrbGVJY2VDYW5kaWRhdGVzID0gZmFsc2U7XG4gICAgfVxuXG4gICAgc2VjdGlvbnMuZm9yRWFjaChmdW5jdGlvbihtZWRpYVNlY3Rpb24sIHNkcE1MaW5lSW5kZXgpIHtcbiAgICAgIHZhciBsaW5lcyA9IFNEUFV0aWxzLnNwbGl0TGluZXMobWVkaWFTZWN0aW9uKTtcbiAgICAgIHZhciBraW5kID0gU0RQVXRpbHMuZ2V0S2luZChtZWRpYVNlY3Rpb24pO1xuICAgICAgLy8gdHJlYXQgYnVuZGxlLW9ubHkgYXMgbm90LXJlamVjdGVkLlxuICAgICAgdmFyIHJlamVjdGVkID0gU0RQVXRpbHMuaXNSZWplY3RlZChtZWRpYVNlY3Rpb24pICYmXG4gICAgICAgICAgU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uLCAnYT1idW5kbGUtb25seScpLmxlbmd0aCA9PT0gMDtcbiAgICAgIHZhciBwcm90b2NvbCA9IGxpbmVzWzBdLnN1YnN0cigyKS5zcGxpdCgnICcpWzJdO1xuXG4gICAgICB2YXIgZGlyZWN0aW9uID0gU0RQVXRpbHMuZ2V0RGlyZWN0aW9uKG1lZGlhU2VjdGlvbiwgc2Vzc2lvbnBhcnQpO1xuICAgICAgdmFyIHJlbW90ZU1zaWQgPSBTRFBVdGlscy5wYXJzZU1zaWQobWVkaWFTZWN0aW9uKTtcblxuICAgICAgdmFyIG1pZCA9IFNEUFV0aWxzLmdldE1pZChtZWRpYVNlY3Rpb24pIHx8IFNEUFV0aWxzLmdlbmVyYXRlSWRlbnRpZmllcigpO1xuXG4gICAgICAvLyBSZWplY3QgZGF0YWNoYW5uZWxzIHdoaWNoIGFyZSBub3QgaW1wbGVtZW50ZWQgeWV0LlxuICAgICAgaWYgKChraW5kID09PSAnYXBwbGljYXRpb24nICYmIHByb3RvY29sID09PSAnRFRMUy9TQ1RQJykgfHwgcmVqZWN0ZWQpIHtcbiAgICAgICAgLy8gVE9ETzogdGhpcyBpcyBkYW5nZXJvdXMgaW4gdGhlIGNhc2Ugd2hlcmUgYSBub24tcmVqZWN0ZWQgbS1saW5lXG4gICAgICAgIC8vICAgICBiZWNvbWVzIHJlamVjdGVkLlxuICAgICAgICBwYy50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0gPSB7XG4gICAgICAgICAgbWlkOiBtaWQsXG4gICAgICAgICAga2luZDoga2luZCxcbiAgICAgICAgICByZWplY3RlZDogdHJ1ZVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICghcmVqZWN0ZWQgJiYgcGMudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdICYmXG4gICAgICAgICAgcGMudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdLnJlamVjdGVkKSB7XG4gICAgICAgIC8vIHJlY3ljbGUgYSByZWplY3RlZCB0cmFuc2NlaXZlci5cbiAgICAgICAgcGMudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdID0gcGMuX2NyZWF0ZVRyYW5zY2VpdmVyKGtpbmQsIHRydWUpO1xuICAgICAgfVxuXG4gICAgICB2YXIgdHJhbnNjZWl2ZXI7XG4gICAgICB2YXIgaWNlR2F0aGVyZXI7XG4gICAgICB2YXIgaWNlVHJhbnNwb3J0O1xuICAgICAgdmFyIGR0bHNUcmFuc3BvcnQ7XG4gICAgICB2YXIgcnRwUmVjZWl2ZXI7XG4gICAgICB2YXIgc2VuZEVuY29kaW5nUGFyYW1ldGVycztcbiAgICAgIHZhciByZWN2RW5jb2RpbmdQYXJhbWV0ZXJzO1xuICAgICAgdmFyIGxvY2FsQ2FwYWJpbGl0aWVzO1xuXG4gICAgICB2YXIgdHJhY2s7XG4gICAgICAvLyBGSVhNRTogZW5zdXJlIHRoZSBtZWRpYVNlY3Rpb24gaGFzIHJ0Y3AtbXV4IHNldC5cbiAgICAgIHZhciByZW1vdGVDYXBhYmlsaXRpZXMgPSBTRFBVdGlscy5wYXJzZVJ0cFBhcmFtZXRlcnMobWVkaWFTZWN0aW9uKTtcbiAgICAgIHZhciByZW1vdGVJY2VQYXJhbWV0ZXJzO1xuICAgICAgdmFyIHJlbW90ZUR0bHNQYXJhbWV0ZXJzO1xuICAgICAgaWYgKCFyZWplY3RlZCkge1xuICAgICAgICByZW1vdGVJY2VQYXJhbWV0ZXJzID0gU0RQVXRpbHMuZ2V0SWNlUGFyYW1ldGVycyhtZWRpYVNlY3Rpb24sXG4gICAgICAgICAgICBzZXNzaW9ucGFydCk7XG4gICAgICAgIHJlbW90ZUR0bHNQYXJhbWV0ZXJzID0gU0RQVXRpbHMuZ2V0RHRsc1BhcmFtZXRlcnMobWVkaWFTZWN0aW9uLFxuICAgICAgICAgICAgc2Vzc2lvbnBhcnQpO1xuICAgICAgICByZW1vdGVEdGxzUGFyYW1ldGVycy5yb2xlID0gJ2NsaWVudCc7XG4gICAgICB9XG4gICAgICByZWN2RW5jb2RpbmdQYXJhbWV0ZXJzID1cbiAgICAgICAgICBTRFBVdGlscy5wYXJzZVJ0cEVuY29kaW5nUGFyYW1ldGVycyhtZWRpYVNlY3Rpb24pO1xuXG4gICAgICB2YXIgcnRjcFBhcmFtZXRlcnMgPSBTRFBVdGlscy5wYXJzZVJ0Y3BQYXJhbWV0ZXJzKG1lZGlhU2VjdGlvbik7XG5cbiAgICAgIHZhciBpc0NvbXBsZXRlID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uLFxuICAgICAgICAgICdhPWVuZC1vZi1jYW5kaWRhdGVzJywgc2Vzc2lvbnBhcnQpLmxlbmd0aCA+IDA7XG4gICAgICB2YXIgY2FuZHMgPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdhPWNhbmRpZGF0ZTonKVxuICAgICAgICAgIC5tYXAoZnVuY3Rpb24oY2FuZCkge1xuICAgICAgICAgICAgcmV0dXJuIFNEUFV0aWxzLnBhcnNlQ2FuZGlkYXRlKGNhbmQpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmZpbHRlcihmdW5jdGlvbihjYW5kKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FuZC5jb21wb25lbnQgPT09IDE7XG4gICAgICAgICAgfSk7XG5cbiAgICAgIC8vIENoZWNrIGlmIHdlIGNhbiB1c2UgQlVORExFIGFuZCBkaXNwb3NlIHRyYW5zcG9ydHMuXG4gICAgICBpZiAoKGRlc2NyaXB0aW9uLnR5cGUgPT09ICdvZmZlcicgfHwgZGVzY3JpcHRpb24udHlwZSA9PT0gJ2Fuc3dlcicpICYmXG4gICAgICAgICAgIXJlamVjdGVkICYmIHVzaW5nQnVuZGxlICYmIHNkcE1MaW5lSW5kZXggPiAwICYmXG4gICAgICAgICAgcGMudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdKSB7XG4gICAgICAgIHBjLl9kaXNwb3NlSWNlQW5kRHRsc1RyYW5zcG9ydHMoc2RwTUxpbmVJbmRleCk7XG4gICAgICAgIHBjLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XS5pY2VHYXRoZXJlciA9XG4gICAgICAgICAgICBwYy50cmFuc2NlaXZlcnNbMF0uaWNlR2F0aGVyZXI7XG4gICAgICAgIHBjLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XS5pY2VUcmFuc3BvcnQgPVxuICAgICAgICAgICAgcGMudHJhbnNjZWl2ZXJzWzBdLmljZVRyYW5zcG9ydDtcbiAgICAgICAgcGMudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdLmR0bHNUcmFuc3BvcnQgPVxuICAgICAgICAgICAgcGMudHJhbnNjZWl2ZXJzWzBdLmR0bHNUcmFuc3BvcnQ7XG4gICAgICAgIGlmIChwYy50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0ucnRwU2VuZGVyKSB7XG4gICAgICAgICAgcGMudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdLnJ0cFNlbmRlci5zZXRUcmFuc3BvcnQoXG4gICAgICAgICAgICAgIHBjLnRyYW5zY2VpdmVyc1swXS5kdGxzVHJhbnNwb3J0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGMudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdLnJ0cFJlY2VpdmVyKSB7XG4gICAgICAgICAgcGMudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdLnJ0cFJlY2VpdmVyLnNldFRyYW5zcG9ydChcbiAgICAgICAgICAgICAgcGMudHJhbnNjZWl2ZXJzWzBdLmR0bHNUcmFuc3BvcnQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoZGVzY3JpcHRpb24udHlwZSA9PT0gJ29mZmVyJyAmJiAhcmVqZWN0ZWQpIHtcbiAgICAgICAgdHJhbnNjZWl2ZXIgPSBwYy50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0gfHxcbiAgICAgICAgICAgIHBjLl9jcmVhdGVUcmFuc2NlaXZlcihraW5kKTtcbiAgICAgICAgdHJhbnNjZWl2ZXIubWlkID0gbWlkO1xuXG4gICAgICAgIGlmICghdHJhbnNjZWl2ZXIuaWNlR2F0aGVyZXIpIHtcbiAgICAgICAgICB0cmFuc2NlaXZlci5pY2VHYXRoZXJlciA9IHBjLl9jcmVhdGVJY2VHYXRoZXJlcihzZHBNTGluZUluZGV4LFxuICAgICAgICAgICAgICB1c2luZ0J1bmRsZSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY2FuZHMubGVuZ3RoICYmIHRyYW5zY2VpdmVyLmljZVRyYW5zcG9ydC5zdGF0ZSA9PT0gJ25ldycpIHtcbiAgICAgICAgICBpZiAoaXNDb21wbGV0ZSAmJiAoIXVzaW5nQnVuZGxlIHx8IHNkcE1MaW5lSW5kZXggPT09IDApKSB7XG4gICAgICAgICAgICB0cmFuc2NlaXZlci5pY2VUcmFuc3BvcnQuc2V0UmVtb3RlQ2FuZGlkYXRlcyhjYW5kcyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhbmRzLmZvckVhY2goZnVuY3Rpb24oY2FuZGlkYXRlKSB7XG4gICAgICAgICAgICAgIG1heWJlQWRkQ2FuZGlkYXRlKHRyYW5zY2VpdmVyLmljZVRyYW5zcG9ydCwgY2FuZGlkYXRlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxvY2FsQ2FwYWJpbGl0aWVzID0gd2luZG93LlJUQ1J0cFJlY2VpdmVyLmdldENhcGFiaWxpdGllcyhraW5kKTtcblxuICAgICAgICAvLyBmaWx0ZXIgUlRYIHVudGlsIGFkZGl0aW9uYWwgc3R1ZmYgbmVlZGVkIGZvciBSVFggaXMgaW1wbGVtZW50ZWRcbiAgICAgICAgLy8gaW4gYWRhcHRlci5qc1xuICAgICAgICBpZiAoZWRnZVZlcnNpb24gPCAxNTAxOSkge1xuICAgICAgICAgIGxvY2FsQ2FwYWJpbGl0aWVzLmNvZGVjcyA9IGxvY2FsQ2FwYWJpbGl0aWVzLmNvZGVjcy5maWx0ZXIoXG4gICAgICAgICAgICAgIGZ1bmN0aW9uKGNvZGVjKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvZGVjLm5hbWUgIT09ICdydHgnO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNlbmRFbmNvZGluZ1BhcmFtZXRlcnMgPSB0cmFuc2NlaXZlci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzIHx8IFt7XG4gICAgICAgICAgc3NyYzogKDIgKiBzZHBNTGluZUluZGV4ICsgMikgKiAxMDAxXG4gICAgICAgIH1dO1xuXG4gICAgICAgIC8vIFRPRE86IHJld3JpdGUgdG8gdXNlIGh0dHA6Ly93M2MuZ2l0aHViLmlvL3dlYnJ0Yy1wYy8jc2V0LWFzc29jaWF0ZWQtcmVtb3RlLXN0cmVhbXNcbiAgICAgICAgdmFyIGlzTmV3VHJhY2sgPSBmYWxzZTtcbiAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gJ3NlbmRyZWN2JyB8fCBkaXJlY3Rpb24gPT09ICdzZW5kb25seScpIHtcbiAgICAgICAgICBpc05ld1RyYWNrID0gIXRyYW5zY2VpdmVyLnJ0cFJlY2VpdmVyO1xuICAgICAgICAgIHJ0cFJlY2VpdmVyID0gdHJhbnNjZWl2ZXIucnRwUmVjZWl2ZXIgfHxcbiAgICAgICAgICAgICAgbmV3IHdpbmRvdy5SVENSdHBSZWNlaXZlcih0cmFuc2NlaXZlci5kdGxzVHJhbnNwb3J0LCBraW5kKTtcblxuICAgICAgICAgIGlmIChpc05ld1RyYWNrKSB7XG4gICAgICAgICAgICB2YXIgc3RyZWFtO1xuICAgICAgICAgICAgdHJhY2sgPSBydHBSZWNlaXZlci50cmFjaztcbiAgICAgICAgICAgIC8vIEZJWE1FOiBkb2VzIG5vdCB3b3JrIHdpdGggUGxhbiBCLlxuICAgICAgICAgICAgaWYgKHJlbW90ZU1zaWQgJiYgcmVtb3RlTXNpZC5zdHJlYW0gPT09ICctJykge1xuICAgICAgICAgICAgICAvLyBuby1vcC4gYSBzdHJlYW0gaWQgb2YgJy0nIG1lYW5zOiBubyBhc3NvY2lhdGVkIHN0cmVhbS5cbiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVtb3RlTXNpZCkge1xuICAgICAgICAgICAgICBpZiAoIXN0cmVhbXNbcmVtb3RlTXNpZC5zdHJlYW1dKSB7XG4gICAgICAgICAgICAgICAgc3RyZWFtc1tyZW1vdGVNc2lkLnN0cmVhbV0gPSBuZXcgd2luZG93Lk1lZGlhU3RyZWFtKCk7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHN0cmVhbXNbcmVtb3RlTXNpZC5zdHJlYW1dLCAnaWQnLCB7XG4gICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVtb3RlTXNpZC5zdHJlYW07XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRyYWNrLCAnaWQnLCB7XG4gICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiByZW1vdGVNc2lkLnRyYWNrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIHN0cmVhbSA9IHN0cmVhbXNbcmVtb3RlTXNpZC5zdHJlYW1dO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgaWYgKCFzdHJlYW1zLmRlZmF1bHQpIHtcbiAgICAgICAgICAgICAgICBzdHJlYW1zLmRlZmF1bHQgPSBuZXcgd2luZG93Lk1lZGlhU3RyZWFtKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgc3RyZWFtID0gc3RyZWFtcy5kZWZhdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN0cmVhbSkge1xuICAgICAgICAgICAgICBhZGRUcmFja1RvU3RyZWFtQW5kRmlyZUV2ZW50KHRyYWNrLCBzdHJlYW0pO1xuICAgICAgICAgICAgICB0cmFuc2NlaXZlci5hc3NvY2lhdGVkUmVtb3RlTWVkaWFTdHJlYW1zLnB1c2goc3RyZWFtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlY2VpdmVyTGlzdC5wdXNoKFt0cmFjaywgcnRwUmVjZWl2ZXIsIHN0cmVhbV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0cmFuc2NlaXZlci5ydHBSZWNlaXZlciAmJiB0cmFuc2NlaXZlci5ydHBSZWNlaXZlci50cmFjaykge1xuICAgICAgICAgIHRyYW5zY2VpdmVyLmFzc29jaWF0ZWRSZW1vdGVNZWRpYVN0cmVhbXMuZm9yRWFjaChmdW5jdGlvbihzKSB7XG4gICAgICAgICAgICB2YXIgbmF0aXZlVHJhY2sgPSBzLmdldFRyYWNrcygpLmZpbmQoZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICByZXR1cm4gdC5pZCA9PT0gdHJhbnNjZWl2ZXIucnRwUmVjZWl2ZXIudHJhY2suaWQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChuYXRpdmVUcmFjaykge1xuICAgICAgICAgICAgICByZW1vdmVUcmFja0Zyb21TdHJlYW1BbmRGaXJlRXZlbnQobmF0aXZlVHJhY2ssIHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHRyYW5zY2VpdmVyLmFzc29jaWF0ZWRSZW1vdGVNZWRpYVN0cmVhbXMgPSBbXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyYW5zY2VpdmVyLmxvY2FsQ2FwYWJpbGl0aWVzID0gbG9jYWxDYXBhYmlsaXRpZXM7XG4gICAgICAgIHRyYW5zY2VpdmVyLnJlbW90ZUNhcGFiaWxpdGllcyA9IHJlbW90ZUNhcGFiaWxpdGllcztcbiAgICAgICAgdHJhbnNjZWl2ZXIucnRwUmVjZWl2ZXIgPSBydHBSZWNlaXZlcjtcbiAgICAgICAgdHJhbnNjZWl2ZXIucnRjcFBhcmFtZXRlcnMgPSBydGNwUGFyYW1ldGVycztcbiAgICAgICAgdHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVycyA9IHNlbmRFbmNvZGluZ1BhcmFtZXRlcnM7XG4gICAgICAgIHRyYW5zY2VpdmVyLnJlY3ZFbmNvZGluZ1BhcmFtZXRlcnMgPSByZWN2RW5jb2RpbmdQYXJhbWV0ZXJzO1xuXG4gICAgICAgIC8vIFN0YXJ0IHRoZSBSVENSdHBSZWNlaXZlciBub3cuIFRoZSBSVFBTZW5kZXIgaXMgc3RhcnRlZCBpblxuICAgICAgICAvLyBzZXRMb2NhbERlc2NyaXB0aW9uLlxuICAgICAgICBwYy5fdHJhbnNjZWl2ZShwYy50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0sXG4gICAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICAgIGlzTmV3VHJhY2spO1xuICAgICAgfSBlbHNlIGlmIChkZXNjcmlwdGlvbi50eXBlID09PSAnYW5zd2VyJyAmJiAhcmVqZWN0ZWQpIHtcbiAgICAgICAgdHJhbnNjZWl2ZXIgPSBwYy50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF07XG4gICAgICAgIGljZUdhdGhlcmVyID0gdHJhbnNjZWl2ZXIuaWNlR2F0aGVyZXI7XG4gICAgICAgIGljZVRyYW5zcG9ydCA9IHRyYW5zY2VpdmVyLmljZVRyYW5zcG9ydDtcbiAgICAgICAgZHRsc1RyYW5zcG9ydCA9IHRyYW5zY2VpdmVyLmR0bHNUcmFuc3BvcnQ7XG4gICAgICAgIHJ0cFJlY2VpdmVyID0gdHJhbnNjZWl2ZXIucnRwUmVjZWl2ZXI7XG4gICAgICAgIHNlbmRFbmNvZGluZ1BhcmFtZXRlcnMgPSB0cmFuc2NlaXZlci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzO1xuICAgICAgICBsb2NhbENhcGFiaWxpdGllcyA9IHRyYW5zY2VpdmVyLmxvY2FsQ2FwYWJpbGl0aWVzO1xuXG4gICAgICAgIHBjLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XS5yZWN2RW5jb2RpbmdQYXJhbWV0ZXJzID1cbiAgICAgICAgICAgIHJlY3ZFbmNvZGluZ1BhcmFtZXRlcnM7XG4gICAgICAgIHBjLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XS5yZW1vdGVDYXBhYmlsaXRpZXMgPVxuICAgICAgICAgICAgcmVtb3RlQ2FwYWJpbGl0aWVzO1xuICAgICAgICBwYy50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0ucnRjcFBhcmFtZXRlcnMgPSBydGNwUGFyYW1ldGVycztcblxuICAgICAgICBpZiAoY2FuZHMubGVuZ3RoICYmIGljZVRyYW5zcG9ydC5zdGF0ZSA9PT0gJ25ldycpIHtcbiAgICAgICAgICBpZiAoKGlzSWNlTGl0ZSB8fCBpc0NvbXBsZXRlKSAmJlxuICAgICAgICAgICAgICAoIXVzaW5nQnVuZGxlIHx8IHNkcE1MaW5lSW5kZXggPT09IDApKSB7XG4gICAgICAgICAgICBpY2VUcmFuc3BvcnQuc2V0UmVtb3RlQ2FuZGlkYXRlcyhjYW5kcyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhbmRzLmZvckVhY2goZnVuY3Rpb24oY2FuZGlkYXRlKSB7XG4gICAgICAgICAgICAgIG1heWJlQWRkQ2FuZGlkYXRlKHRyYW5zY2VpdmVyLmljZVRyYW5zcG9ydCwgY2FuZGlkYXRlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdXNpbmdCdW5kbGUgfHwgc2RwTUxpbmVJbmRleCA9PT0gMCkge1xuICAgICAgICAgIGlmIChpY2VUcmFuc3BvcnQuc3RhdGUgPT09ICduZXcnKSB7XG4gICAgICAgICAgICBpY2VUcmFuc3BvcnQuc3RhcnQoaWNlR2F0aGVyZXIsIHJlbW90ZUljZVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgJ2NvbnRyb2xsaW5nJyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChkdGxzVHJhbnNwb3J0LnN0YXRlID09PSAnbmV3Jykge1xuICAgICAgICAgICAgZHRsc1RyYW5zcG9ydC5zdGFydChyZW1vdGVEdGxzUGFyYW1ldGVycyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcGMuX3RyYW5zY2VpdmUodHJhbnNjZWl2ZXIsXG4gICAgICAgICAgICBkaXJlY3Rpb24gPT09ICdzZW5kcmVjdicgfHwgZGlyZWN0aW9uID09PSAncmVjdm9ubHknLFxuICAgICAgICAgICAgZGlyZWN0aW9uID09PSAnc2VuZHJlY3YnIHx8IGRpcmVjdGlvbiA9PT0gJ3NlbmRvbmx5Jyk7XG5cbiAgICAgICAgLy8gVE9ETzogcmV3cml0ZSB0byB1c2UgaHR0cDovL3czYy5naXRodWIuaW8vd2VicnRjLXBjLyNzZXQtYXNzb2NpYXRlZC1yZW1vdGUtc3RyZWFtc1xuICAgICAgICBpZiAocnRwUmVjZWl2ZXIgJiZcbiAgICAgICAgICAgIChkaXJlY3Rpb24gPT09ICdzZW5kcmVjdicgfHwgZGlyZWN0aW9uID09PSAnc2VuZG9ubHknKSkge1xuICAgICAgICAgIHRyYWNrID0gcnRwUmVjZWl2ZXIudHJhY2s7XG4gICAgICAgICAgaWYgKHJlbW90ZU1zaWQpIHtcbiAgICAgICAgICAgIGlmICghc3RyZWFtc1tyZW1vdGVNc2lkLnN0cmVhbV0pIHtcbiAgICAgICAgICAgICAgc3RyZWFtc1tyZW1vdGVNc2lkLnN0cmVhbV0gPSBuZXcgd2luZG93Lk1lZGlhU3RyZWFtKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhZGRUcmFja1RvU3RyZWFtQW5kRmlyZUV2ZW50KHRyYWNrLCBzdHJlYW1zW3JlbW90ZU1zaWQuc3RyZWFtXSk7XG4gICAgICAgICAgICByZWNlaXZlckxpc3QucHVzaChbdHJhY2ssIHJ0cFJlY2VpdmVyLCBzdHJlYW1zW3JlbW90ZU1zaWQuc3RyZWFtXV0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoIXN0cmVhbXMuZGVmYXVsdCkge1xuICAgICAgICAgICAgICBzdHJlYW1zLmRlZmF1bHQgPSBuZXcgd2luZG93Lk1lZGlhU3RyZWFtKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhZGRUcmFja1RvU3RyZWFtQW5kRmlyZUV2ZW50KHRyYWNrLCBzdHJlYW1zLmRlZmF1bHQpO1xuICAgICAgICAgICAgcmVjZWl2ZXJMaXN0LnB1c2goW3RyYWNrLCBydHBSZWNlaXZlciwgc3RyZWFtcy5kZWZhdWx0XSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIEZJWE1FOiBhY3R1YWxseSB0aGUgcmVjZWl2ZXIgc2hvdWxkIGJlIGNyZWF0ZWQgbGF0ZXIuXG4gICAgICAgICAgZGVsZXRlIHRyYW5zY2VpdmVyLnJ0cFJlY2VpdmVyO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAocGMuX2R0bHNSb2xlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHBjLl9kdGxzUm9sZSA9IGRlc2NyaXB0aW9uLnR5cGUgPT09ICdvZmZlcicgPyAnYWN0aXZlJyA6ICdwYXNzaXZlJztcbiAgICB9XG5cbiAgICBwYy5yZW1vdGVEZXNjcmlwdGlvbiA9IHtcbiAgICAgIHR5cGU6IGRlc2NyaXB0aW9uLnR5cGUsXG4gICAgICBzZHA6IGRlc2NyaXB0aW9uLnNkcFxuICAgIH07XG4gICAgaWYgKGRlc2NyaXB0aW9uLnR5cGUgPT09ICdvZmZlcicpIHtcbiAgICAgIHBjLl91cGRhdGVTaWduYWxpbmdTdGF0ZSgnaGF2ZS1yZW1vdGUtb2ZmZXInKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcGMuX3VwZGF0ZVNpZ25hbGluZ1N0YXRlKCdzdGFibGUnKTtcbiAgICB9XG4gICAgT2JqZWN0LmtleXMoc3RyZWFtcykuZm9yRWFjaChmdW5jdGlvbihzaWQpIHtcbiAgICAgIHZhciBzdHJlYW0gPSBzdHJlYW1zW3NpZF07XG4gICAgICBpZiAoc3RyZWFtLmdldFRyYWNrcygpLmxlbmd0aCkge1xuICAgICAgICBpZiAocGMucmVtb3RlU3RyZWFtcy5pbmRleE9mKHN0cmVhbSkgPT09IC0xKSB7XG4gICAgICAgICAgcGMucmVtb3RlU3RyZWFtcy5wdXNoKHN0cmVhbSk7XG4gICAgICAgICAgdmFyIGV2ZW50ID0gbmV3IEV2ZW50KCdhZGRzdHJlYW0nKTtcbiAgICAgICAgICBldmVudC5zdHJlYW0gPSBzdHJlYW07XG4gICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBwYy5fZGlzcGF0Y2hFdmVudCgnYWRkc3RyZWFtJywgZXZlbnQpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVjZWl2ZXJMaXN0LmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICAgIHZhciB0cmFjayA9IGl0ZW1bMF07XG4gICAgICAgICAgdmFyIHJlY2VpdmVyID0gaXRlbVsxXTtcbiAgICAgICAgICBpZiAoc3RyZWFtLmlkICE9PSBpdGVtWzJdLmlkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIGZpcmVBZGRUcmFjayhwYywgdHJhY2ssIHJlY2VpdmVyLCBbc3RyZWFtXSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJlY2VpdmVyTGlzdC5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgIGlmIChpdGVtWzJdKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGZpcmVBZGRUcmFjayhwYywgaXRlbVswXSwgaXRlbVsxXSwgW10pO1xuICAgIH0pO1xuXG4gICAgLy8gY2hlY2sgd2hldGhlciBhZGRJY2VDYW5kaWRhdGUoe30pIHdhcyBjYWxsZWQgd2l0aGluIGZvdXIgc2Vjb25kcyBhZnRlclxuICAgIC8vIHNldFJlbW90ZURlc2NyaXB0aW9uLlxuICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKCEocGMgJiYgcGMudHJhbnNjZWl2ZXJzKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBwYy50cmFuc2NlaXZlcnMuZm9yRWFjaChmdW5jdGlvbih0cmFuc2NlaXZlcikge1xuICAgICAgICBpZiAodHJhbnNjZWl2ZXIuaWNlVHJhbnNwb3J0ICYmXG4gICAgICAgICAgICB0cmFuc2NlaXZlci5pY2VUcmFuc3BvcnQuc3RhdGUgPT09ICduZXcnICYmXG4gICAgICAgICAgICB0cmFuc2NlaXZlci5pY2VUcmFuc3BvcnQuZ2V0UmVtb3RlQ2FuZGlkYXRlcygpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ1RpbWVvdXQgZm9yIGFkZFJlbW90ZUNhbmRpZGF0ZS4gQ29uc2lkZXIgc2VuZGluZyAnICtcbiAgICAgICAgICAgICAgJ2FuIGVuZC1vZi1jYW5kaWRhdGVzIG5vdGlmaWNhdGlvbicpO1xuICAgICAgICAgIHRyYW5zY2VpdmVyLmljZVRyYW5zcG9ydC5hZGRSZW1vdGVDYW5kaWRhdGUoe30pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LCA0MDAwKTtcblxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgfTtcblxuICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnRyYW5zY2VpdmVycy5mb3JFYWNoKGZ1bmN0aW9uKHRyYW5zY2VpdmVyKSB7XG4gICAgICAvKiBub3QgeWV0XG4gICAgICBpZiAodHJhbnNjZWl2ZXIuaWNlR2F0aGVyZXIpIHtcbiAgICAgICAgdHJhbnNjZWl2ZXIuaWNlR2F0aGVyZXIuY2xvc2UoKTtcbiAgICAgIH1cbiAgICAgICovXG4gICAgICBpZiAodHJhbnNjZWl2ZXIuaWNlVHJhbnNwb3J0KSB7XG4gICAgICAgIHRyYW5zY2VpdmVyLmljZVRyYW5zcG9ydC5zdG9wKCk7XG4gICAgICB9XG4gICAgICBpZiAodHJhbnNjZWl2ZXIuZHRsc1RyYW5zcG9ydCkge1xuICAgICAgICB0cmFuc2NlaXZlci5kdGxzVHJhbnNwb3J0LnN0b3AoKTtcbiAgICAgIH1cbiAgICAgIGlmICh0cmFuc2NlaXZlci5ydHBTZW5kZXIpIHtcbiAgICAgICAgdHJhbnNjZWl2ZXIucnRwU2VuZGVyLnN0b3AoKTtcbiAgICAgIH1cbiAgICAgIGlmICh0cmFuc2NlaXZlci5ydHBSZWNlaXZlcikge1xuICAgICAgICB0cmFuc2NlaXZlci5ydHBSZWNlaXZlci5zdG9wKCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgLy8gRklYTUU6IGNsZWFuIHVwIHRyYWNrcywgbG9jYWwgc3RyZWFtcywgcmVtb3RlIHN0cmVhbXMsIGV0Y1xuICAgIHRoaXMuX2lzQ2xvc2VkID0gdHJ1ZTtcbiAgICB0aGlzLl91cGRhdGVTaWduYWxpbmdTdGF0ZSgnY2xvc2VkJyk7XG4gIH07XG5cbiAgLy8gVXBkYXRlIHRoZSBzaWduYWxpbmcgc3RhdGUuXG4gIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5fdXBkYXRlU2lnbmFsaW5nU3RhdGUgPSBmdW5jdGlvbihuZXdTdGF0ZSkge1xuICAgIHRoaXMuc2lnbmFsaW5nU3RhdGUgPSBuZXdTdGF0ZTtcbiAgICB2YXIgZXZlbnQgPSBuZXcgRXZlbnQoJ3NpZ25hbGluZ3N0YXRlY2hhbmdlJyk7XG4gICAgdGhpcy5fZGlzcGF0Y2hFdmVudCgnc2lnbmFsaW5nc3RhdGVjaGFuZ2UnLCBldmVudCk7XG4gIH07XG5cbiAgLy8gRGV0ZXJtaW5lIHdoZXRoZXIgdG8gZmlyZSB0aGUgbmVnb3RpYXRpb25uZWVkZWQgZXZlbnQuXG4gIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5fbWF5YmVGaXJlTmVnb3RpYXRpb25OZWVkZWQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcGMgPSB0aGlzO1xuICAgIGlmICh0aGlzLnNpZ25hbGluZ1N0YXRlICE9PSAnc3RhYmxlJyB8fCB0aGlzLm5lZWROZWdvdGlhdGlvbiA9PT0gdHJ1ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLm5lZWROZWdvdGlhdGlvbiA9IHRydWU7XG4gICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICBpZiAocGMubmVlZE5lZ290aWF0aW9uKSB7XG4gICAgICAgIHBjLm5lZWROZWdvdGlhdGlvbiA9IGZhbHNlO1xuICAgICAgICB2YXIgZXZlbnQgPSBuZXcgRXZlbnQoJ25lZ290aWF0aW9ubmVlZGVkJyk7XG4gICAgICAgIHBjLl9kaXNwYXRjaEV2ZW50KCduZWdvdGlhdGlvbm5lZWRlZCcsIGV2ZW50KTtcbiAgICAgIH1cbiAgICB9LCAwKTtcbiAgfTtcblxuICAvLyBVcGRhdGUgdGhlIGljZSBjb25uZWN0aW9uIHN0YXRlLlxuICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuX3VwZGF0ZUljZUNvbm5lY3Rpb25TdGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBuZXdTdGF0ZTtcbiAgICB2YXIgc3RhdGVzID0ge1xuICAgICAgJ25ldyc6IDAsXG4gICAgICBjbG9zZWQ6IDAsXG4gICAgICBjaGVja2luZzogMCxcbiAgICAgIGNvbm5lY3RlZDogMCxcbiAgICAgIGNvbXBsZXRlZDogMCxcbiAgICAgIGRpc2Nvbm5lY3RlZDogMCxcbiAgICAgIGZhaWxlZDogMFxuICAgIH07XG4gICAgdGhpcy50cmFuc2NlaXZlcnMuZm9yRWFjaChmdW5jdGlvbih0cmFuc2NlaXZlcikge1xuICAgICAgc3RhdGVzW3RyYW5zY2VpdmVyLmljZVRyYW5zcG9ydC5zdGF0ZV0rKztcbiAgICB9KTtcblxuICAgIG5ld1N0YXRlID0gJ25ldyc7XG4gICAgaWYgKHN0YXRlcy5mYWlsZWQgPiAwKSB7XG4gICAgICBuZXdTdGF0ZSA9ICdmYWlsZWQnO1xuICAgIH0gZWxzZSBpZiAoc3RhdGVzLmNoZWNraW5nID4gMCkge1xuICAgICAgbmV3U3RhdGUgPSAnY2hlY2tpbmcnO1xuICAgIH0gZWxzZSBpZiAoc3RhdGVzLmRpc2Nvbm5lY3RlZCA+IDApIHtcbiAgICAgIG5ld1N0YXRlID0gJ2Rpc2Nvbm5lY3RlZCc7XG4gICAgfSBlbHNlIGlmIChzdGF0ZXMubmV3ID4gMCkge1xuICAgICAgbmV3U3RhdGUgPSAnbmV3JztcbiAgICB9IGVsc2UgaWYgKHN0YXRlcy5jb25uZWN0ZWQgPiAwKSB7XG4gICAgICBuZXdTdGF0ZSA9ICdjb25uZWN0ZWQnO1xuICAgIH0gZWxzZSBpZiAoc3RhdGVzLmNvbXBsZXRlZCA+IDApIHtcbiAgICAgIG5ld1N0YXRlID0gJ2NvbXBsZXRlZCc7XG4gICAgfVxuXG4gICAgaWYgKG5ld1N0YXRlICE9PSB0aGlzLmljZUNvbm5lY3Rpb25TdGF0ZSkge1xuICAgICAgdGhpcy5pY2VDb25uZWN0aW9uU3RhdGUgPSBuZXdTdGF0ZTtcbiAgICAgIHZhciBldmVudCA9IG5ldyBFdmVudCgnaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlJyk7XG4gICAgICB0aGlzLl9kaXNwYXRjaEV2ZW50KCdpY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2UnLCBldmVudCk7XG4gICAgfVxuICB9O1xuXG4gIC8vIFVwZGF0ZSB0aGUgY29ubmVjdGlvbiBzdGF0ZS5cbiAgUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLl91cGRhdGVDb25uZWN0aW9uU3RhdGUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbmV3U3RhdGU7XG4gICAgdmFyIHN0YXRlcyA9IHtcbiAgICAgICduZXcnOiAwLFxuICAgICAgY2xvc2VkOiAwLFxuICAgICAgY29ubmVjdGluZzogMCxcbiAgICAgIGNvbm5lY3RlZDogMCxcbiAgICAgIGNvbXBsZXRlZDogMCxcbiAgICAgIGRpc2Nvbm5lY3RlZDogMCxcbiAgICAgIGZhaWxlZDogMFxuICAgIH07XG4gICAgdGhpcy50cmFuc2NlaXZlcnMuZm9yRWFjaChmdW5jdGlvbih0cmFuc2NlaXZlcikge1xuICAgICAgc3RhdGVzW3RyYW5zY2VpdmVyLmljZVRyYW5zcG9ydC5zdGF0ZV0rKztcbiAgICAgIHN0YXRlc1t0cmFuc2NlaXZlci5kdGxzVHJhbnNwb3J0LnN0YXRlXSsrO1xuICAgIH0pO1xuICAgIC8vIElDRVRyYW5zcG9ydC5jb21wbGV0ZWQgYW5kIGNvbm5lY3RlZCBhcmUgdGhlIHNhbWUgZm9yIHRoaXMgcHVycG9zZS5cbiAgICBzdGF0ZXMuY29ubmVjdGVkICs9IHN0YXRlcy5jb21wbGV0ZWQ7XG5cbiAgICBuZXdTdGF0ZSA9ICduZXcnO1xuICAgIGlmIChzdGF0ZXMuZmFpbGVkID4gMCkge1xuICAgICAgbmV3U3RhdGUgPSAnZmFpbGVkJztcbiAgICB9IGVsc2UgaWYgKHN0YXRlcy5jb25uZWN0aW5nID4gMCkge1xuICAgICAgbmV3U3RhdGUgPSAnY29ubmVjdGluZyc7XG4gICAgfSBlbHNlIGlmIChzdGF0ZXMuZGlzY29ubmVjdGVkID4gMCkge1xuICAgICAgbmV3U3RhdGUgPSAnZGlzY29ubmVjdGVkJztcbiAgICB9IGVsc2UgaWYgKHN0YXRlcy5uZXcgPiAwKSB7XG4gICAgICBuZXdTdGF0ZSA9ICduZXcnO1xuICAgIH0gZWxzZSBpZiAoc3RhdGVzLmNvbm5lY3RlZCA+IDApIHtcbiAgICAgIG5ld1N0YXRlID0gJ2Nvbm5lY3RlZCc7XG4gICAgfVxuXG4gICAgaWYgKG5ld1N0YXRlICE9PSB0aGlzLmNvbm5lY3Rpb25TdGF0ZSkge1xuICAgICAgdGhpcy5jb25uZWN0aW9uU3RhdGUgPSBuZXdTdGF0ZTtcbiAgICAgIHZhciBldmVudCA9IG5ldyBFdmVudCgnY29ubmVjdGlvbnN0YXRlY2hhbmdlJyk7XG4gICAgICB0aGlzLl9kaXNwYXRjaEV2ZW50KCdjb25uZWN0aW9uc3RhdGVjaGFuZ2UnLCBldmVudCk7XG4gICAgfVxuICB9O1xuXG4gIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5jcmVhdGVPZmZlciA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBwYyA9IHRoaXM7XG5cbiAgICBpZiAocGMuX2lzQ2xvc2VkKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobWFrZUVycm9yKCdJbnZhbGlkU3RhdGVFcnJvcicsXG4gICAgICAgICAgJ0NhbiBub3QgY2FsbCBjcmVhdGVPZmZlciBhZnRlciBjbG9zZScpKTtcbiAgICB9XG5cbiAgICB2YXIgbnVtQXVkaW9UcmFja3MgPSBwYy50cmFuc2NlaXZlcnMuZmlsdGVyKGZ1bmN0aW9uKHQpIHtcbiAgICAgIHJldHVybiB0LmtpbmQgPT09ICdhdWRpbyc7XG4gICAgfSkubGVuZ3RoO1xuICAgIHZhciBudW1WaWRlb1RyYWNrcyA9IHBjLnRyYW5zY2VpdmVycy5maWx0ZXIoZnVuY3Rpb24odCkge1xuICAgICAgcmV0dXJuIHQua2luZCA9PT0gJ3ZpZGVvJztcbiAgICB9KS5sZW5ndGg7XG5cbiAgICAvLyBEZXRlcm1pbmUgbnVtYmVyIG9mIGF1ZGlvIGFuZCB2aWRlbyB0cmFja3Mgd2UgbmVlZCB0byBzZW5kL3JlY3YuXG4gICAgdmFyIG9mZmVyT3B0aW9ucyA9IGFyZ3VtZW50c1swXTtcbiAgICBpZiAob2ZmZXJPcHRpb25zKSB7XG4gICAgICAvLyBSZWplY3QgQ2hyb21lIGxlZ2FjeSBjb25zdHJhaW50cy5cbiAgICAgIGlmIChvZmZlck9wdGlvbnMubWFuZGF0b3J5IHx8IG9mZmVyT3B0aW9ucy5vcHRpb25hbCkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFxuICAgICAgICAgICAgJ0xlZ2FjeSBtYW5kYXRvcnkvb3B0aW9uYWwgY29uc3RyYWludHMgbm90IHN1cHBvcnRlZC4nKTtcbiAgICAgIH1cbiAgICAgIGlmIChvZmZlck9wdGlvbnMub2ZmZXJUb1JlY2VpdmVBdWRpbyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmIChvZmZlck9wdGlvbnMub2ZmZXJUb1JlY2VpdmVBdWRpbyA9PT0gdHJ1ZSkge1xuICAgICAgICAgIG51bUF1ZGlvVHJhY2tzID0gMTtcbiAgICAgICAgfSBlbHNlIGlmIChvZmZlck9wdGlvbnMub2ZmZXJUb1JlY2VpdmVBdWRpbyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICBudW1BdWRpb1RyYWNrcyA9IDA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbnVtQXVkaW9UcmFja3MgPSBvZmZlck9wdGlvbnMub2ZmZXJUb1JlY2VpdmVBdWRpbztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKG9mZmVyT3B0aW9ucy5vZmZlclRvUmVjZWl2ZVZpZGVvICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKG9mZmVyT3B0aW9ucy5vZmZlclRvUmVjZWl2ZVZpZGVvID09PSB0cnVlKSB7XG4gICAgICAgICAgbnVtVmlkZW9UcmFja3MgPSAxO1xuICAgICAgICB9IGVsc2UgaWYgKG9mZmVyT3B0aW9ucy5vZmZlclRvUmVjZWl2ZVZpZGVvID09PSBmYWxzZSkge1xuICAgICAgICAgIG51bVZpZGVvVHJhY2tzID0gMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBudW1WaWRlb1RyYWNrcyA9IG9mZmVyT3B0aW9ucy5vZmZlclRvUmVjZWl2ZVZpZGVvO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcGMudHJhbnNjZWl2ZXJzLmZvckVhY2goZnVuY3Rpb24odHJhbnNjZWl2ZXIpIHtcbiAgICAgIGlmICh0cmFuc2NlaXZlci5raW5kID09PSAnYXVkaW8nKSB7XG4gICAgICAgIG51bUF1ZGlvVHJhY2tzLS07XG4gICAgICAgIGlmIChudW1BdWRpb1RyYWNrcyA8IDApIHtcbiAgICAgICAgICB0cmFuc2NlaXZlci53YW50UmVjZWl2ZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHRyYW5zY2VpdmVyLmtpbmQgPT09ICd2aWRlbycpIHtcbiAgICAgICAgbnVtVmlkZW9UcmFja3MtLTtcbiAgICAgICAgaWYgKG51bVZpZGVvVHJhY2tzIDwgMCkge1xuICAgICAgICAgIHRyYW5zY2VpdmVyLndhbnRSZWNlaXZlID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIENyZWF0ZSBNLWxpbmVzIGZvciByZWN2b25seSBzdHJlYW1zLlxuICAgIHdoaWxlIChudW1BdWRpb1RyYWNrcyA+IDAgfHwgbnVtVmlkZW9UcmFja3MgPiAwKSB7XG4gICAgICBpZiAobnVtQXVkaW9UcmFja3MgPiAwKSB7XG4gICAgICAgIHBjLl9jcmVhdGVUcmFuc2NlaXZlcignYXVkaW8nKTtcbiAgICAgICAgbnVtQXVkaW9UcmFja3MtLTtcbiAgICAgIH1cbiAgICAgIGlmIChudW1WaWRlb1RyYWNrcyA+IDApIHtcbiAgICAgICAgcGMuX2NyZWF0ZVRyYW5zY2VpdmVyKCd2aWRlbycpO1xuICAgICAgICBudW1WaWRlb1RyYWNrcy0tO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBzZHAgPSBTRFBVdGlscy53cml0ZVNlc3Npb25Cb2lsZXJwbGF0ZShwYy5fc2RwU2Vzc2lvbklkLFxuICAgICAgICBwYy5fc2RwU2Vzc2lvblZlcnNpb24rKyk7XG4gICAgcGMudHJhbnNjZWl2ZXJzLmZvckVhY2goZnVuY3Rpb24odHJhbnNjZWl2ZXIsIHNkcE1MaW5lSW5kZXgpIHtcbiAgICAgIC8vIEZvciBlYWNoIHRyYWNrLCBjcmVhdGUgYW4gaWNlIGdhdGhlcmVyLCBpY2UgdHJhbnNwb3J0LFxuICAgICAgLy8gZHRscyB0cmFuc3BvcnQsIHBvdGVudGlhbGx5IHJ0cHNlbmRlciBhbmQgcnRwcmVjZWl2ZXIuXG4gICAgICB2YXIgdHJhY2sgPSB0cmFuc2NlaXZlci50cmFjaztcbiAgICAgIHZhciBraW5kID0gdHJhbnNjZWl2ZXIua2luZDtcbiAgICAgIHZhciBtaWQgPSB0cmFuc2NlaXZlci5taWQgfHwgU0RQVXRpbHMuZ2VuZXJhdGVJZGVudGlmaWVyKCk7XG4gICAgICB0cmFuc2NlaXZlci5taWQgPSBtaWQ7XG5cbiAgICAgIGlmICghdHJhbnNjZWl2ZXIuaWNlR2F0aGVyZXIpIHtcbiAgICAgICAgdHJhbnNjZWl2ZXIuaWNlR2F0aGVyZXIgPSBwYy5fY3JlYXRlSWNlR2F0aGVyZXIoc2RwTUxpbmVJbmRleCxcbiAgICAgICAgICAgIHBjLnVzaW5nQnVuZGxlKTtcbiAgICAgIH1cblxuICAgICAgdmFyIGxvY2FsQ2FwYWJpbGl0aWVzID0gd2luZG93LlJUQ1J0cFNlbmRlci5nZXRDYXBhYmlsaXRpZXMoa2luZCk7XG4gICAgICAvLyBmaWx0ZXIgUlRYIHVudGlsIGFkZGl0aW9uYWwgc3R1ZmYgbmVlZGVkIGZvciBSVFggaXMgaW1wbGVtZW50ZWRcbiAgICAgIC8vIGluIGFkYXB0ZXIuanNcbiAgICAgIGlmIChlZGdlVmVyc2lvbiA8IDE1MDE5KSB7XG4gICAgICAgIGxvY2FsQ2FwYWJpbGl0aWVzLmNvZGVjcyA9IGxvY2FsQ2FwYWJpbGl0aWVzLmNvZGVjcy5maWx0ZXIoXG4gICAgICAgICAgICBmdW5jdGlvbihjb2RlYykge1xuICAgICAgICAgICAgICByZXR1cm4gY29kZWMubmFtZSAhPT0gJ3J0eCc7XG4gICAgICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGxvY2FsQ2FwYWJpbGl0aWVzLmNvZGVjcy5mb3JFYWNoKGZ1bmN0aW9uKGNvZGVjKSB7XG4gICAgICAgIC8vIHdvcmsgYXJvdW5kIGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC93ZWJydGMvaXNzdWVzL2RldGFpbD9pZD02NTUyXG4gICAgICAgIC8vIGJ5IGFkZGluZyBsZXZlbC1hc3ltbWV0cnktYWxsb3dlZD0xXG4gICAgICAgIGlmIChjb2RlYy5uYW1lID09PSAnSDI2NCcgJiZcbiAgICAgICAgICAgIGNvZGVjLnBhcmFtZXRlcnNbJ2xldmVsLWFzeW1tZXRyeS1hbGxvd2VkJ10gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGNvZGVjLnBhcmFtZXRlcnNbJ2xldmVsLWFzeW1tZXRyeS1hbGxvd2VkJ10gPSAnMSc7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBmb3Igc3Vic2VxdWVudCBvZmZlcnMsIHdlIG1pZ2h0IGhhdmUgdG8gcmUtdXNlIHRoZSBwYXlsb2FkXG4gICAgICAgIC8vIHR5cGUgb2YgdGhlIGxhc3Qgb2ZmZXIuXG4gICAgICAgIGlmICh0cmFuc2NlaXZlci5yZW1vdGVDYXBhYmlsaXRpZXMgJiZcbiAgICAgICAgICAgIHRyYW5zY2VpdmVyLnJlbW90ZUNhcGFiaWxpdGllcy5jb2RlY3MpIHtcbiAgICAgICAgICB0cmFuc2NlaXZlci5yZW1vdGVDYXBhYmlsaXRpZXMuY29kZWNzLmZvckVhY2goZnVuY3Rpb24ocmVtb3RlQ29kZWMpIHtcbiAgICAgICAgICAgIGlmIChjb2RlYy5uYW1lLnRvTG93ZXJDYXNlKCkgPT09IHJlbW90ZUNvZGVjLm5hbWUudG9Mb3dlckNhc2UoKSAmJlxuICAgICAgICAgICAgICAgIGNvZGVjLmNsb2NrUmF0ZSA9PT0gcmVtb3RlQ29kZWMuY2xvY2tSYXRlKSB7XG4gICAgICAgICAgICAgIGNvZGVjLnByZWZlcnJlZFBheWxvYWRUeXBlID0gcmVtb3RlQ29kZWMucGF5bG9hZFR5cGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgbG9jYWxDYXBhYmlsaXRpZXMuaGVhZGVyRXh0ZW5zaW9ucy5mb3JFYWNoKGZ1bmN0aW9uKGhkckV4dCkge1xuICAgICAgICB2YXIgcmVtb3RlRXh0ZW5zaW9ucyA9IHRyYW5zY2VpdmVyLnJlbW90ZUNhcGFiaWxpdGllcyAmJlxuICAgICAgICAgICAgdHJhbnNjZWl2ZXIucmVtb3RlQ2FwYWJpbGl0aWVzLmhlYWRlckV4dGVuc2lvbnMgfHwgW107XG4gICAgICAgIHJlbW90ZUV4dGVuc2lvbnMuZm9yRWFjaChmdW5jdGlvbihySGRyRXh0KSB7XG4gICAgICAgICAgaWYgKGhkckV4dC51cmkgPT09IHJIZHJFeHQudXJpKSB7XG4gICAgICAgICAgICBoZHJFeHQuaWQgPSBySGRyRXh0LmlkO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgLy8gZ2VuZXJhdGUgYW4gc3NyYyBub3csIHRvIGJlIHVzZWQgbGF0ZXIgaW4gcnRwU2VuZGVyLnNlbmRcbiAgICAgIHZhciBzZW5kRW5jb2RpbmdQYXJhbWV0ZXJzID0gdHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVycyB8fCBbe1xuICAgICAgICBzc3JjOiAoMiAqIHNkcE1MaW5lSW5kZXggKyAxKSAqIDEwMDFcbiAgICAgIH1dO1xuICAgICAgaWYgKHRyYWNrKSB7XG4gICAgICAgIC8vIGFkZCBSVFhcbiAgICAgICAgaWYgKGVkZ2VWZXJzaW9uID49IDE1MDE5ICYmIGtpbmQgPT09ICd2aWRlbycgJiZcbiAgICAgICAgICAgICFzZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eCkge1xuICAgICAgICAgIHNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4ID0ge1xuICAgICAgICAgICAgc3NyYzogc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5zc3JjICsgMVxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHRyYW5zY2VpdmVyLndhbnRSZWNlaXZlKSB7XG4gICAgICAgIHRyYW5zY2VpdmVyLnJ0cFJlY2VpdmVyID0gbmV3IHdpbmRvdy5SVENSdHBSZWNlaXZlcihcbiAgICAgICAgICAgIHRyYW5zY2VpdmVyLmR0bHNUcmFuc3BvcnQsIGtpbmQpO1xuICAgICAgfVxuXG4gICAgICB0cmFuc2NlaXZlci5sb2NhbENhcGFiaWxpdGllcyA9IGxvY2FsQ2FwYWJpbGl0aWVzO1xuICAgICAgdHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVycyA9IHNlbmRFbmNvZGluZ1BhcmFtZXRlcnM7XG4gICAgfSk7XG5cbiAgICAvLyBhbHdheXMgb2ZmZXIgQlVORExFIGFuZCBkaXNwb3NlIG9uIHJldHVybiBpZiBub3Qgc3VwcG9ydGVkLlxuICAgIGlmIChwYy5fY29uZmlnLmJ1bmRsZVBvbGljeSAhPT0gJ21heC1jb21wYXQnKSB7XG4gICAgICBzZHAgKz0gJ2E9Z3JvdXA6QlVORExFICcgKyBwYy50cmFuc2NlaXZlcnMubWFwKGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIHQubWlkO1xuICAgICAgfSkuam9pbignICcpICsgJ1xcclxcbic7XG4gICAgfVxuICAgIHNkcCArPSAnYT1pY2Utb3B0aW9uczp0cmlja2xlXFxyXFxuJztcblxuICAgIHBjLnRyYW5zY2VpdmVycy5mb3JFYWNoKGZ1bmN0aW9uKHRyYW5zY2VpdmVyLCBzZHBNTGluZUluZGV4KSB7XG4gICAgICBzZHAgKz0gd3JpdGVNZWRpYVNlY3Rpb24odHJhbnNjZWl2ZXIsIHRyYW5zY2VpdmVyLmxvY2FsQ2FwYWJpbGl0aWVzLFxuICAgICAgICAgICdvZmZlcicsIHRyYW5zY2VpdmVyLnN0cmVhbSwgcGMuX2R0bHNSb2xlKTtcbiAgICAgIHNkcCArPSAnYT1ydGNwLXJzaXplXFxyXFxuJztcblxuICAgICAgaWYgKHRyYW5zY2VpdmVyLmljZUdhdGhlcmVyICYmIHBjLmljZUdhdGhlcmluZ1N0YXRlICE9PSAnbmV3JyAmJlxuICAgICAgICAgIChzZHBNTGluZUluZGV4ID09PSAwIHx8ICFwYy51c2luZ0J1bmRsZSkpIHtcbiAgICAgICAgdHJhbnNjZWl2ZXIuaWNlR2F0aGVyZXIuZ2V0TG9jYWxDYW5kaWRhdGVzKCkuZm9yRWFjaChmdW5jdGlvbihjYW5kKSB7XG4gICAgICAgICAgY2FuZC5jb21wb25lbnQgPSAxO1xuICAgICAgICAgIHNkcCArPSAnYT0nICsgU0RQVXRpbHMud3JpdGVDYW5kaWRhdGUoY2FuZCkgKyAnXFxyXFxuJztcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHRyYW5zY2VpdmVyLmljZUdhdGhlcmVyLnN0YXRlID09PSAnY29tcGxldGVkJykge1xuICAgICAgICAgIHNkcCArPSAnYT1lbmQtb2YtY2FuZGlkYXRlc1xcclxcbic7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHZhciBkZXNjID0gbmV3IHdpbmRvdy5SVENTZXNzaW9uRGVzY3JpcHRpb24oe1xuICAgICAgdHlwZTogJ29mZmVyJyxcbiAgICAgIHNkcDogc2RwXG4gICAgfSk7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShkZXNjKTtcbiAgfTtcblxuICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuY3JlYXRlQW5zd2VyID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHBjID0gdGhpcztcblxuICAgIGlmIChwYy5faXNDbG9zZWQpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChtYWtlRXJyb3IoJ0ludmFsaWRTdGF0ZUVycm9yJyxcbiAgICAgICAgICAnQ2FuIG5vdCBjYWxsIGNyZWF0ZUFuc3dlciBhZnRlciBjbG9zZScpKTtcbiAgICB9XG5cbiAgICBpZiAoIShwYy5zaWduYWxpbmdTdGF0ZSA9PT0gJ2hhdmUtcmVtb3RlLW9mZmVyJyB8fFxuICAgICAgICBwYy5zaWduYWxpbmdTdGF0ZSA9PT0gJ2hhdmUtbG9jYWwtcHJhbnN3ZXInKSkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG1ha2VFcnJvcignSW52YWxpZFN0YXRlRXJyb3InLFxuICAgICAgICAgICdDYW4gbm90IGNhbGwgY3JlYXRlQW5zd2VyIGluIHNpZ25hbGluZ1N0YXRlICcgKyBwYy5zaWduYWxpbmdTdGF0ZSkpO1xuICAgIH1cblxuICAgIHZhciBzZHAgPSBTRFBVdGlscy53cml0ZVNlc3Npb25Cb2lsZXJwbGF0ZShwYy5fc2RwU2Vzc2lvbklkLFxuICAgICAgICBwYy5fc2RwU2Vzc2lvblZlcnNpb24rKyk7XG4gICAgaWYgKHBjLnVzaW5nQnVuZGxlKSB7XG4gICAgICBzZHAgKz0gJ2E9Z3JvdXA6QlVORExFICcgKyBwYy50cmFuc2NlaXZlcnMubWFwKGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIHQubWlkO1xuICAgICAgfSkuam9pbignICcpICsgJ1xcclxcbic7XG4gICAgfVxuICAgIHZhciBtZWRpYVNlY3Rpb25zSW5PZmZlciA9IFNEUFV0aWxzLmdldE1lZGlhU2VjdGlvbnMoXG4gICAgICAgIHBjLnJlbW90ZURlc2NyaXB0aW9uLnNkcCkubGVuZ3RoO1xuICAgIHBjLnRyYW5zY2VpdmVycy5mb3JFYWNoKGZ1bmN0aW9uKHRyYW5zY2VpdmVyLCBzZHBNTGluZUluZGV4KSB7XG4gICAgICBpZiAoc2RwTUxpbmVJbmRleCArIDEgPiBtZWRpYVNlY3Rpb25zSW5PZmZlcikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAodHJhbnNjZWl2ZXIucmVqZWN0ZWQpIHtcbiAgICAgICAgaWYgKHRyYW5zY2VpdmVyLmtpbmQgPT09ICdhcHBsaWNhdGlvbicpIHtcbiAgICAgICAgICBzZHAgKz0gJ209YXBwbGljYXRpb24gMCBEVExTL1NDVFAgNTAwMFxcclxcbic7XG4gICAgICAgIH0gZWxzZSBpZiAodHJhbnNjZWl2ZXIua2luZCA9PT0gJ2F1ZGlvJykge1xuICAgICAgICAgIHNkcCArPSAnbT1hdWRpbyAwIFVEUC9UTFMvUlRQL1NBVlBGIDBcXHJcXG4nICtcbiAgICAgICAgICAgICAgJ2E9cnRwbWFwOjAgUENNVS84MDAwXFxyXFxuJztcbiAgICAgICAgfSBlbHNlIGlmICh0cmFuc2NlaXZlci5raW5kID09PSAndmlkZW8nKSB7XG4gICAgICAgICAgc2RwICs9ICdtPXZpZGVvIDAgVURQL1RMUy9SVFAvU0FWUEYgMTIwXFxyXFxuJyArXG4gICAgICAgICAgICAgICdhPXJ0cG1hcDoxMjAgVlA4LzkwMDAwXFxyXFxuJztcbiAgICAgICAgfVxuICAgICAgICBzZHAgKz0gJ2M9SU4gSVA0IDAuMC4wLjBcXHJcXG4nICtcbiAgICAgICAgICAgICdhPWluYWN0aXZlXFxyXFxuJyArXG4gICAgICAgICAgICAnYT1taWQ6JyArIHRyYW5zY2VpdmVyLm1pZCArICdcXHJcXG4nO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIEZJWE1FOiBsb29rIGF0IGRpcmVjdGlvbi5cbiAgICAgIGlmICh0cmFuc2NlaXZlci5zdHJlYW0pIHtcbiAgICAgICAgdmFyIGxvY2FsVHJhY2s7XG4gICAgICAgIGlmICh0cmFuc2NlaXZlci5raW5kID09PSAnYXVkaW8nKSB7XG4gICAgICAgICAgbG9jYWxUcmFjayA9IHRyYW5zY2VpdmVyLnN0cmVhbS5nZXRBdWRpb1RyYWNrcygpWzBdO1xuICAgICAgICB9IGVsc2UgaWYgKHRyYW5zY2VpdmVyLmtpbmQgPT09ICd2aWRlbycpIHtcbiAgICAgICAgICBsb2NhbFRyYWNrID0gdHJhbnNjZWl2ZXIuc3RyZWFtLmdldFZpZGVvVHJhY2tzKClbMF07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxvY2FsVHJhY2spIHtcbiAgICAgICAgICAvLyBhZGQgUlRYXG4gICAgICAgICAgaWYgKGVkZ2VWZXJzaW9uID49IDE1MDE5ICYmIHRyYW5zY2VpdmVyLmtpbmQgPT09ICd2aWRlbycgJiZcbiAgICAgICAgICAgICAgIXRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4KSB7XG4gICAgICAgICAgICB0cmFuc2NlaXZlci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eCA9IHtcbiAgICAgICAgICAgICAgc3NyYzogdHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5zc3JjICsgMVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gQ2FsY3VsYXRlIGludGVyc2VjdGlvbiBvZiBjYXBhYmlsaXRpZXMuXG4gICAgICB2YXIgY29tbW9uQ2FwYWJpbGl0aWVzID0gZ2V0Q29tbW9uQ2FwYWJpbGl0aWVzKFxuICAgICAgICAgIHRyYW5zY2VpdmVyLmxvY2FsQ2FwYWJpbGl0aWVzLFxuICAgICAgICAgIHRyYW5zY2VpdmVyLnJlbW90ZUNhcGFiaWxpdGllcyk7XG5cbiAgICAgIHZhciBoYXNSdHggPSBjb21tb25DYXBhYmlsaXRpZXMuY29kZWNzLmZpbHRlcihmdW5jdGlvbihjKSB7XG4gICAgICAgIHJldHVybiBjLm5hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ3J0eCc7XG4gICAgICB9KS5sZW5ndGg7XG4gICAgICBpZiAoIWhhc1J0eCAmJiB0cmFuc2NlaXZlci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eCkge1xuICAgICAgICBkZWxldGUgdHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHg7XG4gICAgICB9XG5cbiAgICAgIHNkcCArPSB3cml0ZU1lZGlhU2VjdGlvbih0cmFuc2NlaXZlciwgY29tbW9uQ2FwYWJpbGl0aWVzLFxuICAgICAgICAgICdhbnN3ZXInLCB0cmFuc2NlaXZlci5zdHJlYW0sIHBjLl9kdGxzUm9sZSk7XG4gICAgICBpZiAodHJhbnNjZWl2ZXIucnRjcFBhcmFtZXRlcnMgJiZcbiAgICAgICAgICB0cmFuc2NlaXZlci5ydGNwUGFyYW1ldGVycy5yZWR1Y2VkU2l6ZSkge1xuICAgICAgICBzZHAgKz0gJ2E9cnRjcC1yc2l6ZVxcclxcbic7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB2YXIgZGVzYyA9IG5ldyB3aW5kb3cuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKHtcbiAgICAgIHR5cGU6ICdhbnN3ZXInLFxuICAgICAgc2RwOiBzZHBcbiAgICB9KTtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGRlc2MpO1xuICB9O1xuXG4gIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRJY2VDYW5kaWRhdGUgPSBmdW5jdGlvbihjYW5kaWRhdGUpIHtcbiAgICB2YXIgcGMgPSB0aGlzO1xuICAgIHZhciBzZWN0aW9ucztcbiAgICBpZiAoY2FuZGlkYXRlICYmICEoY2FuZGlkYXRlLnNkcE1MaW5lSW5kZXggIT09IHVuZGVmaW5lZCB8fFxuICAgICAgICBjYW5kaWRhdGUuc2RwTWlkKSkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBUeXBlRXJyb3IoJ3NkcE1MaW5lSW5kZXggb3Igc2RwTWlkIHJlcXVpcmVkJykpO1xuICAgIH1cblxuICAgIC8vIFRPRE86IG5lZWRzIHRvIGdvIGludG8gb3BzIHF1ZXVlLlxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIGlmICghcGMucmVtb3RlRGVzY3JpcHRpb24pIHtcbiAgICAgICAgcmV0dXJuIHJlamVjdChtYWtlRXJyb3IoJ0ludmFsaWRTdGF0ZUVycm9yJyxcbiAgICAgICAgICAgICdDYW4gbm90IGFkZCBJQ0UgY2FuZGlkYXRlIHdpdGhvdXQgYSByZW1vdGUgZGVzY3JpcHRpb24nKSk7XG4gICAgICB9IGVsc2UgaWYgKCFjYW5kaWRhdGUgfHwgY2FuZGlkYXRlLmNhbmRpZGF0ZSA9PT0gJycpIHtcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBwYy50cmFuc2NlaXZlcnMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICBpZiAocGMudHJhbnNjZWl2ZXJzW2pdLnJlamVjdGVkKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcGMudHJhbnNjZWl2ZXJzW2pdLmljZVRyYW5zcG9ydC5hZGRSZW1vdGVDYW5kaWRhdGUoe30pO1xuICAgICAgICAgIHNlY3Rpb25zID0gU0RQVXRpbHMuZ2V0TWVkaWFTZWN0aW9ucyhwYy5yZW1vdGVEZXNjcmlwdGlvbi5zZHApO1xuICAgICAgICAgIHNlY3Rpb25zW2pdICs9ICdhPWVuZC1vZi1jYW5kaWRhdGVzXFxyXFxuJztcbiAgICAgICAgICBwYy5yZW1vdGVEZXNjcmlwdGlvbi5zZHAgPVxuICAgICAgICAgICAgICBTRFBVdGlscy5nZXREZXNjcmlwdGlvbihwYy5yZW1vdGVEZXNjcmlwdGlvbi5zZHApICtcbiAgICAgICAgICAgICAgc2VjdGlvbnMuam9pbignJyk7XG4gICAgICAgICAgaWYgKHBjLnVzaW5nQnVuZGxlKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBzZHBNTGluZUluZGV4ID0gY2FuZGlkYXRlLnNkcE1MaW5lSW5kZXg7XG4gICAgICAgIGlmIChjYW5kaWRhdGUuc2RwTWlkKSB7XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYy50cmFuc2NlaXZlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChwYy50cmFuc2NlaXZlcnNbaV0ubWlkID09PSBjYW5kaWRhdGUuc2RwTWlkKSB7XG4gICAgICAgICAgICAgIHNkcE1MaW5lSW5kZXggPSBpO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRyYW5zY2VpdmVyID0gcGMudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdO1xuICAgICAgICBpZiAodHJhbnNjZWl2ZXIpIHtcbiAgICAgICAgICBpZiAodHJhbnNjZWl2ZXIucmVqZWN0ZWQpIHtcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhciBjYW5kID0gT2JqZWN0LmtleXMoY2FuZGlkYXRlLmNhbmRpZGF0ZSkubGVuZ3RoID4gMCA/XG4gICAgICAgICAgICAgIFNEUFV0aWxzLnBhcnNlQ2FuZGlkYXRlKGNhbmRpZGF0ZS5jYW5kaWRhdGUpIDoge307XG4gICAgICAgICAgLy8gSWdub3JlIENocm9tZSdzIGludmFsaWQgY2FuZGlkYXRlcyBzaW5jZSBFZGdlIGRvZXMgbm90IGxpa2UgdGhlbS5cbiAgICAgICAgICBpZiAoY2FuZC5wcm90b2NvbCA9PT0gJ3RjcCcgJiYgKGNhbmQucG9ydCA9PT0gMCB8fCBjYW5kLnBvcnQgPT09IDkpKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBJZ25vcmUgUlRDUCBjYW5kaWRhdGVzLCB3ZSBhc3N1bWUgUlRDUC1NVVguXG4gICAgICAgICAgaWYgKGNhbmQuY29tcG9uZW50ICYmIGNhbmQuY29tcG9uZW50ICE9PSAxKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyB3aGVuIHVzaW5nIGJ1bmRsZSwgYXZvaWQgYWRkaW5nIGNhbmRpZGF0ZXMgdG8gdGhlIHdyb25nXG4gICAgICAgICAgLy8gaWNlIHRyYW5zcG9ydC4gQW5kIGF2b2lkIGFkZGluZyBjYW5kaWRhdGVzIGFkZGVkIGluIHRoZSBTRFAuXG4gICAgICAgICAgaWYgKHNkcE1MaW5lSW5kZXggPT09IDAgfHwgKHNkcE1MaW5lSW5kZXggPiAwICYmXG4gICAgICAgICAgICAgIHRyYW5zY2VpdmVyLmljZVRyYW5zcG9ydCAhPT0gcGMudHJhbnNjZWl2ZXJzWzBdLmljZVRyYW5zcG9ydCkpIHtcbiAgICAgICAgICAgIGlmICghbWF5YmVBZGRDYW5kaWRhdGUodHJhbnNjZWl2ZXIuaWNlVHJhbnNwb3J0LCBjYW5kKSkge1xuICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KG1ha2VFcnJvcignT3BlcmF0aW9uRXJyb3InLFxuICAgICAgICAgICAgICAgICAgJ0NhbiBub3QgYWRkIElDRSBjYW5kaWRhdGUnKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gdXBkYXRlIHRoZSByZW1vdGVEZXNjcmlwdGlvbi5cbiAgICAgICAgICB2YXIgY2FuZGlkYXRlU3RyaW5nID0gY2FuZGlkYXRlLmNhbmRpZGF0ZS50cmltKCk7XG4gICAgICAgICAgaWYgKGNhbmRpZGF0ZVN0cmluZy5pbmRleE9mKCdhPScpID09PSAwKSB7XG4gICAgICAgICAgICBjYW5kaWRhdGVTdHJpbmcgPSBjYW5kaWRhdGVTdHJpbmcuc3Vic3RyKDIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzZWN0aW9ucyA9IFNEUFV0aWxzLmdldE1lZGlhU2VjdGlvbnMocGMucmVtb3RlRGVzY3JpcHRpb24uc2RwKTtcbiAgICAgICAgICBzZWN0aW9uc1tzZHBNTGluZUluZGV4XSArPSAnYT0nICtcbiAgICAgICAgICAgICAgKGNhbmQudHlwZSA/IGNhbmRpZGF0ZVN0cmluZyA6ICdlbmQtb2YtY2FuZGlkYXRlcycpXG4gICAgICAgICAgICAgICsgJ1xcclxcbic7XG4gICAgICAgICAgcGMucmVtb3RlRGVzY3JpcHRpb24uc2RwID0gc2VjdGlvbnMuam9pbignJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHJlamVjdChtYWtlRXJyb3IoJ09wZXJhdGlvbkVycm9yJyxcbiAgICAgICAgICAgICAgJ0NhbiBub3QgYWRkIElDRSBjYW5kaWRhdGUnKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJlc29sdmUoKTtcbiAgICB9KTtcbiAgfTtcblxuICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U3RhdHMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcHJvbWlzZXMgPSBbXTtcbiAgICB0aGlzLnRyYW5zY2VpdmVycy5mb3JFYWNoKGZ1bmN0aW9uKHRyYW5zY2VpdmVyKSB7XG4gICAgICBbJ3J0cFNlbmRlcicsICdydHBSZWNlaXZlcicsICdpY2VHYXRoZXJlcicsICdpY2VUcmFuc3BvcnQnLFxuICAgICAgICAgICdkdGxzVHJhbnNwb3J0J10uZm9yRWFjaChmdW5jdGlvbihtZXRob2QpIHtcbiAgICAgICAgICAgIGlmICh0cmFuc2NlaXZlclttZXRob2RdKSB7XG4gICAgICAgICAgICAgIHByb21pc2VzLnB1c2godHJhbnNjZWl2ZXJbbWV0aG9kXS5nZXRTdGF0cygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICB9KTtcbiAgICB2YXIgZml4U3RhdHNUeXBlID0gZnVuY3Rpb24oc3RhdCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaW5ib3VuZHJ0cDogJ2luYm91bmQtcnRwJyxcbiAgICAgICAgb3V0Ym91bmRydHA6ICdvdXRib3VuZC1ydHAnLFxuICAgICAgICBjYW5kaWRhdGVwYWlyOiAnY2FuZGlkYXRlLXBhaXInLFxuICAgICAgICBsb2NhbGNhbmRpZGF0ZTogJ2xvY2FsLWNhbmRpZGF0ZScsXG4gICAgICAgIHJlbW90ZWNhbmRpZGF0ZTogJ3JlbW90ZS1jYW5kaWRhdGUnXG4gICAgICB9W3N0YXQudHlwZV0gfHwgc3RhdC50eXBlO1xuICAgIH07XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUpIHtcbiAgICAgIC8vIHNoaW0gZ2V0U3RhdHMgd2l0aCBtYXBsaWtlIHN1cHBvcnRcbiAgICAgIHZhciByZXN1bHRzID0gbmV3IE1hcCgpO1xuICAgICAgUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIHJlcy5mb3JFYWNoKGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgICAgIE9iamVjdC5rZXlzKHJlc3VsdCkuZm9yRWFjaChmdW5jdGlvbihpZCkge1xuICAgICAgICAgICAgcmVzdWx0W2lkXS50eXBlID0gZml4U3RhdHNUeXBlKHJlc3VsdFtpZF0pO1xuICAgICAgICAgICAgcmVzdWx0cy5zZXQoaWQsIHJlc3VsdFtpZF0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgcmVzb2x2ZShyZXN1bHRzKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gIC8vIGxlZ2FjeSBjYWxsYmFjayBzaGltcy4gU2hvdWxkIGJlIG1vdmVkIHRvIGFkYXB0ZXIuanMgc29tZSBkYXlzLlxuICB2YXIgbWV0aG9kcyA9IFsnY3JlYXRlT2ZmZXInLCAnY3JlYXRlQW5zd2VyJ107XG4gIG1ldGhvZHMuZm9yRWFjaChmdW5jdGlvbihtZXRob2QpIHtcbiAgICB2YXIgbmF0aXZlTWV0aG9kID0gUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlW21ldGhvZF07XG4gICAgUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlW21ldGhvZF0gPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgaWYgKHR5cGVvZiBhcmdzWzBdID09PSAnZnVuY3Rpb24nIHx8XG4gICAgICAgICAgdHlwZW9mIGFyZ3NbMV0gPT09ICdmdW5jdGlvbicpIHsgLy8gbGVnYWN5XG4gICAgICAgIHJldHVybiBuYXRpdmVNZXRob2QuYXBwbHkodGhpcywgW2FyZ3VtZW50c1syXV0pXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKGRlc2NyaXB0aW9uKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBhcmdzWzBdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBhcmdzWzBdLmFwcGx5KG51bGwsIFtkZXNjcmlwdGlvbl0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIGFyZ3NbMV0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGFyZ3NbMV0uYXBwbHkobnVsbCwgW2Vycm9yXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBuYXRpdmVNZXRob2QuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9O1xuICB9KTtcblxuICBtZXRob2RzID0gWydzZXRMb2NhbERlc2NyaXB0aW9uJywgJ3NldFJlbW90ZURlc2NyaXB0aW9uJywgJ2FkZEljZUNhbmRpZGF0ZSddO1xuICBtZXRob2RzLmZvckVhY2goZnVuY3Rpb24obWV0aG9kKSB7XG4gICAgdmFyIG5hdGl2ZU1ldGhvZCA9IFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVttZXRob2RdO1xuICAgIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgIGlmICh0eXBlb2YgYXJnc1sxXSA9PT0gJ2Z1bmN0aW9uJyB8fFxuICAgICAgICAgIHR5cGVvZiBhcmdzWzJdID09PSAnZnVuY3Rpb24nKSB7IC8vIGxlZ2FjeVxuICAgICAgICByZXR1cm4gbmF0aXZlTWV0aG9kLmFwcGx5KHRoaXMsIGFyZ3VtZW50cylcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBhcmdzWzFdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBhcmdzWzFdLmFwcGx5KG51bGwpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIGFyZ3NbMl0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGFyZ3NbMl0uYXBwbHkobnVsbCwgW2Vycm9yXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBuYXRpdmVNZXRob2QuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9O1xuICB9KTtcblxuICAvLyBnZXRTdGF0cyBpcyBzcGVjaWFsLiBJdCBkb2Vzbid0IGhhdmUgYSBzcGVjIGxlZ2FjeSBtZXRob2QgeWV0IHdlIHN1cHBvcnRcbiAgLy8gZ2V0U3RhdHMoc29tZXRoaW5nLCBjYikgd2l0aG91dCBlcnJvciBjYWxsYmFja3MuXG4gIFsnZ2V0U3RhdHMnXS5mb3JFYWNoKGZ1bmN0aW9uKG1ldGhvZCkge1xuICAgIHZhciBuYXRpdmVNZXRob2QgPSBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbbWV0aG9kXTtcbiAgICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbbWV0aG9kXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICBpZiAodHlwZW9mIGFyZ3NbMV0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIG5hdGl2ZU1ldGhvZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmICh0eXBlb2YgYXJnc1sxXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgYXJnc1sxXS5hcHBseShudWxsKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5hdGl2ZU1ldGhvZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH07XG4gIH0pO1xuXG4gIHJldHVybiBSVENQZWVyQ29ubmVjdGlvbjtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9ydGNwZWVyY29ubmVjdGlvbi1zaGltL3J0Y3BlZXJjb25uZWN0aW9uLmpzXG4vLyBtb2R1bGUgaWQgPSA2MFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///60\n")},function(module,exports,__webpack_require__){"use strict";eval("/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n\n\n// Expose public methods.\nmodule.exports = function(window) {\n  var navigator = window && window.navigator;\n\n  var shimError_ = function(e) {\n    return {\n      name: {PermissionDeniedError: 'NotAllowedError'}[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraint,\n      toString: function() {\n        return this.name;\n      }\n    };\n  };\n\n  // getUserMedia error shim.\n  var origGetUserMedia = navigator.mediaDevices.getUserMedia.\n      bind(navigator.mediaDevices);\n  navigator.mediaDevices.getUserMedia = function(c) {\n    return origGetUserMedia(c).catch(function(e) {\n      return Promise.reject(shimError_(e));\n    });\n  };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNjEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvd2VicnRjLWFkYXB0ZXIvc3JjL2pzL2VkZ2UvZ2V0dXNlcm1lZGlhLmpzP2E2ZmEiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqICBDb3B5cmlnaHQgKGMpIDIwMTYgVGhlIFdlYlJUQyBwcm9qZWN0IGF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGEgQlNELXN0eWxlIGxpY2Vuc2VcbiAqICB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoZSBzb3VyY2VcbiAqICB0cmVlLlxuICovXG4gLyogZXNsaW50LWVudiBub2RlICovXG4ndXNlIHN0cmljdCc7XG5cbi8vIEV4cG9zZSBwdWJsaWMgbWV0aG9kcy5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24od2luZG93KSB7XG4gIHZhciBuYXZpZ2F0b3IgPSB3aW5kb3cgJiYgd2luZG93Lm5hdmlnYXRvcjtcblxuICB2YXIgc2hpbUVycm9yXyA9IGZ1bmN0aW9uKGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZToge1Blcm1pc3Npb25EZW5pZWRFcnJvcjogJ05vdEFsbG93ZWRFcnJvcid9W2UubmFtZV0gfHwgZS5uYW1lLFxuICAgICAgbWVzc2FnZTogZS5tZXNzYWdlLFxuICAgICAgY29uc3RyYWludDogZS5jb25zdHJhaW50LFxuICAgICAgdG9TdHJpbmc6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5uYW1lO1xuICAgICAgfVxuICAgIH07XG4gIH07XG5cbiAgLy8gZ2V0VXNlck1lZGlhIGVycm9yIHNoaW0uXG4gIHZhciBvcmlnR2V0VXNlck1lZGlhID0gbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEuXG4gICAgICBiaW5kKG5hdmlnYXRvci5tZWRpYURldmljZXMpO1xuICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSA9IGZ1bmN0aW9uKGMpIHtcbiAgICByZXR1cm4gb3JpZ0dldFVzZXJNZWRpYShjKS5jYXRjaChmdW5jdGlvbihlKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3Qoc2hpbUVycm9yXyhlKSk7XG4gICAgfSk7XG4gIH07XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvd2VicnRjLWFkYXB0ZXIvc3JjL2pzL2VkZ2UvZ2V0dXNlcm1lZGlhLmpzXG4vLyBtb2R1bGUgaWQgPSA2MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///61\n")},function(module,exports,__webpack_require__){"use strict";eval("/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n\n\nvar utils = __webpack_require__(/*! ../utils */ 5);\n\nmodule.exports = {\n  shimGetUserMedia: __webpack_require__(/*! ./getusermedia */ 63),\n  shimOnTrack: function(window) {\n    if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n        window.RTCPeerConnection.prototype)) {\n      Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n        get: function() {\n          return this._ontrack;\n        },\n        set: function(f) {\n          if (this._ontrack) {\n            this.removeEventListener('track', this._ontrack);\n            this.removeEventListener('addstream', this._ontrackpoly);\n          }\n          this.addEventListener('track', this._ontrack = f);\n          this.addEventListener('addstream', this._ontrackpoly = function(e) {\n            e.stream.getTracks().forEach(function(track) {\n              var event = new Event('track');\n              event.track = track;\n              event.receiver = {track: track};\n              event.transceiver = {receiver: event.receiver};\n              event.streams = [e.stream];\n              this.dispatchEvent(event);\n            }.bind(this));\n          }.bind(this));\n        }\n      });\n    }\n    if (typeof window === 'object' && window.RTCTrackEvent &&\n        ('receiver' in window.RTCTrackEvent.prototype) &&\n        !('transceiver' in window.RTCTrackEvent.prototype)) {\n      Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n        get: function() {\n          return {receiver: this.receiver};\n        }\n      });\n    }\n  },\n\n  shimSourceObject: function(window) {\n    // Firefox has supported mozSrcObject since FF22, unprefixed in 42.\n    if (typeof window === 'object') {\n      if (window.HTMLMediaElement &&\n        !('srcObject' in window.HTMLMediaElement.prototype)) {\n        // Shim the srcObject property, once, when HTMLMediaElement is found.\n        Object.defineProperty(window.HTMLMediaElement.prototype, 'srcObject', {\n          get: function() {\n            return this.mozSrcObject;\n          },\n          set: function(stream) {\n            this.mozSrcObject = stream;\n          }\n        });\n      }\n    }\n  },\n\n  shimPeerConnection: function(window) {\n    var browserDetails = utils.detectBrowser(window);\n\n    if (typeof window !== 'object' || !(window.RTCPeerConnection ||\n        window.mozRTCPeerConnection)) {\n      return; // probably media.peerconnection.enabled=false in about:config\n    }\n    // The RTCPeerConnection object.\n    if (!window.RTCPeerConnection) {\n      window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n        if (browserDetails.version < 38) {\n          // .urls is not supported in FF < 38.\n          // create RTCIceServers with a single url.\n          if (pcConfig && pcConfig.iceServers) {\n            var newIceServers = [];\n            for (var i = 0; i < pcConfig.iceServers.length; i++) {\n              var server = pcConfig.iceServers[i];\n              if (server.hasOwnProperty('urls')) {\n                for (var j = 0; j < server.urls.length; j++) {\n                  var newServer = {\n                    url: server.urls[j]\n                  };\n                  if (server.urls[j].indexOf('turn') === 0) {\n                    newServer.username = server.username;\n                    newServer.credential = server.credential;\n                  }\n                  newIceServers.push(newServer);\n                }\n              } else {\n                newIceServers.push(pcConfig.iceServers[i]);\n              }\n            }\n            pcConfig.iceServers = newIceServers;\n          }\n        }\n        return new window.mozRTCPeerConnection(pcConfig, pcConstraints);\n      };\n      window.RTCPeerConnection.prototype =\n          window.mozRTCPeerConnection.prototype;\n\n      // wrap static methods. Currently just generateCertificate.\n      if (window.mozRTCPeerConnection.generateCertificate) {\n        Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n          get: function() {\n            return window.mozRTCPeerConnection.generateCertificate;\n          }\n        });\n      }\n\n      window.RTCSessionDescription = window.mozRTCSessionDescription;\n      window.RTCIceCandidate = window.mozRTCIceCandidate;\n    }\n\n    // shim away need for obsolete RTCIceCandidate/RTCSessionDescription.\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n        .forEach(function(method) {\n          var nativeMethod = window.RTCPeerConnection.prototype[method];\n          window.RTCPeerConnection.prototype[method] = function() {\n            arguments[0] = new ((method === 'addIceCandidate') ?\n                window.RTCIceCandidate :\n                window.RTCSessionDescription)(arguments[0]);\n            return nativeMethod.apply(this, arguments);\n          };\n        });\n\n    // support for addIceCandidate(null or undefined)\n    var nativeAddIceCandidate =\n        window.RTCPeerConnection.prototype.addIceCandidate;\n    window.RTCPeerConnection.prototype.addIceCandidate = function() {\n      if (!arguments[0]) {\n        if (arguments[1]) {\n          arguments[1].apply(null);\n        }\n        return Promise.resolve();\n      }\n      return nativeAddIceCandidate.apply(this, arguments);\n    };\n\n    // shim getStats with maplike support\n    var makeMapStats = function(stats) {\n      var map = new Map();\n      Object.keys(stats).forEach(function(key) {\n        map.set(key, stats[key]);\n        map[key] = stats[key];\n      });\n      return map;\n    };\n\n    var modernStatsTypes = {\n      inboundrtp: 'inbound-rtp',\n      outboundrtp: 'outbound-rtp',\n      candidatepair: 'candidate-pair',\n      localcandidate: 'local-candidate',\n      remotecandidate: 'remote-candidate'\n    };\n\n    var nativeGetStats = window.RTCPeerConnection.prototype.getStats;\n    window.RTCPeerConnection.prototype.getStats = function(\n      selector,\n      onSucc,\n      onErr\n    ) {\n      return nativeGetStats.apply(this, [selector || null])\n        .then(function(stats) {\n          if (browserDetails.version < 48) {\n            stats = makeMapStats(stats);\n          }\n          if (browserDetails.version < 53 && !onSucc) {\n            // Shim only promise getStats with spec-hyphens in type names\n            // Leave callback version alone; misc old uses of forEach before Map\n            try {\n              stats.forEach(function(stat) {\n                stat.type = modernStatsTypes[stat.type] || stat.type;\n              });\n            } catch (e) {\n              if (e.name !== 'TypeError') {\n                throw e;\n              }\n              // Avoid TypeError: \"type\" is read-only, in old versions. 34-43ish\n              stats.forEach(function(stat, i) {\n                stats.set(i, Object.assign({}, stat, {\n                  type: modernStatsTypes[stat.type] || stat.type\n                }));\n              });\n            }\n          }\n          return stats;\n        })\n        .then(onSucc, onErr);\n    };\n  },\n\n  shimRemoveStream: function(window) {\n    if (!window.RTCPeerConnection ||\n        'removeStream' in window.RTCPeerConnection.prototype) {\n      return;\n    }\n    window.RTCPeerConnection.prototype.removeStream = function(stream) {\n      var pc = this;\n      utils.deprecated('removeStream', 'removeTrack');\n      this.getSenders().forEach(function(sender) {\n        if (sender.track && stream.getTracks().indexOf(sender.track) !== -1) {\n          pc.removeTrack(sender);\n        }\n      });\n    };\n  }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNjIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvd2VicnRjLWFkYXB0ZXIvc3JjL2pzL2ZpcmVmb3gvZmlyZWZveF9zaGltLmpzP2E1YTYiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqICBDb3B5cmlnaHQgKGMpIDIwMTYgVGhlIFdlYlJUQyBwcm9qZWN0IGF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGEgQlNELXN0eWxlIGxpY2Vuc2VcbiAqICB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoZSBzb3VyY2VcbiAqICB0cmVlLlxuICovXG4gLyogZXNsaW50LWVudiBub2RlICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBzaGltR2V0VXNlck1lZGlhOiByZXF1aXJlKCcuL2dldHVzZXJtZWRpYScpLFxuICBzaGltT25UcmFjazogZnVuY3Rpb24od2luZG93KSB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnICYmIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiAmJiAhKCdvbnRyYWNrJyBpblxuICAgICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlKSkge1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUsICdvbnRyYWNrJywge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiB0aGlzLl9vbnRyYWNrO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uKGYpIHtcbiAgICAgICAgICBpZiAodGhpcy5fb250cmFjaykge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCd0cmFjaycsIHRoaXMuX29udHJhY2spO1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCdhZGRzdHJlYW0nLCB0aGlzLl9vbnRyYWNrcG9seSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcigndHJhY2snLCB0aGlzLl9vbnRyYWNrID0gZik7XG4gICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCdhZGRzdHJlYW0nLCB0aGlzLl9vbnRyYWNrcG9seSA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGUuc3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2goZnVuY3Rpb24odHJhY2spIHtcbiAgICAgICAgICAgICAgdmFyIGV2ZW50ID0gbmV3IEV2ZW50KCd0cmFjaycpO1xuICAgICAgICAgICAgICBldmVudC50cmFjayA9IHRyYWNrO1xuICAgICAgICAgICAgICBldmVudC5yZWNlaXZlciA9IHt0cmFjazogdHJhY2t9O1xuICAgICAgICAgICAgICBldmVudC50cmFuc2NlaXZlciA9IHtyZWNlaXZlcjogZXZlbnQucmVjZWl2ZXJ9O1xuICAgICAgICAgICAgICBldmVudC5zdHJlYW1zID0gW2Uuc3RyZWFtXTtcbiAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSk7XG4gICAgICAgICAgfS5iaW5kKHRoaXMpKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JyAmJiB3aW5kb3cuUlRDVHJhY2tFdmVudCAmJlxuICAgICAgICAoJ3JlY2VpdmVyJyBpbiB3aW5kb3cuUlRDVHJhY2tFdmVudC5wcm90b3R5cGUpICYmXG4gICAgICAgICEoJ3RyYW5zY2VpdmVyJyBpbiB3aW5kb3cuUlRDVHJhY2tFdmVudC5wcm90b3R5cGUpKSB7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LlJUQ1RyYWNrRXZlbnQucHJvdG90eXBlLCAndHJhbnNjZWl2ZXInLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIHtyZWNlaXZlcjogdGhpcy5yZWNlaXZlcn07XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfSxcblxuICBzaGltU291cmNlT2JqZWN0OiBmdW5jdGlvbih3aW5kb3cpIHtcbiAgICAvLyBGaXJlZm94IGhhcyBzdXBwb3J0ZWQgbW96U3JjT2JqZWN0IHNpbmNlIEZGMjIsIHVucHJlZml4ZWQgaW4gNDIuXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnKSB7XG4gICAgICBpZiAod2luZG93LkhUTUxNZWRpYUVsZW1lbnQgJiZcbiAgICAgICAgISgnc3JjT2JqZWN0JyBpbiB3aW5kb3cuSFRNTE1lZGlhRWxlbWVudC5wcm90b3R5cGUpKSB7XG4gICAgICAgIC8vIFNoaW0gdGhlIHNyY09iamVjdCBwcm9wZXJ0eSwgb25jZSwgd2hlbiBIVE1MTWVkaWFFbGVtZW50IGlzIGZvdW5kLlxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LkhUTUxNZWRpYUVsZW1lbnQucHJvdG90eXBlLCAnc3JjT2JqZWN0Jywge1xuICAgICAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tb3pTcmNPYmplY3Q7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBzZXQ6IGZ1bmN0aW9uKHN0cmVhbSkge1xuICAgICAgICAgICAgdGhpcy5tb3pTcmNPYmplY3QgPSBzdHJlYW07XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgc2hpbVBlZXJDb25uZWN0aW9uOiBmdW5jdGlvbih3aW5kb3cpIHtcbiAgICB2YXIgYnJvd3NlckRldGFpbHMgPSB1dGlscy5kZXRlY3RCcm93c2VyKHdpbmRvdyk7XG5cbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ29iamVjdCcgfHwgISh3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24gfHxcbiAgICAgICAgd2luZG93Lm1velJUQ1BlZXJDb25uZWN0aW9uKSkge1xuICAgICAgcmV0dXJuOyAvLyBwcm9iYWJseSBtZWRpYS5wZWVyY29ubmVjdGlvbi5lbmFibGVkPWZhbHNlIGluIGFib3V0OmNvbmZpZ1xuICAgIH1cbiAgICAvLyBUaGUgUlRDUGVlckNvbm5lY3Rpb24gb2JqZWN0LlxuICAgIGlmICghd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uKSB7XG4gICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24gPSBmdW5jdGlvbihwY0NvbmZpZywgcGNDb25zdHJhaW50cykge1xuICAgICAgICBpZiAoYnJvd3NlckRldGFpbHMudmVyc2lvbiA8IDM4KSB7XG4gICAgICAgICAgLy8gLnVybHMgaXMgbm90IHN1cHBvcnRlZCBpbiBGRiA8IDM4LlxuICAgICAgICAgIC8vIGNyZWF0ZSBSVENJY2VTZXJ2ZXJzIHdpdGggYSBzaW5nbGUgdXJsLlxuICAgICAgICAgIGlmIChwY0NvbmZpZyAmJiBwY0NvbmZpZy5pY2VTZXJ2ZXJzKSB7XG4gICAgICAgICAgICB2YXIgbmV3SWNlU2VydmVycyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwY0NvbmZpZy5pY2VTZXJ2ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgIHZhciBzZXJ2ZXIgPSBwY0NvbmZpZy5pY2VTZXJ2ZXJzW2ldO1xuICAgICAgICAgICAgICBpZiAoc2VydmVyLmhhc093blByb3BlcnR5KCd1cmxzJykpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHNlcnZlci51cmxzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICB2YXIgbmV3U2VydmVyID0ge1xuICAgICAgICAgICAgICAgICAgICB1cmw6IHNlcnZlci51cmxzW2pdXG4gICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgaWYgKHNlcnZlci51cmxzW2pdLmluZGV4T2YoJ3R1cm4nKSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBuZXdTZXJ2ZXIudXNlcm5hbWUgPSBzZXJ2ZXIudXNlcm5hbWU7XG4gICAgICAgICAgICAgICAgICAgIG5ld1NlcnZlci5jcmVkZW50aWFsID0gc2VydmVyLmNyZWRlbnRpYWw7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBuZXdJY2VTZXJ2ZXJzLnB1c2gobmV3U2VydmVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3SWNlU2VydmVycy5wdXNoKHBjQ29uZmlnLmljZVNlcnZlcnNbaV0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwY0NvbmZpZy5pY2VTZXJ2ZXJzID0gbmV3SWNlU2VydmVycztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyB3aW5kb3cubW96UlRDUGVlckNvbm5lY3Rpb24ocGNDb25maWcsIHBjQ29uc3RyYWludHMpO1xuICAgICAgfTtcbiAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUgPVxuICAgICAgICAgIHdpbmRvdy5tb3pSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGU7XG5cbiAgICAgIC8vIHdyYXAgc3RhdGljIG1ldGhvZHMuIEN1cnJlbnRseSBqdXN0IGdlbmVyYXRlQ2VydGlmaWNhdGUuXG4gICAgICBpZiAod2luZG93Lm1velJUQ1BlZXJDb25uZWN0aW9uLmdlbmVyYXRlQ2VydGlmaWNhdGUpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiwgJ2dlbmVyYXRlQ2VydGlmaWNhdGUnLCB7XG4gICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB3aW5kb3cubW96UlRDUGVlckNvbm5lY3Rpb24uZ2VuZXJhdGVDZXJ0aWZpY2F0ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICB3aW5kb3cuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uID0gd2luZG93Lm1velJUQ1Nlc3Npb25EZXNjcmlwdGlvbjtcbiAgICAgIHdpbmRvdy5SVENJY2VDYW5kaWRhdGUgPSB3aW5kb3cubW96UlRDSWNlQ2FuZGlkYXRlO1xuICAgIH1cblxuICAgIC8vIHNoaW0gYXdheSBuZWVkIGZvciBvYnNvbGV0ZSBSVENJY2VDYW5kaWRhdGUvUlRDU2Vzc2lvbkRlc2NyaXB0aW9uLlxuICAgIFsnc2V0TG9jYWxEZXNjcmlwdGlvbicsICdzZXRSZW1vdGVEZXNjcmlwdGlvbicsICdhZGRJY2VDYW5kaWRhdGUnXVxuICAgICAgICAuZm9yRWFjaChmdW5jdGlvbihtZXRob2QpIHtcbiAgICAgICAgICB2YXIgbmF0aXZlTWV0aG9kID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVttZXRob2RdO1xuICAgICAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbbWV0aG9kXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgYXJndW1lbnRzWzBdID0gbmV3ICgobWV0aG9kID09PSAnYWRkSWNlQ2FuZGlkYXRlJykgP1xuICAgICAgICAgICAgICAgIHdpbmRvdy5SVENJY2VDYW5kaWRhdGUgOlxuICAgICAgICAgICAgICAgIHdpbmRvdy5SVENTZXNzaW9uRGVzY3JpcHRpb24pKGFyZ3VtZW50c1swXSk7XG4gICAgICAgICAgICByZXR1cm4gbmF0aXZlTWV0aG9kLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgfTtcbiAgICAgICAgfSk7XG5cbiAgICAvLyBzdXBwb3J0IGZvciBhZGRJY2VDYW5kaWRhdGUobnVsbCBvciB1bmRlZmluZWQpXG4gICAgdmFyIG5hdGl2ZUFkZEljZUNhbmRpZGF0ZSA9XG4gICAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkSWNlQ2FuZGlkYXRlO1xuICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkSWNlQ2FuZGlkYXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoIWFyZ3VtZW50c1swXSkge1xuICAgICAgICBpZiAoYXJndW1lbnRzWzFdKSB7XG4gICAgICAgICAgYXJndW1lbnRzWzFdLmFwcGx5KG51bGwpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBuYXRpdmVBZGRJY2VDYW5kaWRhdGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9O1xuXG4gICAgLy8gc2hpbSBnZXRTdGF0cyB3aXRoIG1hcGxpa2Ugc3VwcG9ydFxuICAgIHZhciBtYWtlTWFwU3RhdHMgPSBmdW5jdGlvbihzdGF0cykge1xuICAgICAgdmFyIG1hcCA9IG5ldyBNYXAoKTtcbiAgICAgIE9iamVjdC5rZXlzKHN0YXRzKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuICAgICAgICBtYXAuc2V0KGtleSwgc3RhdHNba2V5XSk7XG4gICAgICAgIG1hcFtrZXldID0gc3RhdHNba2V5XTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIG1hcDtcbiAgICB9O1xuXG4gICAgdmFyIG1vZGVyblN0YXRzVHlwZXMgPSB7XG4gICAgICBpbmJvdW5kcnRwOiAnaW5ib3VuZC1ydHAnLFxuICAgICAgb3V0Ym91bmRydHA6ICdvdXRib3VuZC1ydHAnLFxuICAgICAgY2FuZGlkYXRlcGFpcjogJ2NhbmRpZGF0ZS1wYWlyJyxcbiAgICAgIGxvY2FsY2FuZGlkYXRlOiAnbG9jYWwtY2FuZGlkYXRlJyxcbiAgICAgIHJlbW90ZWNhbmRpZGF0ZTogJ3JlbW90ZS1jYW5kaWRhdGUnXG4gICAgfTtcblxuICAgIHZhciBuYXRpdmVHZXRTdGF0cyA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U3RhdHM7XG4gICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTdGF0cyA9IGZ1bmN0aW9uKFxuICAgICAgc2VsZWN0b3IsXG4gICAgICBvblN1Y2MsXG4gICAgICBvbkVyclxuICAgICkge1xuICAgICAgcmV0dXJuIG5hdGl2ZUdldFN0YXRzLmFwcGx5KHRoaXMsIFtzZWxlY3RvciB8fCBudWxsXSlcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oc3RhdHMpIHtcbiAgICAgICAgICBpZiAoYnJvd3NlckRldGFpbHMudmVyc2lvbiA8IDQ4KSB7XG4gICAgICAgICAgICBzdGF0cyA9IG1ha2VNYXBTdGF0cyhzdGF0cyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChicm93c2VyRGV0YWlscy52ZXJzaW9uIDwgNTMgJiYgIW9uU3VjYykge1xuICAgICAgICAgICAgLy8gU2hpbSBvbmx5IHByb21pc2UgZ2V0U3RhdHMgd2l0aCBzcGVjLWh5cGhlbnMgaW4gdHlwZSBuYW1lc1xuICAgICAgICAgICAgLy8gTGVhdmUgY2FsbGJhY2sgdmVyc2lvbiBhbG9uZTsgbWlzYyBvbGQgdXNlcyBvZiBmb3JFYWNoIGJlZm9yZSBNYXBcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIHN0YXRzLmZvckVhY2goZnVuY3Rpb24oc3RhdCkge1xuICAgICAgICAgICAgICAgIHN0YXQudHlwZSA9IG1vZGVyblN0YXRzVHlwZXNbc3RhdC50eXBlXSB8fCBzdGF0LnR5cGU7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICBpZiAoZS5uYW1lICE9PSAnVHlwZUVycm9yJykge1xuICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgLy8gQXZvaWQgVHlwZUVycm9yOiBcInR5cGVcIiBpcyByZWFkLW9ubHksIGluIG9sZCB2ZXJzaW9ucy4gMzQtNDNpc2hcbiAgICAgICAgICAgICAgc3RhdHMuZm9yRWFjaChmdW5jdGlvbihzdGF0LCBpKSB7XG4gICAgICAgICAgICAgICAgc3RhdHMuc2V0KGksIE9iamVjdC5hc3NpZ24oe30sIHN0YXQsIHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IG1vZGVyblN0YXRzVHlwZXNbc3RhdC50eXBlXSB8fCBzdGF0LnR5cGVcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gc3RhdHM7XG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKG9uU3VjYywgb25FcnIpO1xuICAgIH07XG4gIH0sXG5cbiAgc2hpbVJlbW92ZVN0cmVhbTogZnVuY3Rpb24od2luZG93KSB7XG4gICAgaWYgKCF3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24gfHxcbiAgICAgICAgJ3JlbW92ZVN0cmVhbScgaW4gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnJlbW92ZVN0cmVhbSA9IGZ1bmN0aW9uKHN0cmVhbSkge1xuICAgICAgdmFyIHBjID0gdGhpcztcbiAgICAgIHV0aWxzLmRlcHJlY2F0ZWQoJ3JlbW92ZVN0cmVhbScsICdyZW1vdmVUcmFjaycpO1xuICAgICAgdGhpcy5nZXRTZW5kZXJzKCkuZm9yRWFjaChmdW5jdGlvbihzZW5kZXIpIHtcbiAgICAgICAgaWYgKHNlbmRlci50cmFjayAmJiBzdHJlYW0uZ2V0VHJhY2tzKCkuaW5kZXhPZihzZW5kZXIudHJhY2spICE9PSAtMSkge1xuICAgICAgICAgIHBjLnJlbW92ZVRyYWNrKHNlbmRlcik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH07XG4gIH1cbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy93ZWJydGMtYWRhcHRlci9zcmMvanMvZmlyZWZveC9maXJlZm94X3NoaW0uanNcbi8vIG1vZHVsZSBpZCA9IDYyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///62\n")},function(module,exports,__webpack_require__){"use strict";eval("/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n\n\nvar utils = __webpack_require__(/*! ../utils */ 5);\nvar logging = utils.log;\n\n// Expose public methods.\nmodule.exports = function(window) {\n  var browserDetails = utils.detectBrowser(window);\n  var navigator = window && window.navigator;\n  var MediaStreamTrack = window && window.MediaStreamTrack;\n\n  var shimError_ = function(e) {\n    return {\n      name: {\n        InternalError: 'NotReadableError',\n        NotSupportedError: 'TypeError',\n        PermissionDeniedError: 'NotAllowedError',\n        SecurityError: 'NotAllowedError'\n      }[e.name] || e.name,\n      message: {\n        'The operation is insecure.': 'The request is not allowed by the ' +\n        'user agent or the platform in the current context.'\n      }[e.message] || e.message,\n      constraint: e.constraint,\n      toString: function() {\n        return this.name + (this.message && ': ') + this.message;\n      }\n    };\n  };\n\n  // getUserMedia constraints shim.\n  var getUserMedia_ = function(constraints, onSuccess, onError) {\n    var constraintsToFF37_ = function(c) {\n      if (typeof c !== 'object' || c.require) {\n        return c;\n      }\n      var require = [];\n      Object.keys(c).forEach(function(key) {\n        if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n          return;\n        }\n        var r = c[key] = (typeof c[key] === 'object') ?\n            c[key] : {ideal: c[key]};\n        if (r.min !== undefined ||\n            r.max !== undefined || r.exact !== undefined) {\n          require.push(key);\n        }\n        if (r.exact !== undefined) {\n          if (typeof r.exact === 'number') {\n            r. min = r.max = r.exact;\n          } else {\n            c[key] = r.exact;\n          }\n          delete r.exact;\n        }\n        if (r.ideal !== undefined) {\n          c.advanced = c.advanced || [];\n          var oc = {};\n          if (typeof r.ideal === 'number') {\n            oc[key] = {min: r.ideal, max: r.ideal};\n          } else {\n            oc[key] = r.ideal;\n          }\n          c.advanced.push(oc);\n          delete r.ideal;\n          if (!Object.keys(r).length) {\n            delete c[key];\n          }\n        }\n      });\n      if (require.length) {\n        c.require = require;\n      }\n      return c;\n    };\n    constraints = JSON.parse(JSON.stringify(constraints));\n    if (browserDetails.version < 38) {\n      logging('spec: ' + JSON.stringify(constraints));\n      if (constraints.audio) {\n        constraints.audio = constraintsToFF37_(constraints.audio);\n      }\n      if (constraints.video) {\n        constraints.video = constraintsToFF37_(constraints.video);\n      }\n      logging('ff37: ' + JSON.stringify(constraints));\n    }\n    return navigator.mozGetUserMedia(constraints, onSuccess, function(e) {\n      onError(shimError_(e));\n    });\n  };\n\n  // Returns the result of getUserMedia as a Promise.\n  var getUserMediaPromise_ = function(constraints) {\n    return new Promise(function(resolve, reject) {\n      getUserMedia_(constraints, resolve, reject);\n    });\n  };\n\n  // Shim for mediaDevices on older versions.\n  if (!navigator.mediaDevices) {\n    navigator.mediaDevices = {getUserMedia: getUserMediaPromise_,\n      addEventListener: function() { },\n      removeEventListener: function() { }\n    };\n  }\n  navigator.mediaDevices.enumerateDevices =\n      navigator.mediaDevices.enumerateDevices || function() {\n        return new Promise(function(resolve) {\n          var infos = [\n            {kind: 'audioinput', deviceId: 'default', label: '', groupId: ''},\n            {kind: 'videoinput', deviceId: 'default', label: '', groupId: ''}\n          ];\n          resolve(infos);\n        });\n      };\n\n  if (browserDetails.version < 41) {\n    // Work around http://bugzil.la/1169665\n    var orgEnumerateDevices =\n        navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);\n    navigator.mediaDevices.enumerateDevices = function() {\n      return orgEnumerateDevices().then(undefined, function(e) {\n        if (e.name === 'NotFoundError') {\n          return [];\n        }\n        throw e;\n      });\n    };\n  }\n  if (browserDetails.version < 49) {\n    var origGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(c) {\n      return origGetUserMedia(c).then(function(stream) {\n        // Work around https://bugzil.la/802326\n        if (c.audio && !stream.getAudioTracks().length ||\n            c.video && !stream.getVideoTracks().length) {\n          stream.getTracks().forEach(function(track) {\n            track.stop();\n          });\n          throw new DOMException('The object can not be found here.',\n                                 'NotFoundError');\n        }\n        return stream;\n      }, function(e) {\n        return Promise.reject(shimError_(e));\n      });\n    };\n  }\n  if (!(browserDetails.version > 55 &&\n      'autoGainControl' in navigator.mediaDevices.getSupportedConstraints())) {\n    var remap = function(obj, a, b) {\n      if (a in obj && !(b in obj)) {\n        obj[b] = obj[a];\n        delete obj[a];\n      }\n    };\n\n    var nativeGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(c) {\n      if (typeof c === 'object' && typeof c.audio === 'object') {\n        c = JSON.parse(JSON.stringify(c));\n        remap(c.audio, 'autoGainControl', 'mozAutoGainControl');\n        remap(c.audio, 'noiseSuppression', 'mozNoiseSuppression');\n      }\n      return nativeGetUserMedia(c);\n    };\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.getSettings) {\n      var nativeGetSettings = MediaStreamTrack.prototype.getSettings;\n      MediaStreamTrack.prototype.getSettings = function() {\n        var obj = nativeGetSettings.apply(this, arguments);\n        remap(obj, 'mozAutoGainControl', 'autoGainControl');\n        remap(obj, 'mozNoiseSuppression', 'noiseSuppression');\n        return obj;\n      };\n    }\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.applyConstraints) {\n      var nativeApplyConstraints = MediaStreamTrack.prototype.applyConstraints;\n      MediaStreamTrack.prototype.applyConstraints = function(c) {\n        if (this.kind === 'audio' && typeof c === 'object') {\n          c = JSON.parse(JSON.stringify(c));\n          remap(c, 'autoGainControl', 'mozAutoGainControl');\n          remap(c, 'noiseSuppression', 'mozNoiseSuppression');\n        }\n        return nativeApplyConstraints.apply(this, [c]);\n      };\n    }\n  }\n  navigator.getUserMedia = function(constraints, onSuccess, onError) {\n    if (browserDetails.version < 44) {\n      return getUserMedia_(constraints, onSuccess, onError);\n    }\n    // Replace Firefox 44+'s deprecation warning with unprefixed version.\n    utils.deprecated('navigator.getUserMedia',\n        'navigator.mediaDevices.getUserMedia');\n    navigator.mediaDevices.getUserMedia(constraints).then(onSuccess, onError);\n  };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNjMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvd2VicnRjLWFkYXB0ZXIvc3JjL2pzL2ZpcmVmb3gvZ2V0dXNlcm1lZGlhLmpzPzlkNTciXSwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqICBDb3B5cmlnaHQgKGMpIDIwMTYgVGhlIFdlYlJUQyBwcm9qZWN0IGF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGEgQlNELXN0eWxlIGxpY2Vuc2VcbiAqICB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoZSBzb3VyY2VcbiAqICB0cmVlLlxuICovXG4gLyogZXNsaW50LWVudiBub2RlICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzJyk7XG52YXIgbG9nZ2luZyA9IHV0aWxzLmxvZztcblxuLy8gRXhwb3NlIHB1YmxpYyBtZXRob2RzLlxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbih3aW5kb3cpIHtcbiAgdmFyIGJyb3dzZXJEZXRhaWxzID0gdXRpbHMuZGV0ZWN0QnJvd3Nlcih3aW5kb3cpO1xuICB2YXIgbmF2aWdhdG9yID0gd2luZG93ICYmIHdpbmRvdy5uYXZpZ2F0b3I7XG4gIHZhciBNZWRpYVN0cmVhbVRyYWNrID0gd2luZG93ICYmIHdpbmRvdy5NZWRpYVN0cmVhbVRyYWNrO1xuXG4gIHZhciBzaGltRXJyb3JfID0gZnVuY3Rpb24oZSkge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiB7XG4gICAgICAgIEludGVybmFsRXJyb3I6ICdOb3RSZWFkYWJsZUVycm9yJyxcbiAgICAgICAgTm90U3VwcG9ydGVkRXJyb3I6ICdUeXBlRXJyb3InLFxuICAgICAgICBQZXJtaXNzaW9uRGVuaWVkRXJyb3I6ICdOb3RBbGxvd2VkRXJyb3InLFxuICAgICAgICBTZWN1cml0eUVycm9yOiAnTm90QWxsb3dlZEVycm9yJ1xuICAgICAgfVtlLm5hbWVdIHx8IGUubmFtZSxcbiAgICAgIG1lc3NhZ2U6IHtcbiAgICAgICAgJ1RoZSBvcGVyYXRpb24gaXMgaW5zZWN1cmUuJzogJ1RoZSByZXF1ZXN0IGlzIG5vdCBhbGxvd2VkIGJ5IHRoZSAnICtcbiAgICAgICAgJ3VzZXIgYWdlbnQgb3IgdGhlIHBsYXRmb3JtIGluIHRoZSBjdXJyZW50IGNvbnRleHQuJ1xuICAgICAgfVtlLm1lc3NhZ2VdIHx8IGUubWVzc2FnZSxcbiAgICAgIGNvbnN0cmFpbnQ6IGUuY29uc3RyYWludCxcbiAgICAgIHRvU3RyaW5nOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubmFtZSArICh0aGlzLm1lc3NhZ2UgJiYgJzogJykgKyB0aGlzLm1lc3NhZ2U7XG4gICAgICB9XG4gICAgfTtcbiAgfTtcblxuICAvLyBnZXRVc2VyTWVkaWEgY29uc3RyYWludHMgc2hpbS5cbiAgdmFyIGdldFVzZXJNZWRpYV8gPSBmdW5jdGlvbihjb25zdHJhaW50cywgb25TdWNjZXNzLCBvbkVycm9yKSB7XG4gICAgdmFyIGNvbnN0cmFpbnRzVG9GRjM3XyA9IGZ1bmN0aW9uKGMpIHtcbiAgICAgIGlmICh0eXBlb2YgYyAhPT0gJ29iamVjdCcgfHwgYy5yZXF1aXJlKSB7XG4gICAgICAgIHJldHVybiBjO1xuICAgICAgfVxuICAgICAgdmFyIHJlcXVpcmUgPSBbXTtcbiAgICAgIE9iamVjdC5rZXlzKGMpLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG4gICAgICAgIGlmIChrZXkgPT09ICdyZXF1aXJlJyB8fCBrZXkgPT09ICdhZHZhbmNlZCcgfHwga2V5ID09PSAnbWVkaWFTb3VyY2UnKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciByID0gY1trZXldID0gKHR5cGVvZiBjW2tleV0gPT09ICdvYmplY3QnKSA/XG4gICAgICAgICAgICBjW2tleV0gOiB7aWRlYWw6IGNba2V5XX07XG4gICAgICAgIGlmIChyLm1pbiAhPT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICByLm1heCAhPT0gdW5kZWZpbmVkIHx8IHIuZXhhY3QgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHJlcXVpcmUucHVzaChrZXkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyLmV4YWN0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIHIuZXhhY3QgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICByLiBtaW4gPSByLm1heCA9IHIuZXhhY3Q7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNba2V5XSA9IHIuZXhhY3Q7XG4gICAgICAgICAgfVxuICAgICAgICAgIGRlbGV0ZSByLmV4YWN0O1xuICAgICAgICB9XG4gICAgICAgIGlmIChyLmlkZWFsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBjLmFkdmFuY2VkID0gYy5hZHZhbmNlZCB8fCBbXTtcbiAgICAgICAgICB2YXIgb2MgPSB7fTtcbiAgICAgICAgICBpZiAodHlwZW9mIHIuaWRlYWwgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICBvY1trZXldID0ge21pbjogci5pZGVhbCwgbWF4OiByLmlkZWFsfTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgb2Nba2V5XSA9IHIuaWRlYWw7XG4gICAgICAgICAgfVxuICAgICAgICAgIGMuYWR2YW5jZWQucHVzaChvYyk7XG4gICAgICAgICAgZGVsZXRlIHIuaWRlYWw7XG4gICAgICAgICAgaWYgKCFPYmplY3Qua2V5cyhyKS5sZW5ndGgpIHtcbiAgICAgICAgICAgIGRlbGV0ZSBjW2tleV07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGlmIChyZXF1aXJlLmxlbmd0aCkge1xuICAgICAgICBjLnJlcXVpcmUgPSByZXF1aXJlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGM7XG4gICAgfTtcbiAgICBjb25zdHJhaW50cyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoY29uc3RyYWludHMpKTtcbiAgICBpZiAoYnJvd3NlckRldGFpbHMudmVyc2lvbiA8IDM4KSB7XG4gICAgICBsb2dnaW5nKCdzcGVjOiAnICsgSlNPTi5zdHJpbmdpZnkoY29uc3RyYWludHMpKTtcbiAgICAgIGlmIChjb25zdHJhaW50cy5hdWRpbykge1xuICAgICAgICBjb25zdHJhaW50cy5hdWRpbyA9IGNvbnN0cmFpbnRzVG9GRjM3Xyhjb25zdHJhaW50cy5hdWRpbyk7XG4gICAgICB9XG4gICAgICBpZiAoY29uc3RyYWludHMudmlkZW8pIHtcbiAgICAgICAgY29uc3RyYWludHMudmlkZW8gPSBjb25zdHJhaW50c1RvRkYzN18oY29uc3RyYWludHMudmlkZW8pO1xuICAgICAgfVxuICAgICAgbG9nZ2luZygnZmYzNzogJyArIEpTT04uc3RyaW5naWZ5KGNvbnN0cmFpbnRzKSk7XG4gICAgfVxuICAgIHJldHVybiBuYXZpZ2F0b3IubW96R2V0VXNlck1lZGlhKGNvbnN0cmFpbnRzLCBvblN1Y2Nlc3MsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIG9uRXJyb3Ioc2hpbUVycm9yXyhlKSk7XG4gICAgfSk7XG4gIH07XG5cbiAgLy8gUmV0dXJucyB0aGUgcmVzdWx0IG9mIGdldFVzZXJNZWRpYSBhcyBhIFByb21pc2UuXG4gIHZhciBnZXRVc2VyTWVkaWFQcm9taXNlXyA9IGZ1bmN0aW9uKGNvbnN0cmFpbnRzKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgZ2V0VXNlck1lZGlhXyhjb25zdHJhaW50cywgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICB9KTtcbiAgfTtcblxuICAvLyBTaGltIGZvciBtZWRpYURldmljZXMgb24gb2xkZXIgdmVyc2lvbnMuXG4gIGlmICghbmF2aWdhdG9yLm1lZGlhRGV2aWNlcykge1xuICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMgPSB7Z2V0VXNlck1lZGlhOiBnZXRVc2VyTWVkaWFQcm9taXNlXyxcbiAgICAgIGFkZEV2ZW50TGlzdGVuZXI6IGZ1bmN0aW9uKCkgeyB9LFxuICAgICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcjogZnVuY3Rpb24oKSB7IH1cbiAgICB9O1xuICB9XG4gIG5hdmlnYXRvci5tZWRpYURldmljZXMuZW51bWVyYXRlRGV2aWNlcyA9XG4gICAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmVudW1lcmF0ZURldmljZXMgfHwgZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlKSB7XG4gICAgICAgICAgdmFyIGluZm9zID0gW1xuICAgICAgICAgICAge2tpbmQ6ICdhdWRpb2lucHV0JywgZGV2aWNlSWQ6ICdkZWZhdWx0JywgbGFiZWw6ICcnLCBncm91cElkOiAnJ30sXG4gICAgICAgICAgICB7a2luZDogJ3ZpZGVvaW5wdXQnLCBkZXZpY2VJZDogJ2RlZmF1bHQnLCBsYWJlbDogJycsIGdyb3VwSWQ6ICcnfVxuICAgICAgICAgIF07XG4gICAgICAgICAgcmVzb2x2ZShpbmZvcyk7XG4gICAgICAgIH0pO1xuICAgICAgfTtcblxuICBpZiAoYnJvd3NlckRldGFpbHMudmVyc2lvbiA8IDQxKSB7XG4gICAgLy8gV29yayBhcm91bmQgaHR0cDovL2J1Z3ppbC5sYS8xMTY5NjY1XG4gICAgdmFyIG9yZ0VudW1lcmF0ZURldmljZXMgPVxuICAgICAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmVudW1lcmF0ZURldmljZXMuYmluZChuYXZpZ2F0b3IubWVkaWFEZXZpY2VzKTtcbiAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmVudW1lcmF0ZURldmljZXMgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBvcmdFbnVtZXJhdGVEZXZpY2VzKCkudGhlbih1bmRlZmluZWQsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKGUubmFtZSA9PT0gJ05vdEZvdW5kRXJyb3InKSB7XG4gICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IGU7XG4gICAgICB9KTtcbiAgICB9O1xuICB9XG4gIGlmIChicm93c2VyRGV0YWlscy52ZXJzaW9uIDwgNDkpIHtcbiAgICB2YXIgb3JpZ0dldFVzZXJNZWRpYSA9IG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhLlxuICAgICAgICBiaW5kKG5hdmlnYXRvci5tZWRpYURldmljZXMpO1xuICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhID0gZnVuY3Rpb24oYykge1xuICAgICAgcmV0dXJuIG9yaWdHZXRVc2VyTWVkaWEoYykudGhlbihmdW5jdGlvbihzdHJlYW0pIHtcbiAgICAgICAgLy8gV29yayBhcm91bmQgaHR0cHM6Ly9idWd6aWwubGEvODAyMzI2XG4gICAgICAgIGlmIChjLmF1ZGlvICYmICFzdHJlYW0uZ2V0QXVkaW9UcmFja3MoKS5sZW5ndGggfHxcbiAgICAgICAgICAgIGMudmlkZW8gJiYgIXN0cmVhbS5nZXRWaWRlb1RyYWNrcygpLmxlbmd0aCkge1xuICAgICAgICAgIHN0cmVhbS5nZXRUcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uKHRyYWNrKSB7XG4gICAgICAgICAgICB0cmFjay5zdG9wKCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdGhyb3cgbmV3IERPTUV4Y2VwdGlvbignVGhlIG9iamVjdCBjYW4gbm90IGJlIGZvdW5kIGhlcmUuJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdOb3RGb3VuZEVycm9yJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0cmVhbTtcbiAgICAgIH0sIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHNoaW1FcnJvcl8oZSkpO1xuICAgICAgfSk7XG4gICAgfTtcbiAgfVxuICBpZiAoIShicm93c2VyRGV0YWlscy52ZXJzaW9uID4gNTUgJiZcbiAgICAgICdhdXRvR2FpbkNvbnRyb2wnIGluIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0U3VwcG9ydGVkQ29uc3RyYWludHMoKSkpIHtcbiAgICB2YXIgcmVtYXAgPSBmdW5jdGlvbihvYmosIGEsIGIpIHtcbiAgICAgIGlmIChhIGluIG9iaiAmJiAhKGIgaW4gb2JqKSkge1xuICAgICAgICBvYmpbYl0gPSBvYmpbYV07XG4gICAgICAgIGRlbGV0ZSBvYmpbYV07XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciBuYXRpdmVHZXRVc2VyTWVkaWEgPSBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYS5cbiAgICAgICAgYmluZChuYXZpZ2F0b3IubWVkaWFEZXZpY2VzKTtcbiAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSA9IGZ1bmN0aW9uKGMpIHtcbiAgICAgIGlmICh0eXBlb2YgYyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIGMuYXVkaW8gPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGMpKTtcbiAgICAgICAgcmVtYXAoYy5hdWRpbywgJ2F1dG9HYWluQ29udHJvbCcsICdtb3pBdXRvR2FpbkNvbnRyb2wnKTtcbiAgICAgICAgcmVtYXAoYy5hdWRpbywgJ25vaXNlU3VwcHJlc3Npb24nLCAnbW96Tm9pc2VTdXBwcmVzc2lvbicpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5hdGl2ZUdldFVzZXJNZWRpYShjKTtcbiAgICB9O1xuXG4gICAgaWYgKE1lZGlhU3RyZWFtVHJhY2sgJiYgTWVkaWFTdHJlYW1UcmFjay5wcm90b3R5cGUuZ2V0U2V0dGluZ3MpIHtcbiAgICAgIHZhciBuYXRpdmVHZXRTZXR0aW5ncyA9IE1lZGlhU3RyZWFtVHJhY2sucHJvdG90eXBlLmdldFNldHRpbmdzO1xuICAgICAgTWVkaWFTdHJlYW1UcmFjay5wcm90b3R5cGUuZ2V0U2V0dGluZ3MgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIG9iaiA9IG5hdGl2ZUdldFNldHRpbmdzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIHJlbWFwKG9iaiwgJ21vekF1dG9HYWluQ29udHJvbCcsICdhdXRvR2FpbkNvbnRyb2wnKTtcbiAgICAgICAgcmVtYXAob2JqLCAnbW96Tm9pc2VTdXBwcmVzc2lvbicsICdub2lzZVN1cHByZXNzaW9uJyk7XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgICB9O1xuICAgIH1cblxuICAgIGlmIChNZWRpYVN0cmVhbVRyYWNrICYmIE1lZGlhU3RyZWFtVHJhY2sucHJvdG90eXBlLmFwcGx5Q29uc3RyYWludHMpIHtcbiAgICAgIHZhciBuYXRpdmVBcHBseUNvbnN0cmFpbnRzID0gTWVkaWFTdHJlYW1UcmFjay5wcm90b3R5cGUuYXBwbHlDb25zdHJhaW50cztcbiAgICAgIE1lZGlhU3RyZWFtVHJhY2sucHJvdG90eXBlLmFwcGx5Q29uc3RyYWludHMgPSBmdW5jdGlvbihjKSB7XG4gICAgICAgIGlmICh0aGlzLmtpbmQgPT09ICdhdWRpbycgJiYgdHlwZW9mIGMgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgYyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoYykpO1xuICAgICAgICAgIHJlbWFwKGMsICdhdXRvR2FpbkNvbnRyb2wnLCAnbW96QXV0b0dhaW5Db250cm9sJyk7XG4gICAgICAgICAgcmVtYXAoYywgJ25vaXNlU3VwcHJlc3Npb24nLCAnbW96Tm9pc2VTdXBwcmVzc2lvbicpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuYXRpdmVBcHBseUNvbnN0cmFpbnRzLmFwcGx5KHRoaXMsIFtjXSk7XG4gICAgICB9O1xuICAgIH1cbiAgfVxuICBuYXZpZ2F0b3IuZ2V0VXNlck1lZGlhID0gZnVuY3Rpb24oY29uc3RyYWludHMsIG9uU3VjY2Vzcywgb25FcnJvcikge1xuICAgIGlmIChicm93c2VyRGV0YWlscy52ZXJzaW9uIDwgNDQpIHtcbiAgICAgIHJldHVybiBnZXRVc2VyTWVkaWFfKGNvbnN0cmFpbnRzLCBvblN1Y2Nlc3MsIG9uRXJyb3IpO1xuICAgIH1cbiAgICAvLyBSZXBsYWNlIEZpcmVmb3ggNDQrJ3MgZGVwcmVjYXRpb24gd2FybmluZyB3aXRoIHVucHJlZml4ZWQgdmVyc2lvbi5cbiAgICB1dGlscy5kZXByZWNhdGVkKCduYXZpZ2F0b3IuZ2V0VXNlck1lZGlhJyxcbiAgICAgICAgJ25hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhJyk7XG4gICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoY29uc3RyYWludHMpLnRoZW4ob25TdWNjZXNzLCBvbkVycm9yKTtcbiAgfTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy93ZWJydGMtYWRhcHRlci9zcmMvanMvZmlyZWZveC9nZXR1c2VybWVkaWEuanNcbi8vIG1vZHVsZSBpZCA9IDYzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///63\n")},function(module,exports,__webpack_require__){"use strict";eval("/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n\nvar utils = __webpack_require__(/*! ../utils */ 5);\n\nmodule.exports = {\n  shimLocalStreamsAPI: function(window) {\n    if (typeof window !== 'object' || !window.RTCPeerConnection) {\n      return;\n    }\n    if (!('getLocalStreams' in window.RTCPeerConnection.prototype)) {\n      window.RTCPeerConnection.prototype.getLocalStreams = function() {\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        return this._localStreams;\n      };\n    }\n    if (!('getStreamById' in window.RTCPeerConnection.prototype)) {\n      window.RTCPeerConnection.prototype.getStreamById = function(id) {\n        var result = null;\n        if (this._localStreams) {\n          this._localStreams.forEach(function(stream) {\n            if (stream.id === id) {\n              result = stream;\n            }\n          });\n        }\n        if (this._remoteStreams) {\n          this._remoteStreams.forEach(function(stream) {\n            if (stream.id === id) {\n              result = stream;\n            }\n          });\n        }\n        return result;\n      };\n    }\n    if (!('addStream' in window.RTCPeerConnection.prototype)) {\n      var _addTrack = window.RTCPeerConnection.prototype.addTrack;\n      window.RTCPeerConnection.prototype.addStream = function(stream) {\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        if (this._localStreams.indexOf(stream) === -1) {\n          this._localStreams.push(stream);\n        }\n        var pc = this;\n        stream.getTracks().forEach(function(track) {\n          _addTrack.call(pc, track, stream);\n        });\n      };\n\n      window.RTCPeerConnection.prototype.addTrack = function(track, stream) {\n        if (stream) {\n          if (!this._localStreams) {\n            this._localStreams = [stream];\n          } else if (this._localStreams.indexOf(stream) === -1) {\n            this._localStreams.push(stream);\n          }\n        }\n        return _addTrack.call(this, track, stream);\n      };\n    }\n    if (!('removeStream' in window.RTCPeerConnection.prototype)) {\n      window.RTCPeerConnection.prototype.removeStream = function(stream) {\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        var index = this._localStreams.indexOf(stream);\n        if (index === -1) {\n          return;\n        }\n        this._localStreams.splice(index, 1);\n        var pc = this;\n        var tracks = stream.getTracks();\n        this.getSenders().forEach(function(sender) {\n          if (tracks.indexOf(sender.track) !== -1) {\n            pc.removeTrack(sender);\n          }\n        });\n      };\n    }\n  },\n  shimRemoteStreamsAPI: function(window) {\n    if (typeof window !== 'object' || !window.RTCPeerConnection) {\n      return;\n    }\n    if (!('getRemoteStreams' in window.RTCPeerConnection.prototype)) {\n      window.RTCPeerConnection.prototype.getRemoteStreams = function() {\n        return this._remoteStreams ? this._remoteStreams : [];\n      };\n    }\n    if (!('onaddstream' in window.RTCPeerConnection.prototype)) {\n      Object.defineProperty(window.RTCPeerConnection.prototype, 'onaddstream', {\n        get: function() {\n          return this._onaddstream;\n        },\n        set: function(f) {\n          var pc = this;\n          if (this._onaddstream) {\n            this.removeEventListener('addstream', this._onaddstream);\n            this.removeEventListener('track', this._onaddstreampoly);\n          }\n          this.addEventListener('addstream', this._onaddstream = f);\n          this.addEventListener('track', this._onaddstreampoly = function(e) {\n            e.streams.forEach(function(stream) {\n              if (!pc._remoteStreams) {\n                pc._remoteStreams = [];\n              }\n              if (pc._remoteStreams.indexOf(stream) >= 0) {\n                return;\n              }\n              pc._remoteStreams.push(stream);\n              var event = new Event('addstream');\n              event.stream = stream;\n              pc.dispatchEvent(event);\n            });\n          });\n        }\n      });\n    }\n  },\n  shimCallbacksAPI: function(window) {\n    if (typeof window !== 'object' || !window.RTCPeerConnection) {\n      return;\n    }\n    var prototype = window.RTCPeerConnection.prototype;\n    var createOffer = prototype.createOffer;\n    var createAnswer = prototype.createAnswer;\n    var setLocalDescription = prototype.setLocalDescription;\n    var setRemoteDescription = prototype.setRemoteDescription;\n    var addIceCandidate = prototype.addIceCandidate;\n\n    prototype.createOffer = function(successCallback, failureCallback) {\n      var options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n      var promise = createOffer.apply(this, [options]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n\n    prototype.createAnswer = function(successCallback, failureCallback) {\n      var options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n      var promise = createAnswer.apply(this, [options]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n\n    var withCallback = function(description, successCallback, failureCallback) {\n      var promise = setLocalDescription.apply(this, [description]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n    prototype.setLocalDescription = withCallback;\n\n    withCallback = function(description, successCallback, failureCallback) {\n      var promise = setRemoteDescription.apply(this, [description]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n    prototype.setRemoteDescription = withCallback;\n\n    withCallback = function(candidate, successCallback, failureCallback) {\n      var promise = addIceCandidate.apply(this, [candidate]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n    prototype.addIceCandidate = withCallback;\n  },\n  shimGetUserMedia: function(window) {\n    var navigator = window && window.navigator;\n\n    if (!navigator.getUserMedia) {\n      if (navigator.webkitGetUserMedia) {\n        navigator.getUserMedia = navigator.webkitGetUserMedia.bind(navigator);\n      } else if (navigator.mediaDevices &&\n          navigator.mediaDevices.getUserMedia) {\n        navigator.getUserMedia = function(constraints, cb, errcb) {\n          navigator.mediaDevices.getUserMedia(constraints)\n          .then(cb, errcb);\n        }.bind(navigator);\n      }\n    }\n  },\n  shimRTCIceServerUrls: function(window) {\n    // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\n    var OrigPeerConnection = window.RTCPeerConnection;\n    window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n      if (pcConfig && pcConfig.iceServers) {\n        var newIceServers = [];\n        for (var i = 0; i < pcConfig.iceServers.length; i++) {\n          var server = pcConfig.iceServers[i];\n          if (!server.hasOwnProperty('urls') &&\n              server.hasOwnProperty('url')) {\n            utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n            server = JSON.parse(JSON.stringify(server));\n            server.urls = server.url;\n            delete server.url;\n            newIceServers.push(server);\n          } else {\n            newIceServers.push(pcConfig.iceServers[i]);\n          }\n        }\n        pcConfig.iceServers = newIceServers;\n      }\n      return new OrigPeerConnection(pcConfig, pcConstraints);\n    };\n    window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;\n    // wrap static methods. Currently just generateCertificate.\n    if ('generateCertificate' in window.RTCPeerConnection) {\n      Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n        get: function() {\n          return OrigPeerConnection.generateCertificate;\n        }\n      });\n    }\n  },\n  shimTrackEventTransceiver: function(window) {\n    // Add event.transceiver member over deprecated event.receiver\n    if (typeof window === 'object' && window.RTCPeerConnection &&\n        ('receiver' in window.RTCTrackEvent.prototype) &&\n        // can't check 'transceiver' in window.RTCTrackEvent.prototype, as it is\n        // defined for some reason even when window.RTCTransceiver is not.\n        !window.RTCTransceiver) {\n      Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n        get: function() {\n          return {receiver: this.receiver};\n        }\n      });\n    }\n  },\n\n  shimCreateOfferLegacy: function(window) {\n    var origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n    window.RTCPeerConnection.prototype.createOffer = function(offerOptions) {\n      var pc = this;\n      if (offerOptions) {\n        var audioTransceiver = pc.getTransceivers().find(function(transceiver) {\n          return transceiver.sender.track &&\n              transceiver.sender.track.kind === 'audio';\n        });\n        if (offerOptions.offerToReceiveAudio === false && audioTransceiver) {\n          if (audioTransceiver.direction === 'sendrecv') {\n            if (audioTransceiver.setDirection) {\n              audioTransceiver.setDirection('sendonly');\n            } else {\n              audioTransceiver.direction = 'sendonly';\n            }\n          } else if (audioTransceiver.direction === 'recvonly') {\n            if (audioTransceiver.setDirection) {\n              audioTransceiver.setDirection('inactive');\n            } else {\n              audioTransceiver.direction = 'inactive';\n            }\n          }\n        } else if (offerOptions.offerToReceiveAudio === true &&\n            !audioTransceiver) {\n          pc.addTransceiver('audio');\n        }\n\n        var videoTransceiver = pc.getTransceivers().find(function(transceiver) {\n          return transceiver.sender.track &&\n              transceiver.sender.track.kind === 'video';\n        });\n        if (offerOptions.offerToReceiveVideo === false && videoTransceiver) {\n          if (videoTransceiver.direction === 'sendrecv') {\n            videoTransceiver.setDirection('sendonly');\n          } else if (videoTransceiver.direction === 'recvonly') {\n            videoTransceiver.setDirection('inactive');\n          }\n        } else if (offerOptions.offerToReceiveVideo === true &&\n            !videoTransceiver) {\n          pc.addTransceiver('video');\n        }\n      }\n      return origCreateOffer.apply(pc, arguments);\n    };\n  }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNjQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvd2VicnRjLWFkYXB0ZXIvc3JjL2pzL3NhZmFyaS9zYWZhcmlfc2hpbS5qcz9jNjM1Il0sInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiAgQ29weXJpZ2h0IChjKSAyMDE2IFRoZSBXZWJSVEMgcHJvamVjdCBhdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqICBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhIEJTRC1zdHlsZSBsaWNlbnNlXG4gKiAgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGUgc291cmNlXG4gKiAgdHJlZS5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xudmFyIHV0aWxzID0gcmVxdWlyZSgnLi4vdXRpbHMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIHNoaW1Mb2NhbFN0cmVhbXNBUEk6IGZ1bmN0aW9uKHdpbmRvdykge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAnb2JqZWN0JyB8fCAhd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghKCdnZXRMb2NhbFN0cmVhbXMnIGluIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUpKSB7XG4gICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldExvY2FsU3RyZWFtcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoIXRoaXMuX2xvY2FsU3RyZWFtcykge1xuICAgICAgICAgIHRoaXMuX2xvY2FsU3RyZWFtcyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9sb2NhbFN0cmVhbXM7XG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAoISgnZ2V0U3RyZWFtQnlJZCcgaW4gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSkpIHtcbiAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U3RyZWFtQnlJZCA9IGZ1bmN0aW9uKGlkKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSBudWxsO1xuICAgICAgICBpZiAodGhpcy5fbG9jYWxTdHJlYW1zKSB7XG4gICAgICAgICAgdGhpcy5fbG9jYWxTdHJlYW1zLmZvckVhY2goZnVuY3Rpb24oc3RyZWFtKSB7XG4gICAgICAgICAgICBpZiAoc3RyZWFtLmlkID09PSBpZCkge1xuICAgICAgICAgICAgICByZXN1bHQgPSBzdHJlYW07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX3JlbW90ZVN0cmVhbXMpIHtcbiAgICAgICAgICB0aGlzLl9yZW1vdGVTdHJlYW1zLmZvckVhY2goZnVuY3Rpb24oc3RyZWFtKSB7XG4gICAgICAgICAgICBpZiAoc3RyZWFtLmlkID09PSBpZCkge1xuICAgICAgICAgICAgICByZXN1bHQgPSBzdHJlYW07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH07XG4gICAgfVxuICAgIGlmICghKCdhZGRTdHJlYW0nIGluIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUpKSB7XG4gICAgICB2YXIgX2FkZFRyYWNrID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRUcmFjaztcbiAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkU3RyZWFtID0gZnVuY3Rpb24oc3RyZWFtKSB7XG4gICAgICAgIGlmICghdGhpcy5fbG9jYWxTdHJlYW1zKSB7XG4gICAgICAgICAgdGhpcy5fbG9jYWxTdHJlYW1zID0gW107XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX2xvY2FsU3RyZWFtcy5pbmRleE9mKHN0cmVhbSkgPT09IC0xKSB7XG4gICAgICAgICAgdGhpcy5fbG9jYWxTdHJlYW1zLnB1c2goc3RyZWFtKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcGMgPSB0aGlzO1xuICAgICAgICBzdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbih0cmFjaykge1xuICAgICAgICAgIF9hZGRUcmFjay5jYWxsKHBjLCB0cmFjaywgc3RyZWFtKTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuXG4gICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYWNrID0gZnVuY3Rpb24odHJhY2ssIHN0cmVhbSkge1xuICAgICAgICBpZiAoc3RyZWFtKSB7XG4gICAgICAgICAgaWYgKCF0aGlzLl9sb2NhbFN0cmVhbXMpIHtcbiAgICAgICAgICAgIHRoaXMuX2xvY2FsU3RyZWFtcyA9IFtzdHJlYW1dO1xuICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5fbG9jYWxTdHJlYW1zLmluZGV4T2Yoc3RyZWFtKSA9PT0gLTEpIHtcbiAgICAgICAgICAgIHRoaXMuX2xvY2FsU3RyZWFtcy5wdXNoKHN0cmVhbSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfYWRkVHJhY2suY2FsbCh0aGlzLCB0cmFjaywgc3RyZWFtKTtcbiAgICAgIH07XG4gICAgfVxuICAgIGlmICghKCdyZW1vdmVTdHJlYW0nIGluIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUpKSB7XG4gICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnJlbW92ZVN0cmVhbSA9IGZ1bmN0aW9uKHN0cmVhbSkge1xuICAgICAgICBpZiAoIXRoaXMuX2xvY2FsU3RyZWFtcykge1xuICAgICAgICAgIHRoaXMuX2xvY2FsU3RyZWFtcyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIHZhciBpbmRleCA9IHRoaXMuX2xvY2FsU3RyZWFtcy5pbmRleE9mKHN0cmVhbSk7XG4gICAgICAgIGlmIChpbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fbG9jYWxTdHJlYW1zLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIHZhciBwYyA9IHRoaXM7XG4gICAgICAgIHZhciB0cmFja3MgPSBzdHJlYW0uZ2V0VHJhY2tzKCk7XG4gICAgICAgIHRoaXMuZ2V0U2VuZGVycygpLmZvckVhY2goZnVuY3Rpb24oc2VuZGVyKSB7XG4gICAgICAgICAgaWYgKHRyYWNrcy5pbmRleE9mKHNlbmRlci50cmFjaykgIT09IC0xKSB7XG4gICAgICAgICAgICBwYy5yZW1vdmVUcmFjayhzZW5kZXIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgIH1cbiAgfSxcbiAgc2hpbVJlbW90ZVN0cmVhbXNBUEk6IGZ1bmN0aW9uKHdpbmRvdykge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAnb2JqZWN0JyB8fCAhd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghKCdnZXRSZW1vdGVTdHJlYW1zJyBpbiB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlKSkge1xuICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRSZW1vdGVTdHJlYW1zID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZW1vdGVTdHJlYW1zID8gdGhpcy5fcmVtb3RlU3RyZWFtcyA6IFtdO1xuICAgICAgfTtcbiAgICB9XG4gICAgaWYgKCEoJ29uYWRkc3RyZWFtJyBpbiB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlKSkge1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUsICdvbmFkZHN0cmVhbScsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5fb25hZGRzdHJlYW07XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24oZikge1xuICAgICAgICAgIHZhciBwYyA9IHRoaXM7XG4gICAgICAgICAgaWYgKHRoaXMuX29uYWRkc3RyZWFtKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2FkZHN0cmVhbScsIHRoaXMuX29uYWRkc3RyZWFtKTtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigndHJhY2snLCB0aGlzLl9vbmFkZHN0cmVhbXBvbHkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ2FkZHN0cmVhbScsIHRoaXMuX29uYWRkc3RyZWFtID0gZik7XG4gICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCd0cmFjaycsIHRoaXMuX29uYWRkc3RyZWFtcG9seSA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGUuc3RyZWFtcy5mb3JFYWNoKGZ1bmN0aW9uKHN0cmVhbSkge1xuICAgICAgICAgICAgICBpZiAoIXBjLl9yZW1vdGVTdHJlYW1zKSB7XG4gICAgICAgICAgICAgICAgcGMuX3JlbW90ZVN0cmVhbXMgPSBbXTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAocGMuX3JlbW90ZVN0cmVhbXMuaW5kZXhPZihzdHJlYW0pID49IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcGMuX3JlbW90ZVN0cmVhbXMucHVzaChzdHJlYW0pO1xuICAgICAgICAgICAgICB2YXIgZXZlbnQgPSBuZXcgRXZlbnQoJ2FkZHN0cmVhbScpO1xuICAgICAgICAgICAgICBldmVudC5zdHJlYW0gPSBzdHJlYW07XG4gICAgICAgICAgICAgIHBjLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfSxcbiAgc2hpbUNhbGxiYWNrc0FQSTogZnVuY3Rpb24od2luZG93KSB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICdvYmplY3QnIHx8ICF3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHByb3RvdHlwZSA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGU7XG4gICAgdmFyIGNyZWF0ZU9mZmVyID0gcHJvdG90eXBlLmNyZWF0ZU9mZmVyO1xuICAgIHZhciBjcmVhdGVBbnN3ZXIgPSBwcm90b3R5cGUuY3JlYXRlQW5zd2VyO1xuICAgIHZhciBzZXRMb2NhbERlc2NyaXB0aW9uID0gcHJvdG90eXBlLnNldExvY2FsRGVzY3JpcHRpb247XG4gICAgdmFyIHNldFJlbW90ZURlc2NyaXB0aW9uID0gcHJvdG90eXBlLnNldFJlbW90ZURlc2NyaXB0aW9uO1xuICAgIHZhciBhZGRJY2VDYW5kaWRhdGUgPSBwcm90b3R5cGUuYWRkSWNlQ2FuZGlkYXRlO1xuXG4gICAgcHJvdG90eXBlLmNyZWF0ZU9mZmVyID0gZnVuY3Rpb24oc3VjY2Vzc0NhbGxiYWNrLCBmYWlsdXJlQ2FsbGJhY2spIHtcbiAgICAgIHZhciBvcHRpb25zID0gKGFyZ3VtZW50cy5sZW5ndGggPj0gMikgPyBhcmd1bWVudHNbMl0gOiBhcmd1bWVudHNbMF07XG4gICAgICB2YXIgcHJvbWlzZSA9IGNyZWF0ZU9mZmVyLmFwcGx5KHRoaXMsIFtvcHRpb25zXSk7XG4gICAgICBpZiAoIWZhaWx1cmVDYWxsYmFjaykge1xuICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICAgIH1cbiAgICAgIHByb21pc2UudGhlbihzdWNjZXNzQ2FsbGJhY2ssIGZhaWx1cmVDYWxsYmFjayk7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfTtcblxuICAgIHByb3RvdHlwZS5jcmVhdGVBbnN3ZXIgPSBmdW5jdGlvbihzdWNjZXNzQ2FsbGJhY2ssIGZhaWx1cmVDYWxsYmFjaykge1xuICAgICAgdmFyIG9wdGlvbnMgPSAoYXJndW1lbnRzLmxlbmd0aCA+PSAyKSA/IGFyZ3VtZW50c1syXSA6IGFyZ3VtZW50c1swXTtcbiAgICAgIHZhciBwcm9taXNlID0gY3JlYXRlQW5zd2VyLmFwcGx5KHRoaXMsIFtvcHRpb25zXSk7XG4gICAgICBpZiAoIWZhaWx1cmVDYWxsYmFjaykge1xuICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICAgIH1cbiAgICAgIHByb21pc2UudGhlbihzdWNjZXNzQ2FsbGJhY2ssIGZhaWx1cmVDYWxsYmFjayk7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfTtcblxuICAgIHZhciB3aXRoQ2FsbGJhY2sgPSBmdW5jdGlvbihkZXNjcmlwdGlvbiwgc3VjY2Vzc0NhbGxiYWNrLCBmYWlsdXJlQ2FsbGJhY2spIHtcbiAgICAgIHZhciBwcm9taXNlID0gc2V0TG9jYWxEZXNjcmlwdGlvbi5hcHBseSh0aGlzLCBbZGVzY3JpcHRpb25dKTtcbiAgICAgIGlmICghZmFpbHVyZUNhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgICAgfVxuICAgICAgcHJvbWlzZS50aGVuKHN1Y2Nlc3NDYWxsYmFjaywgZmFpbHVyZUNhbGxiYWNrKTtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9O1xuICAgIHByb3RvdHlwZS5zZXRMb2NhbERlc2NyaXB0aW9uID0gd2l0aENhbGxiYWNrO1xuXG4gICAgd2l0aENhbGxiYWNrID0gZnVuY3Rpb24oZGVzY3JpcHRpb24sIHN1Y2Nlc3NDYWxsYmFjaywgZmFpbHVyZUNhbGxiYWNrKSB7XG4gICAgICB2YXIgcHJvbWlzZSA9IHNldFJlbW90ZURlc2NyaXB0aW9uLmFwcGx5KHRoaXMsIFtkZXNjcmlwdGlvbl0pO1xuICAgICAgaWYgKCFmYWlsdXJlQ2FsbGJhY2spIHtcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgICB9XG4gICAgICBwcm9taXNlLnRoZW4oc3VjY2Vzc0NhbGxiYWNrLCBmYWlsdXJlQ2FsbGJhY2spO1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH07XG4gICAgcHJvdG90eXBlLnNldFJlbW90ZURlc2NyaXB0aW9uID0gd2l0aENhbGxiYWNrO1xuXG4gICAgd2l0aENhbGxiYWNrID0gZnVuY3Rpb24oY2FuZGlkYXRlLCBzdWNjZXNzQ2FsbGJhY2ssIGZhaWx1cmVDYWxsYmFjaykge1xuICAgICAgdmFyIHByb21pc2UgPSBhZGRJY2VDYW5kaWRhdGUuYXBwbHkodGhpcywgW2NhbmRpZGF0ZV0pO1xuICAgICAgaWYgKCFmYWlsdXJlQ2FsbGJhY2spIHtcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgICB9XG4gICAgICBwcm9taXNlLnRoZW4oc3VjY2Vzc0NhbGxiYWNrLCBmYWlsdXJlQ2FsbGJhY2spO1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH07XG4gICAgcHJvdG90eXBlLmFkZEljZUNhbmRpZGF0ZSA9IHdpdGhDYWxsYmFjaztcbiAgfSxcbiAgc2hpbUdldFVzZXJNZWRpYTogZnVuY3Rpb24od2luZG93KSB7XG4gICAgdmFyIG5hdmlnYXRvciA9IHdpbmRvdyAmJiB3aW5kb3cubmF2aWdhdG9yO1xuXG4gICAgaWYgKCFuYXZpZ2F0b3IuZ2V0VXNlck1lZGlhKSB7XG4gICAgICBpZiAobmF2aWdhdG9yLndlYmtpdEdldFVzZXJNZWRpYSkge1xuICAgICAgICBuYXZpZ2F0b3IuZ2V0VXNlck1lZGlhID0gbmF2aWdhdG9yLndlYmtpdEdldFVzZXJNZWRpYS5iaW5kKG5hdmlnYXRvcik7XG4gICAgICB9IGVsc2UgaWYgKG5hdmlnYXRvci5tZWRpYURldmljZXMgJiZcbiAgICAgICAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSkge1xuICAgICAgICBuYXZpZ2F0b3IuZ2V0VXNlck1lZGlhID0gZnVuY3Rpb24oY29uc3RyYWludHMsIGNiLCBlcnJjYikge1xuICAgICAgICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKGNvbnN0cmFpbnRzKVxuICAgICAgICAgIC50aGVuKGNiLCBlcnJjYik7XG4gICAgICAgIH0uYmluZChuYXZpZ2F0b3IpO1xuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgc2hpbVJUQ0ljZVNlcnZlclVybHM6IGZ1bmN0aW9uKHdpbmRvdykge1xuICAgIC8vIG1pZ3JhdGUgZnJvbSBub24tc3BlYyBSVENJY2VTZXJ2ZXIudXJsIHRvIFJUQ0ljZVNlcnZlci51cmxzXG4gICAgdmFyIE9yaWdQZWVyQ29ubmVjdGlvbiA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbjtcbiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24gPSBmdW5jdGlvbihwY0NvbmZpZywgcGNDb25zdHJhaW50cykge1xuICAgICAgaWYgKHBjQ29uZmlnICYmIHBjQ29uZmlnLmljZVNlcnZlcnMpIHtcbiAgICAgICAgdmFyIG5ld0ljZVNlcnZlcnMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwY0NvbmZpZy5pY2VTZXJ2ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdmFyIHNlcnZlciA9IHBjQ29uZmlnLmljZVNlcnZlcnNbaV07XG4gICAgICAgICAgaWYgKCFzZXJ2ZXIuaGFzT3duUHJvcGVydHkoJ3VybHMnKSAmJlxuICAgICAgICAgICAgICBzZXJ2ZXIuaGFzT3duUHJvcGVydHkoJ3VybCcpKSB7XG4gICAgICAgICAgICB1dGlscy5kZXByZWNhdGVkKCdSVENJY2VTZXJ2ZXIudXJsJywgJ1JUQ0ljZVNlcnZlci51cmxzJyk7XG4gICAgICAgICAgICBzZXJ2ZXIgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHNlcnZlcikpO1xuICAgICAgICAgICAgc2VydmVyLnVybHMgPSBzZXJ2ZXIudXJsO1xuICAgICAgICAgICAgZGVsZXRlIHNlcnZlci51cmw7XG4gICAgICAgICAgICBuZXdJY2VTZXJ2ZXJzLnB1c2goc2VydmVyKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV3SWNlU2VydmVycy5wdXNoKHBjQ29uZmlnLmljZVNlcnZlcnNbaV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBwY0NvbmZpZy5pY2VTZXJ2ZXJzID0gbmV3SWNlU2VydmVycztcbiAgICAgIH1cbiAgICAgIHJldHVybiBuZXcgT3JpZ1BlZXJDb25uZWN0aW9uKHBjQ29uZmlnLCBwY0NvbnN0cmFpbnRzKTtcbiAgICB9O1xuICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUgPSBPcmlnUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlO1xuICAgIC8vIHdyYXAgc3RhdGljIG1ldGhvZHMuIEN1cnJlbnRseSBqdXN0IGdlbmVyYXRlQ2VydGlmaWNhdGUuXG4gICAgaWYgKCdnZW5lcmF0ZUNlcnRpZmljYXRlJyBpbiB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24pIHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24sICdnZW5lcmF0ZUNlcnRpZmljYXRlJywge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBPcmlnUGVlckNvbm5lY3Rpb24uZ2VuZXJhdGVDZXJ0aWZpY2F0ZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9LFxuICBzaGltVHJhY2tFdmVudFRyYW5zY2VpdmVyOiBmdW5jdGlvbih3aW5kb3cpIHtcbiAgICAvLyBBZGQgZXZlbnQudHJhbnNjZWl2ZXIgbWVtYmVyIG92ZXIgZGVwcmVjYXRlZCBldmVudC5yZWNlaXZlclxuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JyAmJiB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24gJiZcbiAgICAgICAgKCdyZWNlaXZlcicgaW4gd2luZG93LlJUQ1RyYWNrRXZlbnQucHJvdG90eXBlKSAmJlxuICAgICAgICAvLyBjYW4ndCBjaGVjayAndHJhbnNjZWl2ZXInIGluIHdpbmRvdy5SVENUcmFja0V2ZW50LnByb3RvdHlwZSwgYXMgaXQgaXNcbiAgICAgICAgLy8gZGVmaW5lZCBmb3Igc29tZSByZWFzb24gZXZlbiB3aGVuIHdpbmRvdy5SVENUcmFuc2NlaXZlciBpcyBub3QuXG4gICAgICAgICF3aW5kb3cuUlRDVHJhbnNjZWl2ZXIpIHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3cuUlRDVHJhY2tFdmVudC5wcm90b3R5cGUsICd0cmFuc2NlaXZlcicsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4ge3JlY2VpdmVyOiB0aGlzLnJlY2VpdmVyfTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9LFxuXG4gIHNoaW1DcmVhdGVPZmZlckxlZ2FjeTogZnVuY3Rpb24od2luZG93KSB7XG4gICAgdmFyIG9yaWdDcmVhdGVPZmZlciA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuY3JlYXRlT2ZmZXI7XG4gICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5jcmVhdGVPZmZlciA9IGZ1bmN0aW9uKG9mZmVyT3B0aW9ucykge1xuICAgICAgdmFyIHBjID0gdGhpcztcbiAgICAgIGlmIChvZmZlck9wdGlvbnMpIHtcbiAgICAgICAgdmFyIGF1ZGlvVHJhbnNjZWl2ZXIgPSBwYy5nZXRUcmFuc2NlaXZlcnMoKS5maW5kKGZ1bmN0aW9uKHRyYW5zY2VpdmVyKSB7XG4gICAgICAgICAgcmV0dXJuIHRyYW5zY2VpdmVyLnNlbmRlci50cmFjayAmJlxuICAgICAgICAgICAgICB0cmFuc2NlaXZlci5zZW5kZXIudHJhY2sua2luZCA9PT0gJ2F1ZGlvJztcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChvZmZlck9wdGlvbnMub2ZmZXJUb1JlY2VpdmVBdWRpbyA9PT0gZmFsc2UgJiYgYXVkaW9UcmFuc2NlaXZlcikge1xuICAgICAgICAgIGlmIChhdWRpb1RyYW5zY2VpdmVyLmRpcmVjdGlvbiA9PT0gJ3NlbmRyZWN2Jykge1xuICAgICAgICAgICAgaWYgKGF1ZGlvVHJhbnNjZWl2ZXIuc2V0RGlyZWN0aW9uKSB7XG4gICAgICAgICAgICAgIGF1ZGlvVHJhbnNjZWl2ZXIuc2V0RGlyZWN0aW9uKCdzZW5kb25seScpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgYXVkaW9UcmFuc2NlaXZlci5kaXJlY3Rpb24gPSAnc2VuZG9ubHknO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAoYXVkaW9UcmFuc2NlaXZlci5kaXJlY3Rpb24gPT09ICdyZWN2b25seScpIHtcbiAgICAgICAgICAgIGlmIChhdWRpb1RyYW5zY2VpdmVyLnNldERpcmVjdGlvbikge1xuICAgICAgICAgICAgICBhdWRpb1RyYW5zY2VpdmVyLnNldERpcmVjdGlvbignaW5hY3RpdmUnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGF1ZGlvVHJhbnNjZWl2ZXIuZGlyZWN0aW9uID0gJ2luYWN0aXZlJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAob2ZmZXJPcHRpb25zLm9mZmVyVG9SZWNlaXZlQXVkaW8gPT09IHRydWUgJiZcbiAgICAgICAgICAgICFhdWRpb1RyYW5zY2VpdmVyKSB7XG4gICAgICAgICAgcGMuYWRkVHJhbnNjZWl2ZXIoJ2F1ZGlvJyk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgdmlkZW9UcmFuc2NlaXZlciA9IHBjLmdldFRyYW5zY2VpdmVycygpLmZpbmQoZnVuY3Rpb24odHJhbnNjZWl2ZXIpIHtcbiAgICAgICAgICByZXR1cm4gdHJhbnNjZWl2ZXIuc2VuZGVyLnRyYWNrICYmXG4gICAgICAgICAgICAgIHRyYW5zY2VpdmVyLnNlbmRlci50cmFjay5raW5kID09PSAndmlkZW8nO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKG9mZmVyT3B0aW9ucy5vZmZlclRvUmVjZWl2ZVZpZGVvID09PSBmYWxzZSAmJiB2aWRlb1RyYW5zY2VpdmVyKSB7XG4gICAgICAgICAgaWYgKHZpZGVvVHJhbnNjZWl2ZXIuZGlyZWN0aW9uID09PSAnc2VuZHJlY3YnKSB7XG4gICAgICAgICAgICB2aWRlb1RyYW5zY2VpdmVyLnNldERpcmVjdGlvbignc2VuZG9ubHknKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKHZpZGVvVHJhbnNjZWl2ZXIuZGlyZWN0aW9uID09PSAncmVjdm9ubHknKSB7XG4gICAgICAgICAgICB2aWRlb1RyYW5zY2VpdmVyLnNldERpcmVjdGlvbignaW5hY3RpdmUnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAob2ZmZXJPcHRpb25zLm9mZmVyVG9SZWNlaXZlVmlkZW8gPT09IHRydWUgJiZcbiAgICAgICAgICAgICF2aWRlb1RyYW5zY2VpdmVyKSB7XG4gICAgICAgICAgcGMuYWRkVHJhbnNjZWl2ZXIoJ3ZpZGVvJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBvcmlnQ3JlYXRlT2ZmZXIuYXBwbHkocGMsIGFyZ3VtZW50cyk7XG4gICAgfTtcbiAgfVxufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL3dlYnJ0Yy1hZGFwdGVyL3NyYy9qcy9zYWZhcmkvc2FmYXJpX3NoaW0uanNcbi8vIG1vZHVsZSBpZCA9IDY0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///64\n")},function(module,exports,__webpack_require__){"use strict";eval("/*\n *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n\n\nvar SDPUtils = __webpack_require__(/*! sdp */ 24);\nvar utils = __webpack_require__(/*! ./utils */ 5);\n\nmodule.exports = {\n  shimRTCIceCandidate: function(window) {\n    // foundation is arbitrarily chosen as an indicator for full support for\n    // https://w3c.github.io/webrtc-pc/#rtcicecandidate-interface\n    if (window.RTCIceCandidate && 'foundation' in\n        window.RTCIceCandidate.prototype) {\n      return;\n    }\n\n    var NativeRTCIceCandidate = window.RTCIceCandidate;\n    window.RTCIceCandidate = function(args) {\n      // Remove the a= which shouldn't be part of the candidate string.\n      if (typeof args === 'object' && args.candidate &&\n          args.candidate.indexOf('a=') === 0) {\n        args = JSON.parse(JSON.stringify(args));\n        args.candidate = args.candidate.substr(2);\n      }\n\n      // Augment the native candidate with the parsed fields.\n      var nativeCandidate = new NativeRTCIceCandidate(args);\n      var parsedCandidate = SDPUtils.parseCandidate(args.candidate);\n      var augmentedCandidate = Object.assign(nativeCandidate,\n          parsedCandidate);\n\n      // Add a serializer that does not serialize the extra attributes.\n      augmentedCandidate.toJSON = function() {\n        return {\n          candidate: augmentedCandidate.candidate,\n          sdpMid: augmentedCandidate.sdpMid,\n          sdpMLineIndex: augmentedCandidate.sdpMLineIndex,\n          usernameFragment: augmentedCandidate.usernameFragment,\n        };\n      };\n      return augmentedCandidate;\n    };\n\n    // Hook up the augmented candidate in onicecandidate and\n    // addEventListener('icecandidate', ...)\n    utils.wrapPeerConnectionEvent(window, 'icecandidate', function(e) {\n      if (e.candidate) {\n        Object.defineProperty(e, 'candidate', {\n          value: new window.RTCIceCandidate(e.candidate),\n          writable: 'false'\n        });\n      }\n      return e;\n    });\n  },\n\n  // shimCreateObjectURL must be called before shimSourceObject to avoid loop.\n\n  shimCreateObjectURL: function(window) {\n    var URL = window && window.URL;\n\n    if (!(typeof window === 'object' && window.HTMLMediaElement &&\n          'srcObject' in window.HTMLMediaElement.prototype &&\n        URL.createObjectURL && URL.revokeObjectURL)) {\n      // Only shim CreateObjectURL using srcObject if srcObject exists.\n      return undefined;\n    }\n\n    var nativeCreateObjectURL = URL.createObjectURL.bind(URL);\n    var nativeRevokeObjectURL = URL.revokeObjectURL.bind(URL);\n    var streams = new Map(), newId = 0;\n\n    URL.createObjectURL = function(stream) {\n      if ('getTracks' in stream) {\n        var url = 'polyblob:' + (++newId);\n        streams.set(url, stream);\n        utils.deprecated('URL.createObjectURL(stream)',\n            'elem.srcObject = stream');\n        return url;\n      }\n      return nativeCreateObjectURL(stream);\n    };\n    URL.revokeObjectURL = function(url) {\n      nativeRevokeObjectURL(url);\n      streams.delete(url);\n    };\n\n    var dsc = Object.getOwnPropertyDescriptor(window.HTMLMediaElement.prototype,\n                                              'src');\n    Object.defineProperty(window.HTMLMediaElement.prototype, 'src', {\n      get: function() {\n        return dsc.get.apply(this);\n      },\n      set: function(url) {\n        this.srcObject = streams.get(url) || null;\n        return dsc.set.apply(this, [url]);\n      }\n    });\n\n    var nativeSetAttribute = window.HTMLMediaElement.prototype.setAttribute;\n    window.HTMLMediaElement.prototype.setAttribute = function() {\n      if (arguments.length === 2 &&\n          ('' + arguments[0]).toLowerCase() === 'src') {\n        this.srcObject = streams.get(arguments[1]) || null;\n      }\n      return nativeSetAttribute.apply(this, arguments);\n    };\n  },\n\n  shimMaxMessageSize: function(window) {\n    if (window.RTCSctpTransport || !window.RTCPeerConnection) {\n      return;\n    }\n    var browserDetails = utils.detectBrowser(window);\n\n    if (!('sctp' in window.RTCPeerConnection.prototype)) {\n      Object.defineProperty(window.RTCPeerConnection.prototype, 'sctp', {\n        get: function() {\n          return typeof this._sctp === 'undefined' ? null : this._sctp;\n        }\n      });\n    }\n\n    var sctpInDescription = function(description) {\n      var sections = SDPUtils.splitSections(description.sdp);\n      sections.shift();\n      return sections.some(function(mediaSection) {\n        var mLine = SDPUtils.parseMLine(mediaSection);\n        return mLine && mLine.kind === 'application'\n            && mLine.protocol.indexOf('SCTP') !== -1;\n      });\n    };\n\n    var getRemoteFirefoxVersion = function(description) {\n      // TODO: Is there a better solution for detecting Firefox?\n      var match = description.sdp.match(/mozilla...THIS_IS_SDPARTA-(\\d+)/);\n      if (match === null || match.length < 2) {\n        return -1;\n      }\n      var version = parseInt(match[1], 10);\n      // Test for NaN (yes, this is ugly)\n      return version !== version ? -1 : version;\n    };\n\n    var getCanSendMaxMessageSize = function(remoteIsFirefox) {\n      // Every implementation we know can send at least 64 KiB.\n      // Note: Although Chrome is technically able to send up to 256 KiB, the\n      //       data does not reach the other peer reliably.\n      //       See: https://bugs.chromium.org/p/webrtc/issues/detail?id=8419\n      var canSendMaxMessageSize = 65536;\n      if (browserDetails.browser === 'firefox') {\n        if (browserDetails.version < 57) {\n          if (remoteIsFirefox === -1) {\n            // FF < 57 will send in 16 KiB chunks using the deprecated PPID\n            // fragmentation.\n            canSendMaxMessageSize = 16384;\n          } else {\n            // However, other FF (and RAWRTC) can reassemble PPID-fragmented\n            // messages. Thus, supporting ~2 GiB when sending.\n            canSendMaxMessageSize = 2147483637;\n          }\n        } else {\n          // Currently, all FF >= 57 will reset the remote maximum message size\n          // to the default value when a data channel is created at a later\n          // stage. :(\n          // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n          canSendMaxMessageSize =\n            browserDetails.version === 57 ? 65535 : 65536;\n        }\n      }\n      return canSendMaxMessageSize;\n    };\n\n    var getMaxMessageSize = function(description, remoteIsFirefox) {\n      // Note: 65536 bytes is the default value from the SDP spec. Also,\n      //       every implementation we know supports receiving 65536 bytes.\n      var maxMessageSize = 65536;\n\n      // FF 57 has a slightly incorrect default remote max message size, so\n      // we need to adjust it here to avoid a failure when sending.\n      // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1425697\n      if (browserDetails.browser === 'firefox'\n           && browserDetails.version === 57) {\n        maxMessageSize = 65535;\n      }\n\n      var match = SDPUtils.matchPrefix(description.sdp, 'a=max-message-size:');\n      if (match.length > 0) {\n        maxMessageSize = parseInt(match[0].substr(19), 10);\n      } else if (browserDetails.browser === 'firefox' &&\n                  remoteIsFirefox !== -1) {\n        // If the maximum message size is not present in the remote SDP and\n        // both local and remote are Firefox, the remote peer can receive\n        // ~2 GiB.\n        maxMessageSize = 2147483637;\n      }\n      return maxMessageSize;\n    };\n\n    var origSetRemoteDescription =\n        window.RTCPeerConnection.prototype.setRemoteDescription;\n    window.RTCPeerConnection.prototype.setRemoteDescription = function() {\n      var pc = this;\n      pc._sctp = null;\n\n      if (sctpInDescription(arguments[0])) {\n        // Check if the remote is FF.\n        var isFirefox = getRemoteFirefoxVersion(arguments[0]);\n\n        // Get the maximum message size the local peer is capable of sending\n        var canSendMMS = getCanSendMaxMessageSize(isFirefox);\n\n        // Get the maximum message size of the remote peer.\n        var remoteMMS = getMaxMessageSize(arguments[0], isFirefox);\n\n        // Determine final maximum message size\n        var maxMessageSize;\n        if (canSendMMS === 0 && remoteMMS === 0) {\n          maxMessageSize = Number.POSITIVE_INFINITY;\n        } else if (canSendMMS === 0 || remoteMMS === 0) {\n          maxMessageSize = Math.max(canSendMMS, remoteMMS);\n        } else {\n          maxMessageSize = Math.min(canSendMMS, remoteMMS);\n        }\n\n        // Create a dummy RTCSctpTransport object and the 'maxMessageSize'\n        // attribute.\n        var sctp = {};\n        Object.defineProperty(sctp, 'maxMessageSize', {\n          get: function() {\n            return maxMessageSize;\n          }\n        });\n        pc._sctp = sctp;\n      }\n\n      return origSetRemoteDescription.apply(pc, arguments);\n    };\n  },\n\n  shimSendThrowTypeError: function(window) {\n    // Note: Although Firefox >= 57 has a native implementation, the maximum\n    //       message size can be reset for all data channels at a later stage.\n    //       See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n\n    var origCreateDataChannel =\n      window.RTCPeerConnection.prototype.createDataChannel;\n    window.RTCPeerConnection.prototype.createDataChannel = function() {\n      var pc = this;\n      var dataChannel = origCreateDataChannel.apply(pc, arguments);\n      var origDataChannelSend = dataChannel.send;\n\n      // Patch 'send' method\n      dataChannel.send = function() {\n        var dc = this;\n        var data = arguments[0];\n        var length = data.length || data.size || data.byteLength;\n        if (length > pc.sctp.maxMessageSize) {\n          throw new DOMException('Message too large (can send a maximum of ' +\n            pc.sctp.maxMessageSize + ' bytes)', 'TypeError');\n        }\n        return origDataChannelSend.apply(dc, arguments);\n      };\n\n      return dataChannel;\n    };\n  }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNjUuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvd2VicnRjLWFkYXB0ZXIvc3JjL2pzL2NvbW1vbl9zaGltLmpzP2QzZDEiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqICBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIFdlYlJUQyBwcm9qZWN0IGF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGEgQlNELXN0eWxlIGxpY2Vuc2VcbiAqICB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoZSBzb3VyY2VcbiAqICB0cmVlLlxuICovXG4gLyogZXNsaW50LWVudiBub2RlICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciBTRFBVdGlscyA9IHJlcXVpcmUoJ3NkcCcpO1xudmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgc2hpbVJUQ0ljZUNhbmRpZGF0ZTogZnVuY3Rpb24od2luZG93KSB7XG4gICAgLy8gZm91bmRhdGlvbiBpcyBhcmJpdHJhcmlseSBjaG9zZW4gYXMgYW4gaW5kaWNhdG9yIGZvciBmdWxsIHN1cHBvcnQgZm9yXG4gICAgLy8gaHR0cHM6Ly93M2MuZ2l0aHViLmlvL3dlYnJ0Yy1wYy8jcnRjaWNlY2FuZGlkYXRlLWludGVyZmFjZVxuICAgIGlmICh3aW5kb3cuUlRDSWNlQ2FuZGlkYXRlICYmICdmb3VuZGF0aW9uJyBpblxuICAgICAgICB3aW5kb3cuUlRDSWNlQ2FuZGlkYXRlLnByb3RvdHlwZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBOYXRpdmVSVENJY2VDYW5kaWRhdGUgPSB3aW5kb3cuUlRDSWNlQ2FuZGlkYXRlO1xuICAgIHdpbmRvdy5SVENJY2VDYW5kaWRhdGUgPSBmdW5jdGlvbihhcmdzKSB7XG4gICAgICAvLyBSZW1vdmUgdGhlIGE9IHdoaWNoIHNob3VsZG4ndCBiZSBwYXJ0IG9mIHRoZSBjYW5kaWRhdGUgc3RyaW5nLlxuICAgICAgaWYgKHR5cGVvZiBhcmdzID09PSAnb2JqZWN0JyAmJiBhcmdzLmNhbmRpZGF0ZSAmJlxuICAgICAgICAgIGFyZ3MuY2FuZGlkYXRlLmluZGV4T2YoJ2E9JykgPT09IDApIHtcbiAgICAgICAgYXJncyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoYXJncykpO1xuICAgICAgICBhcmdzLmNhbmRpZGF0ZSA9IGFyZ3MuY2FuZGlkYXRlLnN1YnN0cigyKTtcbiAgICAgIH1cblxuICAgICAgLy8gQXVnbWVudCB0aGUgbmF0aXZlIGNhbmRpZGF0ZSB3aXRoIHRoZSBwYXJzZWQgZmllbGRzLlxuICAgICAgdmFyIG5hdGl2ZUNhbmRpZGF0ZSA9IG5ldyBOYXRpdmVSVENJY2VDYW5kaWRhdGUoYXJncyk7XG4gICAgICB2YXIgcGFyc2VkQ2FuZGlkYXRlID0gU0RQVXRpbHMucGFyc2VDYW5kaWRhdGUoYXJncy5jYW5kaWRhdGUpO1xuICAgICAgdmFyIGF1Z21lbnRlZENhbmRpZGF0ZSA9IE9iamVjdC5hc3NpZ24obmF0aXZlQ2FuZGlkYXRlLFxuICAgICAgICAgIHBhcnNlZENhbmRpZGF0ZSk7XG5cbiAgICAgIC8vIEFkZCBhIHNlcmlhbGl6ZXIgdGhhdCBkb2VzIG5vdCBzZXJpYWxpemUgdGhlIGV4dHJhIGF0dHJpYnV0ZXMuXG4gICAgICBhdWdtZW50ZWRDYW5kaWRhdGUudG9KU09OID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgY2FuZGlkYXRlOiBhdWdtZW50ZWRDYW5kaWRhdGUuY2FuZGlkYXRlLFxuICAgICAgICAgIHNkcE1pZDogYXVnbWVudGVkQ2FuZGlkYXRlLnNkcE1pZCxcbiAgICAgICAgICBzZHBNTGluZUluZGV4OiBhdWdtZW50ZWRDYW5kaWRhdGUuc2RwTUxpbmVJbmRleCxcbiAgICAgICAgICB1c2VybmFtZUZyYWdtZW50OiBhdWdtZW50ZWRDYW5kaWRhdGUudXNlcm5hbWVGcmFnbWVudCxcbiAgICAgICAgfTtcbiAgICAgIH07XG4gICAgICByZXR1cm4gYXVnbWVudGVkQ2FuZGlkYXRlO1xuICAgIH07XG5cbiAgICAvLyBIb29rIHVwIHRoZSBhdWdtZW50ZWQgY2FuZGlkYXRlIGluIG9uaWNlY2FuZGlkYXRlIGFuZFxuICAgIC8vIGFkZEV2ZW50TGlzdGVuZXIoJ2ljZWNhbmRpZGF0ZScsIC4uLilcbiAgICB1dGlscy53cmFwUGVlckNvbm5lY3Rpb25FdmVudCh3aW5kb3csICdpY2VjYW5kaWRhdGUnLCBmdW5jdGlvbihlKSB7XG4gICAgICBpZiAoZS5jYW5kaWRhdGUpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsICdjYW5kaWRhdGUnLCB7XG4gICAgICAgICAgdmFsdWU6IG5ldyB3aW5kb3cuUlRDSWNlQ2FuZGlkYXRlKGUuY2FuZGlkYXRlKSxcbiAgICAgICAgICB3cml0YWJsZTogJ2ZhbHNlJ1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBlO1xuICAgIH0pO1xuICB9LFxuXG4gIC8vIHNoaW1DcmVhdGVPYmplY3RVUkwgbXVzdCBiZSBjYWxsZWQgYmVmb3JlIHNoaW1Tb3VyY2VPYmplY3QgdG8gYXZvaWQgbG9vcC5cblxuICBzaGltQ3JlYXRlT2JqZWN0VVJMOiBmdW5jdGlvbih3aW5kb3cpIHtcbiAgICB2YXIgVVJMID0gd2luZG93ICYmIHdpbmRvdy5VUkw7XG5cbiAgICBpZiAoISh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JyAmJiB3aW5kb3cuSFRNTE1lZGlhRWxlbWVudCAmJlxuICAgICAgICAgICdzcmNPYmplY3QnIGluIHdpbmRvdy5IVE1MTWVkaWFFbGVtZW50LnByb3RvdHlwZSAmJlxuICAgICAgICBVUkwuY3JlYXRlT2JqZWN0VVJMICYmIFVSTC5yZXZva2VPYmplY3RVUkwpKSB7XG4gICAgICAvLyBPbmx5IHNoaW0gQ3JlYXRlT2JqZWN0VVJMIHVzaW5nIHNyY09iamVjdCBpZiBzcmNPYmplY3QgZXhpc3RzLlxuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICB2YXIgbmF0aXZlQ3JlYXRlT2JqZWN0VVJMID0gVVJMLmNyZWF0ZU9iamVjdFVSTC5iaW5kKFVSTCk7XG4gICAgdmFyIG5hdGl2ZVJldm9rZU9iamVjdFVSTCA9IFVSTC5yZXZva2VPYmplY3RVUkwuYmluZChVUkwpO1xuICAgIHZhciBzdHJlYW1zID0gbmV3IE1hcCgpLCBuZXdJZCA9IDA7XG5cbiAgICBVUkwuY3JlYXRlT2JqZWN0VVJMID0gZnVuY3Rpb24oc3RyZWFtKSB7XG4gICAgICBpZiAoJ2dldFRyYWNrcycgaW4gc3RyZWFtKSB7XG4gICAgICAgIHZhciB1cmwgPSAncG9seWJsb2I6JyArICgrK25ld0lkKTtcbiAgICAgICAgc3RyZWFtcy5zZXQodXJsLCBzdHJlYW0pO1xuICAgICAgICB1dGlscy5kZXByZWNhdGVkKCdVUkwuY3JlYXRlT2JqZWN0VVJMKHN0cmVhbSknLFxuICAgICAgICAgICAgJ2VsZW0uc3JjT2JqZWN0ID0gc3RyZWFtJyk7XG4gICAgICAgIHJldHVybiB1cmw7XG4gICAgICB9XG4gICAgICByZXR1cm4gbmF0aXZlQ3JlYXRlT2JqZWN0VVJMKHN0cmVhbSk7XG4gICAgfTtcbiAgICBVUkwucmV2b2tlT2JqZWN0VVJMID0gZnVuY3Rpb24odXJsKSB7XG4gICAgICBuYXRpdmVSZXZva2VPYmplY3RVUkwodXJsKTtcbiAgICAgIHN0cmVhbXMuZGVsZXRlKHVybCk7XG4gICAgfTtcblxuICAgIHZhciBkc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHdpbmRvdy5IVE1MTWVkaWFFbGVtZW50LnByb3RvdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnc3JjJyk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdy5IVE1MTWVkaWFFbGVtZW50LnByb3RvdHlwZSwgJ3NyYycsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBkc2MuZ2V0LmFwcGx5KHRoaXMpO1xuICAgICAgfSxcbiAgICAgIHNldDogZnVuY3Rpb24odXJsKSB7XG4gICAgICAgIHRoaXMuc3JjT2JqZWN0ID0gc3RyZWFtcy5nZXQodXJsKSB8fCBudWxsO1xuICAgICAgICByZXR1cm4gZHNjLnNldC5hcHBseSh0aGlzLCBbdXJsXSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB2YXIgbmF0aXZlU2V0QXR0cmlidXRlID0gd2luZG93LkhUTUxNZWRpYUVsZW1lbnQucHJvdG90eXBlLnNldEF0dHJpYnV0ZTtcbiAgICB3aW5kb3cuSFRNTE1lZGlhRWxlbWVudC5wcm90b3R5cGUuc2V0QXR0cmlidXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMiAmJlxuICAgICAgICAgICgnJyArIGFyZ3VtZW50c1swXSkudG9Mb3dlckNhc2UoKSA9PT0gJ3NyYycpIHtcbiAgICAgICAgdGhpcy5zcmNPYmplY3QgPSBzdHJlYW1zLmdldChhcmd1bWVudHNbMV0pIHx8IG51bGw7XG4gICAgICB9XG4gICAgICByZXR1cm4gbmF0aXZlU2V0QXR0cmlidXRlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfTtcbiAgfSxcblxuICBzaGltTWF4TWVzc2FnZVNpemU6IGZ1bmN0aW9uKHdpbmRvdykge1xuICAgIGlmICh3aW5kb3cuUlRDU2N0cFRyYW5zcG9ydCB8fCAhd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBicm93c2VyRGV0YWlscyA9IHV0aWxzLmRldGVjdEJyb3dzZXIod2luZG93KTtcblxuICAgIGlmICghKCdzY3RwJyBpbiB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlKSkge1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUsICdzY3RwJywge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiB0eXBlb2YgdGhpcy5fc2N0cCA9PT0gJ3VuZGVmaW5lZCcgPyBudWxsIDogdGhpcy5fc2N0cDtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgdmFyIHNjdHBJbkRlc2NyaXB0aW9uID0gZnVuY3Rpb24oZGVzY3JpcHRpb24pIHtcbiAgICAgIHZhciBzZWN0aW9ucyA9IFNEUFV0aWxzLnNwbGl0U2VjdGlvbnMoZGVzY3JpcHRpb24uc2RwKTtcbiAgICAgIHNlY3Rpb25zLnNoaWZ0KCk7XG4gICAgICByZXR1cm4gc2VjdGlvbnMuc29tZShmdW5jdGlvbihtZWRpYVNlY3Rpb24pIHtcbiAgICAgICAgdmFyIG1MaW5lID0gU0RQVXRpbHMucGFyc2VNTGluZShtZWRpYVNlY3Rpb24pO1xuICAgICAgICByZXR1cm4gbUxpbmUgJiYgbUxpbmUua2luZCA9PT0gJ2FwcGxpY2F0aW9uJ1xuICAgICAgICAgICAgJiYgbUxpbmUucHJvdG9jb2wuaW5kZXhPZignU0NUUCcpICE9PSAtMTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICB2YXIgZ2V0UmVtb3RlRmlyZWZveFZlcnNpb24gPSBmdW5jdGlvbihkZXNjcmlwdGlvbikge1xuICAgICAgLy8gVE9ETzogSXMgdGhlcmUgYSBiZXR0ZXIgc29sdXRpb24gZm9yIGRldGVjdGluZyBGaXJlZm94P1xuICAgICAgdmFyIG1hdGNoID0gZGVzY3JpcHRpb24uc2RwLm1hdGNoKC9tb3ppbGxhLi4uVEhJU19JU19TRFBBUlRBLShcXGQrKS8pO1xuICAgICAgaWYgKG1hdGNoID09PSBudWxsIHx8IG1hdGNoLmxlbmd0aCA8IDIpIHtcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgfVxuICAgICAgdmFyIHZlcnNpb24gPSBwYXJzZUludChtYXRjaFsxXSwgMTApO1xuICAgICAgLy8gVGVzdCBmb3IgTmFOICh5ZXMsIHRoaXMgaXMgdWdseSlcbiAgICAgIHJldHVybiB2ZXJzaW9uICE9PSB2ZXJzaW9uID8gLTEgOiB2ZXJzaW9uO1xuICAgIH07XG5cbiAgICB2YXIgZ2V0Q2FuU2VuZE1heE1lc3NhZ2VTaXplID0gZnVuY3Rpb24ocmVtb3RlSXNGaXJlZm94KSB7XG4gICAgICAvLyBFdmVyeSBpbXBsZW1lbnRhdGlvbiB3ZSBrbm93IGNhbiBzZW5kIGF0IGxlYXN0IDY0IEtpQi5cbiAgICAgIC8vIE5vdGU6IEFsdGhvdWdoIENocm9tZSBpcyB0ZWNobmljYWxseSBhYmxlIHRvIHNlbmQgdXAgdG8gMjU2IEtpQiwgdGhlXG4gICAgICAvLyAgICAgICBkYXRhIGRvZXMgbm90IHJlYWNoIHRoZSBvdGhlciBwZWVyIHJlbGlhYmx5LlxuICAgICAgLy8gICAgICAgU2VlOiBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3Avd2VicnRjL2lzc3Vlcy9kZXRhaWw/aWQ9ODQxOVxuICAgICAgdmFyIGNhblNlbmRNYXhNZXNzYWdlU2l6ZSA9IDY1NTM2O1xuICAgICAgaWYgKGJyb3dzZXJEZXRhaWxzLmJyb3dzZXIgPT09ICdmaXJlZm94Jykge1xuICAgICAgICBpZiAoYnJvd3NlckRldGFpbHMudmVyc2lvbiA8IDU3KSB7XG4gICAgICAgICAgaWYgKHJlbW90ZUlzRmlyZWZveCA9PT0gLTEpIHtcbiAgICAgICAgICAgIC8vIEZGIDwgNTcgd2lsbCBzZW5kIGluIDE2IEtpQiBjaHVua3MgdXNpbmcgdGhlIGRlcHJlY2F0ZWQgUFBJRFxuICAgICAgICAgICAgLy8gZnJhZ21lbnRhdGlvbi5cbiAgICAgICAgICAgIGNhblNlbmRNYXhNZXNzYWdlU2l6ZSA9IDE2Mzg0O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBIb3dldmVyLCBvdGhlciBGRiAoYW5kIFJBV1JUQykgY2FuIHJlYXNzZW1ibGUgUFBJRC1mcmFnbWVudGVkXG4gICAgICAgICAgICAvLyBtZXNzYWdlcy4gVGh1cywgc3VwcG9ydGluZyB+MiBHaUIgd2hlbiBzZW5kaW5nLlxuICAgICAgICAgICAgY2FuU2VuZE1heE1lc3NhZ2VTaXplID0gMjE0NzQ4MzYzNztcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gQ3VycmVudGx5LCBhbGwgRkYgPj0gNTcgd2lsbCByZXNldCB0aGUgcmVtb3RlIG1heGltdW0gbWVzc2FnZSBzaXplXG4gICAgICAgICAgLy8gdG8gdGhlIGRlZmF1bHQgdmFsdWUgd2hlbiBhIGRhdGEgY2hhbm5lbCBpcyBjcmVhdGVkIGF0IGEgbGF0ZXJcbiAgICAgICAgICAvLyBzdGFnZS4gOihcbiAgICAgICAgICAvLyBTZWU6IGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTE0MjY4MzFcbiAgICAgICAgICBjYW5TZW5kTWF4TWVzc2FnZVNpemUgPVxuICAgICAgICAgICAgYnJvd3NlckRldGFpbHMudmVyc2lvbiA9PT0gNTcgPyA2NTUzNSA6IDY1NTM2O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gY2FuU2VuZE1heE1lc3NhZ2VTaXplO1xuICAgIH07XG5cbiAgICB2YXIgZ2V0TWF4TWVzc2FnZVNpemUgPSBmdW5jdGlvbihkZXNjcmlwdGlvbiwgcmVtb3RlSXNGaXJlZm94KSB7XG4gICAgICAvLyBOb3RlOiA2NTUzNiBieXRlcyBpcyB0aGUgZGVmYXVsdCB2YWx1ZSBmcm9tIHRoZSBTRFAgc3BlYy4gQWxzbyxcbiAgICAgIC8vICAgICAgIGV2ZXJ5IGltcGxlbWVudGF0aW9uIHdlIGtub3cgc3VwcG9ydHMgcmVjZWl2aW5nIDY1NTM2IGJ5dGVzLlxuICAgICAgdmFyIG1heE1lc3NhZ2VTaXplID0gNjU1MzY7XG5cbiAgICAgIC8vIEZGIDU3IGhhcyBhIHNsaWdodGx5IGluY29ycmVjdCBkZWZhdWx0IHJlbW90ZSBtYXggbWVzc2FnZSBzaXplLCBzb1xuICAgICAgLy8gd2UgbmVlZCB0byBhZGp1c3QgaXQgaGVyZSB0byBhdm9pZCBhIGZhaWx1cmUgd2hlbiBzZW5kaW5nLlxuICAgICAgLy8gU2VlOiBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD0xNDI1Njk3XG4gICAgICBpZiAoYnJvd3NlckRldGFpbHMuYnJvd3NlciA9PT0gJ2ZpcmVmb3gnXG4gICAgICAgICAgICYmIGJyb3dzZXJEZXRhaWxzLnZlcnNpb24gPT09IDU3KSB7XG4gICAgICAgIG1heE1lc3NhZ2VTaXplID0gNjU1MzU7XG4gICAgICB9XG5cbiAgICAgIHZhciBtYXRjaCA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KGRlc2NyaXB0aW9uLnNkcCwgJ2E9bWF4LW1lc3NhZ2Utc2l6ZTonKTtcbiAgICAgIGlmIChtYXRjaC5sZW5ndGggPiAwKSB7XG4gICAgICAgIG1heE1lc3NhZ2VTaXplID0gcGFyc2VJbnQobWF0Y2hbMF0uc3Vic3RyKDE5KSwgMTApO1xuICAgICAgfSBlbHNlIGlmIChicm93c2VyRGV0YWlscy5icm93c2VyID09PSAnZmlyZWZveCcgJiZcbiAgICAgICAgICAgICAgICAgIHJlbW90ZUlzRmlyZWZveCAhPT0gLTEpIHtcbiAgICAgICAgLy8gSWYgdGhlIG1heGltdW0gbWVzc2FnZSBzaXplIGlzIG5vdCBwcmVzZW50IGluIHRoZSByZW1vdGUgU0RQIGFuZFxuICAgICAgICAvLyBib3RoIGxvY2FsIGFuZCByZW1vdGUgYXJlIEZpcmVmb3gsIHRoZSByZW1vdGUgcGVlciBjYW4gcmVjZWl2ZVxuICAgICAgICAvLyB+MiBHaUIuXG4gICAgICAgIG1heE1lc3NhZ2VTaXplID0gMjE0NzQ4MzYzNztcbiAgICAgIH1cbiAgICAgIHJldHVybiBtYXhNZXNzYWdlU2l6ZTtcbiAgICB9O1xuXG4gICAgdmFyIG9yaWdTZXRSZW1vdGVEZXNjcmlwdGlvbiA9XG4gICAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuc2V0UmVtb3RlRGVzY3JpcHRpb247XG4gICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5zZXRSZW1vdGVEZXNjcmlwdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHBjID0gdGhpcztcbiAgICAgIHBjLl9zY3RwID0gbnVsbDtcblxuICAgICAgaWYgKHNjdHBJbkRlc2NyaXB0aW9uKGFyZ3VtZW50c1swXSkpIHtcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHJlbW90ZSBpcyBGRi5cbiAgICAgICAgdmFyIGlzRmlyZWZveCA9IGdldFJlbW90ZUZpcmVmb3hWZXJzaW9uKGFyZ3VtZW50c1swXSk7XG5cbiAgICAgICAgLy8gR2V0IHRoZSBtYXhpbXVtIG1lc3NhZ2Ugc2l6ZSB0aGUgbG9jYWwgcGVlciBpcyBjYXBhYmxlIG9mIHNlbmRpbmdcbiAgICAgICAgdmFyIGNhblNlbmRNTVMgPSBnZXRDYW5TZW5kTWF4TWVzc2FnZVNpemUoaXNGaXJlZm94KTtcblxuICAgICAgICAvLyBHZXQgdGhlIG1heGltdW0gbWVzc2FnZSBzaXplIG9mIHRoZSByZW1vdGUgcGVlci5cbiAgICAgICAgdmFyIHJlbW90ZU1NUyA9IGdldE1heE1lc3NhZ2VTaXplKGFyZ3VtZW50c1swXSwgaXNGaXJlZm94KTtcblxuICAgICAgICAvLyBEZXRlcm1pbmUgZmluYWwgbWF4aW11bSBtZXNzYWdlIHNpemVcbiAgICAgICAgdmFyIG1heE1lc3NhZ2VTaXplO1xuICAgICAgICBpZiAoY2FuU2VuZE1NUyA9PT0gMCAmJiByZW1vdGVNTVMgPT09IDApIHtcbiAgICAgICAgICBtYXhNZXNzYWdlU2l6ZSA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTtcbiAgICAgICAgfSBlbHNlIGlmIChjYW5TZW5kTU1TID09PSAwIHx8IHJlbW90ZU1NUyA9PT0gMCkge1xuICAgICAgICAgIG1heE1lc3NhZ2VTaXplID0gTWF0aC5tYXgoY2FuU2VuZE1NUywgcmVtb3RlTU1TKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBtYXhNZXNzYWdlU2l6ZSA9IE1hdGgubWluKGNhblNlbmRNTVMsIHJlbW90ZU1NUyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDcmVhdGUgYSBkdW1teSBSVENTY3RwVHJhbnNwb3J0IG9iamVjdCBhbmQgdGhlICdtYXhNZXNzYWdlU2l6ZSdcbiAgICAgICAgLy8gYXR0cmlidXRlLlxuICAgICAgICB2YXIgc2N0cCA9IHt9O1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2N0cCwgJ21heE1lc3NhZ2VTaXplJywge1xuICAgICAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gbWF4TWVzc2FnZVNpemU7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcGMuX3NjdHAgPSBzY3RwO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gb3JpZ1NldFJlbW90ZURlc2NyaXB0aW9uLmFwcGx5KHBjLCBhcmd1bWVudHMpO1xuICAgIH07XG4gIH0sXG5cbiAgc2hpbVNlbmRUaHJvd1R5cGVFcnJvcjogZnVuY3Rpb24od2luZG93KSB7XG4gICAgLy8gTm90ZTogQWx0aG91Z2ggRmlyZWZveCA+PSA1NyBoYXMgYSBuYXRpdmUgaW1wbGVtZW50YXRpb24sIHRoZSBtYXhpbXVtXG4gICAgLy8gICAgICAgbWVzc2FnZSBzaXplIGNhbiBiZSByZXNldCBmb3IgYWxsIGRhdGEgY2hhbm5lbHMgYXQgYSBsYXRlciBzdGFnZS5cbiAgICAvLyAgICAgICBTZWU6IGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTE0MjY4MzFcblxuICAgIHZhciBvcmlnQ3JlYXRlRGF0YUNoYW5uZWwgPVxuICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5jcmVhdGVEYXRhQ2hhbm5lbDtcbiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmNyZWF0ZURhdGFDaGFubmVsID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcGMgPSB0aGlzO1xuICAgICAgdmFyIGRhdGFDaGFubmVsID0gb3JpZ0NyZWF0ZURhdGFDaGFubmVsLmFwcGx5KHBjLCBhcmd1bWVudHMpO1xuICAgICAgdmFyIG9yaWdEYXRhQ2hhbm5lbFNlbmQgPSBkYXRhQ2hhbm5lbC5zZW5kO1xuXG4gICAgICAvLyBQYXRjaCAnc2VuZCcgbWV0aG9kXG4gICAgICBkYXRhQ2hhbm5lbC5zZW5kID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBkYyA9IHRoaXM7XG4gICAgICAgIHZhciBkYXRhID0gYXJndW1lbnRzWzBdO1xuICAgICAgICB2YXIgbGVuZ3RoID0gZGF0YS5sZW5ndGggfHwgZGF0YS5zaXplIHx8IGRhdGEuYnl0ZUxlbmd0aDtcbiAgICAgICAgaWYgKGxlbmd0aCA+IHBjLnNjdHAubWF4TWVzc2FnZVNpemUpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKCdNZXNzYWdlIHRvbyBsYXJnZSAoY2FuIHNlbmQgYSBtYXhpbXVtIG9mICcgK1xuICAgICAgICAgICAgcGMuc2N0cC5tYXhNZXNzYWdlU2l6ZSArICcgYnl0ZXMpJywgJ1R5cGVFcnJvcicpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvcmlnRGF0YUNoYW5uZWxTZW5kLmFwcGx5KGRjLCBhcmd1bWVudHMpO1xuICAgICAgfTtcblxuICAgICAgcmV0dXJuIGRhdGFDaGFubmVsO1xuICAgIH07XG4gIH1cbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy93ZWJydGMtYWRhcHRlci9zcmMvanMvY29tbW9uX3NoaW0uanNcbi8vIG1vZHVsZSBpZCA9IDY1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///65\n")},function(module,exports,__webpack_require__){eval("/* WEBPACK VAR INJECTION */(function(module, global) {var __WEBPACK_AMD_DEFINE_RESULT__;/*!\n * Platform.js <https://mths.be/platform>\n * Copyright 2014-2018 Benjamin Tan <https://bnjmnt4n.now.sh/>\n * Copyright 2011-2013 John-David Dalton <http://allyoucanleet.com/>\n * Available under MIT license <https://mths.be/mit>\n */\n;(function() {\n  'use strict';\n\n  /** Used to determine if values are of the language type `Object`. */\n  var objectTypes = {\n    'function': true,\n    'object': true\n  };\n\n  /** Used as a reference to the global object. */\n  var root = (objectTypes[typeof window] && window) || this;\n\n  /** Backup possible global object. */\n  var oldRoot = root;\n\n  /** Detect free variable `exports`. */\n  var freeExports = objectTypes[typeof exports] && exports;\n\n  /** Detect free variable `module`. */\n  var freeModule = objectTypes[typeof module] && module && !module.nodeType && module;\n\n  /** Detect free variable `global` from Node.js or Browserified code and use it as `root`. */\n  var freeGlobal = freeExports && freeModule && typeof global == 'object' && global;\n  if (freeGlobal && (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal || freeGlobal.self === freeGlobal)) {\n    root = freeGlobal;\n  }\n\n  /**\n   * Used as the maximum length of an array-like object.\n   * See the [ES6 spec](http://people.mozilla.org/~jorendorff/es6-draft.html#sec-tolength)\n   * for more details.\n   */\n  var maxSafeInteger = Math.pow(2, 53) - 1;\n\n  /** Regular expression to detect Opera. */\n  var reOpera = /\\bOpera/;\n\n  /** Possible global object. */\n  var thisBinding = this;\n\n  /** Used for native method references. */\n  var objectProto = Object.prototype;\n\n  /** Used to check for own properties of an object. */\n  var hasOwnProperty = objectProto.hasOwnProperty;\n\n  /** Used to resolve the internal `[[Class]]` of values. */\n  var toString = objectProto.toString;\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * Capitalizes a string value.\n   *\n   * @private\n   * @param {string} string The string to capitalize.\n   * @returns {string} The capitalized string.\n   */\n  function capitalize(string) {\n    string = String(string);\n    return string.charAt(0).toUpperCase() + string.slice(1);\n  }\n\n  /**\n   * A utility function to clean up the OS name.\n   *\n   * @private\n   * @param {string} os The OS name to clean up.\n   * @param {string} [pattern] A `RegExp` pattern matching the OS name.\n   * @param {string} [label] A label for the OS.\n   */\n  function cleanupOS(os, pattern, label) {\n    // Platform tokens are defined at:\n    // http://msdn.microsoft.com/en-us/library/ms537503(VS.85).aspx\n    // http://web.archive.org/web/20081122053950/http://msdn.microsoft.com/en-us/library/ms537503(VS.85).aspx\n    var data = {\n      '10.0': '10',\n      '6.4':  '10 Technical Preview',\n      '6.3':  '8.1',\n      '6.2':  '8',\n      '6.1':  'Server 2008 R2 / 7',\n      '6.0':  'Server 2008 / Vista',\n      '5.2':  'Server 2003 / XP 64-bit',\n      '5.1':  'XP',\n      '5.01': '2000 SP1',\n      '5.0':  '2000',\n      '4.0':  'NT',\n      '4.90': 'ME'\n    };\n    // Detect Windows version from platform tokens.\n    if (pattern && label && /^Win/i.test(os) && !/^Windows Phone /i.test(os) &&\n        (data = data[/[\\d.]+$/.exec(os)])) {\n      os = 'Windows ' + data;\n    }\n    // Correct character case and cleanup string.\n    os = String(os);\n\n    if (pattern && label) {\n      os = os.replace(RegExp(pattern, 'i'), label);\n    }\n\n    os = format(\n      os.replace(/ ce$/i, ' CE')\n        .replace(/\\bhpw/i, 'web')\n        .replace(/\\bMacintosh\\b/, 'Mac OS')\n        .replace(/_PowerPC\\b/i, ' OS')\n        .replace(/\\b(OS X) [^ \\d]+/i, '$1')\n        .replace(/\\bMac (OS X)\\b/, '$1')\n        .replace(/\\/(\\d)/, ' $1')\n        .replace(/_/g, '.')\n        .replace(/(?: BePC|[ .]*fc[ \\d.]+)$/i, '')\n        .replace(/\\bx86\\.64\\b/gi, 'x86_64')\n        .replace(/\\b(Windows Phone) OS\\b/, '$1')\n        .replace(/\\b(Chrome OS \\w+) [\\d.]+\\b/, '$1')\n        .split(' on ')[0]\n    );\n\n    return os;\n  }\n\n  /**\n   * An iteration utility for arrays and objects.\n   *\n   * @private\n   * @param {Array|Object} object The object to iterate over.\n   * @param {Function} callback The function called per iteration.\n   */\n  function each(object, callback) {\n    var index = -1,\n        length = object ? object.length : 0;\n\n    if (typeof length == 'number' && length > -1 && length <= maxSafeInteger) {\n      while (++index < length) {\n        callback(object[index], index, object);\n      }\n    } else {\n      forOwn(object, callback);\n    }\n  }\n\n  /**\n   * Trim and conditionally capitalize string values.\n   *\n   * @private\n   * @param {string} string The string to format.\n   * @returns {string} The formatted string.\n   */\n  function format(string) {\n    string = trim(string);\n    return /^(?:webOS|i(?:OS|P))/.test(string)\n      ? string\n      : capitalize(string);\n  }\n\n  /**\n   * Iterates over an object's own properties, executing the `callback` for each.\n   *\n   * @private\n   * @param {Object} object The object to iterate over.\n   * @param {Function} callback The function executed per own property.\n   */\n  function forOwn(object, callback) {\n    for (var key in object) {\n      if (hasOwnProperty.call(object, key)) {\n        callback(object[key], key, object);\n      }\n    }\n  }\n\n  /**\n   * Gets the internal `[[Class]]` of a value.\n   *\n   * @private\n   * @param {*} value The value.\n   * @returns {string} The `[[Class]]`.\n   */\n  function getClassOf(value) {\n    return value == null\n      ? capitalize(value)\n      : toString.call(value).slice(8, -1);\n  }\n\n  /**\n   * Host objects can return type values that are different from their actual\n   * data type. The objects we are concerned with usually return non-primitive\n   * types of \"object\", \"function\", or \"unknown\".\n   *\n   * @private\n   * @param {*} object The owner of the property.\n   * @param {string} property The property to check.\n   * @returns {boolean} Returns `true` if the property value is a non-primitive, else `false`.\n   */\n  function isHostType(object, property) {\n    var type = object != null ? typeof object[property] : 'number';\n    return !/^(?:boolean|number|string|undefined)$/.test(type) &&\n      (type == 'object' ? !!object[property] : true);\n  }\n\n  /**\n   * Prepares a string for use in a `RegExp` by making hyphens and spaces optional.\n   *\n   * @private\n   * @param {string} string The string to qualify.\n   * @returns {string} The qualified string.\n   */\n  function qualify(string) {\n    return String(string).replace(/([ -])(?!$)/g, '$1?');\n  }\n\n  /**\n   * A bare-bones `Array#reduce` like utility function.\n   *\n   * @private\n   * @param {Array} array The array to iterate over.\n   * @param {Function} callback The function called per iteration.\n   * @returns {*} The accumulated result.\n   */\n  function reduce(array, callback) {\n    var accumulator = null;\n    each(array, function(value, index) {\n      accumulator = callback(accumulator, value, index, array);\n    });\n    return accumulator;\n  }\n\n  /**\n   * Removes leading and trailing whitespace from a string.\n   *\n   * @private\n   * @param {string} string The string to trim.\n   * @returns {string} The trimmed string.\n   */\n  function trim(string) {\n    return String(string).replace(/^ +| +$/g, '');\n  }\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * Creates a new platform object.\n   *\n   * @memberOf platform\n   * @param {Object|string} [ua=navigator.userAgent] The user agent string or\n   *  context object.\n   * @returns {Object} A platform object.\n   */\n  function parse(ua) {\n\n    /** The environment context object. */\n    var context = root;\n\n    /** Used to flag when a custom context is provided. */\n    var isCustomContext = ua && typeof ua == 'object' && getClassOf(ua) != 'String';\n\n    // Juggle arguments.\n    if (isCustomContext) {\n      context = ua;\n      ua = null;\n    }\n\n    /** Browser navigator object. */\n    var nav = context.navigator || {};\n\n    /** Browser user agent string. */\n    var userAgent = nav.userAgent || '';\n\n    ua || (ua = userAgent);\n\n    /** Used to flag when `thisBinding` is the [ModuleScope]. */\n    var isModuleScope = isCustomContext || thisBinding == oldRoot;\n\n    /** Used to detect if browser is like Chrome. */\n    var likeChrome = isCustomContext\n      ? !!nav.likeChrome\n      : /\\bChrome\\b/.test(ua) && !/internal|\\n/i.test(toString.toString());\n\n    /** Internal `[[Class]]` value shortcuts. */\n    var objectClass = 'Object',\n        airRuntimeClass = isCustomContext ? objectClass : 'ScriptBridgingProxyObject',\n        enviroClass = isCustomContext ? objectClass : 'Environment',\n        javaClass = (isCustomContext && context.java) ? 'JavaPackage' : getClassOf(context.java),\n        phantomClass = isCustomContext ? objectClass : 'RuntimeObject';\n\n    /** Detect Java environments. */\n    var java = /\\bJava/.test(javaClass) && context.java;\n\n    /** Detect Rhino. */\n    var rhino = java && getClassOf(context.environment) == enviroClass;\n\n    /** A character to represent alpha. */\n    var alpha = java ? 'a' : '\\u03b1';\n\n    /** A character to represent beta. */\n    var beta = java ? 'b' : '\\u03b2';\n\n    /** Browser document object. */\n    var doc = context.document || {};\n\n    /**\n     * Detect Opera browser (Presto-based).\n     * http://www.howtocreate.co.uk/operaStuff/operaObject.html\n     * http://dev.opera.com/articles/view/opera-mini-web-content-authoring-guidelines/#operamini\n     */\n    var opera = context.operamini || context.opera;\n\n    /** Opera `[[Class]]`. */\n    var operaClass = reOpera.test(operaClass = (isCustomContext && opera) ? opera['[[Class]]'] : getClassOf(opera))\n      ? operaClass\n      : (opera = null);\n\n    /*------------------------------------------------------------------------*/\n\n    /** Temporary variable used over the script's lifetime. */\n    var data;\n\n    /** The CPU architecture. */\n    var arch = ua;\n\n    /** Platform description array. */\n    var description = [];\n\n    /** Platform alpha/beta indicator. */\n    var prerelease = null;\n\n    /** A flag to indicate that environment features should be used to resolve the platform. */\n    var useFeatures = ua == userAgent;\n\n    /** The browser/environment version. */\n    var version = useFeatures && opera && typeof opera.version == 'function' && opera.version();\n\n    /** A flag to indicate if the OS ends with \"/ Version\" */\n    var isSpecialCasedOS;\n\n    /* Detectable layout engines (order is important). */\n    var layout = getLayout([\n      { 'label': 'EdgeHTML', 'pattern': 'Edge' },\n      'Trident',\n      { 'label': 'WebKit', 'pattern': 'AppleWebKit' },\n      'iCab',\n      'Presto',\n      'NetFront',\n      'Tasman',\n      'KHTML',\n      'Gecko'\n    ]);\n\n    /* Detectable browser names (order is important). */\n    var name = getName([\n      'Adobe AIR',\n      'Arora',\n      'Avant Browser',\n      'Breach',\n      'Camino',\n      'Electron',\n      'Epiphany',\n      'Fennec',\n      'Flock',\n      'Galeon',\n      'GreenBrowser',\n      'iCab',\n      'Iceweasel',\n      'K-Meleon',\n      'Konqueror',\n      'Lunascape',\n      'Maxthon',\n      { 'label': 'Microsoft Edge', 'pattern': 'Edge' },\n      'Midori',\n      'Nook Browser',\n      'PaleMoon',\n      'PhantomJS',\n      'Raven',\n      'Rekonq',\n      'RockMelt',\n      { 'label': 'Samsung Internet', 'pattern': 'SamsungBrowser' },\n      'SeaMonkey',\n      { 'label': 'Silk', 'pattern': '(?:Cloud9|Silk-Accelerated)' },\n      'Sleipnir',\n      'SlimBrowser',\n      { 'label': 'SRWare Iron', 'pattern': 'Iron' },\n      'Sunrise',\n      'Swiftfox',\n      'Waterfox',\n      'WebPositive',\n      'Opera Mini',\n      { 'label': 'Opera Mini', 'pattern': 'OPiOS' },\n      'Opera',\n      { 'label': 'Opera', 'pattern': 'OPR' },\n      'Chrome',\n      { 'label': 'Chrome Mobile', 'pattern': '(?:CriOS|CrMo)' },\n      { 'label': 'Firefox', 'pattern': '(?:Firefox|Minefield)' },\n      { 'label': 'Firefox for iOS', 'pattern': 'FxiOS' },\n      { 'label': 'IE', 'pattern': 'IEMobile' },\n      { 'label': 'IE', 'pattern': 'MSIE' },\n      'Safari'\n    ]);\n\n    /* Detectable products (order is important). */\n    var product = getProduct([\n      { 'label': 'BlackBerry', 'pattern': 'BB10' },\n      'BlackBerry',\n      { 'label': 'Galaxy S', 'pattern': 'GT-I9000' },\n      { 'label': 'Galaxy S2', 'pattern': 'GT-I9100' },\n      { 'label': 'Galaxy S3', 'pattern': 'GT-I9300' },\n      { 'label': 'Galaxy S4', 'pattern': 'GT-I9500' },\n      { 'label': 'Galaxy S5', 'pattern': 'SM-G900' },\n      { 'label': 'Galaxy S6', 'pattern': 'SM-G920' },\n      { 'label': 'Galaxy S6 Edge', 'pattern': 'SM-G925' },\n      { 'label': 'Galaxy S7', 'pattern': 'SM-G930' },\n      { 'label': 'Galaxy S7 Edge', 'pattern': 'SM-G935' },\n      'Google TV',\n      'Lumia',\n      'iPad',\n      'iPod',\n      'iPhone',\n      'Kindle',\n      { 'label': 'Kindle Fire', 'pattern': '(?:Cloud9|Silk-Accelerated)' },\n      'Nexus',\n      'Nook',\n      'PlayBook',\n      'PlayStation Vita',\n      'PlayStation',\n      'TouchPad',\n      'Transformer',\n      { 'label': 'Wii U', 'pattern': 'WiiU' },\n      'Wii',\n      'Xbox One',\n      { 'label': 'Xbox 360', 'pattern': 'Xbox' },\n      'Xoom'\n    ]);\n\n    /* Detectable manufacturers. */\n    var manufacturer = getManufacturer({\n      'Apple': { 'iPad': 1, 'iPhone': 1, 'iPod': 1 },\n      'Archos': {},\n      'Amazon': { 'Kindle': 1, 'Kindle Fire': 1 },\n      'Asus': { 'Transformer': 1 },\n      'Barnes & Noble': { 'Nook': 1 },\n      'BlackBerry': { 'PlayBook': 1 },\n      'Google': { 'Google TV': 1, 'Nexus': 1 },\n      'HP': { 'TouchPad': 1 },\n      'HTC': {},\n      'LG': {},\n      'Microsoft': { 'Xbox': 1, 'Xbox One': 1 },\n      'Motorola': { 'Xoom': 1 },\n      'Nintendo': { 'Wii U': 1,  'Wii': 1 },\n      'Nokia': { 'Lumia': 1 },\n      'Samsung': { 'Galaxy S': 1, 'Galaxy S2': 1, 'Galaxy S3': 1, 'Galaxy S4': 1 },\n      'Sony': { 'PlayStation': 1, 'PlayStation Vita': 1 }\n    });\n\n    /* Detectable operating systems (order is important). */\n    var os = getOS([\n      'Windows Phone',\n      'Android',\n      'CentOS',\n      { 'label': 'Chrome OS', 'pattern': 'CrOS' },\n      'Debian',\n      'Fedora',\n      'FreeBSD',\n      'Gentoo',\n      'Haiku',\n      'Kubuntu',\n      'Linux Mint',\n      'OpenBSD',\n      'Red Hat',\n      'SuSE',\n      'Ubuntu',\n      'Xubuntu',\n      'Cygwin',\n      'Symbian OS',\n      'hpwOS',\n      'webOS ',\n      'webOS',\n      'Tablet OS',\n      'Tizen',\n      'Linux',\n      'Mac OS X',\n      'Macintosh',\n      'Mac',\n      'Windows 98;',\n      'Windows '\n    ]);\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Picks the layout engine from an array of guesses.\n     *\n     * @private\n     * @param {Array} guesses An array of guesses.\n     * @returns {null|string} The detected layout engine.\n     */\n    function getLayout(guesses) {\n      return reduce(guesses, function(result, guess) {\n        return result || RegExp('\\\\b' + (\n          guess.pattern || qualify(guess)\n        ) + '\\\\b', 'i').exec(ua) && (guess.label || guess);\n      });\n    }\n\n    /**\n     * Picks the manufacturer from an array of guesses.\n     *\n     * @private\n     * @param {Array} guesses An object of guesses.\n     * @returns {null|string} The detected manufacturer.\n     */\n    function getManufacturer(guesses) {\n      return reduce(guesses, function(result, value, key) {\n        // Lookup the manufacturer by product or scan the UA for the manufacturer.\n        return result || (\n          value[product] ||\n          value[/^[a-z]+(?: +[a-z]+\\b)*/i.exec(product)] ||\n          RegExp('\\\\b' + qualify(key) + '(?:\\\\b|\\\\w*\\\\d)', 'i').exec(ua)\n        ) && key;\n      });\n    }\n\n    /**\n     * Picks the browser name from an array of guesses.\n     *\n     * @private\n     * @param {Array} guesses An array of guesses.\n     * @returns {null|string} The detected browser name.\n     */\n    function getName(guesses) {\n      return reduce(guesses, function(result, guess) {\n        return result || RegExp('\\\\b' + (\n          guess.pattern || qualify(guess)\n        ) + '\\\\b', 'i').exec(ua) && (guess.label || guess);\n      });\n    }\n\n    /**\n     * Picks the OS name from an array of guesses.\n     *\n     * @private\n     * @param {Array} guesses An array of guesses.\n     * @returns {null|string} The detected OS name.\n     */\n    function getOS(guesses) {\n      return reduce(guesses, function(result, guess) {\n        var pattern = guess.pattern || qualify(guess);\n        if (!result && (result =\n              RegExp('\\\\b' + pattern + '(?:/[\\\\d.]+|[ \\\\w.]*)', 'i').exec(ua)\n            )) {\n          result = cleanupOS(result, pattern, guess.label || guess);\n        }\n        return result;\n      });\n    }\n\n    /**\n     * Picks the product name from an array of guesses.\n     *\n     * @private\n     * @param {Array} guesses An array of guesses.\n     * @returns {null|string} The detected product name.\n     */\n    function getProduct(guesses) {\n      return reduce(guesses, function(result, guess) {\n        var pattern = guess.pattern || qualify(guess);\n        if (!result && (result =\n              RegExp('\\\\b' + pattern + ' *\\\\d+[.\\\\w_]*', 'i').exec(ua) ||\n              RegExp('\\\\b' + pattern + ' *\\\\w+-[\\\\w]*', 'i').exec(ua) ||\n              RegExp('\\\\b' + pattern + '(?:; *(?:[a-z]+[_-])?[a-z]+\\\\d+|[^ ();-]*)', 'i').exec(ua)\n            )) {\n          // Split by forward slash and append product version if needed.\n          if ((result = String((guess.label && !RegExp(pattern, 'i').test(guess.label)) ? guess.label : result).split('/'))[1] && !/[\\d.]+/.test(result[0])) {\n            result[0] += ' ' + result[1];\n          }\n          // Correct character case and cleanup string.\n          guess = guess.label || guess;\n          result = format(result[0]\n            .replace(RegExp(pattern, 'i'), guess)\n            .replace(RegExp('; *(?:' + guess + '[_-])?', 'i'), ' ')\n            .replace(RegExp('(' + guess + ')[-_.]?(\\\\w)', 'i'), '$1 $2'));\n        }\n        return result;\n      });\n    }\n\n    /**\n     * Resolves the version using an array of UA patterns.\n     *\n     * @private\n     * @param {Array} patterns An array of UA patterns.\n     * @returns {null|string} The detected version.\n     */\n    function getVersion(patterns) {\n      return reduce(patterns, function(result, pattern) {\n        return result || (RegExp(pattern +\n          '(?:-[\\\\d.]+/|(?: for [\\\\w-]+)?[ /-])([\\\\d.]+[^ ();/_-]*)', 'i').exec(ua) || 0)[1] || null;\n      });\n    }\n\n    /**\n     * Returns `platform.description` when the platform object is coerced to a string.\n     *\n     * @name toString\n     * @memberOf platform\n     * @returns {string} Returns `platform.description` if available, else an empty string.\n     */\n    function toStringPlatform() {\n      return this.description || '';\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    // Convert layout to an array so we can add extra details.\n    layout && (layout = [layout]);\n\n    // Detect product names that contain their manufacturer's name.\n    if (manufacturer && !product) {\n      product = getProduct([manufacturer]);\n    }\n    // Clean up Google TV.\n    if ((data = /\\bGoogle TV\\b/.exec(product))) {\n      product = data[0];\n    }\n    // Detect simulators.\n    if (/\\bSimulator\\b/i.test(ua)) {\n      product = (product ? product + ' ' : '') + 'Simulator';\n    }\n    // Detect Opera Mini 8+ running in Turbo/Uncompressed mode on iOS.\n    if (name == 'Opera Mini' && /\\bOPiOS\\b/.test(ua)) {\n      description.push('running in Turbo/Uncompressed mode');\n    }\n    // Detect IE Mobile 11.\n    if (name == 'IE' && /\\blike iPhone OS\\b/.test(ua)) {\n      data = parse(ua.replace(/like iPhone OS/, ''));\n      manufacturer = data.manufacturer;\n      product = data.product;\n    }\n    // Detect iOS.\n    else if (/^iP/.test(product)) {\n      name || (name = 'Safari');\n      os = 'iOS' + ((data = / OS ([\\d_]+)/i.exec(ua))\n        ? ' ' + data[1].replace(/_/g, '.')\n        : '');\n    }\n    // Detect Kubuntu.\n    else if (name == 'Konqueror' && !/buntu/i.test(os)) {\n      os = 'Kubuntu';\n    }\n    // Detect Android browsers.\n    else if ((manufacturer && manufacturer != 'Google' &&\n        ((/Chrome/.test(name) && !/\\bMobile Safari\\b/i.test(ua)) || /\\bVita\\b/.test(product))) ||\n        (/\\bAndroid\\b/.test(os) && /^Chrome/.test(name) && /\\bVersion\\//i.test(ua))) {\n      name = 'Android Browser';\n      os = /\\bAndroid\\b/.test(os) ? os : 'Android';\n    }\n    // Detect Silk desktop/accelerated modes.\n    else if (name == 'Silk') {\n      if (!/\\bMobi/i.test(ua)) {\n        os = 'Android';\n        description.unshift('desktop mode');\n      }\n      if (/Accelerated *= *true/i.test(ua)) {\n        description.unshift('accelerated');\n      }\n    }\n    // Detect PaleMoon identifying as Firefox.\n    else if (name == 'PaleMoon' && (data = /\\bFirefox\\/([\\d.]+)\\b/.exec(ua))) {\n      description.push('identifying as Firefox ' + data[1]);\n    }\n    // Detect Firefox OS and products running Firefox.\n    else if (name == 'Firefox' && (data = /\\b(Mobile|Tablet|TV)\\b/i.exec(ua))) {\n      os || (os = 'Firefox OS');\n      product || (product = data[1]);\n    }\n    // Detect false positives for Firefox/Safari.\n    else if (!name || (data = !/\\bMinefield\\b/i.test(ua) && /\\b(?:Firefox|Safari)\\b/.exec(name))) {\n      // Escape the `/` for Firefox 1.\n      if (name && !product && /[\\/,]|^[^(]+?\\)/.test(ua.slice(ua.indexOf(data + '/') + 8))) {\n        // Clear name of false positives.\n        name = null;\n      }\n      // Reassign a generic name.\n      if ((data = product || manufacturer || os) &&\n          (product || manufacturer || /\\b(?:Android|Symbian OS|Tablet OS|webOS)\\b/.test(os))) {\n        name = /[a-z]+(?: Hat)?/i.exec(/\\bAndroid\\b/.test(os) ? os : data) + ' Browser';\n      }\n    }\n    // Add Chrome version to description for Electron.\n    else if (name == 'Electron' && (data = (/\\bChrome\\/([\\d.]+)\\b/.exec(ua) || 0)[1])) {\n      description.push('Chromium ' + data);\n    }\n    // Detect non-Opera (Presto-based) versions (order is important).\n    if (!version) {\n      version = getVersion([\n        '(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\\\d.]+$))',\n        'Version',\n        qualify(name),\n        '(?:Firefox|Minefield|NetFront)'\n      ]);\n    }\n    // Detect stubborn layout engines.\n    if ((data =\n          layout == 'iCab' && parseFloat(version) > 3 && 'WebKit' ||\n          /\\bOpera\\b/.test(name) && (/\\bOPR\\b/.test(ua) ? 'Blink' : 'Presto') ||\n          /\\b(?:Midori|Nook|Safari)\\b/i.test(ua) && !/^(?:Trident|EdgeHTML)$/.test(layout) && 'WebKit' ||\n          !layout && /\\bMSIE\\b/i.test(ua) && (os == 'Mac OS' ? 'Tasman' : 'Trident') ||\n          layout == 'WebKit' && /\\bPlayStation\\b(?! Vita\\b)/i.test(name) && 'NetFront'\n        )) {\n      layout = [data];\n    }\n    // Detect Windows Phone 7 desktop mode.\n    if (name == 'IE' && (data = (/; *(?:XBLWP|ZuneWP)(\\d+)/i.exec(ua) || 0)[1])) {\n      name += ' Mobile';\n      os = 'Windows Phone ' + (/\\+$/.test(data) ? data : data + '.x');\n      description.unshift('desktop mode');\n    }\n    // Detect Windows Phone 8.x desktop mode.\n    else if (/\\bWPDesktop\\b/i.test(ua)) {\n      name = 'IE Mobile';\n      os = 'Windows Phone 8.x';\n      description.unshift('desktop mode');\n      version || (version = (/\\brv:([\\d.]+)/.exec(ua) || 0)[1]);\n    }\n    // Detect IE 11 identifying as other browsers.\n    else if (name != 'IE' && layout == 'Trident' && (data = /\\brv:([\\d.]+)/.exec(ua))) {\n      if (name) {\n        description.push('identifying as ' + name + (version ? ' ' + version : ''));\n      }\n      name = 'IE';\n      version = data[1];\n    }\n    // Leverage environment features.\n    if (useFeatures) {\n      // Detect server-side environments.\n      // Rhino has a global function while others have a global object.\n      if (isHostType(context, 'global')) {\n        if (java) {\n          data = java.lang.System;\n          arch = data.getProperty('os.arch');\n          os = os || data.getProperty('os.name') + ' ' + data.getProperty('os.version');\n        }\n        if (rhino) {\n          try {\n            version = context.require('ringo/engine').version.join('.');\n            name = 'RingoJS';\n          } catch(e) {\n            if ((data = context.system) && data.global.system == context.system) {\n              name = 'Narwhal';\n              os || (os = data[0].os || null);\n            }\n          }\n          if (!name) {\n            name = 'Rhino';\n          }\n        }\n        else if (\n          typeof context.process == 'object' && !context.process.browser &&\n          (data = context.process)\n        ) {\n          if (typeof data.versions == 'object') {\n            if (typeof data.versions.electron == 'string') {\n              description.push('Node ' + data.versions.node);\n              name = 'Electron';\n              version = data.versions.electron;\n            } else if (typeof data.versions.nw == 'string') {\n              description.push('Chromium ' + version, 'Node ' + data.versions.node);\n              name = 'NW.js';\n              version = data.versions.nw;\n            }\n          }\n          if (!name) {\n            name = 'Node.js';\n            arch = data.arch;\n            os = data.platform;\n            version = /[\\d.]+/.exec(data.version);\n            version = version ? version[0] : null;\n          }\n        }\n      }\n      // Detect Adobe AIR.\n      else if (getClassOf((data = context.runtime)) == airRuntimeClass) {\n        name = 'Adobe AIR';\n        os = data.flash.system.Capabilities.os;\n      }\n      // Detect PhantomJS.\n      else if (getClassOf((data = context.phantom)) == phantomClass) {\n        name = 'PhantomJS';\n        version = (data = data.version || null) && (data.major + '.' + data.minor + '.' + data.patch);\n      }\n      // Detect IE compatibility modes.\n      else if (typeof doc.documentMode == 'number' && (data = /\\bTrident\\/(\\d+)/i.exec(ua))) {\n        // We're in compatibility mode when the Trident version + 4 doesn't\n        // equal the document mode.\n        version = [version, doc.documentMode];\n        if ((data = +data[1] + 4) != version[1]) {\n          description.push('IE ' + version[1] + ' mode');\n          layout && (layout[1] = '');\n          version[1] = data;\n        }\n        version = name == 'IE' ? String(version[1].toFixed(1)) : version[0];\n      }\n      // Detect IE 11 masking as other browsers.\n      else if (typeof doc.documentMode == 'number' && /^(?:Chrome|Firefox)\\b/.test(name)) {\n        description.push('masking as ' + name + ' ' + version);\n        name = 'IE';\n        version = '11.0';\n        layout = ['Trident'];\n        os = 'Windows';\n      }\n      os = os && format(os);\n    }\n    // Detect prerelease phases.\n    if (version && (data =\n          /(?:[ab]|dp|pre|[ab]\\d+pre)(?:\\d+\\+?)?$/i.exec(version) ||\n          /(?:alpha|beta)(?: ?\\d)?/i.exec(ua + ';' + (useFeatures && nav.appMinorVersion)) ||\n          /\\bMinefield\\b/i.test(ua) && 'a'\n        )) {\n      prerelease = /b/i.test(data) ? 'beta' : 'alpha';\n      version = version.replace(RegExp(data + '\\\\+?$'), '') +\n        (prerelease == 'beta' ? beta : alpha) + (/\\d+\\+?/.exec(data) || '');\n    }\n    // Detect Firefox Mobile.\n    if (name == 'Fennec' || name == 'Firefox' && /\\b(?:Android|Firefox OS)\\b/.test(os)) {\n      name = 'Firefox Mobile';\n    }\n    // Obscure Maxthon's unreliable version.\n    else if (name == 'Maxthon' && version) {\n      version = version.replace(/\\.[\\d.]+/, '.x');\n    }\n    // Detect Xbox 360 and Xbox One.\n    else if (/\\bXbox\\b/i.test(product)) {\n      if (product == 'Xbox 360') {\n        os = null;\n      }\n      if (product == 'Xbox 360' && /\\bIEMobile\\b/.test(ua)) {\n        description.unshift('mobile mode');\n      }\n    }\n    // Add mobile postfix.\n    else if ((/^(?:Chrome|IE|Opera)$/.test(name) || name && !product && !/Browser|Mobi/.test(name)) &&\n        (os == 'Windows CE' || /Mobi/i.test(ua))) {\n      name += ' Mobile';\n    }\n    // Detect IE platform preview.\n    else if (name == 'IE' && useFeatures) {\n      try {\n        if (context.external === null) {\n          description.unshift('platform preview');\n        }\n      } catch(e) {\n        description.unshift('embedded');\n      }\n    }\n    // Detect BlackBerry OS version.\n    // http://docs.blackberry.com/en/developers/deliverables/18169/HTTP_headers_sent_by_BB_Browser_1234911_11.jsp\n    else if ((/\\bBlackBerry\\b/.test(product) || /\\bBB10\\b/.test(ua)) && (data =\n          (RegExp(product.replace(/ +/g, ' *') + '/([.\\\\d]+)', 'i').exec(ua) || 0)[1] ||\n          version\n        )) {\n      data = [data, /BB10/.test(ua)];\n      os = (data[1] ? (product = null, manufacturer = 'BlackBerry') : 'Device Software') + ' ' + data[0];\n      version = null;\n    }\n    // Detect Opera identifying/masking itself as another browser.\n    // http://www.opera.com/support/kb/view/843/\n    else if (this != forOwn && product != 'Wii' && (\n          (useFeatures && opera) ||\n          (/Opera/.test(name) && /\\b(?:MSIE|Firefox)\\b/i.test(ua)) ||\n          (name == 'Firefox' && /\\bOS X (?:\\d+\\.){2,}/.test(os)) ||\n          (name == 'IE' && (\n            (os && !/^Win/.test(os) && version > 5.5) ||\n            /\\bWindows XP\\b/.test(os) && version > 8 ||\n            version == 8 && !/\\bTrident\\b/.test(ua)\n          ))\n        ) && !reOpera.test((data = parse.call(forOwn, ua.replace(reOpera, '') + ';'))) && data.name) {\n      // When \"identifying\", the UA contains both Opera and the other browser's name.\n      data = 'ing as ' + data.name + ((data = data.version) ? ' ' + data : '');\n      if (reOpera.test(name)) {\n        if (/\\bIE\\b/.test(data) && os == 'Mac OS') {\n          os = null;\n        }\n        data = 'identify' + data;\n      }\n      // When \"masking\", the UA contains only the other browser's name.\n      else {\n        data = 'mask' + data;\n        if (operaClass) {\n          name = format(operaClass.replace(/([a-z])([A-Z])/g, '$1 $2'));\n        } else {\n          name = 'Opera';\n        }\n        if (/\\bIE\\b/.test(data)) {\n          os = null;\n        }\n        if (!useFeatures) {\n          version = null;\n        }\n      }\n      layout = ['Presto'];\n      description.push(data);\n    }\n    // Detect WebKit Nightly and approximate Chrome/Safari versions.\n    if ((data = (/\\bAppleWebKit\\/([\\d.]+\\+?)/i.exec(ua) || 0)[1])) {\n      // Correct build number for numeric comparison.\n      // (e.g. \"532.5\" becomes \"532.05\")\n      data = [parseFloat(data.replace(/\\.(\\d)$/, '.0$1')), data];\n      // Nightly builds are postfixed with a \"+\".\n      if (name == 'Safari' && data[1].slice(-1) == '+') {\n        name = 'WebKit Nightly';\n        prerelease = 'alpha';\n        version = data[1].slice(0, -1);\n      }\n      // Clear incorrect browser versions.\n      else if (version == data[1] ||\n          version == (data[2] = (/\\bSafari\\/([\\d.]+\\+?)/i.exec(ua) || 0)[1])) {\n        version = null;\n      }\n      // Use the full Chrome version when available.\n      data[1] = (/\\bChrome\\/([\\d.]+)/i.exec(ua) || 0)[1];\n      // Detect Blink layout engine.\n      if (data[0] == 537.36 && data[2] == 537.36 && parseFloat(data[1]) >= 28 && layout == 'WebKit') {\n        layout = ['Blink'];\n      }\n      // Detect JavaScriptCore.\n      // http://stackoverflow.com/questions/6768474/how-can-i-detect-which-javascript-engine-v8-or-jsc-is-used-at-runtime-in-androi\n      if (!useFeatures || (!likeChrome && !data[1])) {\n        layout && (layout[1] = 'like Safari');\n        data = (data = data[0], data < 400 ? 1 : data < 500 ? 2 : data < 526 ? 3 : data < 533 ? 4 : data < 534 ? '4+' : data < 535 ? 5 : data < 537 ? 6 : data < 538 ? 7 : data < 601 ? 8 : '8');\n      } else {\n        layout && (layout[1] = 'like Chrome');\n        data = data[1] || (data = data[0], data < 530 ? 1 : data < 532 ? 2 : data < 532.05 ? 3 : data < 533 ? 4 : data < 534.03 ? 5 : data < 534.07 ? 6 : data < 534.10 ? 7 : data < 534.13 ? 8 : data < 534.16 ? 9 : data < 534.24 ? 10 : data < 534.30 ? 11 : data < 535.01 ? 12 : data < 535.02 ? '13+' : data < 535.07 ? 15 : data < 535.11 ? 16 : data < 535.19 ? 17 : data < 536.05 ? 18 : data < 536.10 ? 19 : data < 537.01 ? 20 : data < 537.11 ? '21+' : data < 537.13 ? 23 : data < 537.18 ? 24 : data < 537.24 ? 25 : data < 537.36 ? 26 : layout != 'Blink' ? '27' : '28');\n      }\n      // Add the postfix of \".x\" or \"+\" for approximate versions.\n      layout && (layout[1] += ' ' + (data += typeof data == 'number' ? '.x' : /[.+]/.test(data) ? '' : '+'));\n      // Obscure version for some Safari 1-2 releases.\n      if (name == 'Safari' && (!version || parseInt(version) > 45)) {\n        version = data;\n      }\n    }\n    // Detect Opera desktop modes.\n    if (name == 'Opera' &&  (data = /\\bzbov|zvav$/.exec(os))) {\n      name += ' ';\n      description.unshift('desktop mode');\n      if (data == 'zvav') {\n        name += 'Mini';\n        version = null;\n      } else {\n        name += 'Mobile';\n      }\n      os = os.replace(RegExp(' *' + data + '$'), '');\n    }\n    // Detect Chrome desktop mode.\n    else if (name == 'Safari' && /\\bChrome\\b/.exec(layout && layout[1])) {\n      description.unshift('desktop mode');\n      name = 'Chrome Mobile';\n      version = null;\n\n      if (/\\bOS X\\b/.test(os)) {\n        manufacturer = 'Apple';\n        os = 'iOS 4.3+';\n      } else {\n        os = null;\n      }\n    }\n    // Strip incorrect OS versions.\n    if (version && version.indexOf((data = /[\\d.]+$/.exec(os))) == 0 &&\n        ua.indexOf('/' + data + '-') > -1) {\n      os = trim(os.replace(data, ''));\n    }\n    // Add layout engine.\n    if (layout && !/\\b(?:Avant|Nook)\\b/.test(name) && (\n        /Browser|Lunascape|Maxthon/.test(name) ||\n        name != 'Safari' && /^iOS/.test(os) && /\\bSafari\\b/.test(layout[1]) ||\n        /^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(name) && layout[1])) {\n      // Don't add layout details to description if they are falsey.\n      (data = layout[layout.length - 1]) && description.push(data);\n    }\n    // Combine contextual information.\n    if (description.length) {\n      description = ['(' + description.join('; ') + ')'];\n    }\n    // Append manufacturer to description.\n    if (manufacturer && product && product.indexOf(manufacturer) < 0) {\n      description.push('on ' + manufacturer);\n    }\n    // Append product to description.\n    if (product) {\n      description.push((/^on /.test(description[description.length - 1]) ? '' : 'on ') + product);\n    }\n    // Parse the OS into an object.\n    if (os) {\n      data = / ([\\d.+]+)$/.exec(os);\n      isSpecialCasedOS = data && os.charAt(os.length - data[0].length - 1) == '/';\n      os = {\n        'architecture': 32,\n        'family': (data && !isSpecialCasedOS) ? os.replace(data[0], '') : os,\n        'version': data ? data[1] : null,\n        'toString': function() {\n          var version = this.version;\n          return this.family + ((version && !isSpecialCasedOS) ? ' ' + version : '') + (this.architecture == 64 ? ' 64-bit' : '');\n        }\n      };\n    }\n    // Add browser/OS architecture.\n    if ((data = /\\b(?:AMD|IA|Win|WOW|x86_|x)64\\b/i.exec(arch)) && !/\\bi686\\b/i.test(arch)) {\n      if (os) {\n        os.architecture = 64;\n        os.family = os.family.replace(RegExp(' *' + data), '');\n      }\n      if (\n          name && (/\\bWOW64\\b/i.test(ua) ||\n          (useFeatures && /\\w(?:86|32)$/.test(nav.cpuClass || nav.platform) && !/\\bWin64; x64\\b/i.test(ua)))\n      ) {\n        description.unshift('32-bit');\n      }\n    }\n    // Chrome 39 and above on OS X is always 64-bit.\n    else if (\n        os && /^OS X/.test(os.family) &&\n        name == 'Chrome' && parseFloat(version) >= 39\n    ) {\n      os.architecture = 64;\n    }\n\n    ua || (ua = null);\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * The platform object.\n     *\n     * @name platform\n     * @type Object\n     */\n    var platform = {};\n\n    /**\n     * The platform description.\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.description = ua;\n\n    /**\n     * The name of the browser's layout engine.\n     *\n     * The list of common layout engines include:\n     * \"Blink\", \"EdgeHTML\", \"Gecko\", \"Trident\" and \"WebKit\"\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.layout = layout && layout[0];\n\n    /**\n     * The name of the product's manufacturer.\n     *\n     * The list of manufacturers include:\n     * \"Apple\", \"Archos\", \"Amazon\", \"Asus\", \"Barnes & Noble\", \"BlackBerry\",\n     * \"Google\", \"HP\", \"HTC\", \"LG\", \"Microsoft\", \"Motorola\", \"Nintendo\",\n     * \"Nokia\", \"Samsung\" and \"Sony\"\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.manufacturer = manufacturer;\n\n    /**\n     * The name of the browser/environment.\n     *\n     * The list of common browser names include:\n     * \"Chrome\", \"Electron\", \"Firefox\", \"Firefox for iOS\", \"IE\",\n     * \"Microsoft Edge\", \"PhantomJS\", \"Safari\", \"SeaMonkey\", \"Silk\",\n     * \"Opera Mini\" and \"Opera\"\n     *\n     * Mobile versions of some browsers have \"Mobile\" appended to their name:\n     * eg. \"Chrome Mobile\", \"Firefox Mobile\", \"IE Mobile\" and \"Opera Mobile\"\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.name = name;\n\n    /**\n     * The alpha/beta release indicator.\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.prerelease = prerelease;\n\n    /**\n     * The name of the product hosting the browser.\n     *\n     * The list of common products include:\n     *\n     * \"BlackBerry\", \"Galaxy S4\", \"Lumia\", \"iPad\", \"iPod\", \"iPhone\", \"Kindle\",\n     * \"Kindle Fire\", \"Nexus\", \"Nook\", \"PlayBook\", \"TouchPad\" and \"Transformer\"\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.product = product;\n\n    /**\n     * The browser's user agent string.\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.ua = ua;\n\n    /**\n     * The browser/environment version.\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.version = name && version;\n\n    /**\n     * The name of the operating system.\n     *\n     * @memberOf platform\n     * @type Object\n     */\n    platform.os = os || {\n\n      /**\n       * The CPU architecture the OS is built for.\n       *\n       * @memberOf platform.os\n       * @type number|null\n       */\n      'architecture': null,\n\n      /**\n       * The family of the OS.\n       *\n       * Common values include:\n       * \"Windows\", \"Windows Server 2008 R2 / 7\", \"Windows Server 2008 / Vista\",\n       * \"Windows XP\", \"OS X\", \"Ubuntu\", \"Debian\", \"Fedora\", \"Red Hat\", \"SuSE\",\n       * \"Android\", \"iOS\" and \"Windows Phone\"\n       *\n       * @memberOf platform.os\n       * @type string|null\n       */\n      'family': null,\n\n      /**\n       * The version of the OS.\n       *\n       * @memberOf platform.os\n       * @type string|null\n       */\n      'version': null,\n\n      /**\n       * Returns the OS string.\n       *\n       * @memberOf platform.os\n       * @returns {string} The OS string.\n       */\n      'toString': function() { return 'null'; }\n    };\n\n    platform.parse = parse;\n    platform.toString = toStringPlatform;\n\n    if (platform.version) {\n      description.unshift(version);\n    }\n    if (platform.name) {\n      description.unshift(name);\n    }\n    if (os && name && !(os == String(os).split(' ')[0] && (os == name.split(' ')[0] || product))) {\n      description.push(product ? '(' + os + ')' : 'on ' + os);\n    }\n    if (description.length) {\n      platform.description = description.join(' ');\n    }\n    return platform;\n  }\n\n  /*--------------------------------------------------------------------------*/\n\n  // Export platform.\n  var platform = parse();\n\n  // Some AMD build optimizers, like r.js, check for condition patterns like the following:\n  if (true) {\n    // Expose platform on the global object to prevent errors when platform is\n    // loaded by a script tag in the presence of an AMD loader.\n    // See http://requirejs.org/docs/errors.html#mismatch for more details.\n    root.platform = platform;\n\n    // Define as an anonymous module so platform can be aliased through path mapping.\n    !(__WEBPACK_AMD_DEFINE_RESULT__ = (function() {\n      return platform;\n    }).call(exports, __webpack_require__, exports, module),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  }\n  // Check for `exports` after `define` in case a build optimizer adds an `exports` object.\n  else if (freeExports && freeModule) {\n    // Export for CommonJS support.\n    forOwn(platform, function(value, key) {\n      freeExports[key] = value;\n    });\n  }\n  else {\n    // Export to the global object.\n    root.platform = platform;\n  }\n}.call(this));\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! ./../webpack/buildin/module.js */ 67)(module), __webpack_require__(/*! ./../webpack/buildin/global.js */ 23)))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNjYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcGxhdGZvcm0vcGxhdGZvcm0uanM/NTMwNCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIFBsYXRmb3JtLmpzIDxodHRwczovL210aHMuYmUvcGxhdGZvcm0+XG4gKiBDb3B5cmlnaHQgMjAxNC0yMDE4IEJlbmphbWluIFRhbiA8aHR0cHM6Ly9ibmptbnQ0bi5ub3cuc2gvPlxuICogQ29weXJpZ2h0IDIwMTEtMjAxMyBKb2huLURhdmlkIERhbHRvbiA8aHR0cDovL2FsbHlvdWNhbmxlZXQuY29tLz5cbiAqIEF2YWlsYWJsZSB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9tdGhzLmJlL21pdD5cbiAqL1xuOyhmdW5jdGlvbigpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIC8qKiBVc2VkIHRvIGRldGVybWluZSBpZiB2YWx1ZXMgYXJlIG9mIHRoZSBsYW5ndWFnZSB0eXBlIGBPYmplY3RgLiAqL1xuICB2YXIgb2JqZWN0VHlwZXMgPSB7XG4gICAgJ2Z1bmN0aW9uJzogdHJ1ZSxcbiAgICAnb2JqZWN0JzogdHJ1ZVxuICB9O1xuXG4gIC8qKiBVc2VkIGFzIGEgcmVmZXJlbmNlIHRvIHRoZSBnbG9iYWwgb2JqZWN0LiAqL1xuICB2YXIgcm9vdCA9IChvYmplY3RUeXBlc1t0eXBlb2Ygd2luZG93XSAmJiB3aW5kb3cpIHx8IHRoaXM7XG5cbiAgLyoqIEJhY2t1cCBwb3NzaWJsZSBnbG9iYWwgb2JqZWN0LiAqL1xuICB2YXIgb2xkUm9vdCA9IHJvb3Q7XG5cbiAgLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBleHBvcnRzYC4gKi9cbiAgdmFyIGZyZWVFeHBvcnRzID0gb2JqZWN0VHlwZXNbdHlwZW9mIGV4cG9ydHNdICYmIGV4cG9ydHM7XG5cbiAgLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBtb2R1bGVgLiAqL1xuICB2YXIgZnJlZU1vZHVsZSA9IG9iamVjdFR5cGVzW3R5cGVvZiBtb2R1bGVdICYmIG1vZHVsZSAmJiAhbW9kdWxlLm5vZGVUeXBlICYmIG1vZHVsZTtcblxuICAvKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYGdsb2JhbGAgZnJvbSBOb2RlLmpzIG9yIEJyb3dzZXJpZmllZCBjb2RlIGFuZCB1c2UgaXQgYXMgYHJvb3RgLiAqL1xuICB2YXIgZnJlZUdsb2JhbCA9IGZyZWVFeHBvcnRzICYmIGZyZWVNb2R1bGUgJiYgdHlwZW9mIGdsb2JhbCA9PSAnb2JqZWN0JyAmJiBnbG9iYWw7XG4gIGlmIChmcmVlR2xvYmFsICYmIChmcmVlR2xvYmFsLmdsb2JhbCA9PT0gZnJlZUdsb2JhbCB8fCBmcmVlR2xvYmFsLndpbmRvdyA9PT0gZnJlZUdsb2JhbCB8fCBmcmVlR2xvYmFsLnNlbGYgPT09IGZyZWVHbG9iYWwpKSB7XG4gICAgcm9vdCA9IGZyZWVHbG9iYWw7XG4gIH1cblxuICAvKipcbiAgICogVXNlZCBhcyB0aGUgbWF4aW11bSBsZW5ndGggb2YgYW4gYXJyYXktbGlrZSBvYmplY3QuXG4gICAqIFNlZSB0aGUgW0VTNiBzcGVjXShodHRwOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy10b2xlbmd0aClcbiAgICogZm9yIG1vcmUgZGV0YWlscy5cbiAgICovXG4gIHZhciBtYXhTYWZlSW50ZWdlciA9IE1hdGgucG93KDIsIDUzKSAtIDE7XG5cbiAgLyoqIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBkZXRlY3QgT3BlcmEuICovXG4gIHZhciByZU9wZXJhID0gL1xcYk9wZXJhLztcblxuICAvKiogUG9zc2libGUgZ2xvYmFsIG9iamVjdC4gKi9cbiAgdmFyIHRoaXNCaW5kaW5nID0gdGhpcztcblxuICAvKiogVXNlZCBmb3IgbmF0aXZlIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xuICB2YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4gIC8qKiBVc2VkIHRvIGNoZWNrIGZvciBvd24gcHJvcGVydGllcyBvZiBhbiBvYmplY3QuICovXG4gIHZhciBoYXNPd25Qcm9wZXJ0eSA9IG9iamVjdFByb3RvLmhhc093blByb3BlcnR5O1xuXG4gIC8qKiBVc2VkIHRvIHJlc29sdmUgdGhlIGludGVybmFsIGBbW0NsYXNzXV1gIG9mIHZhbHVlcy4gKi9cbiAgdmFyIHRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cbiAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgLyoqXG4gICAqIENhcGl0YWxpemVzIGEgc3RyaW5nIHZhbHVlLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nIFRoZSBzdHJpbmcgdG8gY2FwaXRhbGl6ZS5cbiAgICogQHJldHVybnMge3N0cmluZ30gVGhlIGNhcGl0YWxpemVkIHN0cmluZy5cbiAgICovXG4gIGZ1bmN0aW9uIGNhcGl0YWxpemUoc3RyaW5nKSB7XG4gICAgc3RyaW5nID0gU3RyaW5nKHN0cmluZyk7XG4gICAgcmV0dXJuIHN0cmluZy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHN0cmluZy5zbGljZSgxKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBIHV0aWxpdHkgZnVuY3Rpb24gdG8gY2xlYW4gdXAgdGhlIE9TIG5hbWUuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcyBUaGUgT1MgbmFtZSB0byBjbGVhbiB1cC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtwYXR0ZXJuXSBBIGBSZWdFeHBgIHBhdHRlcm4gbWF0Y2hpbmcgdGhlIE9TIG5hbWUuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbbGFiZWxdIEEgbGFiZWwgZm9yIHRoZSBPUy5cbiAgICovXG4gIGZ1bmN0aW9uIGNsZWFudXBPUyhvcywgcGF0dGVybiwgbGFiZWwpIHtcbiAgICAvLyBQbGF0Zm9ybSB0b2tlbnMgYXJlIGRlZmluZWQgYXQ6XG4gICAgLy8gaHR0cDovL21zZG4ubWljcm9zb2Z0LmNvbS9lbi11cy9saWJyYXJ5L21zNTM3NTAzKFZTLjg1KS5hc3B4XG4gICAgLy8gaHR0cDovL3dlYi5hcmNoaXZlLm9yZy93ZWIvMjAwODExMjIwNTM5NTAvaHR0cDovL21zZG4ubWljcm9zb2Z0LmNvbS9lbi11cy9saWJyYXJ5L21zNTM3NTAzKFZTLjg1KS5hc3B4XG4gICAgdmFyIGRhdGEgPSB7XG4gICAgICAnMTAuMCc6ICcxMCcsXG4gICAgICAnNi40JzogICcxMCBUZWNobmljYWwgUHJldmlldycsXG4gICAgICAnNi4zJzogICc4LjEnLFxuICAgICAgJzYuMic6ICAnOCcsXG4gICAgICAnNi4xJzogICdTZXJ2ZXIgMjAwOCBSMiAvIDcnLFxuICAgICAgJzYuMCc6ICAnU2VydmVyIDIwMDggLyBWaXN0YScsXG4gICAgICAnNS4yJzogICdTZXJ2ZXIgMjAwMyAvIFhQIDY0LWJpdCcsXG4gICAgICAnNS4xJzogICdYUCcsXG4gICAgICAnNS4wMSc6ICcyMDAwIFNQMScsXG4gICAgICAnNS4wJzogICcyMDAwJyxcbiAgICAgICc0LjAnOiAgJ05UJyxcbiAgICAgICc0LjkwJzogJ01FJ1xuICAgIH07XG4gICAgLy8gRGV0ZWN0IFdpbmRvd3MgdmVyc2lvbiBmcm9tIHBsYXRmb3JtIHRva2Vucy5cbiAgICBpZiAocGF0dGVybiAmJiBsYWJlbCAmJiAvXldpbi9pLnRlc3Qob3MpICYmICEvXldpbmRvd3MgUGhvbmUgL2kudGVzdChvcykgJiZcbiAgICAgICAgKGRhdGEgPSBkYXRhWy9bXFxkLl0rJC8uZXhlYyhvcyldKSkge1xuICAgICAgb3MgPSAnV2luZG93cyAnICsgZGF0YTtcbiAgICB9XG4gICAgLy8gQ29ycmVjdCBjaGFyYWN0ZXIgY2FzZSBhbmQgY2xlYW51cCBzdHJpbmcuXG4gICAgb3MgPSBTdHJpbmcob3MpO1xuXG4gICAgaWYgKHBhdHRlcm4gJiYgbGFiZWwpIHtcbiAgICAgIG9zID0gb3MucmVwbGFjZShSZWdFeHAocGF0dGVybiwgJ2knKSwgbGFiZWwpO1xuICAgIH1cblxuICAgIG9zID0gZm9ybWF0KFxuICAgICAgb3MucmVwbGFjZSgvIGNlJC9pLCAnIENFJylcbiAgICAgICAgLnJlcGxhY2UoL1xcYmhwdy9pLCAnd2ViJylcbiAgICAgICAgLnJlcGxhY2UoL1xcYk1hY2ludG9zaFxcYi8sICdNYWMgT1MnKVxuICAgICAgICAucmVwbGFjZSgvX1Bvd2VyUENcXGIvaSwgJyBPUycpXG4gICAgICAgIC5yZXBsYWNlKC9cXGIoT1MgWCkgW14gXFxkXSsvaSwgJyQxJylcbiAgICAgICAgLnJlcGxhY2UoL1xcYk1hYyAoT1MgWClcXGIvLCAnJDEnKVxuICAgICAgICAucmVwbGFjZSgvXFwvKFxcZCkvLCAnICQxJylcbiAgICAgICAgLnJlcGxhY2UoL18vZywgJy4nKVxuICAgICAgICAucmVwbGFjZSgvKD86IEJlUEN8WyAuXSpmY1sgXFxkLl0rKSQvaSwgJycpXG4gICAgICAgIC5yZXBsYWNlKC9cXGJ4ODZcXC42NFxcYi9naSwgJ3g4Nl82NCcpXG4gICAgICAgIC5yZXBsYWNlKC9cXGIoV2luZG93cyBQaG9uZSkgT1NcXGIvLCAnJDEnKVxuICAgICAgICAucmVwbGFjZSgvXFxiKENocm9tZSBPUyBcXHcrKSBbXFxkLl0rXFxiLywgJyQxJylcbiAgICAgICAgLnNwbGl0KCcgb24gJylbMF1cbiAgICApO1xuXG4gICAgcmV0dXJuIG9zO1xuICB9XG5cbiAgLyoqXG4gICAqIEFuIGl0ZXJhdGlvbiB1dGlsaXR5IGZvciBhcnJheXMgYW5kIG9iamVjdHMuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBpdGVyYXRlIG92ZXIuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIFRoZSBmdW5jdGlvbiBjYWxsZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICovXG4gIGZ1bmN0aW9uIGVhY2gob2JqZWN0LCBjYWxsYmFjaykge1xuICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICBsZW5ndGggPSBvYmplY3QgPyBvYmplY3QubGVuZ3RoIDogMDtcblxuICAgIGlmICh0eXBlb2YgbGVuZ3RoID09ICdudW1iZXInICYmIGxlbmd0aCA+IC0xICYmIGxlbmd0aCA8PSBtYXhTYWZlSW50ZWdlcikge1xuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgY2FsbGJhY2sob2JqZWN0W2luZGV4XSwgaW5kZXgsIG9iamVjdCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvck93bihvYmplY3QsIGNhbGxiYWNrKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVHJpbSBhbmQgY29uZGl0aW9uYWxseSBjYXBpdGFsaXplIHN0cmluZyB2YWx1ZXMuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmcgVGhlIHN0cmluZyB0byBmb3JtYXQuXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBmb3JtYXR0ZWQgc3RyaW5nLlxuICAgKi9cbiAgZnVuY3Rpb24gZm9ybWF0KHN0cmluZykge1xuICAgIHN0cmluZyA9IHRyaW0oc3RyaW5nKTtcbiAgICByZXR1cm4gL14oPzp3ZWJPU3xpKD86T1N8UCkpLy50ZXN0KHN0cmluZylcbiAgICAgID8gc3RyaW5nXG4gICAgICA6IGNhcGl0YWxpemUoc3RyaW5nKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJdGVyYXRlcyBvdmVyIGFuIG9iamVjdCdzIG93biBwcm9wZXJ0aWVzLCBleGVjdXRpbmcgdGhlIGBjYWxsYmFja2AgZm9yIGVhY2guXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBpdGVyYXRlIG92ZXIuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIFRoZSBmdW5jdGlvbiBleGVjdXRlZCBwZXIgb3duIHByb3BlcnR5LlxuICAgKi9cbiAgZnVuY3Rpb24gZm9yT3duKG9iamVjdCwgY2FsbGJhY2spIHtcbiAgICBmb3IgKHZhciBrZXkgaW4gb2JqZWN0KSB7XG4gICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIGtleSkpIHtcbiAgICAgICAgY2FsbGJhY2sob2JqZWN0W2tleV0sIGtleSwgb2JqZWN0KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgaW50ZXJuYWwgYFtbQ2xhc3NdXWAgb2YgYSB2YWx1ZS5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUuXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBgW1tDbGFzc11dYC5cbiAgICovXG4gIGZ1bmN0aW9uIGdldENsYXNzT2YodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgPT0gbnVsbFxuICAgICAgPyBjYXBpdGFsaXplKHZhbHVlKVxuICAgICAgOiB0b1N0cmluZy5jYWxsKHZhbHVlKS5zbGljZSg4LCAtMSk7XG4gIH1cblxuICAvKipcbiAgICogSG9zdCBvYmplY3RzIGNhbiByZXR1cm4gdHlwZSB2YWx1ZXMgdGhhdCBhcmUgZGlmZmVyZW50IGZyb20gdGhlaXIgYWN0dWFsXG4gICAqIGRhdGEgdHlwZS4gVGhlIG9iamVjdHMgd2UgYXJlIGNvbmNlcm5lZCB3aXRoIHVzdWFsbHkgcmV0dXJuIG5vbi1wcmltaXRpdmVcbiAgICogdHlwZXMgb2YgXCJvYmplY3RcIiwgXCJmdW5jdGlvblwiLCBvciBcInVua25vd25cIi5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHsqfSBvYmplY3QgVGhlIG93bmVyIG9mIHRoZSBwcm9wZXJ0eS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHByb3BlcnR5IFRoZSBwcm9wZXJ0eSB0byBjaGVjay5cbiAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBwcm9wZXJ0eSB2YWx1ZSBpcyBhIG5vbi1wcmltaXRpdmUsIGVsc2UgYGZhbHNlYC5cbiAgICovXG4gIGZ1bmN0aW9uIGlzSG9zdFR5cGUob2JqZWN0LCBwcm9wZXJ0eSkge1xuICAgIHZhciB0eXBlID0gb2JqZWN0ICE9IG51bGwgPyB0eXBlb2Ygb2JqZWN0W3Byb3BlcnR5XSA6ICdudW1iZXInO1xuICAgIHJldHVybiAhL14oPzpib29sZWFufG51bWJlcnxzdHJpbmd8dW5kZWZpbmVkKSQvLnRlc3QodHlwZSkgJiZcbiAgICAgICh0eXBlID09ICdvYmplY3QnID8gISFvYmplY3RbcHJvcGVydHldIDogdHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICogUHJlcGFyZXMgYSBzdHJpbmcgZm9yIHVzZSBpbiBhIGBSZWdFeHBgIGJ5IG1ha2luZyBoeXBoZW5zIGFuZCBzcGFjZXMgb3B0aW9uYWwuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmcgVGhlIHN0cmluZyB0byBxdWFsaWZ5LlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgcXVhbGlmaWVkIHN0cmluZy5cbiAgICovXG4gIGZ1bmN0aW9uIHF1YWxpZnkoc3RyaW5nKSB7XG4gICAgcmV0dXJuIFN0cmluZyhzdHJpbmcpLnJlcGxhY2UoLyhbIC1dKSg/ISQpL2csICckMT8nKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBIGJhcmUtYm9uZXMgYEFycmF5I3JlZHVjZWAgbGlrZSB1dGlsaXR5IGZ1bmN0aW9uLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gaXRlcmF0ZSBvdmVyLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBUaGUgZnVuY3Rpb24gY2FsbGVkIHBlciBpdGVyYXRpb24uXG4gICAqIEByZXR1cm5zIHsqfSBUaGUgYWNjdW11bGF0ZWQgcmVzdWx0LlxuICAgKi9cbiAgZnVuY3Rpb24gcmVkdWNlKGFycmF5LCBjYWxsYmFjaykge1xuICAgIHZhciBhY2N1bXVsYXRvciA9IG51bGw7XG4gICAgZWFjaChhcnJheSwgZnVuY3Rpb24odmFsdWUsIGluZGV4KSB7XG4gICAgICBhY2N1bXVsYXRvciA9IGNhbGxiYWNrKGFjY3VtdWxhdG9yLCB2YWx1ZSwgaW5kZXgsIGFycmF5KTtcbiAgICB9KTtcbiAgICByZXR1cm4gYWNjdW11bGF0b3I7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlcyBsZWFkaW5nIGFuZCB0cmFpbGluZyB3aGl0ZXNwYWNlIGZyb20gYSBzdHJpbmcuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmcgVGhlIHN0cmluZyB0byB0cmltLlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgdHJpbW1lZCBzdHJpbmcuXG4gICAqL1xuICBmdW5jdGlvbiB0cmltKHN0cmluZykge1xuICAgIHJldHVybiBTdHJpbmcoc3RyaW5nKS5yZXBsYWNlKC9eICt8ICskL2csICcnKTtcbiAgfVxuXG4gIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IHBsYXRmb3JtIG9iamVjdC5cbiAgICpcbiAgICogQG1lbWJlck9mIHBsYXRmb3JtXG4gICAqIEBwYXJhbSB7T2JqZWN0fHN0cmluZ30gW3VhPW5hdmlnYXRvci51c2VyQWdlbnRdIFRoZSB1c2VyIGFnZW50IHN0cmluZyBvclxuICAgKiAgY29udGV4dCBvYmplY3QuXG4gICAqIEByZXR1cm5zIHtPYmplY3R9IEEgcGxhdGZvcm0gb2JqZWN0LlxuICAgKi9cbiAgZnVuY3Rpb24gcGFyc2UodWEpIHtcblxuICAgIC8qKiBUaGUgZW52aXJvbm1lbnQgY29udGV4dCBvYmplY3QuICovXG4gICAgdmFyIGNvbnRleHQgPSByb290O1xuXG4gICAgLyoqIFVzZWQgdG8gZmxhZyB3aGVuIGEgY3VzdG9tIGNvbnRleHQgaXMgcHJvdmlkZWQuICovXG4gICAgdmFyIGlzQ3VzdG9tQ29udGV4dCA9IHVhICYmIHR5cGVvZiB1YSA9PSAnb2JqZWN0JyAmJiBnZXRDbGFzc09mKHVhKSAhPSAnU3RyaW5nJztcblxuICAgIC8vIEp1Z2dsZSBhcmd1bWVudHMuXG4gICAgaWYgKGlzQ3VzdG9tQ29udGV4dCkge1xuICAgICAgY29udGV4dCA9IHVhO1xuICAgICAgdWEgPSBudWxsO1xuICAgIH1cblxuICAgIC8qKiBCcm93c2VyIG5hdmlnYXRvciBvYmplY3QuICovXG4gICAgdmFyIG5hdiA9IGNvbnRleHQubmF2aWdhdG9yIHx8IHt9O1xuXG4gICAgLyoqIEJyb3dzZXIgdXNlciBhZ2VudCBzdHJpbmcuICovXG4gICAgdmFyIHVzZXJBZ2VudCA9IG5hdi51c2VyQWdlbnQgfHwgJyc7XG5cbiAgICB1YSB8fCAodWEgPSB1c2VyQWdlbnQpO1xuXG4gICAgLyoqIFVzZWQgdG8gZmxhZyB3aGVuIGB0aGlzQmluZGluZ2AgaXMgdGhlIFtNb2R1bGVTY29wZV0uICovXG4gICAgdmFyIGlzTW9kdWxlU2NvcGUgPSBpc0N1c3RvbUNvbnRleHQgfHwgdGhpc0JpbmRpbmcgPT0gb2xkUm9vdDtcblxuICAgIC8qKiBVc2VkIHRvIGRldGVjdCBpZiBicm93c2VyIGlzIGxpa2UgQ2hyb21lLiAqL1xuICAgIHZhciBsaWtlQ2hyb21lID0gaXNDdXN0b21Db250ZXh0XG4gICAgICA/ICEhbmF2Lmxpa2VDaHJvbWVcbiAgICAgIDogL1xcYkNocm9tZVxcYi8udGVzdCh1YSkgJiYgIS9pbnRlcm5hbHxcXG4vaS50ZXN0KHRvU3RyaW5nLnRvU3RyaW5nKCkpO1xuXG4gICAgLyoqIEludGVybmFsIGBbW0NsYXNzXV1gIHZhbHVlIHNob3J0Y3V0cy4gKi9cbiAgICB2YXIgb2JqZWN0Q2xhc3MgPSAnT2JqZWN0JyxcbiAgICAgICAgYWlyUnVudGltZUNsYXNzID0gaXNDdXN0b21Db250ZXh0ID8gb2JqZWN0Q2xhc3MgOiAnU2NyaXB0QnJpZGdpbmdQcm94eU9iamVjdCcsXG4gICAgICAgIGVudmlyb0NsYXNzID0gaXNDdXN0b21Db250ZXh0ID8gb2JqZWN0Q2xhc3MgOiAnRW52aXJvbm1lbnQnLFxuICAgICAgICBqYXZhQ2xhc3MgPSAoaXNDdXN0b21Db250ZXh0ICYmIGNvbnRleHQuamF2YSkgPyAnSmF2YVBhY2thZ2UnIDogZ2V0Q2xhc3NPZihjb250ZXh0LmphdmEpLFxuICAgICAgICBwaGFudG9tQ2xhc3MgPSBpc0N1c3RvbUNvbnRleHQgPyBvYmplY3RDbGFzcyA6ICdSdW50aW1lT2JqZWN0JztcblxuICAgIC8qKiBEZXRlY3QgSmF2YSBlbnZpcm9ubWVudHMuICovXG4gICAgdmFyIGphdmEgPSAvXFxiSmF2YS8udGVzdChqYXZhQ2xhc3MpICYmIGNvbnRleHQuamF2YTtcblxuICAgIC8qKiBEZXRlY3QgUmhpbm8uICovXG4gICAgdmFyIHJoaW5vID0gamF2YSAmJiBnZXRDbGFzc09mKGNvbnRleHQuZW52aXJvbm1lbnQpID09IGVudmlyb0NsYXNzO1xuXG4gICAgLyoqIEEgY2hhcmFjdGVyIHRvIHJlcHJlc2VudCBhbHBoYS4gKi9cbiAgICB2YXIgYWxwaGEgPSBqYXZhID8gJ2EnIDogJ1xcdTAzYjEnO1xuXG4gICAgLyoqIEEgY2hhcmFjdGVyIHRvIHJlcHJlc2VudCBiZXRhLiAqL1xuICAgIHZhciBiZXRhID0gamF2YSA/ICdiJyA6ICdcXHUwM2IyJztcblxuICAgIC8qKiBCcm93c2VyIGRvY3VtZW50IG9iamVjdC4gKi9cbiAgICB2YXIgZG9jID0gY29udGV4dC5kb2N1bWVudCB8fCB7fTtcblxuICAgIC8qKlxuICAgICAqIERldGVjdCBPcGVyYSBicm93c2VyIChQcmVzdG8tYmFzZWQpLlxuICAgICAqIGh0dHA6Ly93d3cuaG93dG9jcmVhdGUuY28udWsvb3BlcmFTdHVmZi9vcGVyYU9iamVjdC5odG1sXG4gICAgICogaHR0cDovL2Rldi5vcGVyYS5jb20vYXJ0aWNsZXMvdmlldy9vcGVyYS1taW5pLXdlYi1jb250ZW50LWF1dGhvcmluZy1ndWlkZWxpbmVzLyNvcGVyYW1pbmlcbiAgICAgKi9cbiAgICB2YXIgb3BlcmEgPSBjb250ZXh0Lm9wZXJhbWluaSB8fCBjb250ZXh0Lm9wZXJhO1xuXG4gICAgLyoqIE9wZXJhIGBbW0NsYXNzXV1gLiAqL1xuICAgIHZhciBvcGVyYUNsYXNzID0gcmVPcGVyYS50ZXN0KG9wZXJhQ2xhc3MgPSAoaXNDdXN0b21Db250ZXh0ICYmIG9wZXJhKSA/IG9wZXJhWydbW0NsYXNzXV0nXSA6IGdldENsYXNzT2Yob3BlcmEpKVxuICAgICAgPyBvcGVyYUNsYXNzXG4gICAgICA6IChvcGVyYSA9IG51bGwpO1xuXG4gICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgLyoqIFRlbXBvcmFyeSB2YXJpYWJsZSB1c2VkIG92ZXIgdGhlIHNjcmlwdCdzIGxpZmV0aW1lLiAqL1xuICAgIHZhciBkYXRhO1xuXG4gICAgLyoqIFRoZSBDUFUgYXJjaGl0ZWN0dXJlLiAqL1xuICAgIHZhciBhcmNoID0gdWE7XG5cbiAgICAvKiogUGxhdGZvcm0gZGVzY3JpcHRpb24gYXJyYXkuICovXG4gICAgdmFyIGRlc2NyaXB0aW9uID0gW107XG5cbiAgICAvKiogUGxhdGZvcm0gYWxwaGEvYmV0YSBpbmRpY2F0b3IuICovXG4gICAgdmFyIHByZXJlbGVhc2UgPSBudWxsO1xuXG4gICAgLyoqIEEgZmxhZyB0byBpbmRpY2F0ZSB0aGF0IGVudmlyb25tZW50IGZlYXR1cmVzIHNob3VsZCBiZSB1c2VkIHRvIHJlc29sdmUgdGhlIHBsYXRmb3JtLiAqL1xuICAgIHZhciB1c2VGZWF0dXJlcyA9IHVhID09IHVzZXJBZ2VudDtcblxuICAgIC8qKiBUaGUgYnJvd3Nlci9lbnZpcm9ubWVudCB2ZXJzaW9uLiAqL1xuICAgIHZhciB2ZXJzaW9uID0gdXNlRmVhdHVyZXMgJiYgb3BlcmEgJiYgdHlwZW9mIG9wZXJhLnZlcnNpb24gPT0gJ2Z1bmN0aW9uJyAmJiBvcGVyYS52ZXJzaW9uKCk7XG5cbiAgICAvKiogQSBmbGFnIHRvIGluZGljYXRlIGlmIHRoZSBPUyBlbmRzIHdpdGggXCIvIFZlcnNpb25cIiAqL1xuICAgIHZhciBpc1NwZWNpYWxDYXNlZE9TO1xuXG4gICAgLyogRGV0ZWN0YWJsZSBsYXlvdXQgZW5naW5lcyAob3JkZXIgaXMgaW1wb3J0YW50KS4gKi9cbiAgICB2YXIgbGF5b3V0ID0gZ2V0TGF5b3V0KFtcbiAgICAgIHsgJ2xhYmVsJzogJ0VkZ2VIVE1MJywgJ3BhdHRlcm4nOiAnRWRnZScgfSxcbiAgICAgICdUcmlkZW50JyxcbiAgICAgIHsgJ2xhYmVsJzogJ1dlYktpdCcsICdwYXR0ZXJuJzogJ0FwcGxlV2ViS2l0JyB9LFxuICAgICAgJ2lDYWInLFxuICAgICAgJ1ByZXN0bycsXG4gICAgICAnTmV0RnJvbnQnLFxuICAgICAgJ1Rhc21hbicsXG4gICAgICAnS0hUTUwnLFxuICAgICAgJ0dlY2tvJ1xuICAgIF0pO1xuXG4gICAgLyogRGV0ZWN0YWJsZSBicm93c2VyIG5hbWVzIChvcmRlciBpcyBpbXBvcnRhbnQpLiAqL1xuICAgIHZhciBuYW1lID0gZ2V0TmFtZShbXG4gICAgICAnQWRvYmUgQUlSJyxcbiAgICAgICdBcm9yYScsXG4gICAgICAnQXZhbnQgQnJvd3NlcicsXG4gICAgICAnQnJlYWNoJyxcbiAgICAgICdDYW1pbm8nLFxuICAgICAgJ0VsZWN0cm9uJyxcbiAgICAgICdFcGlwaGFueScsXG4gICAgICAnRmVubmVjJyxcbiAgICAgICdGbG9jaycsXG4gICAgICAnR2FsZW9uJyxcbiAgICAgICdHcmVlbkJyb3dzZXInLFxuICAgICAgJ2lDYWInLFxuICAgICAgJ0ljZXdlYXNlbCcsXG4gICAgICAnSy1NZWxlb24nLFxuICAgICAgJ0tvbnF1ZXJvcicsXG4gICAgICAnTHVuYXNjYXBlJyxcbiAgICAgICdNYXh0aG9uJyxcbiAgICAgIHsgJ2xhYmVsJzogJ01pY3Jvc29mdCBFZGdlJywgJ3BhdHRlcm4nOiAnRWRnZScgfSxcbiAgICAgICdNaWRvcmknLFxuICAgICAgJ05vb2sgQnJvd3NlcicsXG4gICAgICAnUGFsZU1vb24nLFxuICAgICAgJ1BoYW50b21KUycsXG4gICAgICAnUmF2ZW4nLFxuICAgICAgJ1Jla29ucScsXG4gICAgICAnUm9ja01lbHQnLFxuICAgICAgeyAnbGFiZWwnOiAnU2Ftc3VuZyBJbnRlcm5ldCcsICdwYXR0ZXJuJzogJ1NhbXN1bmdCcm93c2VyJyB9LFxuICAgICAgJ1NlYU1vbmtleScsXG4gICAgICB7ICdsYWJlbCc6ICdTaWxrJywgJ3BhdHRlcm4nOiAnKD86Q2xvdWQ5fFNpbGstQWNjZWxlcmF0ZWQpJyB9LFxuICAgICAgJ1NsZWlwbmlyJyxcbiAgICAgICdTbGltQnJvd3NlcicsXG4gICAgICB7ICdsYWJlbCc6ICdTUldhcmUgSXJvbicsICdwYXR0ZXJuJzogJ0lyb24nIH0sXG4gICAgICAnU3VucmlzZScsXG4gICAgICAnU3dpZnRmb3gnLFxuICAgICAgJ1dhdGVyZm94JyxcbiAgICAgICdXZWJQb3NpdGl2ZScsXG4gICAgICAnT3BlcmEgTWluaScsXG4gICAgICB7ICdsYWJlbCc6ICdPcGVyYSBNaW5pJywgJ3BhdHRlcm4nOiAnT1BpT1MnIH0sXG4gICAgICAnT3BlcmEnLFxuICAgICAgeyAnbGFiZWwnOiAnT3BlcmEnLCAncGF0dGVybic6ICdPUFInIH0sXG4gICAgICAnQ2hyb21lJyxcbiAgICAgIHsgJ2xhYmVsJzogJ0Nocm9tZSBNb2JpbGUnLCAncGF0dGVybic6ICcoPzpDcmlPU3xDck1vKScgfSxcbiAgICAgIHsgJ2xhYmVsJzogJ0ZpcmVmb3gnLCAncGF0dGVybic6ICcoPzpGaXJlZm94fE1pbmVmaWVsZCknIH0sXG4gICAgICB7ICdsYWJlbCc6ICdGaXJlZm94IGZvciBpT1MnLCAncGF0dGVybic6ICdGeGlPUycgfSxcbiAgICAgIHsgJ2xhYmVsJzogJ0lFJywgJ3BhdHRlcm4nOiAnSUVNb2JpbGUnIH0sXG4gICAgICB7ICdsYWJlbCc6ICdJRScsICdwYXR0ZXJuJzogJ01TSUUnIH0sXG4gICAgICAnU2FmYXJpJ1xuICAgIF0pO1xuXG4gICAgLyogRGV0ZWN0YWJsZSBwcm9kdWN0cyAob3JkZXIgaXMgaW1wb3J0YW50KS4gKi9cbiAgICB2YXIgcHJvZHVjdCA9IGdldFByb2R1Y3QoW1xuICAgICAgeyAnbGFiZWwnOiAnQmxhY2tCZXJyeScsICdwYXR0ZXJuJzogJ0JCMTAnIH0sXG4gICAgICAnQmxhY2tCZXJyeScsXG4gICAgICB7ICdsYWJlbCc6ICdHYWxheHkgUycsICdwYXR0ZXJuJzogJ0dULUk5MDAwJyB9LFxuICAgICAgeyAnbGFiZWwnOiAnR2FsYXh5IFMyJywgJ3BhdHRlcm4nOiAnR1QtSTkxMDAnIH0sXG4gICAgICB7ICdsYWJlbCc6ICdHYWxheHkgUzMnLCAncGF0dGVybic6ICdHVC1JOTMwMCcgfSxcbiAgICAgIHsgJ2xhYmVsJzogJ0dhbGF4eSBTNCcsICdwYXR0ZXJuJzogJ0dULUk5NTAwJyB9LFxuICAgICAgeyAnbGFiZWwnOiAnR2FsYXh5IFM1JywgJ3BhdHRlcm4nOiAnU00tRzkwMCcgfSxcbiAgICAgIHsgJ2xhYmVsJzogJ0dhbGF4eSBTNicsICdwYXR0ZXJuJzogJ1NNLUc5MjAnIH0sXG4gICAgICB7ICdsYWJlbCc6ICdHYWxheHkgUzYgRWRnZScsICdwYXR0ZXJuJzogJ1NNLUc5MjUnIH0sXG4gICAgICB7ICdsYWJlbCc6ICdHYWxheHkgUzcnLCAncGF0dGVybic6ICdTTS1HOTMwJyB9LFxuICAgICAgeyAnbGFiZWwnOiAnR2FsYXh5IFM3IEVkZ2UnLCAncGF0dGVybic6ICdTTS1HOTM1JyB9LFxuICAgICAgJ0dvb2dsZSBUVicsXG4gICAgICAnTHVtaWEnLFxuICAgICAgJ2lQYWQnLFxuICAgICAgJ2lQb2QnLFxuICAgICAgJ2lQaG9uZScsXG4gICAgICAnS2luZGxlJyxcbiAgICAgIHsgJ2xhYmVsJzogJ0tpbmRsZSBGaXJlJywgJ3BhdHRlcm4nOiAnKD86Q2xvdWQ5fFNpbGstQWNjZWxlcmF0ZWQpJyB9LFxuICAgICAgJ05leHVzJyxcbiAgICAgICdOb29rJyxcbiAgICAgICdQbGF5Qm9vaycsXG4gICAgICAnUGxheVN0YXRpb24gVml0YScsXG4gICAgICAnUGxheVN0YXRpb24nLFxuICAgICAgJ1RvdWNoUGFkJyxcbiAgICAgICdUcmFuc2Zvcm1lcicsXG4gICAgICB7ICdsYWJlbCc6ICdXaWkgVScsICdwYXR0ZXJuJzogJ1dpaVUnIH0sXG4gICAgICAnV2lpJyxcbiAgICAgICdYYm94IE9uZScsXG4gICAgICB7ICdsYWJlbCc6ICdYYm94IDM2MCcsICdwYXR0ZXJuJzogJ1hib3gnIH0sXG4gICAgICAnWG9vbSdcbiAgICBdKTtcblxuICAgIC8qIERldGVjdGFibGUgbWFudWZhY3R1cmVycy4gKi9cbiAgICB2YXIgbWFudWZhY3R1cmVyID0gZ2V0TWFudWZhY3R1cmVyKHtcbiAgICAgICdBcHBsZSc6IHsgJ2lQYWQnOiAxLCAnaVBob25lJzogMSwgJ2lQb2QnOiAxIH0sXG4gICAgICAnQXJjaG9zJzoge30sXG4gICAgICAnQW1hem9uJzogeyAnS2luZGxlJzogMSwgJ0tpbmRsZSBGaXJlJzogMSB9LFxuICAgICAgJ0FzdXMnOiB7ICdUcmFuc2Zvcm1lcic6IDEgfSxcbiAgICAgICdCYXJuZXMgJiBOb2JsZSc6IHsgJ05vb2snOiAxIH0sXG4gICAgICAnQmxhY2tCZXJyeSc6IHsgJ1BsYXlCb29rJzogMSB9LFxuICAgICAgJ0dvb2dsZSc6IHsgJ0dvb2dsZSBUVic6IDEsICdOZXh1cyc6IDEgfSxcbiAgICAgICdIUCc6IHsgJ1RvdWNoUGFkJzogMSB9LFxuICAgICAgJ0hUQyc6IHt9LFxuICAgICAgJ0xHJzoge30sXG4gICAgICAnTWljcm9zb2Z0JzogeyAnWGJveCc6IDEsICdYYm94IE9uZSc6IDEgfSxcbiAgICAgICdNb3Rvcm9sYSc6IHsgJ1hvb20nOiAxIH0sXG4gICAgICAnTmludGVuZG8nOiB7ICdXaWkgVSc6IDEsICAnV2lpJzogMSB9LFxuICAgICAgJ05va2lhJzogeyAnTHVtaWEnOiAxIH0sXG4gICAgICAnU2Ftc3VuZyc6IHsgJ0dhbGF4eSBTJzogMSwgJ0dhbGF4eSBTMic6IDEsICdHYWxheHkgUzMnOiAxLCAnR2FsYXh5IFM0JzogMSB9LFxuICAgICAgJ1NvbnknOiB7ICdQbGF5U3RhdGlvbic6IDEsICdQbGF5U3RhdGlvbiBWaXRhJzogMSB9XG4gICAgfSk7XG5cbiAgICAvKiBEZXRlY3RhYmxlIG9wZXJhdGluZyBzeXN0ZW1zIChvcmRlciBpcyBpbXBvcnRhbnQpLiAqL1xuICAgIHZhciBvcyA9IGdldE9TKFtcbiAgICAgICdXaW5kb3dzIFBob25lJyxcbiAgICAgICdBbmRyb2lkJyxcbiAgICAgICdDZW50T1MnLFxuICAgICAgeyAnbGFiZWwnOiAnQ2hyb21lIE9TJywgJ3BhdHRlcm4nOiAnQ3JPUycgfSxcbiAgICAgICdEZWJpYW4nLFxuICAgICAgJ0ZlZG9yYScsXG4gICAgICAnRnJlZUJTRCcsXG4gICAgICAnR2VudG9vJyxcbiAgICAgICdIYWlrdScsXG4gICAgICAnS3VidW50dScsXG4gICAgICAnTGludXggTWludCcsXG4gICAgICAnT3BlbkJTRCcsXG4gICAgICAnUmVkIEhhdCcsXG4gICAgICAnU3VTRScsXG4gICAgICAnVWJ1bnR1JyxcbiAgICAgICdYdWJ1bnR1JyxcbiAgICAgICdDeWd3aW4nLFxuICAgICAgJ1N5bWJpYW4gT1MnLFxuICAgICAgJ2hwd09TJyxcbiAgICAgICd3ZWJPUyAnLFxuICAgICAgJ3dlYk9TJyxcbiAgICAgICdUYWJsZXQgT1MnLFxuICAgICAgJ1RpemVuJyxcbiAgICAgICdMaW51eCcsXG4gICAgICAnTWFjIE9TIFgnLFxuICAgICAgJ01hY2ludG9zaCcsXG4gICAgICAnTWFjJyxcbiAgICAgICdXaW5kb3dzIDk4OycsXG4gICAgICAnV2luZG93cyAnXG4gICAgXSk7XG5cbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgICAvKipcbiAgICAgKiBQaWNrcyB0aGUgbGF5b3V0IGVuZ2luZSBmcm9tIGFuIGFycmF5IG9mIGd1ZXNzZXMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGd1ZXNzZXMgQW4gYXJyYXkgb2YgZ3Vlc3Nlcy5cbiAgICAgKiBAcmV0dXJucyB7bnVsbHxzdHJpbmd9IFRoZSBkZXRlY3RlZCBsYXlvdXQgZW5naW5lLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldExheW91dChndWVzc2VzKSB7XG4gICAgICByZXR1cm4gcmVkdWNlKGd1ZXNzZXMsIGZ1bmN0aW9uKHJlc3VsdCwgZ3Vlc3MpIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdCB8fCBSZWdFeHAoJ1xcXFxiJyArIChcbiAgICAgICAgICBndWVzcy5wYXR0ZXJuIHx8IHF1YWxpZnkoZ3Vlc3MpXG4gICAgICAgICkgKyAnXFxcXGInLCAnaScpLmV4ZWModWEpICYmIChndWVzcy5sYWJlbCB8fCBndWVzcyk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQaWNrcyB0aGUgbWFudWZhY3R1cmVyIGZyb20gYW4gYXJyYXkgb2YgZ3Vlc3Nlcy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheX0gZ3Vlc3NlcyBBbiBvYmplY3Qgb2YgZ3Vlc3Nlcy5cbiAgICAgKiBAcmV0dXJucyB7bnVsbHxzdHJpbmd9IFRoZSBkZXRlY3RlZCBtYW51ZmFjdHVyZXIuXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0TWFudWZhY3R1cmVyKGd1ZXNzZXMpIHtcbiAgICAgIHJldHVybiByZWR1Y2UoZ3Vlc3NlcywgZnVuY3Rpb24ocmVzdWx0LCB2YWx1ZSwga2V5KSB7XG4gICAgICAgIC8vIExvb2t1cCB0aGUgbWFudWZhY3R1cmVyIGJ5IHByb2R1Y3Qgb3Igc2NhbiB0aGUgVUEgZm9yIHRoZSBtYW51ZmFjdHVyZXIuXG4gICAgICAgIHJldHVybiByZXN1bHQgfHwgKFxuICAgICAgICAgIHZhbHVlW3Byb2R1Y3RdIHx8XG4gICAgICAgICAgdmFsdWVbL15bYS16XSsoPzogK1thLXpdK1xcYikqL2kuZXhlYyhwcm9kdWN0KV0gfHxcbiAgICAgICAgICBSZWdFeHAoJ1xcXFxiJyArIHF1YWxpZnkoa2V5KSArICcoPzpcXFxcYnxcXFxcdypcXFxcZCknLCAnaScpLmV4ZWModWEpXG4gICAgICAgICkgJiYga2V5O1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGlja3MgdGhlIGJyb3dzZXIgbmFtZSBmcm9tIGFuIGFycmF5IG9mIGd1ZXNzZXMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGd1ZXNzZXMgQW4gYXJyYXkgb2YgZ3Vlc3Nlcy5cbiAgICAgKiBAcmV0dXJucyB7bnVsbHxzdHJpbmd9IFRoZSBkZXRlY3RlZCBicm93c2VyIG5hbWUuXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0TmFtZShndWVzc2VzKSB7XG4gICAgICByZXR1cm4gcmVkdWNlKGd1ZXNzZXMsIGZ1bmN0aW9uKHJlc3VsdCwgZ3Vlc3MpIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdCB8fCBSZWdFeHAoJ1xcXFxiJyArIChcbiAgICAgICAgICBndWVzcy5wYXR0ZXJuIHx8IHF1YWxpZnkoZ3Vlc3MpXG4gICAgICAgICkgKyAnXFxcXGInLCAnaScpLmV4ZWModWEpICYmIChndWVzcy5sYWJlbCB8fCBndWVzcyk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQaWNrcyB0aGUgT1MgbmFtZSBmcm9tIGFuIGFycmF5IG9mIGd1ZXNzZXMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGd1ZXNzZXMgQW4gYXJyYXkgb2YgZ3Vlc3Nlcy5cbiAgICAgKiBAcmV0dXJucyB7bnVsbHxzdHJpbmd9IFRoZSBkZXRlY3RlZCBPUyBuYW1lLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldE9TKGd1ZXNzZXMpIHtcbiAgICAgIHJldHVybiByZWR1Y2UoZ3Vlc3NlcywgZnVuY3Rpb24ocmVzdWx0LCBndWVzcykge1xuICAgICAgICB2YXIgcGF0dGVybiA9IGd1ZXNzLnBhdHRlcm4gfHwgcXVhbGlmeShndWVzcyk7XG4gICAgICAgIGlmICghcmVzdWx0ICYmIChyZXN1bHQgPVxuICAgICAgICAgICAgICBSZWdFeHAoJ1xcXFxiJyArIHBhdHRlcm4gKyAnKD86L1tcXFxcZC5dK3xbIFxcXFx3Ll0qKScsICdpJykuZXhlYyh1YSlcbiAgICAgICAgICAgICkpIHtcbiAgICAgICAgICByZXN1bHQgPSBjbGVhbnVwT1MocmVzdWx0LCBwYXR0ZXJuLCBndWVzcy5sYWJlbCB8fCBndWVzcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBpY2tzIHRoZSBwcm9kdWN0IG5hbWUgZnJvbSBhbiBhcnJheSBvZiBndWVzc2VzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBndWVzc2VzIEFuIGFycmF5IG9mIGd1ZXNzZXMuXG4gICAgICogQHJldHVybnMge251bGx8c3RyaW5nfSBUaGUgZGV0ZWN0ZWQgcHJvZHVjdCBuYW1lLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldFByb2R1Y3QoZ3Vlc3Nlcykge1xuICAgICAgcmV0dXJuIHJlZHVjZShndWVzc2VzLCBmdW5jdGlvbihyZXN1bHQsIGd1ZXNzKSB7XG4gICAgICAgIHZhciBwYXR0ZXJuID0gZ3Vlc3MucGF0dGVybiB8fCBxdWFsaWZ5KGd1ZXNzKTtcbiAgICAgICAgaWYgKCFyZXN1bHQgJiYgKHJlc3VsdCA9XG4gICAgICAgICAgICAgIFJlZ0V4cCgnXFxcXGInICsgcGF0dGVybiArICcgKlxcXFxkK1suXFxcXHdfXSonLCAnaScpLmV4ZWModWEpIHx8XG4gICAgICAgICAgICAgIFJlZ0V4cCgnXFxcXGInICsgcGF0dGVybiArICcgKlxcXFx3Ky1bXFxcXHddKicsICdpJykuZXhlYyh1YSkgfHxcbiAgICAgICAgICAgICAgUmVnRXhwKCdcXFxcYicgKyBwYXR0ZXJuICsgJyg/OjsgKig/OlthLXpdK1tfLV0pP1thLXpdK1xcXFxkK3xbXiAoKTstXSopJywgJ2knKS5leGVjKHVhKVxuICAgICAgICAgICAgKSkge1xuICAgICAgICAgIC8vIFNwbGl0IGJ5IGZvcndhcmQgc2xhc2ggYW5kIGFwcGVuZCBwcm9kdWN0IHZlcnNpb24gaWYgbmVlZGVkLlxuICAgICAgICAgIGlmICgocmVzdWx0ID0gU3RyaW5nKChndWVzcy5sYWJlbCAmJiAhUmVnRXhwKHBhdHRlcm4sICdpJykudGVzdChndWVzcy5sYWJlbCkpID8gZ3Vlc3MubGFiZWwgOiByZXN1bHQpLnNwbGl0KCcvJykpWzFdICYmICEvW1xcZC5dKy8udGVzdChyZXN1bHRbMF0pKSB7XG4gICAgICAgICAgICByZXN1bHRbMF0gKz0gJyAnICsgcmVzdWx0WzFdO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBDb3JyZWN0IGNoYXJhY3RlciBjYXNlIGFuZCBjbGVhbnVwIHN0cmluZy5cbiAgICAgICAgICBndWVzcyA9IGd1ZXNzLmxhYmVsIHx8IGd1ZXNzO1xuICAgICAgICAgIHJlc3VsdCA9IGZvcm1hdChyZXN1bHRbMF1cbiAgICAgICAgICAgIC5yZXBsYWNlKFJlZ0V4cChwYXR0ZXJuLCAnaScpLCBndWVzcylcbiAgICAgICAgICAgIC5yZXBsYWNlKFJlZ0V4cCgnOyAqKD86JyArIGd1ZXNzICsgJ1tfLV0pPycsICdpJyksICcgJylcbiAgICAgICAgICAgIC5yZXBsYWNlKFJlZ0V4cCgnKCcgKyBndWVzcyArICcpWy1fLl0/KFxcXFx3KScsICdpJyksICckMSAkMicpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVzb2x2ZXMgdGhlIHZlcnNpb24gdXNpbmcgYW4gYXJyYXkgb2YgVUEgcGF0dGVybnMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHBhdHRlcm5zIEFuIGFycmF5IG9mIFVBIHBhdHRlcm5zLlxuICAgICAqIEByZXR1cm5zIHtudWxsfHN0cmluZ30gVGhlIGRldGVjdGVkIHZlcnNpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0VmVyc2lvbihwYXR0ZXJucykge1xuICAgICAgcmV0dXJuIHJlZHVjZShwYXR0ZXJucywgZnVuY3Rpb24ocmVzdWx0LCBwYXR0ZXJuKSB7XG4gICAgICAgIHJldHVybiByZXN1bHQgfHwgKFJlZ0V4cChwYXR0ZXJuICtcbiAgICAgICAgICAnKD86LVtcXFxcZC5dKy98KD86IGZvciBbXFxcXHctXSspP1sgLy1dKShbXFxcXGQuXStbXiAoKTsvXy1dKiknLCAnaScpLmV4ZWModWEpIHx8IDApWzFdIHx8IG51bGw7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGBwbGF0Zm9ybS5kZXNjcmlwdGlvbmAgd2hlbiB0aGUgcGxhdGZvcm0gb2JqZWN0IGlzIGNvZXJjZWQgdG8gYSBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBAbmFtZSB0b1N0cmluZ1xuICAgICAqIEBtZW1iZXJPZiBwbGF0Zm9ybVxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgYHBsYXRmb3JtLmRlc2NyaXB0aW9uYCBpZiBhdmFpbGFibGUsIGVsc2UgYW4gZW1wdHkgc3RyaW5nLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHRvU3RyaW5nUGxhdGZvcm0oKSB7XG4gICAgICByZXR1cm4gdGhpcy5kZXNjcmlwdGlvbiB8fCAnJztcbiAgICB9XG5cbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgICAvLyBDb252ZXJ0IGxheW91dCB0byBhbiBhcnJheSBzbyB3ZSBjYW4gYWRkIGV4dHJhIGRldGFpbHMuXG4gICAgbGF5b3V0ICYmIChsYXlvdXQgPSBbbGF5b3V0XSk7XG5cbiAgICAvLyBEZXRlY3QgcHJvZHVjdCBuYW1lcyB0aGF0IGNvbnRhaW4gdGhlaXIgbWFudWZhY3R1cmVyJ3MgbmFtZS5cbiAgICBpZiAobWFudWZhY3R1cmVyICYmICFwcm9kdWN0KSB7XG4gICAgICBwcm9kdWN0ID0gZ2V0UHJvZHVjdChbbWFudWZhY3R1cmVyXSk7XG4gICAgfVxuICAgIC8vIENsZWFuIHVwIEdvb2dsZSBUVi5cbiAgICBpZiAoKGRhdGEgPSAvXFxiR29vZ2xlIFRWXFxiLy5leGVjKHByb2R1Y3QpKSkge1xuICAgICAgcHJvZHVjdCA9IGRhdGFbMF07XG4gICAgfVxuICAgIC8vIERldGVjdCBzaW11bGF0b3JzLlxuICAgIGlmICgvXFxiU2ltdWxhdG9yXFxiL2kudGVzdCh1YSkpIHtcbiAgICAgIHByb2R1Y3QgPSAocHJvZHVjdCA/IHByb2R1Y3QgKyAnICcgOiAnJykgKyAnU2ltdWxhdG9yJztcbiAgICB9XG4gICAgLy8gRGV0ZWN0IE9wZXJhIE1pbmkgOCsgcnVubmluZyBpbiBUdXJiby9VbmNvbXByZXNzZWQgbW9kZSBvbiBpT1MuXG4gICAgaWYgKG5hbWUgPT0gJ09wZXJhIE1pbmknICYmIC9cXGJPUGlPU1xcYi8udGVzdCh1YSkpIHtcbiAgICAgIGRlc2NyaXB0aW9uLnB1c2goJ3J1bm5pbmcgaW4gVHVyYm8vVW5jb21wcmVzc2VkIG1vZGUnKTtcbiAgICB9XG4gICAgLy8gRGV0ZWN0IElFIE1vYmlsZSAxMS5cbiAgICBpZiAobmFtZSA9PSAnSUUnICYmIC9cXGJsaWtlIGlQaG9uZSBPU1xcYi8udGVzdCh1YSkpIHtcbiAgICAgIGRhdGEgPSBwYXJzZSh1YS5yZXBsYWNlKC9saWtlIGlQaG9uZSBPUy8sICcnKSk7XG4gICAgICBtYW51ZmFjdHVyZXIgPSBkYXRhLm1hbnVmYWN0dXJlcjtcbiAgICAgIHByb2R1Y3QgPSBkYXRhLnByb2R1Y3Q7XG4gICAgfVxuICAgIC8vIERldGVjdCBpT1MuXG4gICAgZWxzZSBpZiAoL15pUC8udGVzdChwcm9kdWN0KSkge1xuICAgICAgbmFtZSB8fCAobmFtZSA9ICdTYWZhcmknKTtcbiAgICAgIG9zID0gJ2lPUycgKyAoKGRhdGEgPSAvIE9TIChbXFxkX10rKS9pLmV4ZWModWEpKVxuICAgICAgICA/ICcgJyArIGRhdGFbMV0ucmVwbGFjZSgvXy9nLCAnLicpXG4gICAgICAgIDogJycpO1xuICAgIH1cbiAgICAvLyBEZXRlY3QgS3VidW50dS5cbiAgICBlbHNlIGlmIChuYW1lID09ICdLb25xdWVyb3InICYmICEvYnVudHUvaS50ZXN0KG9zKSkge1xuICAgICAgb3MgPSAnS3VidW50dSc7XG4gICAgfVxuICAgIC8vIERldGVjdCBBbmRyb2lkIGJyb3dzZXJzLlxuICAgIGVsc2UgaWYgKChtYW51ZmFjdHVyZXIgJiYgbWFudWZhY3R1cmVyICE9ICdHb29nbGUnICYmXG4gICAgICAgICgoL0Nocm9tZS8udGVzdChuYW1lKSAmJiAhL1xcYk1vYmlsZSBTYWZhcmlcXGIvaS50ZXN0KHVhKSkgfHwgL1xcYlZpdGFcXGIvLnRlc3QocHJvZHVjdCkpKSB8fFxuICAgICAgICAoL1xcYkFuZHJvaWRcXGIvLnRlc3Qob3MpICYmIC9eQ2hyb21lLy50ZXN0KG5hbWUpICYmIC9cXGJWZXJzaW9uXFwvL2kudGVzdCh1YSkpKSB7XG4gICAgICBuYW1lID0gJ0FuZHJvaWQgQnJvd3Nlcic7XG4gICAgICBvcyA9IC9cXGJBbmRyb2lkXFxiLy50ZXN0KG9zKSA/IG9zIDogJ0FuZHJvaWQnO1xuICAgIH1cbiAgICAvLyBEZXRlY3QgU2lsayBkZXNrdG9wL2FjY2VsZXJhdGVkIG1vZGVzLlxuICAgIGVsc2UgaWYgKG5hbWUgPT0gJ1NpbGsnKSB7XG4gICAgICBpZiAoIS9cXGJNb2JpL2kudGVzdCh1YSkpIHtcbiAgICAgICAgb3MgPSAnQW5kcm9pZCc7XG4gICAgICAgIGRlc2NyaXB0aW9uLnVuc2hpZnQoJ2Rlc2t0b3AgbW9kZScpO1xuICAgICAgfVxuICAgICAgaWYgKC9BY2NlbGVyYXRlZCAqPSAqdHJ1ZS9pLnRlc3QodWEpKSB7XG4gICAgICAgIGRlc2NyaXB0aW9uLnVuc2hpZnQoJ2FjY2VsZXJhdGVkJyk7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIERldGVjdCBQYWxlTW9vbiBpZGVudGlmeWluZyBhcyBGaXJlZm94LlxuICAgIGVsc2UgaWYgKG5hbWUgPT0gJ1BhbGVNb29uJyAmJiAoZGF0YSA9IC9cXGJGaXJlZm94XFwvKFtcXGQuXSspXFxiLy5leGVjKHVhKSkpIHtcbiAgICAgIGRlc2NyaXB0aW9uLnB1c2goJ2lkZW50aWZ5aW5nIGFzIEZpcmVmb3ggJyArIGRhdGFbMV0pO1xuICAgIH1cbiAgICAvLyBEZXRlY3QgRmlyZWZveCBPUyBhbmQgcHJvZHVjdHMgcnVubmluZyBGaXJlZm94LlxuICAgIGVsc2UgaWYgKG5hbWUgPT0gJ0ZpcmVmb3gnICYmIChkYXRhID0gL1xcYihNb2JpbGV8VGFibGV0fFRWKVxcYi9pLmV4ZWModWEpKSkge1xuICAgICAgb3MgfHwgKG9zID0gJ0ZpcmVmb3ggT1MnKTtcbiAgICAgIHByb2R1Y3QgfHwgKHByb2R1Y3QgPSBkYXRhWzFdKTtcbiAgICB9XG4gICAgLy8gRGV0ZWN0IGZhbHNlIHBvc2l0aXZlcyBmb3IgRmlyZWZveC9TYWZhcmkuXG4gICAgZWxzZSBpZiAoIW5hbWUgfHwgKGRhdGEgPSAhL1xcYk1pbmVmaWVsZFxcYi9pLnRlc3QodWEpICYmIC9cXGIoPzpGaXJlZm94fFNhZmFyaSlcXGIvLmV4ZWMobmFtZSkpKSB7XG4gICAgICAvLyBFc2NhcGUgdGhlIGAvYCBmb3IgRmlyZWZveCAxLlxuICAgICAgaWYgKG5hbWUgJiYgIXByb2R1Y3QgJiYgL1tcXC8sXXxeW14oXSs/XFwpLy50ZXN0KHVhLnNsaWNlKHVhLmluZGV4T2YoZGF0YSArICcvJykgKyA4KSkpIHtcbiAgICAgICAgLy8gQ2xlYXIgbmFtZSBvZiBmYWxzZSBwb3NpdGl2ZXMuXG4gICAgICAgIG5hbWUgPSBudWxsO1xuICAgICAgfVxuICAgICAgLy8gUmVhc3NpZ24gYSBnZW5lcmljIG5hbWUuXG4gICAgICBpZiAoKGRhdGEgPSBwcm9kdWN0IHx8IG1hbnVmYWN0dXJlciB8fCBvcykgJiZcbiAgICAgICAgICAocHJvZHVjdCB8fCBtYW51ZmFjdHVyZXIgfHwgL1xcYig/OkFuZHJvaWR8U3ltYmlhbiBPU3xUYWJsZXQgT1N8d2ViT1MpXFxiLy50ZXN0KG9zKSkpIHtcbiAgICAgICAgbmFtZSA9IC9bYS16XSsoPzogSGF0KT8vaS5leGVjKC9cXGJBbmRyb2lkXFxiLy50ZXN0KG9zKSA/IG9zIDogZGF0YSkgKyAnIEJyb3dzZXInO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBBZGQgQ2hyb21lIHZlcnNpb24gdG8gZGVzY3JpcHRpb24gZm9yIEVsZWN0cm9uLlxuICAgIGVsc2UgaWYgKG5hbWUgPT0gJ0VsZWN0cm9uJyAmJiAoZGF0YSA9ICgvXFxiQ2hyb21lXFwvKFtcXGQuXSspXFxiLy5leGVjKHVhKSB8fCAwKVsxXSkpIHtcbiAgICAgIGRlc2NyaXB0aW9uLnB1c2goJ0Nocm9taXVtICcgKyBkYXRhKTtcbiAgICB9XG4gICAgLy8gRGV0ZWN0IG5vbi1PcGVyYSAoUHJlc3RvLWJhc2VkKSB2ZXJzaW9ucyAob3JkZXIgaXMgaW1wb3J0YW50KS5cbiAgICBpZiAoIXZlcnNpb24pIHtcbiAgICAgIHZlcnNpb24gPSBnZXRWZXJzaW9uKFtcbiAgICAgICAgJyg/OkNsb3VkOXxDcmlPU3xDck1vfEVkZ2V8RnhpT1N8SUVNb2JpbGV8SXJvbnxPcGVyYSA/TWluaXxPUGlPU3xPUFJ8UmF2ZW58U2Ftc3VuZ0Jyb3dzZXJ8U2lsayg/IS9bXFxcXGQuXSskKSknLFxuICAgICAgICAnVmVyc2lvbicsXG4gICAgICAgIHF1YWxpZnkobmFtZSksXG4gICAgICAgICcoPzpGaXJlZm94fE1pbmVmaWVsZHxOZXRGcm9udCknXG4gICAgICBdKTtcbiAgICB9XG4gICAgLy8gRGV0ZWN0IHN0dWJib3JuIGxheW91dCBlbmdpbmVzLlxuICAgIGlmICgoZGF0YSA9XG4gICAgICAgICAgbGF5b3V0ID09ICdpQ2FiJyAmJiBwYXJzZUZsb2F0KHZlcnNpb24pID4gMyAmJiAnV2ViS2l0JyB8fFxuICAgICAgICAgIC9cXGJPcGVyYVxcYi8udGVzdChuYW1lKSAmJiAoL1xcYk9QUlxcYi8udGVzdCh1YSkgPyAnQmxpbmsnIDogJ1ByZXN0bycpIHx8XG4gICAgICAgICAgL1xcYig/Ok1pZG9yaXxOb29rfFNhZmFyaSlcXGIvaS50ZXN0KHVhKSAmJiAhL14oPzpUcmlkZW50fEVkZ2VIVE1MKSQvLnRlc3QobGF5b3V0KSAmJiAnV2ViS2l0JyB8fFxuICAgICAgICAgICFsYXlvdXQgJiYgL1xcYk1TSUVcXGIvaS50ZXN0KHVhKSAmJiAob3MgPT0gJ01hYyBPUycgPyAnVGFzbWFuJyA6ICdUcmlkZW50JykgfHxcbiAgICAgICAgICBsYXlvdXQgPT0gJ1dlYktpdCcgJiYgL1xcYlBsYXlTdGF0aW9uXFxiKD8hIFZpdGFcXGIpL2kudGVzdChuYW1lKSAmJiAnTmV0RnJvbnQnXG4gICAgICAgICkpIHtcbiAgICAgIGxheW91dCA9IFtkYXRhXTtcbiAgICB9XG4gICAgLy8gRGV0ZWN0IFdpbmRvd3MgUGhvbmUgNyBkZXNrdG9wIG1vZGUuXG4gICAgaWYgKG5hbWUgPT0gJ0lFJyAmJiAoZGF0YSA9ICgvOyAqKD86WEJMV1B8WnVuZVdQKShcXGQrKS9pLmV4ZWModWEpIHx8IDApWzFdKSkge1xuICAgICAgbmFtZSArPSAnIE1vYmlsZSc7XG4gICAgICBvcyA9ICdXaW5kb3dzIFBob25lICcgKyAoL1xcKyQvLnRlc3QoZGF0YSkgPyBkYXRhIDogZGF0YSArICcueCcpO1xuICAgICAgZGVzY3JpcHRpb24udW5zaGlmdCgnZGVza3RvcCBtb2RlJyk7XG4gICAgfVxuICAgIC8vIERldGVjdCBXaW5kb3dzIFBob25lIDgueCBkZXNrdG9wIG1vZGUuXG4gICAgZWxzZSBpZiAoL1xcYldQRGVza3RvcFxcYi9pLnRlc3QodWEpKSB7XG4gICAgICBuYW1lID0gJ0lFIE1vYmlsZSc7XG4gICAgICBvcyA9ICdXaW5kb3dzIFBob25lIDgueCc7XG4gICAgICBkZXNjcmlwdGlvbi51bnNoaWZ0KCdkZXNrdG9wIG1vZGUnKTtcbiAgICAgIHZlcnNpb24gfHwgKHZlcnNpb24gPSAoL1xcYnJ2OihbXFxkLl0rKS8uZXhlYyh1YSkgfHwgMClbMV0pO1xuICAgIH1cbiAgICAvLyBEZXRlY3QgSUUgMTEgaWRlbnRpZnlpbmcgYXMgb3RoZXIgYnJvd3NlcnMuXG4gICAgZWxzZSBpZiAobmFtZSAhPSAnSUUnICYmIGxheW91dCA9PSAnVHJpZGVudCcgJiYgKGRhdGEgPSAvXFxicnY6KFtcXGQuXSspLy5leGVjKHVhKSkpIHtcbiAgICAgIGlmIChuYW1lKSB7XG4gICAgICAgIGRlc2NyaXB0aW9uLnB1c2goJ2lkZW50aWZ5aW5nIGFzICcgKyBuYW1lICsgKHZlcnNpb24gPyAnICcgKyB2ZXJzaW9uIDogJycpKTtcbiAgICAgIH1cbiAgICAgIG5hbWUgPSAnSUUnO1xuICAgICAgdmVyc2lvbiA9IGRhdGFbMV07XG4gICAgfVxuICAgIC8vIExldmVyYWdlIGVudmlyb25tZW50IGZlYXR1cmVzLlxuICAgIGlmICh1c2VGZWF0dXJlcykge1xuICAgICAgLy8gRGV0ZWN0IHNlcnZlci1zaWRlIGVudmlyb25tZW50cy5cbiAgICAgIC8vIFJoaW5vIGhhcyBhIGdsb2JhbCBmdW5jdGlvbiB3aGlsZSBvdGhlcnMgaGF2ZSBhIGdsb2JhbCBvYmplY3QuXG4gICAgICBpZiAoaXNIb3N0VHlwZShjb250ZXh0LCAnZ2xvYmFsJykpIHtcbiAgICAgICAgaWYgKGphdmEpIHtcbiAgICAgICAgICBkYXRhID0gamF2YS5sYW5nLlN5c3RlbTtcbiAgICAgICAgICBhcmNoID0gZGF0YS5nZXRQcm9wZXJ0eSgnb3MuYXJjaCcpO1xuICAgICAgICAgIG9zID0gb3MgfHwgZGF0YS5nZXRQcm9wZXJ0eSgnb3MubmFtZScpICsgJyAnICsgZGF0YS5nZXRQcm9wZXJ0eSgnb3MudmVyc2lvbicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyaGlubykge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2ZXJzaW9uID0gY29udGV4dC5yZXF1aXJlKCdyaW5nby9lbmdpbmUnKS52ZXJzaW9uLmpvaW4oJy4nKTtcbiAgICAgICAgICAgIG5hbWUgPSAnUmluZ29KUyc7XG4gICAgICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgICAgICBpZiAoKGRhdGEgPSBjb250ZXh0LnN5c3RlbSkgJiYgZGF0YS5nbG9iYWwuc3lzdGVtID09IGNvbnRleHQuc3lzdGVtKSB7XG4gICAgICAgICAgICAgIG5hbWUgPSAnTmFyd2hhbCc7XG4gICAgICAgICAgICAgIG9zIHx8IChvcyA9IGRhdGFbMF0ub3MgfHwgbnVsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICghbmFtZSkge1xuICAgICAgICAgICAgbmFtZSA9ICdSaGlubyc7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKFxuICAgICAgICAgIHR5cGVvZiBjb250ZXh0LnByb2Nlc3MgPT0gJ29iamVjdCcgJiYgIWNvbnRleHQucHJvY2Vzcy5icm93c2VyICYmXG4gICAgICAgICAgKGRhdGEgPSBjb250ZXh0LnByb2Nlc3MpXG4gICAgICAgICkge1xuICAgICAgICAgIGlmICh0eXBlb2YgZGF0YS52ZXJzaW9ucyA9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBkYXRhLnZlcnNpb25zLmVsZWN0cm9uID09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uLnB1c2goJ05vZGUgJyArIGRhdGEudmVyc2lvbnMubm9kZSk7XG4gICAgICAgICAgICAgIG5hbWUgPSAnRWxlY3Ryb24nO1xuICAgICAgICAgICAgICB2ZXJzaW9uID0gZGF0YS52ZXJzaW9ucy5lbGVjdHJvbjtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGRhdGEudmVyc2lvbnMubncgPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb24ucHVzaCgnQ2hyb21pdW0gJyArIHZlcnNpb24sICdOb2RlICcgKyBkYXRhLnZlcnNpb25zLm5vZGUpO1xuICAgICAgICAgICAgICBuYW1lID0gJ05XLmpzJztcbiAgICAgICAgICAgICAgdmVyc2lvbiA9IGRhdGEudmVyc2lvbnMubnc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICghbmFtZSkge1xuICAgICAgICAgICAgbmFtZSA9ICdOb2RlLmpzJztcbiAgICAgICAgICAgIGFyY2ggPSBkYXRhLmFyY2g7XG4gICAgICAgICAgICBvcyA9IGRhdGEucGxhdGZvcm07XG4gICAgICAgICAgICB2ZXJzaW9uID0gL1tcXGQuXSsvLmV4ZWMoZGF0YS52ZXJzaW9uKTtcbiAgICAgICAgICAgIHZlcnNpb24gPSB2ZXJzaW9uID8gdmVyc2lvblswXSA6IG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBEZXRlY3QgQWRvYmUgQUlSLlxuICAgICAgZWxzZSBpZiAoZ2V0Q2xhc3NPZigoZGF0YSA9IGNvbnRleHQucnVudGltZSkpID09IGFpclJ1bnRpbWVDbGFzcykge1xuICAgICAgICBuYW1lID0gJ0Fkb2JlIEFJUic7XG4gICAgICAgIG9zID0gZGF0YS5mbGFzaC5zeXN0ZW0uQ2FwYWJpbGl0aWVzLm9zO1xuICAgICAgfVxuICAgICAgLy8gRGV0ZWN0IFBoYW50b21KUy5cbiAgICAgIGVsc2UgaWYgKGdldENsYXNzT2YoKGRhdGEgPSBjb250ZXh0LnBoYW50b20pKSA9PSBwaGFudG9tQ2xhc3MpIHtcbiAgICAgICAgbmFtZSA9ICdQaGFudG9tSlMnO1xuICAgICAgICB2ZXJzaW9uID0gKGRhdGEgPSBkYXRhLnZlcnNpb24gfHwgbnVsbCkgJiYgKGRhdGEubWFqb3IgKyAnLicgKyBkYXRhLm1pbm9yICsgJy4nICsgZGF0YS5wYXRjaCk7XG4gICAgICB9XG4gICAgICAvLyBEZXRlY3QgSUUgY29tcGF0aWJpbGl0eSBtb2Rlcy5cbiAgICAgIGVsc2UgaWYgKHR5cGVvZiBkb2MuZG9jdW1lbnRNb2RlID09ICdudW1iZXInICYmIChkYXRhID0gL1xcYlRyaWRlbnRcXC8oXFxkKykvaS5leGVjKHVhKSkpIHtcbiAgICAgICAgLy8gV2UncmUgaW4gY29tcGF0aWJpbGl0eSBtb2RlIHdoZW4gdGhlIFRyaWRlbnQgdmVyc2lvbiArIDQgZG9lc24ndFxuICAgICAgICAvLyBlcXVhbCB0aGUgZG9jdW1lbnQgbW9kZS5cbiAgICAgICAgdmVyc2lvbiA9IFt2ZXJzaW9uLCBkb2MuZG9jdW1lbnRNb2RlXTtcbiAgICAgICAgaWYgKChkYXRhID0gK2RhdGFbMV0gKyA0KSAhPSB2ZXJzaW9uWzFdKSB7XG4gICAgICAgICAgZGVzY3JpcHRpb24ucHVzaCgnSUUgJyArIHZlcnNpb25bMV0gKyAnIG1vZGUnKTtcbiAgICAgICAgICBsYXlvdXQgJiYgKGxheW91dFsxXSA9ICcnKTtcbiAgICAgICAgICB2ZXJzaW9uWzFdID0gZGF0YTtcbiAgICAgICAgfVxuICAgICAgICB2ZXJzaW9uID0gbmFtZSA9PSAnSUUnID8gU3RyaW5nKHZlcnNpb25bMV0udG9GaXhlZCgxKSkgOiB2ZXJzaW9uWzBdO1xuICAgICAgfVxuICAgICAgLy8gRGV0ZWN0IElFIDExIG1hc2tpbmcgYXMgb3RoZXIgYnJvd3NlcnMuXG4gICAgICBlbHNlIGlmICh0eXBlb2YgZG9jLmRvY3VtZW50TW9kZSA9PSAnbnVtYmVyJyAmJiAvXig/OkNocm9tZXxGaXJlZm94KVxcYi8udGVzdChuYW1lKSkge1xuICAgICAgICBkZXNjcmlwdGlvbi5wdXNoKCdtYXNraW5nIGFzICcgKyBuYW1lICsgJyAnICsgdmVyc2lvbik7XG4gICAgICAgIG5hbWUgPSAnSUUnO1xuICAgICAgICB2ZXJzaW9uID0gJzExLjAnO1xuICAgICAgICBsYXlvdXQgPSBbJ1RyaWRlbnQnXTtcbiAgICAgICAgb3MgPSAnV2luZG93cyc7XG4gICAgICB9XG4gICAgICBvcyA9IG9zICYmIGZvcm1hdChvcyk7XG4gICAgfVxuICAgIC8vIERldGVjdCBwcmVyZWxlYXNlIHBoYXNlcy5cbiAgICBpZiAodmVyc2lvbiAmJiAoZGF0YSA9XG4gICAgICAgICAgLyg/OlthYl18ZHB8cHJlfFthYl1cXGQrcHJlKSg/OlxcZCtcXCs/KT8kL2kuZXhlYyh2ZXJzaW9uKSB8fFxuICAgICAgICAgIC8oPzphbHBoYXxiZXRhKSg/OiA/XFxkKT8vaS5leGVjKHVhICsgJzsnICsgKHVzZUZlYXR1cmVzICYmIG5hdi5hcHBNaW5vclZlcnNpb24pKSB8fFxuICAgICAgICAgIC9cXGJNaW5lZmllbGRcXGIvaS50ZXN0KHVhKSAmJiAnYSdcbiAgICAgICAgKSkge1xuICAgICAgcHJlcmVsZWFzZSA9IC9iL2kudGVzdChkYXRhKSA/ICdiZXRhJyA6ICdhbHBoYSc7XG4gICAgICB2ZXJzaW9uID0gdmVyc2lvbi5yZXBsYWNlKFJlZ0V4cChkYXRhICsgJ1xcXFwrPyQnKSwgJycpICtcbiAgICAgICAgKHByZXJlbGVhc2UgPT0gJ2JldGEnID8gYmV0YSA6IGFscGhhKSArICgvXFxkK1xcKz8vLmV4ZWMoZGF0YSkgfHwgJycpO1xuICAgIH1cbiAgICAvLyBEZXRlY3QgRmlyZWZveCBNb2JpbGUuXG4gICAgaWYgKG5hbWUgPT0gJ0Zlbm5lYycgfHwgbmFtZSA9PSAnRmlyZWZveCcgJiYgL1xcYig/OkFuZHJvaWR8RmlyZWZveCBPUylcXGIvLnRlc3Qob3MpKSB7XG4gICAgICBuYW1lID0gJ0ZpcmVmb3ggTW9iaWxlJztcbiAgICB9XG4gICAgLy8gT2JzY3VyZSBNYXh0aG9uJ3MgdW5yZWxpYWJsZSB2ZXJzaW9uLlxuICAgIGVsc2UgaWYgKG5hbWUgPT0gJ01heHRob24nICYmIHZlcnNpb24pIHtcbiAgICAgIHZlcnNpb24gPSB2ZXJzaW9uLnJlcGxhY2UoL1xcLltcXGQuXSsvLCAnLngnKTtcbiAgICB9XG4gICAgLy8gRGV0ZWN0IFhib3ggMzYwIGFuZCBYYm94IE9uZS5cbiAgICBlbHNlIGlmICgvXFxiWGJveFxcYi9pLnRlc3QocHJvZHVjdCkpIHtcbiAgICAgIGlmIChwcm9kdWN0ID09ICdYYm94IDM2MCcpIHtcbiAgICAgICAgb3MgPSBudWxsO1xuICAgICAgfVxuICAgICAgaWYgKHByb2R1Y3QgPT0gJ1hib3ggMzYwJyAmJiAvXFxiSUVNb2JpbGVcXGIvLnRlc3QodWEpKSB7XG4gICAgICAgIGRlc2NyaXB0aW9uLnVuc2hpZnQoJ21vYmlsZSBtb2RlJyk7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIEFkZCBtb2JpbGUgcG9zdGZpeC5cbiAgICBlbHNlIGlmICgoL14oPzpDaHJvbWV8SUV8T3BlcmEpJC8udGVzdChuYW1lKSB8fCBuYW1lICYmICFwcm9kdWN0ICYmICEvQnJvd3NlcnxNb2JpLy50ZXN0KG5hbWUpKSAmJlxuICAgICAgICAob3MgPT0gJ1dpbmRvd3MgQ0UnIHx8IC9Nb2JpL2kudGVzdCh1YSkpKSB7XG4gICAgICBuYW1lICs9ICcgTW9iaWxlJztcbiAgICB9XG4gICAgLy8gRGV0ZWN0IElFIHBsYXRmb3JtIHByZXZpZXcuXG4gICAgZWxzZSBpZiAobmFtZSA9PSAnSUUnICYmIHVzZUZlYXR1cmVzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBpZiAoY29udGV4dC5leHRlcm5hbCA9PT0gbnVsbCkge1xuICAgICAgICAgIGRlc2NyaXB0aW9uLnVuc2hpZnQoJ3BsYXRmb3JtIHByZXZpZXcnKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgIGRlc2NyaXB0aW9uLnVuc2hpZnQoJ2VtYmVkZGVkJyk7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIERldGVjdCBCbGFja0JlcnJ5IE9TIHZlcnNpb24uXG4gICAgLy8gaHR0cDovL2RvY3MuYmxhY2tiZXJyeS5jb20vZW4vZGV2ZWxvcGVycy9kZWxpdmVyYWJsZXMvMTgxNjkvSFRUUF9oZWFkZXJzX3NlbnRfYnlfQkJfQnJvd3Nlcl8xMjM0OTExXzExLmpzcFxuICAgIGVsc2UgaWYgKCgvXFxiQmxhY2tCZXJyeVxcYi8udGVzdChwcm9kdWN0KSB8fCAvXFxiQkIxMFxcYi8udGVzdCh1YSkpICYmIChkYXRhID1cbiAgICAgICAgICAoUmVnRXhwKHByb2R1Y3QucmVwbGFjZSgvICsvZywgJyAqJykgKyAnLyhbLlxcXFxkXSspJywgJ2knKS5leGVjKHVhKSB8fCAwKVsxXSB8fFxuICAgICAgICAgIHZlcnNpb25cbiAgICAgICAgKSkge1xuICAgICAgZGF0YSA9IFtkYXRhLCAvQkIxMC8udGVzdCh1YSldO1xuICAgICAgb3MgPSAoZGF0YVsxXSA/IChwcm9kdWN0ID0gbnVsbCwgbWFudWZhY3R1cmVyID0gJ0JsYWNrQmVycnknKSA6ICdEZXZpY2UgU29mdHdhcmUnKSArICcgJyArIGRhdGFbMF07XG4gICAgICB2ZXJzaW9uID0gbnVsbDtcbiAgICB9XG4gICAgLy8gRGV0ZWN0IE9wZXJhIGlkZW50aWZ5aW5nL21hc2tpbmcgaXRzZWxmIGFzIGFub3RoZXIgYnJvd3Nlci5cbiAgICAvLyBodHRwOi8vd3d3Lm9wZXJhLmNvbS9zdXBwb3J0L2tiL3ZpZXcvODQzL1xuICAgIGVsc2UgaWYgKHRoaXMgIT0gZm9yT3duICYmIHByb2R1Y3QgIT0gJ1dpaScgJiYgKFxuICAgICAgICAgICh1c2VGZWF0dXJlcyAmJiBvcGVyYSkgfHxcbiAgICAgICAgICAoL09wZXJhLy50ZXN0KG5hbWUpICYmIC9cXGIoPzpNU0lFfEZpcmVmb3gpXFxiL2kudGVzdCh1YSkpIHx8XG4gICAgICAgICAgKG5hbWUgPT0gJ0ZpcmVmb3gnICYmIC9cXGJPUyBYICg/OlxcZCtcXC4pezIsfS8udGVzdChvcykpIHx8XG4gICAgICAgICAgKG5hbWUgPT0gJ0lFJyAmJiAoXG4gICAgICAgICAgICAob3MgJiYgIS9eV2luLy50ZXN0KG9zKSAmJiB2ZXJzaW9uID4gNS41KSB8fFxuICAgICAgICAgICAgL1xcYldpbmRvd3MgWFBcXGIvLnRlc3Qob3MpICYmIHZlcnNpb24gPiA4IHx8XG4gICAgICAgICAgICB2ZXJzaW9uID09IDggJiYgIS9cXGJUcmlkZW50XFxiLy50ZXN0KHVhKVxuICAgICAgICAgICkpXG4gICAgICAgICkgJiYgIXJlT3BlcmEudGVzdCgoZGF0YSA9IHBhcnNlLmNhbGwoZm9yT3duLCB1YS5yZXBsYWNlKHJlT3BlcmEsICcnKSArICc7JykpKSAmJiBkYXRhLm5hbWUpIHtcbiAgICAgIC8vIFdoZW4gXCJpZGVudGlmeWluZ1wiLCB0aGUgVUEgY29udGFpbnMgYm90aCBPcGVyYSBhbmQgdGhlIG90aGVyIGJyb3dzZXIncyBuYW1lLlxuICAgICAgZGF0YSA9ICdpbmcgYXMgJyArIGRhdGEubmFtZSArICgoZGF0YSA9IGRhdGEudmVyc2lvbikgPyAnICcgKyBkYXRhIDogJycpO1xuICAgICAgaWYgKHJlT3BlcmEudGVzdChuYW1lKSkge1xuICAgICAgICBpZiAoL1xcYklFXFxiLy50ZXN0KGRhdGEpICYmIG9zID09ICdNYWMgT1MnKSB7XG4gICAgICAgICAgb3MgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGRhdGEgPSAnaWRlbnRpZnknICsgZGF0YTtcbiAgICAgIH1cbiAgICAgIC8vIFdoZW4gXCJtYXNraW5nXCIsIHRoZSBVQSBjb250YWlucyBvbmx5IHRoZSBvdGhlciBicm93c2VyJ3MgbmFtZS5cbiAgICAgIGVsc2Uge1xuICAgICAgICBkYXRhID0gJ21hc2snICsgZGF0YTtcbiAgICAgICAgaWYgKG9wZXJhQ2xhc3MpIHtcbiAgICAgICAgICBuYW1lID0gZm9ybWF0KG9wZXJhQ2xhc3MucmVwbGFjZSgvKFthLXpdKShbQS1aXSkvZywgJyQxICQyJykpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5hbWUgPSAnT3BlcmEnO1xuICAgICAgICB9XG4gICAgICAgIGlmICgvXFxiSUVcXGIvLnRlc3QoZGF0YSkpIHtcbiAgICAgICAgICBvcyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF1c2VGZWF0dXJlcykge1xuICAgICAgICAgIHZlcnNpb24gPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBsYXlvdXQgPSBbJ1ByZXN0byddO1xuICAgICAgZGVzY3JpcHRpb24ucHVzaChkYXRhKTtcbiAgICB9XG4gICAgLy8gRGV0ZWN0IFdlYktpdCBOaWdodGx5IGFuZCBhcHByb3hpbWF0ZSBDaHJvbWUvU2FmYXJpIHZlcnNpb25zLlxuICAgIGlmICgoZGF0YSA9ICgvXFxiQXBwbGVXZWJLaXRcXC8oW1xcZC5dK1xcKz8pL2kuZXhlYyh1YSkgfHwgMClbMV0pKSB7XG4gICAgICAvLyBDb3JyZWN0IGJ1aWxkIG51bWJlciBmb3IgbnVtZXJpYyBjb21wYXJpc29uLlxuICAgICAgLy8gKGUuZy4gXCI1MzIuNVwiIGJlY29tZXMgXCI1MzIuMDVcIilcbiAgICAgIGRhdGEgPSBbcGFyc2VGbG9hdChkYXRhLnJlcGxhY2UoL1xcLihcXGQpJC8sICcuMCQxJykpLCBkYXRhXTtcbiAgICAgIC8vIE5pZ2h0bHkgYnVpbGRzIGFyZSBwb3N0Zml4ZWQgd2l0aCBhIFwiK1wiLlxuICAgICAgaWYgKG5hbWUgPT0gJ1NhZmFyaScgJiYgZGF0YVsxXS5zbGljZSgtMSkgPT0gJysnKSB7XG4gICAgICAgIG5hbWUgPSAnV2ViS2l0IE5pZ2h0bHknO1xuICAgICAgICBwcmVyZWxlYXNlID0gJ2FscGhhJztcbiAgICAgICAgdmVyc2lvbiA9IGRhdGFbMV0uc2xpY2UoMCwgLTEpO1xuICAgICAgfVxuICAgICAgLy8gQ2xlYXIgaW5jb3JyZWN0IGJyb3dzZXIgdmVyc2lvbnMuXG4gICAgICBlbHNlIGlmICh2ZXJzaW9uID09IGRhdGFbMV0gfHxcbiAgICAgICAgICB2ZXJzaW9uID09IChkYXRhWzJdID0gKC9cXGJTYWZhcmlcXC8oW1xcZC5dK1xcKz8pL2kuZXhlYyh1YSkgfHwgMClbMV0pKSB7XG4gICAgICAgIHZlcnNpb24gPSBudWxsO1xuICAgICAgfVxuICAgICAgLy8gVXNlIHRoZSBmdWxsIENocm9tZSB2ZXJzaW9uIHdoZW4gYXZhaWxhYmxlLlxuICAgICAgZGF0YVsxXSA9ICgvXFxiQ2hyb21lXFwvKFtcXGQuXSspL2kuZXhlYyh1YSkgfHwgMClbMV07XG4gICAgICAvLyBEZXRlY3QgQmxpbmsgbGF5b3V0IGVuZ2luZS5cbiAgICAgIGlmIChkYXRhWzBdID09IDUzNy4zNiAmJiBkYXRhWzJdID09IDUzNy4zNiAmJiBwYXJzZUZsb2F0KGRhdGFbMV0pID49IDI4ICYmIGxheW91dCA9PSAnV2ViS2l0Jykge1xuICAgICAgICBsYXlvdXQgPSBbJ0JsaW5rJ107XG4gICAgICB9XG4gICAgICAvLyBEZXRlY3QgSmF2YVNjcmlwdENvcmUuXG4gICAgICAvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzY3Njg0NzQvaG93LWNhbi1pLWRldGVjdC13aGljaC1qYXZhc2NyaXB0LWVuZ2luZS12OC1vci1qc2MtaXMtdXNlZC1hdC1ydW50aW1lLWluLWFuZHJvaVxuICAgICAgaWYgKCF1c2VGZWF0dXJlcyB8fCAoIWxpa2VDaHJvbWUgJiYgIWRhdGFbMV0pKSB7XG4gICAgICAgIGxheW91dCAmJiAobGF5b3V0WzFdID0gJ2xpa2UgU2FmYXJpJyk7XG4gICAgICAgIGRhdGEgPSAoZGF0YSA9IGRhdGFbMF0sIGRhdGEgPCA0MDAgPyAxIDogZGF0YSA8IDUwMCA/IDIgOiBkYXRhIDwgNTI2ID8gMyA6IGRhdGEgPCA1MzMgPyA0IDogZGF0YSA8IDUzNCA/ICc0KycgOiBkYXRhIDwgNTM1ID8gNSA6IGRhdGEgPCA1MzcgPyA2IDogZGF0YSA8IDUzOCA/IDcgOiBkYXRhIDwgNjAxID8gOCA6ICc4Jyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsYXlvdXQgJiYgKGxheW91dFsxXSA9ICdsaWtlIENocm9tZScpO1xuICAgICAgICBkYXRhID0gZGF0YVsxXSB8fCAoZGF0YSA9IGRhdGFbMF0sIGRhdGEgPCA1MzAgPyAxIDogZGF0YSA8IDUzMiA/IDIgOiBkYXRhIDwgNTMyLjA1ID8gMyA6IGRhdGEgPCA1MzMgPyA0IDogZGF0YSA8IDUzNC4wMyA/IDUgOiBkYXRhIDwgNTM0LjA3ID8gNiA6IGRhdGEgPCA1MzQuMTAgPyA3IDogZGF0YSA8IDUzNC4xMyA/IDggOiBkYXRhIDwgNTM0LjE2ID8gOSA6IGRhdGEgPCA1MzQuMjQgPyAxMCA6IGRhdGEgPCA1MzQuMzAgPyAxMSA6IGRhdGEgPCA1MzUuMDEgPyAxMiA6IGRhdGEgPCA1MzUuMDIgPyAnMTMrJyA6IGRhdGEgPCA1MzUuMDcgPyAxNSA6IGRhdGEgPCA1MzUuMTEgPyAxNiA6IGRhdGEgPCA1MzUuMTkgPyAxNyA6IGRhdGEgPCA1MzYuMDUgPyAxOCA6IGRhdGEgPCA1MzYuMTAgPyAxOSA6IGRhdGEgPCA1MzcuMDEgPyAyMCA6IGRhdGEgPCA1MzcuMTEgPyAnMjErJyA6IGRhdGEgPCA1MzcuMTMgPyAyMyA6IGRhdGEgPCA1MzcuMTggPyAyNCA6IGRhdGEgPCA1MzcuMjQgPyAyNSA6IGRhdGEgPCA1MzcuMzYgPyAyNiA6IGxheW91dCAhPSAnQmxpbmsnID8gJzI3JyA6ICcyOCcpO1xuICAgICAgfVxuICAgICAgLy8gQWRkIHRoZSBwb3N0Zml4IG9mIFwiLnhcIiBvciBcIitcIiBmb3IgYXBwcm94aW1hdGUgdmVyc2lvbnMuXG4gICAgICBsYXlvdXQgJiYgKGxheW91dFsxXSArPSAnICcgKyAoZGF0YSArPSB0eXBlb2YgZGF0YSA9PSAnbnVtYmVyJyA/ICcueCcgOiAvWy4rXS8udGVzdChkYXRhKSA/ICcnIDogJysnKSk7XG4gICAgICAvLyBPYnNjdXJlIHZlcnNpb24gZm9yIHNvbWUgU2FmYXJpIDEtMiByZWxlYXNlcy5cbiAgICAgIGlmIChuYW1lID09ICdTYWZhcmknICYmICghdmVyc2lvbiB8fCBwYXJzZUludCh2ZXJzaW9uKSA+IDQ1KSkge1xuICAgICAgICB2ZXJzaW9uID0gZGF0YTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gRGV0ZWN0IE9wZXJhIGRlc2t0b3AgbW9kZXMuXG4gICAgaWYgKG5hbWUgPT0gJ09wZXJhJyAmJiAgKGRhdGEgPSAvXFxiemJvdnx6dmF2JC8uZXhlYyhvcykpKSB7XG4gICAgICBuYW1lICs9ICcgJztcbiAgICAgIGRlc2NyaXB0aW9uLnVuc2hpZnQoJ2Rlc2t0b3AgbW9kZScpO1xuICAgICAgaWYgKGRhdGEgPT0gJ3p2YXYnKSB7XG4gICAgICAgIG5hbWUgKz0gJ01pbmknO1xuICAgICAgICB2ZXJzaW9uID0gbnVsbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5hbWUgKz0gJ01vYmlsZSc7XG4gICAgICB9XG4gICAgICBvcyA9IG9zLnJlcGxhY2UoUmVnRXhwKCcgKicgKyBkYXRhICsgJyQnKSwgJycpO1xuICAgIH1cbiAgICAvLyBEZXRlY3QgQ2hyb21lIGRlc2t0b3AgbW9kZS5cbiAgICBlbHNlIGlmIChuYW1lID09ICdTYWZhcmknICYmIC9cXGJDaHJvbWVcXGIvLmV4ZWMobGF5b3V0ICYmIGxheW91dFsxXSkpIHtcbiAgICAgIGRlc2NyaXB0aW9uLnVuc2hpZnQoJ2Rlc2t0b3AgbW9kZScpO1xuICAgICAgbmFtZSA9ICdDaHJvbWUgTW9iaWxlJztcbiAgICAgIHZlcnNpb24gPSBudWxsO1xuXG4gICAgICBpZiAoL1xcYk9TIFhcXGIvLnRlc3Qob3MpKSB7XG4gICAgICAgIG1hbnVmYWN0dXJlciA9ICdBcHBsZSc7XG4gICAgICAgIG9zID0gJ2lPUyA0LjMrJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9zID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gU3RyaXAgaW5jb3JyZWN0IE9TIHZlcnNpb25zLlxuICAgIGlmICh2ZXJzaW9uICYmIHZlcnNpb24uaW5kZXhPZigoZGF0YSA9IC9bXFxkLl0rJC8uZXhlYyhvcykpKSA9PSAwICYmXG4gICAgICAgIHVhLmluZGV4T2YoJy8nICsgZGF0YSArICctJykgPiAtMSkge1xuICAgICAgb3MgPSB0cmltKG9zLnJlcGxhY2UoZGF0YSwgJycpKTtcbiAgICB9XG4gICAgLy8gQWRkIGxheW91dCBlbmdpbmUuXG4gICAgaWYgKGxheW91dCAmJiAhL1xcYig/OkF2YW50fE5vb2spXFxiLy50ZXN0KG5hbWUpICYmIChcbiAgICAgICAgL0Jyb3dzZXJ8THVuYXNjYXBlfE1heHRob24vLnRlc3QobmFtZSkgfHxcbiAgICAgICAgbmFtZSAhPSAnU2FmYXJpJyAmJiAvXmlPUy8udGVzdChvcykgJiYgL1xcYlNhZmFyaVxcYi8udGVzdChsYXlvdXRbMV0pIHx8XG4gICAgICAgIC9eKD86QWRvYmV8QXJvcmF8QnJlYWNofE1pZG9yaXxPcGVyYXxQaGFudG9tfFJla29ucXxSb2NrfFNhbXN1bmcgSW50ZXJuZXR8U2xlaXBuaXJ8V2ViKS8udGVzdChuYW1lKSAmJiBsYXlvdXRbMV0pKSB7XG4gICAgICAvLyBEb24ndCBhZGQgbGF5b3V0IGRldGFpbHMgdG8gZGVzY3JpcHRpb24gaWYgdGhleSBhcmUgZmFsc2V5LlxuICAgICAgKGRhdGEgPSBsYXlvdXRbbGF5b3V0Lmxlbmd0aCAtIDFdKSAmJiBkZXNjcmlwdGlvbi5wdXNoKGRhdGEpO1xuICAgIH1cbiAgICAvLyBDb21iaW5lIGNvbnRleHR1YWwgaW5mb3JtYXRpb24uXG4gICAgaWYgKGRlc2NyaXB0aW9uLmxlbmd0aCkge1xuICAgICAgZGVzY3JpcHRpb24gPSBbJygnICsgZGVzY3JpcHRpb24uam9pbignOyAnKSArICcpJ107XG4gICAgfVxuICAgIC8vIEFwcGVuZCBtYW51ZmFjdHVyZXIgdG8gZGVzY3JpcHRpb24uXG4gICAgaWYgKG1hbnVmYWN0dXJlciAmJiBwcm9kdWN0ICYmIHByb2R1Y3QuaW5kZXhPZihtYW51ZmFjdHVyZXIpIDwgMCkge1xuICAgICAgZGVzY3JpcHRpb24ucHVzaCgnb24gJyArIG1hbnVmYWN0dXJlcik7XG4gICAgfVxuICAgIC8vIEFwcGVuZCBwcm9kdWN0IHRvIGRlc2NyaXB0aW9uLlxuICAgIGlmIChwcm9kdWN0KSB7XG4gICAgICBkZXNjcmlwdGlvbi5wdXNoKCgvXm9uIC8udGVzdChkZXNjcmlwdGlvbltkZXNjcmlwdGlvbi5sZW5ndGggLSAxXSkgPyAnJyA6ICdvbiAnKSArIHByb2R1Y3QpO1xuICAgIH1cbiAgICAvLyBQYXJzZSB0aGUgT1MgaW50byBhbiBvYmplY3QuXG4gICAgaWYgKG9zKSB7XG4gICAgICBkYXRhID0gLyAoW1xcZC4rXSspJC8uZXhlYyhvcyk7XG4gICAgICBpc1NwZWNpYWxDYXNlZE9TID0gZGF0YSAmJiBvcy5jaGFyQXQob3MubGVuZ3RoIC0gZGF0YVswXS5sZW5ndGggLSAxKSA9PSAnLyc7XG4gICAgICBvcyA9IHtcbiAgICAgICAgJ2FyY2hpdGVjdHVyZSc6IDMyLFxuICAgICAgICAnZmFtaWx5JzogKGRhdGEgJiYgIWlzU3BlY2lhbENhc2VkT1MpID8gb3MucmVwbGFjZShkYXRhWzBdLCAnJykgOiBvcyxcbiAgICAgICAgJ3ZlcnNpb24nOiBkYXRhID8gZGF0YVsxXSA6IG51bGwsXG4gICAgICAgICd0b1N0cmluZyc6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciB2ZXJzaW9uID0gdGhpcy52ZXJzaW9uO1xuICAgICAgICAgIHJldHVybiB0aGlzLmZhbWlseSArICgodmVyc2lvbiAmJiAhaXNTcGVjaWFsQ2FzZWRPUykgPyAnICcgKyB2ZXJzaW9uIDogJycpICsgKHRoaXMuYXJjaGl0ZWN0dXJlID09IDY0ID8gJyA2NC1iaXQnIDogJycpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cbiAgICAvLyBBZGQgYnJvd3Nlci9PUyBhcmNoaXRlY3R1cmUuXG4gICAgaWYgKChkYXRhID0gL1xcYig/OkFNRHxJQXxXaW58V09XfHg4Nl98eCk2NFxcYi9pLmV4ZWMoYXJjaCkpICYmICEvXFxiaTY4NlxcYi9pLnRlc3QoYXJjaCkpIHtcbiAgICAgIGlmIChvcykge1xuICAgICAgICBvcy5hcmNoaXRlY3R1cmUgPSA2NDtcbiAgICAgICAgb3MuZmFtaWx5ID0gb3MuZmFtaWx5LnJlcGxhY2UoUmVnRXhwKCcgKicgKyBkYXRhKSwgJycpO1xuICAgICAgfVxuICAgICAgaWYgKFxuICAgICAgICAgIG5hbWUgJiYgKC9cXGJXT1c2NFxcYi9pLnRlc3QodWEpIHx8XG4gICAgICAgICAgKHVzZUZlYXR1cmVzICYmIC9cXHcoPzo4NnwzMikkLy50ZXN0KG5hdi5jcHVDbGFzcyB8fCBuYXYucGxhdGZvcm0pICYmICEvXFxiV2luNjQ7IHg2NFxcYi9pLnRlc3QodWEpKSlcbiAgICAgICkge1xuICAgICAgICBkZXNjcmlwdGlvbi51bnNoaWZ0KCczMi1iaXQnKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gQ2hyb21lIDM5IGFuZCBhYm92ZSBvbiBPUyBYIGlzIGFsd2F5cyA2NC1iaXQuXG4gICAgZWxzZSBpZiAoXG4gICAgICAgIG9zICYmIC9eT1MgWC8udGVzdChvcy5mYW1pbHkpICYmXG4gICAgICAgIG5hbWUgPT0gJ0Nocm9tZScgJiYgcGFyc2VGbG9hdCh2ZXJzaW9uKSA+PSAzOVxuICAgICkge1xuICAgICAgb3MuYXJjaGl0ZWN0dXJlID0gNjQ7XG4gICAgfVxuXG4gICAgdWEgfHwgKHVhID0gbnVsbCk7XG5cbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgICAvKipcbiAgICAgKiBUaGUgcGxhdGZvcm0gb2JqZWN0LlxuICAgICAqXG4gICAgICogQG5hbWUgcGxhdGZvcm1cbiAgICAgKiBAdHlwZSBPYmplY3RcbiAgICAgKi9cbiAgICB2YXIgcGxhdGZvcm0gPSB7fTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBwbGF0Zm9ybSBkZXNjcmlwdGlvbi5cbiAgICAgKlxuICAgICAqIEBtZW1iZXJPZiBwbGF0Zm9ybVxuICAgICAqIEB0eXBlIHN0cmluZ3xudWxsXG4gICAgICovXG4gICAgcGxhdGZvcm0uZGVzY3JpcHRpb24gPSB1YTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBuYW1lIG9mIHRoZSBicm93c2VyJ3MgbGF5b3V0IGVuZ2luZS5cbiAgICAgKlxuICAgICAqIFRoZSBsaXN0IG9mIGNvbW1vbiBsYXlvdXQgZW5naW5lcyBpbmNsdWRlOlxuICAgICAqIFwiQmxpbmtcIiwgXCJFZGdlSFRNTFwiLCBcIkdlY2tvXCIsIFwiVHJpZGVudFwiIGFuZCBcIldlYktpdFwiXG4gICAgICpcbiAgICAgKiBAbWVtYmVyT2YgcGxhdGZvcm1cbiAgICAgKiBAdHlwZSBzdHJpbmd8bnVsbFxuICAgICAqL1xuICAgIHBsYXRmb3JtLmxheW91dCA9IGxheW91dCAmJiBsYXlvdXRbMF07XG5cbiAgICAvKipcbiAgICAgKiBUaGUgbmFtZSBvZiB0aGUgcHJvZHVjdCdzIG1hbnVmYWN0dXJlci5cbiAgICAgKlxuICAgICAqIFRoZSBsaXN0IG9mIG1hbnVmYWN0dXJlcnMgaW5jbHVkZTpcbiAgICAgKiBcIkFwcGxlXCIsIFwiQXJjaG9zXCIsIFwiQW1hem9uXCIsIFwiQXN1c1wiLCBcIkJhcm5lcyAmIE5vYmxlXCIsIFwiQmxhY2tCZXJyeVwiLFxuICAgICAqIFwiR29vZ2xlXCIsIFwiSFBcIiwgXCJIVENcIiwgXCJMR1wiLCBcIk1pY3Jvc29mdFwiLCBcIk1vdG9yb2xhXCIsIFwiTmludGVuZG9cIixcbiAgICAgKiBcIk5va2lhXCIsIFwiU2Ftc3VuZ1wiIGFuZCBcIlNvbnlcIlxuICAgICAqXG4gICAgICogQG1lbWJlck9mIHBsYXRmb3JtXG4gICAgICogQHR5cGUgc3RyaW5nfG51bGxcbiAgICAgKi9cbiAgICBwbGF0Zm9ybS5tYW51ZmFjdHVyZXIgPSBtYW51ZmFjdHVyZXI7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgbmFtZSBvZiB0aGUgYnJvd3Nlci9lbnZpcm9ubWVudC5cbiAgICAgKlxuICAgICAqIFRoZSBsaXN0IG9mIGNvbW1vbiBicm93c2VyIG5hbWVzIGluY2x1ZGU6XG4gICAgICogXCJDaHJvbWVcIiwgXCJFbGVjdHJvblwiLCBcIkZpcmVmb3hcIiwgXCJGaXJlZm94IGZvciBpT1NcIiwgXCJJRVwiLFxuICAgICAqIFwiTWljcm9zb2Z0IEVkZ2VcIiwgXCJQaGFudG9tSlNcIiwgXCJTYWZhcmlcIiwgXCJTZWFNb25rZXlcIiwgXCJTaWxrXCIsXG4gICAgICogXCJPcGVyYSBNaW5pXCIgYW5kIFwiT3BlcmFcIlxuICAgICAqXG4gICAgICogTW9iaWxlIHZlcnNpb25zIG9mIHNvbWUgYnJvd3NlcnMgaGF2ZSBcIk1vYmlsZVwiIGFwcGVuZGVkIHRvIHRoZWlyIG5hbWU6XG4gICAgICogZWcuIFwiQ2hyb21lIE1vYmlsZVwiLCBcIkZpcmVmb3ggTW9iaWxlXCIsIFwiSUUgTW9iaWxlXCIgYW5kIFwiT3BlcmEgTW9iaWxlXCJcbiAgICAgKlxuICAgICAqIEBtZW1iZXJPZiBwbGF0Zm9ybVxuICAgICAqIEB0eXBlIHN0cmluZ3xudWxsXG4gICAgICovXG4gICAgcGxhdGZvcm0ubmFtZSA9IG5hbWU7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYWxwaGEvYmV0YSByZWxlYXNlIGluZGljYXRvci5cbiAgICAgKlxuICAgICAqIEBtZW1iZXJPZiBwbGF0Zm9ybVxuICAgICAqIEB0eXBlIHN0cmluZ3xudWxsXG4gICAgICovXG4gICAgcGxhdGZvcm0ucHJlcmVsZWFzZSA9IHByZXJlbGVhc2U7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgbmFtZSBvZiB0aGUgcHJvZHVjdCBob3N0aW5nIHRoZSBicm93c2VyLlxuICAgICAqXG4gICAgICogVGhlIGxpc3Qgb2YgY29tbW9uIHByb2R1Y3RzIGluY2x1ZGU6XG4gICAgICpcbiAgICAgKiBcIkJsYWNrQmVycnlcIiwgXCJHYWxheHkgUzRcIiwgXCJMdW1pYVwiLCBcImlQYWRcIiwgXCJpUG9kXCIsIFwiaVBob25lXCIsIFwiS2luZGxlXCIsXG4gICAgICogXCJLaW5kbGUgRmlyZVwiLCBcIk5leHVzXCIsIFwiTm9va1wiLCBcIlBsYXlCb29rXCIsIFwiVG91Y2hQYWRcIiBhbmQgXCJUcmFuc2Zvcm1lclwiXG4gICAgICpcbiAgICAgKiBAbWVtYmVyT2YgcGxhdGZvcm1cbiAgICAgKiBAdHlwZSBzdHJpbmd8bnVsbFxuICAgICAqL1xuICAgIHBsYXRmb3JtLnByb2R1Y3QgPSBwcm9kdWN0O1xuXG4gICAgLyoqXG4gICAgICogVGhlIGJyb3dzZXIncyB1c2VyIGFnZW50IHN0cmluZy5cbiAgICAgKlxuICAgICAqIEBtZW1iZXJPZiBwbGF0Zm9ybVxuICAgICAqIEB0eXBlIHN0cmluZ3xudWxsXG4gICAgICovXG4gICAgcGxhdGZvcm0udWEgPSB1YTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBicm93c2VyL2Vudmlyb25tZW50IHZlcnNpb24uXG4gICAgICpcbiAgICAgKiBAbWVtYmVyT2YgcGxhdGZvcm1cbiAgICAgKiBAdHlwZSBzdHJpbmd8bnVsbFxuICAgICAqL1xuICAgIHBsYXRmb3JtLnZlcnNpb24gPSBuYW1lICYmIHZlcnNpb247XG5cbiAgICAvKipcbiAgICAgKiBUaGUgbmFtZSBvZiB0aGUgb3BlcmF0aW5nIHN5c3RlbS5cbiAgICAgKlxuICAgICAqIEBtZW1iZXJPZiBwbGF0Zm9ybVxuICAgICAqIEB0eXBlIE9iamVjdFxuICAgICAqL1xuICAgIHBsYXRmb3JtLm9zID0gb3MgfHwge1xuXG4gICAgICAvKipcbiAgICAgICAqIFRoZSBDUFUgYXJjaGl0ZWN0dXJlIHRoZSBPUyBpcyBidWlsdCBmb3IuXG4gICAgICAgKlxuICAgICAgICogQG1lbWJlck9mIHBsYXRmb3JtLm9zXG4gICAgICAgKiBAdHlwZSBudW1iZXJ8bnVsbFxuICAgICAgICovXG4gICAgICAnYXJjaGl0ZWN0dXJlJzogbnVsbCxcblxuICAgICAgLyoqXG4gICAgICAgKiBUaGUgZmFtaWx5IG9mIHRoZSBPUy5cbiAgICAgICAqXG4gICAgICAgKiBDb21tb24gdmFsdWVzIGluY2x1ZGU6XG4gICAgICAgKiBcIldpbmRvd3NcIiwgXCJXaW5kb3dzIFNlcnZlciAyMDA4IFIyIC8gN1wiLCBcIldpbmRvd3MgU2VydmVyIDIwMDggLyBWaXN0YVwiLFxuICAgICAgICogXCJXaW5kb3dzIFhQXCIsIFwiT1MgWFwiLCBcIlVidW50dVwiLCBcIkRlYmlhblwiLCBcIkZlZG9yYVwiLCBcIlJlZCBIYXRcIiwgXCJTdVNFXCIsXG4gICAgICAgKiBcIkFuZHJvaWRcIiwgXCJpT1NcIiBhbmQgXCJXaW5kb3dzIFBob25lXCJcbiAgICAgICAqXG4gICAgICAgKiBAbWVtYmVyT2YgcGxhdGZvcm0ub3NcbiAgICAgICAqIEB0eXBlIHN0cmluZ3xudWxsXG4gICAgICAgKi9cbiAgICAgICdmYW1pbHknOiBudWxsLFxuXG4gICAgICAvKipcbiAgICAgICAqIFRoZSB2ZXJzaW9uIG9mIHRoZSBPUy5cbiAgICAgICAqXG4gICAgICAgKiBAbWVtYmVyT2YgcGxhdGZvcm0ub3NcbiAgICAgICAqIEB0eXBlIHN0cmluZ3xudWxsXG4gICAgICAgKi9cbiAgICAgICd2ZXJzaW9uJzogbnVsbCxcblxuICAgICAgLyoqXG4gICAgICAgKiBSZXR1cm5zIHRoZSBPUyBzdHJpbmcuXG4gICAgICAgKlxuICAgICAgICogQG1lbWJlck9mIHBsYXRmb3JtLm9zXG4gICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgT1Mgc3RyaW5nLlxuICAgICAgICovXG4gICAgICAndG9TdHJpbmcnOiBmdW5jdGlvbigpIHsgcmV0dXJuICdudWxsJzsgfVxuICAgIH07XG5cbiAgICBwbGF0Zm9ybS5wYXJzZSA9IHBhcnNlO1xuICAgIHBsYXRmb3JtLnRvU3RyaW5nID0gdG9TdHJpbmdQbGF0Zm9ybTtcblxuICAgIGlmIChwbGF0Zm9ybS52ZXJzaW9uKSB7XG4gICAgICBkZXNjcmlwdGlvbi51bnNoaWZ0KHZlcnNpb24pO1xuICAgIH1cbiAgICBpZiAocGxhdGZvcm0ubmFtZSkge1xuICAgICAgZGVzY3JpcHRpb24udW5zaGlmdChuYW1lKTtcbiAgICB9XG4gICAgaWYgKG9zICYmIG5hbWUgJiYgIShvcyA9PSBTdHJpbmcob3MpLnNwbGl0KCcgJylbMF0gJiYgKG9zID09IG5hbWUuc3BsaXQoJyAnKVswXSB8fCBwcm9kdWN0KSkpIHtcbiAgICAgIGRlc2NyaXB0aW9uLnB1c2gocHJvZHVjdCA/ICcoJyArIG9zICsgJyknIDogJ29uICcgKyBvcyk7XG4gICAgfVxuICAgIGlmIChkZXNjcmlwdGlvbi5sZW5ndGgpIHtcbiAgICAgIHBsYXRmb3JtLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb24uam9pbignICcpO1xuICAgIH1cbiAgICByZXR1cm4gcGxhdGZvcm07XG4gIH1cblxuICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAvLyBFeHBvcnQgcGxhdGZvcm0uXG4gIHZhciBwbGF0Zm9ybSA9IHBhcnNlKCk7XG5cbiAgLy8gU29tZSBBTUQgYnVpbGQgb3B0aW1pemVycywgbGlrZSByLmpzLCBjaGVjayBmb3IgY29uZGl0aW9uIHBhdHRlcm5zIGxpa2UgdGhlIGZvbGxvd2luZzpcbiAgaWYgKHR5cGVvZiBkZWZpbmUgPT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgZGVmaW5lLmFtZCA9PSAnb2JqZWN0JyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgLy8gRXhwb3NlIHBsYXRmb3JtIG9uIHRoZSBnbG9iYWwgb2JqZWN0IHRvIHByZXZlbnQgZXJyb3JzIHdoZW4gcGxhdGZvcm0gaXNcbiAgICAvLyBsb2FkZWQgYnkgYSBzY3JpcHQgdGFnIGluIHRoZSBwcmVzZW5jZSBvZiBhbiBBTUQgbG9hZGVyLlxuICAgIC8vIFNlZSBodHRwOi8vcmVxdWlyZWpzLm9yZy9kb2NzL2Vycm9ycy5odG1sI21pc21hdGNoIGZvciBtb3JlIGRldGFpbHMuXG4gICAgcm9vdC5wbGF0Zm9ybSA9IHBsYXRmb3JtO1xuXG4gICAgLy8gRGVmaW5lIGFzIGFuIGFub255bW91cyBtb2R1bGUgc28gcGxhdGZvcm0gY2FuIGJlIGFsaWFzZWQgdGhyb3VnaCBwYXRoIG1hcHBpbmcuXG4gICAgZGVmaW5lKGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHBsYXRmb3JtO1xuICAgIH0pO1xuICB9XG4gIC8vIENoZWNrIGZvciBgZXhwb3J0c2AgYWZ0ZXIgYGRlZmluZWAgaW4gY2FzZSBhIGJ1aWxkIG9wdGltaXplciBhZGRzIGFuIGBleHBvcnRzYCBvYmplY3QuXG4gIGVsc2UgaWYgKGZyZWVFeHBvcnRzICYmIGZyZWVNb2R1bGUpIHtcbiAgICAvLyBFeHBvcnQgZm9yIENvbW1vbkpTIHN1cHBvcnQuXG4gICAgZm9yT3duKHBsYXRmb3JtLCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgICBmcmVlRXhwb3J0c1trZXldID0gdmFsdWU7XG4gICAgfSk7XG4gIH1cbiAgZWxzZSB7XG4gICAgLy8gRXhwb3J0IHRvIHRoZSBnbG9iYWwgb2JqZWN0LlxuICAgIHJvb3QucGxhdGZvcm0gPSBwbGF0Zm9ybTtcbiAgfVxufS5jYWxsKHRoaXMpKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL3BsYXRmb3JtL3BsYXRmb3JtLmpzXG4vLyBtb2R1bGUgaWQgPSA2NlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///66\n")},function(module,exports){eval('module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tif(!module.children) module.children = [];\r\n\t\tObject.defineProperty(module, "loaded", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.l;\r\n\t\t\t}\r\n\t\t});\r\n\t\tObject.defineProperty(module, "id", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.i;\r\n\t\t\t}\r\n\t\t});\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n};\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNjcuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vbW9kdWxlLmpzPzU3ZmYiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihtb2R1bGUpIHtcclxuXHRpZighbW9kdWxlLndlYnBhY2tQb2x5ZmlsbCkge1xyXG5cdFx0bW9kdWxlLmRlcHJlY2F0ZSA9IGZ1bmN0aW9uKCkge307XHJcblx0XHRtb2R1bGUucGF0aHMgPSBbXTtcclxuXHRcdC8vIG1vZHVsZS5wYXJlbnQgPSB1bmRlZmluZWQgYnkgZGVmYXVsdFxyXG5cdFx0aWYoIW1vZHVsZS5jaGlsZHJlbikgbW9kdWxlLmNoaWxkcmVuID0gW107XHJcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobW9kdWxlLCBcImxvYWRlZFwiLCB7XHJcblx0XHRcdGVudW1lcmFibGU6IHRydWUsXHJcblx0XHRcdGdldDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0cmV0dXJuIG1vZHVsZS5sO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShtb2R1bGUsIFwiaWRcIiwge1xyXG5cdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxyXG5cdFx0XHRnZXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHJldHVybiBtb2R1bGUuaTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHRtb2R1bGUud2VicGFja1BvbHlmaWxsID0gMTtcclxuXHR9XHJcblx0cmV0dXJuIG1vZHVsZTtcclxufTtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gKHdlYnBhY2spL2J1aWxkaW4vbW9kdWxlLmpzXG4vLyBtb2R1bGUgaWQgPSA2N1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///67\n')},function(module,exports){eval("/*!\n* screenfull\n* v3.3.2 - 2017-10-27\n* (c) Sindre Sorhus; MIT License\n*/\n(function () {\n\t'use strict';\n\n\tvar document = typeof window !== 'undefined' && typeof window.document !== 'undefined' ? window.document : {};\n\tvar isCommonjs = typeof module !== 'undefined' && module.exports;\n\tvar keyboardAllowed = typeof Element !== 'undefined' && 'ALLOW_KEYBOARD_INPUT' in Element;\n\n\tvar fn = (function () {\n\t\tvar val;\n\n\t\tvar fnMap = [\n\t\t\t[\n\t\t\t\t'requestFullscreen',\n\t\t\t\t'exitFullscreen',\n\t\t\t\t'fullscreenElement',\n\t\t\t\t'fullscreenEnabled',\n\t\t\t\t'fullscreenchange',\n\t\t\t\t'fullscreenerror'\n\t\t\t],\n\t\t\t// New WebKit\n\t\t\t[\n\t\t\t\t'webkitRequestFullscreen',\n\t\t\t\t'webkitExitFullscreen',\n\t\t\t\t'webkitFullscreenElement',\n\t\t\t\t'webkitFullscreenEnabled',\n\t\t\t\t'webkitfullscreenchange',\n\t\t\t\t'webkitfullscreenerror'\n\n\t\t\t],\n\t\t\t// Old WebKit (Safari 5.1)\n\t\t\t[\n\t\t\t\t'webkitRequestFullScreen',\n\t\t\t\t'webkitCancelFullScreen',\n\t\t\t\t'webkitCurrentFullScreenElement',\n\t\t\t\t'webkitCancelFullScreen',\n\t\t\t\t'webkitfullscreenchange',\n\t\t\t\t'webkitfullscreenerror'\n\n\t\t\t],\n\t\t\t[\n\t\t\t\t'mozRequestFullScreen',\n\t\t\t\t'mozCancelFullScreen',\n\t\t\t\t'mozFullScreenElement',\n\t\t\t\t'mozFullScreenEnabled',\n\t\t\t\t'mozfullscreenchange',\n\t\t\t\t'mozfullscreenerror'\n\t\t\t],\n\t\t\t[\n\t\t\t\t'msRequestFullscreen',\n\t\t\t\t'msExitFullscreen',\n\t\t\t\t'msFullscreenElement',\n\t\t\t\t'msFullscreenEnabled',\n\t\t\t\t'MSFullscreenChange',\n\t\t\t\t'MSFullscreenError'\n\t\t\t]\n\t\t];\n\n\t\tvar i = 0;\n\t\tvar l = fnMap.length;\n\t\tvar ret = {};\n\n\t\tfor (; i < l; i++) {\n\t\t\tval = fnMap[i];\n\t\t\tif (val && val[1] in document) {\n\t\t\t\tfor (i = 0; i < val.length; i++) {\n\t\t\t\t\tret[fnMap[0][i]] = val[i];\n\t\t\t\t}\n\t\t\t\treturn ret;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t})();\n\n\tvar eventNameMap = {\n\t\tchange: fn.fullscreenchange,\n\t\terror: fn.fullscreenerror\n\t};\n\n\tvar screenfull = {\n\t\trequest: function (elem) {\n\t\t\tvar request = fn.requestFullscreen;\n\n\t\t\telem = elem || document.documentElement;\n\n\t\t\t// Work around Safari 5.1 bug: reports support for\n\t\t\t// keyboard in fullscreen even though it doesn't.\n\t\t\t// Browser sniffing, since the alternative with\n\t\t\t// setTimeout is even worse.\n\t\t\tif (/ Version\\/5\\.1(?:\\.\\d+)? Safari\\//.test(navigator.userAgent)) {\n\t\t\t\telem[request]();\n\t\t\t} else {\n\t\t\t\telem[request](keyboardAllowed && Element.ALLOW_KEYBOARD_INPUT);\n\t\t\t}\n\t\t},\n\t\texit: function () {\n\t\t\tdocument[fn.exitFullscreen]();\n\t\t},\n\t\ttoggle: function (elem) {\n\t\t\tif (this.isFullscreen) {\n\t\t\t\tthis.exit();\n\t\t\t} else {\n\t\t\t\tthis.request(elem);\n\t\t\t}\n\t\t},\n\t\tonchange: function (callback) {\n\t\t\tthis.on('change', callback);\n\t\t},\n\t\tonerror: function (callback) {\n\t\t\tthis.on('error', callback);\n\t\t},\n\t\ton: function (event, callback) {\n\t\t\tvar eventName = eventNameMap[event];\n\t\t\tif (eventName) {\n\t\t\t\tdocument.addEventListener(eventName, callback, false);\n\t\t\t}\n\t\t},\n\t\toff: function (event, callback) {\n\t\t\tvar eventName = eventNameMap[event];\n\t\t\tif (eventName) {\n\t\t\t\tdocument.removeEventListener(eventName, callback, false);\n\t\t\t}\n\t\t},\n\t\traw: fn\n\t};\n\n\tif (!fn) {\n\t\tif (isCommonjs) {\n\t\t\tmodule.exports = false;\n\t\t} else {\n\t\t\twindow.screenfull = false;\n\t\t}\n\n\t\treturn;\n\t}\n\n\tObject.defineProperties(screenfull, {\n\t\tisFullscreen: {\n\t\t\tget: function () {\n\t\t\t\treturn Boolean(document[fn.fullscreenElement]);\n\t\t\t}\n\t\t},\n\t\telement: {\n\t\t\tenumerable: true,\n\t\t\tget: function () {\n\t\t\t\treturn document[fn.fullscreenElement];\n\t\t\t}\n\t\t},\n\t\tenabled: {\n\t\t\tenumerable: true,\n\t\t\tget: function () {\n\t\t\t\t// Coerce to boolean in case of old WebKit\n\t\t\t\treturn Boolean(document[fn.fullscreenEnabled]);\n\t\t\t}\n\t\t}\n\t});\n\n\tif (isCommonjs) {\n\t\tmodule.exports = screenfull;\n\t} else {\n\t\twindow.screenfull = screenfull;\n\t}\n})();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNjguanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvc2NyZWVuZnVsbC9kaXN0L3NjcmVlbmZ1bGwuanM/Njg1YiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiogc2NyZWVuZnVsbFxuKiB2My4zLjIgLSAyMDE3LTEwLTI3XG4qIChjKSBTaW5kcmUgU29yaHVzOyBNSVQgTGljZW5zZVxuKi9cbihmdW5jdGlvbiAoKSB7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHR2YXIgZG9jdW1lbnQgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2Ygd2luZG93LmRvY3VtZW50ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdy5kb2N1bWVudCA6IHt9O1xuXHR2YXIgaXNDb21tb25qcyA9IHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZS5leHBvcnRzO1xuXHR2YXIga2V5Ym9hcmRBbGxvd2VkID0gdHlwZW9mIEVsZW1lbnQgIT09ICd1bmRlZmluZWQnICYmICdBTExPV19LRVlCT0FSRF9JTlBVVCcgaW4gRWxlbWVudDtcblxuXHR2YXIgZm4gPSAoZnVuY3Rpb24gKCkge1xuXHRcdHZhciB2YWw7XG5cblx0XHR2YXIgZm5NYXAgPSBbXG5cdFx0XHRbXG5cdFx0XHRcdCdyZXF1ZXN0RnVsbHNjcmVlbicsXG5cdFx0XHRcdCdleGl0RnVsbHNjcmVlbicsXG5cdFx0XHRcdCdmdWxsc2NyZWVuRWxlbWVudCcsXG5cdFx0XHRcdCdmdWxsc2NyZWVuRW5hYmxlZCcsXG5cdFx0XHRcdCdmdWxsc2NyZWVuY2hhbmdlJyxcblx0XHRcdFx0J2Z1bGxzY3JlZW5lcnJvcidcblx0XHRcdF0sXG5cdFx0XHQvLyBOZXcgV2ViS2l0XG5cdFx0XHRbXG5cdFx0XHRcdCd3ZWJraXRSZXF1ZXN0RnVsbHNjcmVlbicsXG5cdFx0XHRcdCd3ZWJraXRFeGl0RnVsbHNjcmVlbicsXG5cdFx0XHRcdCd3ZWJraXRGdWxsc2NyZWVuRWxlbWVudCcsXG5cdFx0XHRcdCd3ZWJraXRGdWxsc2NyZWVuRW5hYmxlZCcsXG5cdFx0XHRcdCd3ZWJraXRmdWxsc2NyZWVuY2hhbmdlJyxcblx0XHRcdFx0J3dlYmtpdGZ1bGxzY3JlZW5lcnJvcidcblxuXHRcdFx0XSxcblx0XHRcdC8vIE9sZCBXZWJLaXQgKFNhZmFyaSA1LjEpXG5cdFx0XHRbXG5cdFx0XHRcdCd3ZWJraXRSZXF1ZXN0RnVsbFNjcmVlbicsXG5cdFx0XHRcdCd3ZWJraXRDYW5jZWxGdWxsU2NyZWVuJyxcblx0XHRcdFx0J3dlYmtpdEN1cnJlbnRGdWxsU2NyZWVuRWxlbWVudCcsXG5cdFx0XHRcdCd3ZWJraXRDYW5jZWxGdWxsU2NyZWVuJyxcblx0XHRcdFx0J3dlYmtpdGZ1bGxzY3JlZW5jaGFuZ2UnLFxuXHRcdFx0XHQnd2Via2l0ZnVsbHNjcmVlbmVycm9yJ1xuXG5cdFx0XHRdLFxuXHRcdFx0W1xuXHRcdFx0XHQnbW96UmVxdWVzdEZ1bGxTY3JlZW4nLFxuXHRcdFx0XHQnbW96Q2FuY2VsRnVsbFNjcmVlbicsXG5cdFx0XHRcdCdtb3pGdWxsU2NyZWVuRWxlbWVudCcsXG5cdFx0XHRcdCdtb3pGdWxsU2NyZWVuRW5hYmxlZCcsXG5cdFx0XHRcdCdtb3pmdWxsc2NyZWVuY2hhbmdlJyxcblx0XHRcdFx0J21vemZ1bGxzY3JlZW5lcnJvcidcblx0XHRcdF0sXG5cdFx0XHRbXG5cdFx0XHRcdCdtc1JlcXVlc3RGdWxsc2NyZWVuJyxcblx0XHRcdFx0J21zRXhpdEZ1bGxzY3JlZW4nLFxuXHRcdFx0XHQnbXNGdWxsc2NyZWVuRWxlbWVudCcsXG5cdFx0XHRcdCdtc0Z1bGxzY3JlZW5FbmFibGVkJyxcblx0XHRcdFx0J01TRnVsbHNjcmVlbkNoYW5nZScsXG5cdFx0XHRcdCdNU0Z1bGxzY3JlZW5FcnJvcidcblx0XHRcdF1cblx0XHRdO1xuXG5cdFx0dmFyIGkgPSAwO1xuXHRcdHZhciBsID0gZm5NYXAubGVuZ3RoO1xuXHRcdHZhciByZXQgPSB7fTtcblxuXHRcdGZvciAoOyBpIDwgbDsgaSsrKSB7XG5cdFx0XHR2YWwgPSBmbk1hcFtpXTtcblx0XHRcdGlmICh2YWwgJiYgdmFsWzFdIGluIGRvY3VtZW50KSB7XG5cdFx0XHRcdGZvciAoaSA9IDA7IGkgPCB2YWwubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHRyZXRbZm5NYXBbMF1baV1dID0gdmFsW2ldO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiByZXQ7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9KSgpO1xuXG5cdHZhciBldmVudE5hbWVNYXAgPSB7XG5cdFx0Y2hhbmdlOiBmbi5mdWxsc2NyZWVuY2hhbmdlLFxuXHRcdGVycm9yOiBmbi5mdWxsc2NyZWVuZXJyb3Jcblx0fTtcblxuXHR2YXIgc2NyZWVuZnVsbCA9IHtcblx0XHRyZXF1ZXN0OiBmdW5jdGlvbiAoZWxlbSkge1xuXHRcdFx0dmFyIHJlcXVlc3QgPSBmbi5yZXF1ZXN0RnVsbHNjcmVlbjtcblxuXHRcdFx0ZWxlbSA9IGVsZW0gfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuXG5cdFx0XHQvLyBXb3JrIGFyb3VuZCBTYWZhcmkgNS4xIGJ1ZzogcmVwb3J0cyBzdXBwb3J0IGZvclxuXHRcdFx0Ly8ga2V5Ym9hcmQgaW4gZnVsbHNjcmVlbiBldmVuIHRob3VnaCBpdCBkb2Vzbid0LlxuXHRcdFx0Ly8gQnJvd3NlciBzbmlmZmluZywgc2luY2UgdGhlIGFsdGVybmF0aXZlIHdpdGhcblx0XHRcdC8vIHNldFRpbWVvdXQgaXMgZXZlbiB3b3JzZS5cblx0XHRcdGlmICgvIFZlcnNpb25cXC81XFwuMSg/OlxcLlxcZCspPyBTYWZhcmlcXC8vLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpIHtcblx0XHRcdFx0ZWxlbVtyZXF1ZXN0XSgpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZWxlbVtyZXF1ZXN0XShrZXlib2FyZEFsbG93ZWQgJiYgRWxlbWVudC5BTExPV19LRVlCT0FSRF9JTlBVVCk7XG5cdFx0XHR9XG5cdFx0fSxcblx0XHRleGl0OiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRkb2N1bWVudFtmbi5leGl0RnVsbHNjcmVlbl0oKTtcblx0XHR9LFxuXHRcdHRvZ2dsZTogZnVuY3Rpb24gKGVsZW0pIHtcblx0XHRcdGlmICh0aGlzLmlzRnVsbHNjcmVlbikge1xuXHRcdFx0XHR0aGlzLmV4aXQoKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRoaXMucmVxdWVzdChlbGVtKTtcblx0XHRcdH1cblx0XHR9LFxuXHRcdG9uY2hhbmdlOiBmdW5jdGlvbiAoY2FsbGJhY2spIHtcblx0XHRcdHRoaXMub24oJ2NoYW5nZScsIGNhbGxiYWNrKTtcblx0XHR9LFxuXHRcdG9uZXJyb3I6IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuXHRcdFx0dGhpcy5vbignZXJyb3InLCBjYWxsYmFjayk7XG5cdFx0fSxcblx0XHRvbjogZnVuY3Rpb24gKGV2ZW50LCBjYWxsYmFjaykge1xuXHRcdFx0dmFyIGV2ZW50TmFtZSA9IGV2ZW50TmFtZU1hcFtldmVudF07XG5cdFx0XHRpZiAoZXZlbnROYW1lKSB7XG5cdFx0XHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBjYWxsYmFjaywgZmFsc2UpO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0b2ZmOiBmdW5jdGlvbiAoZXZlbnQsIGNhbGxiYWNrKSB7XG5cdFx0XHR2YXIgZXZlbnROYW1lID0gZXZlbnROYW1lTWFwW2V2ZW50XTtcblx0XHRcdGlmIChldmVudE5hbWUpIHtcblx0XHRcdFx0ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGNhbGxiYWNrLCBmYWxzZSk7XG5cdFx0XHR9XG5cdFx0fSxcblx0XHRyYXc6IGZuXG5cdH07XG5cblx0aWYgKCFmbikge1xuXHRcdGlmIChpc0NvbW1vbmpzKSB7XG5cdFx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhbHNlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR3aW5kb3cuc2NyZWVuZnVsbCA9IGZhbHNlO1xuXHRcdH1cblxuXHRcdHJldHVybjtcblx0fVxuXG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHNjcmVlbmZ1bGwsIHtcblx0XHRpc0Z1bGxzY3JlZW46IHtcblx0XHRcdGdldDogZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRyZXR1cm4gQm9vbGVhbihkb2N1bWVudFtmbi5mdWxsc2NyZWVuRWxlbWVudF0pO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0ZWxlbWVudDoge1xuXHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcblx0XHRcdGdldDogZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRyZXR1cm4gZG9jdW1lbnRbZm4uZnVsbHNjcmVlbkVsZW1lbnRdO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0ZW5hYmxlZDoge1xuXHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcblx0XHRcdGdldDogZnVuY3Rpb24gKCkge1xuXHRcdFx0XHQvLyBDb2VyY2UgdG8gYm9vbGVhbiBpbiBjYXNlIG9mIG9sZCBXZWJLaXRcblx0XHRcdFx0cmV0dXJuIEJvb2xlYW4oZG9jdW1lbnRbZm4uZnVsbHNjcmVlbkVuYWJsZWRdKTtcblx0XHRcdH1cblx0XHR9XG5cdH0pO1xuXG5cdGlmIChpc0NvbW1vbmpzKSB7XG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBzY3JlZW5mdWxsO1xuXHR9IGVsc2Uge1xuXHRcdHdpbmRvdy5zY3JlZW5mdWxsID0gc2NyZWVuZnVsbDtcblx0fVxufSkoKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL3NjcmVlbmZ1bGwvZGlzdC9zY3JlZW5mdWxsLmpzXG4vLyBtb2R1bGUgaWQgPSA2OFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///68\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Logger = __webpack_require__(/*! ./Logger */ 0);\n\nvar _Logger2 = _interopRequireDefault(_Logger);\n\nvar _MediaStreamHandler = __webpack_require__(/*! ./MediaStreamHandler */ 3);\n\nvar _MediaStreamHandler2 = _interopRequireDefault(_MediaStreamHandler);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * eyeson Screen Capture Session\n **/\nvar ExtensionCaptureSession = function () {\n\n  /**\n   *  Note:\n   *  The adapter should already be initialised (listening for\n   *     window events) when we ask it if the extensionIsInstalled.\n   **/\n  /* eslint-disable max-statements */\n  function ExtensionCaptureSession(audioEnabled, eventHandler, send, notify) {\n    _classCallCheck(this, ExtensionCaptureSession);\n\n    this.stream = null;\n    this.send = send;\n    this.notify = notify;\n    this.audioEnabled = audioEnabled;\n    this.eventHandler = eventHandler;\n    this.adapter = this.eventHandler.extensionAdapter;\n    this.requestedPresenter = false;\n\n    this.end = this.end.bind(this);\n    this.start = this.start.bind(this);\n    this.getAudioStream = this.getAudioStream.bind(this);\n    this.attachAudioTrack = this.attachAudioTrack.bind(this);\n    this.attachEndHandler = this.attachEndHandler.bind(this);\n\n    this.adapter.onMessage(this.notify);\n  }\n  /* eslint-enable max-statements */\n\n  _createClass(ExtensionCaptureSession, [{\n    key: 'init',\n    value: function init() {\n      var _this = this;\n\n      return new Promise(function (resolve, reject) {\n        if (_this.adapter.extensionIsInstalled) {\n          resolve();\n        } else {\n          var message = 'Extension not installed';\n          _this.notify({\n            type: 'ext_not_installed',\n            details: { name: 'not_installed', message: message }\n          });\n          reject(new Error(message));\n        }\n      });\n    }\n\n    /**\n     * Add the stream id to the constraints template.\n     **/\n\n  }, {\n    key: 'showPicker',\n    value: function showPicker() {\n      return this.adapter.extensionIsInstalled ? this.adapter.request() : this.notify({ type: 'end_screen' });\n    }\n\n    /**\n     * Start a screen capture session, fetch an audio stream and attach it to\n     * the new screen stream.\n     **/\n\n  }, {\n    key: 'start',\n    value: function start(streamId) {\n      var _this2 = this;\n\n      _Logger2.default.debug('ExtensionCaptureSession::start stream: ', streamId);\n      this.streamId = streamId;\n      return this.getScreenStream().then(function (screenStream) {\n        _this2.stream = screenStream;\n      }).then(this.getAudioStream).then(this.attachAudioTrack).then(this.attachEndHandler).then(this.eventHandler._session.setStream.bind(this.eventHandler)).then(function () {\n        _this2.send({ type: 'desktopstreaming', on: true });\n      }).catch(function (error) {\n        _Logger2.default.error('ExtensionCaptureSession::start ', error);\n      });\n    }\n\n    /**\n     * Get the screen stream.\n     **/\n\n  }, {\n    key: 'getScreenStream',\n    value: function getScreenStream() {\n      return navigator.mediaDevices.getUserMedia(this.captureConstraints);\n    }\n  }, {\n    key: 'getAudioStream',\n    value: function getAudioStream() {\n      return new _MediaStreamHandler2.default({ audio: true, video: false }).getUserMedia();\n    }\n\n    /**\n     * Create an audio only stream and attach the audio track to a stream.\n     * Ensure to mute audio on demand by checking `audioEnabled`.\n     **/\n\n  }, {\n    key: 'attachAudioTrack',\n    value: function attachAudioTrack(audioStream) {\n      if (audioStream.getAudioTracks().length === 1) {\n        audioStream.getAudioTracks()[0].enabled = this.audioEnabled;\n        this.stream.addTrack(audioStream.getAudioTracks()[0]);\n      }\n    }\n\n    /**\n     * Define the action to be executed after stream ends.\n     **/\n\n  }, {\n    key: 'attachEndHandler',\n    value: function attachEndHandler() {\n      this.stream.getVideoTracks()[0].onended = this.end;\n      return this.stream;\n    }\n  }, {\n    key: 'end',\n    value: function end() {\n      if (this.stream) {\n        _MediaStreamHandler2.default.stop(this.stream);\n      }\n      this.adapter.cancelRequest();\n      this.send({ type: 'desktopstreaming', on: false });\n      this.send({ type: 'set_presenter', on: false });\n      this.notify({ type: 'end_screen' });\n      this.adapter.offMessage(this.notify);\n    }\n  }, {\n    key: 'captureConstraints',\n    get: function get() {\n      var constraints = ExtensionCaptureSession.constraintsTemplate;\n      constraints.video.mandatory.chromeMediaSourceId = this.streamId;\n      return constraints;\n    }\n\n    /**\n     * The resolution constraints are important for high resolution screens.\n     *\n     * Note: audio=true results in a NavigatorUserMediaError.\n     **/\n\n  }], [{\n    key: 'constraintsTemplate',\n    get: function get() {\n      return {\n        audio: false,\n        video: {\n          mandatory: {\n            chromeMediaSource: 'desktop',\n            maxWidth: 1920,\n            maxHeight: 1040,\n            maxFrameRate: 15\n          }\n        }\n      };\n    }\n  }]);\n\n  return ExtensionCaptureSession;\n}();\n\nexports.default = ExtensionCaptureSession;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNjkuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL0V4dGVuc2lvbkNhcHR1cmVTZXNzaW9uLmpzP2JhNGEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IExvZ2dlciBmcm9tICcuL0xvZ2dlcic7XG5pbXBvcnQgTWVkaWFTdHJlYW1IYW5kbGVyIGZyb20gJy4vTWVkaWFTdHJlYW1IYW5kbGVyJztcblxuLyoqXG4gKiBleWVzb24gU2NyZWVuIENhcHR1cmUgU2Vzc2lvblxuICoqL1xuY2xhc3MgRXh0ZW5zaW9uQ2FwdHVyZVNlc3Npb24ge1xuXG4gIC8qKlxuICAgKiAgTm90ZTpcbiAgICogIFRoZSBhZGFwdGVyIHNob3VsZCBhbHJlYWR5IGJlIGluaXRpYWxpc2VkIChsaXN0ZW5pbmcgZm9yXG4gICAqICAgICB3aW5kb3cgZXZlbnRzKSB3aGVuIHdlIGFzayBpdCBpZiB0aGUgZXh0ZW5zaW9uSXNJbnN0YWxsZWQuXG4gICAqKi9cbiAgLyogZXNsaW50LWRpc2FibGUgbWF4LXN0YXRlbWVudHMgKi9cbiAgY29uc3RydWN0b3IoYXVkaW9FbmFibGVkLCBldmVudEhhbmRsZXIsIHNlbmQsIG5vdGlmeSkge1xuICAgIHRoaXMuc3RyZWFtID0gbnVsbDtcbiAgICB0aGlzLnNlbmQgPSBzZW5kO1xuICAgIHRoaXMubm90aWZ5ID0gbm90aWZ5O1xuICAgIHRoaXMuYXVkaW9FbmFibGVkID0gYXVkaW9FbmFibGVkO1xuICAgIHRoaXMuZXZlbnRIYW5kbGVyID0gZXZlbnRIYW5kbGVyO1xuICAgIHRoaXMuYWRhcHRlciA9IHRoaXMuZXZlbnRIYW5kbGVyLmV4dGVuc2lvbkFkYXB0ZXI7XG4gICAgdGhpcy5yZXF1ZXN0ZWRQcmVzZW50ZXIgPSBmYWxzZTtcblxuICAgIHRoaXMuZW5kID0gdGhpcy5lbmQuYmluZCh0aGlzKTtcbiAgICB0aGlzLnN0YXJ0ID0gdGhpcy5zdGFydC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuZ2V0QXVkaW9TdHJlYW0gPSB0aGlzLmdldEF1ZGlvU3RyZWFtLmJpbmQodGhpcyk7XG4gICAgdGhpcy5hdHRhY2hBdWRpb1RyYWNrID0gdGhpcy5hdHRhY2hBdWRpb1RyYWNrLmJpbmQodGhpcyk7XG4gICAgdGhpcy5hdHRhY2hFbmRIYW5kbGVyID0gdGhpcy5hdHRhY2hFbmRIYW5kbGVyLmJpbmQodGhpcyk7XG5cbiAgICB0aGlzLmFkYXB0ZXIub25NZXNzYWdlKHRoaXMubm90aWZ5KTtcbiAgfVxuICAvKiBlc2xpbnQtZW5hYmxlIG1heC1zdGF0ZW1lbnRzICovXG5cbiAgaW5pdCgpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgaWYgKHRoaXMuYWRhcHRlci5leHRlbnNpb25Jc0luc3RhbGxlZCkge1xuICAgICAgICByZXNvbHZlKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gJ0V4dGVuc2lvbiBub3QgaW5zdGFsbGVkJztcbiAgICAgICAgdGhpcy5ub3RpZnkoe1xuICAgICAgICAgIHR5cGU6ICdleHRfbm90X2luc3RhbGxlZCcsXG4gICAgICAgICAgZGV0YWlsczogeyBuYW1lOiAnbm90X2luc3RhbGxlZCcsIG1lc3NhZ2U6IG1lc3NhZ2UgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihtZXNzYWdlKSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQWRkIHRoZSBzdHJlYW0gaWQgdG8gdGhlIGNvbnN0cmFpbnRzIHRlbXBsYXRlLlxuICAgKiovXG4gIGdldCBjYXB0dXJlQ29uc3RyYWludHMoKSB7XG4gICAgbGV0IGNvbnN0cmFpbnRzID0gRXh0ZW5zaW9uQ2FwdHVyZVNlc3Npb24uY29uc3RyYWludHNUZW1wbGF0ZTtcbiAgICBjb25zdHJhaW50cy52aWRlby5tYW5kYXRvcnkuY2hyb21lTWVkaWFTb3VyY2VJZCA9IHRoaXMuc3RyZWFtSWQ7XG4gICAgcmV0dXJuIGNvbnN0cmFpbnRzO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSByZXNvbHV0aW9uIGNvbnN0cmFpbnRzIGFyZSBpbXBvcnRhbnQgZm9yIGhpZ2ggcmVzb2x1dGlvbiBzY3JlZW5zLlxuICAgKlxuICAgKiBOb3RlOiBhdWRpbz10cnVlIHJlc3VsdHMgaW4gYSBOYXZpZ2F0b3JVc2VyTWVkaWFFcnJvci5cbiAgICoqL1xuICBzdGF0aWMgZ2V0IGNvbnN0cmFpbnRzVGVtcGxhdGUoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGF1ZGlvOiBmYWxzZSxcbiAgICAgIHZpZGVvOiB7XG4gICAgICAgIG1hbmRhdG9yeToge1xuICAgICAgICAgIGNocm9tZU1lZGlhU291cmNlOiAnZGVza3RvcCcsXG4gICAgICAgICAgbWF4V2lkdGg6IDE5MjAsXG4gICAgICAgICAgbWF4SGVpZ2h0OiAxMDQwLFxuICAgICAgICAgIG1heEZyYW1lUmF0ZTogMTVcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH1cblxuICBzaG93UGlja2VyKCkge1xuICAgIHJldHVybiB0aGlzLmFkYXB0ZXIuZXh0ZW5zaW9uSXNJbnN0YWxsZWRcbiAgICAgID8gdGhpcy5hZGFwdGVyLnJlcXVlc3QoKVxuICAgICAgOiB0aGlzLm5vdGlmeSh7IHR5cGU6ICdlbmRfc2NyZWVuJyB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdGFydCBhIHNjcmVlbiBjYXB0dXJlIHNlc3Npb24sIGZldGNoIGFuIGF1ZGlvIHN0cmVhbSBhbmQgYXR0YWNoIGl0IHRvXG4gICAqIHRoZSBuZXcgc2NyZWVuIHN0cmVhbS5cbiAgICoqL1xuICBzdGFydChzdHJlYW1JZCkge1xuICAgIExvZ2dlci5kZWJ1ZygnRXh0ZW5zaW9uQ2FwdHVyZVNlc3Npb246OnN0YXJ0IHN0cmVhbTogJywgc3RyZWFtSWQpO1xuICAgIHRoaXMuc3RyZWFtSWQgPSBzdHJlYW1JZDtcbiAgICByZXR1cm4gdGhpcy5nZXRTY3JlZW5TdHJlYW0oKVxuICAgICAgLnRoZW4oc2NyZWVuU3RyZWFtID0+IHtcbiAgICAgICAgdGhpcy5zdHJlYW0gPSBzY3JlZW5TdHJlYW07XG4gICAgICB9KVxuICAgICAgLnRoZW4odGhpcy5nZXRBdWRpb1N0cmVhbSlcbiAgICAgIC50aGVuKHRoaXMuYXR0YWNoQXVkaW9UcmFjaylcbiAgICAgIC50aGVuKHRoaXMuYXR0YWNoRW5kSGFuZGxlcilcbiAgICAgIC50aGVuKHRoaXMuZXZlbnRIYW5kbGVyLl9zZXNzaW9uLnNldFN0cmVhbS5iaW5kKHRoaXMuZXZlbnRIYW5kbGVyKSlcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgdGhpcy5zZW5kKHsgdHlwZTogJ2Rlc2t0b3BzdHJlYW1pbmcnLCBvbjogdHJ1ZSB9KTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICBMb2dnZXIuZXJyb3IoJ0V4dGVuc2lvbkNhcHR1cmVTZXNzaW9uOjpzdGFydCAnLCBlcnJvcik7XG4gICAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHNjcmVlbiBzdHJlYW0uXG4gICAqKi9cbiAgZ2V0U2NyZWVuU3RyZWFtKCkge1xuICAgIHJldHVybiBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSh0aGlzLmNhcHR1cmVDb25zdHJhaW50cyk7XG4gIH1cblxuICBnZXRBdWRpb1N0cmVhbSgpIHtcbiAgICByZXR1cm4gbmV3IE1lZGlhU3RyZWFtSGFuZGxlcih7IGF1ZGlvOiB0cnVlLCB2aWRlbzogZmFsc2UgfSkuZ2V0VXNlck1lZGlhKCk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGFuIGF1ZGlvIG9ubHkgc3RyZWFtIGFuZCBhdHRhY2ggdGhlIGF1ZGlvIHRyYWNrIHRvIGEgc3RyZWFtLlxuICAgKiBFbnN1cmUgdG8gbXV0ZSBhdWRpbyBvbiBkZW1hbmQgYnkgY2hlY2tpbmcgYGF1ZGlvRW5hYmxlZGAuXG4gICAqKi9cbiAgYXR0YWNoQXVkaW9UcmFjayhhdWRpb1N0cmVhbSkge1xuICAgIGlmIChhdWRpb1N0cmVhbS5nZXRBdWRpb1RyYWNrcygpLmxlbmd0aCA9PT0gMSkge1xuICAgICAgYXVkaW9TdHJlYW0uZ2V0QXVkaW9UcmFja3MoKVswXS5lbmFibGVkID0gdGhpcy5hdWRpb0VuYWJsZWQ7XG4gICAgICB0aGlzLnN0cmVhbS5hZGRUcmFjayhhdWRpb1N0cmVhbS5nZXRBdWRpb1RyYWNrcygpWzBdKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRGVmaW5lIHRoZSBhY3Rpb24gdG8gYmUgZXhlY3V0ZWQgYWZ0ZXIgc3RyZWFtIGVuZHMuXG4gICAqKi9cbiAgYXR0YWNoRW5kSGFuZGxlcigpIHtcbiAgICB0aGlzLnN0cmVhbS5nZXRWaWRlb1RyYWNrcygpWzBdLm9uZW5kZWQgPSB0aGlzLmVuZDtcbiAgICByZXR1cm4gdGhpcy5zdHJlYW07XG4gIH1cblxuICBlbmQoKSB7XG4gICAgaWYgKHRoaXMuc3RyZWFtKSB7XG4gICAgICBNZWRpYVN0cmVhbUhhbmRsZXIuc3RvcCh0aGlzLnN0cmVhbSk7XG4gICAgfVxuICAgIHRoaXMuYWRhcHRlci5jYW5jZWxSZXF1ZXN0KCk7XG4gICAgdGhpcy5zZW5kKHsgdHlwZTogJ2Rlc2t0b3BzdHJlYW1pbmcnLCBvbjogZmFsc2UgfSk7XG4gICAgdGhpcy5zZW5kKHsgdHlwZTogJ3NldF9wcmVzZW50ZXInLCBvbjogZmFsc2UgfSk7XG4gICAgdGhpcy5ub3RpZnkoeyB0eXBlOiAnZW5kX3NjcmVlbicgfSk7XG4gICAgdGhpcy5hZGFwdGVyLm9mZk1lc3NhZ2UodGhpcy5ub3RpZnkpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEV4dGVuc2lvbkNhcHR1cmVTZXNzaW9uO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNyYy9FeHRlbnNpb25DYXB0dXJlU2Vzc2lvbi5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7Ozs7O0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTs7Ozs7QUFLQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUE0QkE7QUFDQTtBQUdBO0FBQ0E7QUFDQTs7Ozs7OztBQUlBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFNQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FBR0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUE3RkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFEQTtBQUZBO0FBV0E7Ozs7OztBQXlFQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///69\n")},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };\n\nvar _FeatureDetector = __webpack_require__(/*! ./FeatureDetector */ 4);\n\nvar _FeatureDetector2 = _interopRequireDefault(_FeatureDetector);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Wrapper around localStorage API in order to prefix keys to be stored and\n * offer default values on demand. If no localStorage is provided by\n * the user-agent, we use a temporary fallbackStorage.\n **/\nexports.default = function () {\n  var prefix = \'eyeson.\';\n  var fallbackStorage = {};\n  var hasLocalStorage = _FeatureDetector2.default.hasLocalStorage();\n\n  return {\n    store: function store(key, value) {\n      if (!hasLocalStorage) {\n        fallbackStorage[key] = value;\n        return;\n      }\n      window.localStorage.setItem(prefix + key, JSON.stringify(value));\n    },\n    load: function load(key, defaultValueParam) {\n      var defaultValue = defaultValueParam;\n      if ((typeof defaultValue === \'undefined\' ? \'undefined\' : _typeof(defaultValue)) === \'object\') {\n        defaultValue = Object.assign({}, defaultValue);\n      }\n      if (!hasLocalStorage) {\n        return fallbackStorage[key] || defaultValue;\n      }\n      var storedValue = window.localStorage.getItem(prefix + key);\n      if (!storedValue) {\n        return defaultValue;\n      }\n      return JSON.parse(storedValue);\n    }\n  };\n}();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL0xvY2FsU3RvcmFnZS5qcz8xMTI2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBGZWF0dXJlRGV0ZWN0b3IgZnJvbSAnLi9GZWF0dXJlRGV0ZWN0b3InO1xuXG4vKipcbiAqIFdyYXBwZXIgYXJvdW5kIGxvY2FsU3RvcmFnZSBBUEkgaW4gb3JkZXIgdG8gcHJlZml4IGtleXMgdG8gYmUgc3RvcmVkIGFuZFxuICogb2ZmZXIgZGVmYXVsdCB2YWx1ZXMgb24gZGVtYW5kLiBJZiBubyBsb2NhbFN0b3JhZ2UgaXMgcHJvdmlkZWQgYnlcbiAqIHRoZSB1c2VyLWFnZW50LCB3ZSB1c2UgYSB0ZW1wb3JhcnkgZmFsbGJhY2tTdG9yYWdlLlxuICoqL1xuZXhwb3J0IGRlZmF1bHQgKGZ1bmN0aW9uKCkge1xuICBjb25zdCBwcmVmaXggPSAnZXllc29uLic7XG4gIGxldCBmYWxsYmFja1N0b3JhZ2UgPSB7fTtcbiAgY29uc3QgaGFzTG9jYWxTdG9yYWdlID0gRmVhdHVyZURldGVjdG9yLmhhc0xvY2FsU3RvcmFnZSgpO1xuXG4gIHJldHVybiB7XG4gICAgc3RvcmU6IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcbiAgICAgIGlmICghaGFzTG9jYWxTdG9yYWdlKSB7XG4gICAgICAgIGZhbGxiYWNrU3RvcmFnZVtrZXldID0gdmFsdWU7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShwcmVmaXggKyBrZXksIEpTT04uc3RyaW5naWZ5KHZhbHVlKSk7XG4gICAgfSxcbiAgICBsb2FkOiBmdW5jdGlvbihrZXksIGRlZmF1bHRWYWx1ZVBhcmFtKSB7XG4gICAgICBsZXQgZGVmYXVsdFZhbHVlID0gZGVmYXVsdFZhbHVlUGFyYW07XG4gICAgICBpZiAodHlwZW9mIGRlZmF1bHRWYWx1ZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgZGVmYXVsdFZhbHVlID0gT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdFZhbHVlKTtcbiAgICAgIH1cbiAgICAgIGlmICghaGFzTG9jYWxTdG9yYWdlKSB7XG4gICAgICAgIHJldHVybiBmYWxsYmFja1N0b3JhZ2Vba2V5XSB8fCBkZWZhdWx0VmFsdWU7XG4gICAgICB9XG4gICAgICBsZXQgc3RvcmVkVmFsdWUgPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0ocHJlZml4ICsga2V5KTtcbiAgICAgIGlmICghc3RvcmVkVmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIGRlZmF1bHRWYWx1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBKU09OLnBhcnNlKHN0b3JlZFZhbHVlKTtcbiAgICB9XG4gIH07XG59KCkpO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNyYy9Mb2NhbFN0b3JhZ2UuanMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDQTs7Ozs7QUFDQTs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFyQkE7QUF1QkEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///70\n')},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Ninja Stream\n **/\nvar NinjaStream = function () {\n  function NinjaStream() {\n    _classCallCheck(this, NinjaStream);\n\n    this._stream = this.createStream();\n  }\n\n  _createClass(NinjaStream, [{\n    key: 'createStream',\n\n\n    /**\n     * Create a dummy stream from a canvas element.\n     **/\n    value: function createStream() {\n      var width = 0;\n      var height = 0;\n      var canvas = Object.assign(document.createElement('canvas'), {\n        width: width,\n        height: height\n      });\n      canvas.getContext('2d').fillRect(0, 0, width, height);\n      return canvas.captureStream();\n    }\n  }, {\n    key: 'stream',\n    get: function get() {\n      return this._stream;\n    }\n  }]);\n\n  return NinjaStream;\n}();\n\nexports.default = NinjaStream;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL05pbmphU3RyZWFtLmpzPzU4NDciXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBOaW5qYSBTdHJlYW1cbiAqKi9cbmNsYXNzIE5pbmphU3RyZWFtIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5fc3RyZWFtID0gdGhpcy5jcmVhdGVTdHJlYW0oKTtcbiAgfVxuXG4gIGdldCBzdHJlYW0oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3N0cmVhbTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBkdW1teSBzdHJlYW0gZnJvbSBhIGNhbnZhcyBlbGVtZW50LlxuICAgKiovXG4gIGNyZWF0ZVN0cmVhbSgpIHtcbiAgICBjb25zdCB3aWR0aCA9IDA7XG4gICAgY29uc3QgaGVpZ2h0ID0gMDtcbiAgICBsZXQgY2FudmFzID0gT2JqZWN0LmFzc2lnbihkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKSwge1xuICAgICAgd2lkdGgsXG4gICAgICBoZWlnaHRcbiAgICB9KTtcbiAgICBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKS5maWxsUmVjdCgwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICByZXR1cm4gY2FudmFzLmNhcHR1cmVTdHJlYW0oKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBOaW5qYVN0cmVhbTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBzcmMvTmluamFTdHJlYW0uanMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTs7O0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7Ozs7O0FBS0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBOzs7QUFoQkE7QUFDQTtBQUNBOzs7Ozs7QUFpQkEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///71\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Logger = __webpack_require__(/*! ./Logger */ 0);\n\nvar _Logger2 = _interopRequireDefault(_Logger);\n\nvar _MediaStreamHandler = __webpack_require__(/*! ./MediaStreamHandler */ 3);\n\nvar _MediaStreamHandler2 = _interopRequireDefault(_MediaStreamHandler);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * eyeson Screen Capture Session\n **/\nvar NavigatorCaptureSession = function () {\n\n  /**\n   *  Note:\n   *  1. The installer has to be started after a user initiated action.\n   *  2. The adapter should already be initialised (listening for\n   *     window events) when we ask it if the extensionIsInstalled.\n   **/\n  function NavigatorCaptureSession(eventHandler, send, notify) {\n    _classCallCheck(this, NavigatorCaptureSession);\n\n    this.send = send;\n    this.stream = null;\n    this.notify = notify;\n    this.eventHandler = eventHandler;\n\n    this.end = this.end.bind(this);\n    this.start = this.start.bind(this);\n    this.attachAudioTrack = this.attachAudioTrack.bind(this);\n    this.attachEndHandler = this.attachEndHandler.bind(this);\n  }\n\n  _createClass(NavigatorCaptureSession, [{\n    key: 'init',\n    value: function init() {\n      return new Promise(function (res) {\n        return res();\n      });\n    }\n  }, {\n    key: 'showPicker',\n    value: function showPicker() {\n      // So we get to the next action in the UI\n      this.notify({ type: 'receive_screen', streamId: null });\n    }\n\n    /**\n     * Start a screen capture session.\n     **/\n\n  }, {\n    key: 'start',\n    value: function start() {\n      var _this = this;\n\n      _Logger2.default.debug('NavigatorCaptureSession::start');\n\n      return this.getScreenStream().then(function (screenStream) {\n        _this.stream = screenStream;\n      }).then(this.attachAudioTrack).then(this.attachEndHandler).then(this.eventHandler._session.setStream.bind(this.eventHandler)).then(function () {\n        _this.send({ type: 'desktopstreaming', on: true });\n      }).catch(function (error) {\n        _this.notify({ type: 'capture_error', name: 'error_' + error.name });\n        _Logger2.default.error('NavigatorCaptureSession::start ', error);\n      });\n    }\n\n    /**\n     * Get the screen stream.\n     **/\n\n  }, {\n    key: 'getScreenStream',\n    value: function getScreenStream() {\n      return navigator.mediaDevices.getUserMedia(this.captureConstraints);\n    }\n\n    /**\n     * Attach the previously acquired audio track to the new stream.\n     * This way we also ensure no audio input issues occurr in FF, since the\n     * browser does not allow acquisition of multiple input sources at the same\n     * time.\n     **/\n\n  }, {\n    key: 'attachAudioTrack',\n    value: function attachAudioTrack() {\n      var audioTrack = this.peerConnection.getSenders().filter(function (sender) {\n        return sender.track.kind === 'audio';\n      })[0].track;\n\n      this.stream.addTrack(audioTrack, this.stream);\n    }\n\n    /**\n     * Define the action to be executed after stream ends.\n     **/\n\n  }, {\n    key: 'attachEndHandler',\n    value: function attachEndHandler() {\n      this.stream.getVideoTracks()[0].onended = this.end;\n      return this.stream;\n    }\n  }, {\n    key: 'end',\n    value: function end() {\n      if (this.stream) {\n        _MediaStreamHandler2.default.stop(this.stream);\n      }\n      this.send({ type: 'desktopstreaming', on: false });\n      this.send({ type: 'set_presenter', on: false });\n      this.notify({ type: 'end_screen' });\n    }\n  }, {\n    key: 'peerConnection',\n    get: function get() {\n      return this.eventHandler._session.session.sessionDescriptionHandler.peerConnection;\n    }\n\n    /**\n     * Valid options for the mediaSource are 'screen', 'window' and 'application'\n     **/\n\n  }, {\n    key: 'captureConstraints',\n    get: function get() {\n      return {\n        video: {\n          mediaSource: 'screen',\n          width: { max: 1920 },\n          height: { max: 1040 },\n          frameRate: { max: 15 }\n        }\n      };\n    }\n  }]);\n\n  return NavigatorCaptureSession;\n}();\n\nexports.default = NavigatorCaptureSession;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL05hdmlnYXRvckNhcHR1cmVTZXNzaW9uLmpzP2QzZGQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IExvZ2dlciBmcm9tICcuL0xvZ2dlcic7XG5pbXBvcnQgTWVkaWFTdHJlYW1IYW5kbGVyIGZyb20gJy4vTWVkaWFTdHJlYW1IYW5kbGVyJztcblxuLyoqXG4gKiBleWVzb24gU2NyZWVuIENhcHR1cmUgU2Vzc2lvblxuICoqL1xuY2xhc3MgTmF2aWdhdG9yQ2FwdHVyZVNlc3Npb24ge1xuXG4gIC8qKlxuICAgKiAgTm90ZTpcbiAgICogIDEuIFRoZSBpbnN0YWxsZXIgaGFzIHRvIGJlIHN0YXJ0ZWQgYWZ0ZXIgYSB1c2VyIGluaXRpYXRlZCBhY3Rpb24uXG4gICAqICAyLiBUaGUgYWRhcHRlciBzaG91bGQgYWxyZWFkeSBiZSBpbml0aWFsaXNlZCAobGlzdGVuaW5nIGZvclxuICAgKiAgICAgd2luZG93IGV2ZW50cykgd2hlbiB3ZSBhc2sgaXQgaWYgdGhlIGV4dGVuc2lvbklzSW5zdGFsbGVkLlxuICAgKiovXG4gIGNvbnN0cnVjdG9yKGV2ZW50SGFuZGxlciwgc2VuZCwgbm90aWZ5KSB7XG4gICAgdGhpcy5zZW5kID0gc2VuZDtcbiAgICB0aGlzLnN0cmVhbSA9IG51bGw7XG4gICAgdGhpcy5ub3RpZnkgPSBub3RpZnk7XG4gICAgdGhpcy5ldmVudEhhbmRsZXIgPSBldmVudEhhbmRsZXI7XG5cbiAgICB0aGlzLmVuZCA9IHRoaXMuZW5kLmJpbmQodGhpcyk7XG4gICAgdGhpcy5zdGFydCA9IHRoaXMuc3RhcnQuYmluZCh0aGlzKTtcbiAgICB0aGlzLmF0dGFjaEF1ZGlvVHJhY2sgPSB0aGlzLmF0dGFjaEF1ZGlvVHJhY2suYmluZCh0aGlzKTtcbiAgICB0aGlzLmF0dGFjaEVuZEhhbmRsZXIgPSB0aGlzLmF0dGFjaEVuZEhhbmRsZXIuYmluZCh0aGlzKTtcbiAgfVxuXG4gIGluaXQoKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlcyA9PiByZXMoKSk7XG4gIH1cblxuICBnZXQgcGVlckNvbm5lY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuZXZlbnRIYW5kbGVyLl9zZXNzaW9uLnNlc3Npb24uc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlclxuICAgICAgLnBlZXJDb25uZWN0aW9uO1xuICB9XG5cbiAgLyoqXG4gICAqIFZhbGlkIG9wdGlvbnMgZm9yIHRoZSBtZWRpYVNvdXJjZSBhcmUgJ3NjcmVlbicsICd3aW5kb3cnIGFuZCAnYXBwbGljYXRpb24nXG4gICAqKi9cbiAgZ2V0IGNhcHR1cmVDb25zdHJhaW50cygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdmlkZW86IHtcbiAgICAgICAgbWVkaWFTb3VyY2U6ICdzY3JlZW4nLFxuICAgICAgICB3aWR0aDogeyBtYXg6IDE5MjAgfSxcbiAgICAgICAgaGVpZ2h0OiB7IG1heDogMTA0MCB9LFxuICAgICAgICBmcmFtZVJhdGU6IHsgbWF4OiAxNSB9XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIHNob3dQaWNrZXIoKSB7XG4gICAgLy8gU28gd2UgZ2V0IHRvIHRoZSBuZXh0IGFjdGlvbiBpbiB0aGUgVUlcbiAgICB0aGlzLm5vdGlmeSh7IHR5cGU6ICdyZWNlaXZlX3NjcmVlbicsIHN0cmVhbUlkOiBudWxsIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0YXJ0IGEgc2NyZWVuIGNhcHR1cmUgc2Vzc2lvbi5cbiAgICoqL1xuICBzdGFydCgpIHtcbiAgICBMb2dnZXIuZGVidWcoJ05hdmlnYXRvckNhcHR1cmVTZXNzaW9uOjpzdGFydCcpO1xuXG4gICAgcmV0dXJuIHRoaXMuZ2V0U2NyZWVuU3RyZWFtKClcbiAgICAgIC50aGVuKHNjcmVlblN0cmVhbSA9PiB7XG4gICAgICAgIHRoaXMuc3RyZWFtID0gc2NyZWVuU3RyZWFtO1xuICAgICAgfSlcbiAgICAgIC50aGVuKHRoaXMuYXR0YWNoQXVkaW9UcmFjaylcbiAgICAgIC50aGVuKHRoaXMuYXR0YWNoRW5kSGFuZGxlcilcbiAgICAgIC50aGVuKHRoaXMuZXZlbnRIYW5kbGVyLl9zZXNzaW9uLnNldFN0cmVhbS5iaW5kKHRoaXMuZXZlbnRIYW5kbGVyKSlcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgdGhpcy5zZW5kKHsgdHlwZTogJ2Rlc2t0b3BzdHJlYW1pbmcnLCBvbjogdHJ1ZSB9KTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICB0aGlzLm5vdGlmeSh7IHR5cGU6ICdjYXB0dXJlX2Vycm9yJywgbmFtZTogJ2Vycm9yXycgKyBlcnJvci5uYW1lIH0pO1xuICAgICAgICBMb2dnZXIuZXJyb3IoJ05hdmlnYXRvckNhcHR1cmVTZXNzaW9uOjpzdGFydCAnLCBlcnJvcik7XG4gICAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHNjcmVlbiBzdHJlYW0uXG4gICAqKi9cbiAgZ2V0U2NyZWVuU3RyZWFtKCkge1xuICAgIHJldHVybiBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSh0aGlzLmNhcHR1cmVDb25zdHJhaW50cyk7XG4gIH1cblxuICAvKipcbiAgICogQXR0YWNoIHRoZSBwcmV2aW91c2x5IGFjcXVpcmVkIGF1ZGlvIHRyYWNrIHRvIHRoZSBuZXcgc3RyZWFtLlxuICAgKiBUaGlzIHdheSB3ZSBhbHNvIGVuc3VyZSBubyBhdWRpbyBpbnB1dCBpc3N1ZXMgb2NjdXJyIGluIEZGLCBzaW5jZSB0aGVcbiAgICogYnJvd3NlciBkb2VzIG5vdCBhbGxvdyBhY3F1aXNpdGlvbiBvZiBtdWx0aXBsZSBpbnB1dCBzb3VyY2VzIGF0IHRoZSBzYW1lXG4gICAqIHRpbWUuXG4gICAqKi9cbiAgYXR0YWNoQXVkaW9UcmFjaygpIHtcbiAgICBjb25zdCBhdWRpb1RyYWNrID0gdGhpcy5wZWVyQ29ubmVjdGlvblxuICAgICAgLmdldFNlbmRlcnMoKVxuICAgICAgLmZpbHRlcihzZW5kZXIgPT4gc2VuZGVyLnRyYWNrLmtpbmQgPT09ICdhdWRpbycpWzBdLnRyYWNrO1xuXG4gICAgdGhpcy5zdHJlYW0uYWRkVHJhY2soYXVkaW9UcmFjaywgdGhpcy5zdHJlYW0pO1xuICB9XG5cbiAgLyoqXG4gICAqIERlZmluZSB0aGUgYWN0aW9uIHRvIGJlIGV4ZWN1dGVkIGFmdGVyIHN0cmVhbSBlbmRzLlxuICAgKiovXG4gIGF0dGFjaEVuZEhhbmRsZXIoKSB7XG4gICAgdGhpcy5zdHJlYW0uZ2V0VmlkZW9UcmFja3MoKVswXS5vbmVuZGVkID0gdGhpcy5lbmQ7XG4gICAgcmV0dXJuIHRoaXMuc3RyZWFtO1xuICB9XG5cbiAgZW5kKCkge1xuICAgIGlmICh0aGlzLnN0cmVhbSkge1xuICAgICAgTWVkaWFTdHJlYW1IYW5kbGVyLnN0b3AodGhpcy5zdHJlYW0pO1xuICAgIH1cbiAgICB0aGlzLnNlbmQoeyB0eXBlOiAnZGVza3RvcHN0cmVhbWluZycsIG9uOiBmYWxzZSB9KTtcbiAgICB0aGlzLnNlbmQoeyB0eXBlOiAnc2V0X3ByZXNlbnRlcicsIG9uOiBmYWxzZSB9KTtcbiAgICB0aGlzLm5vdGlmeSh7IHR5cGU6ICdlbmRfc2NyZWVuJyB9KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBOYXZpZ2F0b3JDYXB0dXJlU2Vzc2lvbjtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBzcmMvTmF2aWdhdG9yQ2FwdHVyZVNlc3Npb24uanMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7Ozs7OztBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7Ozs7OztBQU1BO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7OztBQXFCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQUdBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFLQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7QUFNQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQUdBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFsRkE7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7Ozs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQURBO0FBUUE7Ozs7OztBQW9FQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///72\n")},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\nexports.StopPlaybackEvent = exports.StartPlaybackEvent = exports.GetPlaybacksEvent = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _BaseEvent3 = __webpack_require__(/*! ./BaseEvent */ 1);\n\nvar _BaseEvent4 = _interopRequireDefault(_BaseEvent3);\n\nvar _PublicEvent2 = __webpack_require__(/*! ./PublicEvent */ 2);\n\nvar _PublicEvent3 = _interopRequireDefault(_PublicEvent2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar GetPlaybacksEvent = function (_PublicEvent) {\n  _inherits(GetPlaybacksEvent, _PublicEvent);\n\n  function GetPlaybacksEvent() {\n    _classCallCheck(this, GetPlaybacksEvent);\n\n    return _possibleConstructorReturn(this, (GetPlaybacksEvent.__proto__ || Object.getPrototypeOf(GetPlaybacksEvent)).apply(this, arguments));\n  }\n\n  _createClass(GetPlaybacksEvent, [{\n    key: \'handle\',\n    value: function handle() {\n      var _this2 = this;\n\n      this.context._api.getPlaybacks(function (response) {\n        return _get(GetPlaybacksEvent.prototype.__proto__ || Object.getPrototypeOf(GetPlaybacksEvent.prototype), \'handle\', _this2).call(_this2, { type: \'playbacks\', playbacks: response });\n      });\n    }\n  }]);\n\n  return GetPlaybacksEvent;\n}(_PublicEvent3.default);\n\nvar StartPlaybackEvent = function (_BaseEvent) {\n  _inherits(StartPlaybackEvent, _BaseEvent);\n\n  function StartPlaybackEvent() {\n    _classCallCheck(this, StartPlaybackEvent);\n\n    return _possibleConstructorReturn(this, (StartPlaybackEvent.__proto__ || Object.getPrototypeOf(StartPlaybackEvent)).apply(this, arguments));\n  }\n\n  _createClass(StartPlaybackEvent, [{\n    key: \'handle\',\n    value: function handle(msg) {\n      this.context._api.startPlayback(msg.playback);\n    }\n  }]);\n\n  return StartPlaybackEvent;\n}(_BaseEvent4.default);\n\nvar StopPlaybackEvent = function (_BaseEvent2) {\n  _inherits(StopPlaybackEvent, _BaseEvent2);\n\n  function StopPlaybackEvent() {\n    _classCallCheck(this, StopPlaybackEvent);\n\n    return _possibleConstructorReturn(this, (StopPlaybackEvent.__proto__ || Object.getPrototypeOf(StopPlaybackEvent)).apply(this, arguments));\n  }\n\n  _createClass(StopPlaybackEvent, [{\n    key: \'handle\',\n    value: function handle(msg) {\n      this.context._api.stopPlayback(msg.playback);\n    }\n  }]);\n\n  return StopPlaybackEvent;\n}(_BaseEvent4.default);\n\nexports.GetPlaybacksEvent = GetPlaybacksEvent;\nexports.StartPlaybackEvent = StartPlaybackEvent;\nexports.StopPlaybackEvent = StopPlaybackEvent;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2V2ZW50cy9QbGF5YmFja0V2ZW50cy5qcz9jZTdhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBCYXNlRXZlbnQgZnJvbSAnLi9CYXNlRXZlbnQnO1xuaW1wb3J0IFB1YmxpY0V2ZW50IGZyb20gJy4vUHVibGljRXZlbnQnO1xuXG5jbGFzcyBHZXRQbGF5YmFja3NFdmVudCBleHRlbmRzIFB1YmxpY0V2ZW50IHtcbiAgaGFuZGxlKCkge1xuICAgIHRoaXMuY29udGV4dC5fYXBpLmdldFBsYXliYWNrcyhyZXNwb25zZSA9PiB7XG4gICAgICByZXR1cm4gc3VwZXIuaGFuZGxlKHsgdHlwZTogJ3BsYXliYWNrcycsIHBsYXliYWNrczogcmVzcG9uc2UgfSk7XG4gICAgfSk7XG4gIH1cbn1cblxuY2xhc3MgU3RhcnRQbGF5YmFja0V2ZW50IGV4dGVuZHMgQmFzZUV2ZW50IHtcbiAgaGFuZGxlKG1zZykge1xuICAgIHRoaXMuY29udGV4dC5fYXBpLnN0YXJ0UGxheWJhY2sobXNnLnBsYXliYWNrKTtcbiAgfVxufVxuXG5jbGFzcyBTdG9wUGxheWJhY2tFdmVudCBleHRlbmRzIEJhc2VFdmVudCB7XG4gIGhhbmRsZShtc2cpIHtcbiAgICB0aGlzLmNvbnRleHQuX2FwaS5zdG9wUGxheWJhY2sobXNnLnBsYXliYWNrKTtcbiAgfVxufVxuXG5leHBvcnQgeyBHZXRQbGF5YmFja3NFdmVudCwgU3RhcnRQbGF5YmFja0V2ZW50LCBTdG9wUGxheWJhY2tFdmVudCB9O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNyYy9ldmVudHMvUGxheWJhY2tFdmVudHMuanMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7Ozs7Ozs7Ozs7QUFDQTs7Ozs7Ozs7Ozs7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FBR0E7Ozs7Ozs7Ozs7O0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUFHQTs7Ozs7Ozs7Ozs7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQUdBO0FBQUE7QUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///73\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\nexports.StopAnnotationEvent = exports.StartAnnotationEvent = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _PublicEvent3 = __webpack_require__(/*! ./PublicEvent */ 2);\n\nvar _PublicEvent4 = _interopRequireDefault(_PublicEvent3);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar StartAnnotationEvent = function (_PublicEvent) {\n  _inherits(StartAnnotationEvent, _PublicEvent);\n\n  function StartAnnotationEvent() {\n    _classCallCheck(this, StartAnnotationEvent);\n\n    return _possibleConstructorReturn(this, (StartAnnotationEvent.__proto__ || Object.getPrototypeOf(StartAnnotationEvent)).apply(this, arguments));\n  }\n\n  _createClass(StartAnnotationEvent, [{\n    key: \'handle\',\n    value: function handle() {\n      var _this2 = this;\n\n      this.context.annotationLoop = window.setInterval(function () {\n        _this2.context._api.createAnnotation(function (response) {\n          return _get(StartAnnotationEvent.prototype.__proto__ || Object.getPrototypeOf(StartAnnotationEvent.prototype), \'handle\', _this2).call(_this2, { type: \'annotation\', annotation: response });\n        }, function () {\n          window.clearInterval(_this2.context.annotationLoop);\n        });\n      }, 1000);\n    }\n  }]);\n\n  return StartAnnotationEvent;\n}(_PublicEvent4.default);\n\nvar StopAnnotationEvent = function (_PublicEvent2) {\n  _inherits(StopAnnotationEvent, _PublicEvent2);\n\n  function StopAnnotationEvent() {\n    _classCallCheck(this, StopAnnotationEvent);\n\n    return _possibleConstructorReturn(this, (StopAnnotationEvent.__proto__ || Object.getPrototypeOf(StopAnnotationEvent)).apply(this, arguments));\n  }\n\n  _createClass(StopAnnotationEvent, [{\n    key: \'handle\',\n    value: function handle() {\n      window.clearInterval(this.context.annotationLoop);\n      this.context._api.stopAnnotation();\n    }\n  }]);\n\n  return StopAnnotationEvent;\n}(_PublicEvent4.default);\n\nexports.StartAnnotationEvent = StartAnnotationEvent;\nexports.StopAnnotationEvent = StopAnnotationEvent;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2V2ZW50cy9Bbm5vdGF0aW9uRXZlbnRzLmpzP2Y1YTgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFB1YmxpY0V2ZW50IGZyb20gJy4vUHVibGljRXZlbnQnO1xuXG5jbGFzcyBTdGFydEFubm90YXRpb25FdmVudCBleHRlbmRzIFB1YmxpY0V2ZW50IHtcbiAgaGFuZGxlKCkge1xuICAgIHRoaXMuY29udGV4dC5hbm5vdGF0aW9uTG9vcCA9IHdpbmRvdy5zZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICB0aGlzLmNvbnRleHQuX2FwaS5jcmVhdGVBbm5vdGF0aW9uKFxuICAgICAgICByZXNwb25zZSA9PiB7XG4gICAgICAgICAgcmV0dXJuIHN1cGVyLmhhbmRsZSh7IHR5cGU6ICdhbm5vdGF0aW9uJywgYW5ub3RhdGlvbjogcmVzcG9uc2UgfSk7XG4gICAgICAgIH0sXG4gICAgICAgICgpID0+IHtcbiAgICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLmNvbnRleHQuYW5ub3RhdGlvbkxvb3ApO1xuICAgICAgICB9XG4gICAgICApO1xuICAgIH0sIDEwMDApO1xuICB9XG59XG5cbmNsYXNzIFN0b3BBbm5vdGF0aW9uRXZlbnQgZXh0ZW5kcyBQdWJsaWNFdmVudCB7XG4gIGhhbmRsZSgpIHtcbiAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLmNvbnRleHQuYW5ub3RhdGlvbkxvb3ApO1xuICAgIHRoaXMuY29udGV4dC5fYXBpLnN0b3BBbm5vdGF0aW9uKCk7XG4gIH1cbn1cblxuZXhwb3J0IHsgU3RhcnRBbm5vdGF0aW9uRXZlbnQsIFN0b3BBbm5vdGF0aW9uRXZlbnQgfTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBzcmMvZXZlbnRzL0Fubm90YXRpb25FdmVudHMuanMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTs7Ozs7Ozs7Ozs7QUFDQTs7Ozs7Ozs7Ozs7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBOzs7Ozs7QUFHQTs7Ozs7Ozs7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FBR0E7QUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///74\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _BaseEvent2 = __webpack_require__(/*! ./BaseEvent */ 1);\n\nvar _BaseEvent3 = _interopRequireDefault(_BaseEvent2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar IgnoreEvent = function (_BaseEvent) {\n  _inherits(IgnoreEvent, _BaseEvent);\n\n  function IgnoreEvent() {\n    _classCallCheck(this, IgnoreEvent);\n\n    return _possibleConstructorReturn(this, (IgnoreEvent.__proto__ || Object.getPrototypeOf(IgnoreEvent)).apply(this, arguments));\n  }\n\n  _createClass(IgnoreEvent, [{\n    key: \'handle\',\n    value: function handle() {\n      // do nothing.\n    }\n  }]);\n\n  return IgnoreEvent;\n}(_BaseEvent3.default);\n\nexports.default = IgnoreEvent;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzUuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2V2ZW50cy9JZ25vcmVFdmVudC5qcz9hZDkwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBCYXNlRXZlbnQgZnJvbSAnLi9CYXNlRXZlbnQnO1xuXG5jbGFzcyBJZ25vcmVFdmVudCBleHRlbmRzIEJhc2VFdmVudCB7XG4gIGhhbmRsZSgpIHtcbiAgICAvLyBkbyBub3RoaW5nLlxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IElnbm9yZUV2ZW50O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNyYy9ldmVudHMvSWdub3JlRXZlbnQuanMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDQTs7Ozs7Ozs7Ozs7QUFDQTs7Ozs7Ozs7Ozs7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQUdBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///75\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _MediaStreamHandler = __webpack_require__(/*! ./../MediaStreamHandler */ 3);\n\nvar _MediaStreamHandler2 = _interopRequireDefault(_MediaStreamHandler);\n\nvar _Logger = __webpack_require__(/*! ../Logger */ 0);\n\nvar _Logger2 = _interopRequireDefault(_Logger);\n\nvar _BaseEvent2 = __webpack_require__(/*! ./BaseEvent */ 1);\n\nvar _BaseEvent3 = _interopRequireDefault(_BaseEvent2);\n\nvar _ForwardEvent = __webpack_require__(/*! ./ForwardEvent */ 26);\n\nvar _ForwardEvent2 = _interopRequireDefault(_ForwardEvent);\n\nvar _ChangeLocalStreamEvent = __webpack_require__(/*! ./ChangeLocalStreamEvent */ 77);\n\nvar _ChangeLocalStreamEvent2 = _interopRequireDefault(_ChangeLocalStreamEvent);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar PodiumEvent = function (_BaseEvent) {\n  _inherits(PodiumEvent, _BaseEvent);\n\n  function PodiumEvent() {\n    _classCallCheck(this, PodiumEvent);\n\n    return _possibleConstructorReturn(this, (PodiumEvent.__proto__ || Object.getPrototypeOf(PodiumEvent)).apply(this, arguments));\n  }\n\n  _createClass(PodiumEvent, [{\n    key: \'handle\',\n    value: function handle(msg) {\n      _Logger2.default.debug(\'PodiumEvent::handle\', msg);\n      var _context = this.context,\n          captureSession = _context.captureSession,\n          _session = _context._session;\n\n\n      if (msg.isPresenter && captureSession && captureSession.requestedPresenter) {\n        captureSession.requestedPresenter = false;\n        captureSession.showPicker();\n      }\n\n      if (!msg.presentation && captureSession && captureSession.started) {\n        this.context.endCaptureSession();\n      }\n\n      if (_session) {\n        this.scanMessageForLocalStreamOptimization(_session, msg);\n      }\n\n      new _ForwardEvent2.default(this.context).handle(msg);\n    }\n\n    // Optimization to avoid streaming when not on video podium.\n    // First, we need a localStream, then we avoid adjustments when we initially\n    // join the room (isSource) and finally if we\'re not on the podium,\n    // but have a local camera stream with video, we change our local stream.\n    //\n    // We only re-activate the camera in the opposite case if the current\n    // localStream was locallyChanged (through this optimization) since we\n    // want to avoid situations where a user doesn\'t expect to be on the video\n    // podium and we suddenly turned on their camera.\n\n  }, {\n    key: \'scanMessageForLocalStreamOptimization\',\n    value: function scanMessageForLocalStreamOptimization(session, msg) {\n      var localStream = session.localStream;\n      var isSource = msg.isSource,\n          video = msg.video,\n          media = msg.media;\n\n\n      if (!media && localStream && isSource && (!video && _MediaStreamHandler2.default.isCameraStream(localStream) || video && !_MediaStreamHandler2.default.hasVideo(localStream) && localStream.locallyChanged)) {\n        new _ChangeLocalStreamEvent2.default(this.context).handle({\n          options: {\n            audio: _MediaStreamHandler2.default.hasAudio(localStream),\n            video: video\n          }\n        });\n      }\n    }\n  }]);\n\n  return PodiumEvent;\n}(_BaseEvent3.default);\n\nexports.default = PodiumEvent;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2V2ZW50cy9Qb2RpdW1FdmVudC5qcz9iOWVlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBNU0ggZnJvbSAnLi8uLi9NZWRpYVN0cmVhbUhhbmRsZXInO1xuaW1wb3J0IExvZ2dlciBmcm9tICcuLi9Mb2dnZXInO1xuaW1wb3J0IEJhc2VFdmVudCBmcm9tICcuL0Jhc2VFdmVudCc7XG5pbXBvcnQgRm9yd2FyZEV2ZW50IGZyb20gJy4vRm9yd2FyZEV2ZW50JztcbmltcG9ydCBDaGFuZ2VMb2NhbFN0cmVhbUV2ZW50IGZyb20gJy4vQ2hhbmdlTG9jYWxTdHJlYW1FdmVudCc7XG5cbmNsYXNzIFBvZGl1bUV2ZW50IGV4dGVuZHMgQmFzZUV2ZW50IHtcbiAgaGFuZGxlKG1zZykge1xuICAgIExvZ2dlci5kZWJ1ZygnUG9kaXVtRXZlbnQ6OmhhbmRsZScsIG1zZyk7XG4gICAgY29uc3QgeyBjYXB0dXJlU2Vzc2lvbiwgX3Nlc3Npb24gfSA9IHRoaXMuY29udGV4dDtcblxuICAgIGlmIChcbiAgICAgIG1zZy5pc1ByZXNlbnRlciAmJlxuICAgICAgY2FwdHVyZVNlc3Npb24gJiZcbiAgICAgIGNhcHR1cmVTZXNzaW9uLnJlcXVlc3RlZFByZXNlbnRlclxuICAgICkge1xuICAgICAgY2FwdHVyZVNlc3Npb24ucmVxdWVzdGVkUHJlc2VudGVyID0gZmFsc2U7XG4gICAgICBjYXB0dXJlU2Vzc2lvbi5zaG93UGlja2VyKCk7XG4gICAgfVxuXG4gICAgaWYgKCFtc2cucHJlc2VudGF0aW9uICYmIGNhcHR1cmVTZXNzaW9uICYmIGNhcHR1cmVTZXNzaW9uLnN0YXJ0ZWQpIHtcbiAgICAgIHRoaXMuY29udGV4dC5lbmRDYXB0dXJlU2Vzc2lvbigpO1xuICAgIH1cblxuICAgIGlmIChfc2Vzc2lvbikge1xuICAgICAgdGhpcy5zY2FuTWVzc2FnZUZvckxvY2FsU3RyZWFtT3B0aW1pemF0aW9uKF9zZXNzaW9uLCBtc2cpO1xuICAgIH1cblxuICAgIG5ldyBGb3J3YXJkRXZlbnQodGhpcy5jb250ZXh0KS5oYW5kbGUobXNnKTtcbiAgfVxuXG4gIC8vIE9wdGltaXphdGlvbiB0byBhdm9pZCBzdHJlYW1pbmcgd2hlbiBub3Qgb24gdmlkZW8gcG9kaXVtLlxuICAvLyBGaXJzdCwgd2UgbmVlZCBhIGxvY2FsU3RyZWFtLCB0aGVuIHdlIGF2b2lkIGFkanVzdG1lbnRzIHdoZW4gd2UgaW5pdGlhbGx5XG4gIC8vIGpvaW4gdGhlIHJvb20gKGlzU291cmNlKSBhbmQgZmluYWxseSBpZiB3ZSdyZSBub3Qgb24gdGhlIHBvZGl1bSxcbiAgLy8gYnV0IGhhdmUgYSBsb2NhbCBjYW1lcmEgc3RyZWFtIHdpdGggdmlkZW8sIHdlIGNoYW5nZSBvdXIgbG9jYWwgc3RyZWFtLlxuICAvL1xuICAvLyBXZSBvbmx5IHJlLWFjdGl2YXRlIHRoZSBjYW1lcmEgaW4gdGhlIG9wcG9zaXRlIGNhc2UgaWYgdGhlIGN1cnJlbnRcbiAgLy8gbG9jYWxTdHJlYW0gd2FzIGxvY2FsbHlDaGFuZ2VkICh0aHJvdWdoIHRoaXMgb3B0aW1pemF0aW9uKSBzaW5jZSB3ZVxuICAvLyB3YW50IHRvIGF2b2lkIHNpdHVhdGlvbnMgd2hlcmUgYSB1c2VyIGRvZXNuJ3QgZXhwZWN0IHRvIGJlIG9uIHRoZSB2aWRlb1xuICAvLyBwb2RpdW0gYW5kIHdlIHN1ZGRlbmx5IHR1cm5lZCBvbiB0aGVpciBjYW1lcmEuXG4gIHNjYW5NZXNzYWdlRm9yTG9jYWxTdHJlYW1PcHRpbWl6YXRpb24oc2Vzc2lvbiwgbXNnKSB7XG4gICAgY29uc3QgeyBsb2NhbFN0cmVhbSB9ID0gc2Vzc2lvbjtcbiAgICBjb25zdCB7IGlzU291cmNlLCB2aWRlbywgbWVkaWEgfSA9IG1zZztcblxuICAgIGlmIChcbiAgICAgICFtZWRpYSAmJlxuICAgICAgbG9jYWxTdHJlYW0gJiZcbiAgICAgIGlzU291cmNlICYmXG4gICAgICAoKCF2aWRlbyAmJiBNU0guaXNDYW1lcmFTdHJlYW0obG9jYWxTdHJlYW0pKSB8fFxuICAgICAgICAodmlkZW8gJiYgIU1TSC5oYXNWaWRlbyhsb2NhbFN0cmVhbSkgJiYgbG9jYWxTdHJlYW0ubG9jYWxseUNoYW5nZWQpKVxuICAgICkge1xuICAgICAgbmV3IENoYW5nZUxvY2FsU3RyZWFtRXZlbnQodGhpcy5jb250ZXh0KS5oYW5kbGUoe1xuICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgYXVkaW86IE1TSC5oYXNBdWRpbyhsb2NhbFN0cmVhbSksXG4gICAgICAgICAgdmlkZW86IHZpZGVvXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb2RpdW1FdmVudDtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBzcmMvZXZlbnRzL1BvZGl1bUV2ZW50LmpzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7Ozs7Ozs7Ozs7O0FBQ0E7Ozs7Ozs7Ozs7O0FBQ0E7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBTUE7QUFDQTs7Ozs7O0FBR0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///76\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Logger = __webpack_require__(/*! ../Logger */ 0);\n\nvar _Logger2 = _interopRequireDefault(_Logger);\n\nvar _BaseEvent2 = __webpack_require__(/*! ./BaseEvent */ 1);\n\nvar _BaseEvent3 = _interopRequireDefault(_BaseEvent2);\n\nvar _MediaStreamHandler = __webpack_require__(/*! ../MediaStreamHandler */ 3);\n\nvar _MediaStreamHandler2 = _interopRequireDefault(_MediaStreamHandler);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * ChangeLocalStream\n **/\nvar ChangeLocalStreamEvent = function (_BaseEvent) {\n  _inherits(ChangeLocalStreamEvent, _BaseEvent);\n\n  function ChangeLocalStreamEvent() {\n    _classCallCheck(this, ChangeLocalStreamEvent);\n\n    return _possibleConstructorReturn(this, (ChangeLocalStreamEvent.__proto__ || Object.getPrototypeOf(ChangeLocalStreamEvent)).apply(this, arguments));\n  }\n\n  _createClass(ChangeLocalStreamEvent, [{\n    key: \'handle\',\n    value: function handle(msg) {\n      _Logger2.default.warn(\'ChangeLocalStreamEvent::handle\', msg.options);\n      var _context$_session = this.context._session,\n          localStream = _context$_session.localStream,\n          setStream = _context$_session.setStream;\n\n      new _MediaStreamHandler2.default(msg.options, localStream).start().then(function (stream) {\n        stream.locallyChanged = true;\n        setStream(stream);\n      }).catch(_Logger2.default.error);\n    }\n  }]);\n\n  return ChangeLocalStreamEvent;\n}(_BaseEvent3.default);\n\nexports.default = ChangeLocalStreamEvent;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzcuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2V2ZW50cy9DaGFuZ2VMb2NhbFN0cmVhbUV2ZW50LmpzPzQzN2UiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IExvZ2dlciBmcm9tICcuLi9Mb2dnZXInO1xuaW1wb3J0IEJhc2VFdmVudCBmcm9tICcuL0Jhc2VFdmVudCc7XG5pbXBvcnQgTWVkaWFTdHJlYW1IYW5kbGVyIGZyb20gJy4uL01lZGlhU3RyZWFtSGFuZGxlcic7XG5cbi8qKlxuICogQ2hhbmdlTG9jYWxTdHJlYW1cbiAqKi9cbmNsYXNzIENoYW5nZUxvY2FsU3RyZWFtRXZlbnQgZXh0ZW5kcyBCYXNlRXZlbnQge1xuICBoYW5kbGUobXNnKSB7XG4gICAgTG9nZ2VyLndhcm4oJ0NoYW5nZUxvY2FsU3RyZWFtRXZlbnQ6OmhhbmRsZScsIG1zZy5vcHRpb25zKTtcbiAgICBjb25zdCB7IF9zZXNzaW9uOiB7IGxvY2FsU3RyZWFtLCBzZXRTdHJlYW0gfSB9ID0gdGhpcy5jb250ZXh0O1xuICAgIG5ldyBNZWRpYVN0cmVhbUhhbmRsZXIobXNnLm9wdGlvbnMsIGxvY2FsU3RyZWFtKVxuICAgICAgLnN0YXJ0KClcbiAgICAgIC50aGVuKHN0cmVhbSA9PiB7XG4gICAgICAgIHN0cmVhbS5sb2NhbGx5Q2hhbmdlZCA9IHRydWU7XG4gICAgICAgIHNldFN0cmVhbShzdHJlYW0pO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaChMb2dnZXIuZXJyb3IpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IENoYW5nZUxvY2FsU3RyZWFtRXZlbnQ7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc3JjL2V2ZW50cy9DaGFuZ2VMb2NhbFN0cmVhbUV2ZW50LmpzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7Ozs7Ozs7Ozs7O0FBQ0E7OztBQUdBOzs7Ozs7Ozs7OztBQUNBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBRUE7Ozs7OztBQUdBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///77\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _BaseEvent2 = __webpack_require__(/*! ./BaseEvent */ 1);\n\nvar _BaseEvent3 = _interopRequireDefault(_BaseEvent2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar PresentEvent = function (_BaseEvent) {\n  _inherits(PresentEvent, _BaseEvent);\n\n  function PresentEvent() {\n    _classCallCheck(this, PresentEvent);\n\n    return _possibleConstructorReturn(this, (PresentEvent.__proto__ || Object.getPrototypeOf(PresentEvent)).apply(this, arguments));\n  }\n\n  _createClass(PresentEvent, [{\n    key: \'handle\',\n    value: function handle(msg) {\n      this.context._api.present(msg.slide);\n    }\n  }]);\n\n  return PresentEvent;\n}(_BaseEvent3.default);\n\nexports.default = PresentEvent;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzguanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2V2ZW50cy9QcmVzZW50RXZlbnQuanM/YTg1YSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQmFzZUV2ZW50IGZyb20gJy4vQmFzZUV2ZW50JztcblxuY2xhc3MgUHJlc2VudEV2ZW50IGV4dGVuZHMgQmFzZUV2ZW50IHtcbiAgaGFuZGxlKG1zZykge1xuICAgIHRoaXMuY29udGV4dC5fYXBpLnByZXNlbnQobXNnLnNsaWRlKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQcmVzZW50RXZlbnQ7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc3JjL2V2ZW50cy9QcmVzZW50RXZlbnQuanMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDQTs7Ozs7Ozs7Ozs7QUFDQTs7Ozs7Ozs7Ozs7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQUdBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///78\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _BaseEvent2 = __webpack_require__(/*! ./BaseEvent */ 1);\n\nvar _BaseEvent3 = _interopRequireDefault(_BaseEvent2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar SnapshotEvent = function (_BaseEvent) {\n  _inherits(SnapshotEvent, _BaseEvent);\n\n  function SnapshotEvent() {\n    _classCallCheck(this, SnapshotEvent);\n\n    return _possibleConstructorReturn(this, (SnapshotEvent.__proto__ || Object.getPrototypeOf(SnapshotEvent)).apply(this, arguments));\n  }\n\n  _createClass(SnapshotEvent, [{\n    key: \'handle\',\n    value: function handle() {\n      this.context._api.takeSnapshot();\n    }\n  }]);\n\n  return SnapshotEvent;\n}(_BaseEvent3.default);\n\nexports.default = SnapshotEvent;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzkuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2V2ZW50cy9TbmFwc2hvdEV2ZW50LmpzP2Y0MzAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEJhc2VFdmVudCBmcm9tICcuL0Jhc2VFdmVudCc7XG5cbmNsYXNzIFNuYXBzaG90RXZlbnQgZXh0ZW5kcyBCYXNlRXZlbnQge1xuICBoYW5kbGUoKSB7XG4gICAgdGhpcy5jb250ZXh0Ll9hcGkudGFrZVNuYXBzaG90KCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU25hcHNob3RFdmVudDtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBzcmMvZXZlbnRzL1NuYXBzaG90RXZlbnQuanMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDQTs7Ozs7Ozs7Ozs7QUFDQTs7Ozs7Ozs7Ozs7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQUdBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///79\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _BaseEvent2 = __webpack_require__(/*! ./BaseEvent */ 1);\n\nvar _BaseEvent3 = _interopRequireDefault(_BaseEvent2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar SetLayerEvent = function (_BaseEvent) {\n  _inherits(SetLayerEvent, _BaseEvent);\n\n  function SetLayerEvent() {\n    _classCallCheck(this, SetLayerEvent);\n\n    return _possibleConstructorReturn(this, (SetLayerEvent.__proto__ || Object.getPrototypeOf(SetLayerEvent)).apply(this, arguments));\n  }\n\n  _createClass(SetLayerEvent, [{\n    key: \'handle\',\n    value: function handle(msg) {\n      this.context._api.setLayer(msg.params);\n    }\n  }]);\n\n  return SetLayerEvent;\n}(_BaseEvent3.default);\n\nexports.default = SetLayerEvent;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2V2ZW50cy9TZXRMYXllckV2ZW50LmpzPzk5ODYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEJhc2VFdmVudCBmcm9tICcuL0Jhc2VFdmVudCc7XG5cbmNsYXNzIFNldExheWVyRXZlbnQgZXh0ZW5kcyBCYXNlRXZlbnQge1xuICBoYW5kbGUobXNnKSB7XG4gICAgdGhpcy5jb250ZXh0Ll9hcGkuc2V0TGF5ZXIobXNnLnBhcmFtcyk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU2V0TGF5ZXJFdmVudDtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBzcmMvZXZlbnRzL1NldExheWVyRXZlbnQuanMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDQTs7Ozs7Ozs7Ozs7QUFDQTs7Ozs7Ozs7Ozs7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQUdBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///80\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _BaseEvent2 = __webpack_require__(/*! ./BaseEvent */ 1);\n\nvar _BaseEvent3 = _interopRequireDefault(_BaseEvent2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar SendChatEvent = function (_BaseEvent) {\n  _inherits(SendChatEvent, _BaseEvent);\n\n  function SendChatEvent() {\n    _classCallCheck(this, SendChatEvent);\n\n    return _possibleConstructorReturn(this, (SendChatEvent.__proto__ || Object.getPrototypeOf(SendChatEvent)).apply(this, arguments));\n  }\n\n  _createClass(SendChatEvent, [{\n    key: \'handle\',\n    value: function handle(msg) {\n      this.context._session.send({\n        type: \'chat\',\n        content: msg.content\n      });\n    }\n  }]);\n\n  return SendChatEvent;\n}(_BaseEvent3.default);\n\nexports.default = SendChatEvent;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2V2ZW50cy9TZW5kQ2hhdEV2ZW50LmpzP2UwYzAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEJhc2VFdmVudCBmcm9tICcuL0Jhc2VFdmVudCc7XG5cbmNsYXNzIFNlbmRDaGF0RXZlbnQgZXh0ZW5kcyBCYXNlRXZlbnQge1xuICBoYW5kbGUobXNnKSB7XG4gICAgdGhpcy5jb250ZXh0Ll9zZXNzaW9uLnNlbmQoe1xuICAgICAgdHlwZTogICAgJ2NoYXQnLFxuICAgICAgY29udGVudDogbXNnLmNvbnRlbnRcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBTZW5kQ2hhdEV2ZW50O1xuXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc3JjL2V2ZW50cy9TZW5kQ2hhdEV2ZW50LmpzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBO0FBQ0E7Ozs7Ozs7Ozs7O0FBQ0E7Ozs7Ozs7Ozs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBOzs7Ozs7QUFHQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///81\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _PublicEvent2 = __webpack_require__(/*! ./PublicEvent */ 2);\n\nvar _PublicEvent3 = _interopRequireDefault(_PublicEvent2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar LoadFilesEvent = function (_PublicEvent) {\n  _inherits(LoadFilesEvent, _PublicEvent);\n\n  function LoadFilesEvent() {\n    _classCallCheck(this, LoadFilesEvent);\n\n    return _possibleConstructorReturn(this, (LoadFilesEvent.__proto__ || Object.getPrototypeOf(LoadFilesEvent)).apply(this, arguments));\n  }\n\n  _createClass(LoadFilesEvent, [{\n    key: \'handle\',\n    value: function handle() {\n      this.context._api.getFiles(this.publishFiles.bind(this));\n    }\n  }, {\n    key: \'publishFiles\',\n    value: function publishFiles(response) {\n      _get(LoadFilesEvent.prototype.__proto__ || Object.getPrototypeOf(LoadFilesEvent.prototype), \'handle\', this).call(this, {\n        type: \'files_update\',\n        files: response.files\n      });\n    }\n  }]);\n\n  return LoadFilesEvent;\n}(_PublicEvent3.default);\n\nexports.default = LoadFilesEvent;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2V2ZW50cy9Mb2FkRmlsZXNFdmVudC5qcz83ZTMxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQdWJsaWNFdmVudCBmcm9tICcuL1B1YmxpY0V2ZW50JztcblxuY2xhc3MgTG9hZEZpbGVzRXZlbnQgZXh0ZW5kcyBQdWJsaWNFdmVudCB7XG4gIGhhbmRsZSgpIHtcbiAgICB0aGlzLmNvbnRleHQuX2FwaS5nZXRGaWxlcyh0aGlzLnB1Ymxpc2hGaWxlcy5iaW5kKHRoaXMpKTtcbiAgfVxuXG4gIHB1Ymxpc2hGaWxlcyhyZXNwb25zZSkge1xuICAgIHN1cGVyLmhhbmRsZSh7XG4gICAgICB0eXBlOiAgJ2ZpbGVzX3VwZGF0ZScsXG4gICAgICBmaWxlczogcmVzcG9uc2UuZmlsZXNcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBMb2FkRmlsZXNFdmVudDtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBzcmMvZXZlbnRzL0xvYWRGaWxlc0V2ZW50LmpzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUE7QUFDQTs7Ozs7Ozs7Ozs7QUFDQTs7Ozs7Ozs7Ozs7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTs7Ozs7O0FBR0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///82\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _BaseEvent2 = __webpack_require__(/*! ./BaseEvent */ 1);\n\nvar _BaseEvent3 = _interopRequireDefault(_BaseEvent2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar SetLayoutEvent = function (_BaseEvent) {\n  _inherits(SetLayoutEvent, _BaseEvent);\n\n  function SetLayoutEvent() {\n    _classCallCheck(this, SetLayoutEvent);\n\n    return _possibleConstructorReturn(this, (SetLayoutEvent.__proto__ || Object.getPrototypeOf(SetLayoutEvent)).apply(this, arguments));\n  }\n\n  _createClass(SetLayoutEvent, [{\n    key: \'handle\',\n    value: function handle(msg) {\n      this.context._api.setLayout(msg.params);\n    }\n  }]);\n\n  return SetLayoutEvent;\n}(_BaseEvent3.default);\n\nexports.default = SetLayoutEvent;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2V2ZW50cy9TZXRMYXlvdXRFdmVudC5qcz85YzE5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBCYXNlRXZlbnQgZnJvbSAnLi9CYXNlRXZlbnQnO1xuXG5jbGFzcyBTZXRMYXlvdXRFdmVudCBleHRlbmRzIEJhc2VFdmVudCB7XG4gIGhhbmRsZShtc2cpIHtcbiAgICB0aGlzLmNvbnRleHQuX2FwaS5zZXRMYXlvdXQobXNnLnBhcmFtcyk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU2V0TGF5b3V0RXZlbnQ7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc3JjL2V2ZW50cy9TZXRMYXlvdXRFdmVudC5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUNBOzs7Ozs7Ozs7OztBQUNBOzs7Ozs7Ozs7OztBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FBR0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///83\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _PublicEvent2 = __webpack_require__(/*! ./PublicEvent */ 2);\n\nvar _PublicEvent3 = _interopRequireDefault(_PublicEvent2);\n\nvar _SipConnection = __webpack_require__(/*! ../SipConnection */ 85);\n\nvar _SipConnection2 = _interopRequireDefault(_SipConnection);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar RoomReadyEvent = function (_PublicEvent) {\n  _inherits(RoomReadyEvent, _PublicEvent);\n\n  function RoomReadyEvent() {\n    _classCallCheck(this, RoomReadyEvent);\n\n    return _possibleConstructorReturn(this, (RoomReadyEvent.__proto__ || Object.getPrototypeOf(RoomReadyEvent)).apply(this, arguments));\n  }\n\n  _createClass(RoomReadyEvent, [{\n    key: \'handle\',\n    value: function handle(msg) {\n      _get(RoomReadyEvent.prototype.__proto__ || Object.getPrototypeOf(RoomReadyEvent.prototype), \'handle\', this).call(this, msg);\n      this.context.rtData = msg.content;\n      if (msg.content.ready === true) {\n        this.context.connection = new _SipConnection2.default(msg.content.user.sip, msg.content.room.sip);\n        this.context._connection.room = msg.content.room.sip;\n        this.context.send({ type: \'connection\', connectionStatus: \'ready\' });\n      }\n    }\n  }]);\n\n  return RoomReadyEvent;\n}(_PublicEvent3.default);\n\nexports.default = RoomReadyEvent;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2V2ZW50cy9Sb29tUmVhZHlFdmVudC5qcz81YmNlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQdWJsaWNFdmVudCBmcm9tICcuL1B1YmxpY0V2ZW50JztcbmltcG9ydCBTaXBDb25uZWN0aW9uIGZyb20gJy4uL1NpcENvbm5lY3Rpb24nO1xuXG5jbGFzcyBSb29tUmVhZHlFdmVudCBleHRlbmRzIFB1YmxpY0V2ZW50IHtcbiAgaGFuZGxlKG1zZykge1xuICAgIHN1cGVyLmhhbmRsZShtc2cpO1xuICAgIHRoaXMuY29udGV4dC5ydERhdGEgPSBtc2cuY29udGVudDtcbiAgICBpZiAobXNnLmNvbnRlbnQucmVhZHkgPT09IHRydWUpIHtcbiAgICAgIHRoaXMuY29udGV4dC5jb25uZWN0aW9uID0gbmV3IFNpcENvbm5lY3Rpb24oXG4gICAgICAgIG1zZy5jb250ZW50LnVzZXIuc2lwLFxuICAgICAgICBtc2cuY29udGVudC5yb29tLnNpcFxuICAgICAgKTtcbiAgICAgIHRoaXMuY29udGV4dC5fY29ubmVjdGlvbi5yb29tID0gbXNnLmNvbnRlbnQucm9vbS5zaXA7XG4gICAgICB0aGlzLmNvbnRleHQuc2VuZCh7IHR5cGU6ICdjb25uZWN0aW9uJywgY29ubmVjdGlvblN0YXR1czogJ3JlYWR5JyB9KTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUm9vbVJlYWR5RXZlbnQ7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc3JjL2V2ZW50cy9Sb29tUmVhZHlFdmVudC5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7Ozs7Ozs7Ozs7O0FBQ0E7Ozs7Ozs7Ozs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUFHQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///84\n')},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _sip = __webpack_require__(/*! sip.js */ 86);\n\nvar _sip2 = _interopRequireDefault(_sip);\n\nvar _Logger = __webpack_require__(/*! ./Logger */ 0);\n\nvar _Logger2 = _interopRequireDefault(_Logger);\n\nvar _SipMessageWhitelist = __webpack_require__(/*! ./SipMessageWhitelist */ 87);\n\nvar _SipMessageWhitelist2 = _interopRequireDefault(_SipMessageWhitelist);\n\nvar _SipMessageTransformer = __webpack_require__(/*! ./SipMessageTransformer */ 88);\n\nvar _SipMessageTransformer2 = _interopRequireDefault(_SipMessageTransformer);\n\nvar _SessionDescriptionHandler = __webpack_require__(/*! ./SessionDescriptionHandler */ 90);\n\nvar _SessionDescriptionHandler2 = _interopRequireDefault(_SessionDescriptionHandler);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * eyeson Sip Connection.\n *\n * Registers with provided sip credentials and handles events received.\n **/\nvar SipConnection = function () {\n  function SipConnection(user, room) {\n    _classCallCheck(this, SipConnection);\n\n    user.traceSip = true;\n    this.user = user;\n    this._room = room;\n    this.user.sessionDescriptionHandlerFactoryOptions = this.factoryOptions;\n    this.user.sessionDescriptionHandlerFactory = function (session, options) {\n      return new _SessionDescriptionHandler2.default(session, options);\n    };\n    this.userAgent = new _sip2.default.UA(this.user);\n    this.transformer = new _SipMessageTransformer2.default(this.user);\n  }\n\n  _createClass(SipConnection, [{\n    key: 'startSession',\n\n\n    /**\n     * Start a session on current connection.\n     **/\n    value: function startSession(options) {\n      return this.userAgent.invite(this._room.uri, options);\n    }\n\n    /**\n     * Stop listening for messages.\n     **/\n\n  }, {\n    key: 'close',\n    value: function close() {\n      this.userAgent.removeAllListeners('message');\n      this.userAgent = null;\n    }\n\n    /**\n     * Parse, filter, transform and finally forward messages received from SIP\n     * connection.\n     **/\n\n  }, {\n    key: 'onMessage',\n    value: function onMessage(callback) {\n      var _this = this;\n\n      this.userAgent.on('message', function (response) {\n        _Logger2.default.debug('SipConnection::onMessage', response);\n        var message = JSON.parse(response.body);\n\n        if (!_SipMessageWhitelist2.default.includes(message.type)) {\n          _Logger2.default.debug('SipConnection::onMessage ignoring \"' + message.type + '\" message.');\n          return;\n        }\n\n        var transformedMessage = _this.transformer.process(message);\n        callback(transformedMessage);\n      });\n    }\n\n    /**\n     * Transport a message over current connection.\n     **/\n\n  }, {\n    key: 'send',\n    value: function send(msg) {\n      msg.cid = this.user.uri;\n      if (!this.userAgent) {\n        return;\n      }\n      this.userAgent.message(this._room.uri, JSON.stringify(msg));\n    }\n  }, {\n    key: 'room',\n    set: function set(room) {\n      this._room = room;\n    }\n  }, {\n    key: 'factoryOptions',\n    get: function get() {\n      return { peerConnectionOptions: { iceCheckingTimeout: 3000 } };\n    }\n  }]);\n\n  return SipConnection;\n}();\n\nSipConnection.STATUS_TERMINATED = _sip2.default.Session.C.STATUS_TERMINATED;\n\nexports.default = SipConnection;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODUuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL1NpcENvbm5lY3Rpb24uanM/NTIxZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgU0lQIGZyb20gJ3NpcC5qcyc7XG5pbXBvcnQgTG9nZ2VyIGZyb20gJy4vTG9nZ2VyJztcbmltcG9ydCBXSElURUxJU1QgZnJvbSAnLi9TaXBNZXNzYWdlV2hpdGVsaXN0JztcbmltcG9ydCBTaXBNZXNzYWdlVHJhbnNmb3JtZXIgZnJvbSAnLi9TaXBNZXNzYWdlVHJhbnNmb3JtZXInO1xuaW1wb3J0IFNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIgZnJvbSAnLi9TZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyJztcblxuLyoqXG4gKiBleWVzb24gU2lwIENvbm5lY3Rpb24uXG4gKlxuICogUmVnaXN0ZXJzIHdpdGggcHJvdmlkZWQgc2lwIGNyZWRlbnRpYWxzIGFuZCBoYW5kbGVzIGV2ZW50cyByZWNlaXZlZC5cbiAqKi9cbmNsYXNzIFNpcENvbm5lY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih1c2VyLCByb29tKSB7XG4gICAgdXNlci50cmFjZVNpcCA9IHRydWU7XG4gICAgdGhpcy51c2VyID0gdXNlcjtcbiAgICB0aGlzLl9yb29tID0gcm9vbTtcbiAgICB0aGlzLnVzZXIuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlckZhY3RvcnlPcHRpb25zID0gdGhpcy5mYWN0b3J5T3B0aW9ucztcbiAgICB0aGlzLnVzZXIuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlckZhY3RvcnkgPSAoc2Vzc2lvbiwgb3B0aW9ucykgPT4ge1xuICAgICAgcmV0dXJuIG5ldyBTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyKHNlc3Npb24sIG9wdGlvbnMpO1xuICAgIH07XG4gICAgdGhpcy51c2VyQWdlbnQgPSBuZXcgU0lQLlVBKHRoaXMudXNlcik7XG4gICAgdGhpcy50cmFuc2Zvcm1lciA9IG5ldyBTaXBNZXNzYWdlVHJhbnNmb3JtZXIodGhpcy51c2VyKTtcbiAgfVxuXG4gIHNldCByb29tKHJvb20pIHtcbiAgICB0aGlzLl9yb29tID0gcm9vbTtcbiAgfVxuXG4gIGdldCBmYWN0b3J5T3B0aW9ucygpIHtcbiAgICByZXR1cm4geyBwZWVyQ29ubmVjdGlvbk9wdGlvbnM6IHsgaWNlQ2hlY2tpbmdUaW1lb3V0OiAzMDAwIH0gfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdGFydCBhIHNlc3Npb24gb24gY3VycmVudCBjb25uZWN0aW9uLlxuICAgKiovXG4gIHN0YXJ0U2Vzc2lvbihvcHRpb25zKSB7XG4gICAgcmV0dXJuIHRoaXMudXNlckFnZW50Lmludml0ZSh0aGlzLl9yb29tLnVyaSwgb3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICogU3RvcCBsaXN0ZW5pbmcgZm9yIG1lc3NhZ2VzLlxuICAgKiovXG4gIGNsb3NlKCkge1xuICAgIHRoaXMudXNlckFnZW50LnJlbW92ZUFsbExpc3RlbmVycygnbWVzc2FnZScpO1xuICAgIHRoaXMudXNlckFnZW50ID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZSwgZmlsdGVyLCB0cmFuc2Zvcm0gYW5kIGZpbmFsbHkgZm9yd2FyZCBtZXNzYWdlcyByZWNlaXZlZCBmcm9tIFNJUFxuICAgKiBjb25uZWN0aW9uLlxuICAgKiovXG4gIG9uTWVzc2FnZShjYWxsYmFjaykge1xuICAgIHRoaXMudXNlckFnZW50Lm9uKCdtZXNzYWdlJywgcmVzcG9uc2UgPT4ge1xuICAgICAgTG9nZ2VyLmRlYnVnKCdTaXBDb25uZWN0aW9uOjpvbk1lc3NhZ2UnLCByZXNwb25zZSk7XG4gICAgICBjb25zdCBtZXNzYWdlID0gSlNPTi5wYXJzZShyZXNwb25zZS5ib2R5KTtcblxuICAgICAgaWYgKCFXSElURUxJU1QuaW5jbHVkZXMobWVzc2FnZS50eXBlKSkge1xuICAgICAgICBMb2dnZXIuZGVidWcoXG4gICAgICAgICAgYFNpcENvbm5lY3Rpb246Om9uTWVzc2FnZSBpZ25vcmluZyBcIiR7bWVzc2FnZS50eXBlfVwiIG1lc3NhZ2UuYFxuICAgICAgICApO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHRyYW5zZm9ybWVkTWVzc2FnZSA9IHRoaXMudHJhbnNmb3JtZXIucHJvY2VzcyhtZXNzYWdlKTtcbiAgICAgIGNhbGxiYWNrKHRyYW5zZm9ybWVkTWVzc2FnZSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogVHJhbnNwb3J0IGEgbWVzc2FnZSBvdmVyIGN1cnJlbnQgY29ubmVjdGlvbi5cbiAgICoqL1xuICBzZW5kKG1zZykge1xuICAgIG1zZy5jaWQgPSB0aGlzLnVzZXIudXJpO1xuICAgIGlmICghdGhpcy51c2VyQWdlbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy51c2VyQWdlbnQubWVzc2FnZSh0aGlzLl9yb29tLnVyaSwgSlNPTi5zdHJpbmdpZnkobXNnKSk7XG4gIH1cbn1cblxuU2lwQ29ubmVjdGlvbi5TVEFUVVNfVEVSTUlOQVRFRCA9IFNJUC5TZXNzaW9uLkMuU1RBVFVTX1RFUk1JTkFURUQ7XG5cbmV4cG9ydCBkZWZhdWx0IFNpcENvbm5lY3Rpb247XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc3JjL1NpcENvbm5lY3Rpb24uanMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7Ozs7OztBQUNBOzs7OztBQUtBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFTQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7O0FBSUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBckRBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7Ozs7QUFrREE7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///85\n")},function(module,exports,__webpack_require__){eval('/*!\n * \n *  SIP version 0.9.2\n *  Copyright (c) 2014-2018 Junction Networks, Inc <http://www.onsip.com>\n *  Homepage: https://sipjs.com\n *  License: https://sipjs.com/license/\n * \n * \n *  ~~~SIP.js contains substantial portions of JsSIP under the following license~~~\n *  Homepage: http://jssip.net\n *  Copyright (c) 2012-2013 Jos\xe9 Luis Mill\xe1n - Versatica <http://www.versatica.com>\n * \n *  Permission is hereby granted, free of charge, to any person obtaining\n *  a copy of this software and associated documentation files (the\n *  "Software"), to deal in the Software without restriction, including\n *  without limitation the rights to use, copy, modify, merge, publish,\n *  distribute, sublicense, and/or sell copies of the Software, and to\n *  permit persons to whom the Software is furnished to do so, subject to\n *  the following conditions:\n * \n *  The above copyright notice and this permission notice shall be\n *  included in all copies or substantial portions of the Software.\n * \n *  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,\n *  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n *  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n *  NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n *  LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n *  OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n *  WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n * \n *  ~~~ end JsSIP license ~~~\n * \n * \n * \n * \n */\n!function(e,t){ true?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.SIP=t():e.SIP=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(s){if(i[s])return i[s].exports;var r=i[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var i={};return t.m=e,t.c=i,t.d=function(e,i,s){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:s})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(i=window)}e.exports=i},function(e,t,i){"use strict";e.exports=i(2)(i(34))},function(e,t,i){"use strict";e.exports=function(e){var t=i(3),s=t.version,r=t.title,n=Object.defineProperties({},{version:{get:function(){return s}},name:{get:function(){return r}}});return i(4)(n,e),n.LoggerFactory=i(5)(e.console),n.EventEmitter=i(6)(),n.C=i(8)(n.name,n.version),n.Exceptions=i(9),n.Timers=i(10)(e.timers),n.Transport=e.Transport(n,e.WebSocket),i(11)(n),i(12)(n),i(13)(n),i(14)(n),i(15)(n),i(16)(n),i(18)(n),i(19)(n),n.SessionDescriptionHandler=i(20)(n.EventEmitter),i(21)(n),i(22)(n),i(23)(n),i(25)(n),i(26)(n,e),i(28)(n),n.DigestAuthentication=i(29)(n.Utils),n.Grammar=i(30)(n),n.WebRTC={Modifiers:i(32)(n),Simple:i(33)(n)},n}},function(e,t){e.exports={name:"sip.js",title:"SIP.js",description:"A simple, intuitive, and powerful JavaScript signaling library",version:"0.9.2",main:"dist/sip.min.js",browser:{"./src/environment.js":"./src/environment_browser.js"},homepage:"https://sipjs.com",author:"OnSIP <developer@onsip.com> (https://sipjs.com/aboutus/)",contributors:[{url:"https://github.com/onsip/SIP.js/blob/master/THANKS.md"}],repository:{type:"git",url:"https://github.com/onsip/SIP.js.git"},keywords:["sip","websocket","webrtc","library","javascript"],devDependencies:{"babel-core":"^6.26.0","babel-loader":"^7.1.2","babel-preset-env":"^1.6.1",eslint:"^4.9.0","jasmine-core":"^2.8.0",karma:"^1.7.1","karma-cli":"^1.0.1","karma-jasmine":"^1.1.0","karma-jasmine-html-reporter":"^0.2.2","karma-mocha-reporter":"^2.2.5","karma-phantomjs-launcher":"^1.0.4","karma-webpack":"^2.0.6",pegjs:"^0.10.0","pegjs-loader":"^0.5.4","uglifyjs-webpack-plugin":"^1.0.1",webpack:"^3.8.1"},engines:{node:">=4.0"},license:"MIT",scripts:{prebuild:"eslint src/*.js src/**/*.js",build:"webpack --progress && cp dist/sip.js dist/sip-$npm_package_version.js && cp dist/sip.min.js  dist/sip-$npm_package_version.min.js",browserTest:"sleep 2 && open http://0.0.0.0:9876/debug.html & karma start --reporters kjhtml --no-single-run",commandLineTest:"karma start --reporters mocha --browsers PhantomJS --single-run",buildAndTest:"npm run build && npm run commandLineTest"},dependencies:{ws:"^1.0.1"},optionalDependencies:{promiscuous:"^0.6.0"}}},function(e,t,i){"use strict";e.exports=function(e,t){var i;i={Promise:t.Promise,defer:function(){var e={};return e.promise=new i.Promise(function(t,i){e.resolve=t,e.reject=i}),e},reducePromises:function(t,i){return t.reduce(function(e,t){return e=e.then(t)},e.Utils.Promise.resolve(i))},augment:function(e,t,i,s){var r,n;n=t.prototype;for(r in n)(s||void 0===e[r])&&(e[r]=n[r]);t.apply(e,i)},optionsOverride:function(e,t,i,s,r,n){s&&e[i]&&r.warn(i+" is deprecated, please use "+t+" instead"),e[t]&&e[i]&&r.warn(t+" overriding "+i),e[t]=e[t]||e[i]||n},str_utf8_length:function(e){return encodeURIComponent(e).replace(/%[A-F\\d]{2}/g,"U").length},generateFakeSDP:function(e){if(e){var t=e.indexOf("o="),i=e.indexOf("\\r\\n",t);return"v=0\\r\\n"+e.slice(t,i)+"\\r\\ns=-\\r\\nt=0 0\\r\\nc=IN IP4 0.0.0.0"}},isFunction:function(e){return void 0!==e&&"[object Function]"===Object.prototype.toString.call(e)},isDecimal:function(e){return!isNaN(e)&&parseFloat(e)===parseInt(e,10)},createRandomToken:function(e,t){var i,s="";for(t=t||32,i=0;i<e;i++)s+=(Math.random()*t|0).toString(t);return s},newTag:function(){return e.Utils.createRandomToken(e.UA.C.TAG_LENGTH)},newUUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},hostType:function(t){if(t)return-1!==(t=e.Grammar.parse(t,"host"))?t.host_type:void 0},normalizeTarget:function(t,i){var s,r,n;if(t){if(t instanceof e.URI)return t;if("string"==typeof t){switch((s=t.split("@")).length){case 1:if(!i)return;r=t,n=i;break;case 2:r=s[0],n=s[1];break;default:r=s.slice(0,s.length-1).join("@"),n=s[s.length-1]}return r=r.replace(/^(sips?|tel):/i,""),/^[\\-\\.\\(\\)]*\\+?[0-9\\-\\.\\(\\)]+$/.test(r)&&(r=r.replace(/[\\-\\.\\(\\)]/g,"")),t=e.C.SIP+":"+e.Utils.escapeUser(r)+"@"+n,e.URI.parse(t)}}else;},escapeUser:function(e){return encodeURIComponent(decodeURIComponent(e)).replace(/%3A/gi,":").replace(/%2B/gi,"+").replace(/%3F/gi,"?").replace(/%2F/gi,"/")},headerize:function(e){var t,i={"Call-Id":"Call-ID",Cseq:"CSeq","Min-Se":"Min-SE",Rack:"RAck",Rseq:"RSeq","Www-Authenticate":"WWW-Authenticate"},s=e.toLowerCase().replace(/_/g,"-").split("-"),r="",n=s.length;for(t=0;t<n;t++)0!==t&&(r+="-"),r+=s[t].charAt(0).toUpperCase()+s[t].substring(1);return i[r]&&(r=i[r]),r},sipErrorCause:function(t){var i;for(i in e.C.SIP_ERROR_CAUSES)if(-1!==e.C.SIP_ERROR_CAUSES[i].indexOf(t))return e.C.causes[i];return e.C.causes.SIP_FAILURE_CODE},getReasonPhrase:function(t,i){return i||e.C.REASON_PHRASE[t]||""},getReasonHeaderValue:function(t,i){return i=e.Utils.getReasonPhrase(t,i),"SIP ;cause="+t+\' ;text="\'+i+\'"\'},getCancelReason:function(t,i){if(t&&t<200||t>699)throw new TypeError("Invalid status_code: "+t);if(t)return e.Utils.getReasonHeaderValue(t,i)},buildStatusLine:function(e,t){if(e=e||null,t=t||null,!e||e<100||e>699)throw new TypeError("Invalid status_code: "+e);if(t&&"string"!=typeof t&&!(t instanceof String))throw new TypeError("Invalid reason_phrase: "+t);return t=i.getReasonPhrase(e,t),"SIP/2.0 "+e+" "+t+"\\r\\n"},getRandomTestNetIP:function(){return"192.0.2."+function(e,t){return Math.floor(Math.random()*(t-e+1)+e)}(1,254)},calculateMD5:function(e){function t(e,t){return e<<t|e>>>32-t}function i(e,t){var i,s,r,n,o;return r=2147483648&e,n=2147483648&t,i=1073741824&e,s=1073741824&t,o=(1073741823&e)+(1073741823&t),i&s?2147483648^o^r^n:i|s?1073741824&o?3221225472^o^r^n:1073741824^o^r^n:o^r^n}function s(e,s,r,n,o,a,c){return e=i(e,i(i(function(e,t,i){return e&t|~e&i}(s,r,n),o),c)),i(t(e,a),s)}function r(e,s,r,n,o,a,c){return e=i(e,i(i(function(e,t,i){return e&i|t&~i}(s,r,n),o),c)),i(t(e,a),s)}function n(e,s,r,n,o,a,c){return e=i(e,i(i(function(e,t,i){return e^t^i}(s,r,n),o),c)),i(t(e,a),s)}function o(e,s,r,n,o,a,c){return e=i(e,i(i(function(e,t,i){return t^(e|~i)}(s,r,n),o),c)),i(t(e,a),s)}function a(e){var t,i="",s="";for(t=0;t<=3;t++)i+=(s="0"+(e>>>8*t&255).toString(16)).substr(s.length-2,2);return i}var c,h,u,l,d,p,g,f,T,m=[];for(m=function(e){for(var t,i=e.length,s=i+8,r=16*((s-s%64)/64+1),n=Array(r-1),o=0,a=0;a<i;)o=a%4*8,n[t=(a-a%4)/4]=n[t]|e.charCodeAt(a)<<o,a++;return t=(a-a%4)/4,o=a%4*8,n[t]=n[t]|128<<o,n[r-2]=i<<3,n[r-1]=i>>>29,n}(e=function(e){e=e.replace(/\\r\\n/g,"\\n");for(var t="",i=0;i<e.length;i++){var s=e.charCodeAt(i);s<128?t+=String.fromCharCode(s):s>127&&s<2048?(t+=String.fromCharCode(s>>6|192),t+=String.fromCharCode(63&s|128)):(t+=String.fromCharCode(s>>12|224),t+=String.fromCharCode(s>>6&63|128),t+=String.fromCharCode(63&s|128))}return t}(e)),p=1732584193,g=4023233417,f=2562383102,T=271733878,c=0;c<m.length;c+=16)h=p,u=g,l=f,d=T,g=o(g=o(g=o(g=o(g=n(g=n(g=n(g=n(g=r(g=r(g=r(g=r(g=s(g=s(g=s(g=s(g,f=s(f,T=s(T,p=s(p,g,f,T,m[c+0],7,3614090360),g,f,m[c+1],12,3905402710),p,g,m[c+2],17,606105819),T,p,m[c+3],22,3250441966),f=s(f,T=s(T,p=s(p,g,f,T,m[c+4],7,4118548399),g,f,m[c+5],12,1200080426),p,g,m[c+6],17,2821735955),T,p,m[c+7],22,4249261313),f=s(f,T=s(T,p=s(p,g,f,T,m[c+8],7,1770035416),g,f,m[c+9],12,2336552879),p,g,m[c+10],17,4294925233),T,p,m[c+11],22,2304563134),f=s(f,T=s(T,p=s(p,g,f,T,m[c+12],7,1804603682),g,f,m[c+13],12,4254626195),p,g,m[c+14],17,2792965006),T,p,m[c+15],22,1236535329),f=r(f,T=r(T,p=r(p,g,f,T,m[c+1],5,4129170786),g,f,m[c+6],9,3225465664),p,g,m[c+11],14,643717713),T,p,m[c+0],20,3921069994),f=r(f,T=r(T,p=r(p,g,f,T,m[c+5],5,3593408605),g,f,m[c+10],9,38016083),p,g,m[c+15],14,3634488961),T,p,m[c+4],20,3889429448),f=r(f,T=r(T,p=r(p,g,f,T,m[c+9],5,568446438),g,f,m[c+14],9,3275163606),p,g,m[c+3],14,4107603335),T,p,m[c+8],20,1163531501),f=r(f,T=r(T,p=r(p,g,f,T,m[c+13],5,2850285829),g,f,m[c+2],9,4243563512),p,g,m[c+7],14,1735328473),T,p,m[c+12],20,2368359562),f=n(f,T=n(T,p=n(p,g,f,T,m[c+5],4,4294588738),g,f,m[c+8],11,2272392833),p,g,m[c+11],16,1839030562),T,p,m[c+14],23,4259657740),f=n(f,T=n(T,p=n(p,g,f,T,m[c+1],4,2763975236),g,f,m[c+4],11,1272893353),p,g,m[c+7],16,4139469664),T,p,m[c+10],23,3200236656),f=n(f,T=n(T,p=n(p,g,f,T,m[c+13],4,681279174),g,f,m[c+0],11,3936430074),p,g,m[c+3],16,3572445317),T,p,m[c+6],23,76029189),f=n(f,T=n(T,p=n(p,g,f,T,m[c+9],4,3654602809),g,f,m[c+12],11,3873151461),p,g,m[c+15],16,530742520),T,p,m[c+2],23,3299628645),f=o(f,T=o(T,p=o(p,g,f,T,m[c+0],6,4096336452),g,f,m[c+7],10,1126891415),p,g,m[c+14],15,2878612391),T,p,m[c+5],21,4237533241),f=o(f,T=o(T,p=o(p,g,f,T,m[c+12],6,1700485571),g,f,m[c+3],10,2399980690),p,g,m[c+10],15,4293915773),T,p,m[c+1],21,2240044497),f=o(f,T=o(T,p=o(p,g,f,T,m[c+8],6,1873313359),g,f,m[c+15],10,4264355552),p,g,m[c+6],15,2734768916),T,p,m[c+13],21,1309151649),f=o(f,T=o(T,p=o(p,g,f,T,m[c+4],6,4149444226),g,f,m[c+11],10,3174756917),p,g,m[c+2],15,718787259),T,p,m[c+9],21,3951481745),p=i(p,h),g=i(g,u),f=i(f,l),T=i(T,d);return(a(p)+a(g)+a(f)+a(T)).toLowerCase()}},e.Utils=i}},function(e,t,i){"use strict";var s={error:0,warn:1,log:2,debug:3};e.exports=function(e){function t(e,t,i){this.logger=e,this.category=t,this.label=i}var i=function(){var e,t=2,i=!0,r=null;this.loggers={},e=this.getLogger("sip.loggerfactory"),Object.defineProperties(this,{builtinEnabled:{get:function(){return i},set:function(t){"boolean"==typeof t?i=t:e.error(\'invalid "builtinEnabled" parameter value: \'+JSON.stringify(t))}},level:{get:function(){return t},set:function(i){i>=0&&i<=3?t=i:i>3?t=3:s.hasOwnProperty(i)?t=s[i]:e.error(\'invalid "level" parameter value: \'+JSON.stringify(i))}},connector:{get:function(){return r},set:function(t){null===t||""===t||void 0===t?r=null:"function"==typeof t?r=t:e.error(\'invalid "connector" parameter value: \'+JSON.stringify(t))}}})};return i.prototype.print=function(t,i,s,r){if("string"==typeof r){var n=[new Date,i];s&&n.push(s),r=n.concat(r).join(" | ")}t.call(e,r)},Object.keys(s).forEach(function(r){t.prototype[r]=function(e){this.logger[r](this.category,this.label,e)},i.prototype[r]=function(t,i,n){this.level>=s[r]&&(this.builtinEnabled&&this.print(e[r],t,i,n),this.connector&&this.connector(r,t,i,n))}}),i.prototype.getLogger=function(e,i){var s;return i&&3===this.level?new t(this,e,i):this.loggers[e]?this.loggers[e]:(s=new t(this,e),this.loggers[e]=s,s)},i}},function(e,t,i){"use strict";var s=i(7).EventEmitter;e.exports=function(){function e(){s.call(this)}return e.prototype=Object.create(s.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),e}},function(e,t){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function s(e){return"function"==typeof e}function r(e){return"object"==typeof e&&null!==e}function n(e){return void 0===e}e.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(e){if(!function(e){return"number"==typeof e}(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},i.prototype.emit=function(e){var t,i,o,a,c,h;if(this._events||(this._events={}),"error"===e&&(!this._events.error||r(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var u=new Error(\'Uncaught, unspecified "error" event. (\'+t+")");throw u.context=t,u}if(i=this._events[e],n(i))return!1;if(s(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),i.apply(this,a)}else if(r(i))for(a=Array.prototype.slice.call(arguments,1),o=(h=i.slice()).length,c=0;c<o;c++)h[c].apply(this,a);return!0},i.prototype.addListener=function(e,t){var o;if(!s(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,s(t.listener)?t.listener:t),this._events[e]?r(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,r(this._events[e])&&!this._events[e].warned&&(o=n(this._maxListeners)?i.defaultMaxListeners:this._maxListeners)&&o>0&&this._events[e].length>o&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(e,t){function i(){this.removeListener(e,i),r||(r=!0,t.apply(this,arguments))}if(!s(t))throw TypeError("listener must be a function");var r=!1;return i.listener=t,this.on(e,i),this},i.prototype.removeListener=function(e,t){var i,n,o,a;if(!s(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(i=this._events[e],o=i.length,n=-1,i===t||s(i.listener)&&i.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(r(i)){for(a=o;a-- >0;)if(i[a]===t||i[a].listener&&i[a].listener===t){n=a;break}if(n<0)return this;1===i.length?(i.length=0,delete this._events[e]):i.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},i.prototype.removeAllListeners=function(e){var t,i;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(i=this._events[e],s(i))this.removeListener(e,i);else if(i)for(;i.length;)this.removeListener(e,i[i.length-1]);return delete this._events[e],this},i.prototype.listeners=function(e){return this._events&&this._events[e]?s(this._events[e])?[this._events[e]]:this._events[e].slice():[]},i.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(s(t))return 1;if(t)return t.length}return 0},i.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,i){"use strict";e.exports=function(e,t){return{USER_AGENT:e+"/"+t,SIP:"sip",SIPS:"sips",causes:{CONNECTION_ERROR:"Connection Error",REQUEST_TIMEOUT:"Request Timeout",SIP_FAILURE_CODE:"SIP Failure Code",INTERNAL_ERROR:"Internal Error",BUSY:"Busy",REJECTED:"Rejected",REDIRECTED:"Redirected",UNAVAILABLE:"Unavailable",NOT_FOUND:"Not Found",ADDRESS_INCOMPLETE:"Address Incomplete",INCOMPATIBLE_SDP:"Incompatible SDP",AUTHENTICATION_ERROR:"Authentication Error",DIALOG_ERROR:"Dialog Error",WEBRTC_NOT_SUPPORTED:"WebRTC Not Supported",WEBRTC_ERROR:"WebRTC Error",CANCELED:"Canceled",NO_ANSWER:"No Answer",EXPIRES:"Expires",NO_ACK:"No ACK",NO_PRACK:"No PRACK",USER_DENIED_MEDIA_ACCESS:"User Denied Media Access",BAD_MEDIA_DESCRIPTION:"Bad Media Description",RTP_TIMEOUT:"RTP Timeout"},supported:{UNSUPPORTED:"none",SUPPORTED:"supported",REQUIRED:"required"},SIP_ERROR_CAUSES:{REDIRECTED:[300,301,302,305,380],BUSY:[486,600],REJECTED:[403,603],NOT_FOUND:[404,604],UNAVAILABLE:[480,410,408,430],ADDRESS_INCOMPLETE:[484],INCOMPATIBLE_SDP:[488,606],AUTHENTICATION_ERROR:[401,407]},ACK:"ACK",BYE:"BYE",CANCEL:"CANCEL",INFO:"INFO",INVITE:"INVITE",MESSAGE:"MESSAGE",NOTIFY:"NOTIFY",OPTIONS:"OPTIONS",REGISTER:"REGISTER",UPDATE:"UPDATE",SUBSCRIBE:"SUBSCRIBE",REFER:"REFER",PRACK:"PRACK",REASON_PHRASE:{100:"Trying",180:"Ringing",181:"Call Is Being Forwarded",182:"Queued",183:"Session Progress",199:"Early Dialog Terminated",200:"OK",202:"Accepted",204:"No Notification",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",305:"Use Proxy",380:"Alternative Service",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",410:"Gone",412:"Conditional Request Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Unsupported URI Scheme",417:"Unknown Resource-Priority",420:"Bad Extension",421:"Extension Required",422:"Session Interval Too Small",423:"Interval Too Brief",428:"Use Identity Header",429:"Provide Referrer Identity",430:"Flow Failed",433:"Anonymity Disallowed",436:"Bad Identity-Info",437:"Unsupported Certificate",438:"Invalid Identity Header",439:"First Hop Lacks Outbound Support",440:"Max-Breadth Exceeded",469:"Bad Info Package",470:"Consent Needed",478:"Unresolvable Destination",480:"Temporarily Unavailable",481:"Call/Transaction Does Not Exist",482:"Loop Detected",483:"Too Many Hops",484:"Address Incomplete",485:"Ambiguous",486:"Busy Here",487:"Request Terminated",488:"Not Acceptable Here",489:"Bad Event",491:"Request Pending",493:"Undecipherable",494:"Security Agreement Required",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Server Time-out",505:"Version Not Supported",513:"Message Too Large",580:"Precondition Failure",600:"Busy Everywhere",603:"Decline",604:"Does Not Exist Anywhere",606:"Not Acceptable"},OPTION_TAGS:{"100rel":!0,199:!0,answermode:!0,"early-session":!0,eventlist:!0,explicitsub:!0,"from-change":!0,"geolocation-http":!0,"geolocation-sip":!0,gin:!0,gruu:!0,histinfo:!0,ice:!0,join:!0,"multiple-refer":!0,norefersub:!0,nosub:!0,outbound:!0,path:!0,policy:!0,precondition:!0,pref:!0,privacy:!0,"recipient-list-invite":!0,"recipient-list-message":!0,"recipient-list-subscribe":!0,replaces:!0,"resource-priority":!0,"sdp-anat":!0,"sec-agree":!0,tdialog:!0,timer:!0,uui:!0}}}},function(e,t,i){"use strict";e.exports={ConfigurationError:function(){var e=function(e,t){this.code=1,this.name="CONFIGURATION_ERROR",this.parameter=e,this.value=t,this.message=this.value?"Invalid value "+JSON.stringify(this.value)+\' for parameter "\'+this.parameter+\'"\':"Missing parameter: "+this.parameter};return e.prototype=new Error,e}(),InvalidStateError:function(){var e=function(e){this.code=2,this.name="INVALID_STATE_ERROR",this.status=e,this.message="Invalid status: "+e};return e.prototype=new Error,e}(),NotSupportedError:function(){var e=function(e){this.code=3,this.name="NOT_SUPPORTED_ERROR",this.message=e};return e.prototype=new Error,e}(),GetDescriptionError:function(){var e=function(e){this.code=4,this.name="GET_DESCRIPTION_ERROR",this.message=e};return e.prototype=new Error,e}(),RenegotiationError:function(){var e=function(e){this.code=5,this.name="RENEGOTIATION_ERROR",this.message=e};return e.prototype=new Error,e}()}},function(e,t,i){"use strict";e.exports=function(e){var t={T1:500,T2:4e3,T4:5e3,TIMER_B:32e3,TIMER_D:0,TIMER_F:32e3,TIMER_H:32e3,TIMER_I:0,TIMER_J:0,TIMER_K:0,TIMER_L:32e3,TIMER_M:32e3,TIMER_N:32e3,PROVISIONAL_RESPONSE_INTERVAL:6e4};return["setTimeout","clearTimeout","setInterval","clearInterval"].forEach(function(i){t[i]=function(){return e[i].apply(e,arguments)}}),t}},function(e,t,i){"use strict";e.exports=function(e){function t(e,t){var i=t,s=0,r=0;if(e.substring(i,i+2).match(/(^\\r\\n)/))return-2;for(;0===s;){if(-1===(r=e.indexOf("\\r\\n",i)))return r;!e.substring(r+2,r+4).match(/(^\\r\\n)/)&&e.charAt(r+2).match(/(^\\s+)/)?i=r+2:s=r}return s}function i(t,i,s,r){var n,o,a,c,h=i.indexOf(":",s),u=i.substring(s,h).trim(),l=i.substring(h+1,r).trim();switch(u.toLowerCase()){case"via":case"v":t.addHeader("via",l),1===t.getHeaders("via").length?(c=t.parseHeader("Via"))&&(t.via=c,t.via_branch=c.branch):c=0;break;case"from":case"f":t.setHeader("from",l),(c=t.parseHeader("from"))&&(t.from=c,t.from_tag=c.getParam("tag"));break;case"to":case"t":t.setHeader("to",l),(c=t.parseHeader("to"))&&(t.to=c,t.to_tag=c.getParam("tag"));break;case"record-route":if(-1===(c=e.Grammar.parse(l,"Record_Route"))){c=void 0;break}for(a=c.length,o=0;o<a;o++)n=c[o],t.addHeader("record-route",l.substring(n.position,n.offset)),t.headers["Record-Route"][t.getHeaders("record-route").length-1].parsed=n.parsed;break;case"call-id":case"i":t.setHeader("call-id",l),(c=t.parseHeader("call-id"))&&(t.call_id=l);break;case"contact":case"m":if(-1===(c=e.Grammar.parse(l,"Contact"))){c=void 0;break}for(a=c.length,o=0;o<a;o++)n=c[o],t.addHeader("contact",l.substring(n.position,n.offset)),t.headers.Contact[t.getHeaders("contact").length-1].parsed=n.parsed;break;case"content-length":case"l":t.setHeader("content-length",l),c=t.parseHeader("content-length");break;case"content-type":case"c":t.setHeader("content-type",l),c=t.parseHeader("content-type");break;case"cseq":t.setHeader("cseq",l),(c=t.parseHeader("cseq"))&&(t.cseq=c.value),t instanceof e.IncomingResponse&&(t.method=c.method);break;case"max-forwards":t.setHeader("max-forwards",l),c=t.parseHeader("max-forwards");break;case"www-authenticate":t.setHeader("www-authenticate",l),c=t.parseHeader("www-authenticate");break;case"proxy-authenticate":t.setHeader("proxy-authenticate",l),c=t.parseHeader("proxy-authenticate");break;case"refer-to":case"r":t.setHeader("refer-to",l),(c=t.parseHeader("refer-to"))&&(t.refer_to=c);break;default:t.setHeader(u,l),c=0}return void 0!==c||{error:\'error parsing header "\'+u+\'"\'}}var s;(s={}).parseMessage=function(s,r){var n,o,a,c,h,u=0,l=s.indexOf("\\r\\n"),d=r.getLogger("sip.parser");if(-1!==l){if(o=s.substring(0,l),-1!==(h=e.Grammar.parse(o,"Request_Response"))){for(h.status_code?((n=new e.IncomingResponse(r)).status_code=h.status_code,n.reason_phrase=h.reason_phrase):((n=new e.IncomingRequest(r)).method=h.method,n.ruri=h.uri),n.data=s,u=l+2;;){if(-2===(l=t(s,u))){c=u+2;break}if(-1===l)return void d.error("malformed message");if(!0!==(h=i(n,s,u,l)))return void d.error(h.error);u=l+2}return n.hasHeader("content-length")?(a=n.getHeader("content-length"),n.body=s.substr(c,a)):n.body=s.substring(c),n}d.warn(\'error parsing first line of SIP message: "\'+o+\'"\')}else d.warn("no CRLF found, not a SIP message, discarded")},e.Parser=s}},function(e,t,i){"use strict";e.exports=function(e){function t(t){var i=t.ua.configuration.hackAllowUnregisteredOptionTags,s=[],r={};return t.method===e.C.REGISTER?s.push("path","gruu"):t.method===e.C.INVITE&&(t.ua.contact.pub_gruu||t.ua.contact.temp_gruu)&&s.push("gruu"),t.ua.configuration.rel100===e.C.supported.SUPPORTED&&s.push("100rel"),t.ua.configuration.replaces===e.C.supported.SUPPORTED&&s.push("replaces"),s.push("outbound"),s=s.concat(t.ua.configuration.extraSupported),"Supported: "+(s=s.filter(function(t){var s=e.C.OPTION_TAGS[t],n=!r[t];return r[t]=!0,(s||i)&&n})).join(", ")+"\\r\\n"}var i,s,r,n;(i=function(t,i,s,r,n,o){var a,c,h,u,l,d;if(r=r||{},!t||!i||!s)return null;this.logger=s.getLogger("sip.sipmessage"),this.ua=s,this.headers={},this.method=t,this.ruri=i,this.body=o,this.extraHeaders=(n||[]).slice(),this.statusCode=r.status_code,this.reasonPhrase=r.reason_phrase,r.route_set?this.setHeader("route",r.route_set):s.configuration.usePreloadedRoute&&this.setHeader("route",s.transport.server.sip_uri),this.setHeader("via",""),this.setHeader("max-forwards",e.UA.C.MAX_FORWARDS),l=r.to_uri||i,a=r.to_displayName||0===r.to_displayName?\'"\'+r.to_displayName+\'" \':"",a+="<"+(l&&l.toRaw?l.toRaw():l)+">",a+=r.to_tag?";tag="+r.to_tag:"",this.to=new e.NameAddrHeader.parse(a),this.setHeader("to",a),d=r.from_uri||s.configuration.uri,c=r.from_displayName||0===r.from_displayName?\'"\'+r.from_displayName+\'" \':s.configuration.displayName?\'"\'+s.configuration.displayName+\'" \':"",c+="<"+(d&&d.toRaw?d.toRaw():d)+">;tag=",c+=r.from_tag||e.Utils.newTag(),this.from=new e.NameAddrHeader.parse(c),this.setHeader("from",c),h=r.call_id||s.configuration.sipjsId+e.Utils.createRandomToken(15),this.call_id=h,this.setHeader("call-id",h),u=r.cseq||Math.floor(1e4*Math.random()),this.cseq=u,this.setHeader("cseq",u+" "+t)}).prototype={setHeader:function(t,i){this.headers[e.Utils.headerize(t)]=i instanceof Array?i:[i]},getHeader:function(t){var i,s,r=this.extraHeaders.length,n=this.headers[e.Utils.headerize(t)];if(n){if(n[0])return n[0]}else for(i=new RegExp("^\\\\s*"+t+"\\\\s*:","i"),s=0;s<r;s++)if(n=this.extraHeaders[s],i.test(n))return n.substring(n.indexOf(":")+1).trim()},getHeaders:function(t){var i,s,r,n=this.headers[e.Utils.headerize(t)],o=[];if(n){for(s=n.length,i=0;i<s;i++)o.push(n[i]);return o}for(s=this.extraHeaders.length,r=new RegExp("^\\\\s*"+t+"\\\\s*:","i"),i=0;i<s;i++)n=this.extraHeaders[i],r.test(n)&&o.push(n.substring(n.indexOf(":")+1).trim());return o},hasHeader:function(t){var i,s,r=this.extraHeaders.length;if(this.headers[e.Utils.headerize(t)])return!0;for(i=new RegExp("^\\\\s*"+t+"\\\\s*:","i"),s=0;s<r;s++)if(i.test(this.extraHeaders[s]))return!0;return!1},toString:function(){var i,s,r,n="";n+=this.method+" "+(this.ruri.toRaw?this.ruri.toRaw():this.ruri)+" SIP/2.0\\r\\n";for(i in this.headers)for(s=this.headers[i].length,r=0;r<s;r++)n+=i+": "+this.headers[i][r]+"\\r\\n";for(s=this.extraHeaders.length,r=0;r<s;r++)n+=this.extraHeaders[r].trim()+"\\r\\n";return n+=t(this),n+="User-Agent: "+this.ua.configuration.userAgentString+"\\r\\n",this.body?"string"==typeof this.body?(n+="Content-Length: "+(s=e.Utils.str_utf8_length(this.body))+"\\r\\n\\r\\n",n+=this.body):this.body.body&&this.body.contentType?(s=e.Utils.str_utf8_length(this.body.body),n+="Content-Type: "+this.body.contentType+"\\r\\n",n+="Content-Length: "+s+"\\r\\n\\r\\n",n+=this.body.body):n+="Content-Length: 0\\r\\n\\r\\n":n+="Content-Length: 0\\r\\n\\r\\n",n}},(s=function(){this.data=null,this.headers=null,this.method=null,this.via=null,this.via_branch=null,this.call_id=null,this.cseq=null,this.from=null,this.from_tag=null,this.to=null,this.to_tag=null,this.body=null}).prototype={addHeader:function(t,i){var s={raw:i};t=e.Utils.headerize(t),this.headers[t]?this.headers[t].push(s):this.headers[t]=[s]},getHeader:function(t){var i=this.headers[e.Utils.headerize(t)];if(i)return i[0]?i[0].raw:void 0},getHeaders:function(t){var i,s,r=this.headers[e.Utils.headerize(t)],n=[];if(!r)return[];for(s=r.length,i=0;i<s;i++)n.push(r[i].raw);return n},hasHeader:function(t){return!!this.headers[e.Utils.headerize(t)]},parseHeader:function(t,i){var s,r,n;if(t=e.Utils.headerize(t),i=i||0,this.headers[t]){if(!(i>=this.headers[t].length))return s=this.headers[t][i],r=s.raw,s.parsed?s.parsed:-1===(n=e.Grammar.parse(r,t.replace(/-/g,"_")))?(this.headers[t].splice(i,1),void this.logger.warn(\'error parsing "\'+t+\'" header field with value "\'+r+\'"\')):(s.parsed=n,n);this.logger.log(\'not so many "\'+t+\'" headers present\')}else this.logger.log(\'header "\'+t+\'" not present\')},s:function(e,t){return this.parseHeader(e,t)},setHeader:function(t,i){var s={raw:i};this.headers[e.Utils.headerize(t)]=[s]},toString:function(){return this.data}},((r=function(e){this.logger=e.getLogger("sip.sipmessage"),this.ua=e,this.headers={},this.ruri=null,this.transport=null,this.server_transaction=null}).prototype=new s).reply=function(i,s,r,n,o,a){var c,h,u,l,d,p=this.getHeader("To"),g=0,f=0;if(d=e.Utils.buildStatusLine(i,s),r=(r||[]).slice(),this.method===e.C.INVITE&&i>100&&i<=200)for(u=(c=this.getHeaders("record-route")).length;g<u;g++)d+="Record-Route: "+c[g]+"\\r\\n";for(u=(h=this.getHeaders("via")).length;f<u;f++)d+="Via: "+h[f]+"\\r\\n";for(!this.to_tag&&i>100?p+=";tag="+e.Utils.newTag():this.to_tag&&!this.s("to").hasParam("tag")&&(p+=";tag="+this.to_tag),d+="To: "+p+"\\r\\n",d+="From: "+this.getHeader("From")+"\\r\\n",d+="Call-ID: "+this.call_id+"\\r\\n",d+="CSeq: "+this.cseq+" "+this.method+"\\r\\n",u=r.length,l=0;l<u;l++)d+=r[l].trim()+"\\r\\n";return d+=t(this),d+="User-Agent: "+this.ua.configuration.userAgentString+"\\r\\n",n?"string"==typeof n?(d+="Content-Type: application/sdp\\r\\n",d+="Content-Length: "+(u=e.Utils.str_utf8_length(n))+"\\r\\n\\r\\n",d+=n):n.body&&n.contentType?(u=e.Utils.str_utf8_length(n.body),d+="Content-Type: "+n.contentType+"\\r\\n",d+="Content-Length: "+u+"\\r\\n\\r\\n",d+=n.body):d+="Content-Length: 0\\r\\n\\r\\n":d+="Content-Length: 0\\r\\n\\r\\n",this.server_transaction.receiveResponse(i,d).then(o,a),d},r.prototype.reply_sl=function(t,i){var s,r,n=0,o=this.getHeaders("via"),a=o.length;for(r=e.Utils.buildStatusLine(t,i);n<a;n++)r+="Via: "+o[n]+"\\r\\n";s=this.getHeader("To"),!this.to_tag&&t>100?s+=";tag="+e.Utils.newTag():this.to_tag&&!this.s("to").hasParam("tag")&&(s+=";tag="+this.to_tag),r+="To: "+s+"\\r\\n",r+="From: "+this.getHeader("From")+"\\r\\n",r+="Call-ID: "+this.call_id+"\\r\\n",r+="CSeq: "+this.cseq+" "+this.method+"\\r\\n",r+="User-Agent: "+this.ua.configuration.userAgentString+"\\r\\n",r+="Content-Length: 0\\r\\n\\r\\n",this.transport.send(r)},(n=function(e){this.logger=e.getLogger("sip.sipmessage"),this.headers={},this.status_code=null,this.reason_phrase=null}).prototype=new s,e.OutgoingRequest=i,e.IncomingRequest=r,e.IncomingResponse=n}},function(e,t,i){"use strict";e.exports=function(e){var t;(t=function(t,i,s,r,n,o){var a,c,h,u;if(!s)throw new TypeError(\'missing or invalid "host" parameter\');t=t||e.C.SIP,this.parameters={},this.headers={};for(a in n)this.setParam(a,n[a]);for(c in o)this.setHeader(c,o[c]);h={scheme:t,user:i,host:s,port:r},u={scheme:t.toLowerCase(),user:i,host:s.toLowerCase(),port:r},Object.defineProperties(this,{_normal:{get:function(){return u}},_raw:{get:function(){return h}},scheme:{get:function(){return u.scheme},set:function(e){h.scheme=e,u.scheme=e.toLowerCase()}},user:{get:function(){return u.user},set:function(e){u.user=h.user=e}},host:{get:function(){return u.host},set:function(e){h.host=e,u.host=e.toLowerCase()}},aor:{get:function(){return u.user+"@"+u.host}},port:{get:function(){return u.port},set:function(e){u.port=h.port=0===e?e:parseInt(e,10)||null}}})}).prototype={setParam:function(e,t){e&&(this.parameters[e.toLowerCase()]=void 0===t||null===t?null:t.toString().toLowerCase())},getParam:function(e){if(e)return this.parameters[e.toLowerCase()]},hasParam:function(e){if(e)return!!this.parameters.hasOwnProperty(e.toLowerCase())},deleteParam:function(e){var t;if(e=e.toLowerCase(),this.parameters.hasOwnProperty(e))return t=this.parameters[e],delete this.parameters[e],t},clearParams:function(){this.parameters={}},setHeader:function(t,i){this.headers[e.Utils.headerize(t)]=i instanceof Array?i:[i]},getHeader:function(t){if(t)return this.headers[e.Utils.headerize(t)]},hasHeader:function(t){if(t)return!!this.headers.hasOwnProperty(e.Utils.headerize(t))},deleteHeader:function(t){var i;if(t=e.Utils.headerize(t),this.headers.hasOwnProperty(t))return i=this.headers[t],delete this.headers[t],i},clearHeaders:function(){this.headers={}},clone:function(){return new t(this._raw.scheme,this._raw.user,this._raw.host,this._raw.port,JSON.parse(JSON.stringify(this.parameters)),JSON.parse(JSON.stringify(this.headers)))},toRaw:function(){return this._toString(this._raw)},toString:function(){return this._toString(this._normal)},_toString:function(t){var i,s,r,n,o=[];n=t.scheme+":",t.scheme.toLowerCase().match("^sips?$")||(n+="//"),t.user&&(n+=e.Utils.escapeUser(t.user)+"@"),n+=t.host,(t.port||0===t.port)&&(n+=":"+t.port);for(s in this.parameters)n+=";"+s,null!==this.parameters[s]&&(n+="="+this.parameters[s]);for(i in this.headers)for(r in this.headers[i])o.push(i+"="+this.headers[i][r]);return o.length>0&&(n+="?"+o.join("&")),n}},t.parse=function(t){return-1!==(t=e.Grammar.parse(t,"SIP_URI"))?t:void 0},e.URI=t}},function(e,t,i){"use strict";e.exports=function(e){var t;(t=function(t,i,s){var r;if(!(t&&t instanceof e.URI))throw new TypeError(\'missing or invalid "uri" parameter\');this.uri=t,this.parameters={};for(r in s)this.setParam(r,s[r]);Object.defineProperties(this,{friendlyName:{get:function(){return this.displayName||t.aor}},displayName:{get:function(){return i},set:function(e){i=0===e?"0":e}}})}).prototype={setParam:function(e,t){e&&(this.parameters[e.toLowerCase()]=void 0===t||null===t?null:t.toString())},getParam:e.URI.prototype.getParam,hasParam:e.URI.prototype.hasParam,deleteParam:e.URI.prototype.deleteParam,clearParams:e.URI.prototype.clearParams,clone:function(){return new t(this.uri.clone(),this.displayName,JSON.parse(JSON.stringify(this.parameters)))},toString:function(){var e,t;e=this.displayName||0===this.displayName?\'"\'+this.displayName+\'" \':"",e+="<"+this.uri.toString()+">";for(t in this.parameters)e+=";"+t,null!==this.parameters[t]&&(e+="="+this.parameters[t]);return e}},t.parse=function(t){return-1!==(t=e.Grammar.parse(t,"Name_Addr_Header"))?t:void 0},e.NameAddrHeader=t}},function(e,t,i){"use strict";e.exports=function(e){function t(e,t,i){var s;return s="SIP/2.0/"+(e.ua.configuration.hackViaTcp?"TCP":t.server.scheme),s+=" "+e.ua.configuration.viaHost+";branch="+i,e.ua.configuration.forceRport&&(s+=";rport"),s}var i={STATUS_TRYING:1,STATUS_PROCEEDING:2,STATUS_CALLING:3,STATUS_ACCEPTED:4,STATUS_COMPLETED:5,STATUS_TERMINATED:6,STATUS_CONFIRMED:7,NON_INVITE_CLIENT:"nict",NON_INVITE_SERVER:"nist",INVITE_CLIENT:"ict",INVITE_SERVER:"ist"},s=function(e,s,r){var n;this.type=i.NON_INVITE_CLIENT,this.transport=r,this.id="z9hG4bK"+Math.floor(1e7*Math.random()),this.request_sender=e,this.request=s,this.logger=e.ua.getLogger("sip.transaction.nict",this.id),n=t(e,r,this.id),this.request.setHeader("via",n),this.request_sender.ua.newTransaction(this)};(s.prototype=Object.create(e.EventEmitter.prototype)).stateChanged=function(e){this.state=e,this.emit("stateChanged")},s.prototype.send=function(){this.stateChanged(i.STATUS_TRYING),this.F=e.Timers.setTimeout(this.timer_F.bind(this),e.Timers.TIMER_F),this.transport.send(this.request)||this.onTransportError()},s.prototype.onTransportError=function(){this.logger.log("transport error occurred, deleting non-INVITE client transaction "+this.id),e.Timers.clearTimeout(this.F),e.Timers.clearTimeout(this.K),this.stateChanged(i.STATUS_TERMINATED),this.request_sender.ua.destroyTransaction(this),this.request_sender.onTransportError()},s.prototype.timer_F=function(){this.logger.debug("Timer F expired for non-INVITE client transaction "+this.id),this.stateChanged(i.STATUS_TERMINATED),this.request_sender.ua.destroyTransaction(this),this.request_sender.onRequestTimeout()},s.prototype.timer_K=function(){this.stateChanged(i.STATUS_TERMINATED),this.request_sender.ua.destroyTransaction(this)},s.prototype.receiveResponse=function(t){var s=t.status_code;if(s<200)switch(this.state){case i.STATUS_TRYING:case i.STATUS_PROCEEDING:this.stateChanged(i.STATUS_PROCEEDING),this.request_sender.receiveResponse(t)}else switch(this.state){case i.STATUS_TRYING:case i.STATUS_PROCEEDING:this.stateChanged(i.STATUS_COMPLETED),e.Timers.clearTimeout(this.F),408===s?this.request_sender.onRequestTimeout():this.request_sender.receiveResponse(t),this.K=e.Timers.setTimeout(this.timer_K.bind(this),e.Timers.TIMER_K)}};var r=function(e,s,r){var n,o=this;this.type=i.INVITE_CLIENT,this.transport=r,this.id="z9hG4bK"+Math.floor(1e7*Math.random()),this.request_sender=e,this.request=s,this.logger=e.ua.getLogger("sip.transaction.ict",this.id),n=t(e,r,this.id),this.request.setHeader("via",n),this.request_sender.ua.newTransaction(this),this.request.cancel=function(e,t){for(var i=(t=(t||[]).slice()).length,s=null,r=0;r<i;r++)s=(s||"")+t[r].trim()+"\\r\\n";o.cancel_request(o,e,s)}};(r.prototype=Object.create(e.EventEmitter.prototype)).stateChanged=function(e){this.state=e,this.emit("stateChanged")},r.prototype.send=function(){this.stateChanged(i.STATUS_CALLING),this.B=e.Timers.setTimeout(this.timer_B.bind(this),e.Timers.TIMER_B),this.transport.send(this.request)||this.onTransportError()},r.prototype.onTransportError=function(){this.logger.log("transport error occurred, deleting INVITE client transaction "+this.id),e.Timers.clearTimeout(this.B),e.Timers.clearTimeout(this.D),e.Timers.clearTimeout(this.M),this.stateChanged(i.STATUS_TERMINATED),this.request_sender.ua.destroyTransaction(this),this.state!==i.STATUS_ACCEPTED&&this.request_sender.onTransportError()},r.prototype.timer_M=function(){this.logger.debug("Timer M expired for INVITE client transaction "+this.id),this.state===i.STATUS_ACCEPTED&&(e.Timers.clearTimeout(this.B),this.stateChanged(i.STATUS_TERMINATED),this.request_sender.ua.destroyTransaction(this))},r.prototype.timer_B=function(){this.logger.debug("Timer B expired for INVITE client transaction "+this.id),this.state===i.STATUS_CALLING&&(this.stateChanged(i.STATUS_TERMINATED),this.request_sender.ua.destroyTransaction(this),this.request_sender.onRequestTimeout())},r.prototype.timer_D=function(){this.logger.debug("Timer D expired for INVITE client transaction "+this.id),e.Timers.clearTimeout(this.B),this.stateChanged(i.STATUS_TERMINATED),this.request_sender.ua.destroyTransaction(this)},r.prototype.sendACK=function(t){var i,s=this;t=t||{},i=this.response.getHeader("contact")?this.response.parseHeader("contact").uri:this.request.ruri;var r=new e.OutgoingRequest("ACK",i,this.request.ua,{cseq:this.response.cseq,call_id:this.response.call_id,from_uri:this.response.from.uri,from_tag:this.response.from_tag,to_uri:this.response.to.uri,to_tag:this.response.to_tag,route_set:this.response.getHeaders("record-route").reverse()},t.extraHeaders||[],t.body);return this.ackSender=new e.RequestSender({request:r,onRequestTimeout:this.request_sender.applicant.applicant?this.request_sender.applicant.applicant.onRequestTimeout:function(){s.logger.warn("ACK Request timed out")},onTransportError:this.request_sender.applicant.applicant?this.request_sender.applicant.applicant.onRequestTransportError:function(){s.loigger.warn("ACK Request had a transport error")},receiveResponse:t.receiveResponse||function(){s.logger.warn("Received a response to an ACK which was unexpected. Dropping Response.")}},this.request.ua).send(),r},r.prototype.cancel_request=function(t,s,r){var n=t.request;this.cancel=e.C.CANCEL+" "+n.ruri+" SIP/2.0\\r\\n",this.cancel+="Via: "+n.headers.Via.toString()+"\\r\\n",this.request.headers.Route&&(this.cancel+="Route: "+n.headers.Route.toString()+"\\r\\n"),this.cancel+="To: "+n.headers.To.toString()+"\\r\\n",this.cancel+="From: "+n.headers.From.toString()+"\\r\\n",this.cancel+="Call-ID: "+n.headers["Call-ID"].toString()+"\\r\\n",this.cancel+="CSeq: "+n.headers.CSeq.toString().split(" ")[0]+" CANCEL\\r\\n",s&&(this.cancel+="Reason: "+s+"\\r\\n"),r&&(this.cancel+=r),this.cancel+="Content-Length: 0\\r\\n\\r\\n",this.state===i.STATUS_PROCEEDING&&this.transport.send(this.cancel)},r.prototype.receiveResponse=function(t){var s=t.status_code;if(t.transaction=this,this.response&&this.response.status_code===t.status_code&&this.response.cseq===t.cseq)return this.logger.debug("ICT Received a retransmission for cseq: "+t.cseq),void(this.ackSender&&this.ackSender.send());if(this.response=t,s>=100&&s<=199)switch(this.state){case i.STATUS_CALLING:this.stateChanged(i.STATUS_PROCEEDING),this.request_sender.receiveResponse(t),this.cancel&&this.transport.send(this.cancel);break;case i.STATUS_PROCEEDING:this.request_sender.receiveResponse(t)}else if(s>=200&&s<=299)switch(this.state){case i.STATUS_CALLING:case i.STATUS_PROCEEDING:this.stateChanged(i.STATUS_ACCEPTED),this.M=e.Timers.setTimeout(this.timer_M.bind(this),e.Timers.TIMER_M),this.request_sender.receiveResponse(t);break;case i.STATUS_ACCEPTED:this.request_sender.receiveResponse(t)}else if(s>=300&&s<=699)switch(this.state){case i.STATUS_CALLING:case i.STATUS_PROCEEDING:this.stateChanged(i.STATUS_COMPLETED),this.sendACK(),this.request_sender.receiveResponse(t);break;case i.STATUS_COMPLETED:this.sendACK()}};var n=function(e,i,s){var r;this.transport=s,this.id="z9hG4bK"+Math.floor(1e7*Math.random()),this.request_sender=e,this.request=i,this.logger=e.ua.getLogger("sip.transaction.nict",this.id),r=t(e,s,this.id),this.request.setHeader("via",r)};(n.prototype=Object.create(e.EventEmitter.prototype)).send=function(){this.transport.send(this.request)||this.onTransportError()},n.prototype.onTransportError=function(){this.logger.log("transport error occurred, for an ACK client transaction "+this.id),this.request_sender.onTransportError()};var o=function(e,t){this.type=i.NON_INVITE_SERVER,this.id=e.via_branch,this.request=e,this.transport=e.transport,this.ua=t,this.last_response="",e.server_transaction=this,this.logger=t.getLogger("sip.transaction.nist",this.id),this.state=i.STATUS_TRYING,t.newTransaction(this)};(o.prototype=Object.create(e.EventEmitter.prototype)).stateChanged=function(e){this.state=e,this.emit("stateChanged")},o.prototype.timer_J=function(){this.logger.debug("Timer J expired for non-INVITE server transaction "+this.id),this.stateChanged(i.STATUS_TERMINATED),this.ua.destroyTransaction(this)},o.prototype.onTransportError=function(){this.transportError||(this.transportError=!0,this.logger.log("transport error occurred, deleting non-INVITE server transaction "+this.id),e.Timers.clearTimeout(this.J),this.stateChanged(i.STATUS_TERMINATED),this.ua.destroyTransaction(this))},o.prototype.receiveResponse=function(t,s){var r=e.Utils.defer();if(100===t)switch(this.state){case i.STATUS_TRYING:this.stateChanged(i.STATUS_PROCEEDING),this.transport.send(s)||this.onTransportError();break;case i.STATUS_PROCEEDING:this.last_response=s,this.transport.send(s)?r.resolve():(this.onTransportError(),r.reject())}else if(t>=200&&t<=699)switch(this.state){case i.STATUS_TRYING:case i.STATUS_PROCEEDING:this.stateChanged(i.STATUS_COMPLETED),this.last_response=s,this.J=e.Timers.setTimeout(this.timer_J.bind(this),e.Timers.TIMER_J),this.transport.send(s)?r.resolve():(this.onTransportError(),r.reject())}return r.promise};var a=function(e,t){this.type=i.INVITE_SERVER,this.id=e.via_branch,this.request=e,this.transport=e.transport,this.ua=t,this.last_response="",e.server_transaction=this,this.logger=t.getLogger("sip.transaction.ist",this.id),this.state=i.STATUS_PROCEEDING,t.newTransaction(this),this.resendProvisionalTimer=null,e.reply(100)};(a.prototype=Object.create(e.EventEmitter.prototype)).stateChanged=function(e){this.state=e,this.emit("stateChanged")},a.prototype.timer_H=function(){this.logger.debug("Timer H expired for INVITE server transaction "+this.id),this.state===i.STATUS_COMPLETED&&this.logger.warn("transactions","ACK for INVITE server transaction was never received, call will be terminated"),this.stateChanged(i.STATUS_TERMINATED),this.ua.destroyTransaction(this)},a.prototype.timer_I=function(){this.stateChanged(i.STATUS_TERMINATED),this.ua.destroyTransaction(this)},a.prototype.timer_L=function(){this.logger.debug("Timer L expired for INVITE server transaction "+this.id),this.state===i.STATUS_ACCEPTED&&(this.stateChanged(i.STATUS_TERMINATED),this.ua.destroyTransaction(this))},a.prototype.onTransportError=function(){this.transportError||(this.transportError=!0,this.logger.log("transport error occurred, deleting INVITE server transaction "+this.id),null!==this.resendProvisionalTimer&&(e.Timers.clearInterval(this.resendProvisionalTimer),this.resendProvisionalTimer=null),e.Timers.clearTimeout(this.L),e.Timers.clearTimeout(this.H),e.Timers.clearTimeout(this.I),this.stateChanged(i.STATUS_TERMINATED),this.ua.destroyTransaction(this))},a.prototype.resend_provisional=function(){this.transport.send(this.last_response)||this.onTransportError()},a.prototype.receiveResponse=function(t,s){var r=e.Utils.defer();if(t>=100&&t<=199)switch(this.state){case i.STATUS_PROCEEDING:this.transport.send(s)||this.onTransportError(),this.last_response=s}if(t>100&&t<=199&&this.state===i.STATUS_PROCEEDING)null===this.resendProvisionalTimer&&(this.resendProvisionalTimer=e.Timers.setInterval(this.resend_provisional.bind(this),e.Timers.PROVISIONAL_RESPONSE_INTERVAL));else if(t>=200&&t<=299)switch(this.state){case i.STATUS_PROCEEDING:this.stateChanged(i.STATUS_ACCEPTED),this.last_response=s,this.L=e.Timers.setTimeout(this.timer_L.bind(this),e.Timers.TIMER_L),null!==this.resendProvisionalTimer&&(e.Timers.clearInterval(this.resendProvisionalTimer),this.resendProvisionalTimer=null);case i.STATUS_ACCEPTED:this.transport.send(s)?r.resolve():(this.onTransportError(),r.reject())}else if(t>=300&&t<=699)switch(this.state){case i.STATUS_PROCEEDING:null!==this.resendProvisionalTimer&&(e.Timers.clearInterval(this.resendProvisionalTimer),this.resendProvisionalTimer=null),this.transport.send(s)?(this.stateChanged(i.STATUS_COMPLETED),this.H=e.Timers.setTimeout(this.timer_H.bind(this),e.Timers.TIMER_H),r.resolve()):(this.onTransportError(),r.reject())}return r.promise};e.Transactions={C:i,checkTransaction:function(t,s){var r;switch(s.method){case e.C.INVITE:if(r=t.transactions.ist[s.via_branch]){switch(r.state){case i.STATUS_PROCEEDING:r.transport.send(r.last_response)}return!0}break;case e.C.ACK:if(!(r=t.transactions.ist[s.via_branch]))return!1;if(r.state===i.STATUS_ACCEPTED)return!1;if(r.state===i.STATUS_COMPLETED)return r.stateChanged(i.STATUS_CONFIRMED),r.I=e.Timers.setTimeout(r.timer_I.bind(r),e.Timers.TIMER_I),!0;break;case e.C.CANCEL:return(r=t.transactions.ist[s.via_branch])?(s.reply_sl(200),r.state!==i.STATUS_PROCEEDING):(s.reply_sl(481),!0);default:if(r=t.transactions.nist[s.via_branch]){switch(r.state){case i.STATUS_TRYING:break;case i.STATUS_PROCEEDING:case i.STATUS_COMPLETED:r.transport.send(r.last_response)}return!0}}},NonInviteClientTransaction:s,InviteClientTransaction:r,AckClientTransaction:n,NonInviteServerTransaction:o,InviteServerTransaction:a}}},function(e,t,i){"use strict";e.exports=function(e){var t,s=i(17)(e),r={STATUS_EARLY:1,STATUS_CONFIRMED:2};(t=function(t,i,s,n){var o;if(this.uac_pending_reply=!1,this.uas_pending_reply=!1,!i.hasHeader("contact"))return{error:"unable to create a Dialog without Contact header field"};n=i instanceof e.IncomingResponse?i.status_code<200?r.STATUS_EARLY:r.STATUS_CONFIRMED:n||r.STATUS_CONFIRMED,o=i.parseHeader("contact"),"UAS"===s?(this.id={call_id:i.call_id,local_tag:i.to_tag,remote_tag:i.from_tag,toString:function(){return this.call_id+this.local_tag+this.remote_tag}},this.state=n,this.remote_seqnum=i.cseq,this.local_uri=i.parseHeader("to").uri,this.remote_uri=i.parseHeader("from").uri,this.remote_target=o.uri,this.route_set=i.getHeaders("record-route"),this.invite_seqnum=i.cseq,this.local_seqnum=i.cseq):"UAC"===s&&(this.id={call_id:i.call_id,local_tag:i.from_tag,remote_tag:i.to_tag,toString:function(){return this.call_id+this.local_tag+this.remote_tag}},this.state=n,this.invite_seqnum=i.cseq,this.local_seqnum=i.cseq,this.local_uri=i.parseHeader("from").uri,this.pracked=[],this.remote_uri=i.parseHeader("to").uri,this.remote_target=o.uri,this.route_set=i.getHeaders("record-route").reverse()),this.logger=t.ua.getLogger("sip.dialog",this.id.toString()),this.owner=t,t.ua.dialogs[this.id.toString()]=this,this.logger.log("new "+s+" dialog created with status "+(this.state===r.STATUS_EARLY?"EARLY":"CONFIRMED")),t.emit("dialog",this)}).prototype={update:function(e,t){this.state=r.STATUS_CONFIRMED,this.logger.log("dialog "+this.id.toString()+"  changed to CONFIRMED state"),"UAC"===t&&(this.route_set=e.getHeaders("record-route").reverse())},terminate:function(){this.logger.log("dialog "+this.id.toString()+" deleted"),this.sessionDescriptionHandler&&this.state!==r.STATUS_CONFIRMED&&this.sessionDescriptionHandler.close(),delete this.owner.ua.dialogs[this.id.toString()]},createRequest:function(t,i,s){var r,n;return i=(i||[]).slice(),this.local_seqnum||(this.local_seqnum=Math.floor(1e4*Math.random())),r=t===e.C.CANCEL||t===e.C.ACK?this.invite_seqnum:this.local_seqnum+=1,n=new e.OutgoingRequest(t,this.remote_target,this.owner.ua,{cseq:r,call_id:this.id.call_id,from_uri:this.local_uri,from_tag:this.id.local_tag,to_uri:this.remote_uri,to_tag:this.id.remote_tag,route_set:this.route_set},i,s),n.dialog=this,n},checkInDialogRequest:function(t){var i=this;if(this.remote_seqnum){if(t.cseq<this.remote_seqnum)return t.method!==e.C.ACK&&t.reply(500),t.cseq===this.invite_seqnum}else this.remote_seqnum=t.cseq;switch(t.method){case e.C.INVITE:if(!0===this.uac_pending_reply)t.reply(491);else{if(!0===this.uas_pending_reply&&t.cseq>this.remote_seqnum){var s=1+(10*Math.random()|0);return t.reply(500,null,["Retry-After:"+s]),this.remote_seqnum=t.cseq,!1}this.uas_pending_reply=!0,t.server_transaction.on("stateChanged",function t(){this.state!==e.Transactions.C.STATUS_ACCEPTED&&this.state!==e.Transactions.C.STATUS_COMPLETED&&this.state!==e.Transactions.C.STATUS_TERMINATED||(this.removeListener("stateChanged",t),i.uas_pending_reply=!1)})}t.hasHeader("contact")&&t.server_transaction.on("stateChanged",function(){this.state===e.Transactions.C.STATUS_ACCEPTED&&(i.remote_target=t.parseHeader("contact").uri)});break;case e.C.NOTIFY:t.hasHeader("contact")&&t.server_transaction.on("stateChanged",function(){this.state===e.Transactions.C.STATUS_COMPLETED&&(i.remote_target=t.parseHeader("contact").uri)})}return t.cseq>this.remote_seqnum&&(this.remote_seqnum=t.cseq),!0},sendRequest:function(e,t,i){var r=((i=i||{}).extraHeaders||[]).slice(),n=null;i.body&&(i.body.body?n=i.body:((n={}).body=i.body,i.contentType&&(n.contentType=i.contentType)));var o=this.createRequest(t,r,n);return new s(this,e,o).send(),o},receiveRequest:function(e){this.checkInDialogRequest(e)&&this.owner.receiveRequest(e)}},t.C=r,e.Dialog=t}},function(e,t,i){"use strict";e.exports=function(e){var t;return t=function(e,t,i){this.dialog=e,this.applicant=t,this.request=i,this.reattempt=!1,this.reattemptTimer=null},t.prototype={send:function(){var t=this,i=new e.RequestSender(this,this.dialog.owner.ua);i.send(),this.request.method===e.C.INVITE&&i.clientTransaction.state!==e.Transactions.C.STATUS_TERMINATED&&(this.dialog.uac_pending_reply=!0,i.clientTransaction.on("stateChanged",function i(){this.state!==e.Transactions.C.STATUS_ACCEPTED&&this.state!==e.Transactions.C.STATUS_COMPLETED&&this.state!==e.Transactions.C.STATUS_TERMINATED||(this.removeListener("stateChanged",i),t.dialog.uac_pending_reply=!1)}))},onRequestTimeout:function(){this.applicant.onRequestTimeout()},onTransportError:function(){this.applicant.onTransportError()},receiveResponse:function(t){var i=this;408===t.status_code||481===t.status_code?this.applicant.onDialogError(t):t.method===e.C.INVITE&&491===t.status_code?this.reattempt?this.applicant.receiveResponse(t):(this.request.cseq.value=this.dialog.local_seqnum+=1,this.reattemptTimer=e.Timers.setTimeout(function(){i.applicant.owner.status!==e.Session.C.STATUS_TERMINATED&&(i.reattempt=!0,i.request_sender.send())},this.getReattemptTimeout())):this.applicant.receiveResponse(t)}},t}},function(e,t,i){"use strict";e.exports=function(e){var t;(t=function(t,i){this.logger=i.getLogger("sip.requestsender"),this.ua=i,this.applicant=t,this.method=t.request.method,this.request=t.request,this.credentials=null,this.challenged=!1,this.staled=!1,i.status!==e.UA.C.STATUS_USER_CLOSED||this.method===e.C.BYE&&this.method===e.C.ACK||this.onTransportError()}).prototype={send:function(){switch(this.method){case"INVITE":this.clientTransaction=new e.Transactions.InviteClientTransaction(this,this.request,this.ua.transport);break;case"ACK":this.clientTransaction=new e.Transactions.AckClientTransaction(this,this.request,this.ua.transport);break;default:this.clientTransaction=new e.Transactions.NonInviteClientTransaction(this,this.request,this.ua.transport)}return this.clientTransaction.send(),this.clientTransaction},onRequestTimeout:function(){this.applicant.onRequestTimeout()},onTransportError:function(){this.applicant.onTransportError()},receiveResponse:function(t){var i,s,r,n=t.status_code;if(401===n||407===n){if(401===t.status_code?(s=t.parseHeader("www-authenticate"),r="authorization"):(s=t.parseHeader("proxy-authenticate"),r="proxy-authorization"),!s)return this.logger.warn(t.status_code+" with wrong or missing challenge, cannot authenticate"),void this.applicant.receiveResponse(t);if(!this.challenged||!this.staled&&!0===s.stale){if(this.credentials||(this.credentials=this.ua.configuration.authenticationFactory(this.ua)),!this.credentials.authenticate(this.request,s))return void this.applicant.receiveResponse(t);this.challenged=!0,s.stale&&(this.staled=!0),t.method===e.C.REGISTER?i=this.applicant.cseq+=1:this.request.dialog?i=this.request.dialog.local_seqnum+=1:(i=this.request.cseq+1,this.request.cseq=i),this.request.setHeader("cseq",i+" "+this.method),this.request.setHeader(r,this.credentials.toString()),this.send()}else this.applicant.receiveResponse(t)}else this.applicant.receiveResponse(t)}},e.RequestSender=t}},function(e,t,i){"use strict";e.exports=function(e){var t;(t=function(t){var i={};this.registrar=t.configuration.registrarServer,this.expires=t.configuration.registerExpires,this.contact=t.contact.toString(),this.contact+=";reg-id=1",this.contact+=\';+sip.instance="<urn:uuid:\'+t.configuration.instanceId+\'>"\',this.call_id=e.Utils.createRandomToken(22),this.cseq=Math.floor(1e4*Math.random()),this.to_uri=t.configuration.uri,i.to_uri=this.to_uri,i.to_displayName=t.configuration.displayName,i.call_id=this.call_id,i.cseq=this.cseq,e.Utils.augment(this,e.ClientContext,[t,"REGISTER",this.registrar,{params:i}]),this.registrationTimer=null,this.registrationExpiredTimer=null,this.registered=!1,this.logger=t.getLogger("sip.registercontext")}).prototype={register:function(t){var i,s=this;this.options=t||{},(i=(this.options.extraHeaders||[]).slice()).push("Contact: "+this.contact+";expires="+this.expires),i.push("Allow: "+e.UA.C.ALLOWED_METHODS.toString()),this.closeHeaders=this.options.closeWithHeaders?(this.options.extraHeaders||[]).slice():[],this.receiveResponse=function(t){var i,r,n,o=t.getHeaders("contact").length;if(t.cseq===this.cseq)switch(null!==this.registrationTimer&&(e.Timers.clearTimeout(this.registrationTimer),this.registrationTimer=null),!0){case/^1[0-9]{2}$/.test(t.status_code):this.emit("progress",t);break;case/^2[0-9]{2}$/.test(t.status_code):if(this.emit("accepted",t),t.hasHeader("expires")&&(r=t.getHeader("expires")),null!==this.registrationExpiredTimer&&(e.Timers.clearTimeout(this.registrationExpiredTimer),this.registrationExpiredTimer=null),!o){this.logger.warn("no Contact header in response to REGISTER, response ignored");break}for(;o--;){if((i=t.parseHeader("contact",o)).uri.user===this.ua.contact.uri.user){r=i.getParam("expires");break}i=null}if(!i){this.logger.warn("no Contact header pointing to us, response ignored");break}r||(r=this.expires),this.registrationTimer=e.Timers.setTimeout(function(){s.registrationTimer=null,s.register(s.options)},1e3*r-3e3),this.registrationExpiredTimer=e.Timers.setTimeout(function(){s.logger.warn("registration expired"),s.registered&&s.unregistered(null,e.C.causes.EXPIRES)},1e3*r),i.hasParam("temp-gruu")&&(this.ua.contact.temp_gruu=e.URI.parse(i.getParam("temp-gruu").replace(/"/g,""))),i.hasParam("pub-gruu")&&(this.ua.contact.pub_gruu=e.URI.parse(i.getParam("pub-gruu").replace(/"/g,""))),this.registered=!0,this.emit("registered",t||null);break;case/^423$/.test(t.status_code):t.hasHeader("min-expires")?(this.expires=t.getHeader("min-expires"),this.register(this.options)):(this.logger.warn("423 response received for REGISTER without Min-Expires"),this.registrationFailure(t,e.C.causes.SIP_FAILURE_CODE));break;default:n=e.Utils.sipErrorCause(t.status_code),this.registrationFailure(t,n)}},this.onRequestTimeout=function(){this.registrationFailure(null,e.C.causes.REQUEST_TIMEOUT)},this.onTransportError=function(){this.registrationFailure(null,e.C.causes.CONNECTION_ERROR)},this.cseq++,this.request.cseq=this.cseq,this.request.setHeader("cseq",this.cseq+" REGISTER"),this.request.extraHeaders=i,this.send()},registrationFailure:function(e,t){this.emit("failed",e||null,t||null)},onTransportClosed:function(){this.registered_before=this.registered,null!==this.registrationTimer&&(e.Timers.clearTimeout(this.registrationTimer),this.registrationTimer=null),null!==this.registrationExpiredTimer&&(e.Timers.clearTimeout(this.registrationExpiredTimer),this.registrationExpiredTimer=null),this.registered&&this.unregistered(null,e.C.causes.CONNECTION_ERROR)},onTransportConnected:function(){this.register(this.options)},close:function(){var e={all:!1,extraHeaders:this.closeHeaders};this.registered_before=this.registered,this.registered&&this.unregister(e)},unregister:function(t){var i;t=t||{},this.registered||t.all||this.logger.warn("Already unregistered, but sending an unregister anyways."),i=(t.extraHeaders||[]).slice(),this.registered=!1,null!==this.registrationTimer&&(e.Timers.clearTimeout(this.registrationTimer),this.registrationTimer=null),t.all?(i.push("Contact: *"),i.push("Expires: 0")):i.push("Contact: "+this.contact+";expires=0"),this.receiveResponse=function(t){var i;switch(!0){case/^1[0-9]{2}$/.test(t.status_code):this.emit("progress",t);break;case/^2[0-9]{2}$/.test(t.status_code):this.emit("accepted",t),null!==this.registrationExpiredTimer&&(e.Timers.clearTimeout(this.registrationExpiredTimer),this.registrationExpiredTimer=null),this.unregistered(t);break;default:i=e.Utils.sipErrorCause(t.status_code),this.unregistered(t,i)}},this.onRequestTimeout=function(){},this.onTransportError=function(){},this.cseq++,this.request.cseq=this.cseq,this.request.setHeader("cseq",this.cseq+" REGISTER"),this.request.extraHeaders=i,this.send()},unregistered:function(e,t){this.registered=!1,this.emit("unregistered",e||null,t||null)}},e.RegisterContext=t}},function(e,t,i){"use strict";e.exports=function(e){var t=function(e,t){};return t.prototype=Object.create(e.prototype,{close:{value:function(){}},getDescription:{value:function(e,t){}},hasDescription:{value:function(e){}},holdModifier:{value:function(e){}},setDescription:{value:function(e,t,i){}}}),t}},function(e,t,i){"use strict";e.exports=function(e){var t;((t=function(t,i,s,r){var n=s;if(void 0===s)throw new TypeError("Not enough arguments");if(this.ua=t,this.logger=t.getLogger("sip.clientcontext"),this.method=i,!(s=t.normalizeTarget(s)))throw new TypeError("Invalid target: "+n);(r=Object.create(r||Object.prototype)).extraHeaders=(r.extraHeaders||[]).slice(),this.request=new e.OutgoingRequest(this.method,s,this.ua,r.params,r.extraHeaders),r.body&&(this.body={},this.body.body=r.body,r.contentType&&(this.body.contentType=r.contentType),this.request.body=this.body),this.localIdentity=this.request.from,this.remoteIdentity=this.request.to,this.data={}}).prototype=Object.create(e.EventEmitter.prototype)).send=function(){return new e.RequestSender(this,this.ua).send(),this},t.prototype.cancel=function(t){(t=t||{}).extraHeaders=(t.extraHeaders||[]).slice();var i=e.Utils.getCancelReason(t.status_code,t.reason_phrase);this.request.cancel(i,t.extraHeaders),this.emit("cancel")},t.prototype.receiveResponse=function(t){var i=e.Utils.getReasonPhrase(t.status_code);switch(!0){case/^1[0-9]{2}$/.test(t.status_code):this.emit("progress",t,i);break;case/^2[0-9]{2}$/.test(t.status_code):this.ua.applicants[this]&&delete this.ua.applicants[this],this.emit("accepted",t,i);break;default:this.ua.applicants[this]&&delete this.ua.applicants[this],this.emit("rejected",t,i),this.emit("failed",t,i)}},t.prototype.onRequestTimeout=function(){this.emit("failed",null,e.C.causes.REQUEST_TIMEOUT)},t.prototype.onTransportError=function(){this.emit("failed",null,e.C.causes.CONNECTION_ERROR)},e.ClientContext=t}},function(e,t,i){"use strict";e.exports=function(e){var t;((t=function(t,i){this.ua=t,this.logger=t.getLogger("sip.servercontext"),this.request=i,i.method===e.C.INVITE?this.transaction=new e.Transactions.InviteServerTransaction(i,t):this.transaction=new e.Transactions.NonInviteServerTransaction(i,t),i.body&&(this.body=i.body),i.hasHeader("Content-Type")&&(this.contentType=i.getHeader("Content-Type")),this.method=i.method,this.data={},this.localIdentity=i.to,this.remoteIdentity=i.from}).prototype=Object.create(e.EventEmitter.prototype)).progress=function(e){return(e=Object.create(e||Object.prototype)).statusCode||(e.statusCode=180),e.minCode=100,e.maxCode=199,e.events=["progress"],this.reply(e)},t.prototype.accept=function(e){return(e=Object.create(e||Object.prototype)).statusCode||(e.statusCode=200),e.minCode=200,e.maxCode=299,e.events=["accepted"],this.reply(e)},t.prototype.reject=function(e){return(e=Object.create(e||Object.prototype)).statusCode||(e.statusCode=480),e.minCode=300,e.maxCode=699,e.events=["rejected","failed"],this.reply(e)},t.prototype.reply=function(t){var i,s=(t=t||{}).statusCode||100,r=t.minCode||100,n=t.maxCode||699,o=e.Utils.getReasonPhrase(s,t.reasonPhrase),a=t.extraHeaders||[],c=t.body,h=t.events||[];if(s<r||s>n)throw new TypeError("Invalid statusCode: "+s);return i=this.request.reply(s,o,a,c),h.forEach(function(e){this.emit(e,i,o)},this),this},t.prototype.onRequestTimeout=function(){this.emit("failed",null,e.C.causes.REQUEST_TIMEOUT)},t.prototype.onTransportError=function(){this.emit("failed",null,e.C.causes.CONNECTION_ERROR)},e.ServerContext=t}},function(e,t,i){"use strict";e.exports=function(e){var t,s,r,n,o,a=i(24)(e),c={STATUS_NULL:0,STATUS_INVITE_SENT:1,STATUS_1XX_RECEIVED:2,STATUS_INVITE_RECEIVED:3,STATUS_WAITING_FOR_ANSWER:4,STATUS_ANSWERED:5,STATUS_WAITING_FOR_PRACK:6,STATUS_WAITING_FOR_ACK:7,STATUS_CANCELED:8,STATUS_TERMINATED:9,STATUS_ANSWERED_WAITING_FOR_PRACK:10,STATUS_EARLY_MEDIA:11,STATUS_CONFIRMED:12};(t=function(t){if(this.status=c.STATUS_NULL,this.dialog=null,this.pendingReinvite=!1,this.earlyDialogs={},!t)throw new e.Exceptions.SessionDescriptionHandlerMissing("A session description handler is required for the session to function");this.sessionDescriptionHandlerFactory=t,this.hasOffer=!1,this.hasAnswer=!1,this.timers={ackTimer:null,expiresTimer:null,invite2xxTimer:null,userNoAnswerTimer:null,rel1xxTimer:null,prackTimer:null},this.startTime=null,this.endTime=null,this.tones=null,this.local_hold=!1,this.disableRenegotiation=!1,this.early_sdp=null,this.rel100=e.C.supported.UNSUPPORTED}).prototype={dtmf:function(t,i){var s=[],r=this;if(i=i||{},void 0===t)throw new TypeError("Not enough arguments");if(this.status!==c.STATUS_CONFIRMED&&this.status!==c.STATUS_WAITING_FOR_ACK)throw new e.Exceptions.InvalidStateError(this.status);if("string"!=typeof t&&"number"!=typeof t||!t.toString().match(/^[0-9A-D#*,]+$/i))throw new TypeError("Invalid tones: "+t);for(t=t.toString().split("");t.length>0;)s.push(new a(this,t.shift(),i));if(this.tones)return this.tones=this.tones.concat(s),this;return this.tones=s,function t(){var s,n;if(r.status===c.STATUS_TERMINATED||!r.tones||0===r.tones.length)return r.tones=null,this;(s=r.tones.shift()).on("failed",function(){r.tones=null}),s.send(i),n=s.duration+s.interToneGap,e.Timers.setTimeout(t,n)}(),this},bye:function(t){var i=(t=Object.create(t||Object.prototype)).statusCode;if(this.status===c.STATUS_TERMINATED)return this.logger.error("Error: Attempted to send BYE in a terminated session."),this;if(this.logger.log("terminating Session"),i&&(i<200||i>=700))throw new TypeError("Invalid statusCode: "+i);return t.receiveResponse=function(){},this.sendRequest(e.C.BYE,t).terminated()},refer:function(t,i){if(i=i||{},this.status!==c.STATUS_CONFIRMED)throw new e.Exceptions.InvalidStateError(this.status);this.referContext=new e.ReferClientContext(this.ua,this,t,i),this.emit("referRequested",this.referContext),this.referContext.refer()},sendRequest:function(t,i){i=i||{};var s=this,r=new e.OutgoingRequest(t,this.dialog.remote_target,this.ua,{cseq:i.cseq||(this.dialog.local_seqnum+=1),call_id:this.dialog.id.call_id,from_uri:this.dialog.local_uri,from_tag:this.dialog.id.local_tag,to_uri:this.dialog.remote_uri,to_tag:this.dialog.id.remote_tag,route_set:this.dialog.route_set,statusCode:i.statusCode,reasonPhrase:i.reasonPhrase},i.extraHeaders||[],i.body);return new e.RequestSender({request:r,onRequestTimeout:function(){s.onRequestTimeout()},onTransportError:function(){s.onTransportError()},receiveResponse:i.receiveResponse||function(e){s.receiveNonInviteResponse(e)}},this.ua).send(),this.emit(t.toLowerCase(),r),this},close:function(){var t;if(this.status===c.STATUS_TERMINATED)return this;this.logger.log("closing INVITE session "+this.id),this.sessionDescriptionHandler&&this.sessionDescriptionHandler.close();for(t in this.timers)e.Timers.clearTimeout(this.timers[t]);this.dialog&&(this.dialog.terminate(),delete this.dialog);for(t in this.earlyDialogs)this.earlyDialogs[t].terminate(),delete this.earlyDialogs[t];return this.status=c.STATUS_TERMINATED,delete this.ua.sessions[this.id],this},createDialog:function(t,i,s){var r,n,o=t["UAS"===i?"to_tag":"from_tag"],a=t["UAS"===i?"from_tag":"to_tag"],c=t.call_id+o+a;if(n=this.earlyDialogs[c],s)return!!n||((n=new e.Dialog(this,t,i,e.Dialog.C.STATUS_EARLY)).error?(this.logger.error(n.error),this.failed(t,e.C.causes.INTERNAL_ERROR),!1):(this.earlyDialogs[c]=n,!0));if(n){n.update(t,i),this.dialog=n,delete this.earlyDialogs[c];for(var h in this.earlyDialogs)this.earlyDialogs[h].terminate(),delete this.earlyDialogs[h];return!0}return(r=new e.Dialog(this,t,i)).error?(this.logger.error(r.error),this.failed(t,e.C.causes.INTERNAL_ERROR),!1):(this.to_tag=t.to_tag,this.dialog=r,!0)},hold:function(t,i){if(this.status!==c.STATUS_WAITING_FOR_ACK&&this.status!==c.STATUS_CONFIRMED)throw new e.Exceptions.InvalidStateError(this.status);this.local_hold?this.logger.log("Session is already on hold, cannot put it on hold again"):((t=t||{}).modifiers=i||[],t.modifiers.push(this.sessionDescriptionHandler.holdModifier),this.local_hold=!0,this.sendReinvite(t))},unhold:function(t,i){if(this.status!==c.STATUS_WAITING_FOR_ACK&&this.status!==c.STATUS_CONFIRMED)throw new e.Exceptions.InvalidStateError(this.status);this.local_hold?(t=t||{},i&&(t.modifiers=i),this.local_hold=!1,this.sendReinvite(t)):this.logger.log("Session is not on hold, cannot unhold it")},reinvite:function(e,t){return e=e||{},t&&(e.modifiers=t),this.sendReinvite(e)},receiveReinvite:function(t){var i,s=this;if(s.emit("reinvite",this),"0"!==t.getHeader("Content-Length")||t.getHeader("Content-Type")){if(!this.sessionDescriptionHandler.hasDescription(t.getHeader("Content-Type")))return t.reply(415),void this.emit("reinviteFailed",s);i=this.sessionDescriptionHandler.setDescription(t.body,this.sessionDescriptionHandlerOptions,this.modifiers).then(this.sessionDescriptionHandler.getDescription.bind(this.sessionDescriptionHandler,this.sessionDescriptionHandlerOptions,this.modifiers))}else i=this.sessionDescriptionHandler.getDescription(this.sessionDescriptionHandlerOptions,this.modifiers);var r=this.receiveRequest;this.receiveRequest=function(t){t.method===e.C.ACK&&this.status===c.STATUS_WAITING_FOR_ACK&&this.sessionDescriptionHandler.hasDescription(t.getHeader("Content-Type"))?(this.hasAnswer=!0,this.sessionDescriptionHandler.setDescription(t.body,this.sessionDescriptionHandlerOptions,this.modifiers).then(function(){e.Timers.clearTimeout(this.timers.ackTimer),e.Timers.clearTimeout(this.timers.invite2xxTimer),this.status=c.STATUS_CONFIRMED,this.emit("confirmed",t)}.bind(this))):r.call(this,t)}.bind(this),i.catch(function(i){var r;i instanceof e.Exceptions.GetDescriptionError?r=500:i instanceof e.Exceptions.RenegotiationError?(s.emit("renegotiationError",i),s.logger.warn(i),r=488):(s.logger.error(i),r=488),t.reply(r),s.emit("reinviteFailed",s)}).then(function(e){var i=["Contact: "+s.contact];t.reply(200,null,i,e,function(){s.status=c.STATUS_WAITING_FOR_ACK,s.setACKTimer(),s.emit("reinviteAccepted",s)})})},sendReinvite:function(t){if(this.pendingReinvite)this.logger.warn("Reinvite in progress. Please wait until complete, then try again.");else{this.pendingReinvite=!0,(t=t||{}).modifiers=t.modifiers||[];var i=this,s=(t.extraHeaders||[]).slice();s.push("Contact: "+this.contact),s.push("Allow: "+e.UA.C.ALLOWED_METHODS.toString()),this.sessionDescriptionHandler.getDescription(t.sessionDescriptionHandlerOptions,t.modifiers).then(function(t){i.sendRequest(e.C.INVITE,{extraHeaders:s,body:t,receiveResponse:i.receiveReinviteResponse.bind(i)})}).catch(function(t){if(t instanceof e.Exceptions.RenegotiationError)return i.pendingReinvite=!1,i.emit("renegotiationError",t),i.logger.warn("Renegotiation Error"),void i.logger.warn(t);i.logger.error("sessionDescriptionHandler error"),i.logger.error(t)})}},receiveRequest:function(t){switch(t.method){case e.C.BYE:t.reply(200),this.status===c.STATUS_CONFIRMED&&(this.emit("bye",t),this.terminated(t,e.C.causes.BYE));break;case e.C.INVITE:this.status===c.STATUS_CONFIRMED&&(this.logger.log("re-INVITE received"),this.receiveReinvite(t));break;case e.C.INFO:if(this.status===c.STATUS_CONFIRMED||this.status===c.STATUS_WAITING_FOR_ACK){if(this.onInfo)return this.onInfo(t);var i,s,r,n=t.getHeader("content-type"),o=/^(Signal\\s*?=\\s*?)([0-9A-D#*]{1})(\\s)?.*/,h=/^(Duration\\s?=\\s?)([0-9]{1,4})(\\s)?.*/;n&&(n.match(/^application\\/dtmf-relay/i)?(t.body&&2===(i=t.body.split("\\r\\n",2)).length&&(o.test(i[0])&&(s=i[0].replace(o,"$2")),h.test(i[1])&&(r=parseInt(i[1].replace(h,"$2"),10))),new a(this,s,{duration:r}).init_incoming(t)):t.reply(415,null,["Accept: application/dtmf-relay"]))}break;case e.C.REFER:if(this.status===c.STATUS_CONFIRMED){this.logger.log("REFER received"),this.referContext=new e.ReferServerContext(this.ua,t);if(this.listeners("referRequested").length)this.emit("referRequested",this.referContext);else{this.logger.log("No referRequested listeners, automatically accepting and following the refer");var u={followRefer:!0};this.passedOptions&&(u.inviteOptions=this.passedOptions),this.referContext.accept(u,this.modifiers)}}break;case e.C.NOTIFY:if(this.referContext&&this.referContext instanceof e.ReferClientContext&&t.hasHeader("event")&&"refer"===t.getHeader("event"))return void this.referContext.receiveNotify(t);t.reply(200,"OK"),this.emit("notify",t)}},receiveReinviteResponse:function(t){var i=this;if(this.status!==c.STATUS_TERMINATED)switch(!0){case/^1[0-9]{2}$/.test(t.status_code):break;case/^2[0-9]{2}$/.test(t.status_code):if(this.status=c.STATUS_CONFIRMED,this.emit("ack",t.transaction.sendACK()),this.pendingReinvite=!1,e.Timers.clearTimeout(i.timers.invite2xxTimer),!this.sessionDescriptionHandler.hasDescription(t.getHeader("Content-Type"))){this.logger.error("2XX response received to re-invite but did not have a description"),this.emit("reinviteFailed",i),this.emit("renegotiationError",new e.Exceptions.RenegotiationError("2XX response received to re-invite but did not have a description"));break}this.sessionDescriptionHandler.setDescription(t.body,this.sessionDescriptionHandlerOptions,this.modifiers).catch(function(t){i.logger.error("Could not set the description in 2XX response"),i.logger.error(t),i.emit("reinviteFailed",i),i.emit("renegotiationError",t),i.sendRequest(e.C.BYE,{extraHeaders:[e.Utils.getReasonHeaderValue(488,"Not Acceptable Here")]})}).then(function(){i.emit("reinviteAccepted",i)});break;default:this.disableRenegotiation=!0,this.pendingReinvite=!1,this.logger.log("Received a non 1XX or 2XX response to a re-invite"),this.emit("reinviteFailed",i),this.emit("renegotiationError",new e.Exceptions.RenegotiationError("Invalid response to a re-invite"))}},acceptAndTerminate:function(t,i,s){var r=[];return i&&r.push("Reason: "+e.Utils.getReasonHeaderValue(i,s)),(this.dialog||this.createDialog(t,"UAC"))&&(this.emit("ack",t.transaction.sendACK()),this.sendRequest(e.C.BYE,{extraHeaders:r})),this},setInvite2xxTimer:function(t,i){var s=this,r=e.Timers.T1;this.timers.invite2xxTimer=e.Timers.setTimeout(function n(){if(s.status===c.STATUS_WAITING_FOR_ACK){s.logger.log("no ACK received, attempting to retransmit OK");var o=["Contact: "+s.contact];t.reply(200,null,o,i),r=Math.min(2*r,e.Timers.T2),s.timers.invite2xxTimer=e.Timers.setTimeout(n,r)}},r)},setACKTimer:function(){var t=this;this.timers.ackTimer=e.Timers.setTimeout(function(){t.status===c.STATUS_WAITING_FOR_ACK&&(t.logger.log("no ACK received for an extended period of time, terminating the call"),e.Timers.clearTimeout(t.timers.invite2xxTimer),t.sendRequest(e.C.BYE),t.terminated(null,e.C.causes.NO_ACK))},e.Timers.TIMER_H)},onTransportError:function(){this.status!==c.STATUS_CONFIRMED&&this.status!==c.STATUS_TERMINATED&&this.failed(null,e.C.causes.CONNECTION_ERROR)},onRequestTimeout:function(){this.status===c.STATUS_CONFIRMED?this.terminated(null,e.C.causes.REQUEST_TIMEOUT):this.status!==c.STATUS_TERMINATED&&(this.failed(null,e.C.causes.REQUEST_TIMEOUT),this.terminated(null,e.C.causes.REQUEST_TIMEOUT))},onDialogError:function(t){this.status===c.STATUS_CONFIRMED?this.terminated(t,e.C.causes.DIALOG_ERROR):this.status!==c.STATUS_TERMINATED&&(this.failed(t,e.C.causes.DIALOG_ERROR),this.terminated(t,e.C.causes.DIALOG_ERROR))},failed:function(e,t){return this.status===c.STATUS_TERMINATED?this:(this.emit("failed",e||null,t||null),this)},rejected:function(e,t){return this.emit("rejected",e||null,t||null),this},canceled:function(){return this.emit("cancel"),this},accepted:function(t,i){return i=e.Utils.getReasonPhrase(t&&t.status_code,i),this.startTime=new Date,this.replacee&&(this.replacee.emit("replaced",this),this.replacee.terminate()),this.emit("accepted",t,i),this},terminated:function(e,t){return this.status===c.STATUS_TERMINATED?this:(this.endTime=new Date,this.close(),this.emit("terminated",e||null,t||null),this)},connecting:function(e){return this.emit("connecting",{request:e}),this}},t.C=c,e.Session=t,(s=function(t,i){function s(e,t){i.hasHeader(e)&&i.getHeader(e).toLowerCase().indexOf("100rel")>=0&&(n.rel100=t)}var r,n=this,o=i.getHeader("Content-Type"),a=i.parseHeader("Content-Disposition");if(e.Utils.augment(this,e.ServerContext,[t,i]),e.Utils.augment(this,e.Session,[t.configuration.sessionDescriptionHandlerFactory]),a&&"render"===a.type&&(this.renderbody=i.body,this.rendertype=o),this.status=c.STATUS_INVITE_RECEIVED,this.from_tag=i.from_tag,this.id=i.call_id+this.from_tag,this.request=i,this.contact=this.ua.contact.toString(),this.receiveNonInviteResponse=function(){},this.logger=t.getLogger("sip.inviteservercontext",this.id),this.ua.sessions[this.id]=this,i.hasHeader("expires")&&(r=1e3*i.getHeader("expires")),s("require",e.C.supported.REQUIRED),s("supported",e.C.supported.SUPPORTED),i.to_tag=e.Utils.newTag(),this.createDialog(i,"UAS",!0)){var h={extraHeaders:["Contact: "+n.contact]};n.rel100!==e.C.supported.REQUIRED&&n.progress(h),n.status=c.STATUS_WAITING_FOR_ANSWER,n.timers.userNoAnswerTimer=e.Timers.setTimeout(function(){i.reply(408),n.failed(i,e.C.causes.NO_ANSWER),n.terminated(i,e.C.causes.NO_ANSWER)},n.ua.configuration.noAnswerTimeout),r&&(n.timers.expiresTimer=e.Timers.setTimeout(function(){n.status===c.STATUS_WAITING_FOR_ANSWER&&(i.reply(487),n.failed(i,e.C.causes.EXPIRES),n.terminated(i,e.C.causes.EXPIRES))},r))}else i.reply(500,"Missing Contact header field")}).prototype={reject:function(t){if(this.status===c.STATUS_TERMINATED)throw new e.Exceptions.InvalidStateError(this.status);return this.logger.log("rejecting RTCSession"),e.ServerContext.prototype.reject.call(this,t),this.terminated()},terminate:function(t){var i,s=((t=t||{}).extraHeaders||[]).slice(),r=t.body,n=this;return this.status===c.STATUS_WAITING_FOR_ACK&&this.request.server_transaction.state!==e.Transactions.C.STATUS_TERMINATED?(i=this.dialog,this.receiveRequest=function(t){t.method===e.C.ACK&&(this.sendRequest(e.C.BYE,{extraHeaders:s,body:r}),i.terminate())},this.request.server_transaction.on("stateChanged",function(){this.state===e.Transactions.C.STATUS_TERMINATED&&this.dialog&&(this.request=new e.OutgoingRequest(e.C.BYE,this.dialog.remote_target,this.ua,{cseq:this.dialog.local_seqnum+=1,call_id:this.dialog.id.call_id,from_uri:this.dialog.local_uri,from_tag:this.dialog.id.local_tag,to_uri:this.dialog.remote_uri,to_tag:this.dialog.id.remote_tag,route_set:this.dialog.route_set},s,r),new e.RequestSender({request:this.request,onRequestTimeout:function(){n.onRequestTimeout()},onTransportError:function(){n.onTransportError()},receiveResponse:function(){}},this.ua).send(),i.terminate())}),this.emit("bye",this.request),this.terminated(),this.dialog=i,this.ua.dialogs[i.id.toString()]=i):this.status===c.STATUS_CONFIRMED?this.bye(t):this.reject(t),this},progress:function(t){function i(){r=t.statusCode||183,this.status=c.STATUS_WAITING_FOR_PRACK,o.push("Contact: "+this.contact),o.push("Require: 100rel"),o.push("RSeq: "+Math.floor(1e4*Math.random())),this.sessionDescriptionHandler.getDescription(t.sessionDescriptionHandlerOptions,t.modifiers).then(function(t){if(!this.isCanceled&&this.status!==c.STATUS_TERMINATED){this.early_sdp=t.body,this[this.hasOffer?"hasAnswer":"hasOffer"]=!0;var i=e.Timers.T1;this.timers.rel1xxTimer=e.Timers.setTimeout(function s(){this.request.reply(r,null,o,t),i*=2,this.timers.rel1xxTimer=e.Timers.setTimeout(s.bind(this),i)}.bind(this),i),this.timers.prackTimer=e.Timers.setTimeout(function(){this.status===c.STATUS_WAITING_FOR_PRACK&&(this.logger.log("no PRACK received, rejecting the call"),e.Timers.clearTimeout(this.timers.rel1xxTimer),this.request.reply(504),this.terminated(null,e.C.causes.NO_PRACK))}.bind(this),64*e.Timers.T1),s=this.request.reply(r,n,o,t),this.emit("progress",s,n)}}.bind(this),function(){this.request.reply(480),this.failed(null,e.C.causes.WEBRTC_ERROR),this.terminated(null,e.C.causes.WEBRTC_ERROR)}.bind(this))}var s,r=(t=t||{}).statusCode||180,n=t.reasonPhrase,o=(t.extraHeaders||[]).slice(),a=t.body;if(r<100||r>199)throw new TypeError("Invalid statusCode: "+r);return this.isCanceled||this.status===c.STATUS_TERMINATED?this:(100!==t.statusCode&&(this.rel100===e.C.supported.REQUIRED||this.rel100===e.C.supported.SUPPORTED&&t.rel100||this.rel100===e.C.supported.SUPPORTED&&this.ua.configuration.rel100===e.C.supported.REQUIRED)?(this.sessionDescriptionHandler=this.setupSessionDescriptionHandler(),this.sessionDescriptionHandler.hasDescription(this.request.getHeader("Content-Type"))?(this.hasOffer=!0,this.sessionDescriptionHandler.setDescription(this.request.body,t.sessionDescriptionHandlerOptions,t.modifiers).then(i.apply(this)).catch(function(t){this.logger.warn("invalid description"),this.logger.warn(t),this.failed(null,e.C.causes.WEBRTC_ERROR),this.terminated(null,e.C.causes.WEBRTC_ERROR)}.bind(this))):i.apply(this)):function(){s=this.request.reply(r,n,o,a),this.emit("progress",s,n)}.apply(this),this)},accept:function(t){t=t||{},this.onInfo=t.onInfo;var i=this,s=this.request,r=(t.extraHeaders||[]).slice(),n=function(t){var n;r.push("Contact: "+i.contact),r.push("Allow: "+e.UA.C.ALLOWED_METHODS.toString()),i.hasOffer?i.hasAnswer=!0:i.hasOffer=!0,n=s.reply(200,null,r,t,function(){i.status=c.STATUS_WAITING_FOR_ACK,i.setInvite2xxTimer(s,t),i.setACKTimer()},function(){i.failed(null,e.C.causes.CONNECTION_ERROR),i.terminated(null,e.C.causes.CONNECTION_ERROR)}),i.status!==c.STATUS_TERMINATED&&i.accepted(n,e.Utils.getReasonPhrase(200))},o=function(){i.status!==c.STATUS_TERMINATED&&(i.request.reply(480),i.failed(null,e.C.causes.WEBRTC_ERROR),i.terminated(null,e.C.causes.WEBRTC_ERROR))};if(this.status===c.STATUS_WAITING_FOR_PRACK)return this.status=c.STATUS_ANSWERED_WAITING_FOR_PRACK,this;if(this.status===c.STATUS_WAITING_FOR_ANSWER)this.status=c.STATUS_ANSWERED;else if(this.status!==c.STATUS_EARLY_MEDIA)throw new e.Exceptions.InvalidStateError(this.status);if(!this.createDialog(s,"UAS"))return s.reply(500,"Missing Contact header field"),this;if(e.Timers.clearTimeout(this.timers.userNoAnswerTimer),this.status===c.STATUS_EARLY_MEDIA)n({});else if(this.sessionDescriptionHandler=this.setupSessionDescriptionHandler(),"0"!==this.request.getHeader("Content-Length")||this.request.getHeader("Content-Type")){if(!this.sessionDescriptionHandler.hasDescription(this.request.getHeader("Content-Type")))return void this.request.reply(415);this.hasOffer=!0,this.sessionDescriptionHandler.setDescription(this.request.body,t.sessionDescriptionHandlerOptions,t.modifiers).then(function(){return this.sessionDescriptionHandler.getDescription(t.sessionDescriptionHandlerOptions,t.modifiers)}.bind(this)).catch(o).then(n)}else this.sessionDescriptionHandler.getDescription(t.sessionDescriptionHandlerOptions,t.modifiers).catch(o).then(n);return this},receiveRequest:function(i){function s(){var t,s;e.Timers.clearTimeout(this.timers.ackTimer),e.Timers.clearTimeout(this.timers.invite2xxTimer),this.status=c.STATUS_CONFIRMED,t=i.getHeader("Content-Type"),(s=i.getHeader("Content-Disposition"))&&"render"===s.type&&(this.renderbody=i.body,this.rendertype=t),this.emit("confirmed",i)}switch(i.method){case e.C.CANCEL:this.status!==c.STATUS_WAITING_FOR_ANSWER&&this.status!==c.STATUS_WAITING_FOR_PRACK&&this.status!==c.STATUS_ANSWERED_WAITING_FOR_PRACK&&this.status!==c.STATUS_EARLY_MEDIA&&this.status!==c.STATUS_ANSWERED||(this.status=c.STATUS_CANCELED,this.request.reply(487),this.canceled(i),this.rejected(i,e.C.causes.CANCELED),this.failed(i,e.C.causes.CANCELED),this.terminated(i,e.C.causes.CANCELED));break;case e.C.ACK:this.status===c.STATUS_WAITING_FOR_ACK&&(this.sessionDescriptionHandler.hasDescription(i.getHeader("Content-Type"))?(this.hasAnswer=!0,this.sessionDescriptionHandler.setDescription(i.body,this.sessionDescriptionHandlerOptions,this.modifiers).then(s.bind(this),function(t){this.logger.warn(t),this.terminate({statusCode:"488",reasonPhrase:"Bad Media Description"}),this.failed(i,e.C.causes.BAD_MEDIA_DESCRIPTION),this.terminated(i,e.C.causes.BAD_MEDIA_DESCRIPTION)}.bind(this))):s.apply(this));break;case e.C.PRACK:this.status===c.STATUS_WAITING_FOR_PRACK||this.status===c.STATUS_ANSWERED_WAITING_FOR_PRACK?this.hasAnswer?(e.Timers.clearTimeout(this.timers.rel1xxTimer),e.Timers.clearTimeout(this.timers.prackTimer),i.reply(200),this.status===c.STATUS_ANSWERED_WAITING_FOR_PRACK&&(this.status=c.STATUS_EARLY_MEDIA,this.accept()),this.status=c.STATUS_EARLY_MEDIA):(this.sessionDescriptionHandler=this.setupSessionDescriptionHandler(),this.sessionDescriptionHandler.hasDescription(i.getHeader("Content-Type"))?(this.hasAnswer=!0,this.sessionDescriptionHandler.setDescription(i.body,this.sessionDescriptionHandlerOptions,this.modifiers).then(function(){e.Timers.clearTimeout(this.timers.rel1xxTimer),e.Timers.clearTimeout(this.timers.prackTimer),i.reply(200),this.status===c.STATUS_ANSWERED_WAITING_FOR_PRACK&&(this.status=c.STATUS_EARLY_MEDIA,this.accept()),this.status=c.STATUS_EARLY_MEDIA}.bind(this),function(t){this.logger.warn(t),this.terminate({statusCode:"488",reasonPhrase:"Bad Media Description"}),this.failed(i,e.C.causes.BAD_MEDIA_DESCRIPTION),this.terminated(i,e.C.causes.BAD_MEDIA_DESCRIPTION)}.bind(this))):(this.terminate({statusCode:"488",reasonPhrase:"Bad Media Description"}),this.failed(i,e.C.causes.BAD_MEDIA_DESCRIPTION),this.terminated(i,e.C.causes.BAD_MEDIA_DESCRIPTION))):this.status===c.STATUS_EARLY_MEDIA&&i.reply(200);break;default:t.prototype.receiveRequest.apply(this,[i])}},setupSessionDescriptionHandler:function(){return this.sessionDescriptionHandler?this.sessionDescriptionHandler:this.sessionDescriptionHandlerFactory(this,this.ua.configuration.sessionDescriptionHandlerFactoryOptions)},onTransportError:function(){this.status!==c.STATUS_CONFIRMED&&this.status!==c.STATUS_TERMINATED&&this.failed(null,e.C.causes.CONNECTION_ERROR)},onRequestTimeout:function(){this.status===c.STATUS_CONFIRMED?this.terminated(null,e.C.causes.REQUEST_TIMEOUT):this.status!==c.STATUS_TERMINATED&&(this.failed(null,e.C.causes.REQUEST_TIMEOUT),this.terminated(null,e.C.causes.REQUEST_TIMEOUT))}},e.InviteServerContext=s,(r=function(t,i,s,r){s=s||{},this.passedOptions=s,s.params=Object.create(s.params||Object.prototype);var n=(s.extraHeaders||[]).slice(),o=t.configuration.sessionDescriptionHandlerFactory;if(this.sessionDescriptionHandlerFactoryOptions=t.configuration.sessionDescriptionHandlerFactoryOptions||{},this.sessionDescriptionHandlerOptions=s.sessionDescriptionHandlerOptions||{},this.modifiers=r,this.inviteWithoutSdp=s.inviteWithoutSdp||!1,this.anonymous=s.anonymous||!1,this.renderbody=s.renderbody||null,this.rendertype=s.rendertype||"text/plain",this.from_tag=e.Utils.newTag(),s.params.from_tag=this.from_tag,this.contact=t.contact.toString({anonymous:this.anonymous,outbound:this.anonymous?!t.contact.temp_gruu:!t.contact.pub_gruu}),this.anonymous&&(s.params.from_displayName="Anonymous",s.params.from_uri="sip:anonymous@anonymous.invalid",n.push("P-Preferred-Identity: "+t.configuration.uri.toString()),n.push("Privacy: id")),n.push("Contact: "+this.contact),n.push("Allow: "+e.UA.C.ALLOWED_METHODS.toString()),this.inviteWithoutSdp&&this.renderbody&&(n.push("Content-Type: "+this.rendertype),n.push("Content-Disposition: render;handling=optional")),t.configuration.rel100===e.C.supported.REQUIRED&&n.push("Require: 100rel"),t.configuration.replaces===e.C.supported.REQUIRED&&n.push("Require: replaces"),s.extraHeaders=n,e.Utils.augment(this,e.ClientContext,[t,e.C.INVITE,i,s]),e.Utils.augment(this,e.Session,[o]),this.status!==c.STATUS_NULL)throw new e.Exceptions.InvalidStateError(this.status);this.isCanceled=!1,this.received_100=!1,this.method=e.C.INVITE,this.receiveNonInviteResponse=this.receiveResponse,this.receiveResponse=this.receiveInviteResponse,this.logger=t.getLogger("sip.inviteclientcontext"),t.applicants[this]=this,this.id=this.request.call_id+this.from_tag,this.onInfo=s.onInfo}).prototype={invite:function(){var t=this;return this.ua.sessions[this.id]=this,this.inviteWithoutSdp?(this.request.body=t.renderbody,this.status=c.STATUS_INVITE_SENT,this.send()):(this.sessionDescriptionHandler=this.sessionDescriptionHandlerFactory(this,this.sessionDescriptionHandlerFactoryOptions),this.sessionDescriptionHandler.getDescription(this.sessionDescriptionHandlerOptions,this.modifiers).then(function(e){t.isCanceled||t.status===c.STATUS_TERMINATED||(t.hasOffer=!0,t.request.body=e,t.status=c.STATUS_INVITE_SENT,t.send())},function(){t.status!==c.STATUS_TERMINATED&&(t.failed(null,e.C.causes.WEBRTC_ERROR),t.terminated(null,e.C.causes.WEBRTC_ERROR))})),this},receiveInviteResponse:function(t){var i,s=this,r=t.call_id+t.from_tag+t.to_tag,n=[],o={};if(this.status!==c.STATUS_TERMINATED&&t.method===e.C.INVITE){if(this.dialog&&t.status_code>=200&&t.status_code<=299){if(r!==this.dialog.id.toString()){if(!this.createDialog(t,"UAC",!0))return;return this.emit("ack",t.transaction.sendACK({body:e.Utils.generateFakeSDP(t.body)})),this.earlyDialogs[r].sendRequest(this,e.C.BYE),void(this.status!==c.STATUS_CONFIRMED&&(this.failed(t,e.C.causes.WEBRTC_ERROR),this.terminated(t,e.C.causes.WEBRTC_ERROR)))}if(this.status===c.STATUS_CONFIRMED)return void this.emit("ack",t.transaction.sendACK());if(!this.hasAnswer)return}if(this.dialog&&t.status_code<200){if(-1!==this.dialog.pracked.indexOf(t.getHeader("rseq"))||this.dialog.pracked[this.dialog.pracked.length-1]>=t.getHeader("rseq")&&this.dialog.pracked.length>0)return;if(!this.earlyDialogs[r]&&!this.createDialog(t,"UAC",!0))return;if(-1!==this.earlyDialogs[r].pracked.indexOf(t.getHeader("rseq"))||this.earlyDialogs[r].pracked[this.earlyDialogs[r].pracked.length-1]>=t.getHeader("rseq")&&this.earlyDialogs[r].pracked.length>0)return;return n.push("RAck: "+t.getHeader("rseq")+" "+t.getHeader("cseq")),this.earlyDialogs[r].pracked.push(t.getHeader("rseq")),void this.earlyDialogs[r].sendRequest(this,e.C.PRACK,{extraHeaders:n,body:e.Utils.generateFakeSDP(t.body)})}if(this.isCanceled)t.status_code>=100&&t.status_code<200?(this.request.cancel(this.cancelReason,n),this.canceled(null)):t.status_code>=200&&t.status_code<299?(this.acceptAndTerminate(t),this.emit("bye",this.request)):t.status_code>=300&&(i=e.C.REASON_PHRASE[t.status_code]||e.C.causes.CANCELED,this.rejected(t,i),this.failed(t,i),this.terminated(t,i));else switch(!0){case/^100$/.test(t.status_code):this.received_100=!0,this.emit("progress",t);break;case/^1[0-9]{2}$/.test(t.status_code):if(!t.to_tag){this.logger.warn("1xx response received without to tag");break}if(t.hasHeader("contact")&&!this.createDialog(t,"UAC",!0))break;if(this.status=c.STATUS_1XX_RECEIVED,t.hasHeader("require")&&-1!==t.getHeader("require").indexOf("100rel")){if(this.dialog||!this.earlyDialogs[r])break;if(-1!==this.earlyDialogs[r].pracked.indexOf(t.getHeader("rseq"))||this.earlyDialogs[r].pracked[this.earlyDialogs[r].pracked.length-1]>=t.getHeader("rseq")&&this.earlyDialogs[r].pracked.length>0)return;if(this.sessionDescriptionHandler=this.sessionDescriptionHandlerFactory(this,this.sessionDescriptionHandlerFactoryOptions),this.sessionDescriptionHandler.hasDescription(t.getHeader("Content-Type")))if(this.hasOffer){if(!this.createDialog(t,"UAC"))break;this.hasAnswer=!0,this.dialog.pracked.push(t.getHeader("rseq")),this.sessionDescriptionHandler.setDescription(t.body,this.sessionDescriptionHandlerOptions,this.modifiers).then(function(){n.push("RAck: "+t.getHeader("rseq")+" "+t.getHeader("cseq")),s.sendRequest(e.C.PRACK,{extraHeaders:n,receiveResponse:function(){}}),s.status=c.STATUS_EARLY_MEDIA,s.emit("progress",t)},function(i){s.logger.warn(i),s.acceptAndTerminate(t,488,"Not Acceptable Here"),s.failed(t,e.C.causes.BAD_MEDIA_DESCRIPTION)})}else{var a=this.earlyDialogs[r],h=a.sessionDescriptionHandler=this.sessionDescriptionHandlerFactory(this,this.sessionDescriptionHandlerFactoryOptions);a.pracked.push(t.getHeader("rseq")),h.setDescription(t.body,s.sessionDescriptionHandlerOptions,s.modifers).then(h.getDescription.bind(h,s.sessionDescriptionHandlerOptions,s.modifiers)).then(function(i){n.push("RAck: "+t.getHeader("rseq")+" "+t.getHeader("cseq")),a.sendRequest(s,e.C.PRACK,{extraHeaders:n,body:i}),s.status=c.STATUS_EARLY_MEDIA,s.emit("progress",t)}).catch(function(i){if(i instanceof e.Exceptions.GetDescriptionError){if(a.pracked.push(t.getHeader("rseq")),s.status===c.STATUS_TERMINATED)return;s.failed(null,e.C.causes.WEBRTC_ERROR),s.terminated(null,e.C.causes.WEBRTC_ERROR)}else a.pracked.splice(a.pracked.indexOf(t.getHeader("rseq")),1),s.logger.warn("invalid description"),s.logger.warn(i)})}else n.push("RAck: "+t.getHeader("rseq")+" "+t.getHeader("cseq")),this.earlyDialogs[r].pracked.push(t.getHeader("rseq")),this.earlyDialogs[r].sendRequest(this,e.C.PRACK,{extraHeaders:n}),this.emit("progress",t)}else this.emit("progress",t);break;case/^2[0-9]{2}$/.test(t.status_code):if(this.request.cseq+" "+this.request.method!==t.getHeader("cseq"))break;if(this.status===c.STATUS_EARLY_MEDIA&&this.dialog){this.status=c.STATUS_CONFIRMED,o={},this.renderbody&&(n.push("Content-Type: "+this.rendertype),o.extraHeaders=n,o.body=this.renderbody),this.emit("ack",t.transaction.sendACK(o)),this.accepted(t);break}if(this.dialog)break;if(this.hasOffer)if(this.hasAnswer)this.renderbody&&(n.push("Content-Type: "+s.rendertype),o.extraHeaders=n,o.body=this.renderbody),this.emit("ack",t.transaction.sendACK(o));else{if(!this.sessionDescriptionHandler.hasDescription(t.getHeader("Content-Type"))){this.acceptAndTerminate(t,400,"Missing session description"),this.failed(t,e.C.causes.BAD_MEDIA_DESCRIPTION);break}if(!this.createDialog(t,"UAC"))break;this.hasAnswer=!0,this.sessionDescriptionHandler.setDescription(t.body,this.sessionDescriptionHandlerOptions,this.modifiers).then(function(){var e={};s.status=c.STATUS_CONFIRMED,s.renderbody&&(n.push("Content-Type: "+s.rendertype),e.extraHeaders=n,e.body=s.renderbody),s.emit("ack",t.transaction.sendACK(e)),s.accepted(t)},function(i){s.logger.warn(i),s.acceptAndTerminate(t,488,"Not Acceptable Here"),s.failed(t,e.C.causes.BAD_MEDIA_DESCRIPTION)})}else if(this.earlyDialogs[r]&&this.earlyDialogs[r].sessionDescriptionHandler){if(this.hasOffer=!0,this.hasAnswer=!0,this.sessionDescriptionHandler=this.earlyDialogs[r].sessionDescriptionHandler,!this.createDialog(t,"UAC"))break;this.status=c.STATUS_CONFIRMED,this.emit("ack",t.transaction.sendACK()),this.accepted(t)}else{if(this.sessionDescriptionHandler=this.sessionDescriptionHandlerFactory(this,this.sessionDescriptionHandlerFactoryOptions),!this.sessionDescriptionHandler.hasDescription(t.getHeader("Content-Type"))){this.acceptAndTerminate(t,400,"Missing session description"),this.failed(t,e.C.causes.BAD_MEDIA_DESCRIPTION);break}if(!this.createDialog(t,"UAC"))break;this.hasOffer=!0,this.sessionDescriptionHandler.setDescription(t.body,this.sessionDescriptionHandlerOptions,this.modifiers).then(this.sessionDescriptionHandler.getDescription.bind(this.sessionDescriptionHandler,this.sessionDescriptionHandlerOptions,this.modifiers)).then(function(e){s.isCanceled||s.status===c.STATUS_TERMINATED||(s.status=c.STATUS_CONFIRMED,s.hasAnswer=!0,s.emit("ack",t.transaction.sendACK({body:e})),s.accepted(t))}).catch(function(i){i instanceof e.Exceptions.GetDescriptionError?s.logger.warn("there was a problem"):(s.logger.warn("invalid description"),s.logger.warn(i),s.acceptAndTerminate(t,488,"Invalid session description"),s.failed(t,e.C.causes.BAD_MEDIA_DESCRIPTION))})}break;default:i=e.Utils.sipErrorCause(t.status_code),this.rejected(t,i),this.failed(t,i),this.terminated(t,i)}}},cancel:function(t){if(t=t||{},t.extraHeaders=(t.extraHeaders||[]).slice(),this.status===c.STATUS_TERMINATED||this.status===c.STATUS_CONFIRMED)throw new e.Exceptions.InvalidStateError(this.status);this.logger.log("canceling RTCSession");var i=e.Utils.getCancelReason(t.status_code,t.reason_phrase);return this.status===c.STATUS_NULL||this.status===c.STATUS_INVITE_SENT&&!this.received_100?(this.isCanceled=!0,this.cancelReason=i):this.status!==c.STATUS_INVITE_SENT&&this.status!==c.STATUS_1XX_RECEIVED&&this.status!==c.STATUS_EARLY_MEDIA||this.request.cancel(i,t.extraHeaders),this.canceled()},terminate:function(e){return this.status===c.STATUS_TERMINATED?this:(this.status===c.STATUS_WAITING_FOR_ACK||this.status===c.STATUS_CONFIRMED?this.bye(e):this.cancel(e),this)},receiveRequest:function(i){return i.method,e.C.CANCEL,i.method===e.C.ACK&&this.status===c.STATUS_WAITING_FOR_ACK&&(e.Timers.clearTimeout(this.timers.ackTimer),e.Timers.clearTimeout(this.timers.invite2xxTimer),this.status=c.STATUS_CONFIRMED,this.accepted()),t.prototype.receiveRequest.apply(this,[i])},onTransportError:function(){this.status!==c.STATUS_CONFIRMED&&this.status!==c.STATUS_TERMINATED&&this.failed(null,e.C.causes.CONNECTION_ERROR)},onRequestTimeout:function(){this.status===c.STATUS_CONFIRMED?this.terminated(null,e.C.causes.REQUEST_TIMEOUT):this.status!==c.STATUS_TERMINATED&&(this.failed(null,e.C.causes.REQUEST_TIMEOUT),this.terminated(null,e.C.causes.REQUEST_TIMEOUT))}},e.InviteClientContext=r,(o=function(t,i,s,r){if(this.options=r||{},this.extraHeaders=(this.options.extraHeaders||[]).slice(),void 0===t||void 0===i||void 0===s)throw new TypeError("Not enough arguments");e.Utils.augment(this,e.ClientContext,[t,e.C.REFER,i.remoteIdentity.uri.toString(),r]),this.applicant=i;if(s instanceof e.InviteServerContext||s instanceof e.InviteClientContext)this.target=\'"\'+s.remoteIdentity.friendlyName+\'" <\'+s.dialog.remote_target.toString()+"?Replaces="+s.dialog.id.call_id+"%3Bto-tag%3D"+s.dialog.id.remote_tag+"%3Bfrom-tag%3D"+s.dialog.id.local_tag+">";else{try{this.target=e.Grammar.parse(s,"Refer_To").uri||s}catch(e){this.logger.debug(".refer() cannot parse Refer_To from",s),this.logger.debug("...falling through to normalizeTarget()")}if(this.target=this.ua.normalizeTarget(this.target),!this.target)throw new TypeError("Invalid target: "+s)}this.ua&&this.extraHeaders.push("Referred-By: <"+this.ua.configuration.uri+">"),this.extraHeaders.push("Contact: "+i.contact),this.extraHeaders.push("Allow: "+e.UA.C.ALLOWED_METHODS.toString()),this.extraHeaders.push("Refer-To: "+this.target)}).prototype={refer:function(t){t=t||{};var i=(this.extraHeaders||[]).slice();return t.extraHeaders&&i.concat(t.extraHeaders),this.applicant.sendRequest(e.C.REFER,{extraHeaders:this.extraHeaders,receiveResponse:function(e){/^1[0-9]{2}$/.test(e.status_code)?this.emit("referRequestProgress",this):/^2[0-9]{2}$/.test(e.status_code)?this.emit("referRequestAccepted",this):/^[4-6][0-9]{2}$/.test(e.status_code)&&this.emit("referRequestRejected",this),t.receiveResponse&&t.receiveResponse(e)}.bind(this)}),this},receiveNotify:function(t){if(t.hasHeader("Content-Type")&&-1!==t.getHeader("Content-Type").search(/^message\\/sipfrag/)){var i=e.Grammar.parse(t.body,"sipfrag");if(-1===i)return void t.reply(489,"Bad Event");switch(!0){case/^1[0-9]{2}$/.test(i.status_code):this.emit("referProgress",this);break;case/^2[0-9]{2}$/.test(i.status_code):this.emit("referAccepted",this),!this.options.activeAfterTransfer&&this.applicant.terminate&&this.applicant.terminate();break;default:this.emit("referRejected",this)}return t.reply(200),void this.emit("notify",t)}t.reply(489,"Bad Event")}},e.ReferClientContext=o,(n=function(t,i){if(e.Utils.augment(this,e.ServerContext,[t,i]),this.ua=t,this.status=c.STATUS_INVITE_RECEIVED,this.from_tag=i.from_tag,this.id=i.call_id+this.from_tag,this.request=i,this.contact=this.ua.contact.toString(),this.logger=t.getLogger("sip.referservercontext",this.id),!this.request.hasHeader("refer-to"))return this.logger.warn("Invalid REFER packet. A refer-to header is required. Rejecting refer."),void this.reject();this.referTo=this.request.parseHeader("refer-to"),this.referredSession=this.ua.findSession(i),this.cseq=Math.floor(1e4*Math.random()),this.call_id=this.request.call_id,this.from_uri=this.request.to.uri,this.from_tag=this.request.to.parameters.tag,this.remote_target=this.request.headers.Contact[0].parsed.uri,this.to_uri=this.request.from.uri,this.to_tag=this.request.from_tag,this.route_set=this.request.getHeaders("record-route"),this.receiveNonInviteResponse=function(){},this.request.hasHeader("referred-by")&&(this.referredBy=this.request.getHeader("referred-by")),this.referTo.uri.hasHeader("replaces")&&(this.replaces=this.referTo.uri.getHeader("replaces")),this.status=c.STATUS_WAITING_FOR_ANSWER}).prototype={progress:function(){if(this.status!==c.STATUS_WAITING_FOR_ANSWER)throw new e.Exceptions.InvalidStateError(this.status);this.request.reply(100)},reject:function(t){if(this.status===c.STATUS_TERMINATED)throw new e.Exceptions.InvalidStateError(this.status);this.logger.log("Rejecting refer"),this.status=c.STATUS_TERMINATED,e.ServerContext.prototype.reject.call(this,t),this.emit("referRequestRejected",this)},accept:function(t,i){if(t=t||{},this.status!==c.STATUS_WAITING_FOR_ANSWER)throw new e.Exceptions.InvalidStateError(this.status);if(this.status=c.STATUS_ANSWERED,this.request.reply(202,"Accepted"),this.emit("referRequestAccepted",this),t.followRefer){this.logger.log("Accepted refer, attempting to automatically follow it");var s=this.referTo.uri;if(!s.scheme.match("^sips?$"))return this.logger.error("SIP.js can only automatically follow SIP refer target"),void this.reject();var r=t.inviteOptions||{},n=(r.extraHeaders||[]).slice();this.replaces&&n.push("Replaces: "+decodeURIComponent(this.replaces)),this.referredBy&&n.push("Referred-By: "+this.referredBy),r.extraHeaders=n,s.clearHeaders(),this.targetSession=this.ua.invite(s,r,i),this.emit("referInviteSent",this),this.targetSession.once("progress",function(){this.sendNotify("SIP/2.0 100 Trying"),this.emit("referProgress",this),this.referredSession&&this.referredSession.emit("referProgress",this)}.bind(this)),this.targetSession.once("accepted",function(){this.logger.log("Successfully followed the refer"),this.sendNotify("SIP/2.0 200 OK"),this.emit("referAccepted",this),this.referredSession&&this.referredSession.emit("referAccepted",this)}.bind(this));var o=function(e){if(this.status!==c.STATUS_TERMINATED){if(this.logger.log("Refer was not successful. Resuming session"),e&&429===e.status_code)return this.logger.log("Alerting referrer that identity is required."),void this.sendNotify("SIP/2.0 429 Provide Referrer Identity");this.sendNotify("SIP/2.0 603 Declined"),this.status=c.STATUS_TERMINATED,this.emit("referRejected",this),this.referredSession&&this.referredSession.emit("referRejected")}};this.targetSession.once("rejected",o.bind(this)),this.targetSession.once("failed",o.bind(this))}else this.logger.log("Accepted refer, but did not automatically follow it"),this.sendNotify("SIP/2.0 200 OK"),this.emit("referAccepted",this),this.referredSession&&this.referredSession.emit("referAccepted",this)},sendNotify:function(t){if(this.status!==c.STATUS_ANSWERED)throw new e.Exceptions.InvalidStateError(this.status);if(-1===e.Grammar.parse(t,"sipfrag"))throw new Error("sipfrag body is required to send notify for refer");var i=new e.OutgoingRequest(e.C.NOTIFY,this.remote_target,this.ua,{cseq:this.cseq+=1,call_id:this.call_id,from_uri:this.from_uri,from_tag:this.from_tag,to_uri:this.to_uri,to_tag:this.to_tag,route_set:this.route_set},["Event: refer","Subscription-State: terminated","Content-Type: message/sipfrag"],t);new e.RequestSender({request:i,onRequestTimeout:function(){},onTransportError:function(){},receiveResponse:function(){}},this.ua).send()}},e.ReferServerContext=n}},function(e,t,i){"use strict";e.exports=function(e){var t;return t=function(i,s,r){var n,o;if(void 0===s)throw new TypeError("Not enough arguments");if(this.logger=i.ua.getLogger("sip.invitecontext.dtmf",i.id),this.owner=i,this.direction=null,r=r||{},n=r.duration||null,o=r.interToneGap||null,"string"==typeof s)s=s.toUpperCase();else{if("number"!=typeof s)throw new TypeError("Invalid tone: "+s);s=s.toString()}if(!s.match(/^[0-9A-D#*]$/))throw new TypeError("Invalid tone: "+s);if(this.tone=s,n&&!e.Utils.isDecimal(n))throw new TypeError("Invalid tone duration: "+n);if(n?n<t.C.MIN_DURATION?(this.logger.warn(\'"duration" value is lower than the minimum allowed, setting it to \'+t.C.MIN_DURATION+" milliseconds"),n=t.C.MIN_DURATION):n>t.C.MAX_DURATION?(this.logger.warn(\'"duration" value is greater than the maximum allowed, setting it to \'+t.C.MAX_DURATION+" milliseconds"),n=t.C.MAX_DURATION):n=Math.abs(n):n=t.C.DEFAULT_DURATION,this.duration=n,o&&!e.Utils.isDecimal(o))throw new TypeError("Invalid interToneGap: "+o);o?o<t.C.MIN_INTER_TONE_GAP?(this.logger.warn(\'"interToneGap" value is lower than the minimum allowed, setting it to \'+t.C.MIN_INTER_TONE_GAP+" milliseconds"),o=t.C.MIN_INTER_TONE_GAP):o=Math.abs(o):o=t.C.DEFAULT_INTER_TONE_GAP,this.interToneGap=o},t.prototype=Object.create(e.EventEmitter.prototype),t.prototype.send=function(t){var i,s={};if(this.direction="outgoing",this.owner.status!==e.Session.C.STATUS_CONFIRMED&&this.owner.status!==e.Session.C.STATUS_WAITING_FOR_ACK)throw new e.Exceptions.InvalidStateError(this.owner.status);i=(t=t||{}).extraHeaders?t.extraHeaders.slice():[],s.contentType="application/dtmf-relay",s.body="Signal= "+this.tone+"\\r\\n",s.body+="Duration= "+this.duration,this.request=this.owner.dialog.sendRequest(this,e.C.INFO,{extraHeaders:i,body:s}),this.owner.emit("dtmf",this.request,this)},t.prototype.receiveResponse=function(t){var i;switch(!0){case/^1[0-9]{2}$/.test(t.status_code):break;case/^2[0-9]{2}$/.test(t.status_code):this.emit("succeeded",{originator:"remote",response:t});break;default:i=e.Utils.sipErrorCause(t.status_code),this.emit("failed",t,i)}},t.prototype.onRequestTimeout=function(){this.emit("failed",null,e.C.causes.REQUEST_TIMEOUT),this.owner.onRequestTimeout()},t.prototype.onTransportError=function(){this.emit("failed",null,e.C.causes.CONNECTION_ERROR),this.owner.onTransportError()},t.prototype.onDialogError=function(t){this.emit("failed",t,e.C.causes.DIALOG_ERROR),this.owner.onDialogError(t)},t.prototype.init_incoming=function(e){this.direction="incoming",this.request=e,e.reply(200),this.tone&&this.duration?this.owner.emit("dtmf",e,this):this.logger.warn("invalid INFO DTMF received, discarded")},t.C={MIN_DURATION:70,MAX_DURATION:6e3,DEFAULT_DURATION:100,MIN_INTER_TONE_GAP:50,DEFAULT_INTER_TONE_GAP:500},t}},function(e,t,i){"use strict";e.exports=function(e){e.Subscription=function(t,i,s,r){if(r=Object.create(r||Object.prototype),this.extraHeaders=r.extraHeaders=(r.extraHeaders||[]).slice(),this.id=null,this.state="init",!s)throw new TypeError("Event necessary to create a subscription.");this.event=s,"number"!=typeof r.expires?(t.logger.warn("expires must be a number. Using default of 3600."),this.expires=3600):this.expires=r.expires,this.requestedExpires=this.expires,r.extraHeaders.push("Event: "+this.event),r.extraHeaders.push("Expires: "+this.expires),r.body&&(this.body=r.body),this.contact=t.contact.toString(),r.extraHeaders.push("Contact: "+this.contact),r.extraHeaders.push("Allow: "+e.UA.C.ALLOWED_METHODS.toString()),e.Utils.augment(this,e.ClientContext,[t,e.C.SUBSCRIBE,i,r]),this.logger=t.getLogger("sip.subscription"),this.dialog=null,this.timers={N:null,sub_duration:null},this.errorCodes=[404,405,410,416,480,481,482,483,484,485,489,501,604]},e.Subscription.prototype={subscribe:function(){return"active"===this.state?(this.refresh(),this):"notify_wait"===this.state?this:(e.Timers.clearTimeout(this.timers.sub_duration),e.Timers.clearTimeout(this.timers.N),this.timers.N=e.Timers.setTimeout(this.timer_fire.bind(this),e.Timers.TIMER_N),this.ua.earlySubscriptions[this.request.call_id+this.request.from.parameters.tag+this.event]=this,this.send(),this.state="notify_wait",this)},refresh:function(){"terminated"!==this.state&&"pending"!==this.state&&"notify_wait"!==this.state&&this.dialog.sendRequest(this,e.C.SUBSCRIBE,{extraHeaders:this.extraHeaders,body:this.body})},receiveResponse:function(t){var i,s=e.Utils.getReasonPhrase(t.status_code);"notify_wait"===this.state&&t.status_code>=300||"notify_wait"!==this.state&&-1!==this.errorCodes.indexOf(t.status_code)?this.failed(t,null):/^2[0-9]{2}$/.test(t.status_code)?(this.emit("accepted",t,s),(i=t.getHeader("Expires"))&&i<=this.requestedExpires?(this.expires=i,this.timers.sub_duration=e.Timers.setTimeout(this.refresh.bind(this),900*i)):i?(this.logger.warn("Expires header in a 200-class response to SUBSCRIBE with a higher value than the one in the request"),this.failed(t,e.C.INVALID_EXPIRES_HEADER)):(this.logger.warn("Expires header missing in a 200-class response to SUBSCRIBE"),this.failed(t,e.C.EXPIRES_HEADER_MISSING))):t.statusCode>300&&(this.emit("failed",t,s),this.emit("rejected",t,s))},unsubscribe:function(){var t=[];this.state="terminated",t.push("Event: "+this.event),t.push("Expires: 0"),t.push("Contact: "+this.contact),t.push("Allow: "+e.UA.C.ALLOWED_METHODS.toString()),this.receiveResponse=function(){},this.dialog.sendRequest(this,this.method,{extraHeaders:t,body:this.body}),e.Timers.clearTimeout(this.timers.sub_duration),e.Timers.clearTimeout(this.timers.N),this.timers.N=e.Timers.setTimeout(this.timer_fire.bind(this),e.Timers.TIMER_N)},timer_fire:function(){"terminated"===this.state?(this.terminateDialog(),e.Timers.clearTimeout(this.timers.N),e.Timers.clearTimeout(this.timers.sub_duration),delete this.ua.subscriptions[this.id]):"notify_wait"===this.state||"pending"===this.state?this.close():this.refresh()},close:function(){"notify_wait"===this.state?(this.state="terminated",e.Timers.clearTimeout(this.timers.N),e.Timers.clearTimeout(this.timers.sub_duration),this.receiveResponse=function(){},delete this.ua.earlySubscriptions[this.request.call_id+this.request.from.parameters.tag+this.event]):"terminated"!==this.state&&this.unsubscribe()},createConfirmedDialog:function(t,i){var s;return this.terminateDialog(),s=new e.Dialog(this,t,i),s.invite_seqnum=this.request.cseq,s.local_seqnum=this.request.cseq,!s.error&&(this.dialog=s,!0)},terminateDialog:function(){this.dialog&&(delete this.ua.subscriptions[this.id],this.dialog.terminate(),delete this.dialog)},receiveRequest:function(t){function i(){s.expires&&(e.Timers.clearTimeout(r.timers.sub_duration),s.expires=Math.min(r.expires,Math.max(s.expires,0)),r.timers.sub_duration=e.Timers.setTimeout(r.refresh.bind(r),900*s.expires))}var s,r=this;if(this.matchEvent(t))if(this.dialog||this.createConfirmedDialog(t,"UAS")&&(this.id=this.dialog.id.toString(),delete this.ua.earlySubscriptions[this.request.call_id+this.request.from.parameters.tag+this.event],this.ua.subscriptions[this.id]=this),s=t.parseHeader("Subscription-State"),t.reply(200,e.C.REASON_200),e.Timers.clearTimeout(this.timers.N),this.emit("notify",{request:t}),"terminated"!==this.state)switch(s.state){case"active":this.state="active",i();break;case"pending":"notify_wait"===this.state&&i(),this.state="pending";break;case"terminated":if(e.Timers.clearTimeout(this.timers.sub_duration),s.reason)switch(this.logger.log("terminating subscription with reason "+s.reason),s.reason){case"deactivated":case"timeout":return void this.subscribe();case"probation":case"giveup":return void(s.params&&s.params["retry-after"]?this.timers.sub_duration=e.Timers.setTimeout(r.subscribe.bind(r),s.params["retry-after"]):this.subscribe())}this.close()}else"terminated"===s.state&&(this.terminateDialog(),e.Timers.clearTimeout(this.timers.N),e.Timers.clearTimeout(this.timers.sub_duration),delete this.ua.subscriptions[this.id]);else t.reply(489)},failed:function(e,t){return this.close(),this.emit("failed",e,t),this.emit("rejected",e,t),this},onDialogError:function(t){this.failed(t,e.C.causes.DIALOG_ERROR)},matchEvent:function(e){var t;return e.hasHeader("Event")?e.hasHeader("Subscription-State")?(t=e.parseHeader("event").event,this.event===t||(this.logger.warn("event match failed"),e.reply(481,"Event Match Failed"),!1)):(this.logger.warn("missing Subscription-State header"),!1):(this.logger.warn("missing Event header"),!1)}}}},function(e,t,i){"use strict";(function(t){var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=function(e,r){function n(t){if(t instanceof Function)return t.initialize||(t.initialize=function(){return e.Utils.Promise.resolve()}),t}var o,a={STATUS_INIT:0,STATUS_STARTING:1,STATUS_READY:2,STATUS_USER_CLOSED:3,STATUS_NOT_READY:4,CONFIGURATION_ERROR:1,NETWORK_ERROR:2,ALLOWED_METHODS:["ACK","CANCEL","INVITE","MESSAGE","BYE","OPTIONS","INFO","NOTIFY","REFER"],ACCEPTED_BODY_TYPES:["application/sdp","application/dtmf-relay"],MAX_FORWARDS:70,TAG_LENGTH:10};((o=function(t){function i(e){return s.emit.bind(s,e)}var s=this;a.ACCEPTED_BODY_TYPES=a.ACCEPTED_BODY_TYPES.toString(),this.log=new e.LoggerFactory,this.logger=this.getLogger("sip.ua"),this.cache={credentials:{}},this.configuration={},this.dialogs={},this.applicants={},this.data={},this.sessions={},this.subscriptions={},this.earlySubscriptions={},this.transport=null,this.contact=null,this.status=a.STATUS_INIT,this.error=null,this.transactions={nist:{},nict:{},ist:{},ict:{}},this.transportRecoverAttempts=0,this.transportRecoveryTimer=null,Object.defineProperties(this,{transactionsCount:{get:function(){var e,t=["nist","nict","ist","ict"],i=0;for(e in t)i+=Object.keys(this.transactions[t[e]]).length;return i}},nictTransactionsCount:{get:function(){return Object.keys(this.transactions.nict).length}},nistTransactionsCount:{get:function(){return Object.keys(this.transactions.nist).length}},ictTransactionsCount:{get:function(){return Object.keys(this.transactions.ict).length}},istTransactionsCount:{get:function(){return Object.keys(this.transactions.ist).length}}}),void 0===t?t={}:("string"==typeof t||t instanceof String)&&(t={uri:t}),t.log&&(t.log.hasOwnProperty("builtinEnabled")&&(this.log.builtinEnabled=t.log.builtinEnabled),t.log.hasOwnProperty("level")&&(this.log.level=t.log.level),t.log.hasOwnProperty("connector")&&(this.log.connector=t.log.connector));try{this.loadConfig(t)}catch(e){throw this.status=a.STATUS_NOT_READY,this.error=a.CONFIGURATION_ERROR,e}this.registerContext=new e.RegisterContext(this),this.registerContext.on("failed",i("registrationFailed")),this.registerContext.on("registered",i("registered")),this.registerContext.on("unregistered",i("unregistered")),this.configuration.autostart&&this.start()}).prototype=Object.create(e.EventEmitter.prototype)).register=function(e){return this.configuration.register=!0,this.registerContext.register(e),this},o.prototype.unregister=function(e){this.configuration.register=!1;var t=this.registerContext;return this.afterConnected(t.unregister.bind(t,e)),this},o.prototype.isRegistered=function(){return this.registerContext.registered},o.prototype.isConnected=function(){return!!this.transport&&this.transport.connected},o.prototype.afterConnected=function(e){this.isConnected()?e():this.once("connected",e)},o.prototype.waitForConnected=function(){return new e.Utils.Promise(function(e){this.afterConnected(e)}.bind(this))},o.prototype.invite=function(t,i,s){var r=new e.InviteClientContext(this,t,i,s);return this.waitForConnected().then(function(){r.invite(),this.emit("inviteSent",r)}.bind(this)),r},o.prototype.subscribe=function(t,i,s){var r=new e.Subscription(this,t,i,s);return this.afterConnected(r.subscribe.bind(r)),r},o.prototype.message=function(t,i,s){if(void 0===i)throw new TypeError("Not enough arguments");return(s=Object.create(s||Object.prototype)).contentType||(s.contentType="text/plain"),s.body=i,this.request(e.C.MESSAGE,t,s)},o.prototype.request=function(t,i,s){var r=new e.ClientContext(this,t,i,s);return this.afterConnected(r.send.bind(r)),r},o.prototype.stop=function(){function i(){0===c.nistTransactionsCount&&0===c.nictTransactionsCount&&(c.removeListener("transactionDestroyed",i),c.transport.disconnect())}var s,n,o,c=this;if(this.logger.log("user requested closure..."),this.status===a.STATUS_USER_CLOSED)return this.logger.warn("UA already closed"),this;e.Timers.clearTimeout(this.transportRecoveryTimer),this.logger.log("closing registerContext"),this.registerContext.close();for(s in this.sessions)this.logger.log("closing session "+s),this.sessions[s].terminate();for(n in this.subscriptions)this.logger.log("unsubscribing from subscription "+n),this.subscriptions[n].close();for(n in this.earlySubscriptions)this.logger.log("unsubscribing from early subscription "+n),this.earlySubscriptions[n].close();for(o in this.applicants)this.applicants[o].close();return this.status=a.STATUS_USER_CLOSED,0===this.nistTransactionsCount&&0===this.nictTransactionsCount?this.transport.disconnect():this.on("transactionDestroyed",i),"function"==typeof r.removeEventListener&&(t.chrome&&t.chrome.app&&t.chrome.app.runtime||r.removeEventListener("unload",this.environListener)),this},o.prototype.start=function(){var i;return this.logger.log("user requested startup..."),this.status===a.STATUS_INIT?(i=this.getNextWsServer(),this.status=a.STATUS_STARTING,new e.Transport(this,i)):this.status===a.STATUS_USER_CLOSED?(this.logger.log("resuming"),this.status=a.STATUS_READY,this.transport.connect()):this.status===a.STATUS_STARTING?this.logger.log("UA is in STARTING status, not opening new connection"):this.status===a.STATUS_READY?this.logger.log("UA is in READY status, not resuming"):this.logger.error("Connection is down. Auto-Recovery system is trying to connect"),this.configuration.autostop&&"function"==typeof r.addEventListener&&(t.chrome&&t.chrome.app&&t.chrome.app.runtime||(this.environListener=this.stop.bind(this),r.addEventListener("unload",this.environListener))),this},o.prototype.normalizeTarget=function(t){return e.Utils.normalizeTarget(t,this.configuration.hostportParams)},o.prototype.saveCredentials=function(e){return this.cache.credentials[e.realm]=this.cache.credentials[e.realm]||{},this.cache.credentials[e.realm][e.uri]=e,this},o.prototype.getCredentials=function(e){var t,i;return t=e.ruri.host,this.cache.credentials[t]&&this.cache.credentials[t][e.ruri]&&((i=this.cache.credentials[t][e.ruri]).method=e.method),i},o.prototype.getLogger=function(e,t){return this.log.getLogger(e,t)},o.prototype.onTransportClosed=function(t){var i,s,r,n=["nict","ict","nist","ist"];for(t.server.status=e.Transport.C.STATUS_DISCONNECTED,this.logger.log("connection state set to "+e.Transport.C.STATUS_DISCONNECTED),r=n.length,i=0;i<r;i++)for(s in this.transactions[n[i]])this.transactions[n[i]][s].onTransportError();this.contact.pub_gruu||this.closeSessionsOnTransportError()},o.prototype.onTransportError=function(t){var i;this.logger.log("transport "+t.server.ws_uri+" failed | connection state set to "+e.Transport.C.STATUS_ERROR),t.server.status=e.Transport.C.STATUS_ERROR,this.emit("disconnected",{transport:t}),this.status!==a.STATUS_USER_CLOSED&&((i=this.getNextWsServer())?new e.Transport(this,i):(this.closeSessionsOnTransportError(),this.error&&this.error===a.NETWORK_ERROR||(this.status=a.STATUS_NOT_READY,this.error=a.NETWORK_ERROR),this.recoverTransport()))},o.prototype.onTransportConnected=function(t){this.transport=t,this.transportRecoverAttempts=0,t.server.status=e.Transport.C.STATUS_READY,this.logger.log("connection state set to "+e.Transport.C.STATUS_READY),this.status!==a.STATUS_USER_CLOSED&&(this.status=a.STATUS_READY,this.error=null,this.configuration.register&&this.configuration.authenticationFactory.initialize().then(function(){this.registerContext.onTransportConnected()}.bind(this)),this.emit("connected",{transport:t}))},o.prototype.onTransportConnecting=function(e,t){this.emit("connecting",{transport:e,attempts:t})},o.prototype.newTransaction=function(e){this.transactions[e.type][e.id]=e,this.emit("newTransaction",{transaction:e})},o.prototype.destroyTransaction=function(e){delete this.transactions[e.type][e.id],this.emit("transactionDestroyed",{transaction:e})},o.prototype.receiveRequest=function(t){function i(e){return e&&e.user===t.ruri.user}var s,r,n,o,c,h,u=t.method;if(!(i(this.configuration.uri)||i(this.contact.uri)||i(this.contact.pub_gruu)||i(this.contact.temp_gruu)))return this.logger.warn("Request-URI does not point to us"),void(t.method!==e.C.ACK&&t.reply_sl(404));if(t.ruri.scheme!==e.C.SIPS){if(!e.Transactions.checkTransaction(this,t))if(u===e.C.OPTIONS?(new e.Transactions.NonInviteServerTransaction(t,this),t.reply(200,null,["Allow: "+e.UA.C.ALLOWED_METHODS.toString(),"Accept: "+a.ACCEPTED_BODY_TYPES])):u===e.C.MESSAGE?((n=new e.ServerContext(this,t)).body=t.body,n.content_type=t.getHeader("Content-Type")||"text/plain",t.reply(200,null),this.emit("message",n)):u!==e.C.INVITE&&u!==e.C.ACK&&new e.ServerContext(this,t),t.to_tag)(s=this.findDialog(t))?(u===e.C.INVITE&&new e.Transactions.InviteServerTransaction(t,this),s.receiveRequest(t)):u===e.C.NOTIFY?(r=this.findSession(t),o=this.findEarlySubscription(t),r?r.receiveRequest(t):o?o.receiveRequest(t):(this.logger.warn("received NOTIFY request for a non existent session or subscription"),t.reply(481,"Subscription does not exist"))):u!==e.C.ACK&&t.reply(481);else switch(u){case e.C.INVITE:if(c=this.configuration.replaces!==e.C.supported.UNSUPPORTED&&t.parseHeader("replaces")){if(!(h=this.dialogs[c.call_id+c.replaces_to_tag+c.replaces_from_tag]))return void t.reply_sl(481,null);if(h.owner.status===e.Session.C.STATUS_TERMINATED)return void t.reply_sl(603,null);if(h.state===e.Dialog.C.STATUS_CONFIRMED&&c.early_only)return void t.reply_sl(486,null)}(r=new e.InviteServerContext(this,t)).replacee=h&&h.owner,this.emit("invite",r);break;case e.C.BYE:t.reply(481);break;case e.C.CANCEL:(r=this.findSession(t))?r.receiveRequest(t):this.logger.warn("received CANCEL request for a non existent session");break;case e.C.ACK:break;case e.C.NOTIFY:this.configuration.allowLegacyNotifications&&this.listeners("notify").length>0?(t.reply(200,null),this.emit("notify",{request:t})):t.reply(481,"Subscription does not exist");break;case e.C.REFER:if(this.logger.log("Received an out of dialog refer"),this.configuration.allowOutOfDialogRefers){this.logger.log("Allow out of dialog refers is enabled on the UA");var l=new e.ReferServerContext(this,t);this.listeners("outOfDialogReferRequested").length?this.emit("outOfDialogReferRequested",l):(this.logger.log("No outOfDialogReferRequest listeners, automatically accepting and following the out of dialog refer"),l.accept({followRefer:!0}));break}t.reply(405);break;default:t.reply(405)}}else t.reply_sl(416)},o.prototype.findSession=function(e){return this.sessions[e.call_id+e.from_tag]||this.sessions[e.call_id+e.to_tag]||null},o.prototype.findDialog=function(e){return this.dialogs[e.call_id+e.from_tag+e.to_tag]||this.dialogs[e.call_id+e.to_tag+e.from_tag]||null},o.prototype.findEarlySubscription=function(e){return this.earlySubscriptions[e.call_id+e.to_tag+e.getHeader("event")]||null},o.prototype.getNextWsServer=function(){var t,i,s,r=[];for(i=this.configuration.wsServers.length,t=0;t<i;t++)(s=this.configuration.wsServers[t]).status!==e.Transport.C.STATUS_ERROR&&(0===r.length?r.push(s):s.weight>r[0].weight?r=[s]:s.weight===r[0].weight&&r.push(s));return t=Math.floor(Math.random()*r.length),r[t]},o.prototype.closeSessionsOnTransportError=function(){var e;for(e in this.sessions)this.sessions[e].onTransportError();this.registerContext.onTransportClosed()},o.prototype.recoverTransport=function(t){var i,s,r,n,o;for(n=(t=t||this).transportRecoverAttempts,s=t.configuration.wsServers.length,i=0;i<s;i++)t.configuration.wsServers[i].status=0;o=t.getNextWsServer(),(r=Math.floor(Math.random()*Math.pow(2,n)+1)*t.configuration.connectionRecoveryMinInterval)>t.configuration.connectionRecoveryMaxInterval&&(this.logger.log("time for next connection attempt exceeds connectionRecoveryMaxInterval, resetting counter"),r=t.configuration.connectionRecoveryMinInterval,n=0),this.logger.log("next connection attempt in "+r+" seconds"),this.transportRecoveryTimer=e.Timers.setTimeout(function(){t.transportRecoverAttempts=n+1,new e.Transport(t,o)},1e3*r)},o.prototype.loadConfig=function(t){function s(e,i){var s=e.replace(/([a-z][A-Z])/g,function(e){return e[0]+"_"+e[1].toLowerCase()});if(e!==s){var r=t.hasOwnProperty(e);t.hasOwnProperty(s)&&(i.warn(s+" is deprecated, please use "+e),r&&i.warn(e+" overriding "+s)),t[e]=r?t[e]:t[s]}}var r,o,a,c,h,u={viaHost:e.Utils.createRandomToken(12)+".invalid",uri:new e.URI("sip","anonymous."+e.Utils.createRandomToken(6),"anonymous.invalid",null,null),wsServers:[{scheme:"WSS",sip_uri:"<sip:edge.sip.onsip.com;transport=ws;lr>",status:0,weight:0,ws_uri:"wss://edge.sip.onsip.com"}],custom:{},displayName:"",password:null,registerExpires:600,register:!0,registrarServer:null,wsServerMaxReconnection:3,wsServerReconnectionTimeout:4,connectionRecoveryMinInterval:2,connectionRecoveryMaxInterval:30,keepAliveInterval:0,extraSupported:[],usePreloadedRoute:!1,userAgentString:e.C.USER_AGENT,noAnswerTimeout:60,traceSip:!1,hackViaTcp:!1,hackIpInContact:!1,hackWssInTransport:!1,hackAllowUnregisteredOptionTags:!1,sessionDescriptionHandlerFactoryOptions:{constraints:{},peerConnectionOptions:{}},contactName:e.Utils.createRandomToken(8),contactTransport:"ws",forceRport:!1,autostart:!0,autostop:!0,rel100:e.C.supported.UNSUPPORTED,replaces:e.C.supported.UNSUPPORTED,sessionDescriptionHandlerFactory:i(27)(e).defaultFactory,authenticationFactory:n(function(t){return new e.DigestAuthentication(t)}),allowLegacyNotifications:!1,allowOutOfDialogRefers:!1},l=this.getConfigurationCheck();for(r in l.mandatory){if(s(r,this.logger),!t.hasOwnProperty(r))throw new e.Exceptions.ConfigurationError(r);if(o=t[r],void 0===(a=l.mandatory[r](o)))throw new e.Exceptions.ConfigurationError(r,o);u[r]=a}for(r in l.optional)if(s(r,this.logger),t.hasOwnProperty(r)){if((o=t[r])instanceof Array&&0===o.length)continue;if(null===o||""===o||void 0===o)continue;if("number"==typeof o&&isNaN(o))continue;if(void 0===(a=l.optional[r](o)))throw new e.Exceptions.ConfigurationError(r,o);u[r]=a}if(u.connectionRecoveryMaxInterval<u.connectionRecoveryMinInterval)throw new e.Exceptions.ConfigurationError("connectionRecoveryMaxInterval",u.connectionRecoveryMaxInterval);0===u.displayName&&(u.displayName="0"),u.instanceId||(u.instanceId=e.Utils.newUUID()),u.sipjsId=e.Utils.createRandomToken(5),(c=u.uri.clone()).user=null,u.hostportParams=c.toRaw().replace(/^sip:/i,""),u.authorizationUser||(u.authorizationUser=u.uri.user),u.registrarServer||((h=u.uri.clone()).user=null,u.registrarServer=h),u.noAnswerTimeout=1e3*u.noAnswerTimeout,u.hackIpInContact&&("boolean"==typeof u.hackIpInContact?u.viaHost=e.Utils.getRandomTestNetIP():"string"==typeof u.hackIpInContact&&(u.viaHost=u.hackIpInContact)),u.hackWssInTransport&&(u.contactTransport="wss"),this.contact={pub_gruu:null,temp_gruu:null,uri:new e.URI("sip",u.contactName,u.viaHost,null,{transport:u.contactTransport}),toString:function(e){var t=(e=e||{}).anonymous||null,i=e.outbound||null,s="<";return s+=t?(this.temp_gruu||"sip:anonymous@anonymous.invalid;transport="+u.contactTransport).toString():(this.pub_gruu||this.uri).toString(),i&&(s+=";ob"),s+=">"}};var d={};for(r in u)d[r]={value:u[r],writable:"register"===r||"custom"===r,configurable:!1};Object.defineProperties(this.configuration,d),this.logger.log("configuration parameters after validation:");for(r in u)switch(r){case"uri":case"registrarServer":case"sessionDescriptionHandlerFactory":this.logger.log("\\xb7 "+r+": "+u[r]);break;case"password":this.logger.log("\\xb7 "+r+": NOT SHOWN");break;default:this.logger.log("\\xb7 "+r+": "+JSON.stringify(u[r]))}},o.prototype.getConfigurationCheck=function(){return{mandatory:{},optional:{uri:function(t){var i;return/^sip:/i.test(t)||(t=e.C.SIP+":"+t),(i=e.URI.parse(t))&&i.user?i:void 0},wsServers:function(t){var i,s,r;if("string"==typeof t)t=[{ws_uri:t}];else{if(!(t instanceof Array))return;for(s=t.length,i=0;i<s;i++)"string"==typeof t[i]&&(t[i]={ws_uri:t[i]})}if(0===t.length)return!1;for(s=t.length,i=0;i<s;i++){if(!t[i].ws_uri)return;if(t[i].weight&&!Number(t[i].weight))return;if(-1===(r=e.Grammar.parse(t[i].ws_uri,"absoluteURI")))return;if(["wss","ws","udp"].indexOf(r.scheme)<0)return;t[i].sip_uri="<sip:"+r.host+(r.port?":"+r.port:"")+";transport="+r.scheme.replace(/^wss$/i,"ws")+";lr>",t[i].weight||(t[i].weight=0),t[i].status=0,t[i].scheme=r.scheme.toUpperCase()}return t},authorizationUser:function(t){return-1===e.Grammar.parse(\'"\'+t+\'"\',"quoted_string")?void 0:t},connectionRecoveryMaxInterval:function(t){var i;if(e.Utils.isDecimal(t)&&(i=Number(t))>0)return i},connectionRecoveryMinInterval:function(t){var i;if(e.Utils.isDecimal(t)&&(i=Number(t))>0)return i},displayName:function(t){return-1===e.Grammar.parse(\'"\'+t+\'"\',"displayName")?void 0:t},hackViaTcp:function(e){if("boolean"==typeof e)return e},hackIpInContact:function(t){return"boolean"==typeof t?t:"string"==typeof t&&-1!==e.Grammar.parse(t,"host")?t:void 0},hackWssInTransport:function(e){if("boolean"==typeof e)return e},hackAllowUnregisteredOptionTags:function(e){if("boolean"==typeof e)return e},contactTransport:function(e){if("string"==typeof e)return e},forceRport:function(e){if("boolean"==typeof e)return e},instanceId:function(t){if("string"==typeof t)return/^uuid:/i.test(t)&&(t=t.substr(5)),-1===e.Grammar.parse(t,"uuid")?void 0:t},keepAliveInterval:function(t){var i;if(e.Utils.isDecimal(t)&&(i=Number(t))>0)return i},extraSupported:function(e){var t,i;if(e instanceof Array){for(i=e.length,t=0;t<i;t++)if("string"!=typeof e[t])return;return e}},noAnswerTimeout:function(t){var i;if(e.Utils.isDecimal(t)&&(i=Number(t))>0)return i},password:function(e){return String(e)},rel100:function(t){return t===e.C.supported.REQUIRED?e.C.supported.REQUIRED:t===e.C.supported.SUPPORTED?e.C.supported.SUPPORTED:e.C.supported.UNSUPPORTED},replaces:function(t){return t===e.C.supported.REQUIRED?e.C.supported.REQUIRED:t===e.C.supported.SUPPORTED?e.C.supported.SUPPORTED:e.C.supported.UNSUPPORTED},register:function(e){if("boolean"==typeof e)return e},registerExpires:function(t){var i;if(e.Utils.isDecimal(t)&&(i=Number(t))>0)return i},registrarServer:function(t){var i;if("string"==typeof t)return/^sip:/i.test(t)||(t=e.C.SIP+":"+t),(i=e.URI.parse(t))?i.user?void 0:i:void 0},traceSip:function(e){if("boolean"==typeof e)return e},userAgentString:function(e){if("string"==typeof e)return e},usePreloadedRoute:function(e){if("boolean"==typeof e)return e},wsServerMaxReconnection:function(t){var i;if(e.Utils.isDecimal(t)&&(i=Number(t))>0)return i},wsServerReconnectionTimeout:function(t){var i;if(e.Utils.isDecimal(t)&&(i=Number(t))>0)return i},autostart:function(e){if("boolean"==typeof e)return e},autostop:function(e){if("boolean"==typeof e)return e},sessionDescriptionHandlerFactory:function(e){if(e instanceof Function)return e},sessionDescriptionHandlerFactoryOptions:function(e){if("object"===(void 0===e?"undefined":s(e)))return e},authenticationFactory:n,allowLegacyNotifications:function(e){if("boolean"==typeof e)return e},custom:function(e){if("object"===(void 0===e?"undefined":s(e)))return e},contactName:function(e){if("string"==typeof e)return e}}}},o.C=a,e.UA=o}}).call(t,i(0))},function(e,t,i){"use strict";(function(t){e.exports=function(e){var i=function(e,i){this.options=i||{},this.logger=e.ua.getLogger("sip.invitecontext.sessionDescriptionHandler",e.id),this.session=e,this.CONTENT_TYPE="application/sdp",this.modifiers=this.options.modifiers||[],Array.isArray(this.modifiers)||(this.modifiers=[this.modifiers]);var s=t.window||t;this.WebRTC={MediaStream:s.MediaStream,getUserMedia:s.navigator.mediaDevices.getUserMedia.bind(s.navigator.mediaDevices),RTCPeerConnection:s.RTCPeerConnection,RTCSessionDescription:s.RTCSessionDescription},this.iceGatheringDeferred=null,this.iceGatheringTimeout=!1,this.iceGatheringTimer=null,this.initPeerConnection(this.options.peerConnectionOptions),this.constraints=this.checkAndDefaultConstraints(this.options.constraints),this.session.emit("SessionDescriptionHandler-created",this)};return i.defaultFactory=function(e,t){return new i(e,t)},i.prototype=Object.create(e.SessionDescriptionHandler.prototype,{close:{writable:!0,value:function(){this.logger.log("closing PeerConnection"),this.peerConnection&&"closed"!==this.peerConnection.signalingState&&(this.peerConnection.getSenders?this.peerConnection.getSenders().forEach(function(e){e.track&&e.track.stop()}):(this.logger.warn("Using getLocalStreams which is deprecated"),this.peerConnection.getLocalStreams().forEach(function(e){e.getTracks().forEach(function(e){e.stop()})})),this.peerConnection.getReceivers?this.peerConnection.getReceivers().forEach(function(e){e.track&&e.track.stop()}):(this.logger.warn("Using getRemoteStreams which is deprecated"),this.peerConnection.getRemoteStreams().forEach(function(e){e.getTracks().forEach(function(e){e.stop()})})),this.resetIceGatheringComplete(),this.peerConnection.close())}},getDescription:{writable:!0,value:function(t,i){var s=this,r=!0;if(this.session.disableRenegotiation)return this.logger.warn(\'The flag "disableRenegotiation" is set to true for this session description handler. We will not try to renegotiate.\'),e.Utils.Promise.reject(new e.Exceptions.RenegotiationError("disableRenegotiation flag set to true for this session description handler"));(t=t||{}).peerConnectionOptions&&this.initPeerConnection(t.peerConnectionOptions);var n=Object.assign({},this.constraints,t.constraints);return n=this.checkAndDefaultConstraints(n),JSON.stringify(n)!==JSON.stringify(this.constraints)?this.constraints=n:r=!1,i=i||[],Array.isArray(i)||(i=[i]),i=i.concat(this.modifiers),!r&&this.peerConnection.localDescription&&this.peerConnection.localDescription.sdp&&""!==this.peerConnection.localDescription.sdp?this.createOfferOrAnswer(t.RTCOfferOptions,i).then(function(e){return{body:e,contentType:s.CONTENT_TYPE}}):(s.logger.log("acquiring local media"),this.acquire(s.constraints).then(function(e){return s.logger.log("acquired local media streams"),e},function(e){throw s.logger.error("unable to acquire streams"),s.logger.error(e),e}).then(function(t){try{(t=[].concat(t)).forEach(function(e){s.peerConnection.addTrack?e.getTracks().forEach(function(t){s.peerConnection.addTrack(t,e)}):s.peerConnection.addStream(e)},this)}catch(t){return s.logger.error("error adding stream"),s.logger.error(t),e.Utils.Promise.reject(t)}return e.Utils.Promise.resolve()}).then(function(){return s.createOfferOrAnswer(t.RTCOfferOptions,i)}).then(function(e){return{body:e,contentType:s.CONTENT_TYPE}}).catch(function(e){throw this.session.disableRenegotiation=!0,e}))}},hasDescription:{writable:!0,value:function(e){return e===this.CONTENT_TYPE}},holdModifier:{writable:!0,value:function(t){return/a=(sendrecv|sendonly|recvonly|inactive)/.test(t.sdp)?(t.sdp=t.sdp.replace(/a=sendrecv\\r\\n/g,"a=sendonly\\r\\n"),t.sdp=t.sdp.replace(/a=recvonly\\r\\n/g,"a=inactive\\r\\n")):t.sdp=t.sdp.replace(/(m=[^\\r]*\\r\\n)/g,"$1a=sendonly\\r\\n"),e.Utils.Promise.resolve(t)}},setDescription:{writable:!0,value:function(t,i,s){var r=this,n="undefined"!=typeof InstallTrigger;if(!this.session.disableRenegotiation&&n&&this.peerConnection&&this.isVideoHold(t)&&(this.session.disableRenegotiation=!0),this.session.disableRenegotiation)return this.logger.warn(\'The flag "disableRenegotiation" is set to true for this session description handler. We will not try to renegotiate.\'),e.Utils.Promise.reject(new e.Exceptions.RenegotiationError("disableRenegotiation flag set to true for this session description handler"));(i=i||{}).peerConnectionOptions&&this.initPeerConnection(i.peerConnectionOptions),this.constraints=Object.assign({},this.constraints,i.constraints),this.constraints=this.checkAndDefaultConstraints(this.constraints),s=s||[],Array.isArray(s)||(s=[s]),s=s.concat(this.modifiers);var o={type:this.hasOffer("local")?"answer":"offer",sdp:t};return e.Utils.reducePromises(s,o).catch(function(e){throw r.logger.error("The modifiers did not resolve successfully"),r.logger.error(e),e}).then(function(e){return r.emit("setDescription",e),r.peerConnection.setRemoteDescription(new r.WebRTC.RTCSessionDescription(e))}).catch(function(e){throw r.session.disableRenegotiation=!0,r.logger.error(e),r.emit("peerConnection-setRemoteDescriptionFailed",e),e}).then(function(){r.peerConnection.getReceivers?r.emit("setRemoteDescription",r.peerConnection.getReceivers()):r.emit("setRemoteDescription",r.peerConnection.getRemoteStreams()),r.emit("confirmed",r)})}},createOfferOrAnswer:{writable:!0,value:function(t,i){var s,r=this,n=this.peerConnection;return t=t||{},s=r.hasOffer("remote")?"createAnswer":"createOffer",n[s](t).catch(function(e){throw r.emit("peerConnection-"+s+"Failed",e),e}).then(function(t){return e.Utils.reducePromises(i,t)}).then(function(e){return r.logger.log(e),n.setLocalDescription(e)}).catch(function(e){throw r.emit("peerConnection-SetLocalDescriptionFailed",e),e}).then(function(){return r.waitForIceGatheringComplete()}).then(function(){var t=r.peerConnection.localDescription;return e.Utils.reducePromises(i,t)}).then(function(e){return r.emit("getDescription",e),e.sdp}).catch(function(t){throw r.logger.error(t),new e.Exceptions.GetDescriptionError(t)})}},addDefaultIceCheckingTimeout:{writable:!0,value:function(e){return void 0===e.iceCheckingTimeout&&(e.iceCheckingTimeout=5e3),e}},addDefaultIceServers:{writable:!0,value:function(e){return e.iceServers||(e.iceServers=[{urls:"stun:stun.l.google.com:19302"}]),e}},checkAndDefaultConstraints:{writable:!0,value:function(e){var t={audio:!0,video:!0};return e=e||t,0===Object.keys(e).length&&e.constructor===Object?t:e}},initPeerConnection:{writable:!0,value:function(t){var i=this;t=t||{},(t=this.addDefaultIceCheckingTimeout(t)).rtcConfiguration=t.rtcConfiguration||{},t.rtcConfiguration=this.addDefaultIceServers(t.rtcConfiguration),this.logger.log("initPeerConnection"),this.peerConnection&&(this.logger.log("Already have a peer connection for this session. Tearing down."),this.resetIceGatheringComplete(),this.peerConnection.close()),this.peerConnection=new this.WebRTC.RTCPeerConnection(t.rtcConfiguration),this.logger.log("New peer connection created"),this.session.emit("peerConnection-created",this.peerConnection),this.peerConnection.ontrack=function(e){i.logger.log("track added"),i.emit("addTrack",e)},this.peerConnection.onaddstream=function(e){i.logger.warn("Using deprecated stream API"),i.logger.log("stream added"),i.emit("addStream",e)},this.peerConnection.onremovestream=function(e){i.logger.log("stream removed: "+e.stream.id)},this.peerConnection.onicecandidate=function(e){i.emit("iceCandidate",e),e.candidate&&i.logger.log("ICE candidate received: "+(null===e.candidate.candidate?null:e.candidate.candidate.trim()))},this.peerConnection.onicegatheringstatechange=function(){switch(i.logger.log("RTCIceGatheringState changed: "+this.iceGatheringState),this.iceGatheringState){case"gathering":i.emit("iceGathering",this),!i.iceGatheringTimer&&t.iceCheckingTimeout&&(i.iceGatheringTimeout=!1,i.iceGatheringTimer=e.Timers.setTimeout(function(){i.logger.log("RTCIceChecking Timeout Triggered after "+t.iceCheckingTimeout+" milliseconds"),i.iceGatheringTimeout=!0,i.triggerIceGatheringComplete()},t.iceCheckingTimeout));break;case"complete":i.triggerIceGatheringComplete()}},this.peerConnection.oniceconnectionstatechange=function(){var e;switch(this.iceConnectionState){case"new":e="iceConnection";break;case"checking":e="iceConnectionChecking";break;case"connected":e="iceConnectionConnected";break;case"completed":e="iceConnectionCompleted";break;case"failed":e="iceConnectionFailed";break;case"disconnected":e="iceConnectionDisconnected";break;case"closed":e="iceConnectionClosed";break;default:return void i.logger.warn("Unknown iceConnection state:",this.iceConnectionState)}i.emit(e,this)}}},acquire:{writable:!0,value:function(t){return t=this.checkAndDefaultConstraints(t),new e.Utils.Promise(function(e,i){this.emit("userMediaRequest",t);var s=function(e,t){var i=Array.prototype.slice.call(arguments,2),s=[e].concat(i);return this.emit.apply(this,s),t.apply(null,i)}.bind(this);t.audio||t.video?this.WebRTC.getUserMedia(t).then(s.bind(this,"userMedia",function(t){e(t)}),s.bind(this,"userMediaFailed",function(e){throw i(e),e})):e([])}.bind(this))}},isVideoHold:{writable:!0,value:function(e){return-1!==e.search(/^(m=video.*?)[\\s\\S]*^(a=sendonly?)/gm)}},hasOffer:{writable:!0,value:function(e){var t="have-"+e+"-offer";return this.peerConnection.signalingState===t}},isIceGatheringComplete:{writable:!0,value:function(){return"complete"===this.peerConnection.iceGatheringState||this.iceGatheringTimeout}},resetIceGatheringComplete:{writable:!0,value:function(){this.iceGatheringTimeout=!1,this.iceGatheringTimer&&(e.Timers.clearTimeout(this.iceGatheringTimer),this.iceGatheringTimer=null),this.iceGatheringDeferred&&(this.iceGatheringDeferred.reject(),this.iceGatheringDeferred=null)}},triggerIceGatheringComplete:{writable:!0,value:function(){this.isIceGatheringComplete()&&(this.emit("iceGatheringComplete",this),this.iceGatheringTimer&&(e.Timers.clearTimeout(this.iceGatheringTimer),this.iceGatheringTimer=null),this.iceGatheringDeferred&&(this.iceGatheringDeferred.resolve(),this.iceGatheringDeferred=null))}},waitForIceGatheringComplete:{writable:!0,value:function(){return this.isIceGatheringComplete()?e.Utils.Promise.resolve():(this.isIceGatheringDeferred||(this.iceGatheringDeferred=e.Utils.defer()),this.iceGatheringDeferred.promise)}}}),i}}).call(t,i(0))},function(e,t,i){"use strict";e.exports=function(e){function t(t,i,s){for(var r,n=e.Utils.buildStatusLine(t),o=i.getHeaders("via"),a=o.length,c=0;c<a;c++)n+="Via: "+o[c]+"\\r\\n";r=i.getHeader("To"),i.to_tag||(r+=";tag="+e.Utils.newTag()),n+="To: "+r+"\\r\\n",n+="From: "+i.getHeader("From")+"\\r\\n",n+="Call-ID: "+i.call_id+"\\r\\n",n+="CSeq: "+i.cseq+" "+i.method+"\\r\\n",n+="\\r\\n",s.send(n)}var i,s=[],r=[],n=[];s.push(function(e,i,s){if(!e.ruri||"sip"!==e.ruri.scheme)return t(416,e,s),!1}),s.push(function(e,i,s){if(!e.to_tag&&e.call_id.substr(0,5)===i.configuration.sipjsId)return t(482,e,s),!1}),s.push(function(i,s,r){if(e.Utils.str_utf8_length(i.body)<i.getHeader("content-length"))return t(400,i,r),!1}),s.push(function(i,s,r){var n,o,a=i.from_tag,c=i.call_id,h=i.cseq;if(!i.to_tag)if(i.method===e.C.INVITE){if(n=s.transactions.ist[i.via_branch])return;for(o in s.transactions.ist)if((n=s.transactions.ist[o]).request.from_tag===a&&n.request.call_id===c&&n.request.cseq===h)return t(482,i,r),!1}else{if(n=s.transactions.nist[i.via_branch])return;for(o in s.transactions.nist)if((n=s.transactions.nist[o]).request.from_tag===a&&n.request.call_id===c&&n.request.cseq===h)return t(482,i,r),!1}}),r.push(function(e,t){if(e.getHeaders("via").length>1)return t.getLogger("sip.sanitycheck").warn("More than one Via header field present in the response. Dropping the response"),!1}),r.push(function(e,t){var i=t.configuration.viaHost;if(e.via.host!==i||void 0!==e.via.port)return t.getLogger("sip.sanitycheck").warn("Via sent-by in the response does not match UA Via host value. Dropping the response"),!1}),r.push(function(t,i){if(e.Utils.str_utf8_length(t.body)<t.getHeader("content-length"))return i.getLogger("sip.sanitycheck").warn("Message body length is lower than the value in Content-Length header field. Dropping the response"),!1}),n.push(function(e,t){for(var i=["from","to","call_id","cseq","via"],s=i.length;s--;)if(!e.hasHeader(i[s]))return t.getLogger("sip.sanitycheck").warn("Missing mandatory header field : "+i[s]+". Dropping the response"),!1}),i=function(t,i,o){var a;for(a=n.length;a--;)if(!1===n[a](t,i,o))return!1;if(t instanceof e.IncomingRequest){for(a=s.length;a--;)if(!1===s[a](t,i,o))return!1}else if(t instanceof e.IncomingResponse)for(a=r.length;a--;)if(!1===r[a](t,i,o))return!1;return!0},e.sanityCheck=i}},function(e,t,i){"use strict";e.exports=function(e){var t;return t=function(e){this.logger=e.getLogger("sipjs.digestauthentication"),this.username=e.configuration.authorizationUser,this.password=e.configuration.password,this.cnonce=null,this.nc=0,this.ncHex="00000000",this.response=null},t.prototype.authenticate=function(t,i){if(this.algorithm=i.algorithm,this.realm=i.realm,this.nonce=i.nonce,this.opaque=i.opaque,this.stale=i.stale,this.algorithm){if("MD5"!==this.algorithm)return this.logger.warn(\'challenge with Digest algorithm different than "MD5", authentication aborted\'),!1}else this.algorithm="MD5";if(!this.realm)return this.logger.warn("challenge without Digest realm, authentication aborted"),!1;if(!this.nonce)return this.logger.warn("challenge without Digest nonce, authentication aborted"),!1;if(i.qop)if(i.qop.indexOf("auth")>-1)this.qop="auth";else{if(!(i.qop.indexOf("auth-int")>-1))return this.logger.warn(\'challenge without Digest qop different than "auth" or "auth-int", authentication aborted\'),!1;this.qop="auth-int"}else this.qop=null;return this.method=t.method,this.uri=t.ruri,this.cnonce=e.createRandomToken(12),this.nc+=1,this.updateNcHex(),4294967296===this.nc&&(this.nc=1,this.ncHex="00000001"),this.calculateResponse(),!0},t.prototype.calculateResponse=function(){var t,i;t=e.calculateMD5(this.username+":"+this.realm+":"+this.password),"auth"===this.qop?(i=e.calculateMD5(this.method+":"+this.uri),this.response=e.calculateMD5(t+":"+this.nonce+":"+this.ncHex+":"+this.cnonce+":auth:"+i)):"auth-int"===this.qop?(i=e.calculateMD5(this.method+":"+this.uri+":"+e.calculateMD5(this.body?this.body:"")),this.response=e.calculateMD5(t+":"+this.nonce+":"+this.ncHex+":"+this.cnonce+":auth-int:"+i)):null===this.qop&&(i=e.calculateMD5(this.method+":"+this.uri),this.response=e.calculateMD5(t+":"+this.nonce+":"+i))},t.prototype.toString=function(){var e=[];if(!this.response)throw new Error("response field does not exist, cannot generate Authorization header");return e.push("algorithm="+this.algorithm),e.push(\'username="\'+this.username+\'"\'),e.push(\'realm="\'+this.realm+\'"\'),e.push(\'nonce="\'+this.nonce+\'"\'),e.push(\'uri="\'+this.uri+\'"\'),e.push(\'response="\'+this.response+\'"\'),this.opaque&&e.push(\'opaque="\'+this.opaque+\'"\'),this.qop&&(e.push("qop="+this.qop),e.push(\'cnonce="\'+this.cnonce+\'"\'),e.push("nc="+this.ncHex)),"Digest "+e.join(", ")},t.prototype.updateNcHex=function(){var e=Number(this.nc).toString(16);this.ncHex="00000000".substr(0,8-e.length)+e},t}},function(e,t,i){"use strict";var s=i(31);e.exports=function(e){return{parse:function(t,i){var r={startRule:i,SIP:e};try{s.parse(t,r)}catch(e){r.data=-1}return r.data}}}},function(e,t,i){"use strict";function s(e,t,i,r){this.message=e,this.expected=t,this.found=i,this.location=r,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,s)}!function(e,t){function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i}(s,Error),s.buildMessage=function(e,t){function i(e){return e.charCodeAt(0).toString(16).toUpperCase()}function s(e){return e.replace(/\\\\/g,"\\\\\\\\").replace(/"/g,\'\\\\"\').replace(/\\0/g,"\\\\0").replace(/\\t/g,"\\\\t").replace(/\\n/g,"\\\\n").replace(/\\r/g,"\\\\r").replace(/[\\x00-\\x0F]/g,function(e){return"\\\\x0"+i(e)}).replace(/[\\x10-\\x1F\\x7F-\\x9F]/g,function(e){return"\\\\x"+i(e)})}function r(e){return e.replace(/\\\\/g,"\\\\\\\\").replace(/\\]/g,"\\\\]").replace(/\\^/g,"\\\\^").replace(/-/g,"\\\\-").replace(/\\0/g,"\\\\0").replace(/\\t/g,"\\\\t").replace(/\\n/g,"\\\\n").replace(/\\r/g,"\\\\r").replace(/[\\x00-\\x0F]/g,function(e){return"\\\\x0"+i(e)}).replace(/[\\x10-\\x1F\\x7F-\\x9F]/g,function(e){return"\\\\x"+i(e)})}function n(e){return o[e.type](e)}var o={literal:function(e){return\'"\'+s(e.text)+\'"\'},class:function(e){var t,i="";for(t=0;t<e.parts.length;t++)i+=e.parts[t]instanceof Array?r(e.parts[t][0])+"-"+r(e.parts[t][1]):r(e.parts[t]);return"["+(e.inverted?"^":"")+i+"]"},any:function(e){return"any character"},end:function(e){return"end of input"},other:function(e){return e.description}};return"Expected "+function(e){var t,i,s=new Array(e.length);for(t=0;t<e.length;t++)s[t]=n(e[t]);if(s.sort(),s.length>0){for(t=1,i=1;t<s.length;t++)s[t-1]!==s[t]&&(s[i]=s[t],i++);s.length=i}switch(s.length){case 1:return s[0];case 2:return s[0]+" or "+s[1];default:return s.slice(0,-1).join(", ")+", or "+s[s.length-1]}}(e)+" but "+function(e){return e?\'"\'+s(e)+\'"\':"end of input"}(t)+" found."},e.exports={SyntaxError:s,parse:function(e,t){function i(){return e.substring(S,E)}function r(){return c(S,E)}function n(e,t){return{type:"literal",text:e,ignoreCase:t}}function o(e,t,i){return{type:"class",parts:e,inverted:t,ignoreCase:i}}function a(t){var i,s=C[t];if(s)return s;for(i=t-1;!C[i];)i--;for(s={line:(s=C[i]).line,column:s.column};i<t;)10===e.charCodeAt(i)?(s.line++,s.column=1):s.column++,i++;return C[t]=s,s}function c(e,t){var i=a(e),s=a(t);return{start:{offset:e,line:i.line,column:i.column},end:{offset:t,line:s.line,column:s.column}}}function h(e){E<R||(E>R&&(R=E,v=[]),v.push(e))}function u(e,t,i){return new s(s.buildMessage(e,t),e,t,i)}function l(e){var t,i=new Array(e.length);for(t=0;t<e.length;t++)i[t]=e.charCodeAt(t)-32;return i}function d(t){for(var i,s,r=_[t],n=0,o=[],a=r.length,c=[],u=[];;){for(;n<a;)switch(r[n]){case 0:u.push(m[r[n+1]]),n+=2;break;case 1:u.push(void 0),n++;break;case 2:u.push(null),n++;break;case 3:u.push(g),n++;break;case 4:u.push([]),n++;break;case 5:u.push(E),n++;break;case 6:u.pop(),n++;break;case 7:E=u.pop(),n++;break;case 8:u.length-=r[n+1],n+=2;break;case 9:u.splice(-2,1),n++;break;case 10:u[u.length-2].push(u.pop()),n++;break;case 11:u.push(u.splice(u.length-r[n+1],r[n+1])),n+=2;break;case 12:u.push(e.substring(u.pop(),E)),n++;break;case 13:c.push(a),o.push(n+3+r[n+1]+r[n+2]),u[u.length-1]?(a=n+3+r[n+1],n+=3):(a=n+3+r[n+1]+r[n+2],n+=3+r[n+1]);break;case 14:c.push(a),o.push(n+3+r[n+1]+r[n+2]),u[u.length-1]===g?(a=n+3+r[n+1],n+=3):(a=n+3+r[n+1]+r[n+2],n+=3+r[n+1]);break;case 15:c.push(a),o.push(n+3+r[n+1]+r[n+2]),u[u.length-1]!==g?(a=n+3+r[n+1],n+=3):(a=n+3+r[n+1]+r[n+2],n+=3+r[n+1]);break;case 16:u[u.length-1]!==g?(c.push(a),o.push(n),a=n+2+r[n+1],n+=2):n+=2+r[n+1];break;case 17:c.push(a),o.push(n+3+r[n+1]+r[n+2]),e.length>E?(a=n+3+r[n+1],n+=3):(a=n+3+r[n+1]+r[n+2],n+=3+r[n+1]);break;case 18:c.push(a),o.push(n+4+r[n+2]+r[n+3]),e.substr(E,m[r[n+1]].length)===m[r[n+1]]?(a=n+4+r[n+2],n+=4):(a=n+4+r[n+2]+r[n+3],n+=4+r[n+2]);break;case 19:c.push(a),o.push(n+4+r[n+2]+r[n+3]),e.substr(E,m[r[n+1]].length).toLowerCase()===m[r[n+1]]?(a=n+4+r[n+2],n+=4):(a=n+4+r[n+2]+r[n+3],n+=4+r[n+2]);break;case 20:c.push(a),o.push(n+4+r[n+2]+r[n+3]),m[r[n+1]].test(e.charAt(E))?(a=n+4+r[n+2],n+=4):(a=n+4+r[n+2]+r[n+3],n+=4+r[n+2]);break;case 21:u.push(e.substr(E,r[n+1])),E+=r[n+1],n+=2;break;case 22:u.push(m[r[n+1]]),E+=m[r[n+1]].length,n+=2;break;case 23:u.push(g),0===A&&h(m[r[n+1]]),n+=2;break;case 24:S=u[u.length-1-r[n+1]],n+=2;break;case 25:S=E,n++;break;case 26:for(i=r.slice(n+4,n+4+r[n+3]),s=0;s<r[n+3];s++)i[s]=u[u.length-1-i[s]];u.splice(u.length-r[n+2],r[n+2],m[r[n+1]].apply(null,i)),n+=4+r[n+3];break;case 27:u.push(d(r[n+1])),n+=2;break;case 28:A++,n++;break;case 29:A--,n++;break;default:throw new Error("Invalid opcode: "+r[n]+".")}if(!(c.length>0))break;a=c.pop(),n=o.pop()}return u[0]}t=void 0!==t?t:{};var p,g={},f={Contact:118,Name_Addr_Header:155,Record_Route:175,Request_Response:81,SIP_URI:45,Subscription_State:185,Supported:190,Require:181,Via:193,absoluteURI:84,Call_ID:117,Content_Disposition:129,Content_Length:134,Content_Type:135,CSeq:145,displayName:121,Event:148,From:150,host:52,Max_Forwards:153,Min_SE:212,Proxy_Authenticate:156,quoted_string:40,Refer_To:177,Replaces:178,Session_Expires:209,stun_URI:216,To:191,turn_URI:222,uuid:225,WWW_Authenticate:208,challenge:157,sipfrag:229,Referred_By:230},T=118,m=["\\r\\n",n("\\r\\n",!1),/^[0-9]/,o([["0","9"]],!1,!1),/^[a-zA-Z]/,o([["a","z"],["A","Z"]],!1,!1),/^[0-9a-fA-F]/,o([["0","9"],["a","f"],["A","F"]],!1,!1),/^[\\0-\\xFF]/,o([["\\0","\\xff"]],!1,!1),/^["]/,o([\'"\'],!1,!1)," ",n(" ",!1),"\\t",n("\\t",!1),/^[a-zA-Z0-9]/,o([["a","z"],["A","Z"],["0","9"]],!1,!1),";",n(";",!1),"/",n("/",!1),"?",n("?",!1),":",n(":",!1),"@",n("@",!1),"&",n("&",!1),"=",n("=",!1),"+",n("+",!1),"$",n("$",!1),",",n(",",!1),"-",n("-",!1),"_",n("_",!1),".",n(".",!1),"!",n("!",!1),"~",n("~",!1),"*",n("*",!1),"\'",n("\'",!1),"(",n("(",!1),")",n(")",!1),"%",n("%",!1),function(){return" "},function(){return":"},/^[!-~]/,o([["!","~"]],!1,!1),/^[\\x80-\\uFFFF]/,o([["\\x80","\\uffff"]],!1,!1),/^[\\x80-\\xBF]/,o([["\\x80","\\xbf"]],!1,!1),/^[a-f]/,o([["a","f"]],!1,!1),"`",n("`",!1),"<",n("<",!1),">",n(">",!1),"\\\\",n("\\\\",!1),"[",n("[",!1),"]",n("]",!1),"{",n("{",!1),"}",n("}",!1),function(){return"*"},function(){return"/"},function(){return"="},function(){return"("},function(){return")"},function(){return">"},function(){return"<"},function(){return","},function(){return";"},function(){return":"},function(){return\'"\'},/^[!-\']/,o([["!","\'"]],!1,!1),/^[*-[]/,o([["*","["]],!1,!1),/^[\\]-~]/,o([["]","~"]],!1,!1),function(e){return e},/^[#-[]/,o([["#","["]],!1,!1),/^[\\0-\\t]/,o([["\\0","\\t"]],!1,!1),/^[\\x0B-\\f]/,o([["\\v","\\f"]],!1,!1),/^[\\x0E-\\x7F]/,o([["\\x0e","\\x7f"]],!1,!1),function(){t.data.uri=new t.SIP.URI(t.data.scheme,t.data.user,t.data.host,t.data.port),delete t.data.scheme,delete t.data.user,delete t.data.host,delete t.data.host_type,delete t.data.port},function(){t.data.uri=new t.SIP.URI(t.data.scheme,t.data.user,t.data.host,t.data.port,t.data.uri_params,t.data.uri_headers),delete t.data.scheme,delete t.data.user,delete t.data.host,delete t.data.host_type,delete t.data.port,delete t.data.uri_params,"SIP_URI"===t.startRule&&(t.data=t.data.uri)},"sips",n("sips",!0),"sip",n("sip",!0),function(e){t.data.scheme=e},function(){t.data.user=decodeURIComponent(i().slice(0,-1))},function(){t.data.password=i()},function(){return t.data.host=i(),t.data.host},function(){return t.data.host_type="domain",i()},/^[a-zA-Z0-9_\\-]/,o([["a","z"],["A","Z"],["0","9"],"_","-"],!1,!1),/^[a-zA-Z0-9\\-]/,o([["a","z"],["A","Z"],["0","9"],"-"],!1,!1),function(){return t.data.host_type="IPv6",i()},"::",n("::",!1),function(){return t.data.host_type="IPv6",i()},function(){return t.data.host_type="IPv4",i()},"25",n("25",!1),/^[0-5]/,o([["0","5"]],!1,!1),"2",n("2",!1),/^[0-4]/,o([["0","4"]],!1,!1),"1",n("1",!1),/^[1-9]/,o([["1","9"]],!1,!1),function(e){return e=parseInt(e.join("")),t.data.port=e,e},"transport=",n("transport=",!0),"udp",n("udp",!0),"tcp",n("tcp",!0),"sctp",n("sctp",!0),"tls",n("tls",!0),function(e){t.data.uri_params||(t.data.uri_params={}),t.data.uri_params.transport=e.toLowerCase()},"user=",n("user=",!0),"phone",n("phone",!0),"ip",n("ip",!0),function(e){t.data.uri_params||(t.data.uri_params={}),t.data.uri_params.user=e.toLowerCase()},"method=",n("method=",!0),function(e){t.data.uri_params||(t.data.uri_params={}),t.data.uri_params.method=e},"ttl=",n("ttl=",!0),function(e){t.data.params||(t.data.params={}),t.data.params.ttl=e},"maddr=",n("maddr=",!0),function(e){t.data.uri_params||(t.data.uri_params={}),t.data.uri_params.maddr=e},"lr",n("lr",!0),function(){t.data.uri_params||(t.data.uri_params={}),t.data.uri_params.lr=void 0},function(e,i){t.data.uri_params||(t.data.uri_params={}),i=null===i?void 0:i[1],t.data.uri_params[e.toLowerCase()]=i&&i.toLowerCase()},function(e,i){e=e.join("").toLowerCase(),i=i.join(""),t.data.uri_headers||(t.data.uri_headers={}),t.data.uri_headers[e]?t.data.uri_headers[e].push(i):t.data.uri_headers[e]=[i]},function(){"Refer_To"===t.startRule&&(t.data.uri=new t.SIP.URI(t.data.scheme,t.data.user,t.data.host,t.data.port,t.data.uri_params,t.data.uri_headers),delete t.data.scheme,delete t.data.user,delete t.data.host,delete t.data.host_type,delete t.data.port,delete t.data.uri_params)},"//",n("//",!1),function(){t.data.scheme=i()},n("SIP",!0),function(){t.data.sip_version=i()},"INVITE",n("INVITE",!1),"ACK",n("ACK",!1),"VXACH",n("VXACH",!1),"OPTIONS",n("OPTIONS",!1),"BYE",n("BYE",!1),"CANCEL",n("CANCEL",!1),"REGISTER",n("REGISTER",!1),"SUBSCRIBE",n("SUBSCRIBE",!1),"NOTIFY",n("NOTIFY",!1),"REFER",n("REFER",!1),function(){return t.data.method=i(),t.data.method},function(e){t.data.status_code=parseInt(e.join(""))},function(){t.data.reason_phrase=i()},function(){t.data=i()},function(){var e,i;for(i=t.data.multi_header.length,e=0;e<i;e++)if(null===t.data.multi_header[e].parsed){t.data=null;break}null!==t.data?t.data=t.data.multi_header:t.data=-1},function(){var e;t.data.multi_header||(t.data.multi_header=[]);try{e=new t.SIP.NameAddrHeader(t.data.uri,t.data.displayName,t.data.params),delete t.data.uri,delete t.data.displayName,delete t.data.params}catch(t){e=null}t.data.multi_header.push({position:E,offset:r().start.offset,parsed:e})},function(e){\'"\'===(e=i().trim())[0]&&(e=e.substring(1,e.length-1)),t.data.displayName=e},"q",n("q",!0),function(e){t.data.params||(t.data.params={}),t.data.params.q=e},"expires",n("expires",!0),function(e){t.data.params||(t.data.params={}),t.data.params.expires=e},function(e){return parseInt(e.join(""))},"0",n("0",!1),function(){return parseFloat(i())},function(e,i){t.data.params||(t.data.params={}),i=null===i?void 0:i[1],t.data.params[e.toLowerCase()]=i},"render",n("render",!0),"session",n("session",!0),"icon",n("icon",!0),"alert",n("alert",!0),function(){"Content_Disposition"===t.startRule&&(t.data.type=i().toLowerCase())},"handling",n("handling",!0),"optional",n("optional",!0),"required",n("required",!0),function(e){t.data=parseInt(e.join(""))},function(){t.data=i()},"text",n("text",!0),"image",n("image",!0),"audio",n("audio",!0),"video",n("video",!0),"application",n("application",!0),"message",n("message",!0),"multipart",n("multipart",!0),"x-",n("x-",!0),function(e){t.data.value=parseInt(e.join(""))},function(e){t.data=e},function(e){t.data.event=e.toLowerCase()},function(){var e=t.data.tag;t.data=new t.SIP.NameAddrHeader(t.data.uri,t.data.displayName,t.data.params),e&&t.data.setParam("tag",e)},"tag",n("tag",!0),function(e){t.data.tag=e},function(e){t.data=parseInt(e.join(""))},function(e){t.data=e},function(){t.data=new t.SIP.NameAddrHeader(t.data.uri,t.data.displayName,t.data.params)},"digest",n("Digest",!0),"realm",n("realm",!0),function(e){t.data.realm=e},"domain",n("domain",!0),"nonce",n("nonce",!0),function(e){t.data.nonce=e},"opaque",n("opaque",!0),function(e){t.data.opaque=e},"stale",n("stale",!0),"true",n("true",!0),function(){t.data.stale=!0},"false",n("false",!0),function(){t.data.stale=!1},"algorithm",n("algorithm",!0),"md5",n("MD5",!0),"md5-sess",n("MD5-sess",!0),function(e){t.data.algorithm=e.toUpperCase()},"qop",n("qop",!0),"auth-int",n("auth-int",!0),"auth",n("auth",!0),function(e){t.data.qop||(t.data.qop=[]),t.data.qop.push(e.toLowerCase())},function(e){t.data.value=parseInt(e.join(""))},function(){var e,i;for(i=t.data.multi_header.length,e=0;e<i;e++)if(null===t.data.multi_header[e].parsed){t.data=null;break}null!==t.data?t.data=t.data.multi_header:t.data=-1},function(){var e;t.data.multi_header||(t.data.multi_header=[]);try{e=new t.SIP.NameAddrHeader(t.data.uri,t.data.displayName,t.data.params),delete t.data.uri,delete t.data.displayName,delete t.data.params}catch(t){e=null}t.data.multi_header.push({position:E,offset:r().start.offset,parsed:e})},function(){t.data=new t.SIP.NameAddrHeader(t.data.uri,t.data.displayName,t.data.params)},function(){t.data.replaces_from_tag&&t.data.replaces_to_tag||(t.data=-1)},function(){t.data={call_id:t.data}},"from-tag",n("from-tag",!0),function(e){t.data.replaces_from_tag=e},"to-tag",n("to-tag",!0),function(e){t.data.replaces_to_tag=e},"early-only",n("early-only",!0),function(){t.data.early_only=!0},function(e,t){return t},function(e,t){return function(e,t){return[e].concat(t)}(e,t)},function(e){"Require"===t.startRule&&(t.data=e||[])},function(e){t.data.value=parseInt(e.join(""))},"active",n("active",!0),"pending",n("pending",!0),"terminated",n("terminated",!0),function(){t.data.state=i()},"reason",n("reason",!0),function(e){void 0!==e&&(t.data.reason=e)},function(e){void 0!==e&&(t.data.expires=e)},"retry_after",n("retry_after",!0),function(e){void 0!==e&&(t.data.retry_after=e)},"deactivated",n("deactivated",!0),"probation",n("probation",!0),"rejected",n("rejected",!0),"timeout",n("timeout",!0),"giveup",n("giveup",!0),"noresource",n("noresource",!0),"invariant",n("invariant",!0),function(e){"Supported"===t.startRule&&(t.data=e||[])},function(){var e=t.data.tag;t.data=new t.SIP.NameAddrHeader(t.data.uri,t.data.displayName,t.data.params),e&&t.data.setParam("tag",e)},"ttl",n("ttl",!0),function(e){t.data.ttl=e},"maddr",n("maddr",!0),function(e){t.data.maddr=e},"received",n("received",!0),function(e){t.data.received=e},"branch",n("branch",!0),function(e){t.data.branch=e},"rport",n("rport",!0),function(){"undefined"!=typeof response_port&&(t.data.rport=response_port.join(""))},function(e){t.data.protocol=e},n("UDP",!0),n("TCP",!0),n("TLS",!0),n("SCTP",!0),function(e){t.data.transport=e},function(){t.data.host=i()},function(e){t.data.port=parseInt(e.join(""))},function(e){return parseInt(e.join(""))},function(e){"Session_Expires"===t.startRule&&(t.data.deltaSeconds=e)},"refresher",n("refresher",!1),"uas",n("uas",!1),"uac",n("uac",!1),function(e){"Session_Expires"===t.startRule&&(t.data.refresher=e)},function(e){"Min_SE"===t.startRule&&(t.data=e)},"stuns",n("stuns",!0),"stun",n("stun",!0),function(e){t.data.scheme=e},function(e){t.data.host=e},"?transport=",n("?transport=",!1),"turns",n("turns",!0),"turn",n("turn",!0),function(){t.data.transport=transport},function(){t.data=i()},"Referred-By",n("Referred-By",!1),"b",n("b",!1),"cid",n("cid",!1)],_=[l(\'2 ""6 7!\'),l(\'4"""5!7#\'),l(\'4$""5!7%\'),l(\'4&""5!7\\\'\'),l(";\'.# &;("),l(\'4(""5!7)\'),l(\'4*""5!7+\'),l(\'2,""6,7-\'),l(\'2.""6.7/\'),l(\'40""5!71\'),l(\'22""6273.\\x89 &24""6475.} &26""6677.q &28""6879.e &2:""6:7;.Y &2<""6<7=.M &2>""6>7?.A &2@""6@7A.5 &2B""6B7C.) &2D""6D7E\'),l(";).# &;,"),l(\'2F""6F7G.} &2H""6H7I.q &2J""6J7K.e &2L""6L7M.Y &2N""6N7O.M &2P""6P7Q.A &2R""6R7S.5 &2T""6T7U.) &2V""6V7W\'),l(\'%%2X""6X7Y/5#;#/,$;#/#$+#)(#\\\'#("\\\'#&\\\'#/"!&,)\'),l(\'%%$;$0#*;$&/,#; /#$+")("\\\'#&\\\'#." &"/=#$;$/&#0#*;$&&&#/\\\'$8":Z" )("\\\'#&\\\'#\'),l(\';.." &"\'),l("%$;\'.# &;(0)*;\'.# &;(&/?#28\\"\\"6879/0$;//\'$8#:[# )(#\'#(\\"\'#&\'#"),l(\'%%$;2/&#0#*;2&&&#/g#$%$;.0#*;.&/,#;2/#$+")("\\\'#&\\\'#0=*%$;.0#*;.&/,#;2/#$+")("\\\'#&\\\'#&/#$+")("\\\'#&\\\'#/"!&,)\'),l(\'4\\\\""5!7].# &;3\'),l(\'4^""5!7_\'),l(\'4`""5!7a\'),l(\';!.) &4b""5!7c\'),l(\'%$;).\\x95 &2F""6F7G.\\x89 &2J""6J7K.} &2L""6L7M.q &2X""6X7Y.e &2P""6P7Q.Y &2H""6H7I.M &2@""6@7A.A &2d""6d7e.5 &2R""6R7S.) &2N""6N7O/\\x9e#0\\x9b*;).\\x95 &2F""6F7G.\\x89 &2J""6J7K.} &2L""6L7M.q &2X""6X7Y.e &2P""6P7Q.Y &2H""6H7I.M &2@""6@7A.A &2d""6d7e.5 &2R""6R7S.) &2N""6N7O&&&#/"!&,)\'),l(\'%$;).\\x89 &2F""6F7G.} &2L""6L7M.q &2X""6X7Y.e &2P""6P7Q.Y &2H""6H7I.M &2@""6@7A.A &2d""6d7e.5 &2R""6R7S.) &2N""6N7O/\\x92#0\\x8f*;).\\x89 &2F""6F7G.} &2L""6L7M.q &2X""6X7Y.e &2P""6P7Q.Y &2H""6H7I.M &2@""6@7A.A &2d""6d7e.5 &2R""6R7S.) &2N""6N7O&&&#/"!&,)\'),l(\'2T""6T7U.\\xe3 &2V""6V7W.\\xd7 &2f""6f7g.\\xcb &2h""6h7i.\\xbf &2:""6:7;.\\xb3 &2D""6D7E.\\xa7 &22""6273.\\x9b &28""6879.\\x8f &2j""6j7k.\\x83 &;&.} &24""6475.q &2l""6l7m.e &2n""6n7o.Y &26""6677.M &2>""6>7?.A &2p""6p7q.5 &2r""6r7s.) &;\\\'.# &;(\'),l(\'%$;).\\u012b &2F""6F7G.\\u011f &2J""6J7K.\\u0113 &2L""6L7M.\\u0107 &2X""6X7Y.\\xfb &2P""6P7Q.\\xef &2H""6H7I.\\xe3 &2@""6@7A.\\xd7 &2d""6d7e.\\xcb &2R""6R7S.\\xbf &2N""6N7O.\\xb3 &2T""6T7U.\\xa7 &2V""6V7W.\\x9b &2f""6f7g.\\x8f &2h""6h7i.\\x83 &28""6879.w &2j""6j7k.k &;&.e &24""6475.Y &2l""6l7m.M &2n""6n7o.A &26""6677.5 &2p""6p7q.) &2r""6r7s/\\u0134#0\\u0131*;).\\u012b &2F""6F7G.\\u011f &2J""6J7K.\\u0113 &2L""6L7M.\\u0107 &2X""6X7Y.\\xfb &2P""6P7Q.\\xef &2H""6H7I.\\xe3 &2@""6@7A.\\xd7 &2d""6d7e.\\xcb &2R""6R7S.\\xbf &2N""6N7O.\\xb3 &2T""6T7U.\\xa7 &2V""6V7W.\\x9b &2f""6f7g.\\x8f &2h""6h7i.\\x83 &28""6879.w &2j""6j7k.k &;&.e &24""6475.Y &2l""6l7m.M &2n""6n7o.A &26""6677.5 &2p""6p7q.) &2r""6r7s&&&#/"!&,)\'),l("%;//?#2P\\"\\"6P7Q/0$;//\'$8#:t# )(#\'#(\\"\'#&\'#"),l("%;//?#24\\"\\"6475/0$;//\'$8#:u# )(#\'#(\\"\'#&\'#"),l("%;//?#2>\\"\\"6>7?/0$;//\'$8#:v# )(#\'#(\\"\'#&\'#"),l("%;//?#2T\\"\\"6T7U/0$;//\'$8#:w# )(#\'#(\\"\'#&\'#"),l("%;//?#2V\\"\\"6V7W/0$;//\'$8#:x# )(#\'#(\\"\'#&\'#"),l(\'%2h""6h7i/0#;//\\\'$8":y" )("\\\'#&\\\'#\'),l(\'%;//6#2f""6f7g/\\\'$8":z" )("\\\'#&\\\'#\'),l("%;//?#2D\\"\\"6D7E/0$;//\'$8#:{# )(#\'#(\\"\'#&\'#"),l("%;//?#22\\"\\"6273/0$;//\'$8#:|# )(#\'#(\\"\'#&\'#"),l("%;//?#28\\"\\"6879/0$;//\'$8#:}# )(#\'#(\\"\'#&\'#"),l("%;//0#;&/\'$8\\":~\\" )(\\"\'#&\'#"),l("%;&/0#;//\'$8\\":~\\" )(\\"\'#&\'#"),l("%;=/T#$;G.) &;K.# &;F0/*;G.) &;K.# &;F&/,$;>/#$+#)(#\'#(\\"\'#&\'#"),l(\'4\\x7f""5!7\\x80.A &4\\x81""5!7\\x82.5 &4\\x83""5!7\\x84.) &;3.# &;.\'),l("%%;//Q#;&/H$$;J.# &;K0)*;J.# &;K&/,$;&/#$+$)($\'#(#\'#(\\"\'#&\'#/\\"!&,)"),l("%;//]#;&/T$%$;J.# &;K0)*;J.# &;K&/\\"!&,)/1$;&/($8$:\\x85$!!)($\'#(#\'#(\\"\'#&\'#"),l(\';..G &2L""6L7M.; &4\\x86""5!7\\x87./ &4\\x83""5!7\\x84.# &;3\'),l(\'%2j""6j7k/J#4\\x88""5!7\\x89.5 &4\\x8a""5!7\\x8b.) &4\\x8c""5!7\\x8d/#$+")("\\\'#&\\\'#\'),l("%;N/M#28\\"\\"6879/>$;O.\\" &\\"/0$;S/\'$8$:\\x8e$ )($\'#(#\'#(\\"\'#&\'#"),l("%;N/d#28\\"\\"6879/U$;O.\\" &\\"/G$;S/>$;_/5$;l.\\" &\\"/\'$8&:\\x8f& )(&\'#(%\'#($\'#(#\'#(\\"\'#&\'#"),l(\'%3\\x90""5$7\\x91.) &3\\x92""5#7\\x93/\\\' 8!:\\x94!! )\'),l(\'%;P/]#%28""6879/,#;R/#$+")("\\\'#&\\\'#." &"/6$2:""6:7;/\\\'$8#:\\x95# )(#\\\'#("\\\'#&\\\'#\'),l("$;+.) &;-.# &;Q/2#0/*;+.) &;-.# &;Q&&&#"),l(\'2<""6<7=.q &2>""6>7?.e &2@""6@7A.Y &2B""6B7C.M &2D""6D7E.A &22""6273.5 &26""6677.) &24""6475\'),l(\'%$;+._ &;-.Y &2<""6<7=.M &2>""6>7?.A &2@""6@7A.5 &2B""6B7C.) &2D""6D7E0e*;+._ &;-.Y &2<""6<7=.M &2>""6>7?.A &2@""6@7A.5 &2B""6B7C.) &2D""6D7E&/& 8!:\\x96! )\'),l(\'%;T/J#%28""6879/,#;^/#$+")("\\\'#&\\\'#." &"/#$+")("\\\'#&\\\'#\'),l("%;U.) &;\\\\.# &;X/& 8!:\\x97! )"),l(\'%$%;V/2#2J""6J7K/#$+")("\\\'#&\\\'#0<*%;V/2#2J""6J7K/#$+")("\\\'#&\\\'#&/D#;W/;$2J""6J7K." &"/\\\'$8#:\\x98# )(#\\\'#("\\\'#&\\\'#\'),l(\'$4\\x99""5!7\\x9a/,#0)*4\\x99""5!7\\x9a&&&#\'),l(\'%4$""5!7%/?#$4\\x9b""5!7\\x9c0)*4\\x9b""5!7\\x9c&/#$+")("\\\'#&\\\'#\'),l(\'%2l""6l7m/?#;Y/6$2n""6n7o/\\\'$8#:\\x9d# )(#\\\'#("\\\'#&\\\'#\'),l(\'%%;Z/\\xb3#28""6879/\\xa4$;Z/\\x9b$28""6879/\\x8c$;Z/\\x83$28""6879/t$;Z/k$28""6879/\\\\$;Z/S$28""6879/D$;Z/;$28""6879/,$;[/#$+-)(-\\\'#(,\\\'#(+\\\'#(*\\\'#()\\\'#((\\\'#(\\\'\\\'#(&\\\'#(%\\\'#($\\\'#(#\\\'#("\\\'#&\\\'#.\\u0790 &%2\\x9e""6\\x9e7\\x9f/\\xa4#;Z/\\x9b$28""6879/\\x8c$;Z/\\x83$28""6879/t$;Z/k$28""6879/\\\\$;Z/S$28""6879/D$;Z/;$28""6879/,$;[/#$+,)(,\\\'#(+\\\'#(*\\\'#()\\\'#((\\\'#(\\\'\\\'#(&\\\'#(%\\\'#($\\\'#(#\\\'#("\\\'#&\\\'#.\\u06f9 &%2\\x9e""6\\x9e7\\x9f/\\x8c#;Z/\\x83$28""6879/t$;Z/k$28""6879/\\\\$;Z/S$28""6879/D$;Z/;$28""6879/,$;[/#$+*)(*\\\'#()\\\'#((\\\'#(\\\'\\\'#(&\\\'#(%\\\'#($\\\'#(#\\\'#("\\\'#&\\\'#.\\u067a &%2\\x9e""6\\x9e7\\x9f/t#;Z/k$28""6879/\\\\$;Z/S$28""6879/D$;Z/;$28""6879/,$;[/#$+()((\\\'#(\\\'\\\'#(&\\\'#(%\\\'#($\\\'#(#\\\'#("\\\'#&\\\'#.\\u0613 &%2\\x9e""6\\x9e7\\x9f/\\\\#;Z/S$28""6879/D$;Z/;$28""6879/,$;[/#$+&)(&\\\'#(%\\\'#($\\\'#(#\\\'#("\\\'#&\\\'#.\\u05c4 &%2\\x9e""6\\x9e7\\x9f/D#;Z/;$28""6879/,$;[/#$+$)($\\\'#(#\\\'#("\\\'#&\\\'#.\\u058d &%2\\x9e""6\\x9e7\\x9f/,#;[/#$+")("\\\'#&\\\'#.\\u056e &%2\\x9e""6\\x9e7\\x9f/,#;Z/#$+")("\\\'#&\\\'#.\\u054f &%;Z/\\x9b#2\\x9e""6\\x9e7\\x9f/\\x8c$;Z/\\x83$28""6879/t$;Z/k$28""6879/\\\\$;Z/S$28""6879/D$;Z/;$28""6879/,$;[/#$++)(+\\\'#(*\\\'#()\\\'#((\\\'#(\\\'\\\'#(&\\\'#(%\\\'#($\\\'#(#\\\'#("\\\'#&\\\'#.\\u04c7 &%;Z/\\xaa#%28""6879/,#;Z/#$+")("\\\'#&\\\'#." &"/\\x83$2\\x9e""6\\x9e7\\x9f/t$;Z/k$28""6879/\\\\$;Z/S$28""6879/D$;Z/;$28""6879/,$;[/#$+*)(*\\\'#()\\\'#((\\\'#(\\\'\\\'#(&\\\'#(%\\\'#($\\\'#(#\\\'#("\\\'#&\\\'#.\\u0430 &%;Z/\\xb9#%28""6879/,#;Z/#$+")("\\\'#&\\\'#." &"/\\x92$%28""6879/,#;Z/#$+")("\\\'#&\\\'#." &"/k$2\\x9e""6\\x9e7\\x9f/\\\\$;Z/S$28""6879/D$;Z/;$28""6879/,$;[/#$+))()\\\'#((\\\'#(\\\'\\\'#(&\\\'#(%\\\'#($\\\'#(#\\\'#("\\\'#&\\\'#.\\u038a &%;Z/\\xc8#%28""6879/,#;Z/#$+")("\\\'#&\\\'#." &"/\\xa1$%28""6879/,#;Z/#$+")("\\\'#&\\\'#." &"/z$%28""6879/,#;Z/#$+")("\\\'#&\\\'#." &"/S$2\\x9e""6\\x9e7\\x9f/D$;Z/;$28""6879/,$;[/#$+()((\\\'#(\\\'\\\'#(&\\\'#(%\\\'#($\\\'#(#\\\'#("\\\'#&\\\'#.\\u02d5 &%;Z/\\xd7#%28""6879/,#;Z/#$+")("\\\'#&\\\'#." &"/\\xb0$%28""6879/,#;Z/#$+")("\\\'#&\\\'#." &"/\\x89$%28""6879/,#;Z/#$+")("\\\'#&\\\'#." &"/b$%28""6879/,#;Z/#$+")("\\\'#&\\\'#." &"/;$2\\x9e""6\\x9e7\\x9f/,$;[/#$+\\\')(\\\'\\\'#(&\\\'#(%\\\'#($\\\'#(#\\\'#("\\\'#&\\\'#.\\u0211 &%;Z/\\xfe#%28""6879/,#;Z/#$+")("\\\'#&\\\'#." &"/\\xd7$%28""6879/,#;Z/#$+")("\\\'#&\\\'#." &"/\\xb0$%28""6879/,#;Z/#$+")("\\\'#&\\\'#." &"/\\x89$%28""6879/,#;Z/#$+")("\\\'#&\\\'#." &"/b$%28""6879/,#;Z/#$+")("\\\'#&\\\'#." &"/;$2\\x9e""6\\x9e7\\x9f/,$;Z/#$+()((\\\'#(\\\'\\\'#(&\\\'#(%\\\'#($\\\'#(#\\\'#("\\\'#&\\\'#.\\u0126 &%;Z/\\u011c#%28""6879/,#;Z/#$+")("\\\'#&\\\'#." &"/\\xf5$%28""6879/,#;Z/#$+")("\\\'#&\\\'#." &"/\\xce$%28""6879/,#;Z/#$+")("\\\'#&\\\'#." &"/\\xa7$%28""6879/,#;Z/#$+")("\\\'#&\\\'#." &"/\\x80$%28""6879/,#;Z/#$+")("\\\'#&\\\'#." &"/Y$%28""6879/,#;Z/#$+")("\\\'#&\\\'#." &"/2$2\\x9e""6\\x9e7\\x9f/#$+()((\\\'#(\\\'\\\'#(&\\\'#(%\\\'#($\\\'#(#\\\'#("\\\'#&\\\'#/& 8!:\\xa0! )\'),l(\'%;#/M#;#." &"/?$;#." &"/1$;#." &"/#$+$)($\\\'#(#\\\'#("\\\'#&\\\'#\'),l("%;Z/;#28\\"\\"6879/,$;Z/#$+#)(#\'#(\\"\'#&\'#.# &;\\\\"),l("%;]/o#2J\\"\\"6J7K/`$;]/W$2J\\"\\"6J7K/H$;]/?$2J\\"\\"6J7K/0$;]/\'$8\':\\xa1\' )(\'\'#(&\'#(%\'#($\'#(#\'#(\\"\'#&\'#"),l(\'%2\\xa2""6\\xa27\\xa3/2#4\\xa4""5!7\\xa5/#$+")("\\\'#&\\\'#.\\x98 &%2\\xa6""6\\xa67\\xa7/;#4\\xa8""5!7\\xa9/,$;!/#$+#)(#\\\'#("\\\'#&\\\'#.j &%2\\xaa""6\\xaa7\\xab/5#;!/,$;!/#$+#)(#\\\'#("\\\'#&\\\'#.B &%4\\xac""5!7\\xad/,#;!/#$+")("\\\'#&\\\'#.# &;!\'),l(\'%%;!." &"/[#;!." &"/M$;!." &"/?$;!." &"/1$;!." &"/#$+%)(%\\\'#($\\\'#(#\\\'#("\\\'#&\\\'#/\\\' 8!:\\xae!! )\'),l(\'$%22""6273/,#;`/#$+")("\\\'#&\\\'#0<*%22""6273/,#;`/#$+")("\\\'#&\\\'#&\'),l(";a.A &;b.; &;c.5 &;d./ &;e.) &;f.# &;g"),l(\'%3\\xaf""5*7\\xb0/a#3\\xb1""5#7\\xb2.G &3\\xb3""5#7\\xb4.; &3\\xb5""5$7\\xb6./ &3\\xb7""5#7\\xb8.# &;6/($8":\\xb9"! )("\\\'#&\\\'#\'),l(\'%3\\xba""5%7\\xbb/I#3\\xbc""5%7\\xbd./ &3\\xbe""5"7\\xbf.# &;6/($8":\\xc0"! )("\\\'#&\\\'#\'),l(\'%3\\xc1""5\\\'7\\xc2/1#;\\x8f/($8":\\xc3"! )("\\\'#&\\\'#\'),l(\'%3\\xc4""5$7\\xc5/1#;\\xef/($8":\\xc6"! )("\\\'#&\\\'#\'),l(\'%3\\xc7""5&7\\xc8/1#;T/($8":\\xc9"! )("\\\'#&\\\'#\'),l(\'%3\\xca""5"7\\xcb/N#%2>""6>7?/,#;6/#$+")("\\\'#&\\\'#." &"/\\\'$8":\\xcc" )("\\\'#&\\\'#\'),l(\'%;h/P#%2>""6>7?/,#;i/#$+")("\\\'#&\\\'#." &"/)$8":\\xcd""! )("\\\'#&\\\'#\'),l(\'%$;j/&#0#*;j&&&#/"!&,)\'),l(\'%$;j/&#0#*;j&&&#/"!&,)\'),l(";k.) &;+.# &;-"),l(\'2l""6l7m.e &2n""6n7o.Y &24""6475.M &28""6879.A &2<""6<7=.5 &2@""6@7A.) &2B""6B7C\'),l(\'%26""6677/n#;m/e$$%2<""6<7=/,#;m/#$+")("\\\'#&\\\'#0<*%2<""6<7=/,#;m/#$+")("\\\'#&\\\'#&/#$+#)(#\\\'#("\\\'#&\\\'#\'),l(\'%;n/A#2>""6>7?/2$;o/)$8#:\\xce#"" )(#\\\'#("\\\'#&\\\'#\'),l("$;p.) &;+.# &;-/2#0/*;p.) &;+.# &;-&&&#"),l("$;p.) &;+.# &;-0/*;p.) &;+.# &;-&"),l(\'2l""6l7m.e &2n""6n7o.Y &24""6475.M &26""6677.A &28""6879.5 &2@""6@7A.) &2B""6B7C\'),l(";\\x90.# &;r"),l("%;\\x8f/G#;\'/>$;s/5$;\'/,$;\\x84/#$+%)(%\'#($\'#(#\'#(\\"\'#&\'#"),l(";M.# &;t"),l("%;\\x7f/E#28\\"\\"6879/6$;u.# &;x/\'$8#:\\xcf# )(#\'#(\\"\'#&\'#"),l(\'%;v.# &;w/J#%26""6677/,#;\\x83/#$+")("\\\'#&\\\'#." &"/#$+")("\\\'#&\\\'#\'),l(\'%2\\xd0""6\\xd07\\xd1/:#;\\x80/1$;w." &"/#$+#)(#\\\'#("\\\'#&\\\'#\'),l(\'%24""6475/,#;{/#$+")("\\\'#&\\\'#\'),l("%;z/3#$;y0#*;y&/#$+\\")(\\"\'#&\'#"),l(";*.) &;+.# &;-"),l(\';+.\\x8f &;-.\\x89 &22""6273.} &26""6677.q &28""6879.e &2:""6:7;.Y &2<""6<7=.M &2>""6>7?.A &2@""6@7A.5 &2B""6B7C.) &2D""6D7E\'),l(\'%;|/e#$%24""6475/,#;|/#$+")("\\\'#&\\\'#0<*%24""6475/,#;|/#$+")("\\\'#&\\\'#&/#$+")("\\\'#&\\\'#\'),l(\'%$;~0#*;~&/e#$%22""6273/,#;}/#$+")("\\\'#&\\\'#0<*%22""6273/,#;}/#$+")("\\\'#&\\\'#&/#$+")("\\\'#&\\\'#\'),l("$;~0#*;~&"),l(\';+.w &;-.q &28""6879.e &2:""6:7;.Y &2<""6<7=.M &2>""6>7?.A &2@""6@7A.5 &2B""6B7C.) &2D""6D7E\'),l(\'%%;"/\\x87#$;".G &;!.A &2@""6@7A.5 &2F""6F7G.) &2J""6J7K0M*;".G &;!.A &2@""6@7A.5 &2F""6F7G.) &2J""6J7K&/#$+")("\\\'#&\\\'#/& 8!:\\xd2! )\'),l(";\\x81.# &;\\x82"),l(\'%%;O/2#2:""6:7;/#$+")("\\\'#&\\\'#." &"/,#;S/#$+")("\\\'#&\\\'#." &"\'),l(\'$;+.\\x83 &;-.} &2B""6B7C.q &2D""6D7E.e &22""6273.Y &28""6879.M &2:""6:7;.A &2<""6<7=.5 &2>""6>7?.) &2@""6@7A/\\x8c#0\\x89*;+.\\x83 &;-.} &2B""6B7C.q &2D""6D7E.e &22""6273.Y &28""6879.M &2:""6:7;.A &2<""6<7=.5 &2>""6>7?.) &2@""6@7A&&&#\'),l("$;y0#*;y&"),l(\'%3\\x92""5#7\\xd3/q#24""6475/b$$;!/&#0#*;!&&&#/L$2J""6J7K/=$$;!/&#0#*;!&&&#/\\\'$8%:\\xd4% )(%\\\'#($\\\'#(#\\\'#("\\\'#&\\\'#\'),l(\'2\\xd5""6\\xd57\\xd6\'),l(\'2\\xd7""6\\xd77\\xd8\'),l(\'2\\xd9""6\\xd97\\xda\'),l(\'2\\xdb""6\\xdb7\\xdc\'),l(\'2\\xdd""6\\xdd7\\xde\'),l(\'2\\xdf""6\\xdf7\\xe0\'),l(\'2\\xe1""6\\xe17\\xe2\'),l(\'2\\xe3""6\\xe37\\xe4\'),l(\'2\\xe5""6\\xe57\\xe6\'),l(\'2\\xe7""6\\xe77\\xe8\'),l("%;\\x85.S &;\\x86.M &;\\x88.G &;\\x89.A &;\\x8a.; &;\\x8b.5 &;\\x8c./ &;\\x8d.) &;\\x8e.# &;6/& 8!:\\xe9! )"),l("%;\\x84/G#;\'/>$;\\x91/5$;\'/,$;\\x93/#$+%)(%\'#($\'#(#\'#(\\"\'#&\'#"),l("%;\\x92/\' 8!:\\xea!! )"),l("%;!/5#;!/,$;!/#$+#)(#\'#(\\"\'#&\'#"),l("%$;*.A &;+.; &;-.5 &;3./ &;4.) &;\'.# &;(0G*;*.A &;+.; &;-.5 &;3./ &;4.) &;\'.# &;(&/& 8!:\\xeb! )"),l("%;\\xb5/Y#$%;A/,#;\\xb5/#$+\\")(\\"\'#&\'#06*%;A/,#;\\xb5/#$+\\")(\\"\'#&\'#&/#$+\\")(\\"\'#&\'#"),l(\'%;9/N#%2:""6:7;/,#;9/#$+")("\\\'#&\\\'#." &"/\\\'$8":\\xec" )("\\\'#&\\\'#\'),l("%;:.c &%;\\x97/Y#$%;A/,#;\\x97/#$+\\")(\\"\'#&\'#06*%;A/,#;\\x97/#$+\\")(\\"\'#&\'#&/#$+\\")(\\"\'#&\'#/& 8!:\\xed! )"),l("%;L.# &;\\x98/]#$%;B/,#;\\x9a/#$+\\")(\\"\'#&\'#06*%;B/,#;\\x9a/#$+\\")(\\"\'#&\'#&/\'$8\\":\\xee\\" )(\\"\'#&\'#"),l("%;\\x99.\\" &\\"/>#;@/5$;M/,$;?/#$+$)($\'#(#\'#(\\"\'#&\'#"),l("%%;6/Y#$%;./,#;6/#$+\\")(\\"\'#&\'#06*%;./,#;6/#$+\\")(\\"\'#&\'#&/#$+\\")(\\"\'#&\'#.# &;H/\' 8!:\\xef!! )"),l(";\\x9b.) &;\\x9c.# &;\\x9f"),l("%3\\xf0\\"\\"5!7\\xf1/:#;</1$;\\x9e/($8#:\\xf2#! )(#\'#(\\"\'#&\'#"),l("%3\\xf3\\"\\"5\'7\\xf4/:#;</1$;\\x9d/($8#:\\xf5#! )(#\'#(\\"\'#&\'#"),l("%$;!/&#0#*;!&&&#/\' 8!:\\xf6!! )"),l(\'%2\\xf7""6\\xf77\\xf8/o#%2J""6J7K/M#;!." &"/?$;!." &"/1$;!." &"/#$+$)($\\\'#(#\\\'#("\\\'#&\\\'#." &"/\\\'$8":\\xf9" )("\\\'#&\\\'#\'),l(\'%;6/J#%;</,#;\\xa0/#$+")("\\\'#&\\\'#." &"/)$8":\\xfa""! )("\\\'#&\\\'#\'),l(";6.) &;T.# &;H"),l("%;\\xa2/Y#$%;B/,#;\\xa3/#$+\\")(\\"\'#&\'#06*%;B/,#;\\xa3/#$+\\")(\\"\'#&\'#&/#$+\\")(\\"\'#&\'#"),l(\'%3\\xfb""5&7\\xfc.G &3\\xfd""5\\\'7\\xfe.; &3\\xff""5$7\\u0100./ &3\\u0101""5%7\\u0102.# &;6/& 8!:\\u0103! )\'),l(";\\xa4.# &;\\x9f"),l(\'%3\\u0104""5(7\\u0105/M#;</D$3\\u0106""5(7\\u0107./ &3\\u0108""5(7\\u0109.# &;6/#$+#)(#\\\'#("\\\'#&\\\'#\'),l("%;6/Y#$%;A/,#;6/#$+\\")(\\"\'#&\'#06*%;A/,#;6/#$+\\")(\\"\'#&\'#&/#$+\\")(\\"\'#&\'#"),l("%$;!/&#0#*;!&&&#/\' 8!:\\u010a!! )"),l("%;\\xa8/& 8!:\\u010b! )"),l("%;\\xa9/k#;;/b$;\\xae/Y$$%;B/,#;\\xaf/#$+\\")(\\"\'#&\'#06*%;B/,#;\\xaf/#$+\\")(\\"\'#&\'#&/#$+$)($\'#(#\'#(\\"\'#&\'#"),l(";\\xaa.# &;\\xab"),l(\'3\\u010c""5$7\\u010d.S &3\\u010e""5%7\\u010f.G &3\\u0110""5%7\\u0111.; &3\\u0112""5%7\\u0113./ &3\\u0114""5+7\\u0115.# &;\\xac\'),l(\'3\\u0116""5\\\'7\\u0117./ &3\\u0118""5)7\\u0119.# &;\\xac\'),l(";6.# &;\\xad"),l(\'%3\\u011a""5"7\\u011b/,#;6/#$+")("\\\'#&\\\'#\'),l(";\\xac.# &;6"),l("%;6/5#;</,$;\\xb0/#$+#)(#\'#(\\"\'#&\'#"),l(";6.# &;H"),l("%;\\xb2/5#;./,$;\\x8f/#$+#)(#\'#(\\"\'#&\'#"),l("%$;!/&#0#*;!&&&#/\' 8!:\\u011c!! )"),l("%;\\x9d/\' 8!:\\u011d!! )"),l(\'%;\\xb5/^#$%;B/,#;\\x9f/#$+")("\\\'#&\\\'#06*%;B/,#;\\x9f/#$+")("\\\'#&\\\'#&/($8":\\u011e"!!)("\\\'#&\\\'#\'),l(\'%%;7/e#$%2J""6J7K/,#;7/#$+")("\\\'#&\\\'#0<*%2J""6J7K/,#;7/#$+")("\\\'#&\\\'#&/#$+")("\\\'#&\\\'#/"!&,)\'),l("%;L.# &;\\x98/]#$%;B/,#;\\xb7/#$+\\")(\\"\'#&\'#06*%;B/,#;\\xb7/#$+\\")(\\"\'#&\'#&/\'$8\\":\\u011f\\" )(\\"\'#&\'#"),l(";\\xb8.# &;\\x9f"),l("%3\\u0120\\"\\"5#7\\u0121/:#;</1$;6/($8#:\\u0122#! )(#\'#(\\"\'#&\'#"),l("%$;!/&#0#*;!&&&#/\' 8!:\\u0123!! )"),l("%;\\x9d/\' 8!:\\u0124!! )"),l("%$;\\x990#*;\\x99&/x#;@/o$;M/f$;?/]$$%;B/,#;\\x9f/#$+\\")(\\"\'#&\'#06*%;B/,#;\\x9f/#$+\\")(\\"\'#&\'#&/\'$8%:\\u0125% )(%\'#($\'#(#\'#(\\"\'#&\'#"),l(";\\xbd"),l("%3\\u0126\\"\\"5&7\\u0127/k#;./b$;\\xc0/Y$$%;A/,#;\\xc0/#$+\\")(\\"\'#&\'#06*%;A/,#;\\xc0/#$+\\")(\\"\'#&\'#&/#$+$)($\'#(#\'#(\\"\'#&\'#.# &;\\xbe"),l("%;6/k#;./b$;\\xbf/Y$$%;A/,#;\\xbf/#$+\\")(\\"\'#&\'#06*%;A/,#;\\xbf/#$+\\")(\\"\'#&\'#&/#$+$)($\'#(#\'#(\\"\'#&\'#"),l("%;6/;#;</2$;6.# &;H/#$+#)(#\'#(\\"\'#&\'#"),l(";\\xc1.G &;\\xc3.A &;\\xc5.; &;\\xc7.5 &;\\xc8./ &;\\xc9.) &;\\xca.# &;\\xbf"),l("%3\\u0128\\"\\"5%7\\u0129/5#;</,$;\\xc2/#$+#)(#\'#(\\"\'#&\'#"),l("%;I/\' 8!:\\u012a!! )"),l("%3\\u012b\\"\\"5&7\\u012c/\\x97#;</\\x8e$;D/\\x85$;\\xc4/|$$%$;\'/&#0#*;\'&&&#/,#;\\xc4/#$+\\")(\\"\'#&\'#0C*%$;\'/&#0#*;\'&&&#/,#;\\xc4/#$+\\")(\\"\'#&\'#&/,$;E/#$+&)(&\'#(%\'#($\'#(#\'#(\\"\'#&\'#"),l(";t.# &;w"),l("%3\\u012d\\"\\"5%7\\u012e/5#;</,$;\\xc6/#$+#)(#\'#(\\"\'#&\'#"),l("%;I/\' 8!:\\u012f!! )"),l("%3\\u0130\\"\\"5&7\\u0131/:#;</1$;I/($8#:\\u0132#! )(#\'#(\\"\'#&\'#"),l(\'%3\\u0133""5%7\\u0134/]#;</T$%3\\u0135""5$7\\u0136/& 8!:\\u0137! ).4 &%3\\u0138""5%7\\u0139/& 8!:\\u013a! )/#$+#)(#\\\'#("\\\'#&\\\'#\'),l(\'%3\\u013b""5)7\\u013c/R#;</I$3\\u013d""5#7\\u013e./ &3\\u013f""5(7\\u0140.# &;6/($8#:\\u0141#! )(#\\\'#("\\\'#&\\\'#\'),l(\'%3\\u0142""5#7\\u0143/\\x93#;</\\x8a$;D/\\x81$%;\\xcb/e#$%2D""6D7E/,#;\\xcb/#$+")("\\\'#&\\\'#0<*%2D""6D7E/,#;\\xcb/#$+")("\\\'#&\\\'#&/#$+")("\\\'#&\\\'#/,$;E/#$+%)(%\\\'#($\\\'#(#\\\'#("\\\'#&\\\'#\'),l(\'%3\\u0144""5(7\\u0145./ &3\\u0146""5$7\\u0147.# &;6/\\\' 8!:\\u0148!! )\'),l("%;6/Y#$%;A/,#;6/#$+\\")(\\"\'#&\'#06*%;A/,#;6/#$+\\")(\\"\'#&\'#&/#$+\\")(\\"\'#&\'#"),l("%;\\xce/G#;./>$;\\xce/5$;./,$;\\x8f/#$+%)(%\'#($\'#(#\'#(\\"\'#&\'#"),l("%$;!/&#0#*;!&&&#/\' 8!:\\u0149!! )"),l("%;\\xd0/]#$%;A/,#;\\xd0/#$+\\")(\\"\'#&\'#06*%;A/,#;\\xd0/#$+\\")(\\"\'#&\'#&/\'$8\\":\\u014a\\" )(\\"\'#&\'#"),l("%;\\x98/]#$%;B/,#;\\x9f/#$+\\")(\\"\'#&\'#06*%;B/,#;\\x9f/#$+\\")(\\"\'#&\'#&/\'$8\\":\\u014b\\" )(\\"\'#&\'#"),l(\'%;L.O &;\\x98.I &%;@." &"/:#;t/1$;?." &"/#$+#)(#\\\'#("\\\'#&\\\'#/]#$%;B/,#;\\x9f/#$+")("\\\'#&\\\'#06*%;B/,#;\\x9f/#$+")("\\\'#&\\\'#&/\\\'$8":\\u014c" )("\\\'#&\\\'#\'),l("%;\\xd3/]#$%;B/,#;\\xd4/#$+\\")(\\"\'#&\'#06*%;B/,#;\\xd4/#$+\\")(\\"\'#&\'#&/\'$8\\":\\u014d\\" )(\\"\'#&\'#"),l("%;\\x95/& 8!:\\u014e! )"),l(\'%3\\u014f""5(7\\u0150/:#;</1$;6/($8#:\\u0151#! )(#\\\'#("\\\'#&\\\'#.g &%3\\u0152""5&7\\u0153/:#;</1$;6/($8#:\\u0154#! )(#\\\'#("\\\'#&\\\'#.: &%3\\u0155""5*7\\u0156/& 8!:\\u0157! ).# &;\\x9f\'),l(\'%%;6/k#$%;A/2#;6/)$8":\\u0158""$ )("\\\'#&\\\'#0<*%;A/2#;6/)$8":\\u0158""$ )("\\\'#&\\\'#&/)$8":\\u0159""! )("\\\'#&\\\'#." &"/\\\' 8!:\\u015a!! )\'),l("%;\\xd7/Y#$%;A/,#;\\xd7/#$+\\")(\\"\'#&\'#06*%;A/,#;\\xd7/#$+\\")(\\"\'#&\'#&/#$+\\")(\\"\'#&\'#"),l("%;\\x98/Y#$%;B/,#;\\x9f/#$+\\")(\\"\'#&\'#06*%;B/,#;\\x9f/#$+\\")(\\"\'#&\'#&/#$+\\")(\\"\'#&\'#"),l("%$;!/&#0#*;!&&&#/\' 8!:\\u015b!! )"),l("%;\\xda/Y#$%;B/,#;\\xdb/#$+\\")(\\"\'#&\'#06*%;B/,#;\\xdb/#$+\\")(\\"\'#&\'#&/#$+\\")(\\"\'#&\'#"),l(\'%3\\u015c""5&7\\u015d.; &3\\u015e""5\\\'7\\u015f./ &3\\u0160""5*7\\u0161.# &;6/& 8!:\\u0162! )\'),l("%3\\u0163\\"\\"5&7\\u0164/:#;</1$;\\xdc/($8#:\\u0165#! )(#\'#(\\"\'#&\'#.} &%3\\xf3\\"\\"5\'7\\xf4/:#;</1$;\\x9d/($8#:\\u0166#! )(#\'#(\\"\'#&\'#.P &%3\\u0167\\"\\"5+7\\u0168/:#;</1$;\\x9d/($8#:\\u0169#! )(#\'#(\\"\'#&\'#.# &;\\x9f"),l(\'3\\u016a""5+7\\u016b.k &3\\u016c""5)7\\u016d._ &3\\u016e""5(7\\u016f.S &3\\u0170""5\\\'7\\u0171.G &3\\u0172""5&7\\u0173.; &3\\u0174""5*7\\u0175./ &3\\u0176""5)7\\u0177.# &;6\'),l(\';1." &"\'),l(\'%%;6/k#$%;A/2#;6/)$8":\\u0158""$ )("\\\'#&\\\'#0<*%;A/2#;6/)$8":\\u0158""$ )("\\\'#&\\\'#&/)$8":\\u0159""! )("\\\'#&\\\'#." &"/\\\' 8!:\\u0178!! )\'),l("%;L.# &;\\x98/]#$%;B/,#;\\xe0/#$+\\")(\\"\'#&\'#06*%;B/,#;\\xe0/#$+\\")(\\"\'#&\'#&/\'$8\\":\\u0179\\" )(\\"\'#&\'#"),l(";\\xb8.# &;\\x9f"),l("%;\\xe2/Y#$%;A/,#;\\xe2/#$+\\")(\\"\'#&\'#06*%;A/,#;\\xe2/#$+\\")(\\"\'#&\'#&/#$+\\")(\\"\'#&\'#"),l("%;\\xe9/k#;./b$;\\xec/Y$$%;B/,#;\\xe3/#$+\\")(\\"\'#&\'#06*%;B/,#;\\xe3/#$+\\")(\\"\'#&\'#&/#$+$)($\'#(#\'#(\\"\'#&\'#"),l(";\\xe4.; &;\\xe5.5 &;\\xe6./ &;\\xe7.) &;\\xe8.# &;\\x9f"),l("%3\\u017a\\"\\"5#7\\u017b/:#;</1$;\\xef/($8#:\\u017c#! )(#\'#(\\"\'#&\'#"),l("%3\\u017d\\"\\"5%7\\u017e/:#;</1$;T/($8#:\\u017f#! )(#\'#(\\"\'#&\'#"),l("%3\\u0180\\"\\"5(7\\u0181/@#;</7$;\\\\.# &;Y/($8#:\\u0182#! )(#\'#(\\"\'#&\'#"),l("%3\\u0183\\"\\"5&7\\u0184/:#;</1$;6/($8#:\\u0185#! )(#\'#(\\"\'#&\'#"),l(\'%3\\u0186""5%7\\u0187/O#%;</3#$;!0#*;!&/#$+")("\\\'#&\\\'#." &"/\\\'$8":\\u0188" )("\\\'#&\\\'#\'),l("%;\\xea/G#;;/>$;6/5$;;/,$;\\xeb/#$+%)(%\'#($\'#(#\'#(\\"\'#&\'#"),l(\'%3\\x92""5#7\\xd3.# &;6/\\\' 8!:\\u0189!! )\'),l(\'%3\\xb1""5#7\\u018a.G &3\\xb3""5#7\\u018b.; &3\\xb7""5#7\\u018c./ &3\\xb5""5$7\\u018d.# &;6/\\\' 8!:\\u018e!! )\'),l(\'%;\\xed/D#%;C/,#;\\xee/#$+")("\\\'#&\\\'#." &"/#$+")("\\\'#&\\\'#\'),l("%;U.) &;\\\\.# &;X/& 8!:\\u018f! )"),l(\'%%;!." &"/[#;!." &"/M$;!." &"/?$;!." &"/1$;!." &"/#$+%)(%\\\'#($\\\'#(#\\\'#("\\\'#&\\\'#/\\\' 8!:\\u0190!! )\'),l(\'%%;!/?#;!." &"/1$;!." &"/#$+#)(#\\\'#("\\\'#&\\\'#/\\\' 8!:\\u0191!! )\'),l(";\\xbd"),l(\'%;\\x9d/^#$%;B/,#;\\xf2/#$+")("\\\'#&\\\'#06*%;B/,#;\\xf2/#$+")("\\\'#&\\\'#&/($8":\\u0192"!!)("\\\'#&\\\'#\'),l(";\\xf3.# &;\\x9f"),l(\'%2\\u0193""6\\u01937\\u0194/L#;</C$2\\u0195""6\\u01957\\u0196.) &2\\u0197""6\\u01977\\u0198/($8#:\\u0199#! )(#\\\'#("\\\'#&\\\'#\'),l(\'%;\\x9d/^#$%;B/,#;\\x9f/#$+")("\\\'#&\\\'#06*%;B/,#;\\x9f/#$+")("\\\'#&\\\'#&/($8":\\u019a"!!)("\\\'#&\\\'#\'),l("%;6/5#;0/,$;\\xf6/#$+#)(#\'#(\\"\'#&\'#"),l("$;2.) &;4.# &;.0/*;2.) &;4.# &;.&"),l("$;%0#*;%&"),l("%;\\xf9/;#28\\"\\"6879/,$;\\xfa/#$+#)(#\'#(\\"\'#&\'#"),l(\'%3\\u019b""5%7\\u019c.) &3\\u019d""5$7\\u019e/\\\' 8!:\\u019f!! )\'),l(\'%;\\xfb/J#%28""6879/,#;^/#$+")("\\\'#&\\\'#." &"/#$+")("\\\'#&\\\'#\'),l("%;\\\\.) &;X.# &;\\x82/\' 8!:\\u01a0!! )"),l(\';".S &;!.M &2F""6F7G.A &2J""6J7K.5 &2H""6H7I.) &2N""6N7O\'),l(\'2L""6L7M.\\x95 &2B""6B7C.\\x89 &2<""6<7=.} &2R""6R7S.q &2T""6T7U.e &2V""6V7W.Y &2P""6P7Q.M &2@""6@7A.A &2D""6D7E.5 &22""6273.) &2>""6>7?\'),l(\'%;\\xff/b#28""6879/S$;\\xfa/J$%2\\u01a1""6\\u01a17\\u01a2/,#;\\xeb/#$+")("\\\'#&\\\'#." &"/#$+$)($\\\'#(#\\\'#("\\\'#&\\\'#\'),l(\'%3\\u01a3""5%7\\u01a4.) &3\\u01a5""5$7\\u01a6/\\\' 8!:\\u019f!! )\'),l(\'%;\\xeb/O#3\\xb1""5#7\\xb2.6 &3\\xb3""5#7\\xb4.* &$;+0#*;+&/\\\'$8":\\u01a7" )("\\\'#&\\\'#\'),l("%;\\u0103/\\x87#2F\\"\\"6F7G/x$;\\u0102/o$2F\\"\\"6F7G/`$;\\u0102/W$2F\\"\\"6F7G/H$;\\u0102/?$2F\\"\\"6F7G/0$;\\u0104/\'$8):\\u01a8) )()\'#((\'#(\'\'#(&\'#(%\'#($\'#(#\'#(\\"\'#&\'#"),l("%;#/>#;#/5$;#/,$;#/#$+$)($\'#(#\'#(\\"\'#&\'#"),l("%;\\u0102/,#;\\u0102/#$+\\")(\\"\'#&\'#"),l("%;\\u0102/5#;\\u0102/,$;\\u0102/#$+#)(#\'#(\\"\'#&\'#"),l("%;\\x84/U#;\'/L$;\\x91/C$;\'/:$;\\x8f/1$; .\\" &\\"/#$+&)(&\'#(%\'#($\'#(#\'#(\\"\'#&\'#"),l(\'%2\\u01a9""6\\u01a97\\u01aa.) &2\\u01ab""6\\u01ab7\\u01ac/w#;0/n$;\\u0107/e$$%;B/2#;\\u0108.# &;\\x9f/#$+")("\\\'#&\\\'#0<*%;B/2#;\\u0108.# &;\\x9f/#$+")("\\\'#&\\\'#&/#$+$)($\\\'#(#\\\'#("\\\'#&\\\'#\'),l(";\\x98.# &;L"),l("%2\\u01ad\\"\\"6\\u01ad7\\u01ae/5#;</,$;\\u0109/#$+#)(#\'#(\\"\'#&\'#"),l("%;D/S#;,/J$2:\\"\\"6:7;/;$;,.# &;T/,$;E/#$+%)(%\'#($\'#(#\'#(\\"\'#&\'#")],E=0,S=0,C=[{line:1,column:1}],R=0,v=[],A=0;if("startRule"in t){if(!(t.startRule in f))throw new Error("Can\'t start parsing from rule \\""+t.startRule+\'".\');T=f[t.startRule]}if(t.data={},(p=d(T))!==g&&E===e.length)return p;throw p!==g&&E<e.length&&h({type:"end"}),u(v,R<e.length?e.charAt(R):null,R<e.length?c(R,R+1):c(R,R))}}},function(e,t,i){"use strict";e.exports=function(e){return{stripTcpCandidates:function(t){return t.sdp=t.sdp.replace(/^a=candidate:\\d+ \\d+ tcp .*?\\r\\n/gim,""),e.Utils.Promise.resolve(t)},stripTelephoneEvent:function(t){return t.sdp=t.sdp.replace(/^a=rtpmap:\\d+ telephone-event\\/\\d+\\r\\n/gim,""),e.Utils.Promise.resolve(t)},cleanJitsiSdpImageattr:function(t){return t.sdp=t.sdp.replace(/^(a=imageattr:.*?)(x|y)=\\[0-/gm,"$1$2=[1:"),e.Utils.Promise.resolve(t)},stripG722:function(t){var i=t.sdp.match(/^m=audio.*$/gm);if(i){var s=i[0];s=s.split(" ");for(var r=3;r<s.length;r+=1)if("9"===s[r]){s.splice(r,1);var n=parseInt(s[1],10);n-=1,s[1]=n.toString()}s=s.join(" "),t.sdp=t.sdp.replace(/^m=audio.*$/gm,s),t.sdp=t.sdp.replace(/^a=rtpmap:.*G722\\/8000\\r\\n?/gm,"").replace()}return e.Utils.Promise.resolve(t)}}}},function(e,t,i){"use strict";(function(t){e.exports=function(e){var i={STATUS_NULL:0,STATUS_NEW:1,STATUS_CONNECTING:2,STATUS_CONNECTED:3,STATUS_COMPLETED:4},s=function(s){if(s.media.remote.video?this.video=!0:this.video=!1,s.media.remote.audio?this.audio=!0:this.audio=!1,!this.audio&&!this.video)throw new Error("At least one remote audio or video element is required for Simple.");this.options=s;var r=t.navigator.userAgent.toLowerCase(),n=!1;r.indexOf("safari")>-1&&r.indexOf("chrome")<0&&(n=!0);var o={};return n&&(o.modifiers=[e.WebRTC.Modifiers.stripG722]),this.options.ua.uri||(this.anonymous=!0),this.ua=new e.UA({wsServers:this.options.ua.wsServers,uri:this.options.ua.uri,authorizationUser:this.options.ua.authorizationUser,password:this.options.ua.password,displayName:this.options.ua.displayName,traceSip:this.options.ua.traceSip,userAgentString:this.options.ua.userAgentString,register:!0,sessionDescriptionHandlerFactoryOptions:o}),this.state=i.STATUS_NULL,this.logger=this.ua.getLogger("sip.simple"),this.ua.on("registered",function(){this.emit("registered",this.ua)}.bind(this)),this.ua.on("unregistered",function(){this.emit("unregistered",this.ua)}.bind(this)),this.ua.on("failed",function(){this.emit("unregistered",this.ua)}.bind(this)),this.ua.on("invite",function(e){if(this.state!==i.STATUS_NULL&&this.state!==i.STATUS_COMPLETED)return this.logger.warn("Rejecting incoming call. Simple only supports 1 call at a time"),void e.reject();this.session=e,this.setupSession(),this.emit("ringing",this.session)}.bind(this)),this.ua.on("message",function(e){this.emit("message",e)}.bind(this)),this};return s.prototype=Object.create(e.EventEmitter.prototype),s.C=i,s.prototype.call=function(e){if(this.ua&&this.checkRegistration()){if(this.state===i.STATUS_NULL||this.state===i.STATUS_COMPLETED)return this.options.media.remote.audio&&(this.options.media.remote.audio.autoplay=!0),this.options.media.remote.video&&(this.options.media.remote.video.autoplay=!0),this.options.media.local&&this.options.media.local.video&&(this.options.media.local.video.autoplay=!0,this.options.media.local.video.volume=0),this.session=this.ua.invite(e,{sessionDescriptionHandlerOptions:{constraints:{audio:this.audio,video:this.video}}}),this.setupSession(),this.session;this.logger.warn("Cannot make more than a single call with Simple")}else this.logger.warn("A registered UA is required for calling")},s.prototype.answer=function(){if(this.state===i.STATUS_NEW||this.state===i.STATUS_CONNECTING)return this.options.media.remote.audio&&(this.options.media.remote.audio.autoplay=!0),this.options.media.remote.video&&(this.options.media.remote.video.autoplay=!0),this.session.accept({sessionDescriptionHandlerOptions:{constraints:{audio:this.audio,video:this.video}}});this.logger.warn("No call to answer")},s.prototype.reject=function(){if(this.state===i.STATUS_NEW||this.state===i.STATUS_CONNECTING)return this.session.reject();this.logger.warn("Call is already answered")},s.prototype.hangup=function(){if(this.state===i.STATUS_CONNECTED||this.state===i.STATUS_CONNECTING||this.state===i.STATUS_NEW)return this.state!==i.STATUS_CONNECTED?this.session.cancel():this.session.bye();this.logger.warn("No active call to hang up on")},s.prototype.hold=function(){if(this.state===i.STATUS_CONNECTED&&!this.session.local_hold)return this.mute(),this.logger.log("Placing session on hold"),this.session.hold();this.logger.warn("Cannot put call on hold")},s.prototype.unhold=function(){if(this.state===i.STATUS_CONNECTED&&this.session.local_hold)return this.unmute(),this.logger.log("Placing call off hold"),this.session.unhold();this.logger.warn("Cannot unhold a call that is not on hold")},s.prototype.mute=function(){this.state===i.STATUS_CONNECTED?(this.logger.log("Muting Audio"),this.toggleMute(!0),this.emit("mute",this)):this.logger.warn("An acitve call is required to mute audio")},s.prototype.unmute=function(){this.state===i.STATUS_CONNECTED?(this.logger.log("Unmuting Audio"),this.toggleMute(!1),this.emit("unmute",this)):this.logger.warn("An active call is required to unmute audio")},s.prototype.sendDTMF=function(e){this.state===i.STATUS_CONNECTED?(this.logger.log("Sending DTMF tone: "+e),this.session.dtmf(e)):this.logger.warn("An active call is required to send a DTMF tone")},s.prototype.message=function(e,t){this.ua&&this.checkRegistration()?e&&t?this.ua.message(e,t):this.logger.warn("A destination and message are required to send a message"):this.logger.warn("A registered UA is required to send a message")},s.prototype.checkRegistration=function(){return this.anonymous||this.ua&&this.ua.isRegistered()},s.prototype.setupRemoteMedia=function(){var e,i=this.session.sessionDescriptionHandler.peerConnection;i.getReceivers?(e=new t.window.MediaStream,i.getReceivers().forEach(function(t){var i=t.track;i&&e.addTrack(i)})):e=i.getRemoteStreams()[0],this.video?(this.options.media.remote.video.srcObject=e,this.options.media.remote.video.play().catch(function(){this.logger.log("play was rejected")}.bind(this))):this.audio&&(this.options.media.remote.audio.srcObject=e,this.options.media.remote.audio.play().catch(function(){this.logger.log("play was rejected")}.bind(this)))},s.prototype.setupLocalMedia=function(){if(this.video&&this.options.media.local&&this.options.media.local.video){var e,i=this.session.sessionDescriptionHandler.peerConnection;i.getSenders?(e=new t.window.MediaStream,i.getSenders().forEach(function(t){var i=t.track;i&&"video"===i.kind&&e.addTrack(i)})):e=i.getLocalStreams()[0],this.options.media.local.video.srcObject=e,this.options.media.local.video.volume=0,this.options.media.local.video.play()}},s.prototype.cleanupMedia=function(){this.video&&(this.options.media.remote.video.srcObject=null,this.options.media.remote.video.pause(),this.options.media.local&&this.options.media.local.video&&(this.options.media.local.video.srcObject=null,this.options.media.local.video.pause())),this.audio&&(this.options.media.remote.audio.srcObject=null,this.options.media.remote.audio.pause())},s.prototype.setupSession=function(){this.state=i.STATUS_NEW,this.emit("new",this.session),this.session.on("progress",this.onProgress.bind(this)),this.session.on("accepted",this.onAccepted.bind(this)),this.session.on("rejected",this.onEnded.bind(this)),this.session.on("failed",this.onFailed.bind(this)),this.session.on("terminated",this.onEnded.bind(this))},s.prototype.destroyMedia=function(){this.session.sessionDescriptionHandler.close()},s.prototype.toggleMute=function(e){var t=this.session.sessionDescriptionHandler.peerConnection;t.getSenders?t.getSenders().forEach(function(t){t.track&&(t.track.enabled=!e)}):t.getLocalStreams().forEach(function(t){t.getAudioTracks().forEach(function(t){t.enabled=!e}),t.getVideoTracks().forEach(function(t){t.enabled=!e})})},s.prototype.onAccepted=function(){this.state=i.STATUS_CONNECTED,this.emit("connected",this.session),this.setupLocalMedia(),this.setupRemoteMedia(),this.session.sessionDescriptionHandler.on("addTrack",function(){this.logger.log("A track has been added, triggering new remoteMedia setup"),this.setupRemoteMedia()}.bind(this)),this.session.sessionDescriptionHandler.on("addStream",function(){this.logger.log("A stream has been added, trigger new remoteMedia setup"),this.setupRemoteMedia()}.bind(this)),this.session.on("hold",function(){this.emit("hold",this.session)}.bind(this)),this.session.on("unhold",function(){this.emit("unhold",this.session)}.bind(this)),this.session.on("dtmf",function(e){this.emit("dtmf",e)}.bind(this)),this.session.on("bye",this.onEnded.bind(this))},s.prototype.onProgress=function(){this.state=i.STATUS_CONNECTING,this.emit("connecting",this.session)},s.prototype.onFailed=function(){this.onEnded()},s.prototype.onEnded=function(){this.state=i.STATUS_COMPLETED,this.emit("ended",this.session),this.cleanupMedia()},s}}).call(t,i(0))},function(e,t,i){"use strict";(function(t){function s(e,t){if(null!=e){var i=t.charAt(0).toUpperCase()+t.slice(1),s=[t,"webkit"+i,"moz"+i];for(var r in s){var n=e[s[r]];if(n)return n.bind(e)}}}var r=t.window||t;e.exports={WebSocket:r.WebSocket,Transport:i(35),open:r.open,Promise:r.Promise,timers:r,console:r.console||{debug:function(){},log:function(){},warn:function(){},error:function(){}},addEventListener:s(r,"addEventListener"),removeEventListener:s(r,"removeEventListener")}}).call(t,i(0))},function(e,t,i){"use strict";e.exports=function(e,t){var i;return i=function(e,t){this.logger=e.getLogger("sip.transport"),this.ua=e,this.ws=null,this.server=t,this.reconnection_attempts=0,this.closed=!1,this.connected=!1,this.reconnectTimer=null,this.lastTransportError={},this.keepAliveInterval=e.configuration.keepAliveInterval,this.keepAliveTimeout=null,this.keepAliveTimer=null,this.ua.transport=this,this.connect()},i.prototype={send:function(e){var i=e.toString();return this.ws&&this.ws.readyState===t.OPEN?(!0===this.ua.configuration.traceSip&&this.logger.log("sending WebSocket message:\\n\\n"+i+"\\n"),this.ws.send(i),!0):(this.logger.warn("unable to send message, WebSocket is not open"),!1)},sendKeepAlive:function(){if(!this.keepAliveTimeout)return this.keepAliveTimeout=e.Timers.setTimeout(function(){this.ua.emit("keepAliveTimeout")}.bind(this),1e4),this.send("\\r\\n\\r\\n")},startSendingKeepAlives:function(){this.keepAliveInterval&&!this.keepAliveTimer&&(this.keepAliveTimer=e.Timers.setTimeout(function(){this.sendKeepAlive(),this.keepAliveTimer=null,this.startSendingKeepAlives()}.bind(this),function(e){var t=.8*e;return 1e3*(Math.random()*(e-t)+t)}(this.keepAliveInterval)))},stopSendingKeepAlives:function(){e.Timers.clearTimeout(this.keepAliveTimer),e.Timers.clearTimeout(this.keepAliveTimeout),this.keepAliveTimer=null,this.keepAliveTimeout=null},disconnect:function(){this.ws&&(e.Timers.clearTimeout(this.reconnectTimer),this.stopSendingKeepAlives(),this.closed=!0,this.logger.log("closing WebSocket "+this.server.ws_uri),this.ws.close(),this.ws=null),null!==this.reconnectTimer&&(e.Timers.clearTimeout(this.reconnectTimer),this.reconnectTimer=null,this.ua.emit("disconnected",{transport:this,code:this.lastTransportError.code,reason:this.lastTransportError.reason}))},connect:function(){var e=this;if(this.ws&&(this.ws.readyState===t.OPEN||this.ws.readyState===t.CONNECTING))return this.logger.log("WebSocket "+this.server.ws_uri+" is already connected"),!1;this.ws&&(this.ws.close(),this.ws=null),this.logger.log("connecting to WebSocket "+this.server.ws_uri),this.ua.onTransportConnecting(this,0===this.reconnection_attempts?1:this.reconnection_attempts);try{this.ws=new t(this.server.ws_uri,"sip")}catch(e){this.logger.warn("error connecting to WebSocket "+this.server.ws_uri+": "+e)}this.ws.binaryType="arraybuffer",this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(t){e.onClose(t),this.onopen=null,this.onclose=null,this.onmessage=null,this.onerror=null},this.ws.onmessage=function(t){e.onMessage(t)},this.ws.onerror=function(t){e.onError(t)}},onOpen:function(){this.connected=!0,this.logger.log("WebSocket "+this.server.ws_uri+" connected"),null!==this.reconnectTimer&&(e.Timers.clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.reconnection_attempts=0,this.closed=!1,this.ua.onTransportConnected(this),this.startSendingKeepAlives()},onClose:function(e){var t=this.connected;this.lastTransportError.code=e.code,this.lastTransportError.reason=e.reason,this.stopSendingKeepAlives(),this.reconnection_attempts>0?(this.logger.log("Reconnection attempt "+this.reconnection_attempts+" failed (code: "+e.code+(e.reason?"| reason: "+e.reason:"")+")"),this.reconnect()):(this.connected=!1,this.logger.log("WebSocket disconnected (code: "+e.code+(e.reason?"| reason: "+e.reason:"")+")"),!1===e.wasClean&&this.logger.warn("WebSocket abrupt disconnection"),!0===t?(this.ua.onTransportClosed(this),this.closed?this.ua.emit("disconnected",{transport:this,code:this.lastTransportError.code,reason:this.lastTransportError.reason}):this.reconnect()):this.ua.onTransportError(this))},onMessage:function(t){var i,s,r=t.data;if("\\r\\n"===r)return e.Timers.clearTimeout(this.keepAliveTimeout),this.keepAliveTimeout=null,void(!0===this.ua.configuration.traceSip&&this.logger.log("received WebSocket message with CRLF Keep Alive response"));if("string"!=typeof r){try{r=String.fromCharCode.apply(null,new Uint8Array(r))}catch(e){return void this.logger.warn("received WebSocket binary message failed to be converted into string, message discarded")}!0===this.ua.configuration.traceSip&&this.logger.log("received WebSocket binary message:\\n\\n"+r+"\\n")}else!0===this.ua.configuration.traceSip&&this.logger.log("received WebSocket text message:\\n\\n"+r+"\\n");if((i=e.Parser.parseMessage(r,this.ua))&&!(this.ua.status===e.UA.C.STATUS_USER_CLOSED&&i instanceof e.IncomingRequest)&&e.sanityCheck(i,this.ua,this))if(i instanceof e.IncomingRequest)i.transport=this,this.ua.receiveRequest(i);else if(i instanceof e.IncomingResponse)switch(i.method){case e.C.INVITE:(s=this.ua.transactions.ict[i.via_branch])&&s.receiveResponse(i);break;case e.C.ACK:break;default:(s=this.ua.transactions.nict[i.via_branch])&&s.receiveResponse(i)}},onError:function(e){this.logger.warn("WebSocket connection error: "),this.logger.warn(e)},reconnect:function(){var t=this;this.reconnection_attempts+=1,this.reconnection_attempts>this.ua.configuration.wsServerMaxReconnection?(this.logger.warn("maximum reconnection attempts for WebSocket "+this.server.ws_uri),this.ua.onTransportError(this)):1===this.reconnection_attempts?(this.logger.log("Connection to WebSocket "+this.server.ws_uri+" severed, attempting first reconnect"),t.connect()):(this.logger.log("trying to reconnect to WebSocket "+this.server.ws_uri+" (reconnection attempt "+this.reconnection_attempts+")"),this.reconnectTimer=e.Timers.setTimeout(function(){t.connect(),t.reconnectTimer=null},1e3*this.ua.configuration.wsServerReconnectionTimeout))}},i.C={STATUS_READY:0,STATUS_DISCONNECTED:1,STATUS_ERROR:2},i}}])});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvc2lwLmpzL2Rpc3Qvc2lwLm1pbi5qcz80ODgzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogXG4gKiAgU0lQIHZlcnNpb24gMC45LjJcbiAqICBDb3B5cmlnaHQgKGMpIDIwMTQtMjAxOCBKdW5jdGlvbiBOZXR3b3JrcywgSW5jIDxodHRwOi8vd3d3Lm9uc2lwLmNvbT5cbiAqICBIb21lcGFnZTogaHR0cHM6Ly9zaXBqcy5jb21cbiAqICBMaWNlbnNlOiBodHRwczovL3NpcGpzLmNvbS9saWNlbnNlL1xuICogXG4gKiBcbiAqICB+fn5TSVAuanMgY29udGFpbnMgc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgSnNTSVAgdW5kZXIgdGhlIGZvbGxvd2luZyBsaWNlbnNlfn5+XG4gKiAgSG9tZXBhZ2U6IGh0dHA6Ly9qc3NpcC5uZXRcbiAqICBDb3B5cmlnaHQgKGMpIDIwMTItMjAxMyBKb3PDqSBMdWlzIE1pbGzDoW4gLSBWZXJzYXRpY2EgPGh0dHA6Ly93d3cudmVyc2F0aWNhLmNvbT5cbiAqIFxuICogIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZ1xuICogIGEgY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuICogIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuICogIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbiAqICBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG9cbiAqICBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG9cbiAqICB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4gKiBcbiAqICBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZVxuICogIGluY2x1ZGVkIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuICogXG4gKiAgVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCxcbiAqICBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0ZcbiAqICBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORFxuICogIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkVcbiAqICBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OXG4gKiAgT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OXG4gKiAgV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG4gKiBcbiAqICB+fn4gZW5kIEpzU0lQIGxpY2Vuc2Ugfn5+XG4gKiBcbiAqIFxuICogXG4gKiBcbiAqL1xuIWZ1bmN0aW9uKGUsdCl7XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMmJlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGU/bW9kdWxlLmV4cG9ydHM9dCgpOlwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW10sdCk6XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHM/ZXhwb3J0cy5TSVA9dCgpOmUuU0lQPXQoKX0oXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGY/c2VsZjp0aGlzLGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQocyl7aWYoaVtzXSlyZXR1cm4gaVtzXS5leHBvcnRzO3ZhciByPWlbc109e2k6cyxsOiExLGV4cG9ydHM6e319O3JldHVybiBlW3NdLmNhbGwoci5leHBvcnRzLHIsci5leHBvcnRzLHQpLHIubD0hMCxyLmV4cG9ydHN9dmFyIGk9e307cmV0dXJuIHQubT1lLHQuYz1pLHQuZD1mdW5jdGlvbihlLGkscyl7dC5vKGUsaSl8fE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLGkse2NvbmZpZ3VyYWJsZTohMSxlbnVtZXJhYmxlOiEwLGdldDpzfSl9LHQubj1mdW5jdGlvbihlKXt2YXIgaT1lJiZlLl9fZXNNb2R1bGU/ZnVuY3Rpb24oKXtyZXR1cm4gZS5kZWZhdWx0fTpmdW5jdGlvbigpe3JldHVybiBlfTtyZXR1cm4gdC5kKGksXCJhXCIsaSksaX0sdC5vPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHQpfSx0LnA9XCJcIix0KHQucz0xKX0oW2Z1bmN0aW9uKGUsdCl7dmFyIGk7aT1mdW5jdGlvbigpe3JldHVybiB0aGlzfSgpO3RyeXtpPWl8fEZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKXx8KDAsZXZhbCkoXCJ0aGlzXCIpfWNhdGNoKGUpe1wib2JqZWN0XCI9PXR5cGVvZiB3aW5kb3cmJihpPXdpbmRvdyl9ZS5leHBvcnRzPWl9LGZ1bmN0aW9uKGUsdCxpKXtcInVzZSBzdHJpY3RcIjtlLmV4cG9ydHM9aSgyKShpKDM0KSl9LGZ1bmN0aW9uKGUsdCxpKXtcInVzZSBzdHJpY3RcIjtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQ9aSgzKSxzPXQudmVyc2lvbixyPXQudGl0bGUsbj1PYmplY3QuZGVmaW5lUHJvcGVydGllcyh7fSx7dmVyc2lvbjp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHN9fSxuYW1lOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gcn19fSk7cmV0dXJuIGkoNCkobixlKSxuLkxvZ2dlckZhY3Rvcnk9aSg1KShlLmNvbnNvbGUpLG4uRXZlbnRFbWl0dGVyPWkoNikoKSxuLkM9aSg4KShuLm5hbWUsbi52ZXJzaW9uKSxuLkV4Y2VwdGlvbnM9aSg5KSxuLlRpbWVycz1pKDEwKShlLnRpbWVycyksbi5UcmFuc3BvcnQ9ZS5UcmFuc3BvcnQobixlLldlYlNvY2tldCksaSgxMSkobiksaSgxMikobiksaSgxMykobiksaSgxNCkobiksaSgxNSkobiksaSgxNikobiksaSgxOCkobiksaSgxOSkobiksbi5TZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyPWkoMjApKG4uRXZlbnRFbWl0dGVyKSxpKDIxKShuKSxpKDIyKShuKSxpKDIzKShuKSxpKDI1KShuKSxpKDI2KShuLGUpLGkoMjgpKG4pLG4uRGlnZXN0QXV0aGVudGljYXRpb249aSgyOSkobi5VdGlscyksbi5HcmFtbWFyPWkoMzApKG4pLG4uV2ViUlRDPXtNb2RpZmllcnM6aSgzMikobiksU2ltcGxlOmkoMzMpKG4pfSxufX0sZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9e25hbWU6XCJzaXAuanNcIix0aXRsZTpcIlNJUC5qc1wiLGRlc2NyaXB0aW9uOlwiQSBzaW1wbGUsIGludHVpdGl2ZSwgYW5kIHBvd2VyZnVsIEphdmFTY3JpcHQgc2lnbmFsaW5nIGxpYnJhcnlcIix2ZXJzaW9uOlwiMC45LjJcIixtYWluOlwiZGlzdC9zaXAubWluLmpzXCIsYnJvd3Nlcjp7XCIuL3NyYy9lbnZpcm9ubWVudC5qc1wiOlwiLi9zcmMvZW52aXJvbm1lbnRfYnJvd3Nlci5qc1wifSxob21lcGFnZTpcImh0dHBzOi8vc2lwanMuY29tXCIsYXV0aG9yOlwiT25TSVAgPGRldmVsb3BlckBvbnNpcC5jb20+IChodHRwczovL3NpcGpzLmNvbS9hYm91dHVzLylcIixjb250cmlidXRvcnM6W3t1cmw6XCJodHRwczovL2dpdGh1Yi5jb20vb25zaXAvU0lQLmpzL2Jsb2IvbWFzdGVyL1RIQU5LUy5tZFwifV0scmVwb3NpdG9yeTp7dHlwZTpcImdpdFwiLHVybDpcImh0dHBzOi8vZ2l0aHViLmNvbS9vbnNpcC9TSVAuanMuZ2l0XCJ9LGtleXdvcmRzOltcInNpcFwiLFwid2Vic29ja2V0XCIsXCJ3ZWJydGNcIixcImxpYnJhcnlcIixcImphdmFzY3JpcHRcIl0sZGV2RGVwZW5kZW5jaWVzOntcImJhYmVsLWNvcmVcIjpcIl42LjI2LjBcIixcImJhYmVsLWxvYWRlclwiOlwiXjcuMS4yXCIsXCJiYWJlbC1wcmVzZXQtZW52XCI6XCJeMS42LjFcIixlc2xpbnQ6XCJeNC45LjBcIixcImphc21pbmUtY29yZVwiOlwiXjIuOC4wXCIsa2FybWE6XCJeMS43LjFcIixcImthcm1hLWNsaVwiOlwiXjEuMC4xXCIsXCJrYXJtYS1qYXNtaW5lXCI6XCJeMS4xLjBcIixcImthcm1hLWphc21pbmUtaHRtbC1yZXBvcnRlclwiOlwiXjAuMi4yXCIsXCJrYXJtYS1tb2NoYS1yZXBvcnRlclwiOlwiXjIuMi41XCIsXCJrYXJtYS1waGFudG9tanMtbGF1bmNoZXJcIjpcIl4xLjAuNFwiLFwia2FybWEtd2VicGFja1wiOlwiXjIuMC42XCIscGVnanM6XCJeMC4xMC4wXCIsXCJwZWdqcy1sb2FkZXJcIjpcIl4wLjUuNFwiLFwidWdsaWZ5anMtd2VicGFjay1wbHVnaW5cIjpcIl4xLjAuMVwiLHdlYnBhY2s6XCJeMy44LjFcIn0sZW5naW5lczp7bm9kZTpcIj49NC4wXCJ9LGxpY2Vuc2U6XCJNSVRcIixzY3JpcHRzOntwcmVidWlsZDpcImVzbGludCBzcmMvKi5qcyBzcmMvKiovKi5qc1wiLGJ1aWxkOlwid2VicGFjayAtLXByb2dyZXNzICYmIGNwIGRpc3Qvc2lwLmpzIGRpc3Qvc2lwLSRucG1fcGFja2FnZV92ZXJzaW9uLmpzICYmIGNwIGRpc3Qvc2lwLm1pbi5qcyAgZGlzdC9zaXAtJG5wbV9wYWNrYWdlX3ZlcnNpb24ubWluLmpzXCIsYnJvd3NlclRlc3Q6XCJzbGVlcCAyICYmIG9wZW4gaHR0cDovLzAuMC4wLjA6OTg3Ni9kZWJ1Zy5odG1sICYga2FybWEgc3RhcnQgLS1yZXBvcnRlcnMga2podG1sIC0tbm8tc2luZ2xlLXJ1blwiLGNvbW1hbmRMaW5lVGVzdDpcImthcm1hIHN0YXJ0IC0tcmVwb3J0ZXJzIG1vY2hhIC0tYnJvd3NlcnMgUGhhbnRvbUpTIC0tc2luZ2xlLXJ1blwiLGJ1aWxkQW5kVGVzdDpcIm5wbSBydW4gYnVpbGQgJiYgbnBtIHJ1biBjb21tYW5kTGluZVRlc3RcIn0sZGVwZW5kZW5jaWVzOnt3czpcIl4xLjAuMVwifSxvcHRpb25hbERlcGVuZGVuY2llczp7cHJvbWlzY3VvdXM6XCJeMC42LjBcIn19fSxmdW5jdGlvbihlLHQsaSl7XCJ1c2Ugc3RyaWN0XCI7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7dmFyIGk7aT17UHJvbWlzZTp0LlByb21pc2UsZGVmZXI6ZnVuY3Rpb24oKXt2YXIgZT17fTtyZXR1cm4gZS5wcm9taXNlPW5ldyBpLlByb21pc2UoZnVuY3Rpb24odCxpKXtlLnJlc29sdmU9dCxlLnJlamVjdD1pfSksZX0scmVkdWNlUHJvbWlzZXM6ZnVuY3Rpb24odCxpKXtyZXR1cm4gdC5yZWR1Y2UoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT1lLnRoZW4odCl9LGUuVXRpbHMuUHJvbWlzZS5yZXNvbHZlKGkpKX0sYXVnbWVudDpmdW5jdGlvbihlLHQsaSxzKXt2YXIgcixuO249dC5wcm90b3R5cGU7Zm9yKHIgaW4gbikoc3x8dm9pZCAwPT09ZVtyXSkmJihlW3JdPW5bcl0pO3QuYXBwbHkoZSxpKX0sb3B0aW9uc092ZXJyaWRlOmZ1bmN0aW9uKGUsdCxpLHMscixuKXtzJiZlW2ldJiZyLndhcm4oaStcIiBpcyBkZXByZWNhdGVkLCBwbGVhc2UgdXNlIFwiK3QrXCIgaW5zdGVhZFwiKSxlW3RdJiZlW2ldJiZyLndhcm4odCtcIiBvdmVycmlkaW5nIFwiK2kpLGVbdF09ZVt0XXx8ZVtpXXx8bn0sc3RyX3V0ZjhfbGVuZ3RoOmZ1bmN0aW9uKGUpe3JldHVybiBlbmNvZGVVUklDb21wb25lbnQoZSkucmVwbGFjZSgvJVtBLUZcXGRdezJ9L2csXCJVXCIpLmxlbmd0aH0sZ2VuZXJhdGVGYWtlU0RQOmZ1bmN0aW9uKGUpe2lmKGUpe3ZhciB0PWUuaW5kZXhPZihcIm89XCIpLGk9ZS5pbmRleE9mKFwiXFxyXFxuXCIsdCk7cmV0dXJuXCJ2PTBcXHJcXG5cIitlLnNsaWNlKHQsaSkrXCJcXHJcXG5zPS1cXHJcXG50PTAgMFxcclxcbmM9SU4gSVA0IDAuMC4wLjBcIn19LGlzRnVuY3Rpb246ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMCE9PWUmJlwiW29iamVjdCBGdW5jdGlvbl1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKX0saXNEZWNpbWFsOmZ1bmN0aW9uKGUpe3JldHVybiFpc05hTihlKSYmcGFyc2VGbG9hdChlKT09PXBhcnNlSW50KGUsMTApfSxjcmVhdGVSYW5kb21Ub2tlbjpmdW5jdGlvbihlLHQpe3ZhciBpLHM9XCJcIjtmb3IodD10fHwzMixpPTA7aTxlO2krKylzKz0oTWF0aC5yYW5kb20oKSp0fDApLnRvU3RyaW5nKHQpO3JldHVybiBzfSxuZXdUYWc6ZnVuY3Rpb24oKXtyZXR1cm4gZS5VdGlscy5jcmVhdGVSYW5kb21Ub2tlbihlLlVBLkMuVEFHX0xFTkdUSCl9LG5ld1VVSUQ6ZnVuY3Rpb24oKXtyZXR1cm5cInh4eHh4eHh4LXh4eHgtNHh4eC15eHh4LXh4eHh4eHh4eHh4eFwiLnJlcGxhY2UoL1t4eV0vZyxmdW5jdGlvbihlKXt2YXIgdD0xNipNYXRoLnJhbmRvbSgpfDA7cmV0dXJuKFwieFwiPT09ZT90OjMmdHw4KS50b1N0cmluZygxNil9KX0saG9zdFR5cGU6ZnVuY3Rpb24odCl7aWYodClyZXR1cm4tMSE9PSh0PWUuR3JhbW1hci5wYXJzZSh0LFwiaG9zdFwiKSk/dC5ob3N0X3R5cGU6dm9pZCAwfSxub3JtYWxpemVUYXJnZXQ6ZnVuY3Rpb24odCxpKXt2YXIgcyxyLG47aWYodCl7aWYodCBpbnN0YW5jZW9mIGUuVVJJKXJldHVybiB0O2lmKFwic3RyaW5nXCI9PXR5cGVvZiB0KXtzd2l0Y2goKHM9dC5zcGxpdChcIkBcIikpLmxlbmd0aCl7Y2FzZSAxOmlmKCFpKXJldHVybjtyPXQsbj1pO2JyZWFrO2Nhc2UgMjpyPXNbMF0sbj1zWzFdO2JyZWFrO2RlZmF1bHQ6cj1zLnNsaWNlKDAscy5sZW5ndGgtMSkuam9pbihcIkBcIiksbj1zW3MubGVuZ3RoLTFdfXJldHVybiByPXIucmVwbGFjZSgvXihzaXBzP3x0ZWwpOi9pLFwiXCIpLC9eW1xcLVxcLlxcKFxcKV0qXFwrP1swLTlcXC1cXC5cXChcXCldKyQvLnRlc3QocikmJihyPXIucmVwbGFjZSgvW1xcLVxcLlxcKFxcKV0vZyxcIlwiKSksdD1lLkMuU0lQK1wiOlwiK2UuVXRpbHMuZXNjYXBlVXNlcihyKStcIkBcIituLGUuVVJJLnBhcnNlKHQpfX1lbHNlO30sZXNjYXBlVXNlcjpmdW5jdGlvbihlKXtyZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KGRlY29kZVVSSUNvbXBvbmVudChlKSkucmVwbGFjZSgvJTNBL2dpLFwiOlwiKS5yZXBsYWNlKC8lMkIvZ2ksXCIrXCIpLnJlcGxhY2UoLyUzRi9naSxcIj9cIikucmVwbGFjZSgvJTJGL2dpLFwiL1wiKX0saGVhZGVyaXplOmZ1bmN0aW9uKGUpe3ZhciB0LGk9e1wiQ2FsbC1JZFwiOlwiQ2FsbC1JRFwiLENzZXE6XCJDU2VxXCIsXCJNaW4tU2VcIjpcIk1pbi1TRVwiLFJhY2s6XCJSQWNrXCIsUnNlcTpcIlJTZXFcIixcIld3dy1BdXRoZW50aWNhdGVcIjpcIldXVy1BdXRoZW50aWNhdGVcIn0scz1lLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXy9nLFwiLVwiKS5zcGxpdChcIi1cIikscj1cIlwiLG49cy5sZW5ndGg7Zm9yKHQ9MDt0PG47dCsrKTAhPT10JiYocis9XCItXCIpLHIrPXNbdF0uY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrc1t0XS5zdWJzdHJpbmcoMSk7cmV0dXJuIGlbcl0mJihyPWlbcl0pLHJ9LHNpcEVycm9yQ2F1c2U6ZnVuY3Rpb24odCl7dmFyIGk7Zm9yKGkgaW4gZS5DLlNJUF9FUlJPUl9DQVVTRVMpaWYoLTEhPT1lLkMuU0lQX0VSUk9SX0NBVVNFU1tpXS5pbmRleE9mKHQpKXJldHVybiBlLkMuY2F1c2VzW2ldO3JldHVybiBlLkMuY2F1c2VzLlNJUF9GQUlMVVJFX0NPREV9LGdldFJlYXNvblBocmFzZTpmdW5jdGlvbih0LGkpe3JldHVybiBpfHxlLkMuUkVBU09OX1BIUkFTRVt0XXx8XCJcIn0sZ2V0UmVhc29uSGVhZGVyVmFsdWU6ZnVuY3Rpb24odCxpKXtyZXR1cm4gaT1lLlV0aWxzLmdldFJlYXNvblBocmFzZSh0LGkpLFwiU0lQIDtjYXVzZT1cIit0KycgO3RleHQ9XCInK2krJ1wiJ30sZ2V0Q2FuY2VsUmVhc29uOmZ1bmN0aW9uKHQsaSl7aWYodCYmdDwyMDB8fHQ+Njk5KXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIHN0YXR1c19jb2RlOiBcIit0KTtpZih0KXJldHVybiBlLlV0aWxzLmdldFJlYXNvbkhlYWRlclZhbHVlKHQsaSl9LGJ1aWxkU3RhdHVzTGluZTpmdW5jdGlvbihlLHQpe2lmKGU9ZXx8bnVsbCx0PXR8fG51bGwsIWV8fGU8MTAwfHxlPjY5OSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBzdGF0dXNfY29kZTogXCIrZSk7aWYodCYmXCJzdHJpbmdcIiE9dHlwZW9mIHQmJiEodCBpbnN0YW5jZW9mIFN0cmluZykpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgcmVhc29uX3BocmFzZTogXCIrdCk7cmV0dXJuIHQ9aS5nZXRSZWFzb25QaHJhc2UoZSx0KSxcIlNJUC8yLjAgXCIrZStcIiBcIit0K1wiXFxyXFxuXCJ9LGdldFJhbmRvbVRlc3ROZXRJUDpmdW5jdGlvbigpe3JldHVyblwiMTkyLjAuMi5cIitmdW5jdGlvbihlLHQpe3JldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqKHQtZSsxKStlKX0oMSwyNTQpfSxjYWxjdWxhdGVNRDU6ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHQpe3JldHVybiBlPDx0fGU+Pj4zMi10fWZ1bmN0aW9uIGkoZSx0KXt2YXIgaSxzLHIsbixvO3JldHVybiByPTIxNDc0ODM2NDgmZSxuPTIxNDc0ODM2NDgmdCxpPTEwNzM3NDE4MjQmZSxzPTEwNzM3NDE4MjQmdCxvPSgxMDczNzQxODIzJmUpKygxMDczNzQxODIzJnQpLGkmcz8yMTQ3NDgzNjQ4Xm9ecl5uOml8cz8xMDczNzQxODI0Jm8/MzIyMTIyNTQ3Ml5vXnJebjoxMDczNzQxODI0Xm9ecl5uOm9ecl5ufWZ1bmN0aW9uIHMoZSxzLHIsbixvLGEsYyl7cmV0dXJuIGU9aShlLGkoaShmdW5jdGlvbihlLHQsaSl7cmV0dXJuIGUmdHx+ZSZpfShzLHIsbiksbyksYykpLGkodChlLGEpLHMpfWZ1bmN0aW9uIHIoZSxzLHIsbixvLGEsYyl7cmV0dXJuIGU9aShlLGkoaShmdW5jdGlvbihlLHQsaSl7cmV0dXJuIGUmaXx0Jn5pfShzLHIsbiksbyksYykpLGkodChlLGEpLHMpfWZ1bmN0aW9uIG4oZSxzLHIsbixvLGEsYyl7cmV0dXJuIGU9aShlLGkoaShmdW5jdGlvbihlLHQsaSl7cmV0dXJuIGVedF5pfShzLHIsbiksbyksYykpLGkodChlLGEpLHMpfWZ1bmN0aW9uIG8oZSxzLHIsbixvLGEsYyl7cmV0dXJuIGU9aShlLGkoaShmdW5jdGlvbihlLHQsaSl7cmV0dXJuIHReKGV8fmkpfShzLHIsbiksbyksYykpLGkodChlLGEpLHMpfWZ1bmN0aW9uIGEoZSl7dmFyIHQsaT1cIlwiLHM9XCJcIjtmb3IodD0wO3Q8PTM7dCsrKWkrPShzPVwiMFwiKyhlPj4+OCp0JjI1NSkudG9TdHJpbmcoMTYpKS5zdWJzdHIocy5sZW5ndGgtMiwyKTtyZXR1cm4gaX12YXIgYyxoLHUsbCxkLHAsZyxmLFQsbT1bXTtmb3IobT1mdW5jdGlvbihlKXtmb3IodmFyIHQsaT1lLmxlbmd0aCxzPWkrOCxyPTE2Kigocy1zJTY0KS82NCsxKSxuPUFycmF5KHItMSksbz0wLGE9MDthPGk7KW89YSU0Kjgsblt0PShhLWElNCkvNF09blt0XXxlLmNoYXJDb2RlQXQoYSk8PG8sYSsrO3JldHVybiB0PShhLWElNCkvNCxvPWElNCo4LG5bdF09blt0XXwxMjg8PG8sbltyLTJdPWk8PDMsbltyLTFdPWk+Pj4yOSxufShlPWZ1bmN0aW9uKGUpe2U9ZS5yZXBsYWNlKC9cXHJcXG4vZyxcIlxcblwiKTtmb3IodmFyIHQ9XCJcIixpPTA7aTxlLmxlbmd0aDtpKyspe3ZhciBzPWUuY2hhckNvZGVBdChpKTtzPDEyOD90Kz1TdHJpbmcuZnJvbUNoYXJDb2RlKHMpOnM+MTI3JiZzPDIwNDg/KHQrPVN0cmluZy5mcm9tQ2hhckNvZGUocz4+NnwxOTIpLHQrPVN0cmluZy5mcm9tQ2hhckNvZGUoNjMmc3wxMjgpKToodCs9U3RyaW5nLmZyb21DaGFyQ29kZShzPj4xMnwyMjQpLHQrPVN0cmluZy5mcm9tQ2hhckNvZGUocz4+NiY2M3wxMjgpLHQrPVN0cmluZy5mcm9tQ2hhckNvZGUoNjMmc3wxMjgpKX1yZXR1cm4gdH0oZSkpLHA9MTczMjU4NDE5MyxnPTQwMjMyMzM0MTcsZj0yNTYyMzgzMTAyLFQ9MjcxNzMzODc4LGM9MDtjPG0ubGVuZ3RoO2MrPTE2KWg9cCx1PWcsbD1mLGQ9VCxnPW8oZz1vKGc9byhnPW8oZz1uKGc9bihnPW4oZz1uKGc9cihnPXIoZz1yKGc9cihnPXMoZz1zKGc9cyhnPXMoZyxmPXMoZixUPXMoVCxwPXMocCxnLGYsVCxtW2MrMF0sNywzNjE0MDkwMzYwKSxnLGYsbVtjKzFdLDEyLDM5MDU0MDI3MTApLHAsZyxtW2MrMl0sMTcsNjA2MTA1ODE5KSxULHAsbVtjKzNdLDIyLDMyNTA0NDE5NjYpLGY9cyhmLFQ9cyhULHA9cyhwLGcsZixULG1bYys0XSw3LDQxMTg1NDgzOTkpLGcsZixtW2MrNV0sMTIsMTIwMDA4MDQyNikscCxnLG1bYys2XSwxNywyODIxNzM1OTU1KSxULHAsbVtjKzddLDIyLDQyNDkyNjEzMTMpLGY9cyhmLFQ9cyhULHA9cyhwLGcsZixULG1bYys4XSw3LDE3NzAwMzU0MTYpLGcsZixtW2MrOV0sMTIsMjMzNjU1Mjg3OSkscCxnLG1bYysxMF0sMTcsNDI5NDkyNTIzMyksVCxwLG1bYysxMV0sMjIsMjMwNDU2MzEzNCksZj1zKGYsVD1zKFQscD1zKHAsZyxmLFQsbVtjKzEyXSw3LDE4MDQ2MDM2ODIpLGcsZixtW2MrMTNdLDEyLDQyNTQ2MjYxOTUpLHAsZyxtW2MrMTRdLDE3LDI3OTI5NjUwMDYpLFQscCxtW2MrMTVdLDIyLDEyMzY1MzUzMjkpLGY9cihmLFQ9cihULHA9cihwLGcsZixULG1bYysxXSw1LDQxMjkxNzA3ODYpLGcsZixtW2MrNl0sOSwzMjI1NDY1NjY0KSxwLGcsbVtjKzExXSwxNCw2NDM3MTc3MTMpLFQscCxtW2MrMF0sMjAsMzkyMTA2OTk5NCksZj1yKGYsVD1yKFQscD1yKHAsZyxmLFQsbVtjKzVdLDUsMzU5MzQwODYwNSksZyxmLG1bYysxMF0sOSwzODAxNjA4MykscCxnLG1bYysxNV0sMTQsMzYzNDQ4ODk2MSksVCxwLG1bYys0XSwyMCwzODg5NDI5NDQ4KSxmPXIoZixUPXIoVCxwPXIocCxnLGYsVCxtW2MrOV0sNSw1Njg0NDY0MzgpLGcsZixtW2MrMTRdLDksMzI3NTE2MzYwNikscCxnLG1bYyszXSwxNCw0MTA3NjAzMzM1KSxULHAsbVtjKzhdLDIwLDExNjM1MzE1MDEpLGY9cihmLFQ9cihULHA9cihwLGcsZixULG1bYysxM10sNSwyODUwMjg1ODI5KSxnLGYsbVtjKzJdLDksNDI0MzU2MzUxMikscCxnLG1bYys3XSwxNCwxNzM1MzI4NDczKSxULHAsbVtjKzEyXSwyMCwyMzY4MzU5NTYyKSxmPW4oZixUPW4oVCxwPW4ocCxnLGYsVCxtW2MrNV0sNCw0Mjk0NTg4NzM4KSxnLGYsbVtjKzhdLDExLDIyNzIzOTI4MzMpLHAsZyxtW2MrMTFdLDE2LDE4MzkwMzA1NjIpLFQscCxtW2MrMTRdLDIzLDQyNTk2NTc3NDApLGY9bihmLFQ9bihULHA9bihwLGcsZixULG1bYysxXSw0LDI3NjM5NzUyMzYpLGcsZixtW2MrNF0sMTEsMTI3Mjg5MzM1MykscCxnLG1bYys3XSwxNiw0MTM5NDY5NjY0KSxULHAsbVtjKzEwXSwyMywzMjAwMjM2NjU2KSxmPW4oZixUPW4oVCxwPW4ocCxnLGYsVCxtW2MrMTNdLDQsNjgxMjc5MTc0KSxnLGYsbVtjKzBdLDExLDM5MzY0MzAwNzQpLHAsZyxtW2MrM10sMTYsMzU3MjQ0NTMxNyksVCxwLG1bYys2XSwyMyw3NjAyOTE4OSksZj1uKGYsVD1uKFQscD1uKHAsZyxmLFQsbVtjKzldLDQsMzY1NDYwMjgwOSksZyxmLG1bYysxMl0sMTEsMzg3MzE1MTQ2MSkscCxnLG1bYysxNV0sMTYsNTMwNzQyNTIwKSxULHAsbVtjKzJdLDIzLDMyOTk2Mjg2NDUpLGY9byhmLFQ9byhULHA9byhwLGcsZixULG1bYyswXSw2LDQwOTYzMzY0NTIpLGcsZixtW2MrN10sMTAsMTEyNjg5MTQxNSkscCxnLG1bYysxNF0sMTUsMjg3ODYxMjM5MSksVCxwLG1bYys1XSwyMSw0MjM3NTMzMjQxKSxmPW8oZixUPW8oVCxwPW8ocCxnLGYsVCxtW2MrMTJdLDYsMTcwMDQ4NTU3MSksZyxmLG1bYyszXSwxMCwyMzk5OTgwNjkwKSxwLGcsbVtjKzEwXSwxNSw0MjkzOTE1NzczKSxULHAsbVtjKzFdLDIxLDIyNDAwNDQ0OTcpLGY9byhmLFQ9byhULHA9byhwLGcsZixULG1bYys4XSw2LDE4NzMzMTMzNTkpLGcsZixtW2MrMTVdLDEwLDQyNjQzNTU1NTIpLHAsZyxtW2MrNl0sMTUsMjczNDc2ODkxNiksVCxwLG1bYysxM10sMjEsMTMwOTE1MTY0OSksZj1vKGYsVD1vKFQscD1vKHAsZyxmLFQsbVtjKzRdLDYsNDE0OTQ0NDIyNiksZyxmLG1bYysxMV0sMTAsMzE3NDc1NjkxNykscCxnLG1bYysyXSwxNSw3MTg3ODcyNTkpLFQscCxtW2MrOV0sMjEsMzk1MTQ4MTc0NSkscD1pKHAsaCksZz1pKGcsdSksZj1pKGYsbCksVD1pKFQsZCk7cmV0dXJuKGEocCkrYShnKSthKGYpK2EoVCkpLnRvTG93ZXJDYXNlKCl9fSxlLlV0aWxzPWl9fSxmdW5jdGlvbihlLHQsaSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHM9e2Vycm9yOjAsd2FybjoxLGxvZzoyLGRlYnVnOjN9O2UuZXhwb3J0cz1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUsdCxpKXt0aGlzLmxvZ2dlcj1lLHRoaXMuY2F0ZWdvcnk9dCx0aGlzLmxhYmVsPWl9dmFyIGk9ZnVuY3Rpb24oKXt2YXIgZSx0PTIsaT0hMCxyPW51bGw7dGhpcy5sb2dnZXJzPXt9LGU9dGhpcy5nZXRMb2dnZXIoXCJzaXAubG9nZ2VyZmFjdG9yeVwiKSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLHtidWlsdGluRW5hYmxlZDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGl9LHNldDpmdW5jdGlvbih0KXtcImJvb2xlYW5cIj09dHlwZW9mIHQ/aT10OmUuZXJyb3IoJ2ludmFsaWQgXCJidWlsdGluRW5hYmxlZFwiIHBhcmFtZXRlciB2YWx1ZTogJytKU09OLnN0cmluZ2lmeSh0KSl9fSxsZXZlbDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHR9LHNldDpmdW5jdGlvbihpKXtpPj0wJiZpPD0zP3Q9aTppPjM/dD0zOnMuaGFzT3duUHJvcGVydHkoaSk/dD1zW2ldOmUuZXJyb3IoJ2ludmFsaWQgXCJsZXZlbFwiIHBhcmFtZXRlciB2YWx1ZTogJytKU09OLnN0cmluZ2lmeShpKSl9fSxjb25uZWN0b3I6e2dldDpmdW5jdGlvbigpe3JldHVybiByfSxzZXQ6ZnVuY3Rpb24odCl7bnVsbD09PXR8fFwiXCI9PT10fHx2b2lkIDA9PT10P3I9bnVsbDpcImZ1bmN0aW9uXCI9PXR5cGVvZiB0P3I9dDplLmVycm9yKCdpbnZhbGlkIFwiY29ubmVjdG9yXCIgcGFyYW1ldGVyIHZhbHVlOiAnK0pTT04uc3RyaW5naWZ5KHQpKX19fSl9O3JldHVybiBpLnByb3RvdHlwZS5wcmludD1mdW5jdGlvbih0LGkscyxyKXtpZihcInN0cmluZ1wiPT10eXBlb2Ygcil7dmFyIG49W25ldyBEYXRlLGldO3MmJm4ucHVzaChzKSxyPW4uY29uY2F0KHIpLmpvaW4oXCIgfCBcIil9dC5jYWxsKGUscil9LE9iamVjdC5rZXlzKHMpLmZvckVhY2goZnVuY3Rpb24ocil7dC5wcm90b3R5cGVbcl09ZnVuY3Rpb24oZSl7dGhpcy5sb2dnZXJbcl0odGhpcy5jYXRlZ29yeSx0aGlzLmxhYmVsLGUpfSxpLnByb3RvdHlwZVtyXT1mdW5jdGlvbih0LGksbil7dGhpcy5sZXZlbD49c1tyXSYmKHRoaXMuYnVpbHRpbkVuYWJsZWQmJnRoaXMucHJpbnQoZVtyXSx0LGksbiksdGhpcy5jb25uZWN0b3ImJnRoaXMuY29ubmVjdG9yKHIsdCxpLG4pKX19KSxpLnByb3RvdHlwZS5nZXRMb2dnZXI9ZnVuY3Rpb24oZSxpKXt2YXIgcztyZXR1cm4gaSYmMz09PXRoaXMubGV2ZWw/bmV3IHQodGhpcyxlLGkpOnRoaXMubG9nZ2Vyc1tlXT90aGlzLmxvZ2dlcnNbZV06KHM9bmV3IHQodGhpcyxlKSx0aGlzLmxvZ2dlcnNbZV09cyxzKX0saX19LGZ1bmN0aW9uKGUsdCxpKXtcInVzZSBzdHJpY3RcIjt2YXIgcz1pKDcpLkV2ZW50RW1pdHRlcjtlLmV4cG9ydHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7cy5jYWxsKHRoaXMpfXJldHVybiBlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHMucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6ZSxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlfX0sZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBpKCl7dGhpcy5fZXZlbnRzPXRoaXMuX2V2ZW50c3x8e30sdGhpcy5fbWF4TGlzdGVuZXJzPXRoaXMuX21heExpc3RlbmVyc3x8dm9pZCAwfWZ1bmN0aW9uIHMoZSl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgZX1mdW5jdGlvbiByKGUpe3JldHVyblwib2JqZWN0XCI9PXR5cGVvZiBlJiZudWxsIT09ZX1mdW5jdGlvbiBuKGUpe3JldHVybiB2b2lkIDA9PT1lfWUuZXhwb3J0cz1pLGkuRXZlbnRFbWl0dGVyPWksaS5wcm90b3R5cGUuX2V2ZW50cz12b2lkIDAsaS5wcm90b3R5cGUuX21heExpc3RlbmVycz12b2lkIDAsaS5kZWZhdWx0TWF4TGlzdGVuZXJzPTEwLGkucHJvdG90eXBlLnNldE1heExpc3RlbmVycz1mdW5jdGlvbihlKXtpZighZnVuY3Rpb24oZSl7cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIGV9KGUpfHxlPDB8fGlzTmFOKGUpKXRocm93IFR5cGVFcnJvcihcIm4gbXVzdCBiZSBhIHBvc2l0aXZlIG51bWJlclwiKTtyZXR1cm4gdGhpcy5fbWF4TGlzdGVuZXJzPWUsdGhpc30saS5wcm90b3R5cGUuZW1pdD1mdW5jdGlvbihlKXt2YXIgdCxpLG8sYSxjLGg7aWYodGhpcy5fZXZlbnRzfHwodGhpcy5fZXZlbnRzPXt9KSxcImVycm9yXCI9PT1lJiYoIXRoaXMuX2V2ZW50cy5lcnJvcnx8cih0aGlzLl9ldmVudHMuZXJyb3IpJiYhdGhpcy5fZXZlbnRzLmVycm9yLmxlbmd0aCkpe2lmKCh0PWFyZ3VtZW50c1sxXSlpbnN0YW5jZW9mIEVycm9yKXRocm93IHQ7dmFyIHU9bmV3IEVycm9yKCdVbmNhdWdodCwgdW5zcGVjaWZpZWQgXCJlcnJvclwiIGV2ZW50LiAoJyt0K1wiKVwiKTt0aHJvdyB1LmNvbnRleHQ9dCx1fWlmKGk9dGhpcy5fZXZlbnRzW2VdLG4oaSkpcmV0dXJuITE7aWYocyhpKSlzd2l0Y2goYXJndW1lbnRzLmxlbmd0aCl7Y2FzZSAxOmkuY2FsbCh0aGlzKTticmVhaztjYXNlIDI6aS5jYWxsKHRoaXMsYXJndW1lbnRzWzFdKTticmVhaztjYXNlIDM6aS5jYWxsKHRoaXMsYXJndW1lbnRzWzFdLGFyZ3VtZW50c1syXSk7YnJlYWs7ZGVmYXVsdDphPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKSxpLmFwcGx5KHRoaXMsYSl9ZWxzZSBpZihyKGkpKWZvcihhPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKSxvPShoPWkuc2xpY2UoKSkubGVuZ3RoLGM9MDtjPG87YysrKWhbY10uYXBwbHkodGhpcyxhKTtyZXR1cm4hMH0saS5wcm90b3R5cGUuYWRkTGlzdGVuZXI9ZnVuY3Rpb24oZSx0KXt2YXIgbztpZighcyh0KSl0aHJvdyBUeXBlRXJyb3IoXCJsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb25cIik7cmV0dXJuIHRoaXMuX2V2ZW50c3x8KHRoaXMuX2V2ZW50cz17fSksdGhpcy5fZXZlbnRzLm5ld0xpc3RlbmVyJiZ0aGlzLmVtaXQoXCJuZXdMaXN0ZW5lclwiLGUscyh0Lmxpc3RlbmVyKT90Lmxpc3RlbmVyOnQpLHRoaXMuX2V2ZW50c1tlXT9yKHRoaXMuX2V2ZW50c1tlXSk/dGhpcy5fZXZlbnRzW2VdLnB1c2godCk6dGhpcy5fZXZlbnRzW2VdPVt0aGlzLl9ldmVudHNbZV0sdF06dGhpcy5fZXZlbnRzW2VdPXQscih0aGlzLl9ldmVudHNbZV0pJiYhdGhpcy5fZXZlbnRzW2VdLndhcm5lZCYmKG89bih0aGlzLl9tYXhMaXN0ZW5lcnMpP2kuZGVmYXVsdE1heExpc3RlbmVyczp0aGlzLl9tYXhMaXN0ZW5lcnMpJiZvPjAmJnRoaXMuX2V2ZW50c1tlXS5sZW5ndGg+byYmKHRoaXMuX2V2ZW50c1tlXS53YXJuZWQ9ITAsY29uc29sZS5lcnJvcihcIihub2RlKSB3YXJuaW5nOiBwb3NzaWJsZSBFdmVudEVtaXR0ZXIgbWVtb3J5IGxlYWsgZGV0ZWN0ZWQuICVkIGxpc3RlbmVycyBhZGRlZC4gVXNlIGVtaXR0ZXIuc2V0TWF4TGlzdGVuZXJzKCkgdG8gaW5jcmVhc2UgbGltaXQuXCIsdGhpcy5fZXZlbnRzW2VdLmxlbmd0aCksXCJmdW5jdGlvblwiPT10eXBlb2YgY29uc29sZS50cmFjZSYmY29uc29sZS50cmFjZSgpKSx0aGlzfSxpLnByb3RvdHlwZS5vbj1pLnByb3RvdHlwZS5hZGRMaXN0ZW5lcixpLnByb3RvdHlwZS5vbmNlPWZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gaSgpe3RoaXMucmVtb3ZlTGlzdGVuZXIoZSxpKSxyfHwocj0hMCx0LmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9aWYoIXModCkpdGhyb3cgVHlwZUVycm9yKFwibGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uXCIpO3ZhciByPSExO3JldHVybiBpLmxpc3RlbmVyPXQsdGhpcy5vbihlLGkpLHRoaXN9LGkucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyPWZ1bmN0aW9uKGUsdCl7dmFyIGksbixvLGE7aWYoIXModCkpdGhyb3cgVHlwZUVycm9yKFwibGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uXCIpO2lmKCF0aGlzLl9ldmVudHN8fCF0aGlzLl9ldmVudHNbZV0pcmV0dXJuIHRoaXM7aWYoaT10aGlzLl9ldmVudHNbZV0sbz1pLmxlbmd0aCxuPS0xLGk9PT10fHxzKGkubGlzdGVuZXIpJiZpLmxpc3RlbmVyPT09dClkZWxldGUgdGhpcy5fZXZlbnRzW2VdLHRoaXMuX2V2ZW50cy5yZW1vdmVMaXN0ZW5lciYmdGhpcy5lbWl0KFwicmVtb3ZlTGlzdGVuZXJcIixlLHQpO2Vsc2UgaWYocihpKSl7Zm9yKGE9bzthLS0gPjA7KWlmKGlbYV09PT10fHxpW2FdLmxpc3RlbmVyJiZpW2FdLmxpc3RlbmVyPT09dCl7bj1hO2JyZWFrfWlmKG48MClyZXR1cm4gdGhpczsxPT09aS5sZW5ndGg/KGkubGVuZ3RoPTAsZGVsZXRlIHRoaXMuX2V2ZW50c1tlXSk6aS5zcGxpY2UobiwxKSx0aGlzLl9ldmVudHMucmVtb3ZlTGlzdGVuZXImJnRoaXMuZW1pdChcInJlbW92ZUxpc3RlbmVyXCIsZSx0KX1yZXR1cm4gdGhpc30saS5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzPWZ1bmN0aW9uKGUpe3ZhciB0LGk7aWYoIXRoaXMuX2V2ZW50cylyZXR1cm4gdGhpcztpZighdGhpcy5fZXZlbnRzLnJlbW92ZUxpc3RlbmVyKXJldHVybiAwPT09YXJndW1lbnRzLmxlbmd0aD90aGlzLl9ldmVudHM9e306dGhpcy5fZXZlbnRzW2VdJiZkZWxldGUgdGhpcy5fZXZlbnRzW2VdLHRoaXM7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpe2Zvcih0IGluIHRoaXMuX2V2ZW50cylcInJlbW92ZUxpc3RlbmVyXCIhPT10JiZ0aGlzLnJlbW92ZUFsbExpc3RlbmVycyh0KTtyZXR1cm4gdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoXCJyZW1vdmVMaXN0ZW5lclwiKSx0aGlzLl9ldmVudHM9e30sdGhpc31pZihpPXRoaXMuX2V2ZW50c1tlXSxzKGkpKXRoaXMucmVtb3ZlTGlzdGVuZXIoZSxpKTtlbHNlIGlmKGkpZm9yKDtpLmxlbmd0aDspdGhpcy5yZW1vdmVMaXN0ZW5lcihlLGlbaS5sZW5ndGgtMV0pO3JldHVybiBkZWxldGUgdGhpcy5fZXZlbnRzW2VdLHRoaXN9LGkucHJvdG90eXBlLmxpc3RlbmVycz1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZXZlbnRzJiZ0aGlzLl9ldmVudHNbZV0/cyh0aGlzLl9ldmVudHNbZV0pP1t0aGlzLl9ldmVudHNbZV1dOnRoaXMuX2V2ZW50c1tlXS5zbGljZSgpOltdfSxpLnByb3RvdHlwZS5saXN0ZW5lckNvdW50PWZ1bmN0aW9uKGUpe2lmKHRoaXMuX2V2ZW50cyl7dmFyIHQ9dGhpcy5fZXZlbnRzW2VdO2lmKHModCkpcmV0dXJuIDE7aWYodClyZXR1cm4gdC5sZW5ndGh9cmV0dXJuIDB9LGkubGlzdGVuZXJDb3VudD1mdW5jdGlvbihlLHQpe3JldHVybiBlLmxpc3RlbmVyQ291bnQodCl9fSxmdW5jdGlvbihlLHQsaSl7XCJ1c2Ugc3RyaWN0XCI7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJue1VTRVJfQUdFTlQ6ZStcIi9cIit0LFNJUDpcInNpcFwiLFNJUFM6XCJzaXBzXCIsY2F1c2VzOntDT05ORUNUSU9OX0VSUk9SOlwiQ29ubmVjdGlvbiBFcnJvclwiLFJFUVVFU1RfVElNRU9VVDpcIlJlcXVlc3QgVGltZW91dFwiLFNJUF9GQUlMVVJFX0NPREU6XCJTSVAgRmFpbHVyZSBDb2RlXCIsSU5URVJOQUxfRVJST1I6XCJJbnRlcm5hbCBFcnJvclwiLEJVU1k6XCJCdXN5XCIsUkVKRUNURUQ6XCJSZWplY3RlZFwiLFJFRElSRUNURUQ6XCJSZWRpcmVjdGVkXCIsVU5BVkFJTEFCTEU6XCJVbmF2YWlsYWJsZVwiLE5PVF9GT1VORDpcIk5vdCBGb3VuZFwiLEFERFJFU1NfSU5DT01QTEVURTpcIkFkZHJlc3MgSW5jb21wbGV0ZVwiLElOQ09NUEFUSUJMRV9TRFA6XCJJbmNvbXBhdGlibGUgU0RQXCIsQVVUSEVOVElDQVRJT05fRVJST1I6XCJBdXRoZW50aWNhdGlvbiBFcnJvclwiLERJQUxPR19FUlJPUjpcIkRpYWxvZyBFcnJvclwiLFdFQlJUQ19OT1RfU1VQUE9SVEVEOlwiV2ViUlRDIE5vdCBTdXBwb3J0ZWRcIixXRUJSVENfRVJST1I6XCJXZWJSVEMgRXJyb3JcIixDQU5DRUxFRDpcIkNhbmNlbGVkXCIsTk9fQU5TV0VSOlwiTm8gQW5zd2VyXCIsRVhQSVJFUzpcIkV4cGlyZXNcIixOT19BQ0s6XCJObyBBQ0tcIixOT19QUkFDSzpcIk5vIFBSQUNLXCIsVVNFUl9ERU5JRURfTUVESUFfQUNDRVNTOlwiVXNlciBEZW5pZWQgTWVkaWEgQWNjZXNzXCIsQkFEX01FRElBX0RFU0NSSVBUSU9OOlwiQmFkIE1lZGlhIERlc2NyaXB0aW9uXCIsUlRQX1RJTUVPVVQ6XCJSVFAgVGltZW91dFwifSxzdXBwb3J0ZWQ6e1VOU1VQUE9SVEVEOlwibm9uZVwiLFNVUFBPUlRFRDpcInN1cHBvcnRlZFwiLFJFUVVJUkVEOlwicmVxdWlyZWRcIn0sU0lQX0VSUk9SX0NBVVNFUzp7UkVESVJFQ1RFRDpbMzAwLDMwMSwzMDIsMzA1LDM4MF0sQlVTWTpbNDg2LDYwMF0sUkVKRUNURUQ6WzQwMyw2MDNdLE5PVF9GT1VORDpbNDA0LDYwNF0sVU5BVkFJTEFCTEU6WzQ4MCw0MTAsNDA4LDQzMF0sQUREUkVTU19JTkNPTVBMRVRFOls0ODRdLElOQ09NUEFUSUJMRV9TRFA6WzQ4OCw2MDZdLEFVVEhFTlRJQ0FUSU9OX0VSUk9SOls0MDEsNDA3XX0sQUNLOlwiQUNLXCIsQllFOlwiQllFXCIsQ0FOQ0VMOlwiQ0FOQ0VMXCIsSU5GTzpcIklORk9cIixJTlZJVEU6XCJJTlZJVEVcIixNRVNTQUdFOlwiTUVTU0FHRVwiLE5PVElGWTpcIk5PVElGWVwiLE9QVElPTlM6XCJPUFRJT05TXCIsUkVHSVNURVI6XCJSRUdJU1RFUlwiLFVQREFURTpcIlVQREFURVwiLFNVQlNDUklCRTpcIlNVQlNDUklCRVwiLFJFRkVSOlwiUkVGRVJcIixQUkFDSzpcIlBSQUNLXCIsUkVBU09OX1BIUkFTRTp7MTAwOlwiVHJ5aW5nXCIsMTgwOlwiUmluZ2luZ1wiLDE4MTpcIkNhbGwgSXMgQmVpbmcgRm9yd2FyZGVkXCIsMTgyOlwiUXVldWVkXCIsMTgzOlwiU2Vzc2lvbiBQcm9ncmVzc1wiLDE5OTpcIkVhcmx5IERpYWxvZyBUZXJtaW5hdGVkXCIsMjAwOlwiT0tcIiwyMDI6XCJBY2NlcHRlZFwiLDIwNDpcIk5vIE5vdGlmaWNhdGlvblwiLDMwMDpcIk11bHRpcGxlIENob2ljZXNcIiwzMDE6XCJNb3ZlZCBQZXJtYW5lbnRseVwiLDMwMjpcIk1vdmVkIFRlbXBvcmFyaWx5XCIsMzA1OlwiVXNlIFByb3h5XCIsMzgwOlwiQWx0ZXJuYXRpdmUgU2VydmljZVwiLDQwMDpcIkJhZCBSZXF1ZXN0XCIsNDAxOlwiVW5hdXRob3JpemVkXCIsNDAyOlwiUGF5bWVudCBSZXF1aXJlZFwiLDQwMzpcIkZvcmJpZGRlblwiLDQwNDpcIk5vdCBGb3VuZFwiLDQwNTpcIk1ldGhvZCBOb3QgQWxsb3dlZFwiLDQwNjpcIk5vdCBBY2NlcHRhYmxlXCIsNDA3OlwiUHJveHkgQXV0aGVudGljYXRpb24gUmVxdWlyZWRcIiw0MDg6XCJSZXF1ZXN0IFRpbWVvdXRcIiw0MTA6XCJHb25lXCIsNDEyOlwiQ29uZGl0aW9uYWwgUmVxdWVzdCBGYWlsZWRcIiw0MTM6XCJSZXF1ZXN0IEVudGl0eSBUb28gTGFyZ2VcIiw0MTQ6XCJSZXF1ZXN0LVVSSSBUb28gTG9uZ1wiLDQxNTpcIlVuc3VwcG9ydGVkIE1lZGlhIFR5cGVcIiw0MTY6XCJVbnN1cHBvcnRlZCBVUkkgU2NoZW1lXCIsNDE3OlwiVW5rbm93biBSZXNvdXJjZS1Qcmlvcml0eVwiLDQyMDpcIkJhZCBFeHRlbnNpb25cIiw0MjE6XCJFeHRlbnNpb24gUmVxdWlyZWRcIiw0MjI6XCJTZXNzaW9uIEludGVydmFsIFRvbyBTbWFsbFwiLDQyMzpcIkludGVydmFsIFRvbyBCcmllZlwiLDQyODpcIlVzZSBJZGVudGl0eSBIZWFkZXJcIiw0Mjk6XCJQcm92aWRlIFJlZmVycmVyIElkZW50aXR5XCIsNDMwOlwiRmxvdyBGYWlsZWRcIiw0MzM6XCJBbm9ueW1pdHkgRGlzYWxsb3dlZFwiLDQzNjpcIkJhZCBJZGVudGl0eS1JbmZvXCIsNDM3OlwiVW5zdXBwb3J0ZWQgQ2VydGlmaWNhdGVcIiw0Mzg6XCJJbnZhbGlkIElkZW50aXR5IEhlYWRlclwiLDQzOTpcIkZpcnN0IEhvcCBMYWNrcyBPdXRib3VuZCBTdXBwb3J0XCIsNDQwOlwiTWF4LUJyZWFkdGggRXhjZWVkZWRcIiw0Njk6XCJCYWQgSW5mbyBQYWNrYWdlXCIsNDcwOlwiQ29uc2VudCBOZWVkZWRcIiw0Nzg6XCJVbnJlc29sdmFibGUgRGVzdGluYXRpb25cIiw0ODA6XCJUZW1wb3JhcmlseSBVbmF2YWlsYWJsZVwiLDQ4MTpcIkNhbGwvVHJhbnNhY3Rpb24gRG9lcyBOb3QgRXhpc3RcIiw0ODI6XCJMb29wIERldGVjdGVkXCIsNDgzOlwiVG9vIE1hbnkgSG9wc1wiLDQ4NDpcIkFkZHJlc3MgSW5jb21wbGV0ZVwiLDQ4NTpcIkFtYmlndW91c1wiLDQ4NjpcIkJ1c3kgSGVyZVwiLDQ4NzpcIlJlcXVlc3QgVGVybWluYXRlZFwiLDQ4ODpcIk5vdCBBY2NlcHRhYmxlIEhlcmVcIiw0ODk6XCJCYWQgRXZlbnRcIiw0OTE6XCJSZXF1ZXN0IFBlbmRpbmdcIiw0OTM6XCJVbmRlY2lwaGVyYWJsZVwiLDQ5NDpcIlNlY3VyaXR5IEFncmVlbWVudCBSZXF1aXJlZFwiLDUwMDpcIkludGVybmFsIFNlcnZlciBFcnJvclwiLDUwMTpcIk5vdCBJbXBsZW1lbnRlZFwiLDUwMjpcIkJhZCBHYXRld2F5XCIsNTAzOlwiU2VydmljZSBVbmF2YWlsYWJsZVwiLDUwNDpcIlNlcnZlciBUaW1lLW91dFwiLDUwNTpcIlZlcnNpb24gTm90IFN1cHBvcnRlZFwiLDUxMzpcIk1lc3NhZ2UgVG9vIExhcmdlXCIsNTgwOlwiUHJlY29uZGl0aW9uIEZhaWx1cmVcIiw2MDA6XCJCdXN5IEV2ZXJ5d2hlcmVcIiw2MDM6XCJEZWNsaW5lXCIsNjA0OlwiRG9lcyBOb3QgRXhpc3QgQW55d2hlcmVcIiw2MDY6XCJOb3QgQWNjZXB0YWJsZVwifSxPUFRJT05fVEFHUzp7XCIxMDByZWxcIjohMCwxOTk6ITAsYW5zd2VybW9kZTohMCxcImVhcmx5LXNlc3Npb25cIjohMCxldmVudGxpc3Q6ITAsZXhwbGljaXRzdWI6ITAsXCJmcm9tLWNoYW5nZVwiOiEwLFwiZ2VvbG9jYXRpb24taHR0cFwiOiEwLFwiZ2VvbG9jYXRpb24tc2lwXCI6ITAsZ2luOiEwLGdydXU6ITAsaGlzdGluZm86ITAsaWNlOiEwLGpvaW46ITAsXCJtdWx0aXBsZS1yZWZlclwiOiEwLG5vcmVmZXJzdWI6ITAsbm9zdWI6ITAsb3V0Ym91bmQ6ITAscGF0aDohMCxwb2xpY3k6ITAscHJlY29uZGl0aW9uOiEwLHByZWY6ITAscHJpdmFjeTohMCxcInJlY2lwaWVudC1saXN0LWludml0ZVwiOiEwLFwicmVjaXBpZW50LWxpc3QtbWVzc2FnZVwiOiEwLFwicmVjaXBpZW50LWxpc3Qtc3Vic2NyaWJlXCI6ITAscmVwbGFjZXM6ITAsXCJyZXNvdXJjZS1wcmlvcml0eVwiOiEwLFwic2RwLWFuYXRcIjohMCxcInNlYy1hZ3JlZVwiOiEwLHRkaWFsb2c6ITAsdGltZXI6ITAsdXVpOiEwfX19fSxmdW5jdGlvbihlLHQsaSl7XCJ1c2Ugc3RyaWN0XCI7ZS5leHBvcnRzPXtDb25maWd1cmF0aW9uRXJyb3I6ZnVuY3Rpb24oKXt2YXIgZT1mdW5jdGlvbihlLHQpe3RoaXMuY29kZT0xLHRoaXMubmFtZT1cIkNPTkZJR1VSQVRJT05fRVJST1JcIix0aGlzLnBhcmFtZXRlcj1lLHRoaXMudmFsdWU9dCx0aGlzLm1lc3NhZ2U9dGhpcy52YWx1ZT9cIkludmFsaWQgdmFsdWUgXCIrSlNPTi5zdHJpbmdpZnkodGhpcy52YWx1ZSkrJyBmb3IgcGFyYW1ldGVyIFwiJyt0aGlzLnBhcmFtZXRlcisnXCInOlwiTWlzc2luZyBwYXJhbWV0ZXI6IFwiK3RoaXMucGFyYW1ldGVyfTtyZXR1cm4gZS5wcm90b3R5cGU9bmV3IEVycm9yLGV9KCksSW52YWxpZFN0YXRlRXJyb3I6ZnVuY3Rpb24oKXt2YXIgZT1mdW5jdGlvbihlKXt0aGlzLmNvZGU9Mix0aGlzLm5hbWU9XCJJTlZBTElEX1NUQVRFX0VSUk9SXCIsdGhpcy5zdGF0dXM9ZSx0aGlzLm1lc3NhZ2U9XCJJbnZhbGlkIHN0YXR1czogXCIrZX07cmV0dXJuIGUucHJvdG90eXBlPW5ldyBFcnJvcixlfSgpLE5vdFN1cHBvcnRlZEVycm9yOmZ1bmN0aW9uKCl7dmFyIGU9ZnVuY3Rpb24oZSl7dGhpcy5jb2RlPTMsdGhpcy5uYW1lPVwiTk9UX1NVUFBPUlRFRF9FUlJPUlwiLHRoaXMubWVzc2FnZT1lfTtyZXR1cm4gZS5wcm90b3R5cGU9bmV3IEVycm9yLGV9KCksR2V0RGVzY3JpcHRpb25FcnJvcjpmdW5jdGlvbigpe3ZhciBlPWZ1bmN0aW9uKGUpe3RoaXMuY29kZT00LHRoaXMubmFtZT1cIkdFVF9ERVNDUklQVElPTl9FUlJPUlwiLHRoaXMubWVzc2FnZT1lfTtyZXR1cm4gZS5wcm90b3R5cGU9bmV3IEVycm9yLGV9KCksUmVuZWdvdGlhdGlvbkVycm9yOmZ1bmN0aW9uKCl7dmFyIGU9ZnVuY3Rpb24oZSl7dGhpcy5jb2RlPTUsdGhpcy5uYW1lPVwiUkVORUdPVElBVElPTl9FUlJPUlwiLHRoaXMubWVzc2FnZT1lfTtyZXR1cm4gZS5wcm90b3R5cGU9bmV3IEVycm9yLGV9KCl9fSxmdW5jdGlvbihlLHQsaSl7XCJ1c2Ugc3RyaWN0XCI7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PXtUMTo1MDAsVDI6NGUzLFQ0OjVlMyxUSU1FUl9COjMyZTMsVElNRVJfRDowLFRJTUVSX0Y6MzJlMyxUSU1FUl9IOjMyZTMsVElNRVJfSTowLFRJTUVSX0o6MCxUSU1FUl9LOjAsVElNRVJfTDozMmUzLFRJTUVSX006MzJlMyxUSU1FUl9OOjMyZTMsUFJPVklTSU9OQUxfUkVTUE9OU0VfSU5URVJWQUw6NmU0fTtyZXR1cm5bXCJzZXRUaW1lb3V0XCIsXCJjbGVhclRpbWVvdXRcIixcInNldEludGVydmFsXCIsXCJjbGVhckludGVydmFsXCJdLmZvckVhY2goZnVuY3Rpb24oaSl7dFtpXT1mdW5jdGlvbigpe3JldHVybiBlW2ldLmFwcGx5KGUsYXJndW1lbnRzKX19KSx0fX0sZnVuY3Rpb24oZSx0LGkpe1widXNlIHN0cmljdFwiO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUsdCl7dmFyIGk9dCxzPTAscj0wO2lmKGUuc3Vic3RyaW5nKGksaSsyKS5tYXRjaCgvKF5cXHJcXG4pLykpcmV0dXJuLTI7Zm9yKDswPT09czspe2lmKC0xPT09KHI9ZS5pbmRleE9mKFwiXFxyXFxuXCIsaSkpKXJldHVybiByOyFlLnN1YnN0cmluZyhyKzIscis0KS5tYXRjaCgvKF5cXHJcXG4pLykmJmUuY2hhckF0KHIrMikubWF0Y2goLyheXFxzKykvKT9pPXIrMjpzPXJ9cmV0dXJuIHN9ZnVuY3Rpb24gaSh0LGkscyxyKXt2YXIgbixvLGEsYyxoPWkuaW5kZXhPZihcIjpcIixzKSx1PWkuc3Vic3RyaW5nKHMsaCkudHJpbSgpLGw9aS5zdWJzdHJpbmcoaCsxLHIpLnRyaW0oKTtzd2l0Y2godS50b0xvd2VyQ2FzZSgpKXtjYXNlXCJ2aWFcIjpjYXNlXCJ2XCI6dC5hZGRIZWFkZXIoXCJ2aWFcIixsKSwxPT09dC5nZXRIZWFkZXJzKFwidmlhXCIpLmxlbmd0aD8oYz10LnBhcnNlSGVhZGVyKFwiVmlhXCIpKSYmKHQudmlhPWMsdC52aWFfYnJhbmNoPWMuYnJhbmNoKTpjPTA7YnJlYWs7Y2FzZVwiZnJvbVwiOmNhc2VcImZcIjp0LnNldEhlYWRlcihcImZyb21cIixsKSwoYz10LnBhcnNlSGVhZGVyKFwiZnJvbVwiKSkmJih0LmZyb209Yyx0LmZyb21fdGFnPWMuZ2V0UGFyYW0oXCJ0YWdcIikpO2JyZWFrO2Nhc2VcInRvXCI6Y2FzZVwidFwiOnQuc2V0SGVhZGVyKFwidG9cIixsKSwoYz10LnBhcnNlSGVhZGVyKFwidG9cIikpJiYodC50bz1jLHQudG9fdGFnPWMuZ2V0UGFyYW0oXCJ0YWdcIikpO2JyZWFrO2Nhc2VcInJlY29yZC1yb3V0ZVwiOmlmKC0xPT09KGM9ZS5HcmFtbWFyLnBhcnNlKGwsXCJSZWNvcmRfUm91dGVcIikpKXtjPXZvaWQgMDticmVha31mb3IoYT1jLmxlbmd0aCxvPTA7bzxhO28rKyluPWNbb10sdC5hZGRIZWFkZXIoXCJyZWNvcmQtcm91dGVcIixsLnN1YnN0cmluZyhuLnBvc2l0aW9uLG4ub2Zmc2V0KSksdC5oZWFkZXJzW1wiUmVjb3JkLVJvdXRlXCJdW3QuZ2V0SGVhZGVycyhcInJlY29yZC1yb3V0ZVwiKS5sZW5ndGgtMV0ucGFyc2VkPW4ucGFyc2VkO2JyZWFrO2Nhc2VcImNhbGwtaWRcIjpjYXNlXCJpXCI6dC5zZXRIZWFkZXIoXCJjYWxsLWlkXCIsbCksKGM9dC5wYXJzZUhlYWRlcihcImNhbGwtaWRcIikpJiYodC5jYWxsX2lkPWwpO2JyZWFrO2Nhc2VcImNvbnRhY3RcIjpjYXNlXCJtXCI6aWYoLTE9PT0oYz1lLkdyYW1tYXIucGFyc2UobCxcIkNvbnRhY3RcIikpKXtjPXZvaWQgMDticmVha31mb3IoYT1jLmxlbmd0aCxvPTA7bzxhO28rKyluPWNbb10sdC5hZGRIZWFkZXIoXCJjb250YWN0XCIsbC5zdWJzdHJpbmcobi5wb3NpdGlvbixuLm9mZnNldCkpLHQuaGVhZGVycy5Db250YWN0W3QuZ2V0SGVhZGVycyhcImNvbnRhY3RcIikubGVuZ3RoLTFdLnBhcnNlZD1uLnBhcnNlZDticmVhaztjYXNlXCJjb250ZW50LWxlbmd0aFwiOmNhc2VcImxcIjp0LnNldEhlYWRlcihcImNvbnRlbnQtbGVuZ3RoXCIsbCksYz10LnBhcnNlSGVhZGVyKFwiY29udGVudC1sZW5ndGhcIik7YnJlYWs7Y2FzZVwiY29udGVudC10eXBlXCI6Y2FzZVwiY1wiOnQuc2V0SGVhZGVyKFwiY29udGVudC10eXBlXCIsbCksYz10LnBhcnNlSGVhZGVyKFwiY29udGVudC10eXBlXCIpO2JyZWFrO2Nhc2VcImNzZXFcIjp0LnNldEhlYWRlcihcImNzZXFcIixsKSwoYz10LnBhcnNlSGVhZGVyKFwiY3NlcVwiKSkmJih0LmNzZXE9Yy52YWx1ZSksdCBpbnN0YW5jZW9mIGUuSW5jb21pbmdSZXNwb25zZSYmKHQubWV0aG9kPWMubWV0aG9kKTticmVhaztjYXNlXCJtYXgtZm9yd2FyZHNcIjp0LnNldEhlYWRlcihcIm1heC1mb3J3YXJkc1wiLGwpLGM9dC5wYXJzZUhlYWRlcihcIm1heC1mb3J3YXJkc1wiKTticmVhaztjYXNlXCJ3d3ctYXV0aGVudGljYXRlXCI6dC5zZXRIZWFkZXIoXCJ3d3ctYXV0aGVudGljYXRlXCIsbCksYz10LnBhcnNlSGVhZGVyKFwid3d3LWF1dGhlbnRpY2F0ZVwiKTticmVhaztjYXNlXCJwcm94eS1hdXRoZW50aWNhdGVcIjp0LnNldEhlYWRlcihcInByb3h5LWF1dGhlbnRpY2F0ZVwiLGwpLGM9dC5wYXJzZUhlYWRlcihcInByb3h5LWF1dGhlbnRpY2F0ZVwiKTticmVhaztjYXNlXCJyZWZlci10b1wiOmNhc2VcInJcIjp0LnNldEhlYWRlcihcInJlZmVyLXRvXCIsbCksKGM9dC5wYXJzZUhlYWRlcihcInJlZmVyLXRvXCIpKSYmKHQucmVmZXJfdG89Yyk7YnJlYWs7ZGVmYXVsdDp0LnNldEhlYWRlcih1LGwpLGM9MH1yZXR1cm4gdm9pZCAwIT09Y3x8e2Vycm9yOidlcnJvciBwYXJzaW5nIGhlYWRlciBcIicrdSsnXCInfX12YXIgczsocz17fSkucGFyc2VNZXNzYWdlPWZ1bmN0aW9uKHMscil7dmFyIG4sbyxhLGMsaCx1PTAsbD1zLmluZGV4T2YoXCJcXHJcXG5cIiksZD1yLmdldExvZ2dlcihcInNpcC5wYXJzZXJcIik7aWYoLTEhPT1sKXtpZihvPXMuc3Vic3RyaW5nKDAsbCksLTEhPT0oaD1lLkdyYW1tYXIucGFyc2UobyxcIlJlcXVlc3RfUmVzcG9uc2VcIikpKXtmb3IoaC5zdGF0dXNfY29kZT8oKG49bmV3IGUuSW5jb21pbmdSZXNwb25zZShyKSkuc3RhdHVzX2NvZGU9aC5zdGF0dXNfY29kZSxuLnJlYXNvbl9waHJhc2U9aC5yZWFzb25fcGhyYXNlKTooKG49bmV3IGUuSW5jb21pbmdSZXF1ZXN0KHIpKS5tZXRob2Q9aC5tZXRob2Qsbi5ydXJpPWgudXJpKSxuLmRhdGE9cyx1PWwrMjs7KXtpZigtMj09PShsPXQocyx1KSkpe2M9dSsyO2JyZWFrfWlmKC0xPT09bClyZXR1cm4gdm9pZCBkLmVycm9yKFwibWFsZm9ybWVkIG1lc3NhZ2VcIik7aWYoITAhPT0oaD1pKG4scyx1LGwpKSlyZXR1cm4gdm9pZCBkLmVycm9yKGguZXJyb3IpO3U9bCsyfXJldHVybiBuLmhhc0hlYWRlcihcImNvbnRlbnQtbGVuZ3RoXCIpPyhhPW4uZ2V0SGVhZGVyKFwiY29udGVudC1sZW5ndGhcIiksbi5ib2R5PXMuc3Vic3RyKGMsYSkpOm4uYm9keT1zLnN1YnN0cmluZyhjKSxufWQud2FybignZXJyb3IgcGFyc2luZyBmaXJzdCBsaW5lIG9mIFNJUCBtZXNzYWdlOiBcIicrbysnXCInKX1lbHNlIGQud2FybihcIm5vIENSTEYgZm91bmQsIG5vdCBhIFNJUCBtZXNzYWdlLCBkaXNjYXJkZWRcIil9LGUuUGFyc2VyPXN9fSxmdW5jdGlvbihlLHQsaSl7XCJ1c2Ugc3RyaWN0XCI7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCl7dmFyIGk9dC51YS5jb25maWd1cmF0aW9uLmhhY2tBbGxvd1VucmVnaXN0ZXJlZE9wdGlvblRhZ3Mscz1bXSxyPXt9O3JldHVybiB0Lm1ldGhvZD09PWUuQy5SRUdJU1RFUj9zLnB1c2goXCJwYXRoXCIsXCJncnV1XCIpOnQubWV0aG9kPT09ZS5DLklOVklURSYmKHQudWEuY29udGFjdC5wdWJfZ3J1dXx8dC51YS5jb250YWN0LnRlbXBfZ3J1dSkmJnMucHVzaChcImdydXVcIiksdC51YS5jb25maWd1cmF0aW9uLnJlbDEwMD09PWUuQy5zdXBwb3J0ZWQuU1VQUE9SVEVEJiZzLnB1c2goXCIxMDByZWxcIiksdC51YS5jb25maWd1cmF0aW9uLnJlcGxhY2VzPT09ZS5DLnN1cHBvcnRlZC5TVVBQT1JURUQmJnMucHVzaChcInJlcGxhY2VzXCIpLHMucHVzaChcIm91dGJvdW5kXCIpLHM9cy5jb25jYXQodC51YS5jb25maWd1cmF0aW9uLmV4dHJhU3VwcG9ydGVkKSxcIlN1cHBvcnRlZDogXCIrKHM9cy5maWx0ZXIoZnVuY3Rpb24odCl7dmFyIHM9ZS5DLk9QVElPTl9UQUdTW3RdLG49IXJbdF07cmV0dXJuIHJbdF09ITAsKHN8fGkpJiZufSkpLmpvaW4oXCIsIFwiKStcIlxcclxcblwifXZhciBpLHMscixuOyhpPWZ1bmN0aW9uKHQsaSxzLHIsbixvKXt2YXIgYSxjLGgsdSxsLGQ7aWYocj1yfHx7fSwhdHx8IWl8fCFzKXJldHVybiBudWxsO3RoaXMubG9nZ2VyPXMuZ2V0TG9nZ2VyKFwic2lwLnNpcG1lc3NhZ2VcIiksdGhpcy51YT1zLHRoaXMuaGVhZGVycz17fSx0aGlzLm1ldGhvZD10LHRoaXMucnVyaT1pLHRoaXMuYm9keT1vLHRoaXMuZXh0cmFIZWFkZXJzPShufHxbXSkuc2xpY2UoKSx0aGlzLnN0YXR1c0NvZGU9ci5zdGF0dXNfY29kZSx0aGlzLnJlYXNvblBocmFzZT1yLnJlYXNvbl9waHJhc2Usci5yb3V0ZV9zZXQ/dGhpcy5zZXRIZWFkZXIoXCJyb3V0ZVwiLHIucm91dGVfc2V0KTpzLmNvbmZpZ3VyYXRpb24udXNlUHJlbG9hZGVkUm91dGUmJnRoaXMuc2V0SGVhZGVyKFwicm91dGVcIixzLnRyYW5zcG9ydC5zZXJ2ZXIuc2lwX3VyaSksdGhpcy5zZXRIZWFkZXIoXCJ2aWFcIixcIlwiKSx0aGlzLnNldEhlYWRlcihcIm1heC1mb3J3YXJkc1wiLGUuVUEuQy5NQVhfRk9SV0FSRFMpLGw9ci50b191cml8fGksYT1yLnRvX2Rpc3BsYXlOYW1lfHwwPT09ci50b19kaXNwbGF5TmFtZT8nXCInK3IudG9fZGlzcGxheU5hbWUrJ1wiICc6XCJcIixhKz1cIjxcIisobCYmbC50b1Jhdz9sLnRvUmF3KCk6bCkrXCI+XCIsYSs9ci50b190YWc/XCI7dGFnPVwiK3IudG9fdGFnOlwiXCIsdGhpcy50bz1uZXcgZS5OYW1lQWRkckhlYWRlci5wYXJzZShhKSx0aGlzLnNldEhlYWRlcihcInRvXCIsYSksZD1yLmZyb21fdXJpfHxzLmNvbmZpZ3VyYXRpb24udXJpLGM9ci5mcm9tX2Rpc3BsYXlOYW1lfHwwPT09ci5mcm9tX2Rpc3BsYXlOYW1lPydcIicrci5mcm9tX2Rpc3BsYXlOYW1lKydcIiAnOnMuY29uZmlndXJhdGlvbi5kaXNwbGF5TmFtZT8nXCInK3MuY29uZmlndXJhdGlvbi5kaXNwbGF5TmFtZSsnXCIgJzpcIlwiLGMrPVwiPFwiKyhkJiZkLnRvUmF3P2QudG9SYXcoKTpkKStcIj47dGFnPVwiLGMrPXIuZnJvbV90YWd8fGUuVXRpbHMubmV3VGFnKCksdGhpcy5mcm9tPW5ldyBlLk5hbWVBZGRySGVhZGVyLnBhcnNlKGMpLHRoaXMuc2V0SGVhZGVyKFwiZnJvbVwiLGMpLGg9ci5jYWxsX2lkfHxzLmNvbmZpZ3VyYXRpb24uc2lwanNJZCtlLlV0aWxzLmNyZWF0ZVJhbmRvbVRva2VuKDE1KSx0aGlzLmNhbGxfaWQ9aCx0aGlzLnNldEhlYWRlcihcImNhbGwtaWRcIixoKSx1PXIuY3NlcXx8TWF0aC5mbG9vcigxZTQqTWF0aC5yYW5kb20oKSksdGhpcy5jc2VxPXUsdGhpcy5zZXRIZWFkZXIoXCJjc2VxXCIsdStcIiBcIit0KX0pLnByb3RvdHlwZT17c2V0SGVhZGVyOmZ1bmN0aW9uKHQsaSl7dGhpcy5oZWFkZXJzW2UuVXRpbHMuaGVhZGVyaXplKHQpXT1pIGluc3RhbmNlb2YgQXJyYXk/aTpbaV19LGdldEhlYWRlcjpmdW5jdGlvbih0KXt2YXIgaSxzLHI9dGhpcy5leHRyYUhlYWRlcnMubGVuZ3RoLG49dGhpcy5oZWFkZXJzW2UuVXRpbHMuaGVhZGVyaXplKHQpXTtpZihuKXtpZihuWzBdKXJldHVybiBuWzBdfWVsc2UgZm9yKGk9bmV3IFJlZ0V4cChcIl5cXFxccypcIit0K1wiXFxcXHMqOlwiLFwiaVwiKSxzPTA7czxyO3MrKylpZihuPXRoaXMuZXh0cmFIZWFkZXJzW3NdLGkudGVzdChuKSlyZXR1cm4gbi5zdWJzdHJpbmcobi5pbmRleE9mKFwiOlwiKSsxKS50cmltKCl9LGdldEhlYWRlcnM6ZnVuY3Rpb24odCl7dmFyIGkscyxyLG49dGhpcy5oZWFkZXJzW2UuVXRpbHMuaGVhZGVyaXplKHQpXSxvPVtdO2lmKG4pe2ZvcihzPW4ubGVuZ3RoLGk9MDtpPHM7aSsrKW8ucHVzaChuW2ldKTtyZXR1cm4gb31mb3Iocz10aGlzLmV4dHJhSGVhZGVycy5sZW5ndGgscj1uZXcgUmVnRXhwKFwiXlxcXFxzKlwiK3QrXCJcXFxccyo6XCIsXCJpXCIpLGk9MDtpPHM7aSsrKW49dGhpcy5leHRyYUhlYWRlcnNbaV0sci50ZXN0KG4pJiZvLnB1c2gobi5zdWJzdHJpbmcobi5pbmRleE9mKFwiOlwiKSsxKS50cmltKCkpO3JldHVybiBvfSxoYXNIZWFkZXI6ZnVuY3Rpb24odCl7dmFyIGkscyxyPXRoaXMuZXh0cmFIZWFkZXJzLmxlbmd0aDtpZih0aGlzLmhlYWRlcnNbZS5VdGlscy5oZWFkZXJpemUodCldKXJldHVybiEwO2ZvcihpPW5ldyBSZWdFeHAoXCJeXFxcXHMqXCIrdCtcIlxcXFxzKjpcIixcImlcIikscz0wO3M8cjtzKyspaWYoaS50ZXN0KHRoaXMuZXh0cmFIZWFkZXJzW3NdKSlyZXR1cm4hMDtyZXR1cm4hMX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXt2YXIgaSxzLHIsbj1cIlwiO24rPXRoaXMubWV0aG9kK1wiIFwiKyh0aGlzLnJ1cmkudG9SYXc/dGhpcy5ydXJpLnRvUmF3KCk6dGhpcy5ydXJpKStcIiBTSVAvMi4wXFxyXFxuXCI7Zm9yKGkgaW4gdGhpcy5oZWFkZXJzKWZvcihzPXRoaXMuaGVhZGVyc1tpXS5sZW5ndGgscj0wO3I8cztyKyspbis9aStcIjogXCIrdGhpcy5oZWFkZXJzW2ldW3JdK1wiXFxyXFxuXCI7Zm9yKHM9dGhpcy5leHRyYUhlYWRlcnMubGVuZ3RoLHI9MDtyPHM7cisrKW4rPXRoaXMuZXh0cmFIZWFkZXJzW3JdLnRyaW0oKStcIlxcclxcblwiO3JldHVybiBuKz10KHRoaXMpLG4rPVwiVXNlci1BZ2VudDogXCIrdGhpcy51YS5jb25maWd1cmF0aW9uLnVzZXJBZ2VudFN0cmluZytcIlxcclxcblwiLHRoaXMuYm9keT9cInN0cmluZ1wiPT10eXBlb2YgdGhpcy5ib2R5PyhuKz1cIkNvbnRlbnQtTGVuZ3RoOiBcIisocz1lLlV0aWxzLnN0cl91dGY4X2xlbmd0aCh0aGlzLmJvZHkpKStcIlxcclxcblxcclxcblwiLG4rPXRoaXMuYm9keSk6dGhpcy5ib2R5LmJvZHkmJnRoaXMuYm9keS5jb250ZW50VHlwZT8ocz1lLlV0aWxzLnN0cl91dGY4X2xlbmd0aCh0aGlzLmJvZHkuYm9keSksbis9XCJDb250ZW50LVR5cGU6IFwiK3RoaXMuYm9keS5jb250ZW50VHlwZStcIlxcclxcblwiLG4rPVwiQ29udGVudC1MZW5ndGg6IFwiK3MrXCJcXHJcXG5cXHJcXG5cIixuKz10aGlzLmJvZHkuYm9keSk6bis9XCJDb250ZW50LUxlbmd0aDogMFxcclxcblxcclxcblwiOm4rPVwiQ29udGVudC1MZW5ndGg6IDBcXHJcXG5cXHJcXG5cIixufX0sKHM9ZnVuY3Rpb24oKXt0aGlzLmRhdGE9bnVsbCx0aGlzLmhlYWRlcnM9bnVsbCx0aGlzLm1ldGhvZD1udWxsLHRoaXMudmlhPW51bGwsdGhpcy52aWFfYnJhbmNoPW51bGwsdGhpcy5jYWxsX2lkPW51bGwsdGhpcy5jc2VxPW51bGwsdGhpcy5mcm9tPW51bGwsdGhpcy5mcm9tX3RhZz1udWxsLHRoaXMudG89bnVsbCx0aGlzLnRvX3RhZz1udWxsLHRoaXMuYm9keT1udWxsfSkucHJvdG90eXBlPXthZGRIZWFkZXI6ZnVuY3Rpb24odCxpKXt2YXIgcz17cmF3Oml9O3Q9ZS5VdGlscy5oZWFkZXJpemUodCksdGhpcy5oZWFkZXJzW3RdP3RoaXMuaGVhZGVyc1t0XS5wdXNoKHMpOnRoaXMuaGVhZGVyc1t0XT1bc119LGdldEhlYWRlcjpmdW5jdGlvbih0KXt2YXIgaT10aGlzLmhlYWRlcnNbZS5VdGlscy5oZWFkZXJpemUodCldO2lmKGkpcmV0dXJuIGlbMF0/aVswXS5yYXc6dm9pZCAwfSxnZXRIZWFkZXJzOmZ1bmN0aW9uKHQpe3ZhciBpLHMscj10aGlzLmhlYWRlcnNbZS5VdGlscy5oZWFkZXJpemUodCldLG49W107aWYoIXIpcmV0dXJuW107Zm9yKHM9ci5sZW5ndGgsaT0wO2k8cztpKyspbi5wdXNoKHJbaV0ucmF3KTtyZXR1cm4gbn0saGFzSGVhZGVyOmZ1bmN0aW9uKHQpe3JldHVybiEhdGhpcy5oZWFkZXJzW2UuVXRpbHMuaGVhZGVyaXplKHQpXX0scGFyc2VIZWFkZXI6ZnVuY3Rpb24odCxpKXt2YXIgcyxyLG47aWYodD1lLlV0aWxzLmhlYWRlcml6ZSh0KSxpPWl8fDAsdGhpcy5oZWFkZXJzW3RdKXtpZighKGk+PXRoaXMuaGVhZGVyc1t0XS5sZW5ndGgpKXJldHVybiBzPXRoaXMuaGVhZGVyc1t0XVtpXSxyPXMucmF3LHMucGFyc2VkP3MucGFyc2VkOi0xPT09KG49ZS5HcmFtbWFyLnBhcnNlKHIsdC5yZXBsYWNlKC8tL2csXCJfXCIpKSk/KHRoaXMuaGVhZGVyc1t0XS5zcGxpY2UoaSwxKSx2b2lkIHRoaXMubG9nZ2VyLndhcm4oJ2Vycm9yIHBhcnNpbmcgXCInK3QrJ1wiIGhlYWRlciBmaWVsZCB3aXRoIHZhbHVlIFwiJytyKydcIicpKToocy5wYXJzZWQ9bixuKTt0aGlzLmxvZ2dlci5sb2coJ25vdCBzbyBtYW55IFwiJyt0KydcIiBoZWFkZXJzIHByZXNlbnQnKX1lbHNlIHRoaXMubG9nZ2VyLmxvZygnaGVhZGVyIFwiJyt0KydcIiBub3QgcHJlc2VudCcpfSxzOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMucGFyc2VIZWFkZXIoZSx0KX0sc2V0SGVhZGVyOmZ1bmN0aW9uKHQsaSl7dmFyIHM9e3JhdzppfTt0aGlzLmhlYWRlcnNbZS5VdGlscy5oZWFkZXJpemUodCldPVtzXX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kYXRhfX0sKChyPWZ1bmN0aW9uKGUpe3RoaXMubG9nZ2VyPWUuZ2V0TG9nZ2VyKFwic2lwLnNpcG1lc3NhZ2VcIiksdGhpcy51YT1lLHRoaXMuaGVhZGVycz17fSx0aGlzLnJ1cmk9bnVsbCx0aGlzLnRyYW5zcG9ydD1udWxsLHRoaXMuc2VydmVyX3RyYW5zYWN0aW9uPW51bGx9KS5wcm90b3R5cGU9bmV3IHMpLnJlcGx5PWZ1bmN0aW9uKGkscyxyLG4sbyxhKXt2YXIgYyxoLHUsbCxkLHA9dGhpcy5nZXRIZWFkZXIoXCJUb1wiKSxnPTAsZj0wO2lmKGQ9ZS5VdGlscy5idWlsZFN0YXR1c0xpbmUoaSxzKSxyPShyfHxbXSkuc2xpY2UoKSx0aGlzLm1ldGhvZD09PWUuQy5JTlZJVEUmJmk+MTAwJiZpPD0yMDApZm9yKHU9KGM9dGhpcy5nZXRIZWFkZXJzKFwicmVjb3JkLXJvdXRlXCIpKS5sZW5ndGg7Zzx1O2crKylkKz1cIlJlY29yZC1Sb3V0ZTogXCIrY1tnXStcIlxcclxcblwiO2Zvcih1PShoPXRoaXMuZ2V0SGVhZGVycyhcInZpYVwiKSkubGVuZ3RoO2Y8dTtmKyspZCs9XCJWaWE6IFwiK2hbZl0rXCJcXHJcXG5cIjtmb3IoIXRoaXMudG9fdGFnJiZpPjEwMD9wKz1cIjt0YWc9XCIrZS5VdGlscy5uZXdUYWcoKTp0aGlzLnRvX3RhZyYmIXRoaXMucyhcInRvXCIpLmhhc1BhcmFtKFwidGFnXCIpJiYocCs9XCI7dGFnPVwiK3RoaXMudG9fdGFnKSxkKz1cIlRvOiBcIitwK1wiXFxyXFxuXCIsZCs9XCJGcm9tOiBcIit0aGlzLmdldEhlYWRlcihcIkZyb21cIikrXCJcXHJcXG5cIixkKz1cIkNhbGwtSUQ6IFwiK3RoaXMuY2FsbF9pZCtcIlxcclxcblwiLGQrPVwiQ1NlcTogXCIrdGhpcy5jc2VxK1wiIFwiK3RoaXMubWV0aG9kK1wiXFxyXFxuXCIsdT1yLmxlbmd0aCxsPTA7bDx1O2wrKylkKz1yW2xdLnRyaW0oKStcIlxcclxcblwiO3JldHVybiBkKz10KHRoaXMpLGQrPVwiVXNlci1BZ2VudDogXCIrdGhpcy51YS5jb25maWd1cmF0aW9uLnVzZXJBZ2VudFN0cmluZytcIlxcclxcblwiLG4/XCJzdHJpbmdcIj09dHlwZW9mIG4/KGQrPVwiQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9zZHBcXHJcXG5cIixkKz1cIkNvbnRlbnQtTGVuZ3RoOiBcIisodT1lLlV0aWxzLnN0cl91dGY4X2xlbmd0aChuKSkrXCJcXHJcXG5cXHJcXG5cIixkKz1uKTpuLmJvZHkmJm4uY29udGVudFR5cGU/KHU9ZS5VdGlscy5zdHJfdXRmOF9sZW5ndGgobi5ib2R5KSxkKz1cIkNvbnRlbnQtVHlwZTogXCIrbi5jb250ZW50VHlwZStcIlxcclxcblwiLGQrPVwiQ29udGVudC1MZW5ndGg6IFwiK3UrXCJcXHJcXG5cXHJcXG5cIixkKz1uLmJvZHkpOmQrPVwiQ29udGVudC1MZW5ndGg6IDBcXHJcXG5cXHJcXG5cIjpkKz1cIkNvbnRlbnQtTGVuZ3RoOiAwXFxyXFxuXFxyXFxuXCIsdGhpcy5zZXJ2ZXJfdHJhbnNhY3Rpb24ucmVjZWl2ZVJlc3BvbnNlKGksZCkudGhlbihvLGEpLGR9LHIucHJvdG90eXBlLnJlcGx5X3NsPWZ1bmN0aW9uKHQsaSl7dmFyIHMscixuPTAsbz10aGlzLmdldEhlYWRlcnMoXCJ2aWFcIiksYT1vLmxlbmd0aDtmb3Iocj1lLlV0aWxzLmJ1aWxkU3RhdHVzTGluZSh0LGkpO248YTtuKyspcis9XCJWaWE6IFwiK29bbl0rXCJcXHJcXG5cIjtzPXRoaXMuZ2V0SGVhZGVyKFwiVG9cIiksIXRoaXMudG9fdGFnJiZ0PjEwMD9zKz1cIjt0YWc9XCIrZS5VdGlscy5uZXdUYWcoKTp0aGlzLnRvX3RhZyYmIXRoaXMucyhcInRvXCIpLmhhc1BhcmFtKFwidGFnXCIpJiYocys9XCI7dGFnPVwiK3RoaXMudG9fdGFnKSxyKz1cIlRvOiBcIitzK1wiXFxyXFxuXCIscis9XCJGcm9tOiBcIit0aGlzLmdldEhlYWRlcihcIkZyb21cIikrXCJcXHJcXG5cIixyKz1cIkNhbGwtSUQ6IFwiK3RoaXMuY2FsbF9pZCtcIlxcclxcblwiLHIrPVwiQ1NlcTogXCIrdGhpcy5jc2VxK1wiIFwiK3RoaXMubWV0aG9kK1wiXFxyXFxuXCIscis9XCJVc2VyLUFnZW50OiBcIit0aGlzLnVhLmNvbmZpZ3VyYXRpb24udXNlckFnZW50U3RyaW5nK1wiXFxyXFxuXCIscis9XCJDb250ZW50LUxlbmd0aDogMFxcclxcblxcclxcblwiLHRoaXMudHJhbnNwb3J0LnNlbmQocil9LChuPWZ1bmN0aW9uKGUpe3RoaXMubG9nZ2VyPWUuZ2V0TG9nZ2VyKFwic2lwLnNpcG1lc3NhZ2VcIiksdGhpcy5oZWFkZXJzPXt9LHRoaXMuc3RhdHVzX2NvZGU9bnVsbCx0aGlzLnJlYXNvbl9waHJhc2U9bnVsbH0pLnByb3RvdHlwZT1uZXcgcyxlLk91dGdvaW5nUmVxdWVzdD1pLGUuSW5jb21pbmdSZXF1ZXN0PXIsZS5JbmNvbWluZ1Jlc3BvbnNlPW59fSxmdW5jdGlvbihlLHQsaSl7XCJ1c2Ugc3RyaWN0XCI7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0Oyh0PWZ1bmN0aW9uKHQsaSxzLHIsbixvKXt2YXIgYSxjLGgsdTtpZighcyl0aHJvdyBuZXcgVHlwZUVycm9yKCdtaXNzaW5nIG9yIGludmFsaWQgXCJob3N0XCIgcGFyYW1ldGVyJyk7dD10fHxlLkMuU0lQLHRoaXMucGFyYW1ldGVycz17fSx0aGlzLmhlYWRlcnM9e307Zm9yKGEgaW4gbil0aGlzLnNldFBhcmFtKGEsblthXSk7Zm9yKGMgaW4gbyl0aGlzLnNldEhlYWRlcihjLG9bY10pO2g9e3NjaGVtZTp0LHVzZXI6aSxob3N0OnMscG9ydDpyfSx1PXtzY2hlbWU6dC50b0xvd2VyQ2FzZSgpLHVzZXI6aSxob3N0OnMudG9Mb3dlckNhc2UoKSxwb3J0OnJ9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMse19ub3JtYWw6e2dldDpmdW5jdGlvbigpe3JldHVybiB1fX0sX3Jhdzp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGh9fSxzY2hlbWU6e2dldDpmdW5jdGlvbigpe3JldHVybiB1LnNjaGVtZX0sc2V0OmZ1bmN0aW9uKGUpe2guc2NoZW1lPWUsdS5zY2hlbWU9ZS50b0xvd2VyQ2FzZSgpfX0sdXNlcjp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHUudXNlcn0sc2V0OmZ1bmN0aW9uKGUpe3UudXNlcj1oLnVzZXI9ZX19LGhvc3Q6e2dldDpmdW5jdGlvbigpe3JldHVybiB1Lmhvc3R9LHNldDpmdW5jdGlvbihlKXtoLmhvc3Q9ZSx1Lmhvc3Q9ZS50b0xvd2VyQ2FzZSgpfX0sYW9yOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdS51c2VyK1wiQFwiK3UuaG9zdH19LHBvcnQ6e2dldDpmdW5jdGlvbigpe3JldHVybiB1LnBvcnR9LHNldDpmdW5jdGlvbihlKXt1LnBvcnQ9aC5wb3J0PTA9PT1lP2U6cGFyc2VJbnQoZSwxMCl8fG51bGx9fX0pfSkucHJvdG90eXBlPXtzZXRQYXJhbTpmdW5jdGlvbihlLHQpe2UmJih0aGlzLnBhcmFtZXRlcnNbZS50b0xvd2VyQ2FzZSgpXT12b2lkIDA9PT10fHxudWxsPT09dD9udWxsOnQudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpKX0sZ2V0UGFyYW06ZnVuY3Rpb24oZSl7aWYoZSlyZXR1cm4gdGhpcy5wYXJhbWV0ZXJzW2UudG9Mb3dlckNhc2UoKV19LGhhc1BhcmFtOmZ1bmN0aW9uKGUpe2lmKGUpcmV0dXJuISF0aGlzLnBhcmFtZXRlcnMuaGFzT3duUHJvcGVydHkoZS50b0xvd2VyQ2FzZSgpKX0sZGVsZXRlUGFyYW06ZnVuY3Rpb24oZSl7dmFyIHQ7aWYoZT1lLnRvTG93ZXJDYXNlKCksdGhpcy5wYXJhbWV0ZXJzLmhhc093blByb3BlcnR5KGUpKXJldHVybiB0PXRoaXMucGFyYW1ldGVyc1tlXSxkZWxldGUgdGhpcy5wYXJhbWV0ZXJzW2VdLHR9LGNsZWFyUGFyYW1zOmZ1bmN0aW9uKCl7dGhpcy5wYXJhbWV0ZXJzPXt9fSxzZXRIZWFkZXI6ZnVuY3Rpb24odCxpKXt0aGlzLmhlYWRlcnNbZS5VdGlscy5oZWFkZXJpemUodCldPWkgaW5zdGFuY2VvZiBBcnJheT9pOltpXX0sZ2V0SGVhZGVyOmZ1bmN0aW9uKHQpe2lmKHQpcmV0dXJuIHRoaXMuaGVhZGVyc1tlLlV0aWxzLmhlYWRlcml6ZSh0KV19LGhhc0hlYWRlcjpmdW5jdGlvbih0KXtpZih0KXJldHVybiEhdGhpcy5oZWFkZXJzLmhhc093blByb3BlcnR5KGUuVXRpbHMuaGVhZGVyaXplKHQpKX0sZGVsZXRlSGVhZGVyOmZ1bmN0aW9uKHQpe3ZhciBpO2lmKHQ9ZS5VdGlscy5oZWFkZXJpemUodCksdGhpcy5oZWFkZXJzLmhhc093blByb3BlcnR5KHQpKXJldHVybiBpPXRoaXMuaGVhZGVyc1t0XSxkZWxldGUgdGhpcy5oZWFkZXJzW3RdLGl9LGNsZWFySGVhZGVyczpmdW5jdGlvbigpe3RoaXMuaGVhZGVycz17fX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHQodGhpcy5fcmF3LnNjaGVtZSx0aGlzLl9yYXcudXNlcix0aGlzLl9yYXcuaG9zdCx0aGlzLl9yYXcucG9ydCxKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMucGFyYW1ldGVycykpLEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5oZWFkZXJzKSkpfSx0b1JhdzpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90b1N0cmluZyh0aGlzLl9yYXcpfSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90b1N0cmluZyh0aGlzLl9ub3JtYWwpfSxfdG9TdHJpbmc6ZnVuY3Rpb24odCl7dmFyIGkscyxyLG4sbz1bXTtuPXQuc2NoZW1lK1wiOlwiLHQuc2NoZW1lLnRvTG93ZXJDYXNlKCkubWF0Y2goXCJec2lwcz8kXCIpfHwobis9XCIvL1wiKSx0LnVzZXImJihuKz1lLlV0aWxzLmVzY2FwZVVzZXIodC51c2VyKStcIkBcIiksbis9dC5ob3N0LCh0LnBvcnR8fDA9PT10LnBvcnQpJiYobis9XCI6XCIrdC5wb3J0KTtmb3IocyBpbiB0aGlzLnBhcmFtZXRlcnMpbis9XCI7XCIrcyxudWxsIT09dGhpcy5wYXJhbWV0ZXJzW3NdJiYobis9XCI9XCIrdGhpcy5wYXJhbWV0ZXJzW3NdKTtmb3IoaSBpbiB0aGlzLmhlYWRlcnMpZm9yKHIgaW4gdGhpcy5oZWFkZXJzW2ldKW8ucHVzaChpK1wiPVwiK3RoaXMuaGVhZGVyc1tpXVtyXSk7cmV0dXJuIG8ubGVuZ3RoPjAmJihuKz1cIj9cIitvLmpvaW4oXCImXCIpKSxufX0sdC5wYXJzZT1mdW5jdGlvbih0KXtyZXR1cm4tMSE9PSh0PWUuR3JhbW1hci5wYXJzZSh0LFwiU0lQX1VSSVwiKSk/dDp2b2lkIDB9LGUuVVJJPXR9fSxmdW5jdGlvbihlLHQsaSl7XCJ1c2Ugc3RyaWN0XCI7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0Oyh0PWZ1bmN0aW9uKHQsaSxzKXt2YXIgcjtpZighKHQmJnQgaW5zdGFuY2VvZiBlLlVSSSkpdGhyb3cgbmV3IFR5cGVFcnJvcignbWlzc2luZyBvciBpbnZhbGlkIFwidXJpXCIgcGFyYW1ldGVyJyk7dGhpcy51cmk9dCx0aGlzLnBhcmFtZXRlcnM9e307Zm9yKHIgaW4gcyl0aGlzLnNldFBhcmFtKHIsc1tyXSk7T2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcyx7ZnJpZW5kbHlOYW1lOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kaXNwbGF5TmFtZXx8dC5hb3J9fSxkaXNwbGF5TmFtZTp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGl9LHNldDpmdW5jdGlvbihlKXtpPTA9PT1lP1wiMFwiOmV9fX0pfSkucHJvdG90eXBlPXtzZXRQYXJhbTpmdW5jdGlvbihlLHQpe2UmJih0aGlzLnBhcmFtZXRlcnNbZS50b0xvd2VyQ2FzZSgpXT12b2lkIDA9PT10fHxudWxsPT09dD9udWxsOnQudG9TdHJpbmcoKSl9LGdldFBhcmFtOmUuVVJJLnByb3RvdHlwZS5nZXRQYXJhbSxoYXNQYXJhbTplLlVSSS5wcm90b3R5cGUuaGFzUGFyYW0sZGVsZXRlUGFyYW06ZS5VUkkucHJvdG90eXBlLmRlbGV0ZVBhcmFtLGNsZWFyUGFyYW1zOmUuVVJJLnByb3RvdHlwZS5jbGVhclBhcmFtcyxjbG9uZTpmdW5jdGlvbigpe3JldHVybiBuZXcgdCh0aGlzLnVyaS5jbG9uZSgpLHRoaXMuZGlzcGxheU5hbWUsSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLnBhcmFtZXRlcnMpKSl9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7dmFyIGUsdDtlPXRoaXMuZGlzcGxheU5hbWV8fDA9PT10aGlzLmRpc3BsYXlOYW1lPydcIicrdGhpcy5kaXNwbGF5TmFtZSsnXCIgJzpcIlwiLGUrPVwiPFwiK3RoaXMudXJpLnRvU3RyaW5nKCkrXCI+XCI7Zm9yKHQgaW4gdGhpcy5wYXJhbWV0ZXJzKWUrPVwiO1wiK3QsbnVsbCE9PXRoaXMucGFyYW1ldGVyc1t0XSYmKGUrPVwiPVwiK3RoaXMucGFyYW1ldGVyc1t0XSk7cmV0dXJuIGV9fSx0LnBhcnNlPWZ1bmN0aW9uKHQpe3JldHVybi0xIT09KHQ9ZS5HcmFtbWFyLnBhcnNlKHQsXCJOYW1lX0FkZHJfSGVhZGVyXCIpKT90OnZvaWQgMH0sZS5OYW1lQWRkckhlYWRlcj10fX0sZnVuY3Rpb24oZSx0LGkpe1widXNlIHN0cmljdFwiO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUsdCxpKXt2YXIgcztyZXR1cm4gcz1cIlNJUC8yLjAvXCIrKGUudWEuY29uZmlndXJhdGlvbi5oYWNrVmlhVGNwP1wiVENQXCI6dC5zZXJ2ZXIuc2NoZW1lKSxzKz1cIiBcIitlLnVhLmNvbmZpZ3VyYXRpb24udmlhSG9zdCtcIjticmFuY2g9XCIraSxlLnVhLmNvbmZpZ3VyYXRpb24uZm9yY2VScG9ydCYmKHMrPVwiO3Jwb3J0XCIpLHN9dmFyIGk9e1NUQVRVU19UUllJTkc6MSxTVEFUVVNfUFJPQ0VFRElORzoyLFNUQVRVU19DQUxMSU5HOjMsU1RBVFVTX0FDQ0VQVEVEOjQsU1RBVFVTX0NPTVBMRVRFRDo1LFNUQVRVU19URVJNSU5BVEVEOjYsU1RBVFVTX0NPTkZJUk1FRDo3LE5PTl9JTlZJVEVfQ0xJRU5UOlwibmljdFwiLE5PTl9JTlZJVEVfU0VSVkVSOlwibmlzdFwiLElOVklURV9DTElFTlQ6XCJpY3RcIixJTlZJVEVfU0VSVkVSOlwiaXN0XCJ9LHM9ZnVuY3Rpb24oZSxzLHIpe3ZhciBuO3RoaXMudHlwZT1pLk5PTl9JTlZJVEVfQ0xJRU5ULHRoaXMudHJhbnNwb3J0PXIsdGhpcy5pZD1cIno5aEc0YktcIitNYXRoLmZsb29yKDFlNypNYXRoLnJhbmRvbSgpKSx0aGlzLnJlcXVlc3Rfc2VuZGVyPWUsdGhpcy5yZXF1ZXN0PXMsdGhpcy5sb2dnZXI9ZS51YS5nZXRMb2dnZXIoXCJzaXAudHJhbnNhY3Rpb24ubmljdFwiLHRoaXMuaWQpLG49dChlLHIsdGhpcy5pZCksdGhpcy5yZXF1ZXN0LnNldEhlYWRlcihcInZpYVwiLG4pLHRoaXMucmVxdWVzdF9zZW5kZXIudWEubmV3VHJhbnNhY3Rpb24odGhpcyl9OyhzLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUuRXZlbnRFbWl0dGVyLnByb3RvdHlwZSkpLnN0YXRlQ2hhbmdlZD1mdW5jdGlvbihlKXt0aGlzLnN0YXRlPWUsdGhpcy5lbWl0KFwic3RhdGVDaGFuZ2VkXCIpfSxzLnByb3RvdHlwZS5zZW5kPWZ1bmN0aW9uKCl7dGhpcy5zdGF0ZUNoYW5nZWQoaS5TVEFUVVNfVFJZSU5HKSx0aGlzLkY9ZS5UaW1lcnMuc2V0VGltZW91dCh0aGlzLnRpbWVyX0YuYmluZCh0aGlzKSxlLlRpbWVycy5USU1FUl9GKSx0aGlzLnRyYW5zcG9ydC5zZW5kKHRoaXMucmVxdWVzdCl8fHRoaXMub25UcmFuc3BvcnRFcnJvcigpfSxzLnByb3RvdHlwZS5vblRyYW5zcG9ydEVycm9yPWZ1bmN0aW9uKCl7dGhpcy5sb2dnZXIubG9nKFwidHJhbnNwb3J0IGVycm9yIG9jY3VycmVkLCBkZWxldGluZyBub24tSU5WSVRFIGNsaWVudCB0cmFuc2FjdGlvbiBcIit0aGlzLmlkKSxlLlRpbWVycy5jbGVhclRpbWVvdXQodGhpcy5GKSxlLlRpbWVycy5jbGVhclRpbWVvdXQodGhpcy5LKSx0aGlzLnN0YXRlQ2hhbmdlZChpLlNUQVRVU19URVJNSU5BVEVEKSx0aGlzLnJlcXVlc3Rfc2VuZGVyLnVhLmRlc3Ryb3lUcmFuc2FjdGlvbih0aGlzKSx0aGlzLnJlcXVlc3Rfc2VuZGVyLm9uVHJhbnNwb3J0RXJyb3IoKX0scy5wcm90b3R5cGUudGltZXJfRj1mdW5jdGlvbigpe3RoaXMubG9nZ2VyLmRlYnVnKFwiVGltZXIgRiBleHBpcmVkIGZvciBub24tSU5WSVRFIGNsaWVudCB0cmFuc2FjdGlvbiBcIit0aGlzLmlkKSx0aGlzLnN0YXRlQ2hhbmdlZChpLlNUQVRVU19URVJNSU5BVEVEKSx0aGlzLnJlcXVlc3Rfc2VuZGVyLnVhLmRlc3Ryb3lUcmFuc2FjdGlvbih0aGlzKSx0aGlzLnJlcXVlc3Rfc2VuZGVyLm9uUmVxdWVzdFRpbWVvdXQoKX0scy5wcm90b3R5cGUudGltZXJfSz1mdW5jdGlvbigpe3RoaXMuc3RhdGVDaGFuZ2VkKGkuU1RBVFVTX1RFUk1JTkFURUQpLHRoaXMucmVxdWVzdF9zZW5kZXIudWEuZGVzdHJveVRyYW5zYWN0aW9uKHRoaXMpfSxzLnByb3RvdHlwZS5yZWNlaXZlUmVzcG9uc2U9ZnVuY3Rpb24odCl7dmFyIHM9dC5zdGF0dXNfY29kZTtpZihzPDIwMClzd2l0Y2godGhpcy5zdGF0ZSl7Y2FzZSBpLlNUQVRVU19UUllJTkc6Y2FzZSBpLlNUQVRVU19QUk9DRUVESU5HOnRoaXMuc3RhdGVDaGFuZ2VkKGkuU1RBVFVTX1BST0NFRURJTkcpLHRoaXMucmVxdWVzdF9zZW5kZXIucmVjZWl2ZVJlc3BvbnNlKHQpfWVsc2Ugc3dpdGNoKHRoaXMuc3RhdGUpe2Nhc2UgaS5TVEFUVVNfVFJZSU5HOmNhc2UgaS5TVEFUVVNfUFJPQ0VFRElORzp0aGlzLnN0YXRlQ2hhbmdlZChpLlNUQVRVU19DT01QTEVURUQpLGUuVGltZXJzLmNsZWFyVGltZW91dCh0aGlzLkYpLDQwOD09PXM/dGhpcy5yZXF1ZXN0X3NlbmRlci5vblJlcXVlc3RUaW1lb3V0KCk6dGhpcy5yZXF1ZXN0X3NlbmRlci5yZWNlaXZlUmVzcG9uc2UodCksdGhpcy5LPWUuVGltZXJzLnNldFRpbWVvdXQodGhpcy50aW1lcl9LLmJpbmQodGhpcyksZS5UaW1lcnMuVElNRVJfSyl9fTt2YXIgcj1mdW5jdGlvbihlLHMscil7dmFyIG4sbz10aGlzO3RoaXMudHlwZT1pLklOVklURV9DTElFTlQsdGhpcy50cmFuc3BvcnQ9cix0aGlzLmlkPVwiejloRzRiS1wiK01hdGguZmxvb3IoMWU3Kk1hdGgucmFuZG9tKCkpLHRoaXMucmVxdWVzdF9zZW5kZXI9ZSx0aGlzLnJlcXVlc3Q9cyx0aGlzLmxvZ2dlcj1lLnVhLmdldExvZ2dlcihcInNpcC50cmFuc2FjdGlvbi5pY3RcIix0aGlzLmlkKSxuPXQoZSxyLHRoaXMuaWQpLHRoaXMucmVxdWVzdC5zZXRIZWFkZXIoXCJ2aWFcIixuKSx0aGlzLnJlcXVlc3Rfc2VuZGVyLnVhLm5ld1RyYW5zYWN0aW9uKHRoaXMpLHRoaXMucmVxdWVzdC5jYW5jZWw9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIGk9KHQ9KHR8fFtdKS5zbGljZSgpKS5sZW5ndGgscz1udWxsLHI9MDtyPGk7cisrKXM9KHN8fFwiXCIpK3Rbcl0udHJpbSgpK1wiXFxyXFxuXCI7by5jYW5jZWxfcmVxdWVzdChvLGUscyl9fTsoci5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlLkV2ZW50RW1pdHRlci5wcm90b3R5cGUpKS5zdGF0ZUNoYW5nZWQ9ZnVuY3Rpb24oZSl7dGhpcy5zdGF0ZT1lLHRoaXMuZW1pdChcInN0YXRlQ2hhbmdlZFwiKX0sci5wcm90b3R5cGUuc2VuZD1mdW5jdGlvbigpe3RoaXMuc3RhdGVDaGFuZ2VkKGkuU1RBVFVTX0NBTExJTkcpLHRoaXMuQj1lLlRpbWVycy5zZXRUaW1lb3V0KHRoaXMudGltZXJfQi5iaW5kKHRoaXMpLGUuVGltZXJzLlRJTUVSX0IpLHRoaXMudHJhbnNwb3J0LnNlbmQodGhpcy5yZXF1ZXN0KXx8dGhpcy5vblRyYW5zcG9ydEVycm9yKCl9LHIucHJvdG90eXBlLm9uVHJhbnNwb3J0RXJyb3I9ZnVuY3Rpb24oKXt0aGlzLmxvZ2dlci5sb2coXCJ0cmFuc3BvcnQgZXJyb3Igb2NjdXJyZWQsIGRlbGV0aW5nIElOVklURSBjbGllbnQgdHJhbnNhY3Rpb24gXCIrdGhpcy5pZCksZS5UaW1lcnMuY2xlYXJUaW1lb3V0KHRoaXMuQiksZS5UaW1lcnMuY2xlYXJUaW1lb3V0KHRoaXMuRCksZS5UaW1lcnMuY2xlYXJUaW1lb3V0KHRoaXMuTSksdGhpcy5zdGF0ZUNoYW5nZWQoaS5TVEFUVVNfVEVSTUlOQVRFRCksdGhpcy5yZXF1ZXN0X3NlbmRlci51YS5kZXN0cm95VHJhbnNhY3Rpb24odGhpcyksdGhpcy5zdGF0ZSE9PWkuU1RBVFVTX0FDQ0VQVEVEJiZ0aGlzLnJlcXVlc3Rfc2VuZGVyLm9uVHJhbnNwb3J0RXJyb3IoKX0sci5wcm90b3R5cGUudGltZXJfTT1mdW5jdGlvbigpe3RoaXMubG9nZ2VyLmRlYnVnKFwiVGltZXIgTSBleHBpcmVkIGZvciBJTlZJVEUgY2xpZW50IHRyYW5zYWN0aW9uIFwiK3RoaXMuaWQpLHRoaXMuc3RhdGU9PT1pLlNUQVRVU19BQ0NFUFRFRCYmKGUuVGltZXJzLmNsZWFyVGltZW91dCh0aGlzLkIpLHRoaXMuc3RhdGVDaGFuZ2VkKGkuU1RBVFVTX1RFUk1JTkFURUQpLHRoaXMucmVxdWVzdF9zZW5kZXIudWEuZGVzdHJveVRyYW5zYWN0aW9uKHRoaXMpKX0sci5wcm90b3R5cGUudGltZXJfQj1mdW5jdGlvbigpe3RoaXMubG9nZ2VyLmRlYnVnKFwiVGltZXIgQiBleHBpcmVkIGZvciBJTlZJVEUgY2xpZW50IHRyYW5zYWN0aW9uIFwiK3RoaXMuaWQpLHRoaXMuc3RhdGU9PT1pLlNUQVRVU19DQUxMSU5HJiYodGhpcy5zdGF0ZUNoYW5nZWQoaS5TVEFUVVNfVEVSTUlOQVRFRCksdGhpcy5yZXF1ZXN0X3NlbmRlci51YS5kZXN0cm95VHJhbnNhY3Rpb24odGhpcyksdGhpcy5yZXF1ZXN0X3NlbmRlci5vblJlcXVlc3RUaW1lb3V0KCkpfSxyLnByb3RvdHlwZS50aW1lcl9EPWZ1bmN0aW9uKCl7dGhpcy5sb2dnZXIuZGVidWcoXCJUaW1lciBEIGV4cGlyZWQgZm9yIElOVklURSBjbGllbnQgdHJhbnNhY3Rpb24gXCIrdGhpcy5pZCksZS5UaW1lcnMuY2xlYXJUaW1lb3V0KHRoaXMuQiksdGhpcy5zdGF0ZUNoYW5nZWQoaS5TVEFUVVNfVEVSTUlOQVRFRCksdGhpcy5yZXF1ZXN0X3NlbmRlci51YS5kZXN0cm95VHJhbnNhY3Rpb24odGhpcyl9LHIucHJvdG90eXBlLnNlbmRBQ0s9ZnVuY3Rpb24odCl7dmFyIGkscz10aGlzO3Q9dHx8e30saT10aGlzLnJlc3BvbnNlLmdldEhlYWRlcihcImNvbnRhY3RcIik/dGhpcy5yZXNwb25zZS5wYXJzZUhlYWRlcihcImNvbnRhY3RcIikudXJpOnRoaXMucmVxdWVzdC5ydXJpO3ZhciByPW5ldyBlLk91dGdvaW5nUmVxdWVzdChcIkFDS1wiLGksdGhpcy5yZXF1ZXN0LnVhLHtjc2VxOnRoaXMucmVzcG9uc2UuY3NlcSxjYWxsX2lkOnRoaXMucmVzcG9uc2UuY2FsbF9pZCxmcm9tX3VyaTp0aGlzLnJlc3BvbnNlLmZyb20udXJpLGZyb21fdGFnOnRoaXMucmVzcG9uc2UuZnJvbV90YWcsdG9fdXJpOnRoaXMucmVzcG9uc2UudG8udXJpLHRvX3RhZzp0aGlzLnJlc3BvbnNlLnRvX3RhZyxyb3V0ZV9zZXQ6dGhpcy5yZXNwb25zZS5nZXRIZWFkZXJzKFwicmVjb3JkLXJvdXRlXCIpLnJldmVyc2UoKX0sdC5leHRyYUhlYWRlcnN8fFtdLHQuYm9keSk7cmV0dXJuIHRoaXMuYWNrU2VuZGVyPW5ldyBlLlJlcXVlc3RTZW5kZXIoe3JlcXVlc3Q6cixvblJlcXVlc3RUaW1lb3V0OnRoaXMucmVxdWVzdF9zZW5kZXIuYXBwbGljYW50LmFwcGxpY2FudD90aGlzLnJlcXVlc3Rfc2VuZGVyLmFwcGxpY2FudC5hcHBsaWNhbnQub25SZXF1ZXN0VGltZW91dDpmdW5jdGlvbigpe3MubG9nZ2VyLndhcm4oXCJBQ0sgUmVxdWVzdCB0aW1lZCBvdXRcIil9LG9uVHJhbnNwb3J0RXJyb3I6dGhpcy5yZXF1ZXN0X3NlbmRlci5hcHBsaWNhbnQuYXBwbGljYW50P3RoaXMucmVxdWVzdF9zZW5kZXIuYXBwbGljYW50LmFwcGxpY2FudC5vblJlcXVlc3RUcmFuc3BvcnRFcnJvcjpmdW5jdGlvbigpe3MubG9pZ2dlci53YXJuKFwiQUNLIFJlcXVlc3QgaGFkIGEgdHJhbnNwb3J0IGVycm9yXCIpfSxyZWNlaXZlUmVzcG9uc2U6dC5yZWNlaXZlUmVzcG9uc2V8fGZ1bmN0aW9uKCl7cy5sb2dnZXIud2FybihcIlJlY2VpdmVkIGEgcmVzcG9uc2UgdG8gYW4gQUNLIHdoaWNoIHdhcyB1bmV4cGVjdGVkLiBEcm9wcGluZyBSZXNwb25zZS5cIil9fSx0aGlzLnJlcXVlc3QudWEpLnNlbmQoKSxyfSxyLnByb3RvdHlwZS5jYW5jZWxfcmVxdWVzdD1mdW5jdGlvbih0LHMscil7dmFyIG49dC5yZXF1ZXN0O3RoaXMuY2FuY2VsPWUuQy5DQU5DRUwrXCIgXCIrbi5ydXJpK1wiIFNJUC8yLjBcXHJcXG5cIix0aGlzLmNhbmNlbCs9XCJWaWE6IFwiK24uaGVhZGVycy5WaWEudG9TdHJpbmcoKStcIlxcclxcblwiLHRoaXMucmVxdWVzdC5oZWFkZXJzLlJvdXRlJiYodGhpcy5jYW5jZWwrPVwiUm91dGU6IFwiK24uaGVhZGVycy5Sb3V0ZS50b1N0cmluZygpK1wiXFxyXFxuXCIpLHRoaXMuY2FuY2VsKz1cIlRvOiBcIituLmhlYWRlcnMuVG8udG9TdHJpbmcoKStcIlxcclxcblwiLHRoaXMuY2FuY2VsKz1cIkZyb206IFwiK24uaGVhZGVycy5Gcm9tLnRvU3RyaW5nKCkrXCJcXHJcXG5cIix0aGlzLmNhbmNlbCs9XCJDYWxsLUlEOiBcIituLmhlYWRlcnNbXCJDYWxsLUlEXCJdLnRvU3RyaW5nKCkrXCJcXHJcXG5cIix0aGlzLmNhbmNlbCs9XCJDU2VxOiBcIituLmhlYWRlcnMuQ1NlcS50b1N0cmluZygpLnNwbGl0KFwiIFwiKVswXStcIiBDQU5DRUxcXHJcXG5cIixzJiYodGhpcy5jYW5jZWwrPVwiUmVhc29uOiBcIitzK1wiXFxyXFxuXCIpLHImJih0aGlzLmNhbmNlbCs9ciksdGhpcy5jYW5jZWwrPVwiQ29udGVudC1MZW5ndGg6IDBcXHJcXG5cXHJcXG5cIix0aGlzLnN0YXRlPT09aS5TVEFUVVNfUFJPQ0VFRElORyYmdGhpcy50cmFuc3BvcnQuc2VuZCh0aGlzLmNhbmNlbCl9LHIucHJvdG90eXBlLnJlY2VpdmVSZXNwb25zZT1mdW5jdGlvbih0KXt2YXIgcz10LnN0YXR1c19jb2RlO2lmKHQudHJhbnNhY3Rpb249dGhpcyx0aGlzLnJlc3BvbnNlJiZ0aGlzLnJlc3BvbnNlLnN0YXR1c19jb2RlPT09dC5zdGF0dXNfY29kZSYmdGhpcy5yZXNwb25zZS5jc2VxPT09dC5jc2VxKXJldHVybiB0aGlzLmxvZ2dlci5kZWJ1ZyhcIklDVCBSZWNlaXZlZCBhIHJldHJhbnNtaXNzaW9uIGZvciBjc2VxOiBcIit0LmNzZXEpLHZvaWQodGhpcy5hY2tTZW5kZXImJnRoaXMuYWNrU2VuZGVyLnNlbmQoKSk7aWYodGhpcy5yZXNwb25zZT10LHM+PTEwMCYmczw9MTk5KXN3aXRjaCh0aGlzLnN0YXRlKXtjYXNlIGkuU1RBVFVTX0NBTExJTkc6dGhpcy5zdGF0ZUNoYW5nZWQoaS5TVEFUVVNfUFJPQ0VFRElORyksdGhpcy5yZXF1ZXN0X3NlbmRlci5yZWNlaXZlUmVzcG9uc2UodCksdGhpcy5jYW5jZWwmJnRoaXMudHJhbnNwb3J0LnNlbmQodGhpcy5jYW5jZWwpO2JyZWFrO2Nhc2UgaS5TVEFUVVNfUFJPQ0VFRElORzp0aGlzLnJlcXVlc3Rfc2VuZGVyLnJlY2VpdmVSZXNwb25zZSh0KX1lbHNlIGlmKHM+PTIwMCYmczw9Mjk5KXN3aXRjaCh0aGlzLnN0YXRlKXtjYXNlIGkuU1RBVFVTX0NBTExJTkc6Y2FzZSBpLlNUQVRVU19QUk9DRUVESU5HOnRoaXMuc3RhdGVDaGFuZ2VkKGkuU1RBVFVTX0FDQ0VQVEVEKSx0aGlzLk09ZS5UaW1lcnMuc2V0VGltZW91dCh0aGlzLnRpbWVyX00uYmluZCh0aGlzKSxlLlRpbWVycy5USU1FUl9NKSx0aGlzLnJlcXVlc3Rfc2VuZGVyLnJlY2VpdmVSZXNwb25zZSh0KTticmVhaztjYXNlIGkuU1RBVFVTX0FDQ0VQVEVEOnRoaXMucmVxdWVzdF9zZW5kZXIucmVjZWl2ZVJlc3BvbnNlKHQpfWVsc2UgaWYocz49MzAwJiZzPD02OTkpc3dpdGNoKHRoaXMuc3RhdGUpe2Nhc2UgaS5TVEFUVVNfQ0FMTElORzpjYXNlIGkuU1RBVFVTX1BST0NFRURJTkc6dGhpcy5zdGF0ZUNoYW5nZWQoaS5TVEFUVVNfQ09NUExFVEVEKSx0aGlzLnNlbmRBQ0soKSx0aGlzLnJlcXVlc3Rfc2VuZGVyLnJlY2VpdmVSZXNwb25zZSh0KTticmVhaztjYXNlIGkuU1RBVFVTX0NPTVBMRVRFRDp0aGlzLnNlbmRBQ0soKX19O3ZhciBuPWZ1bmN0aW9uKGUsaSxzKXt2YXIgcjt0aGlzLnRyYW5zcG9ydD1zLHRoaXMuaWQ9XCJ6OWhHNGJLXCIrTWF0aC5mbG9vcigxZTcqTWF0aC5yYW5kb20oKSksdGhpcy5yZXF1ZXN0X3NlbmRlcj1lLHRoaXMucmVxdWVzdD1pLHRoaXMubG9nZ2VyPWUudWEuZ2V0TG9nZ2VyKFwic2lwLnRyYW5zYWN0aW9uLm5pY3RcIix0aGlzLmlkKSxyPXQoZSxzLHRoaXMuaWQpLHRoaXMucmVxdWVzdC5zZXRIZWFkZXIoXCJ2aWFcIixyKX07KG4ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZS5FdmVudEVtaXR0ZXIucHJvdG90eXBlKSkuc2VuZD1mdW5jdGlvbigpe3RoaXMudHJhbnNwb3J0LnNlbmQodGhpcy5yZXF1ZXN0KXx8dGhpcy5vblRyYW5zcG9ydEVycm9yKCl9LG4ucHJvdG90eXBlLm9uVHJhbnNwb3J0RXJyb3I9ZnVuY3Rpb24oKXt0aGlzLmxvZ2dlci5sb2coXCJ0cmFuc3BvcnQgZXJyb3Igb2NjdXJyZWQsIGZvciBhbiBBQ0sgY2xpZW50IHRyYW5zYWN0aW9uIFwiK3RoaXMuaWQpLHRoaXMucmVxdWVzdF9zZW5kZXIub25UcmFuc3BvcnRFcnJvcigpfTt2YXIgbz1mdW5jdGlvbihlLHQpe3RoaXMudHlwZT1pLk5PTl9JTlZJVEVfU0VSVkVSLHRoaXMuaWQ9ZS52aWFfYnJhbmNoLHRoaXMucmVxdWVzdD1lLHRoaXMudHJhbnNwb3J0PWUudHJhbnNwb3J0LHRoaXMudWE9dCx0aGlzLmxhc3RfcmVzcG9uc2U9XCJcIixlLnNlcnZlcl90cmFuc2FjdGlvbj10aGlzLHRoaXMubG9nZ2VyPXQuZ2V0TG9nZ2VyKFwic2lwLnRyYW5zYWN0aW9uLm5pc3RcIix0aGlzLmlkKSx0aGlzLnN0YXRlPWkuU1RBVFVTX1RSWUlORyx0Lm5ld1RyYW5zYWN0aW9uKHRoaXMpfTsoby5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlLkV2ZW50RW1pdHRlci5wcm90b3R5cGUpKS5zdGF0ZUNoYW5nZWQ9ZnVuY3Rpb24oZSl7dGhpcy5zdGF0ZT1lLHRoaXMuZW1pdChcInN0YXRlQ2hhbmdlZFwiKX0sby5wcm90b3R5cGUudGltZXJfSj1mdW5jdGlvbigpe3RoaXMubG9nZ2VyLmRlYnVnKFwiVGltZXIgSiBleHBpcmVkIGZvciBub24tSU5WSVRFIHNlcnZlciB0cmFuc2FjdGlvbiBcIit0aGlzLmlkKSx0aGlzLnN0YXRlQ2hhbmdlZChpLlNUQVRVU19URVJNSU5BVEVEKSx0aGlzLnVhLmRlc3Ryb3lUcmFuc2FjdGlvbih0aGlzKX0sby5wcm90b3R5cGUub25UcmFuc3BvcnRFcnJvcj1mdW5jdGlvbigpe3RoaXMudHJhbnNwb3J0RXJyb3J8fCh0aGlzLnRyYW5zcG9ydEVycm9yPSEwLHRoaXMubG9nZ2VyLmxvZyhcInRyYW5zcG9ydCBlcnJvciBvY2N1cnJlZCwgZGVsZXRpbmcgbm9uLUlOVklURSBzZXJ2ZXIgdHJhbnNhY3Rpb24gXCIrdGhpcy5pZCksZS5UaW1lcnMuY2xlYXJUaW1lb3V0KHRoaXMuSiksdGhpcy5zdGF0ZUNoYW5nZWQoaS5TVEFUVVNfVEVSTUlOQVRFRCksdGhpcy51YS5kZXN0cm95VHJhbnNhY3Rpb24odGhpcykpfSxvLnByb3RvdHlwZS5yZWNlaXZlUmVzcG9uc2U9ZnVuY3Rpb24odCxzKXt2YXIgcj1lLlV0aWxzLmRlZmVyKCk7aWYoMTAwPT09dClzd2l0Y2godGhpcy5zdGF0ZSl7Y2FzZSBpLlNUQVRVU19UUllJTkc6dGhpcy5zdGF0ZUNoYW5nZWQoaS5TVEFUVVNfUFJPQ0VFRElORyksdGhpcy50cmFuc3BvcnQuc2VuZChzKXx8dGhpcy5vblRyYW5zcG9ydEVycm9yKCk7YnJlYWs7Y2FzZSBpLlNUQVRVU19QUk9DRUVESU5HOnRoaXMubGFzdF9yZXNwb25zZT1zLHRoaXMudHJhbnNwb3J0LnNlbmQocyk/ci5yZXNvbHZlKCk6KHRoaXMub25UcmFuc3BvcnRFcnJvcigpLHIucmVqZWN0KCkpfWVsc2UgaWYodD49MjAwJiZ0PD02OTkpc3dpdGNoKHRoaXMuc3RhdGUpe2Nhc2UgaS5TVEFUVVNfVFJZSU5HOmNhc2UgaS5TVEFUVVNfUFJPQ0VFRElORzp0aGlzLnN0YXRlQ2hhbmdlZChpLlNUQVRVU19DT01QTEVURUQpLHRoaXMubGFzdF9yZXNwb25zZT1zLHRoaXMuSj1lLlRpbWVycy5zZXRUaW1lb3V0KHRoaXMudGltZXJfSi5iaW5kKHRoaXMpLGUuVGltZXJzLlRJTUVSX0opLHRoaXMudHJhbnNwb3J0LnNlbmQocyk/ci5yZXNvbHZlKCk6KHRoaXMub25UcmFuc3BvcnRFcnJvcigpLHIucmVqZWN0KCkpfXJldHVybiByLnByb21pc2V9O3ZhciBhPWZ1bmN0aW9uKGUsdCl7dGhpcy50eXBlPWkuSU5WSVRFX1NFUlZFUix0aGlzLmlkPWUudmlhX2JyYW5jaCx0aGlzLnJlcXVlc3Q9ZSx0aGlzLnRyYW5zcG9ydD1lLnRyYW5zcG9ydCx0aGlzLnVhPXQsdGhpcy5sYXN0X3Jlc3BvbnNlPVwiXCIsZS5zZXJ2ZXJfdHJhbnNhY3Rpb249dGhpcyx0aGlzLmxvZ2dlcj10LmdldExvZ2dlcihcInNpcC50cmFuc2FjdGlvbi5pc3RcIix0aGlzLmlkKSx0aGlzLnN0YXRlPWkuU1RBVFVTX1BST0NFRURJTkcsdC5uZXdUcmFuc2FjdGlvbih0aGlzKSx0aGlzLnJlc2VuZFByb3Zpc2lvbmFsVGltZXI9bnVsbCxlLnJlcGx5KDEwMCl9OyhhLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUuRXZlbnRFbWl0dGVyLnByb3RvdHlwZSkpLnN0YXRlQ2hhbmdlZD1mdW5jdGlvbihlKXt0aGlzLnN0YXRlPWUsdGhpcy5lbWl0KFwic3RhdGVDaGFuZ2VkXCIpfSxhLnByb3RvdHlwZS50aW1lcl9IPWZ1bmN0aW9uKCl7dGhpcy5sb2dnZXIuZGVidWcoXCJUaW1lciBIIGV4cGlyZWQgZm9yIElOVklURSBzZXJ2ZXIgdHJhbnNhY3Rpb24gXCIrdGhpcy5pZCksdGhpcy5zdGF0ZT09PWkuU1RBVFVTX0NPTVBMRVRFRCYmdGhpcy5sb2dnZXIud2FybihcInRyYW5zYWN0aW9uc1wiLFwiQUNLIGZvciBJTlZJVEUgc2VydmVyIHRyYW5zYWN0aW9uIHdhcyBuZXZlciByZWNlaXZlZCwgY2FsbCB3aWxsIGJlIHRlcm1pbmF0ZWRcIiksdGhpcy5zdGF0ZUNoYW5nZWQoaS5TVEFUVVNfVEVSTUlOQVRFRCksdGhpcy51YS5kZXN0cm95VHJhbnNhY3Rpb24odGhpcyl9LGEucHJvdG90eXBlLnRpbWVyX0k9ZnVuY3Rpb24oKXt0aGlzLnN0YXRlQ2hhbmdlZChpLlNUQVRVU19URVJNSU5BVEVEKSx0aGlzLnVhLmRlc3Ryb3lUcmFuc2FjdGlvbih0aGlzKX0sYS5wcm90b3R5cGUudGltZXJfTD1mdW5jdGlvbigpe3RoaXMubG9nZ2VyLmRlYnVnKFwiVGltZXIgTCBleHBpcmVkIGZvciBJTlZJVEUgc2VydmVyIHRyYW5zYWN0aW9uIFwiK3RoaXMuaWQpLHRoaXMuc3RhdGU9PT1pLlNUQVRVU19BQ0NFUFRFRCYmKHRoaXMuc3RhdGVDaGFuZ2VkKGkuU1RBVFVTX1RFUk1JTkFURUQpLHRoaXMudWEuZGVzdHJveVRyYW5zYWN0aW9uKHRoaXMpKX0sYS5wcm90b3R5cGUub25UcmFuc3BvcnRFcnJvcj1mdW5jdGlvbigpe3RoaXMudHJhbnNwb3J0RXJyb3J8fCh0aGlzLnRyYW5zcG9ydEVycm9yPSEwLHRoaXMubG9nZ2VyLmxvZyhcInRyYW5zcG9ydCBlcnJvciBvY2N1cnJlZCwgZGVsZXRpbmcgSU5WSVRFIHNlcnZlciB0cmFuc2FjdGlvbiBcIit0aGlzLmlkKSxudWxsIT09dGhpcy5yZXNlbmRQcm92aXNpb25hbFRpbWVyJiYoZS5UaW1lcnMuY2xlYXJJbnRlcnZhbCh0aGlzLnJlc2VuZFByb3Zpc2lvbmFsVGltZXIpLHRoaXMucmVzZW5kUHJvdmlzaW9uYWxUaW1lcj1udWxsKSxlLlRpbWVycy5jbGVhclRpbWVvdXQodGhpcy5MKSxlLlRpbWVycy5jbGVhclRpbWVvdXQodGhpcy5IKSxlLlRpbWVycy5jbGVhclRpbWVvdXQodGhpcy5JKSx0aGlzLnN0YXRlQ2hhbmdlZChpLlNUQVRVU19URVJNSU5BVEVEKSx0aGlzLnVhLmRlc3Ryb3lUcmFuc2FjdGlvbih0aGlzKSl9LGEucHJvdG90eXBlLnJlc2VuZF9wcm92aXNpb25hbD1mdW5jdGlvbigpe3RoaXMudHJhbnNwb3J0LnNlbmQodGhpcy5sYXN0X3Jlc3BvbnNlKXx8dGhpcy5vblRyYW5zcG9ydEVycm9yKCl9LGEucHJvdG90eXBlLnJlY2VpdmVSZXNwb25zZT1mdW5jdGlvbih0LHMpe3ZhciByPWUuVXRpbHMuZGVmZXIoKTtpZih0Pj0xMDAmJnQ8PTE5OSlzd2l0Y2godGhpcy5zdGF0ZSl7Y2FzZSBpLlNUQVRVU19QUk9DRUVESU5HOnRoaXMudHJhbnNwb3J0LnNlbmQocyl8fHRoaXMub25UcmFuc3BvcnRFcnJvcigpLHRoaXMubGFzdF9yZXNwb25zZT1zfWlmKHQ+MTAwJiZ0PD0xOTkmJnRoaXMuc3RhdGU9PT1pLlNUQVRVU19QUk9DRUVESU5HKW51bGw9PT10aGlzLnJlc2VuZFByb3Zpc2lvbmFsVGltZXImJih0aGlzLnJlc2VuZFByb3Zpc2lvbmFsVGltZXI9ZS5UaW1lcnMuc2V0SW50ZXJ2YWwodGhpcy5yZXNlbmRfcHJvdmlzaW9uYWwuYmluZCh0aGlzKSxlLlRpbWVycy5QUk9WSVNJT05BTF9SRVNQT05TRV9JTlRFUlZBTCkpO2Vsc2UgaWYodD49MjAwJiZ0PD0yOTkpc3dpdGNoKHRoaXMuc3RhdGUpe2Nhc2UgaS5TVEFUVVNfUFJPQ0VFRElORzp0aGlzLnN0YXRlQ2hhbmdlZChpLlNUQVRVU19BQ0NFUFRFRCksdGhpcy5sYXN0X3Jlc3BvbnNlPXMsdGhpcy5MPWUuVGltZXJzLnNldFRpbWVvdXQodGhpcy50aW1lcl9MLmJpbmQodGhpcyksZS5UaW1lcnMuVElNRVJfTCksbnVsbCE9PXRoaXMucmVzZW5kUHJvdmlzaW9uYWxUaW1lciYmKGUuVGltZXJzLmNsZWFySW50ZXJ2YWwodGhpcy5yZXNlbmRQcm92aXNpb25hbFRpbWVyKSx0aGlzLnJlc2VuZFByb3Zpc2lvbmFsVGltZXI9bnVsbCk7Y2FzZSBpLlNUQVRVU19BQ0NFUFRFRDp0aGlzLnRyYW5zcG9ydC5zZW5kKHMpP3IucmVzb2x2ZSgpOih0aGlzLm9uVHJhbnNwb3J0RXJyb3IoKSxyLnJlamVjdCgpKX1lbHNlIGlmKHQ+PTMwMCYmdDw9Njk5KXN3aXRjaCh0aGlzLnN0YXRlKXtjYXNlIGkuU1RBVFVTX1BST0NFRURJTkc6bnVsbCE9PXRoaXMucmVzZW5kUHJvdmlzaW9uYWxUaW1lciYmKGUuVGltZXJzLmNsZWFySW50ZXJ2YWwodGhpcy5yZXNlbmRQcm92aXNpb25hbFRpbWVyKSx0aGlzLnJlc2VuZFByb3Zpc2lvbmFsVGltZXI9bnVsbCksdGhpcy50cmFuc3BvcnQuc2VuZChzKT8odGhpcy5zdGF0ZUNoYW5nZWQoaS5TVEFUVVNfQ09NUExFVEVEKSx0aGlzLkg9ZS5UaW1lcnMuc2V0VGltZW91dCh0aGlzLnRpbWVyX0guYmluZCh0aGlzKSxlLlRpbWVycy5USU1FUl9IKSxyLnJlc29sdmUoKSk6KHRoaXMub25UcmFuc3BvcnRFcnJvcigpLHIucmVqZWN0KCkpfXJldHVybiByLnByb21pc2V9O2UuVHJhbnNhY3Rpb25zPXtDOmksY2hlY2tUcmFuc2FjdGlvbjpmdW5jdGlvbih0LHMpe3ZhciByO3N3aXRjaChzLm1ldGhvZCl7Y2FzZSBlLkMuSU5WSVRFOmlmKHI9dC50cmFuc2FjdGlvbnMuaXN0W3MudmlhX2JyYW5jaF0pe3N3aXRjaChyLnN0YXRlKXtjYXNlIGkuU1RBVFVTX1BST0NFRURJTkc6ci50cmFuc3BvcnQuc2VuZChyLmxhc3RfcmVzcG9uc2UpfXJldHVybiEwfWJyZWFrO2Nhc2UgZS5DLkFDSzppZighKHI9dC50cmFuc2FjdGlvbnMuaXN0W3MudmlhX2JyYW5jaF0pKXJldHVybiExO2lmKHIuc3RhdGU9PT1pLlNUQVRVU19BQ0NFUFRFRClyZXR1cm4hMTtpZihyLnN0YXRlPT09aS5TVEFUVVNfQ09NUExFVEVEKXJldHVybiByLnN0YXRlQ2hhbmdlZChpLlNUQVRVU19DT05GSVJNRUQpLHIuST1lLlRpbWVycy5zZXRUaW1lb3V0KHIudGltZXJfSS5iaW5kKHIpLGUuVGltZXJzLlRJTUVSX0kpLCEwO2JyZWFrO2Nhc2UgZS5DLkNBTkNFTDpyZXR1cm4ocj10LnRyYW5zYWN0aW9ucy5pc3Rbcy52aWFfYnJhbmNoXSk/KHMucmVwbHlfc2woMjAwKSxyLnN0YXRlIT09aS5TVEFUVVNfUFJPQ0VFRElORyk6KHMucmVwbHlfc2woNDgxKSwhMCk7ZGVmYXVsdDppZihyPXQudHJhbnNhY3Rpb25zLm5pc3Rbcy52aWFfYnJhbmNoXSl7c3dpdGNoKHIuc3RhdGUpe2Nhc2UgaS5TVEFUVVNfVFJZSU5HOmJyZWFrO2Nhc2UgaS5TVEFUVVNfUFJPQ0VFRElORzpjYXNlIGkuU1RBVFVTX0NPTVBMRVRFRDpyLnRyYW5zcG9ydC5zZW5kKHIubGFzdF9yZXNwb25zZSl9cmV0dXJuITB9fX0sTm9uSW52aXRlQ2xpZW50VHJhbnNhY3Rpb246cyxJbnZpdGVDbGllbnRUcmFuc2FjdGlvbjpyLEFja0NsaWVudFRyYW5zYWN0aW9uOm4sTm9uSW52aXRlU2VydmVyVHJhbnNhY3Rpb246byxJbnZpdGVTZXJ2ZXJUcmFuc2FjdGlvbjphfX19LGZ1bmN0aW9uKGUsdCxpKXtcInVzZSBzdHJpY3RcIjtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQscz1pKDE3KShlKSxyPXtTVEFUVVNfRUFSTFk6MSxTVEFUVVNfQ09ORklSTUVEOjJ9Oyh0PWZ1bmN0aW9uKHQsaSxzLG4pe3ZhciBvO2lmKHRoaXMudWFjX3BlbmRpbmdfcmVwbHk9ITEsdGhpcy51YXNfcGVuZGluZ19yZXBseT0hMSwhaS5oYXNIZWFkZXIoXCJjb250YWN0XCIpKXJldHVybntlcnJvcjpcInVuYWJsZSB0byBjcmVhdGUgYSBEaWFsb2cgd2l0aG91dCBDb250YWN0IGhlYWRlciBmaWVsZFwifTtuPWkgaW5zdGFuY2VvZiBlLkluY29taW5nUmVzcG9uc2U/aS5zdGF0dXNfY29kZTwyMDA/ci5TVEFUVVNfRUFSTFk6ci5TVEFUVVNfQ09ORklSTUVEOm58fHIuU1RBVFVTX0NPTkZJUk1FRCxvPWkucGFyc2VIZWFkZXIoXCJjb250YWN0XCIpLFwiVUFTXCI9PT1zPyh0aGlzLmlkPXtjYWxsX2lkOmkuY2FsbF9pZCxsb2NhbF90YWc6aS50b190YWcscmVtb3RlX3RhZzppLmZyb21fdGFnLHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2FsbF9pZCt0aGlzLmxvY2FsX3RhZyt0aGlzLnJlbW90ZV90YWd9fSx0aGlzLnN0YXRlPW4sdGhpcy5yZW1vdGVfc2VxbnVtPWkuY3NlcSx0aGlzLmxvY2FsX3VyaT1pLnBhcnNlSGVhZGVyKFwidG9cIikudXJpLHRoaXMucmVtb3RlX3VyaT1pLnBhcnNlSGVhZGVyKFwiZnJvbVwiKS51cmksdGhpcy5yZW1vdGVfdGFyZ2V0PW8udXJpLHRoaXMucm91dGVfc2V0PWkuZ2V0SGVhZGVycyhcInJlY29yZC1yb3V0ZVwiKSx0aGlzLmludml0ZV9zZXFudW09aS5jc2VxLHRoaXMubG9jYWxfc2VxbnVtPWkuY3NlcSk6XCJVQUNcIj09PXMmJih0aGlzLmlkPXtjYWxsX2lkOmkuY2FsbF9pZCxsb2NhbF90YWc6aS5mcm9tX3RhZyxyZW1vdGVfdGFnOmkudG9fdGFnLHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2FsbF9pZCt0aGlzLmxvY2FsX3RhZyt0aGlzLnJlbW90ZV90YWd9fSx0aGlzLnN0YXRlPW4sdGhpcy5pbnZpdGVfc2VxbnVtPWkuY3NlcSx0aGlzLmxvY2FsX3NlcW51bT1pLmNzZXEsdGhpcy5sb2NhbF91cmk9aS5wYXJzZUhlYWRlcihcImZyb21cIikudXJpLHRoaXMucHJhY2tlZD1bXSx0aGlzLnJlbW90ZV91cmk9aS5wYXJzZUhlYWRlcihcInRvXCIpLnVyaSx0aGlzLnJlbW90ZV90YXJnZXQ9by51cmksdGhpcy5yb3V0ZV9zZXQ9aS5nZXRIZWFkZXJzKFwicmVjb3JkLXJvdXRlXCIpLnJldmVyc2UoKSksdGhpcy5sb2dnZXI9dC51YS5nZXRMb2dnZXIoXCJzaXAuZGlhbG9nXCIsdGhpcy5pZC50b1N0cmluZygpKSx0aGlzLm93bmVyPXQsdC51YS5kaWFsb2dzW3RoaXMuaWQudG9TdHJpbmcoKV09dGhpcyx0aGlzLmxvZ2dlci5sb2coXCJuZXcgXCIrcytcIiBkaWFsb2cgY3JlYXRlZCB3aXRoIHN0YXR1cyBcIisodGhpcy5zdGF0ZT09PXIuU1RBVFVTX0VBUkxZP1wiRUFSTFlcIjpcIkNPTkZJUk1FRFwiKSksdC5lbWl0KFwiZGlhbG9nXCIsdGhpcyl9KS5wcm90b3R5cGU9e3VwZGF0ZTpmdW5jdGlvbihlLHQpe3RoaXMuc3RhdGU9ci5TVEFUVVNfQ09ORklSTUVELHRoaXMubG9nZ2VyLmxvZyhcImRpYWxvZyBcIit0aGlzLmlkLnRvU3RyaW5nKCkrXCIgIGNoYW5nZWQgdG8gQ09ORklSTUVEIHN0YXRlXCIpLFwiVUFDXCI9PT10JiYodGhpcy5yb3V0ZV9zZXQ9ZS5nZXRIZWFkZXJzKFwicmVjb3JkLXJvdXRlXCIpLnJldmVyc2UoKSl9LHRlcm1pbmF0ZTpmdW5jdGlvbigpe3RoaXMubG9nZ2VyLmxvZyhcImRpYWxvZyBcIit0aGlzLmlkLnRvU3RyaW5nKCkrXCIgZGVsZXRlZFwiKSx0aGlzLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXImJnRoaXMuc3RhdGUhPT1yLlNUQVRVU19DT05GSVJNRUQmJnRoaXMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlci5jbG9zZSgpLGRlbGV0ZSB0aGlzLm93bmVyLnVhLmRpYWxvZ3NbdGhpcy5pZC50b1N0cmluZygpXX0sY3JlYXRlUmVxdWVzdDpmdW5jdGlvbih0LGkscyl7dmFyIHIsbjtyZXR1cm4gaT0oaXx8W10pLnNsaWNlKCksdGhpcy5sb2NhbF9zZXFudW18fCh0aGlzLmxvY2FsX3NlcW51bT1NYXRoLmZsb29yKDFlNCpNYXRoLnJhbmRvbSgpKSkscj10PT09ZS5DLkNBTkNFTHx8dD09PWUuQy5BQ0s/dGhpcy5pbnZpdGVfc2VxbnVtOnRoaXMubG9jYWxfc2VxbnVtKz0xLG49bmV3IGUuT3V0Z29pbmdSZXF1ZXN0KHQsdGhpcy5yZW1vdGVfdGFyZ2V0LHRoaXMub3duZXIudWEse2NzZXE6cixjYWxsX2lkOnRoaXMuaWQuY2FsbF9pZCxmcm9tX3VyaTp0aGlzLmxvY2FsX3VyaSxmcm9tX3RhZzp0aGlzLmlkLmxvY2FsX3RhZyx0b191cmk6dGhpcy5yZW1vdGVfdXJpLHRvX3RhZzp0aGlzLmlkLnJlbW90ZV90YWcscm91dGVfc2V0OnRoaXMucm91dGVfc2V0fSxpLHMpLG4uZGlhbG9nPXRoaXMsbn0sY2hlY2tJbkRpYWxvZ1JlcXVlc3Q6ZnVuY3Rpb24odCl7dmFyIGk9dGhpcztpZih0aGlzLnJlbW90ZV9zZXFudW0pe2lmKHQuY3NlcTx0aGlzLnJlbW90ZV9zZXFudW0pcmV0dXJuIHQubWV0aG9kIT09ZS5DLkFDSyYmdC5yZXBseSg1MDApLHQuY3NlcT09PXRoaXMuaW52aXRlX3NlcW51bX1lbHNlIHRoaXMucmVtb3RlX3NlcW51bT10LmNzZXE7c3dpdGNoKHQubWV0aG9kKXtjYXNlIGUuQy5JTlZJVEU6aWYoITA9PT10aGlzLnVhY19wZW5kaW5nX3JlcGx5KXQucmVwbHkoNDkxKTtlbHNle2lmKCEwPT09dGhpcy51YXNfcGVuZGluZ19yZXBseSYmdC5jc2VxPnRoaXMucmVtb3RlX3NlcW51bSl7dmFyIHM9MSsoMTAqTWF0aC5yYW5kb20oKXwwKTtyZXR1cm4gdC5yZXBseSg1MDAsbnVsbCxbXCJSZXRyeS1BZnRlcjpcIitzXSksdGhpcy5yZW1vdGVfc2VxbnVtPXQuY3NlcSwhMX10aGlzLnVhc19wZW5kaW5nX3JlcGx5PSEwLHQuc2VydmVyX3RyYW5zYWN0aW9uLm9uKFwic3RhdGVDaGFuZ2VkXCIsZnVuY3Rpb24gdCgpe3RoaXMuc3RhdGUhPT1lLlRyYW5zYWN0aW9ucy5DLlNUQVRVU19BQ0NFUFRFRCYmdGhpcy5zdGF0ZSE9PWUuVHJhbnNhY3Rpb25zLkMuU1RBVFVTX0NPTVBMRVRFRCYmdGhpcy5zdGF0ZSE9PWUuVHJhbnNhY3Rpb25zLkMuU1RBVFVTX1RFUk1JTkFURUR8fCh0aGlzLnJlbW92ZUxpc3RlbmVyKFwic3RhdGVDaGFuZ2VkXCIsdCksaS51YXNfcGVuZGluZ19yZXBseT0hMSl9KX10Lmhhc0hlYWRlcihcImNvbnRhY3RcIikmJnQuc2VydmVyX3RyYW5zYWN0aW9uLm9uKFwic3RhdGVDaGFuZ2VkXCIsZnVuY3Rpb24oKXt0aGlzLnN0YXRlPT09ZS5UcmFuc2FjdGlvbnMuQy5TVEFUVVNfQUNDRVBURUQmJihpLnJlbW90ZV90YXJnZXQ9dC5wYXJzZUhlYWRlcihcImNvbnRhY3RcIikudXJpKX0pO2JyZWFrO2Nhc2UgZS5DLk5PVElGWTp0Lmhhc0hlYWRlcihcImNvbnRhY3RcIikmJnQuc2VydmVyX3RyYW5zYWN0aW9uLm9uKFwic3RhdGVDaGFuZ2VkXCIsZnVuY3Rpb24oKXt0aGlzLnN0YXRlPT09ZS5UcmFuc2FjdGlvbnMuQy5TVEFUVVNfQ09NUExFVEVEJiYoaS5yZW1vdGVfdGFyZ2V0PXQucGFyc2VIZWFkZXIoXCJjb250YWN0XCIpLnVyaSl9KX1yZXR1cm4gdC5jc2VxPnRoaXMucmVtb3RlX3NlcW51bSYmKHRoaXMucmVtb3RlX3NlcW51bT10LmNzZXEpLCEwfSxzZW5kUmVxdWVzdDpmdW5jdGlvbihlLHQsaSl7dmFyIHI9KChpPWl8fHt9KS5leHRyYUhlYWRlcnN8fFtdKS5zbGljZSgpLG49bnVsbDtpLmJvZHkmJihpLmJvZHkuYm9keT9uPWkuYm9keTooKG49e30pLmJvZHk9aS5ib2R5LGkuY29udGVudFR5cGUmJihuLmNvbnRlbnRUeXBlPWkuY29udGVudFR5cGUpKSk7dmFyIG89dGhpcy5jcmVhdGVSZXF1ZXN0KHQscixuKTtyZXR1cm4gbmV3IHModGhpcyxlLG8pLnNlbmQoKSxvfSxyZWNlaXZlUmVxdWVzdDpmdW5jdGlvbihlKXt0aGlzLmNoZWNrSW5EaWFsb2dSZXF1ZXN0KGUpJiZ0aGlzLm93bmVyLnJlY2VpdmVSZXF1ZXN0KGUpfX0sdC5DPXIsZS5EaWFsb2c9dH19LGZ1bmN0aW9uKGUsdCxpKXtcInVzZSBzdHJpY3RcIjtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIHQ9ZnVuY3Rpb24oZSx0LGkpe3RoaXMuZGlhbG9nPWUsdGhpcy5hcHBsaWNhbnQ9dCx0aGlzLnJlcXVlc3Q9aSx0aGlzLnJlYXR0ZW1wdD0hMSx0aGlzLnJlYXR0ZW1wdFRpbWVyPW51bGx9LHQucHJvdG90eXBlPXtzZW5kOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxpPW5ldyBlLlJlcXVlc3RTZW5kZXIodGhpcyx0aGlzLmRpYWxvZy5vd25lci51YSk7aS5zZW5kKCksdGhpcy5yZXF1ZXN0Lm1ldGhvZD09PWUuQy5JTlZJVEUmJmkuY2xpZW50VHJhbnNhY3Rpb24uc3RhdGUhPT1lLlRyYW5zYWN0aW9ucy5DLlNUQVRVU19URVJNSU5BVEVEJiYodGhpcy5kaWFsb2cudWFjX3BlbmRpbmdfcmVwbHk9ITAsaS5jbGllbnRUcmFuc2FjdGlvbi5vbihcInN0YXRlQ2hhbmdlZFwiLGZ1bmN0aW9uIGkoKXt0aGlzLnN0YXRlIT09ZS5UcmFuc2FjdGlvbnMuQy5TVEFUVVNfQUNDRVBURUQmJnRoaXMuc3RhdGUhPT1lLlRyYW5zYWN0aW9ucy5DLlNUQVRVU19DT01QTEVURUQmJnRoaXMuc3RhdGUhPT1lLlRyYW5zYWN0aW9ucy5DLlNUQVRVU19URVJNSU5BVEVEfHwodGhpcy5yZW1vdmVMaXN0ZW5lcihcInN0YXRlQ2hhbmdlZFwiLGkpLHQuZGlhbG9nLnVhY19wZW5kaW5nX3JlcGx5PSExKX0pKX0sb25SZXF1ZXN0VGltZW91dDpmdW5jdGlvbigpe3RoaXMuYXBwbGljYW50Lm9uUmVxdWVzdFRpbWVvdXQoKX0sb25UcmFuc3BvcnRFcnJvcjpmdW5jdGlvbigpe3RoaXMuYXBwbGljYW50Lm9uVHJhbnNwb3J0RXJyb3IoKX0scmVjZWl2ZVJlc3BvbnNlOmZ1bmN0aW9uKHQpe3ZhciBpPXRoaXM7NDA4PT09dC5zdGF0dXNfY29kZXx8NDgxPT09dC5zdGF0dXNfY29kZT90aGlzLmFwcGxpY2FudC5vbkRpYWxvZ0Vycm9yKHQpOnQubWV0aG9kPT09ZS5DLklOVklURSYmNDkxPT09dC5zdGF0dXNfY29kZT90aGlzLnJlYXR0ZW1wdD90aGlzLmFwcGxpY2FudC5yZWNlaXZlUmVzcG9uc2UodCk6KHRoaXMucmVxdWVzdC5jc2VxLnZhbHVlPXRoaXMuZGlhbG9nLmxvY2FsX3NlcW51bSs9MSx0aGlzLnJlYXR0ZW1wdFRpbWVyPWUuVGltZXJzLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtpLmFwcGxpY2FudC5vd25lci5zdGF0dXMhPT1lLlNlc3Npb24uQy5TVEFUVVNfVEVSTUlOQVRFRCYmKGkucmVhdHRlbXB0PSEwLGkucmVxdWVzdF9zZW5kZXIuc2VuZCgpKX0sdGhpcy5nZXRSZWF0dGVtcHRUaW1lb3V0KCkpKTp0aGlzLmFwcGxpY2FudC5yZWNlaXZlUmVzcG9uc2UodCl9fSx0fX0sZnVuY3Rpb24oZSx0LGkpe1widXNlIHN0cmljdFwiO2UuZXhwb3J0cz1mdW5jdGlvbihlKXt2YXIgdDsodD1mdW5jdGlvbih0LGkpe3RoaXMubG9nZ2VyPWkuZ2V0TG9nZ2VyKFwic2lwLnJlcXVlc3RzZW5kZXJcIiksdGhpcy51YT1pLHRoaXMuYXBwbGljYW50PXQsdGhpcy5tZXRob2Q9dC5yZXF1ZXN0Lm1ldGhvZCx0aGlzLnJlcXVlc3Q9dC5yZXF1ZXN0LHRoaXMuY3JlZGVudGlhbHM9bnVsbCx0aGlzLmNoYWxsZW5nZWQ9ITEsdGhpcy5zdGFsZWQ9ITEsaS5zdGF0dXMhPT1lLlVBLkMuU1RBVFVTX1VTRVJfQ0xPU0VEfHx0aGlzLm1ldGhvZD09PWUuQy5CWUUmJnRoaXMubWV0aG9kPT09ZS5DLkFDS3x8dGhpcy5vblRyYW5zcG9ydEVycm9yKCl9KS5wcm90b3R5cGU9e3NlbmQ6ZnVuY3Rpb24oKXtzd2l0Y2godGhpcy5tZXRob2Qpe2Nhc2VcIklOVklURVwiOnRoaXMuY2xpZW50VHJhbnNhY3Rpb249bmV3IGUuVHJhbnNhY3Rpb25zLkludml0ZUNsaWVudFRyYW5zYWN0aW9uKHRoaXMsdGhpcy5yZXF1ZXN0LHRoaXMudWEudHJhbnNwb3J0KTticmVhaztjYXNlXCJBQ0tcIjp0aGlzLmNsaWVudFRyYW5zYWN0aW9uPW5ldyBlLlRyYW5zYWN0aW9ucy5BY2tDbGllbnRUcmFuc2FjdGlvbih0aGlzLHRoaXMucmVxdWVzdCx0aGlzLnVhLnRyYW5zcG9ydCk7YnJlYWs7ZGVmYXVsdDp0aGlzLmNsaWVudFRyYW5zYWN0aW9uPW5ldyBlLlRyYW5zYWN0aW9ucy5Ob25JbnZpdGVDbGllbnRUcmFuc2FjdGlvbih0aGlzLHRoaXMucmVxdWVzdCx0aGlzLnVhLnRyYW5zcG9ydCl9cmV0dXJuIHRoaXMuY2xpZW50VHJhbnNhY3Rpb24uc2VuZCgpLHRoaXMuY2xpZW50VHJhbnNhY3Rpb259LG9uUmVxdWVzdFRpbWVvdXQ6ZnVuY3Rpb24oKXt0aGlzLmFwcGxpY2FudC5vblJlcXVlc3RUaW1lb3V0KCl9LG9uVHJhbnNwb3J0RXJyb3I6ZnVuY3Rpb24oKXt0aGlzLmFwcGxpY2FudC5vblRyYW5zcG9ydEVycm9yKCl9LHJlY2VpdmVSZXNwb25zZTpmdW5jdGlvbih0KXt2YXIgaSxzLHIsbj10LnN0YXR1c19jb2RlO2lmKDQwMT09PW58fDQwNz09PW4pe2lmKDQwMT09PXQuc3RhdHVzX2NvZGU/KHM9dC5wYXJzZUhlYWRlcihcInd3dy1hdXRoZW50aWNhdGVcIikscj1cImF1dGhvcml6YXRpb25cIik6KHM9dC5wYXJzZUhlYWRlcihcInByb3h5LWF1dGhlbnRpY2F0ZVwiKSxyPVwicHJveHktYXV0aG9yaXphdGlvblwiKSwhcylyZXR1cm4gdGhpcy5sb2dnZXIud2Fybih0LnN0YXR1c19jb2RlK1wiIHdpdGggd3Jvbmcgb3IgbWlzc2luZyBjaGFsbGVuZ2UsIGNhbm5vdCBhdXRoZW50aWNhdGVcIiksdm9pZCB0aGlzLmFwcGxpY2FudC5yZWNlaXZlUmVzcG9uc2UodCk7aWYoIXRoaXMuY2hhbGxlbmdlZHx8IXRoaXMuc3RhbGVkJiYhMD09PXMuc3RhbGUpe2lmKHRoaXMuY3JlZGVudGlhbHN8fCh0aGlzLmNyZWRlbnRpYWxzPXRoaXMudWEuY29uZmlndXJhdGlvbi5hdXRoZW50aWNhdGlvbkZhY3RvcnkodGhpcy51YSkpLCF0aGlzLmNyZWRlbnRpYWxzLmF1dGhlbnRpY2F0ZSh0aGlzLnJlcXVlc3QscykpcmV0dXJuIHZvaWQgdGhpcy5hcHBsaWNhbnQucmVjZWl2ZVJlc3BvbnNlKHQpO3RoaXMuY2hhbGxlbmdlZD0hMCxzLnN0YWxlJiYodGhpcy5zdGFsZWQ9ITApLHQubWV0aG9kPT09ZS5DLlJFR0lTVEVSP2k9dGhpcy5hcHBsaWNhbnQuY3NlcSs9MTp0aGlzLnJlcXVlc3QuZGlhbG9nP2k9dGhpcy5yZXF1ZXN0LmRpYWxvZy5sb2NhbF9zZXFudW0rPTE6KGk9dGhpcy5yZXF1ZXN0LmNzZXErMSx0aGlzLnJlcXVlc3QuY3NlcT1pKSx0aGlzLnJlcXVlc3Quc2V0SGVhZGVyKFwiY3NlcVwiLGkrXCIgXCIrdGhpcy5tZXRob2QpLHRoaXMucmVxdWVzdC5zZXRIZWFkZXIocix0aGlzLmNyZWRlbnRpYWxzLnRvU3RyaW5nKCkpLHRoaXMuc2VuZCgpfWVsc2UgdGhpcy5hcHBsaWNhbnQucmVjZWl2ZVJlc3BvbnNlKHQpfWVsc2UgdGhpcy5hcHBsaWNhbnQucmVjZWl2ZVJlc3BvbnNlKHQpfX0sZS5SZXF1ZXN0U2VuZGVyPXR9fSxmdW5jdGlvbihlLHQsaSl7XCJ1c2Ugc3RyaWN0XCI7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0Oyh0PWZ1bmN0aW9uKHQpe3ZhciBpPXt9O3RoaXMucmVnaXN0cmFyPXQuY29uZmlndXJhdGlvbi5yZWdpc3RyYXJTZXJ2ZXIsdGhpcy5leHBpcmVzPXQuY29uZmlndXJhdGlvbi5yZWdpc3RlckV4cGlyZXMsdGhpcy5jb250YWN0PXQuY29udGFjdC50b1N0cmluZygpLHRoaXMuY29udGFjdCs9XCI7cmVnLWlkPTFcIix0aGlzLmNvbnRhY3QrPSc7K3NpcC5pbnN0YW5jZT1cIjx1cm46dXVpZDonK3QuY29uZmlndXJhdGlvbi5pbnN0YW5jZUlkKyc+XCInLHRoaXMuY2FsbF9pZD1lLlV0aWxzLmNyZWF0ZVJhbmRvbVRva2VuKDIyKSx0aGlzLmNzZXE9TWF0aC5mbG9vcigxZTQqTWF0aC5yYW5kb20oKSksdGhpcy50b191cmk9dC5jb25maWd1cmF0aW9uLnVyaSxpLnRvX3VyaT10aGlzLnRvX3VyaSxpLnRvX2Rpc3BsYXlOYW1lPXQuY29uZmlndXJhdGlvbi5kaXNwbGF5TmFtZSxpLmNhbGxfaWQ9dGhpcy5jYWxsX2lkLGkuY3NlcT10aGlzLmNzZXEsZS5VdGlscy5hdWdtZW50KHRoaXMsZS5DbGllbnRDb250ZXh0LFt0LFwiUkVHSVNURVJcIix0aGlzLnJlZ2lzdHJhcix7cGFyYW1zOml9XSksdGhpcy5yZWdpc3RyYXRpb25UaW1lcj1udWxsLHRoaXMucmVnaXN0cmF0aW9uRXhwaXJlZFRpbWVyPW51bGwsdGhpcy5yZWdpc3RlcmVkPSExLHRoaXMubG9nZ2VyPXQuZ2V0TG9nZ2VyKFwic2lwLnJlZ2lzdGVyY29udGV4dFwiKX0pLnByb3RvdHlwZT17cmVnaXN0ZXI6ZnVuY3Rpb24odCl7dmFyIGkscz10aGlzO3RoaXMub3B0aW9ucz10fHx7fSwoaT0odGhpcy5vcHRpb25zLmV4dHJhSGVhZGVyc3x8W10pLnNsaWNlKCkpLnB1c2goXCJDb250YWN0OiBcIit0aGlzLmNvbnRhY3QrXCI7ZXhwaXJlcz1cIit0aGlzLmV4cGlyZXMpLGkucHVzaChcIkFsbG93OiBcIitlLlVBLkMuQUxMT1dFRF9NRVRIT0RTLnRvU3RyaW5nKCkpLHRoaXMuY2xvc2VIZWFkZXJzPXRoaXMub3B0aW9ucy5jbG9zZVdpdGhIZWFkZXJzPyh0aGlzLm9wdGlvbnMuZXh0cmFIZWFkZXJzfHxbXSkuc2xpY2UoKTpbXSx0aGlzLnJlY2VpdmVSZXNwb25zZT1mdW5jdGlvbih0KXt2YXIgaSxyLG4sbz10LmdldEhlYWRlcnMoXCJjb250YWN0XCIpLmxlbmd0aDtpZih0LmNzZXE9PT10aGlzLmNzZXEpc3dpdGNoKG51bGwhPT10aGlzLnJlZ2lzdHJhdGlvblRpbWVyJiYoZS5UaW1lcnMuY2xlYXJUaW1lb3V0KHRoaXMucmVnaXN0cmF0aW9uVGltZXIpLHRoaXMucmVnaXN0cmF0aW9uVGltZXI9bnVsbCksITApe2Nhc2UvXjFbMC05XXsyfSQvLnRlc3QodC5zdGF0dXNfY29kZSk6dGhpcy5lbWl0KFwicHJvZ3Jlc3NcIix0KTticmVhaztjYXNlL14yWzAtOV17Mn0kLy50ZXN0KHQuc3RhdHVzX2NvZGUpOmlmKHRoaXMuZW1pdChcImFjY2VwdGVkXCIsdCksdC5oYXNIZWFkZXIoXCJleHBpcmVzXCIpJiYocj10LmdldEhlYWRlcihcImV4cGlyZXNcIikpLG51bGwhPT10aGlzLnJlZ2lzdHJhdGlvbkV4cGlyZWRUaW1lciYmKGUuVGltZXJzLmNsZWFyVGltZW91dCh0aGlzLnJlZ2lzdHJhdGlvbkV4cGlyZWRUaW1lciksdGhpcy5yZWdpc3RyYXRpb25FeHBpcmVkVGltZXI9bnVsbCksIW8pe3RoaXMubG9nZ2VyLndhcm4oXCJubyBDb250YWN0IGhlYWRlciBpbiByZXNwb25zZSB0byBSRUdJU1RFUiwgcmVzcG9uc2UgaWdub3JlZFwiKTticmVha31mb3IoO28tLTspe2lmKChpPXQucGFyc2VIZWFkZXIoXCJjb250YWN0XCIsbykpLnVyaS51c2VyPT09dGhpcy51YS5jb250YWN0LnVyaS51c2VyKXtyPWkuZ2V0UGFyYW0oXCJleHBpcmVzXCIpO2JyZWFrfWk9bnVsbH1pZighaSl7dGhpcy5sb2dnZXIud2FybihcIm5vIENvbnRhY3QgaGVhZGVyIHBvaW50aW5nIHRvIHVzLCByZXNwb25zZSBpZ25vcmVkXCIpO2JyZWFrfXJ8fChyPXRoaXMuZXhwaXJlcyksdGhpcy5yZWdpc3RyYXRpb25UaW1lcj1lLlRpbWVycy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cy5yZWdpc3RyYXRpb25UaW1lcj1udWxsLHMucmVnaXN0ZXIocy5vcHRpb25zKX0sMWUzKnItM2UzKSx0aGlzLnJlZ2lzdHJhdGlvbkV4cGlyZWRUaW1lcj1lLlRpbWVycy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cy5sb2dnZXIud2FybihcInJlZ2lzdHJhdGlvbiBleHBpcmVkXCIpLHMucmVnaXN0ZXJlZCYmcy51bnJlZ2lzdGVyZWQobnVsbCxlLkMuY2F1c2VzLkVYUElSRVMpfSwxZTMqciksaS5oYXNQYXJhbShcInRlbXAtZ3J1dVwiKSYmKHRoaXMudWEuY29udGFjdC50ZW1wX2dydXU9ZS5VUkkucGFyc2UoaS5nZXRQYXJhbShcInRlbXAtZ3J1dVwiKS5yZXBsYWNlKC9cIi9nLFwiXCIpKSksaS5oYXNQYXJhbShcInB1Yi1ncnV1XCIpJiYodGhpcy51YS5jb250YWN0LnB1Yl9ncnV1PWUuVVJJLnBhcnNlKGkuZ2V0UGFyYW0oXCJwdWItZ3J1dVwiKS5yZXBsYWNlKC9cIi9nLFwiXCIpKSksdGhpcy5yZWdpc3RlcmVkPSEwLHRoaXMuZW1pdChcInJlZ2lzdGVyZWRcIix0fHxudWxsKTticmVhaztjYXNlL140MjMkLy50ZXN0KHQuc3RhdHVzX2NvZGUpOnQuaGFzSGVhZGVyKFwibWluLWV4cGlyZXNcIik/KHRoaXMuZXhwaXJlcz10LmdldEhlYWRlcihcIm1pbi1leHBpcmVzXCIpLHRoaXMucmVnaXN0ZXIodGhpcy5vcHRpb25zKSk6KHRoaXMubG9nZ2VyLndhcm4oXCI0MjMgcmVzcG9uc2UgcmVjZWl2ZWQgZm9yIFJFR0lTVEVSIHdpdGhvdXQgTWluLUV4cGlyZXNcIiksdGhpcy5yZWdpc3RyYXRpb25GYWlsdXJlKHQsZS5DLmNhdXNlcy5TSVBfRkFJTFVSRV9DT0RFKSk7YnJlYWs7ZGVmYXVsdDpuPWUuVXRpbHMuc2lwRXJyb3JDYXVzZSh0LnN0YXR1c19jb2RlKSx0aGlzLnJlZ2lzdHJhdGlvbkZhaWx1cmUodCxuKX19LHRoaXMub25SZXF1ZXN0VGltZW91dD1mdW5jdGlvbigpe3RoaXMucmVnaXN0cmF0aW9uRmFpbHVyZShudWxsLGUuQy5jYXVzZXMuUkVRVUVTVF9USU1FT1VUKX0sdGhpcy5vblRyYW5zcG9ydEVycm9yPWZ1bmN0aW9uKCl7dGhpcy5yZWdpc3RyYXRpb25GYWlsdXJlKG51bGwsZS5DLmNhdXNlcy5DT05ORUNUSU9OX0VSUk9SKX0sdGhpcy5jc2VxKyssdGhpcy5yZXF1ZXN0LmNzZXE9dGhpcy5jc2VxLHRoaXMucmVxdWVzdC5zZXRIZWFkZXIoXCJjc2VxXCIsdGhpcy5jc2VxK1wiIFJFR0lTVEVSXCIpLHRoaXMucmVxdWVzdC5leHRyYUhlYWRlcnM9aSx0aGlzLnNlbmQoKX0scmVnaXN0cmF0aW9uRmFpbHVyZTpmdW5jdGlvbihlLHQpe3RoaXMuZW1pdChcImZhaWxlZFwiLGV8fG51bGwsdHx8bnVsbCl9LG9uVHJhbnNwb3J0Q2xvc2VkOmZ1bmN0aW9uKCl7dGhpcy5yZWdpc3RlcmVkX2JlZm9yZT10aGlzLnJlZ2lzdGVyZWQsbnVsbCE9PXRoaXMucmVnaXN0cmF0aW9uVGltZXImJihlLlRpbWVycy5jbGVhclRpbWVvdXQodGhpcy5yZWdpc3RyYXRpb25UaW1lciksdGhpcy5yZWdpc3RyYXRpb25UaW1lcj1udWxsKSxudWxsIT09dGhpcy5yZWdpc3RyYXRpb25FeHBpcmVkVGltZXImJihlLlRpbWVycy5jbGVhclRpbWVvdXQodGhpcy5yZWdpc3RyYXRpb25FeHBpcmVkVGltZXIpLHRoaXMucmVnaXN0cmF0aW9uRXhwaXJlZFRpbWVyPW51bGwpLHRoaXMucmVnaXN0ZXJlZCYmdGhpcy51bnJlZ2lzdGVyZWQobnVsbCxlLkMuY2F1c2VzLkNPTk5FQ1RJT05fRVJST1IpfSxvblRyYW5zcG9ydENvbm5lY3RlZDpmdW5jdGlvbigpe3RoaXMucmVnaXN0ZXIodGhpcy5vcHRpb25zKX0sY2xvc2U6ZnVuY3Rpb24oKXt2YXIgZT17YWxsOiExLGV4dHJhSGVhZGVyczp0aGlzLmNsb3NlSGVhZGVyc307dGhpcy5yZWdpc3RlcmVkX2JlZm9yZT10aGlzLnJlZ2lzdGVyZWQsdGhpcy5yZWdpc3RlcmVkJiZ0aGlzLnVucmVnaXN0ZXIoZSl9LHVucmVnaXN0ZXI6ZnVuY3Rpb24odCl7dmFyIGk7dD10fHx7fSx0aGlzLnJlZ2lzdGVyZWR8fHQuYWxsfHx0aGlzLmxvZ2dlci53YXJuKFwiQWxyZWFkeSB1bnJlZ2lzdGVyZWQsIGJ1dCBzZW5kaW5nIGFuIHVucmVnaXN0ZXIgYW55d2F5cy5cIiksaT0odC5leHRyYUhlYWRlcnN8fFtdKS5zbGljZSgpLHRoaXMucmVnaXN0ZXJlZD0hMSxudWxsIT09dGhpcy5yZWdpc3RyYXRpb25UaW1lciYmKGUuVGltZXJzLmNsZWFyVGltZW91dCh0aGlzLnJlZ2lzdHJhdGlvblRpbWVyKSx0aGlzLnJlZ2lzdHJhdGlvblRpbWVyPW51bGwpLHQuYWxsPyhpLnB1c2goXCJDb250YWN0OiAqXCIpLGkucHVzaChcIkV4cGlyZXM6IDBcIikpOmkucHVzaChcIkNvbnRhY3Q6IFwiK3RoaXMuY29udGFjdCtcIjtleHBpcmVzPTBcIiksdGhpcy5yZWNlaXZlUmVzcG9uc2U9ZnVuY3Rpb24odCl7dmFyIGk7c3dpdGNoKCEwKXtjYXNlL14xWzAtOV17Mn0kLy50ZXN0KHQuc3RhdHVzX2NvZGUpOnRoaXMuZW1pdChcInByb2dyZXNzXCIsdCk7YnJlYWs7Y2FzZS9eMlswLTldezJ9JC8udGVzdCh0LnN0YXR1c19jb2RlKTp0aGlzLmVtaXQoXCJhY2NlcHRlZFwiLHQpLG51bGwhPT10aGlzLnJlZ2lzdHJhdGlvbkV4cGlyZWRUaW1lciYmKGUuVGltZXJzLmNsZWFyVGltZW91dCh0aGlzLnJlZ2lzdHJhdGlvbkV4cGlyZWRUaW1lciksdGhpcy5yZWdpc3RyYXRpb25FeHBpcmVkVGltZXI9bnVsbCksdGhpcy51bnJlZ2lzdGVyZWQodCk7YnJlYWs7ZGVmYXVsdDppPWUuVXRpbHMuc2lwRXJyb3JDYXVzZSh0LnN0YXR1c19jb2RlKSx0aGlzLnVucmVnaXN0ZXJlZCh0LGkpfX0sdGhpcy5vblJlcXVlc3RUaW1lb3V0PWZ1bmN0aW9uKCl7fSx0aGlzLm9uVHJhbnNwb3J0RXJyb3I9ZnVuY3Rpb24oKXt9LHRoaXMuY3NlcSsrLHRoaXMucmVxdWVzdC5jc2VxPXRoaXMuY3NlcSx0aGlzLnJlcXVlc3Quc2V0SGVhZGVyKFwiY3NlcVwiLHRoaXMuY3NlcStcIiBSRUdJU1RFUlwiKSx0aGlzLnJlcXVlc3QuZXh0cmFIZWFkZXJzPWksdGhpcy5zZW5kKCl9LHVucmVnaXN0ZXJlZDpmdW5jdGlvbihlLHQpe3RoaXMucmVnaXN0ZXJlZD0hMSx0aGlzLmVtaXQoXCJ1bnJlZ2lzdGVyZWRcIixlfHxudWxsLHR8fG51bGwpfX0sZS5SZWdpc3RlckNvbnRleHQ9dH19LGZ1bmN0aW9uKGUsdCxpKXtcInVzZSBzdHJpY3RcIjtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQ9ZnVuY3Rpb24oZSx0KXt9O3JldHVybiB0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUucHJvdG90eXBlLHtjbG9zZTp7dmFsdWU6ZnVuY3Rpb24oKXt9fSxnZXREZXNjcmlwdGlvbjp7dmFsdWU6ZnVuY3Rpb24oZSx0KXt9fSxoYXNEZXNjcmlwdGlvbjp7dmFsdWU6ZnVuY3Rpb24oZSl7fX0saG9sZE1vZGlmaWVyOnt2YWx1ZTpmdW5jdGlvbihlKXt9fSxzZXREZXNjcmlwdGlvbjp7dmFsdWU6ZnVuY3Rpb24oZSx0LGkpe319fSksdH19LGZ1bmN0aW9uKGUsdCxpKXtcInVzZSBzdHJpY3RcIjtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQ7KCh0PWZ1bmN0aW9uKHQsaSxzLHIpe3ZhciBuPXM7aWYodm9pZCAwPT09cyl0aHJvdyBuZXcgVHlwZUVycm9yKFwiTm90IGVub3VnaCBhcmd1bWVudHNcIik7aWYodGhpcy51YT10LHRoaXMubG9nZ2VyPXQuZ2V0TG9nZ2VyKFwic2lwLmNsaWVudGNvbnRleHRcIiksdGhpcy5tZXRob2Q9aSwhKHM9dC5ub3JtYWxpemVUYXJnZXQocykpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIHRhcmdldDogXCIrbik7KHI9T2JqZWN0LmNyZWF0ZShyfHxPYmplY3QucHJvdG90eXBlKSkuZXh0cmFIZWFkZXJzPShyLmV4dHJhSGVhZGVyc3x8W10pLnNsaWNlKCksdGhpcy5yZXF1ZXN0PW5ldyBlLk91dGdvaW5nUmVxdWVzdCh0aGlzLm1ldGhvZCxzLHRoaXMudWEsci5wYXJhbXMsci5leHRyYUhlYWRlcnMpLHIuYm9keSYmKHRoaXMuYm9keT17fSx0aGlzLmJvZHkuYm9keT1yLmJvZHksci5jb250ZW50VHlwZSYmKHRoaXMuYm9keS5jb250ZW50VHlwZT1yLmNvbnRlbnRUeXBlKSx0aGlzLnJlcXVlc3QuYm9keT10aGlzLmJvZHkpLHRoaXMubG9jYWxJZGVudGl0eT10aGlzLnJlcXVlc3QuZnJvbSx0aGlzLnJlbW90ZUlkZW50aXR5PXRoaXMucmVxdWVzdC50byx0aGlzLmRhdGE9e319KS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlLkV2ZW50RW1pdHRlci5wcm90b3R5cGUpKS5zZW5kPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBlLlJlcXVlc3RTZW5kZXIodGhpcyx0aGlzLnVhKS5zZW5kKCksdGhpc30sdC5wcm90b3R5cGUuY2FuY2VsPWZ1bmN0aW9uKHQpeyh0PXR8fHt9KS5leHRyYUhlYWRlcnM9KHQuZXh0cmFIZWFkZXJzfHxbXSkuc2xpY2UoKTt2YXIgaT1lLlV0aWxzLmdldENhbmNlbFJlYXNvbih0LnN0YXR1c19jb2RlLHQucmVhc29uX3BocmFzZSk7dGhpcy5yZXF1ZXN0LmNhbmNlbChpLHQuZXh0cmFIZWFkZXJzKSx0aGlzLmVtaXQoXCJjYW5jZWxcIil9LHQucHJvdG90eXBlLnJlY2VpdmVSZXNwb25zZT1mdW5jdGlvbih0KXt2YXIgaT1lLlV0aWxzLmdldFJlYXNvblBocmFzZSh0LnN0YXR1c19jb2RlKTtzd2l0Y2goITApe2Nhc2UvXjFbMC05XXsyfSQvLnRlc3QodC5zdGF0dXNfY29kZSk6dGhpcy5lbWl0KFwicHJvZ3Jlc3NcIix0LGkpO2JyZWFrO2Nhc2UvXjJbMC05XXsyfSQvLnRlc3QodC5zdGF0dXNfY29kZSk6dGhpcy51YS5hcHBsaWNhbnRzW3RoaXNdJiZkZWxldGUgdGhpcy51YS5hcHBsaWNhbnRzW3RoaXNdLHRoaXMuZW1pdChcImFjY2VwdGVkXCIsdCxpKTticmVhaztkZWZhdWx0OnRoaXMudWEuYXBwbGljYW50c1t0aGlzXSYmZGVsZXRlIHRoaXMudWEuYXBwbGljYW50c1t0aGlzXSx0aGlzLmVtaXQoXCJyZWplY3RlZFwiLHQsaSksdGhpcy5lbWl0KFwiZmFpbGVkXCIsdCxpKX19LHQucHJvdG90eXBlLm9uUmVxdWVzdFRpbWVvdXQ9ZnVuY3Rpb24oKXt0aGlzLmVtaXQoXCJmYWlsZWRcIixudWxsLGUuQy5jYXVzZXMuUkVRVUVTVF9USU1FT1VUKX0sdC5wcm90b3R5cGUub25UcmFuc3BvcnRFcnJvcj1mdW5jdGlvbigpe3RoaXMuZW1pdChcImZhaWxlZFwiLG51bGwsZS5DLmNhdXNlcy5DT05ORUNUSU9OX0VSUk9SKX0sZS5DbGllbnRDb250ZXh0PXR9fSxmdW5jdGlvbihlLHQsaSl7XCJ1c2Ugc3RyaWN0XCI7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0OygodD1mdW5jdGlvbih0LGkpe3RoaXMudWE9dCx0aGlzLmxvZ2dlcj10LmdldExvZ2dlcihcInNpcC5zZXJ2ZXJjb250ZXh0XCIpLHRoaXMucmVxdWVzdD1pLGkubWV0aG9kPT09ZS5DLklOVklURT90aGlzLnRyYW5zYWN0aW9uPW5ldyBlLlRyYW5zYWN0aW9ucy5JbnZpdGVTZXJ2ZXJUcmFuc2FjdGlvbihpLHQpOnRoaXMudHJhbnNhY3Rpb249bmV3IGUuVHJhbnNhY3Rpb25zLk5vbkludml0ZVNlcnZlclRyYW5zYWN0aW9uKGksdCksaS5ib2R5JiYodGhpcy5ib2R5PWkuYm9keSksaS5oYXNIZWFkZXIoXCJDb250ZW50LVR5cGVcIikmJih0aGlzLmNvbnRlbnRUeXBlPWkuZ2V0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIpKSx0aGlzLm1ldGhvZD1pLm1ldGhvZCx0aGlzLmRhdGE9e30sdGhpcy5sb2NhbElkZW50aXR5PWkudG8sdGhpcy5yZW1vdGVJZGVudGl0eT1pLmZyb219KS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlLkV2ZW50RW1pdHRlci5wcm90b3R5cGUpKS5wcm9ncmVzcz1mdW5jdGlvbihlKXtyZXR1cm4oZT1PYmplY3QuY3JlYXRlKGV8fE9iamVjdC5wcm90b3R5cGUpKS5zdGF0dXNDb2RlfHwoZS5zdGF0dXNDb2RlPTE4MCksZS5taW5Db2RlPTEwMCxlLm1heENvZGU9MTk5LGUuZXZlbnRzPVtcInByb2dyZXNzXCJdLHRoaXMucmVwbHkoZSl9LHQucHJvdG90eXBlLmFjY2VwdD1mdW5jdGlvbihlKXtyZXR1cm4oZT1PYmplY3QuY3JlYXRlKGV8fE9iamVjdC5wcm90b3R5cGUpKS5zdGF0dXNDb2RlfHwoZS5zdGF0dXNDb2RlPTIwMCksZS5taW5Db2RlPTIwMCxlLm1heENvZGU9Mjk5LGUuZXZlbnRzPVtcImFjY2VwdGVkXCJdLHRoaXMucmVwbHkoZSl9LHQucHJvdG90eXBlLnJlamVjdD1mdW5jdGlvbihlKXtyZXR1cm4oZT1PYmplY3QuY3JlYXRlKGV8fE9iamVjdC5wcm90b3R5cGUpKS5zdGF0dXNDb2RlfHwoZS5zdGF0dXNDb2RlPTQ4MCksZS5taW5Db2RlPTMwMCxlLm1heENvZGU9Njk5LGUuZXZlbnRzPVtcInJlamVjdGVkXCIsXCJmYWlsZWRcIl0sdGhpcy5yZXBseShlKX0sdC5wcm90b3R5cGUucmVwbHk9ZnVuY3Rpb24odCl7dmFyIGkscz0odD10fHx7fSkuc3RhdHVzQ29kZXx8MTAwLHI9dC5taW5Db2RlfHwxMDAsbj10Lm1heENvZGV8fDY5OSxvPWUuVXRpbHMuZ2V0UmVhc29uUGhyYXNlKHMsdC5yZWFzb25QaHJhc2UpLGE9dC5leHRyYUhlYWRlcnN8fFtdLGM9dC5ib2R5LGg9dC5ldmVudHN8fFtdO2lmKHM8cnx8cz5uKXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIHN0YXR1c0NvZGU6IFwiK3MpO3JldHVybiBpPXRoaXMucmVxdWVzdC5yZXBseShzLG8sYSxjKSxoLmZvckVhY2goZnVuY3Rpb24oZSl7dGhpcy5lbWl0KGUsaSxvKX0sdGhpcyksdGhpc30sdC5wcm90b3R5cGUub25SZXF1ZXN0VGltZW91dD1mdW5jdGlvbigpe3RoaXMuZW1pdChcImZhaWxlZFwiLG51bGwsZS5DLmNhdXNlcy5SRVFVRVNUX1RJTUVPVVQpfSx0LnByb3RvdHlwZS5vblRyYW5zcG9ydEVycm9yPWZ1bmN0aW9uKCl7dGhpcy5lbWl0KFwiZmFpbGVkXCIsbnVsbCxlLkMuY2F1c2VzLkNPTk5FQ1RJT05fRVJST1IpfSxlLlNlcnZlckNvbnRleHQ9dH19LGZ1bmN0aW9uKGUsdCxpKXtcInVzZSBzdHJpY3RcIjtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQscyxyLG4sbyxhPWkoMjQpKGUpLGM9e1NUQVRVU19OVUxMOjAsU1RBVFVTX0lOVklURV9TRU5UOjEsU1RBVFVTXzFYWF9SRUNFSVZFRDoyLFNUQVRVU19JTlZJVEVfUkVDRUlWRUQ6MyxTVEFUVVNfV0FJVElOR19GT1JfQU5TV0VSOjQsU1RBVFVTX0FOU1dFUkVEOjUsU1RBVFVTX1dBSVRJTkdfRk9SX1BSQUNLOjYsU1RBVFVTX1dBSVRJTkdfRk9SX0FDSzo3LFNUQVRVU19DQU5DRUxFRDo4LFNUQVRVU19URVJNSU5BVEVEOjksU1RBVFVTX0FOU1dFUkVEX1dBSVRJTkdfRk9SX1BSQUNLOjEwLFNUQVRVU19FQVJMWV9NRURJQToxMSxTVEFUVVNfQ09ORklSTUVEOjEyfTsodD1mdW5jdGlvbih0KXtpZih0aGlzLnN0YXR1cz1jLlNUQVRVU19OVUxMLHRoaXMuZGlhbG9nPW51bGwsdGhpcy5wZW5kaW5nUmVpbnZpdGU9ITEsdGhpcy5lYXJseURpYWxvZ3M9e30sIXQpdGhyb3cgbmV3IGUuRXhjZXB0aW9ucy5TZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyTWlzc2luZyhcIkEgc2Vzc2lvbiBkZXNjcmlwdGlvbiBoYW5kbGVyIGlzIHJlcXVpcmVkIGZvciB0aGUgc2Vzc2lvbiB0byBmdW5jdGlvblwiKTt0aGlzLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJGYWN0b3J5PXQsdGhpcy5oYXNPZmZlcj0hMSx0aGlzLmhhc0Fuc3dlcj0hMSx0aGlzLnRpbWVycz17YWNrVGltZXI6bnVsbCxleHBpcmVzVGltZXI6bnVsbCxpbnZpdGUyeHhUaW1lcjpudWxsLHVzZXJOb0Fuc3dlclRpbWVyOm51bGwscmVsMXh4VGltZXI6bnVsbCxwcmFja1RpbWVyOm51bGx9LHRoaXMuc3RhcnRUaW1lPW51bGwsdGhpcy5lbmRUaW1lPW51bGwsdGhpcy50b25lcz1udWxsLHRoaXMubG9jYWxfaG9sZD0hMSx0aGlzLmRpc2FibGVSZW5lZ290aWF0aW9uPSExLHRoaXMuZWFybHlfc2RwPW51bGwsdGhpcy5yZWwxMDA9ZS5DLnN1cHBvcnRlZC5VTlNVUFBPUlRFRH0pLnByb3RvdHlwZT17ZHRtZjpmdW5jdGlvbih0LGkpe3ZhciBzPVtdLHI9dGhpcztpZihpPWl8fHt9LHZvaWQgMD09PXQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIk5vdCBlbm91Z2ggYXJndW1lbnRzXCIpO2lmKHRoaXMuc3RhdHVzIT09Yy5TVEFUVVNfQ09ORklSTUVEJiZ0aGlzLnN0YXR1cyE9PWMuU1RBVFVTX1dBSVRJTkdfRk9SX0FDSyl0aHJvdyBuZXcgZS5FeGNlcHRpb25zLkludmFsaWRTdGF0ZUVycm9yKHRoaXMuc3RhdHVzKTtpZihcInN0cmluZ1wiIT10eXBlb2YgdCYmXCJudW1iZXJcIiE9dHlwZW9mIHR8fCF0LnRvU3RyaW5nKCkubWF0Y2goL15bMC05QS1EIyosXSskL2kpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIHRvbmVzOiBcIit0KTtmb3IodD10LnRvU3RyaW5nKCkuc3BsaXQoXCJcIik7dC5sZW5ndGg+MDspcy5wdXNoKG5ldyBhKHRoaXMsdC5zaGlmdCgpLGkpKTtpZih0aGlzLnRvbmVzKXJldHVybiB0aGlzLnRvbmVzPXRoaXMudG9uZXMuY29uY2F0KHMpLHRoaXM7cmV0dXJuIHRoaXMudG9uZXM9cyxmdW5jdGlvbiB0KCl7dmFyIHMsbjtpZihyLnN0YXR1cz09PWMuU1RBVFVTX1RFUk1JTkFURUR8fCFyLnRvbmVzfHwwPT09ci50b25lcy5sZW5ndGgpcmV0dXJuIHIudG9uZXM9bnVsbCx0aGlzOyhzPXIudG9uZXMuc2hpZnQoKSkub24oXCJmYWlsZWRcIixmdW5jdGlvbigpe3IudG9uZXM9bnVsbH0pLHMuc2VuZChpKSxuPXMuZHVyYXRpb24rcy5pbnRlclRvbmVHYXAsZS5UaW1lcnMuc2V0VGltZW91dCh0LG4pfSgpLHRoaXN9LGJ5ZTpmdW5jdGlvbih0KXt2YXIgaT0odD1PYmplY3QuY3JlYXRlKHR8fE9iamVjdC5wcm90b3R5cGUpKS5zdGF0dXNDb2RlO2lmKHRoaXMuc3RhdHVzPT09Yy5TVEFUVVNfVEVSTUlOQVRFRClyZXR1cm4gdGhpcy5sb2dnZXIuZXJyb3IoXCJFcnJvcjogQXR0ZW1wdGVkIHRvIHNlbmQgQllFIGluIGEgdGVybWluYXRlZCBzZXNzaW9uLlwiKSx0aGlzO2lmKHRoaXMubG9nZ2VyLmxvZyhcInRlcm1pbmF0aW5nIFNlc3Npb25cIiksaSYmKGk8MjAwfHxpPj03MDApKXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIHN0YXR1c0NvZGU6IFwiK2kpO3JldHVybiB0LnJlY2VpdmVSZXNwb25zZT1mdW5jdGlvbigpe30sdGhpcy5zZW5kUmVxdWVzdChlLkMuQllFLHQpLnRlcm1pbmF0ZWQoKX0scmVmZXI6ZnVuY3Rpb24odCxpKXtpZihpPWl8fHt9LHRoaXMuc3RhdHVzIT09Yy5TVEFUVVNfQ09ORklSTUVEKXRocm93IG5ldyBlLkV4Y2VwdGlvbnMuSW52YWxpZFN0YXRlRXJyb3IodGhpcy5zdGF0dXMpO3RoaXMucmVmZXJDb250ZXh0PW5ldyBlLlJlZmVyQ2xpZW50Q29udGV4dCh0aGlzLnVhLHRoaXMsdCxpKSx0aGlzLmVtaXQoXCJyZWZlclJlcXVlc3RlZFwiLHRoaXMucmVmZXJDb250ZXh0KSx0aGlzLnJlZmVyQ29udGV4dC5yZWZlcigpfSxzZW5kUmVxdWVzdDpmdW5jdGlvbih0LGkpe2k9aXx8e307dmFyIHM9dGhpcyxyPW5ldyBlLk91dGdvaW5nUmVxdWVzdCh0LHRoaXMuZGlhbG9nLnJlbW90ZV90YXJnZXQsdGhpcy51YSx7Y3NlcTppLmNzZXF8fCh0aGlzLmRpYWxvZy5sb2NhbF9zZXFudW0rPTEpLGNhbGxfaWQ6dGhpcy5kaWFsb2cuaWQuY2FsbF9pZCxmcm9tX3VyaTp0aGlzLmRpYWxvZy5sb2NhbF91cmksZnJvbV90YWc6dGhpcy5kaWFsb2cuaWQubG9jYWxfdGFnLHRvX3VyaTp0aGlzLmRpYWxvZy5yZW1vdGVfdXJpLHRvX3RhZzp0aGlzLmRpYWxvZy5pZC5yZW1vdGVfdGFnLHJvdXRlX3NldDp0aGlzLmRpYWxvZy5yb3V0ZV9zZXQsc3RhdHVzQ29kZTppLnN0YXR1c0NvZGUscmVhc29uUGhyYXNlOmkucmVhc29uUGhyYXNlfSxpLmV4dHJhSGVhZGVyc3x8W10saS5ib2R5KTtyZXR1cm4gbmV3IGUuUmVxdWVzdFNlbmRlcih7cmVxdWVzdDpyLG9uUmVxdWVzdFRpbWVvdXQ6ZnVuY3Rpb24oKXtzLm9uUmVxdWVzdFRpbWVvdXQoKX0sb25UcmFuc3BvcnRFcnJvcjpmdW5jdGlvbigpe3Mub25UcmFuc3BvcnRFcnJvcigpfSxyZWNlaXZlUmVzcG9uc2U6aS5yZWNlaXZlUmVzcG9uc2V8fGZ1bmN0aW9uKGUpe3MucmVjZWl2ZU5vbkludml0ZVJlc3BvbnNlKGUpfX0sdGhpcy51YSkuc2VuZCgpLHRoaXMuZW1pdCh0LnRvTG93ZXJDYXNlKCksciksdGhpc30sY2xvc2U6ZnVuY3Rpb24oKXt2YXIgdDtpZih0aGlzLnN0YXR1cz09PWMuU1RBVFVTX1RFUk1JTkFURUQpcmV0dXJuIHRoaXM7dGhpcy5sb2dnZXIubG9nKFwiY2xvc2luZyBJTlZJVEUgc2Vzc2lvbiBcIit0aGlzLmlkKSx0aGlzLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXImJnRoaXMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlci5jbG9zZSgpO2Zvcih0IGluIHRoaXMudGltZXJzKWUuVGltZXJzLmNsZWFyVGltZW91dCh0aGlzLnRpbWVyc1t0XSk7dGhpcy5kaWFsb2cmJih0aGlzLmRpYWxvZy50ZXJtaW5hdGUoKSxkZWxldGUgdGhpcy5kaWFsb2cpO2Zvcih0IGluIHRoaXMuZWFybHlEaWFsb2dzKXRoaXMuZWFybHlEaWFsb2dzW3RdLnRlcm1pbmF0ZSgpLGRlbGV0ZSB0aGlzLmVhcmx5RGlhbG9nc1t0XTtyZXR1cm4gdGhpcy5zdGF0dXM9Yy5TVEFUVVNfVEVSTUlOQVRFRCxkZWxldGUgdGhpcy51YS5zZXNzaW9uc1t0aGlzLmlkXSx0aGlzfSxjcmVhdGVEaWFsb2c6ZnVuY3Rpb24odCxpLHMpe3ZhciByLG4sbz10W1wiVUFTXCI9PT1pP1widG9fdGFnXCI6XCJmcm9tX3RhZ1wiXSxhPXRbXCJVQVNcIj09PWk/XCJmcm9tX3RhZ1wiOlwidG9fdGFnXCJdLGM9dC5jYWxsX2lkK28rYTtpZihuPXRoaXMuZWFybHlEaWFsb2dzW2NdLHMpcmV0dXJuISFufHwoKG49bmV3IGUuRGlhbG9nKHRoaXMsdCxpLGUuRGlhbG9nLkMuU1RBVFVTX0VBUkxZKSkuZXJyb3I/KHRoaXMubG9nZ2VyLmVycm9yKG4uZXJyb3IpLHRoaXMuZmFpbGVkKHQsZS5DLmNhdXNlcy5JTlRFUk5BTF9FUlJPUiksITEpOih0aGlzLmVhcmx5RGlhbG9nc1tjXT1uLCEwKSk7aWYobil7bi51cGRhdGUodCxpKSx0aGlzLmRpYWxvZz1uLGRlbGV0ZSB0aGlzLmVhcmx5RGlhbG9nc1tjXTtmb3IodmFyIGggaW4gdGhpcy5lYXJseURpYWxvZ3MpdGhpcy5lYXJseURpYWxvZ3NbaF0udGVybWluYXRlKCksZGVsZXRlIHRoaXMuZWFybHlEaWFsb2dzW2hdO3JldHVybiEwfXJldHVybihyPW5ldyBlLkRpYWxvZyh0aGlzLHQsaSkpLmVycm9yPyh0aGlzLmxvZ2dlci5lcnJvcihyLmVycm9yKSx0aGlzLmZhaWxlZCh0LGUuQy5jYXVzZXMuSU5URVJOQUxfRVJST1IpLCExKToodGhpcy50b190YWc9dC50b190YWcsdGhpcy5kaWFsb2c9ciwhMCl9LGhvbGQ6ZnVuY3Rpb24odCxpKXtpZih0aGlzLnN0YXR1cyE9PWMuU1RBVFVTX1dBSVRJTkdfRk9SX0FDSyYmdGhpcy5zdGF0dXMhPT1jLlNUQVRVU19DT05GSVJNRUQpdGhyb3cgbmV3IGUuRXhjZXB0aW9ucy5JbnZhbGlkU3RhdGVFcnJvcih0aGlzLnN0YXR1cyk7dGhpcy5sb2NhbF9ob2xkP3RoaXMubG9nZ2VyLmxvZyhcIlNlc3Npb24gaXMgYWxyZWFkeSBvbiBob2xkLCBjYW5ub3QgcHV0IGl0IG9uIGhvbGQgYWdhaW5cIik6KCh0PXR8fHt9KS5tb2RpZmllcnM9aXx8W10sdC5tb2RpZmllcnMucHVzaCh0aGlzLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIuaG9sZE1vZGlmaWVyKSx0aGlzLmxvY2FsX2hvbGQ9ITAsdGhpcy5zZW5kUmVpbnZpdGUodCkpfSx1bmhvbGQ6ZnVuY3Rpb24odCxpKXtpZih0aGlzLnN0YXR1cyE9PWMuU1RBVFVTX1dBSVRJTkdfRk9SX0FDSyYmdGhpcy5zdGF0dXMhPT1jLlNUQVRVU19DT05GSVJNRUQpdGhyb3cgbmV3IGUuRXhjZXB0aW9ucy5JbnZhbGlkU3RhdGVFcnJvcih0aGlzLnN0YXR1cyk7dGhpcy5sb2NhbF9ob2xkPyh0PXR8fHt9LGkmJih0Lm1vZGlmaWVycz1pKSx0aGlzLmxvY2FsX2hvbGQ9ITEsdGhpcy5zZW5kUmVpbnZpdGUodCkpOnRoaXMubG9nZ2VyLmxvZyhcIlNlc3Npb24gaXMgbm90IG9uIGhvbGQsIGNhbm5vdCB1bmhvbGQgaXRcIil9LHJlaW52aXRlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9ZXx8e30sdCYmKGUubW9kaWZpZXJzPXQpLHRoaXMuc2VuZFJlaW52aXRlKGUpfSxyZWNlaXZlUmVpbnZpdGU6ZnVuY3Rpb24odCl7dmFyIGkscz10aGlzO2lmKHMuZW1pdChcInJlaW52aXRlXCIsdGhpcyksXCIwXCIhPT10LmdldEhlYWRlcihcIkNvbnRlbnQtTGVuZ3RoXCIpfHx0LmdldEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiKSl7aWYoIXRoaXMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlci5oYXNEZXNjcmlwdGlvbih0LmdldEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiKSkpcmV0dXJuIHQucmVwbHkoNDE1KSx2b2lkIHRoaXMuZW1pdChcInJlaW52aXRlRmFpbGVkXCIscyk7aT10aGlzLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIuc2V0RGVzY3JpcHRpb24odC5ib2R5LHRoaXMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnMsdGhpcy5tb2RpZmllcnMpLnRoZW4odGhpcy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLmdldERlc2NyaXB0aW9uLmJpbmQodGhpcy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLHRoaXMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnMsdGhpcy5tb2RpZmllcnMpKX1lbHNlIGk9dGhpcy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLmdldERlc2NyaXB0aW9uKHRoaXMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnMsdGhpcy5tb2RpZmllcnMpO3ZhciByPXRoaXMucmVjZWl2ZVJlcXVlc3Q7dGhpcy5yZWNlaXZlUmVxdWVzdD1mdW5jdGlvbih0KXt0Lm1ldGhvZD09PWUuQy5BQ0smJnRoaXMuc3RhdHVzPT09Yy5TVEFUVVNfV0FJVElOR19GT1JfQUNLJiZ0aGlzLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIuaGFzRGVzY3JpcHRpb24odC5nZXRIZWFkZXIoXCJDb250ZW50LVR5cGVcIikpPyh0aGlzLmhhc0Fuc3dlcj0hMCx0aGlzLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIuc2V0RGVzY3JpcHRpb24odC5ib2R5LHRoaXMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnMsdGhpcy5tb2RpZmllcnMpLnRoZW4oZnVuY3Rpb24oKXtlLlRpbWVycy5jbGVhclRpbWVvdXQodGhpcy50aW1lcnMuYWNrVGltZXIpLGUuVGltZXJzLmNsZWFyVGltZW91dCh0aGlzLnRpbWVycy5pbnZpdGUyeHhUaW1lciksdGhpcy5zdGF0dXM9Yy5TVEFUVVNfQ09ORklSTUVELHRoaXMuZW1pdChcImNvbmZpcm1lZFwiLHQpfS5iaW5kKHRoaXMpKSk6ci5jYWxsKHRoaXMsdCl9LmJpbmQodGhpcyksaS5jYXRjaChmdW5jdGlvbihpKXt2YXIgcjtpIGluc3RhbmNlb2YgZS5FeGNlcHRpb25zLkdldERlc2NyaXB0aW9uRXJyb3I/cj01MDA6aSBpbnN0YW5jZW9mIGUuRXhjZXB0aW9ucy5SZW5lZ290aWF0aW9uRXJyb3I/KHMuZW1pdChcInJlbmVnb3RpYXRpb25FcnJvclwiLGkpLHMubG9nZ2VyLndhcm4oaSkscj00ODgpOihzLmxvZ2dlci5lcnJvcihpKSxyPTQ4OCksdC5yZXBseShyKSxzLmVtaXQoXCJyZWludml0ZUZhaWxlZFwiLHMpfSkudGhlbihmdW5jdGlvbihlKXt2YXIgaT1bXCJDb250YWN0OiBcIitzLmNvbnRhY3RdO3QucmVwbHkoMjAwLG51bGwsaSxlLGZ1bmN0aW9uKCl7cy5zdGF0dXM9Yy5TVEFUVVNfV0FJVElOR19GT1JfQUNLLHMuc2V0QUNLVGltZXIoKSxzLmVtaXQoXCJyZWludml0ZUFjY2VwdGVkXCIscyl9KX0pfSxzZW5kUmVpbnZpdGU6ZnVuY3Rpb24odCl7aWYodGhpcy5wZW5kaW5nUmVpbnZpdGUpdGhpcy5sb2dnZXIud2FybihcIlJlaW52aXRlIGluIHByb2dyZXNzLiBQbGVhc2Ugd2FpdCB1bnRpbCBjb21wbGV0ZSwgdGhlbiB0cnkgYWdhaW4uXCIpO2Vsc2V7dGhpcy5wZW5kaW5nUmVpbnZpdGU9ITAsKHQ9dHx8e30pLm1vZGlmaWVycz10Lm1vZGlmaWVyc3x8W107dmFyIGk9dGhpcyxzPSh0LmV4dHJhSGVhZGVyc3x8W10pLnNsaWNlKCk7cy5wdXNoKFwiQ29udGFjdDogXCIrdGhpcy5jb250YWN0KSxzLnB1c2goXCJBbGxvdzogXCIrZS5VQS5DLkFMTE9XRURfTUVUSE9EUy50b1N0cmluZygpKSx0aGlzLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIuZ2V0RGVzY3JpcHRpb24odC5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9ucyx0Lm1vZGlmaWVycykudGhlbihmdW5jdGlvbih0KXtpLnNlbmRSZXF1ZXN0KGUuQy5JTlZJVEUse2V4dHJhSGVhZGVyczpzLGJvZHk6dCxyZWNlaXZlUmVzcG9uc2U6aS5yZWNlaXZlUmVpbnZpdGVSZXNwb25zZS5iaW5kKGkpfSl9KS5jYXRjaChmdW5jdGlvbih0KXtpZih0IGluc3RhbmNlb2YgZS5FeGNlcHRpb25zLlJlbmVnb3RpYXRpb25FcnJvcilyZXR1cm4gaS5wZW5kaW5nUmVpbnZpdGU9ITEsaS5lbWl0KFwicmVuZWdvdGlhdGlvbkVycm9yXCIsdCksaS5sb2dnZXIud2FybihcIlJlbmVnb3RpYXRpb24gRXJyb3JcIiksdm9pZCBpLmxvZ2dlci53YXJuKHQpO2kubG9nZ2VyLmVycm9yKFwic2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlciBlcnJvclwiKSxpLmxvZ2dlci5lcnJvcih0KX0pfX0scmVjZWl2ZVJlcXVlc3Q6ZnVuY3Rpb24odCl7c3dpdGNoKHQubWV0aG9kKXtjYXNlIGUuQy5CWUU6dC5yZXBseSgyMDApLHRoaXMuc3RhdHVzPT09Yy5TVEFUVVNfQ09ORklSTUVEJiYodGhpcy5lbWl0KFwiYnllXCIsdCksdGhpcy50ZXJtaW5hdGVkKHQsZS5DLmNhdXNlcy5CWUUpKTticmVhaztjYXNlIGUuQy5JTlZJVEU6dGhpcy5zdGF0dXM9PT1jLlNUQVRVU19DT05GSVJNRUQmJih0aGlzLmxvZ2dlci5sb2coXCJyZS1JTlZJVEUgcmVjZWl2ZWRcIiksdGhpcy5yZWNlaXZlUmVpbnZpdGUodCkpO2JyZWFrO2Nhc2UgZS5DLklORk86aWYodGhpcy5zdGF0dXM9PT1jLlNUQVRVU19DT05GSVJNRUR8fHRoaXMuc3RhdHVzPT09Yy5TVEFUVVNfV0FJVElOR19GT1JfQUNLKXtpZih0aGlzLm9uSW5mbylyZXR1cm4gdGhpcy5vbkluZm8odCk7dmFyIGkscyxyLG49dC5nZXRIZWFkZXIoXCJjb250ZW50LXR5cGVcIiksbz0vXihTaWduYWxcXHMqPz1cXHMqPykoWzAtOUEtRCMqXXsxfSkoXFxzKT8uKi8saD0vXihEdXJhdGlvblxccz89XFxzPykoWzAtOV17MSw0fSkoXFxzKT8uKi87biYmKG4ubWF0Y2goL15hcHBsaWNhdGlvblxcL2R0bWYtcmVsYXkvaSk/KHQuYm9keSYmMj09PShpPXQuYm9keS5zcGxpdChcIlxcclxcblwiLDIpKS5sZW5ndGgmJihvLnRlc3QoaVswXSkmJihzPWlbMF0ucmVwbGFjZShvLFwiJDJcIikpLGgudGVzdChpWzFdKSYmKHI9cGFyc2VJbnQoaVsxXS5yZXBsYWNlKGgsXCIkMlwiKSwxMCkpKSxuZXcgYSh0aGlzLHMse2R1cmF0aW9uOnJ9KS5pbml0X2luY29taW5nKHQpKTp0LnJlcGx5KDQxNSxudWxsLFtcIkFjY2VwdDogYXBwbGljYXRpb24vZHRtZi1yZWxheVwiXSkpfWJyZWFrO2Nhc2UgZS5DLlJFRkVSOmlmKHRoaXMuc3RhdHVzPT09Yy5TVEFUVVNfQ09ORklSTUVEKXt0aGlzLmxvZ2dlci5sb2coXCJSRUZFUiByZWNlaXZlZFwiKSx0aGlzLnJlZmVyQ29udGV4dD1uZXcgZS5SZWZlclNlcnZlckNvbnRleHQodGhpcy51YSx0KTtpZih0aGlzLmxpc3RlbmVycyhcInJlZmVyUmVxdWVzdGVkXCIpLmxlbmd0aCl0aGlzLmVtaXQoXCJyZWZlclJlcXVlc3RlZFwiLHRoaXMucmVmZXJDb250ZXh0KTtlbHNle3RoaXMubG9nZ2VyLmxvZyhcIk5vIHJlZmVyUmVxdWVzdGVkIGxpc3RlbmVycywgYXV0b21hdGljYWxseSBhY2NlcHRpbmcgYW5kIGZvbGxvd2luZyB0aGUgcmVmZXJcIik7dmFyIHU9e2ZvbGxvd1JlZmVyOiEwfTt0aGlzLnBhc3NlZE9wdGlvbnMmJih1Lmludml0ZU9wdGlvbnM9dGhpcy5wYXNzZWRPcHRpb25zKSx0aGlzLnJlZmVyQ29udGV4dC5hY2NlcHQodSx0aGlzLm1vZGlmaWVycyl9fWJyZWFrO2Nhc2UgZS5DLk5PVElGWTppZih0aGlzLnJlZmVyQ29udGV4dCYmdGhpcy5yZWZlckNvbnRleHQgaW5zdGFuY2VvZiBlLlJlZmVyQ2xpZW50Q29udGV4dCYmdC5oYXNIZWFkZXIoXCJldmVudFwiKSYmXCJyZWZlclwiPT09dC5nZXRIZWFkZXIoXCJldmVudFwiKSlyZXR1cm4gdm9pZCB0aGlzLnJlZmVyQ29udGV4dC5yZWNlaXZlTm90aWZ5KHQpO3QucmVwbHkoMjAwLFwiT0tcIiksdGhpcy5lbWl0KFwibm90aWZ5XCIsdCl9fSxyZWNlaXZlUmVpbnZpdGVSZXNwb25zZTpmdW5jdGlvbih0KXt2YXIgaT10aGlzO2lmKHRoaXMuc3RhdHVzIT09Yy5TVEFUVVNfVEVSTUlOQVRFRClzd2l0Y2goITApe2Nhc2UvXjFbMC05XXsyfSQvLnRlc3QodC5zdGF0dXNfY29kZSk6YnJlYWs7Y2FzZS9eMlswLTldezJ9JC8udGVzdCh0LnN0YXR1c19jb2RlKTppZih0aGlzLnN0YXR1cz1jLlNUQVRVU19DT05GSVJNRUQsdGhpcy5lbWl0KFwiYWNrXCIsdC50cmFuc2FjdGlvbi5zZW5kQUNLKCkpLHRoaXMucGVuZGluZ1JlaW52aXRlPSExLGUuVGltZXJzLmNsZWFyVGltZW91dChpLnRpbWVycy5pbnZpdGUyeHhUaW1lciksIXRoaXMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlci5oYXNEZXNjcmlwdGlvbih0LmdldEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiKSkpe3RoaXMubG9nZ2VyLmVycm9yKFwiMlhYIHJlc3BvbnNlIHJlY2VpdmVkIHRvIHJlLWludml0ZSBidXQgZGlkIG5vdCBoYXZlIGEgZGVzY3JpcHRpb25cIiksdGhpcy5lbWl0KFwicmVpbnZpdGVGYWlsZWRcIixpKSx0aGlzLmVtaXQoXCJyZW5lZ290aWF0aW9uRXJyb3JcIixuZXcgZS5FeGNlcHRpb25zLlJlbmVnb3RpYXRpb25FcnJvcihcIjJYWCByZXNwb25zZSByZWNlaXZlZCB0byByZS1pbnZpdGUgYnV0IGRpZCBub3QgaGF2ZSBhIGRlc2NyaXB0aW9uXCIpKTticmVha310aGlzLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIuc2V0RGVzY3JpcHRpb24odC5ib2R5LHRoaXMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnMsdGhpcy5tb2RpZmllcnMpLmNhdGNoKGZ1bmN0aW9uKHQpe2kubG9nZ2VyLmVycm9yKFwiQ291bGQgbm90IHNldCB0aGUgZGVzY3JpcHRpb24gaW4gMlhYIHJlc3BvbnNlXCIpLGkubG9nZ2VyLmVycm9yKHQpLGkuZW1pdChcInJlaW52aXRlRmFpbGVkXCIsaSksaS5lbWl0KFwicmVuZWdvdGlhdGlvbkVycm9yXCIsdCksaS5zZW5kUmVxdWVzdChlLkMuQllFLHtleHRyYUhlYWRlcnM6W2UuVXRpbHMuZ2V0UmVhc29uSGVhZGVyVmFsdWUoNDg4LFwiTm90IEFjY2VwdGFibGUgSGVyZVwiKV19KX0pLnRoZW4oZnVuY3Rpb24oKXtpLmVtaXQoXCJyZWludml0ZUFjY2VwdGVkXCIsaSl9KTticmVhaztkZWZhdWx0OnRoaXMuZGlzYWJsZVJlbmVnb3RpYXRpb249ITAsdGhpcy5wZW5kaW5nUmVpbnZpdGU9ITEsdGhpcy5sb2dnZXIubG9nKFwiUmVjZWl2ZWQgYSBub24gMVhYIG9yIDJYWCByZXNwb25zZSB0byBhIHJlLWludml0ZVwiKSx0aGlzLmVtaXQoXCJyZWludml0ZUZhaWxlZFwiLGkpLHRoaXMuZW1pdChcInJlbmVnb3RpYXRpb25FcnJvclwiLG5ldyBlLkV4Y2VwdGlvbnMuUmVuZWdvdGlhdGlvbkVycm9yKFwiSW52YWxpZCByZXNwb25zZSB0byBhIHJlLWludml0ZVwiKSl9fSxhY2NlcHRBbmRUZXJtaW5hdGU6ZnVuY3Rpb24odCxpLHMpe3ZhciByPVtdO3JldHVybiBpJiZyLnB1c2goXCJSZWFzb246IFwiK2UuVXRpbHMuZ2V0UmVhc29uSGVhZGVyVmFsdWUoaSxzKSksKHRoaXMuZGlhbG9nfHx0aGlzLmNyZWF0ZURpYWxvZyh0LFwiVUFDXCIpKSYmKHRoaXMuZW1pdChcImFja1wiLHQudHJhbnNhY3Rpb24uc2VuZEFDSygpKSx0aGlzLnNlbmRSZXF1ZXN0KGUuQy5CWUUse2V4dHJhSGVhZGVyczpyfSkpLHRoaXN9LHNldEludml0ZTJ4eFRpbWVyOmZ1bmN0aW9uKHQsaSl7dmFyIHM9dGhpcyxyPWUuVGltZXJzLlQxO3RoaXMudGltZXJzLmludml0ZTJ4eFRpbWVyPWUuVGltZXJzLnNldFRpbWVvdXQoZnVuY3Rpb24gbigpe2lmKHMuc3RhdHVzPT09Yy5TVEFUVVNfV0FJVElOR19GT1JfQUNLKXtzLmxvZ2dlci5sb2coXCJubyBBQ0sgcmVjZWl2ZWQsIGF0dGVtcHRpbmcgdG8gcmV0cmFuc21pdCBPS1wiKTt2YXIgbz1bXCJDb250YWN0OiBcIitzLmNvbnRhY3RdO3QucmVwbHkoMjAwLG51bGwsbyxpKSxyPU1hdGgubWluKDIqcixlLlRpbWVycy5UMikscy50aW1lcnMuaW52aXRlMnh4VGltZXI9ZS5UaW1lcnMuc2V0VGltZW91dChuLHIpfX0scil9LHNldEFDS1RpbWVyOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLnRpbWVycy5hY2tUaW1lcj1lLlRpbWVycy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC5zdGF0dXM9PT1jLlNUQVRVU19XQUlUSU5HX0ZPUl9BQ0smJih0LmxvZ2dlci5sb2coXCJubyBBQ0sgcmVjZWl2ZWQgZm9yIGFuIGV4dGVuZGVkIHBlcmlvZCBvZiB0aW1lLCB0ZXJtaW5hdGluZyB0aGUgY2FsbFwiKSxlLlRpbWVycy5jbGVhclRpbWVvdXQodC50aW1lcnMuaW52aXRlMnh4VGltZXIpLHQuc2VuZFJlcXVlc3QoZS5DLkJZRSksdC50ZXJtaW5hdGVkKG51bGwsZS5DLmNhdXNlcy5OT19BQ0spKX0sZS5UaW1lcnMuVElNRVJfSCl9LG9uVHJhbnNwb3J0RXJyb3I6ZnVuY3Rpb24oKXt0aGlzLnN0YXR1cyE9PWMuU1RBVFVTX0NPTkZJUk1FRCYmdGhpcy5zdGF0dXMhPT1jLlNUQVRVU19URVJNSU5BVEVEJiZ0aGlzLmZhaWxlZChudWxsLGUuQy5jYXVzZXMuQ09OTkVDVElPTl9FUlJPUil9LG9uUmVxdWVzdFRpbWVvdXQ6ZnVuY3Rpb24oKXt0aGlzLnN0YXR1cz09PWMuU1RBVFVTX0NPTkZJUk1FRD90aGlzLnRlcm1pbmF0ZWQobnVsbCxlLkMuY2F1c2VzLlJFUVVFU1RfVElNRU9VVCk6dGhpcy5zdGF0dXMhPT1jLlNUQVRVU19URVJNSU5BVEVEJiYodGhpcy5mYWlsZWQobnVsbCxlLkMuY2F1c2VzLlJFUVVFU1RfVElNRU9VVCksdGhpcy50ZXJtaW5hdGVkKG51bGwsZS5DLmNhdXNlcy5SRVFVRVNUX1RJTUVPVVQpKX0sb25EaWFsb2dFcnJvcjpmdW5jdGlvbih0KXt0aGlzLnN0YXR1cz09PWMuU1RBVFVTX0NPTkZJUk1FRD90aGlzLnRlcm1pbmF0ZWQodCxlLkMuY2F1c2VzLkRJQUxPR19FUlJPUik6dGhpcy5zdGF0dXMhPT1jLlNUQVRVU19URVJNSU5BVEVEJiYodGhpcy5mYWlsZWQodCxlLkMuY2F1c2VzLkRJQUxPR19FUlJPUiksdGhpcy50ZXJtaW5hdGVkKHQsZS5DLmNhdXNlcy5ESUFMT0dfRVJST1IpKX0sZmFpbGVkOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuc3RhdHVzPT09Yy5TVEFUVVNfVEVSTUlOQVRFRD90aGlzOih0aGlzLmVtaXQoXCJmYWlsZWRcIixlfHxudWxsLHR8fG51bGwpLHRoaXMpfSxyZWplY3RlZDpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmVtaXQoXCJyZWplY3RlZFwiLGV8fG51bGwsdHx8bnVsbCksdGhpc30sY2FuY2VsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbWl0KFwiY2FuY2VsXCIpLHRoaXN9LGFjY2VwdGVkOmZ1bmN0aW9uKHQsaSl7cmV0dXJuIGk9ZS5VdGlscy5nZXRSZWFzb25QaHJhc2UodCYmdC5zdGF0dXNfY29kZSxpKSx0aGlzLnN0YXJ0VGltZT1uZXcgRGF0ZSx0aGlzLnJlcGxhY2VlJiYodGhpcy5yZXBsYWNlZS5lbWl0KFwicmVwbGFjZWRcIix0aGlzKSx0aGlzLnJlcGxhY2VlLnRlcm1pbmF0ZSgpKSx0aGlzLmVtaXQoXCJhY2NlcHRlZFwiLHQsaSksdGhpc30sdGVybWluYXRlZDpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLnN0YXR1cz09PWMuU1RBVFVTX1RFUk1JTkFURUQ/dGhpczoodGhpcy5lbmRUaW1lPW5ldyBEYXRlLHRoaXMuY2xvc2UoKSx0aGlzLmVtaXQoXCJ0ZXJtaW5hdGVkXCIsZXx8bnVsbCx0fHxudWxsKSx0aGlzKX0sY29ubmVjdGluZzpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5lbWl0KFwiY29ubmVjdGluZ1wiLHtyZXF1ZXN0OmV9KSx0aGlzfX0sdC5DPWMsZS5TZXNzaW9uPXQsKHM9ZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBzKGUsdCl7aS5oYXNIZWFkZXIoZSkmJmkuZ2V0SGVhZGVyKGUpLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihcIjEwMHJlbFwiKT49MCYmKG4ucmVsMTAwPXQpfXZhciByLG49dGhpcyxvPWkuZ2V0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIpLGE9aS5wYXJzZUhlYWRlcihcIkNvbnRlbnQtRGlzcG9zaXRpb25cIik7aWYoZS5VdGlscy5hdWdtZW50KHRoaXMsZS5TZXJ2ZXJDb250ZXh0LFt0LGldKSxlLlV0aWxzLmF1Z21lbnQodGhpcyxlLlNlc3Npb24sW3QuY29uZmlndXJhdGlvbi5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyRmFjdG9yeV0pLGEmJlwicmVuZGVyXCI9PT1hLnR5cGUmJih0aGlzLnJlbmRlcmJvZHk9aS5ib2R5LHRoaXMucmVuZGVydHlwZT1vKSx0aGlzLnN0YXR1cz1jLlNUQVRVU19JTlZJVEVfUkVDRUlWRUQsdGhpcy5mcm9tX3RhZz1pLmZyb21fdGFnLHRoaXMuaWQ9aS5jYWxsX2lkK3RoaXMuZnJvbV90YWcsdGhpcy5yZXF1ZXN0PWksdGhpcy5jb250YWN0PXRoaXMudWEuY29udGFjdC50b1N0cmluZygpLHRoaXMucmVjZWl2ZU5vbkludml0ZVJlc3BvbnNlPWZ1bmN0aW9uKCl7fSx0aGlzLmxvZ2dlcj10LmdldExvZ2dlcihcInNpcC5pbnZpdGVzZXJ2ZXJjb250ZXh0XCIsdGhpcy5pZCksdGhpcy51YS5zZXNzaW9uc1t0aGlzLmlkXT10aGlzLGkuaGFzSGVhZGVyKFwiZXhwaXJlc1wiKSYmKHI9MWUzKmkuZ2V0SGVhZGVyKFwiZXhwaXJlc1wiKSkscyhcInJlcXVpcmVcIixlLkMuc3VwcG9ydGVkLlJFUVVJUkVEKSxzKFwic3VwcG9ydGVkXCIsZS5DLnN1cHBvcnRlZC5TVVBQT1JURUQpLGkudG9fdGFnPWUuVXRpbHMubmV3VGFnKCksdGhpcy5jcmVhdGVEaWFsb2coaSxcIlVBU1wiLCEwKSl7dmFyIGg9e2V4dHJhSGVhZGVyczpbXCJDb250YWN0OiBcIituLmNvbnRhY3RdfTtuLnJlbDEwMCE9PWUuQy5zdXBwb3J0ZWQuUkVRVUlSRUQmJm4ucHJvZ3Jlc3MoaCksbi5zdGF0dXM9Yy5TVEFUVVNfV0FJVElOR19GT1JfQU5TV0VSLG4udGltZXJzLnVzZXJOb0Fuc3dlclRpbWVyPWUuVGltZXJzLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtpLnJlcGx5KDQwOCksbi5mYWlsZWQoaSxlLkMuY2F1c2VzLk5PX0FOU1dFUiksbi50ZXJtaW5hdGVkKGksZS5DLmNhdXNlcy5OT19BTlNXRVIpfSxuLnVhLmNvbmZpZ3VyYXRpb24ubm9BbnN3ZXJUaW1lb3V0KSxyJiYobi50aW1lcnMuZXhwaXJlc1RpbWVyPWUuVGltZXJzLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtuLnN0YXR1cz09PWMuU1RBVFVTX1dBSVRJTkdfRk9SX0FOU1dFUiYmKGkucmVwbHkoNDg3KSxuLmZhaWxlZChpLGUuQy5jYXVzZXMuRVhQSVJFUyksbi50ZXJtaW5hdGVkKGksZS5DLmNhdXNlcy5FWFBJUkVTKSl9LHIpKX1lbHNlIGkucmVwbHkoNTAwLFwiTWlzc2luZyBDb250YWN0IGhlYWRlciBmaWVsZFwiKX0pLnByb3RvdHlwZT17cmVqZWN0OmZ1bmN0aW9uKHQpe2lmKHRoaXMuc3RhdHVzPT09Yy5TVEFUVVNfVEVSTUlOQVRFRCl0aHJvdyBuZXcgZS5FeGNlcHRpb25zLkludmFsaWRTdGF0ZUVycm9yKHRoaXMuc3RhdHVzKTtyZXR1cm4gdGhpcy5sb2dnZXIubG9nKFwicmVqZWN0aW5nIFJUQ1Nlc3Npb25cIiksZS5TZXJ2ZXJDb250ZXh0LnByb3RvdHlwZS5yZWplY3QuY2FsbCh0aGlzLHQpLHRoaXMudGVybWluYXRlZCgpfSx0ZXJtaW5hdGU6ZnVuY3Rpb24odCl7dmFyIGkscz0oKHQ9dHx8e30pLmV4dHJhSGVhZGVyc3x8W10pLnNsaWNlKCkscj10LmJvZHksbj10aGlzO3JldHVybiB0aGlzLnN0YXR1cz09PWMuU1RBVFVTX1dBSVRJTkdfRk9SX0FDSyYmdGhpcy5yZXF1ZXN0LnNlcnZlcl90cmFuc2FjdGlvbi5zdGF0ZSE9PWUuVHJhbnNhY3Rpb25zLkMuU1RBVFVTX1RFUk1JTkFURUQ/KGk9dGhpcy5kaWFsb2csdGhpcy5yZWNlaXZlUmVxdWVzdD1mdW5jdGlvbih0KXt0Lm1ldGhvZD09PWUuQy5BQ0smJih0aGlzLnNlbmRSZXF1ZXN0KGUuQy5CWUUse2V4dHJhSGVhZGVyczpzLGJvZHk6cn0pLGkudGVybWluYXRlKCkpfSx0aGlzLnJlcXVlc3Quc2VydmVyX3RyYW5zYWN0aW9uLm9uKFwic3RhdGVDaGFuZ2VkXCIsZnVuY3Rpb24oKXt0aGlzLnN0YXRlPT09ZS5UcmFuc2FjdGlvbnMuQy5TVEFUVVNfVEVSTUlOQVRFRCYmdGhpcy5kaWFsb2cmJih0aGlzLnJlcXVlc3Q9bmV3IGUuT3V0Z29pbmdSZXF1ZXN0KGUuQy5CWUUsdGhpcy5kaWFsb2cucmVtb3RlX3RhcmdldCx0aGlzLnVhLHtjc2VxOnRoaXMuZGlhbG9nLmxvY2FsX3NlcW51bSs9MSxjYWxsX2lkOnRoaXMuZGlhbG9nLmlkLmNhbGxfaWQsZnJvbV91cmk6dGhpcy5kaWFsb2cubG9jYWxfdXJpLGZyb21fdGFnOnRoaXMuZGlhbG9nLmlkLmxvY2FsX3RhZyx0b191cmk6dGhpcy5kaWFsb2cucmVtb3RlX3VyaSx0b190YWc6dGhpcy5kaWFsb2cuaWQucmVtb3RlX3RhZyxyb3V0ZV9zZXQ6dGhpcy5kaWFsb2cucm91dGVfc2V0fSxzLHIpLG5ldyBlLlJlcXVlc3RTZW5kZXIoe3JlcXVlc3Q6dGhpcy5yZXF1ZXN0LG9uUmVxdWVzdFRpbWVvdXQ6ZnVuY3Rpb24oKXtuLm9uUmVxdWVzdFRpbWVvdXQoKX0sb25UcmFuc3BvcnRFcnJvcjpmdW5jdGlvbigpe24ub25UcmFuc3BvcnRFcnJvcigpfSxyZWNlaXZlUmVzcG9uc2U6ZnVuY3Rpb24oKXt9fSx0aGlzLnVhKS5zZW5kKCksaS50ZXJtaW5hdGUoKSl9KSx0aGlzLmVtaXQoXCJieWVcIix0aGlzLnJlcXVlc3QpLHRoaXMudGVybWluYXRlZCgpLHRoaXMuZGlhbG9nPWksdGhpcy51YS5kaWFsb2dzW2kuaWQudG9TdHJpbmcoKV09aSk6dGhpcy5zdGF0dXM9PT1jLlNUQVRVU19DT05GSVJNRUQ/dGhpcy5ieWUodCk6dGhpcy5yZWplY3QodCksdGhpc30scHJvZ3Jlc3M6ZnVuY3Rpb24odCl7ZnVuY3Rpb24gaSgpe3I9dC5zdGF0dXNDb2RlfHwxODMsdGhpcy5zdGF0dXM9Yy5TVEFUVVNfV0FJVElOR19GT1JfUFJBQ0ssby5wdXNoKFwiQ29udGFjdDogXCIrdGhpcy5jb250YWN0KSxvLnB1c2goXCJSZXF1aXJlOiAxMDByZWxcIiksby5wdXNoKFwiUlNlcTogXCIrTWF0aC5mbG9vcigxZTQqTWF0aC5yYW5kb20oKSkpLHRoaXMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlci5nZXREZXNjcmlwdGlvbih0LnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zLHQubW9kaWZpZXJzKS50aGVuKGZ1bmN0aW9uKHQpe2lmKCF0aGlzLmlzQ2FuY2VsZWQmJnRoaXMuc3RhdHVzIT09Yy5TVEFUVVNfVEVSTUlOQVRFRCl7dGhpcy5lYXJseV9zZHA9dC5ib2R5LHRoaXNbdGhpcy5oYXNPZmZlcj9cImhhc0Fuc3dlclwiOlwiaGFzT2ZmZXJcIl09ITA7dmFyIGk9ZS5UaW1lcnMuVDE7dGhpcy50aW1lcnMucmVsMXh4VGltZXI9ZS5UaW1lcnMuc2V0VGltZW91dChmdW5jdGlvbiBzKCl7dGhpcy5yZXF1ZXN0LnJlcGx5KHIsbnVsbCxvLHQpLGkqPTIsdGhpcy50aW1lcnMucmVsMXh4VGltZXI9ZS5UaW1lcnMuc2V0VGltZW91dChzLmJpbmQodGhpcyksaSl9LmJpbmQodGhpcyksaSksdGhpcy50aW1lcnMucHJhY2tUaW1lcj1lLlRpbWVycy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dGhpcy5zdGF0dXM9PT1jLlNUQVRVU19XQUlUSU5HX0ZPUl9QUkFDSyYmKHRoaXMubG9nZ2VyLmxvZyhcIm5vIFBSQUNLIHJlY2VpdmVkLCByZWplY3RpbmcgdGhlIGNhbGxcIiksZS5UaW1lcnMuY2xlYXJUaW1lb3V0KHRoaXMudGltZXJzLnJlbDF4eFRpbWVyKSx0aGlzLnJlcXVlc3QucmVwbHkoNTA0KSx0aGlzLnRlcm1pbmF0ZWQobnVsbCxlLkMuY2F1c2VzLk5PX1BSQUNLKSl9LmJpbmQodGhpcyksNjQqZS5UaW1lcnMuVDEpLHM9dGhpcy5yZXF1ZXN0LnJlcGx5KHIsbixvLHQpLHRoaXMuZW1pdChcInByb2dyZXNzXCIscyxuKX19LmJpbmQodGhpcyksZnVuY3Rpb24oKXt0aGlzLnJlcXVlc3QucmVwbHkoNDgwKSx0aGlzLmZhaWxlZChudWxsLGUuQy5jYXVzZXMuV0VCUlRDX0VSUk9SKSx0aGlzLnRlcm1pbmF0ZWQobnVsbCxlLkMuY2F1c2VzLldFQlJUQ19FUlJPUil9LmJpbmQodGhpcykpfXZhciBzLHI9KHQ9dHx8e30pLnN0YXR1c0NvZGV8fDE4MCxuPXQucmVhc29uUGhyYXNlLG89KHQuZXh0cmFIZWFkZXJzfHxbXSkuc2xpY2UoKSxhPXQuYm9keTtpZihyPDEwMHx8cj4xOTkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgc3RhdHVzQ29kZTogXCIrcik7cmV0dXJuIHRoaXMuaXNDYW5jZWxlZHx8dGhpcy5zdGF0dXM9PT1jLlNUQVRVU19URVJNSU5BVEVEP3RoaXM6KDEwMCE9PXQuc3RhdHVzQ29kZSYmKHRoaXMucmVsMTAwPT09ZS5DLnN1cHBvcnRlZC5SRVFVSVJFRHx8dGhpcy5yZWwxMDA9PT1lLkMuc3VwcG9ydGVkLlNVUFBPUlRFRCYmdC5yZWwxMDB8fHRoaXMucmVsMTAwPT09ZS5DLnN1cHBvcnRlZC5TVVBQT1JURUQmJnRoaXMudWEuY29uZmlndXJhdGlvbi5yZWwxMDA9PT1lLkMuc3VwcG9ydGVkLlJFUVVJUkVEKT8odGhpcy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyPXRoaXMuc2V0dXBTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyKCksdGhpcy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLmhhc0Rlc2NyaXB0aW9uKHRoaXMucmVxdWVzdC5nZXRIZWFkZXIoXCJDb250ZW50LVR5cGVcIikpPyh0aGlzLmhhc09mZmVyPSEwLHRoaXMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlci5zZXREZXNjcmlwdGlvbih0aGlzLnJlcXVlc3QuYm9keSx0LnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zLHQubW9kaWZpZXJzKS50aGVuKGkuYXBwbHkodGhpcykpLmNhdGNoKGZ1bmN0aW9uKHQpe3RoaXMubG9nZ2VyLndhcm4oXCJpbnZhbGlkIGRlc2NyaXB0aW9uXCIpLHRoaXMubG9nZ2VyLndhcm4odCksdGhpcy5mYWlsZWQobnVsbCxlLkMuY2F1c2VzLldFQlJUQ19FUlJPUiksdGhpcy50ZXJtaW5hdGVkKG51bGwsZS5DLmNhdXNlcy5XRUJSVENfRVJST1IpfS5iaW5kKHRoaXMpKSk6aS5hcHBseSh0aGlzKSk6ZnVuY3Rpb24oKXtzPXRoaXMucmVxdWVzdC5yZXBseShyLG4sbyxhKSx0aGlzLmVtaXQoXCJwcm9ncmVzc1wiLHMsbil9LmFwcGx5KHRoaXMpLHRoaXMpfSxhY2NlcHQ6ZnVuY3Rpb24odCl7dD10fHx7fSx0aGlzLm9uSW5mbz10Lm9uSW5mbzt2YXIgaT10aGlzLHM9dGhpcy5yZXF1ZXN0LHI9KHQuZXh0cmFIZWFkZXJzfHxbXSkuc2xpY2UoKSxuPWZ1bmN0aW9uKHQpe3ZhciBuO3IucHVzaChcIkNvbnRhY3Q6IFwiK2kuY29udGFjdCksci5wdXNoKFwiQWxsb3c6IFwiK2UuVUEuQy5BTExPV0VEX01FVEhPRFMudG9TdHJpbmcoKSksaS5oYXNPZmZlcj9pLmhhc0Fuc3dlcj0hMDppLmhhc09mZmVyPSEwLG49cy5yZXBseSgyMDAsbnVsbCxyLHQsZnVuY3Rpb24oKXtpLnN0YXR1cz1jLlNUQVRVU19XQUlUSU5HX0ZPUl9BQ0ssaS5zZXRJbnZpdGUyeHhUaW1lcihzLHQpLGkuc2V0QUNLVGltZXIoKX0sZnVuY3Rpb24oKXtpLmZhaWxlZChudWxsLGUuQy5jYXVzZXMuQ09OTkVDVElPTl9FUlJPUiksaS50ZXJtaW5hdGVkKG51bGwsZS5DLmNhdXNlcy5DT05ORUNUSU9OX0VSUk9SKX0pLGkuc3RhdHVzIT09Yy5TVEFUVVNfVEVSTUlOQVRFRCYmaS5hY2NlcHRlZChuLGUuVXRpbHMuZ2V0UmVhc29uUGhyYXNlKDIwMCkpfSxvPWZ1bmN0aW9uKCl7aS5zdGF0dXMhPT1jLlNUQVRVU19URVJNSU5BVEVEJiYoaS5yZXF1ZXN0LnJlcGx5KDQ4MCksaS5mYWlsZWQobnVsbCxlLkMuY2F1c2VzLldFQlJUQ19FUlJPUiksaS50ZXJtaW5hdGVkKG51bGwsZS5DLmNhdXNlcy5XRUJSVENfRVJST1IpKX07aWYodGhpcy5zdGF0dXM9PT1jLlNUQVRVU19XQUlUSU5HX0ZPUl9QUkFDSylyZXR1cm4gdGhpcy5zdGF0dXM9Yy5TVEFUVVNfQU5TV0VSRURfV0FJVElOR19GT1JfUFJBQ0ssdGhpcztpZih0aGlzLnN0YXR1cz09PWMuU1RBVFVTX1dBSVRJTkdfRk9SX0FOU1dFUil0aGlzLnN0YXR1cz1jLlNUQVRVU19BTlNXRVJFRDtlbHNlIGlmKHRoaXMuc3RhdHVzIT09Yy5TVEFUVVNfRUFSTFlfTUVESUEpdGhyb3cgbmV3IGUuRXhjZXB0aW9ucy5JbnZhbGlkU3RhdGVFcnJvcih0aGlzLnN0YXR1cyk7aWYoIXRoaXMuY3JlYXRlRGlhbG9nKHMsXCJVQVNcIikpcmV0dXJuIHMucmVwbHkoNTAwLFwiTWlzc2luZyBDb250YWN0IGhlYWRlciBmaWVsZFwiKSx0aGlzO2lmKGUuVGltZXJzLmNsZWFyVGltZW91dCh0aGlzLnRpbWVycy51c2VyTm9BbnN3ZXJUaW1lciksdGhpcy5zdGF0dXM9PT1jLlNUQVRVU19FQVJMWV9NRURJQSluKHt9KTtlbHNlIGlmKHRoaXMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlcj10aGlzLnNldHVwU2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlcigpLFwiMFwiIT09dGhpcy5yZXF1ZXN0LmdldEhlYWRlcihcIkNvbnRlbnQtTGVuZ3RoXCIpfHx0aGlzLnJlcXVlc3QuZ2V0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIpKXtpZighdGhpcy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLmhhc0Rlc2NyaXB0aW9uKHRoaXMucmVxdWVzdC5nZXRIZWFkZXIoXCJDb250ZW50LVR5cGVcIikpKXJldHVybiB2b2lkIHRoaXMucmVxdWVzdC5yZXBseSg0MTUpO3RoaXMuaGFzT2ZmZXI9ITAsdGhpcy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLnNldERlc2NyaXB0aW9uKHRoaXMucmVxdWVzdC5ib2R5LHQuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnMsdC5tb2RpZmllcnMpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLmdldERlc2NyaXB0aW9uKHQuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnMsdC5tb2RpZmllcnMpfS5iaW5kKHRoaXMpKS5jYXRjaChvKS50aGVuKG4pfWVsc2UgdGhpcy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLmdldERlc2NyaXB0aW9uKHQuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnMsdC5tb2RpZmllcnMpLmNhdGNoKG8pLnRoZW4obik7cmV0dXJuIHRoaXN9LHJlY2VpdmVSZXF1ZXN0OmZ1bmN0aW9uKGkpe2Z1bmN0aW9uIHMoKXt2YXIgdCxzO2UuVGltZXJzLmNsZWFyVGltZW91dCh0aGlzLnRpbWVycy5hY2tUaW1lciksZS5UaW1lcnMuY2xlYXJUaW1lb3V0KHRoaXMudGltZXJzLmludml0ZTJ4eFRpbWVyKSx0aGlzLnN0YXR1cz1jLlNUQVRVU19DT05GSVJNRUQsdD1pLmdldEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiKSwocz1pLmdldEhlYWRlcihcIkNvbnRlbnQtRGlzcG9zaXRpb25cIikpJiZcInJlbmRlclwiPT09cy50eXBlJiYodGhpcy5yZW5kZXJib2R5PWkuYm9keSx0aGlzLnJlbmRlcnR5cGU9dCksdGhpcy5lbWl0KFwiY29uZmlybWVkXCIsaSl9c3dpdGNoKGkubWV0aG9kKXtjYXNlIGUuQy5DQU5DRUw6dGhpcy5zdGF0dXMhPT1jLlNUQVRVU19XQUlUSU5HX0ZPUl9BTlNXRVImJnRoaXMuc3RhdHVzIT09Yy5TVEFUVVNfV0FJVElOR19GT1JfUFJBQ0smJnRoaXMuc3RhdHVzIT09Yy5TVEFUVVNfQU5TV0VSRURfV0FJVElOR19GT1JfUFJBQ0smJnRoaXMuc3RhdHVzIT09Yy5TVEFUVVNfRUFSTFlfTUVESUEmJnRoaXMuc3RhdHVzIT09Yy5TVEFUVVNfQU5TV0VSRUR8fCh0aGlzLnN0YXR1cz1jLlNUQVRVU19DQU5DRUxFRCx0aGlzLnJlcXVlc3QucmVwbHkoNDg3KSx0aGlzLmNhbmNlbGVkKGkpLHRoaXMucmVqZWN0ZWQoaSxlLkMuY2F1c2VzLkNBTkNFTEVEKSx0aGlzLmZhaWxlZChpLGUuQy5jYXVzZXMuQ0FOQ0VMRUQpLHRoaXMudGVybWluYXRlZChpLGUuQy5jYXVzZXMuQ0FOQ0VMRUQpKTticmVhaztjYXNlIGUuQy5BQ0s6dGhpcy5zdGF0dXM9PT1jLlNUQVRVU19XQUlUSU5HX0ZPUl9BQ0smJih0aGlzLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIuaGFzRGVzY3JpcHRpb24oaS5nZXRIZWFkZXIoXCJDb250ZW50LVR5cGVcIikpPyh0aGlzLmhhc0Fuc3dlcj0hMCx0aGlzLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIuc2V0RGVzY3JpcHRpb24oaS5ib2R5LHRoaXMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnMsdGhpcy5tb2RpZmllcnMpLnRoZW4ocy5iaW5kKHRoaXMpLGZ1bmN0aW9uKHQpe3RoaXMubG9nZ2VyLndhcm4odCksdGhpcy50ZXJtaW5hdGUoe3N0YXR1c0NvZGU6XCI0ODhcIixyZWFzb25QaHJhc2U6XCJCYWQgTWVkaWEgRGVzY3JpcHRpb25cIn0pLHRoaXMuZmFpbGVkKGksZS5DLmNhdXNlcy5CQURfTUVESUFfREVTQ1JJUFRJT04pLHRoaXMudGVybWluYXRlZChpLGUuQy5jYXVzZXMuQkFEX01FRElBX0RFU0NSSVBUSU9OKX0uYmluZCh0aGlzKSkpOnMuYXBwbHkodGhpcykpO2JyZWFrO2Nhc2UgZS5DLlBSQUNLOnRoaXMuc3RhdHVzPT09Yy5TVEFUVVNfV0FJVElOR19GT1JfUFJBQ0t8fHRoaXMuc3RhdHVzPT09Yy5TVEFUVVNfQU5TV0VSRURfV0FJVElOR19GT1JfUFJBQ0s/dGhpcy5oYXNBbnN3ZXI/KGUuVGltZXJzLmNsZWFyVGltZW91dCh0aGlzLnRpbWVycy5yZWwxeHhUaW1lciksZS5UaW1lcnMuY2xlYXJUaW1lb3V0KHRoaXMudGltZXJzLnByYWNrVGltZXIpLGkucmVwbHkoMjAwKSx0aGlzLnN0YXR1cz09PWMuU1RBVFVTX0FOU1dFUkVEX1dBSVRJTkdfRk9SX1BSQUNLJiYodGhpcy5zdGF0dXM9Yy5TVEFUVVNfRUFSTFlfTUVESUEsdGhpcy5hY2NlcHQoKSksdGhpcy5zdGF0dXM9Yy5TVEFUVVNfRUFSTFlfTUVESUEpOih0aGlzLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXI9dGhpcy5zZXR1cFNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIoKSx0aGlzLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIuaGFzRGVzY3JpcHRpb24oaS5nZXRIZWFkZXIoXCJDb250ZW50LVR5cGVcIikpPyh0aGlzLmhhc0Fuc3dlcj0hMCx0aGlzLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIuc2V0RGVzY3JpcHRpb24oaS5ib2R5LHRoaXMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnMsdGhpcy5tb2RpZmllcnMpLnRoZW4oZnVuY3Rpb24oKXtlLlRpbWVycy5jbGVhclRpbWVvdXQodGhpcy50aW1lcnMucmVsMXh4VGltZXIpLGUuVGltZXJzLmNsZWFyVGltZW91dCh0aGlzLnRpbWVycy5wcmFja1RpbWVyKSxpLnJlcGx5KDIwMCksdGhpcy5zdGF0dXM9PT1jLlNUQVRVU19BTlNXRVJFRF9XQUlUSU5HX0ZPUl9QUkFDSyYmKHRoaXMuc3RhdHVzPWMuU1RBVFVTX0VBUkxZX01FRElBLHRoaXMuYWNjZXB0KCkpLHRoaXMuc3RhdHVzPWMuU1RBVFVTX0VBUkxZX01FRElBfS5iaW5kKHRoaXMpLGZ1bmN0aW9uKHQpe3RoaXMubG9nZ2VyLndhcm4odCksdGhpcy50ZXJtaW5hdGUoe3N0YXR1c0NvZGU6XCI0ODhcIixyZWFzb25QaHJhc2U6XCJCYWQgTWVkaWEgRGVzY3JpcHRpb25cIn0pLHRoaXMuZmFpbGVkKGksZS5DLmNhdXNlcy5CQURfTUVESUFfREVTQ1JJUFRJT04pLHRoaXMudGVybWluYXRlZChpLGUuQy5jYXVzZXMuQkFEX01FRElBX0RFU0NSSVBUSU9OKX0uYmluZCh0aGlzKSkpOih0aGlzLnRlcm1pbmF0ZSh7c3RhdHVzQ29kZTpcIjQ4OFwiLHJlYXNvblBocmFzZTpcIkJhZCBNZWRpYSBEZXNjcmlwdGlvblwifSksdGhpcy5mYWlsZWQoaSxlLkMuY2F1c2VzLkJBRF9NRURJQV9ERVNDUklQVElPTiksdGhpcy50ZXJtaW5hdGVkKGksZS5DLmNhdXNlcy5CQURfTUVESUFfREVTQ1JJUFRJT04pKSk6dGhpcy5zdGF0dXM9PT1jLlNUQVRVU19FQVJMWV9NRURJQSYmaS5yZXBseSgyMDApO2JyZWFrO2RlZmF1bHQ6dC5wcm90b3R5cGUucmVjZWl2ZVJlcXVlc3QuYXBwbHkodGhpcyxbaV0pfX0sc2V0dXBTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlcj90aGlzLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXI6dGhpcy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyRmFjdG9yeSh0aGlzLHRoaXMudWEuY29uZmlndXJhdGlvbi5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyRmFjdG9yeU9wdGlvbnMpfSxvblRyYW5zcG9ydEVycm9yOmZ1bmN0aW9uKCl7dGhpcy5zdGF0dXMhPT1jLlNUQVRVU19DT05GSVJNRUQmJnRoaXMuc3RhdHVzIT09Yy5TVEFUVVNfVEVSTUlOQVRFRCYmdGhpcy5mYWlsZWQobnVsbCxlLkMuY2F1c2VzLkNPTk5FQ1RJT05fRVJST1IpfSxvblJlcXVlc3RUaW1lb3V0OmZ1bmN0aW9uKCl7dGhpcy5zdGF0dXM9PT1jLlNUQVRVU19DT05GSVJNRUQ/dGhpcy50ZXJtaW5hdGVkKG51bGwsZS5DLmNhdXNlcy5SRVFVRVNUX1RJTUVPVVQpOnRoaXMuc3RhdHVzIT09Yy5TVEFUVVNfVEVSTUlOQVRFRCYmKHRoaXMuZmFpbGVkKG51bGwsZS5DLmNhdXNlcy5SRVFVRVNUX1RJTUVPVVQpLHRoaXMudGVybWluYXRlZChudWxsLGUuQy5jYXVzZXMuUkVRVUVTVF9USU1FT1VUKSl9fSxlLkludml0ZVNlcnZlckNvbnRleHQ9cywocj1mdW5jdGlvbih0LGkscyxyKXtzPXN8fHt9LHRoaXMucGFzc2VkT3B0aW9ucz1zLHMucGFyYW1zPU9iamVjdC5jcmVhdGUocy5wYXJhbXN8fE9iamVjdC5wcm90b3R5cGUpO3ZhciBuPShzLmV4dHJhSGVhZGVyc3x8W10pLnNsaWNlKCksbz10LmNvbmZpZ3VyYXRpb24uc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlckZhY3Rvcnk7aWYodGhpcy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyRmFjdG9yeU9wdGlvbnM9dC5jb25maWd1cmF0aW9uLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJGYWN0b3J5T3B0aW9uc3x8e30sdGhpcy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9ucz1zLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zfHx7fSx0aGlzLm1vZGlmaWVycz1yLHRoaXMuaW52aXRlV2l0aG91dFNkcD1zLmludml0ZVdpdGhvdXRTZHB8fCExLHRoaXMuYW5vbnltb3VzPXMuYW5vbnltb3VzfHwhMSx0aGlzLnJlbmRlcmJvZHk9cy5yZW5kZXJib2R5fHxudWxsLHRoaXMucmVuZGVydHlwZT1zLnJlbmRlcnR5cGV8fFwidGV4dC9wbGFpblwiLHRoaXMuZnJvbV90YWc9ZS5VdGlscy5uZXdUYWcoKSxzLnBhcmFtcy5mcm9tX3RhZz10aGlzLmZyb21fdGFnLHRoaXMuY29udGFjdD10LmNvbnRhY3QudG9TdHJpbmcoe2Fub255bW91czp0aGlzLmFub255bW91cyxvdXRib3VuZDp0aGlzLmFub255bW91cz8hdC5jb250YWN0LnRlbXBfZ3J1dTohdC5jb250YWN0LnB1Yl9ncnV1fSksdGhpcy5hbm9ueW1vdXMmJihzLnBhcmFtcy5mcm9tX2Rpc3BsYXlOYW1lPVwiQW5vbnltb3VzXCIscy5wYXJhbXMuZnJvbV91cmk9XCJzaXA6YW5vbnltb3VzQGFub255bW91cy5pbnZhbGlkXCIsbi5wdXNoKFwiUC1QcmVmZXJyZWQtSWRlbnRpdHk6IFwiK3QuY29uZmlndXJhdGlvbi51cmkudG9TdHJpbmcoKSksbi5wdXNoKFwiUHJpdmFjeTogaWRcIikpLG4ucHVzaChcIkNvbnRhY3Q6IFwiK3RoaXMuY29udGFjdCksbi5wdXNoKFwiQWxsb3c6IFwiK2UuVUEuQy5BTExPV0VEX01FVEhPRFMudG9TdHJpbmcoKSksdGhpcy5pbnZpdGVXaXRob3V0U2RwJiZ0aGlzLnJlbmRlcmJvZHkmJihuLnB1c2goXCJDb250ZW50LVR5cGU6IFwiK3RoaXMucmVuZGVydHlwZSksbi5wdXNoKFwiQ29udGVudC1EaXNwb3NpdGlvbjogcmVuZGVyO2hhbmRsaW5nPW9wdGlvbmFsXCIpKSx0LmNvbmZpZ3VyYXRpb24ucmVsMTAwPT09ZS5DLnN1cHBvcnRlZC5SRVFVSVJFRCYmbi5wdXNoKFwiUmVxdWlyZTogMTAwcmVsXCIpLHQuY29uZmlndXJhdGlvbi5yZXBsYWNlcz09PWUuQy5zdXBwb3J0ZWQuUkVRVUlSRUQmJm4ucHVzaChcIlJlcXVpcmU6IHJlcGxhY2VzXCIpLHMuZXh0cmFIZWFkZXJzPW4sZS5VdGlscy5hdWdtZW50KHRoaXMsZS5DbGllbnRDb250ZXh0LFt0LGUuQy5JTlZJVEUsaSxzXSksZS5VdGlscy5hdWdtZW50KHRoaXMsZS5TZXNzaW9uLFtvXSksdGhpcy5zdGF0dXMhPT1jLlNUQVRVU19OVUxMKXRocm93IG5ldyBlLkV4Y2VwdGlvbnMuSW52YWxpZFN0YXRlRXJyb3IodGhpcy5zdGF0dXMpO3RoaXMuaXNDYW5jZWxlZD0hMSx0aGlzLnJlY2VpdmVkXzEwMD0hMSx0aGlzLm1ldGhvZD1lLkMuSU5WSVRFLHRoaXMucmVjZWl2ZU5vbkludml0ZVJlc3BvbnNlPXRoaXMucmVjZWl2ZVJlc3BvbnNlLHRoaXMucmVjZWl2ZVJlc3BvbnNlPXRoaXMucmVjZWl2ZUludml0ZVJlc3BvbnNlLHRoaXMubG9nZ2VyPXQuZ2V0TG9nZ2VyKFwic2lwLmludml0ZWNsaWVudGNvbnRleHRcIiksdC5hcHBsaWNhbnRzW3RoaXNdPXRoaXMsdGhpcy5pZD10aGlzLnJlcXVlc3QuY2FsbF9pZCt0aGlzLmZyb21fdGFnLHRoaXMub25JbmZvPXMub25JbmZvfSkucHJvdG90eXBlPXtpbnZpdGU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3JldHVybiB0aGlzLnVhLnNlc3Npb25zW3RoaXMuaWRdPXRoaXMsdGhpcy5pbnZpdGVXaXRob3V0U2RwPyh0aGlzLnJlcXVlc3QuYm9keT10LnJlbmRlcmJvZHksdGhpcy5zdGF0dXM9Yy5TVEFUVVNfSU5WSVRFX1NFTlQsdGhpcy5zZW5kKCkpOih0aGlzLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXI9dGhpcy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyRmFjdG9yeSh0aGlzLHRoaXMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlckZhY3RvcnlPcHRpb25zKSx0aGlzLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIuZ2V0RGVzY3JpcHRpb24odGhpcy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9ucyx0aGlzLm1vZGlmaWVycykudGhlbihmdW5jdGlvbihlKXt0LmlzQ2FuY2VsZWR8fHQuc3RhdHVzPT09Yy5TVEFUVVNfVEVSTUlOQVRFRHx8KHQuaGFzT2ZmZXI9ITAsdC5yZXF1ZXN0LmJvZHk9ZSx0LnN0YXR1cz1jLlNUQVRVU19JTlZJVEVfU0VOVCx0LnNlbmQoKSl9LGZ1bmN0aW9uKCl7dC5zdGF0dXMhPT1jLlNUQVRVU19URVJNSU5BVEVEJiYodC5mYWlsZWQobnVsbCxlLkMuY2F1c2VzLldFQlJUQ19FUlJPUiksdC50ZXJtaW5hdGVkKG51bGwsZS5DLmNhdXNlcy5XRUJSVENfRVJST1IpKX0pKSx0aGlzfSxyZWNlaXZlSW52aXRlUmVzcG9uc2U6ZnVuY3Rpb24odCl7dmFyIGkscz10aGlzLHI9dC5jYWxsX2lkK3QuZnJvbV90YWcrdC50b190YWcsbj1bXSxvPXt9O2lmKHRoaXMuc3RhdHVzIT09Yy5TVEFUVVNfVEVSTUlOQVRFRCYmdC5tZXRob2Q9PT1lLkMuSU5WSVRFKXtpZih0aGlzLmRpYWxvZyYmdC5zdGF0dXNfY29kZT49MjAwJiZ0LnN0YXR1c19jb2RlPD0yOTkpe2lmKHIhPT10aGlzLmRpYWxvZy5pZC50b1N0cmluZygpKXtpZighdGhpcy5jcmVhdGVEaWFsb2codCxcIlVBQ1wiLCEwKSlyZXR1cm47cmV0dXJuIHRoaXMuZW1pdChcImFja1wiLHQudHJhbnNhY3Rpb24uc2VuZEFDSyh7Ym9keTplLlV0aWxzLmdlbmVyYXRlRmFrZVNEUCh0LmJvZHkpfSkpLHRoaXMuZWFybHlEaWFsb2dzW3JdLnNlbmRSZXF1ZXN0KHRoaXMsZS5DLkJZRSksdm9pZCh0aGlzLnN0YXR1cyE9PWMuU1RBVFVTX0NPTkZJUk1FRCYmKHRoaXMuZmFpbGVkKHQsZS5DLmNhdXNlcy5XRUJSVENfRVJST1IpLHRoaXMudGVybWluYXRlZCh0LGUuQy5jYXVzZXMuV0VCUlRDX0VSUk9SKSkpfWlmKHRoaXMuc3RhdHVzPT09Yy5TVEFUVVNfQ09ORklSTUVEKXJldHVybiB2b2lkIHRoaXMuZW1pdChcImFja1wiLHQudHJhbnNhY3Rpb24uc2VuZEFDSygpKTtpZighdGhpcy5oYXNBbnN3ZXIpcmV0dXJufWlmKHRoaXMuZGlhbG9nJiZ0LnN0YXR1c19jb2RlPDIwMCl7aWYoLTEhPT10aGlzLmRpYWxvZy5wcmFja2VkLmluZGV4T2YodC5nZXRIZWFkZXIoXCJyc2VxXCIpKXx8dGhpcy5kaWFsb2cucHJhY2tlZFt0aGlzLmRpYWxvZy5wcmFja2VkLmxlbmd0aC0xXT49dC5nZXRIZWFkZXIoXCJyc2VxXCIpJiZ0aGlzLmRpYWxvZy5wcmFja2VkLmxlbmd0aD4wKXJldHVybjtpZighdGhpcy5lYXJseURpYWxvZ3Nbcl0mJiF0aGlzLmNyZWF0ZURpYWxvZyh0LFwiVUFDXCIsITApKXJldHVybjtpZigtMSE9PXRoaXMuZWFybHlEaWFsb2dzW3JdLnByYWNrZWQuaW5kZXhPZih0LmdldEhlYWRlcihcInJzZXFcIikpfHx0aGlzLmVhcmx5RGlhbG9nc1tyXS5wcmFja2VkW3RoaXMuZWFybHlEaWFsb2dzW3JdLnByYWNrZWQubGVuZ3RoLTFdPj10LmdldEhlYWRlcihcInJzZXFcIikmJnRoaXMuZWFybHlEaWFsb2dzW3JdLnByYWNrZWQubGVuZ3RoPjApcmV0dXJuO3JldHVybiBuLnB1c2goXCJSQWNrOiBcIit0LmdldEhlYWRlcihcInJzZXFcIikrXCIgXCIrdC5nZXRIZWFkZXIoXCJjc2VxXCIpKSx0aGlzLmVhcmx5RGlhbG9nc1tyXS5wcmFja2VkLnB1c2godC5nZXRIZWFkZXIoXCJyc2VxXCIpKSx2b2lkIHRoaXMuZWFybHlEaWFsb2dzW3JdLnNlbmRSZXF1ZXN0KHRoaXMsZS5DLlBSQUNLLHtleHRyYUhlYWRlcnM6bixib2R5OmUuVXRpbHMuZ2VuZXJhdGVGYWtlU0RQKHQuYm9keSl9KX1pZih0aGlzLmlzQ2FuY2VsZWQpdC5zdGF0dXNfY29kZT49MTAwJiZ0LnN0YXR1c19jb2RlPDIwMD8odGhpcy5yZXF1ZXN0LmNhbmNlbCh0aGlzLmNhbmNlbFJlYXNvbixuKSx0aGlzLmNhbmNlbGVkKG51bGwpKTp0LnN0YXR1c19jb2RlPj0yMDAmJnQuc3RhdHVzX2NvZGU8Mjk5Pyh0aGlzLmFjY2VwdEFuZFRlcm1pbmF0ZSh0KSx0aGlzLmVtaXQoXCJieWVcIix0aGlzLnJlcXVlc3QpKTp0LnN0YXR1c19jb2RlPj0zMDAmJihpPWUuQy5SRUFTT05fUEhSQVNFW3Quc3RhdHVzX2NvZGVdfHxlLkMuY2F1c2VzLkNBTkNFTEVELHRoaXMucmVqZWN0ZWQodCxpKSx0aGlzLmZhaWxlZCh0LGkpLHRoaXMudGVybWluYXRlZCh0LGkpKTtlbHNlIHN3aXRjaCghMCl7Y2FzZS9eMTAwJC8udGVzdCh0LnN0YXR1c19jb2RlKTp0aGlzLnJlY2VpdmVkXzEwMD0hMCx0aGlzLmVtaXQoXCJwcm9ncmVzc1wiLHQpO2JyZWFrO2Nhc2UvXjFbMC05XXsyfSQvLnRlc3QodC5zdGF0dXNfY29kZSk6aWYoIXQudG9fdGFnKXt0aGlzLmxvZ2dlci53YXJuKFwiMXh4IHJlc3BvbnNlIHJlY2VpdmVkIHdpdGhvdXQgdG8gdGFnXCIpO2JyZWFrfWlmKHQuaGFzSGVhZGVyKFwiY29udGFjdFwiKSYmIXRoaXMuY3JlYXRlRGlhbG9nKHQsXCJVQUNcIiwhMCkpYnJlYWs7aWYodGhpcy5zdGF0dXM9Yy5TVEFUVVNfMVhYX1JFQ0VJVkVELHQuaGFzSGVhZGVyKFwicmVxdWlyZVwiKSYmLTEhPT10LmdldEhlYWRlcihcInJlcXVpcmVcIikuaW5kZXhPZihcIjEwMHJlbFwiKSl7aWYodGhpcy5kaWFsb2d8fCF0aGlzLmVhcmx5RGlhbG9nc1tyXSlicmVhaztpZigtMSE9PXRoaXMuZWFybHlEaWFsb2dzW3JdLnByYWNrZWQuaW5kZXhPZih0LmdldEhlYWRlcihcInJzZXFcIikpfHx0aGlzLmVhcmx5RGlhbG9nc1tyXS5wcmFja2VkW3RoaXMuZWFybHlEaWFsb2dzW3JdLnByYWNrZWQubGVuZ3RoLTFdPj10LmdldEhlYWRlcihcInJzZXFcIikmJnRoaXMuZWFybHlEaWFsb2dzW3JdLnByYWNrZWQubGVuZ3RoPjApcmV0dXJuO2lmKHRoaXMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlcj10aGlzLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJGYWN0b3J5KHRoaXMsdGhpcy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyRmFjdG9yeU9wdGlvbnMpLHRoaXMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlci5oYXNEZXNjcmlwdGlvbih0LmdldEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiKSkpaWYodGhpcy5oYXNPZmZlcil7aWYoIXRoaXMuY3JlYXRlRGlhbG9nKHQsXCJVQUNcIikpYnJlYWs7dGhpcy5oYXNBbnN3ZXI9ITAsdGhpcy5kaWFsb2cucHJhY2tlZC5wdXNoKHQuZ2V0SGVhZGVyKFwicnNlcVwiKSksdGhpcy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLnNldERlc2NyaXB0aW9uKHQuYm9keSx0aGlzLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zLHRoaXMubW9kaWZpZXJzKS50aGVuKGZ1bmN0aW9uKCl7bi5wdXNoKFwiUkFjazogXCIrdC5nZXRIZWFkZXIoXCJyc2VxXCIpK1wiIFwiK3QuZ2V0SGVhZGVyKFwiY3NlcVwiKSkscy5zZW5kUmVxdWVzdChlLkMuUFJBQ0sse2V4dHJhSGVhZGVyczpuLHJlY2VpdmVSZXNwb25zZTpmdW5jdGlvbigpe319KSxzLnN0YXR1cz1jLlNUQVRVU19FQVJMWV9NRURJQSxzLmVtaXQoXCJwcm9ncmVzc1wiLHQpfSxmdW5jdGlvbihpKXtzLmxvZ2dlci53YXJuKGkpLHMuYWNjZXB0QW5kVGVybWluYXRlKHQsNDg4LFwiTm90IEFjY2VwdGFibGUgSGVyZVwiKSxzLmZhaWxlZCh0LGUuQy5jYXVzZXMuQkFEX01FRElBX0RFU0NSSVBUSU9OKX0pfWVsc2V7dmFyIGE9dGhpcy5lYXJseURpYWxvZ3Nbcl0saD1hLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXI9dGhpcy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyRmFjdG9yeSh0aGlzLHRoaXMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlckZhY3RvcnlPcHRpb25zKTthLnByYWNrZWQucHVzaCh0LmdldEhlYWRlcihcInJzZXFcIikpLGguc2V0RGVzY3JpcHRpb24odC5ib2R5LHMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnMscy5tb2RpZmVycykudGhlbihoLmdldERlc2NyaXB0aW9uLmJpbmQoaCxzLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zLHMubW9kaWZpZXJzKSkudGhlbihmdW5jdGlvbihpKXtuLnB1c2goXCJSQWNrOiBcIit0LmdldEhlYWRlcihcInJzZXFcIikrXCIgXCIrdC5nZXRIZWFkZXIoXCJjc2VxXCIpKSxhLnNlbmRSZXF1ZXN0KHMsZS5DLlBSQUNLLHtleHRyYUhlYWRlcnM6bixib2R5Oml9KSxzLnN0YXR1cz1jLlNUQVRVU19FQVJMWV9NRURJQSxzLmVtaXQoXCJwcm9ncmVzc1wiLHQpfSkuY2F0Y2goZnVuY3Rpb24oaSl7aWYoaSBpbnN0YW5jZW9mIGUuRXhjZXB0aW9ucy5HZXREZXNjcmlwdGlvbkVycm9yKXtpZihhLnByYWNrZWQucHVzaCh0LmdldEhlYWRlcihcInJzZXFcIikpLHMuc3RhdHVzPT09Yy5TVEFUVVNfVEVSTUlOQVRFRClyZXR1cm47cy5mYWlsZWQobnVsbCxlLkMuY2F1c2VzLldFQlJUQ19FUlJPUikscy50ZXJtaW5hdGVkKG51bGwsZS5DLmNhdXNlcy5XRUJSVENfRVJST1IpfWVsc2UgYS5wcmFja2VkLnNwbGljZShhLnByYWNrZWQuaW5kZXhPZih0LmdldEhlYWRlcihcInJzZXFcIikpLDEpLHMubG9nZ2VyLndhcm4oXCJpbnZhbGlkIGRlc2NyaXB0aW9uXCIpLHMubG9nZ2VyLndhcm4oaSl9KX1lbHNlIG4ucHVzaChcIlJBY2s6IFwiK3QuZ2V0SGVhZGVyKFwicnNlcVwiKStcIiBcIit0LmdldEhlYWRlcihcImNzZXFcIikpLHRoaXMuZWFybHlEaWFsb2dzW3JdLnByYWNrZWQucHVzaCh0LmdldEhlYWRlcihcInJzZXFcIikpLHRoaXMuZWFybHlEaWFsb2dzW3JdLnNlbmRSZXF1ZXN0KHRoaXMsZS5DLlBSQUNLLHtleHRyYUhlYWRlcnM6bn0pLHRoaXMuZW1pdChcInByb2dyZXNzXCIsdCl9ZWxzZSB0aGlzLmVtaXQoXCJwcm9ncmVzc1wiLHQpO2JyZWFrO2Nhc2UvXjJbMC05XXsyfSQvLnRlc3QodC5zdGF0dXNfY29kZSk6aWYodGhpcy5yZXF1ZXN0LmNzZXErXCIgXCIrdGhpcy5yZXF1ZXN0Lm1ldGhvZCE9PXQuZ2V0SGVhZGVyKFwiY3NlcVwiKSlicmVhaztpZih0aGlzLnN0YXR1cz09PWMuU1RBVFVTX0VBUkxZX01FRElBJiZ0aGlzLmRpYWxvZyl7dGhpcy5zdGF0dXM9Yy5TVEFUVVNfQ09ORklSTUVELG89e30sdGhpcy5yZW5kZXJib2R5JiYobi5wdXNoKFwiQ29udGVudC1UeXBlOiBcIit0aGlzLnJlbmRlcnR5cGUpLG8uZXh0cmFIZWFkZXJzPW4sby5ib2R5PXRoaXMucmVuZGVyYm9keSksdGhpcy5lbWl0KFwiYWNrXCIsdC50cmFuc2FjdGlvbi5zZW5kQUNLKG8pKSx0aGlzLmFjY2VwdGVkKHQpO2JyZWFrfWlmKHRoaXMuZGlhbG9nKWJyZWFrO2lmKHRoaXMuaGFzT2ZmZXIpaWYodGhpcy5oYXNBbnN3ZXIpdGhpcy5yZW5kZXJib2R5JiYobi5wdXNoKFwiQ29udGVudC1UeXBlOiBcIitzLnJlbmRlcnR5cGUpLG8uZXh0cmFIZWFkZXJzPW4sby5ib2R5PXRoaXMucmVuZGVyYm9keSksdGhpcy5lbWl0KFwiYWNrXCIsdC50cmFuc2FjdGlvbi5zZW5kQUNLKG8pKTtlbHNle2lmKCF0aGlzLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIuaGFzRGVzY3JpcHRpb24odC5nZXRIZWFkZXIoXCJDb250ZW50LVR5cGVcIikpKXt0aGlzLmFjY2VwdEFuZFRlcm1pbmF0ZSh0LDQwMCxcIk1pc3Npbmcgc2Vzc2lvbiBkZXNjcmlwdGlvblwiKSx0aGlzLmZhaWxlZCh0LGUuQy5jYXVzZXMuQkFEX01FRElBX0RFU0NSSVBUSU9OKTticmVha31pZighdGhpcy5jcmVhdGVEaWFsb2codCxcIlVBQ1wiKSlicmVhazt0aGlzLmhhc0Fuc3dlcj0hMCx0aGlzLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIuc2V0RGVzY3JpcHRpb24odC5ib2R5LHRoaXMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnMsdGhpcy5tb2RpZmllcnMpLnRoZW4oZnVuY3Rpb24oKXt2YXIgZT17fTtzLnN0YXR1cz1jLlNUQVRVU19DT05GSVJNRUQscy5yZW5kZXJib2R5JiYobi5wdXNoKFwiQ29udGVudC1UeXBlOiBcIitzLnJlbmRlcnR5cGUpLGUuZXh0cmFIZWFkZXJzPW4sZS5ib2R5PXMucmVuZGVyYm9keSkscy5lbWl0KFwiYWNrXCIsdC50cmFuc2FjdGlvbi5zZW5kQUNLKGUpKSxzLmFjY2VwdGVkKHQpfSxmdW5jdGlvbihpKXtzLmxvZ2dlci53YXJuKGkpLHMuYWNjZXB0QW5kVGVybWluYXRlKHQsNDg4LFwiTm90IEFjY2VwdGFibGUgSGVyZVwiKSxzLmZhaWxlZCh0LGUuQy5jYXVzZXMuQkFEX01FRElBX0RFU0NSSVBUSU9OKX0pfWVsc2UgaWYodGhpcy5lYXJseURpYWxvZ3Nbcl0mJnRoaXMuZWFybHlEaWFsb2dzW3JdLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIpe2lmKHRoaXMuaGFzT2ZmZXI9ITAsdGhpcy5oYXNBbnN3ZXI9ITAsdGhpcy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyPXRoaXMuZWFybHlEaWFsb2dzW3JdLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIsIXRoaXMuY3JlYXRlRGlhbG9nKHQsXCJVQUNcIikpYnJlYWs7dGhpcy5zdGF0dXM9Yy5TVEFUVVNfQ09ORklSTUVELHRoaXMuZW1pdChcImFja1wiLHQudHJhbnNhY3Rpb24uc2VuZEFDSygpKSx0aGlzLmFjY2VwdGVkKHQpfWVsc2V7aWYodGhpcy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyPXRoaXMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlckZhY3RvcnkodGhpcyx0aGlzLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJGYWN0b3J5T3B0aW9ucyksIXRoaXMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlci5oYXNEZXNjcmlwdGlvbih0LmdldEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiKSkpe3RoaXMuYWNjZXB0QW5kVGVybWluYXRlKHQsNDAwLFwiTWlzc2luZyBzZXNzaW9uIGRlc2NyaXB0aW9uXCIpLHRoaXMuZmFpbGVkKHQsZS5DLmNhdXNlcy5CQURfTUVESUFfREVTQ1JJUFRJT04pO2JyZWFrfWlmKCF0aGlzLmNyZWF0ZURpYWxvZyh0LFwiVUFDXCIpKWJyZWFrO3RoaXMuaGFzT2ZmZXI9ITAsdGhpcy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLnNldERlc2NyaXB0aW9uKHQuYm9keSx0aGlzLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zLHRoaXMubW9kaWZpZXJzKS50aGVuKHRoaXMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlci5nZXREZXNjcmlwdGlvbi5iaW5kKHRoaXMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlcix0aGlzLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zLHRoaXMubW9kaWZpZXJzKSkudGhlbihmdW5jdGlvbihlKXtzLmlzQ2FuY2VsZWR8fHMuc3RhdHVzPT09Yy5TVEFUVVNfVEVSTUlOQVRFRHx8KHMuc3RhdHVzPWMuU1RBVFVTX0NPTkZJUk1FRCxzLmhhc0Fuc3dlcj0hMCxzLmVtaXQoXCJhY2tcIix0LnRyYW5zYWN0aW9uLnNlbmRBQ0soe2JvZHk6ZX0pKSxzLmFjY2VwdGVkKHQpKX0pLmNhdGNoKGZ1bmN0aW9uKGkpe2kgaW5zdGFuY2VvZiBlLkV4Y2VwdGlvbnMuR2V0RGVzY3JpcHRpb25FcnJvcj9zLmxvZ2dlci53YXJuKFwidGhlcmUgd2FzIGEgcHJvYmxlbVwiKToocy5sb2dnZXIud2FybihcImludmFsaWQgZGVzY3JpcHRpb25cIikscy5sb2dnZXIud2FybihpKSxzLmFjY2VwdEFuZFRlcm1pbmF0ZSh0LDQ4OCxcIkludmFsaWQgc2Vzc2lvbiBkZXNjcmlwdGlvblwiKSxzLmZhaWxlZCh0LGUuQy5jYXVzZXMuQkFEX01FRElBX0RFU0NSSVBUSU9OKSl9KX1icmVhaztkZWZhdWx0Omk9ZS5VdGlscy5zaXBFcnJvckNhdXNlKHQuc3RhdHVzX2NvZGUpLHRoaXMucmVqZWN0ZWQodCxpKSx0aGlzLmZhaWxlZCh0LGkpLHRoaXMudGVybWluYXRlZCh0LGkpfX19LGNhbmNlbDpmdW5jdGlvbih0KXtpZih0PXR8fHt9LHQuZXh0cmFIZWFkZXJzPSh0LmV4dHJhSGVhZGVyc3x8W10pLnNsaWNlKCksdGhpcy5zdGF0dXM9PT1jLlNUQVRVU19URVJNSU5BVEVEfHx0aGlzLnN0YXR1cz09PWMuU1RBVFVTX0NPTkZJUk1FRCl0aHJvdyBuZXcgZS5FeGNlcHRpb25zLkludmFsaWRTdGF0ZUVycm9yKHRoaXMuc3RhdHVzKTt0aGlzLmxvZ2dlci5sb2coXCJjYW5jZWxpbmcgUlRDU2Vzc2lvblwiKTt2YXIgaT1lLlV0aWxzLmdldENhbmNlbFJlYXNvbih0LnN0YXR1c19jb2RlLHQucmVhc29uX3BocmFzZSk7cmV0dXJuIHRoaXMuc3RhdHVzPT09Yy5TVEFUVVNfTlVMTHx8dGhpcy5zdGF0dXM9PT1jLlNUQVRVU19JTlZJVEVfU0VOVCYmIXRoaXMucmVjZWl2ZWRfMTAwPyh0aGlzLmlzQ2FuY2VsZWQ9ITAsdGhpcy5jYW5jZWxSZWFzb249aSk6dGhpcy5zdGF0dXMhPT1jLlNUQVRVU19JTlZJVEVfU0VOVCYmdGhpcy5zdGF0dXMhPT1jLlNUQVRVU18xWFhfUkVDRUlWRUQmJnRoaXMuc3RhdHVzIT09Yy5TVEFUVVNfRUFSTFlfTUVESUF8fHRoaXMucmVxdWVzdC5jYW5jZWwoaSx0LmV4dHJhSGVhZGVycyksdGhpcy5jYW5jZWxlZCgpfSx0ZXJtaW5hdGU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuc3RhdHVzPT09Yy5TVEFUVVNfVEVSTUlOQVRFRD90aGlzOih0aGlzLnN0YXR1cz09PWMuU1RBVFVTX1dBSVRJTkdfRk9SX0FDS3x8dGhpcy5zdGF0dXM9PT1jLlNUQVRVU19DT05GSVJNRUQ/dGhpcy5ieWUoZSk6dGhpcy5jYW5jZWwoZSksdGhpcyl9LHJlY2VpdmVSZXF1ZXN0OmZ1bmN0aW9uKGkpe3JldHVybiBpLm1ldGhvZCxlLkMuQ0FOQ0VMLGkubWV0aG9kPT09ZS5DLkFDSyYmdGhpcy5zdGF0dXM9PT1jLlNUQVRVU19XQUlUSU5HX0ZPUl9BQ0smJihlLlRpbWVycy5jbGVhclRpbWVvdXQodGhpcy50aW1lcnMuYWNrVGltZXIpLGUuVGltZXJzLmNsZWFyVGltZW91dCh0aGlzLnRpbWVycy5pbnZpdGUyeHhUaW1lciksdGhpcy5zdGF0dXM9Yy5TVEFUVVNfQ09ORklSTUVELHRoaXMuYWNjZXB0ZWQoKSksdC5wcm90b3R5cGUucmVjZWl2ZVJlcXVlc3QuYXBwbHkodGhpcyxbaV0pfSxvblRyYW5zcG9ydEVycm9yOmZ1bmN0aW9uKCl7dGhpcy5zdGF0dXMhPT1jLlNUQVRVU19DT05GSVJNRUQmJnRoaXMuc3RhdHVzIT09Yy5TVEFUVVNfVEVSTUlOQVRFRCYmdGhpcy5mYWlsZWQobnVsbCxlLkMuY2F1c2VzLkNPTk5FQ1RJT05fRVJST1IpfSxvblJlcXVlc3RUaW1lb3V0OmZ1bmN0aW9uKCl7dGhpcy5zdGF0dXM9PT1jLlNUQVRVU19DT05GSVJNRUQ/dGhpcy50ZXJtaW5hdGVkKG51bGwsZS5DLmNhdXNlcy5SRVFVRVNUX1RJTUVPVVQpOnRoaXMuc3RhdHVzIT09Yy5TVEFUVVNfVEVSTUlOQVRFRCYmKHRoaXMuZmFpbGVkKG51bGwsZS5DLmNhdXNlcy5SRVFVRVNUX1RJTUVPVVQpLHRoaXMudGVybWluYXRlZChudWxsLGUuQy5jYXVzZXMuUkVRVUVTVF9USU1FT1VUKSl9fSxlLkludml0ZUNsaWVudENvbnRleHQ9ciwobz1mdW5jdGlvbih0LGkscyxyKXtpZih0aGlzLm9wdGlvbnM9cnx8e30sdGhpcy5leHRyYUhlYWRlcnM9KHRoaXMub3B0aW9ucy5leHRyYUhlYWRlcnN8fFtdKS5zbGljZSgpLHZvaWQgMD09PXR8fHZvaWQgMD09PWl8fHZvaWQgMD09PXMpdGhyb3cgbmV3IFR5cGVFcnJvcihcIk5vdCBlbm91Z2ggYXJndW1lbnRzXCIpO2UuVXRpbHMuYXVnbWVudCh0aGlzLGUuQ2xpZW50Q29udGV4dCxbdCxlLkMuUkVGRVIsaS5yZW1vdGVJZGVudGl0eS51cmkudG9TdHJpbmcoKSxyXSksdGhpcy5hcHBsaWNhbnQ9aTtpZihzIGluc3RhbmNlb2YgZS5JbnZpdGVTZXJ2ZXJDb250ZXh0fHxzIGluc3RhbmNlb2YgZS5JbnZpdGVDbGllbnRDb250ZXh0KXRoaXMudGFyZ2V0PSdcIicrcy5yZW1vdGVJZGVudGl0eS5mcmllbmRseU5hbWUrJ1wiIDwnK3MuZGlhbG9nLnJlbW90ZV90YXJnZXQudG9TdHJpbmcoKStcIj9SZXBsYWNlcz1cIitzLmRpYWxvZy5pZC5jYWxsX2lkK1wiJTNCdG8tdGFnJTNEXCIrcy5kaWFsb2cuaWQucmVtb3RlX3RhZytcIiUzQmZyb20tdGFnJTNEXCIrcy5kaWFsb2cuaWQubG9jYWxfdGFnK1wiPlwiO2Vsc2V7dHJ5e3RoaXMudGFyZ2V0PWUuR3JhbW1hci5wYXJzZShzLFwiUmVmZXJfVG9cIikudXJpfHxzfWNhdGNoKGUpe3RoaXMubG9nZ2VyLmRlYnVnKFwiLnJlZmVyKCkgY2Fubm90IHBhcnNlIFJlZmVyX1RvIGZyb21cIixzKSx0aGlzLmxvZ2dlci5kZWJ1ZyhcIi4uLmZhbGxpbmcgdGhyb3VnaCB0byBub3JtYWxpemVUYXJnZXQoKVwiKX1pZih0aGlzLnRhcmdldD10aGlzLnVhLm5vcm1hbGl6ZVRhcmdldCh0aGlzLnRhcmdldCksIXRoaXMudGFyZ2V0KXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIHRhcmdldDogXCIrcyl9dGhpcy51YSYmdGhpcy5leHRyYUhlYWRlcnMucHVzaChcIlJlZmVycmVkLUJ5OiA8XCIrdGhpcy51YS5jb25maWd1cmF0aW9uLnVyaStcIj5cIiksdGhpcy5leHRyYUhlYWRlcnMucHVzaChcIkNvbnRhY3Q6IFwiK2kuY29udGFjdCksdGhpcy5leHRyYUhlYWRlcnMucHVzaChcIkFsbG93OiBcIitlLlVBLkMuQUxMT1dFRF9NRVRIT0RTLnRvU3RyaW5nKCkpLHRoaXMuZXh0cmFIZWFkZXJzLnB1c2goXCJSZWZlci1UbzogXCIrdGhpcy50YXJnZXQpfSkucHJvdG90eXBlPXtyZWZlcjpmdW5jdGlvbih0KXt0PXR8fHt9O3ZhciBpPSh0aGlzLmV4dHJhSGVhZGVyc3x8W10pLnNsaWNlKCk7cmV0dXJuIHQuZXh0cmFIZWFkZXJzJiZpLmNvbmNhdCh0LmV4dHJhSGVhZGVycyksdGhpcy5hcHBsaWNhbnQuc2VuZFJlcXVlc3QoZS5DLlJFRkVSLHtleHRyYUhlYWRlcnM6dGhpcy5leHRyYUhlYWRlcnMscmVjZWl2ZVJlc3BvbnNlOmZ1bmN0aW9uKGUpey9eMVswLTldezJ9JC8udGVzdChlLnN0YXR1c19jb2RlKT90aGlzLmVtaXQoXCJyZWZlclJlcXVlc3RQcm9ncmVzc1wiLHRoaXMpOi9eMlswLTldezJ9JC8udGVzdChlLnN0YXR1c19jb2RlKT90aGlzLmVtaXQoXCJyZWZlclJlcXVlc3RBY2NlcHRlZFwiLHRoaXMpOi9eWzQtNl1bMC05XXsyfSQvLnRlc3QoZS5zdGF0dXNfY29kZSkmJnRoaXMuZW1pdChcInJlZmVyUmVxdWVzdFJlamVjdGVkXCIsdGhpcyksdC5yZWNlaXZlUmVzcG9uc2UmJnQucmVjZWl2ZVJlc3BvbnNlKGUpfS5iaW5kKHRoaXMpfSksdGhpc30scmVjZWl2ZU5vdGlmeTpmdW5jdGlvbih0KXtpZih0Lmhhc0hlYWRlcihcIkNvbnRlbnQtVHlwZVwiKSYmLTEhPT10LmdldEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiKS5zZWFyY2goL15tZXNzYWdlXFwvc2lwZnJhZy8pKXt2YXIgaT1lLkdyYW1tYXIucGFyc2UodC5ib2R5LFwic2lwZnJhZ1wiKTtpZigtMT09PWkpcmV0dXJuIHZvaWQgdC5yZXBseSg0ODksXCJCYWQgRXZlbnRcIik7c3dpdGNoKCEwKXtjYXNlL14xWzAtOV17Mn0kLy50ZXN0KGkuc3RhdHVzX2NvZGUpOnRoaXMuZW1pdChcInJlZmVyUHJvZ3Jlc3NcIix0aGlzKTticmVhaztjYXNlL14yWzAtOV17Mn0kLy50ZXN0KGkuc3RhdHVzX2NvZGUpOnRoaXMuZW1pdChcInJlZmVyQWNjZXB0ZWRcIix0aGlzKSwhdGhpcy5vcHRpb25zLmFjdGl2ZUFmdGVyVHJhbnNmZXImJnRoaXMuYXBwbGljYW50LnRlcm1pbmF0ZSYmdGhpcy5hcHBsaWNhbnQudGVybWluYXRlKCk7YnJlYWs7ZGVmYXVsdDp0aGlzLmVtaXQoXCJyZWZlclJlamVjdGVkXCIsdGhpcyl9cmV0dXJuIHQucmVwbHkoMjAwKSx2b2lkIHRoaXMuZW1pdChcIm5vdGlmeVwiLHQpfXQucmVwbHkoNDg5LFwiQmFkIEV2ZW50XCIpfX0sZS5SZWZlckNsaWVudENvbnRleHQ9bywobj1mdW5jdGlvbih0LGkpe2lmKGUuVXRpbHMuYXVnbWVudCh0aGlzLGUuU2VydmVyQ29udGV4dCxbdCxpXSksdGhpcy51YT10LHRoaXMuc3RhdHVzPWMuU1RBVFVTX0lOVklURV9SRUNFSVZFRCx0aGlzLmZyb21fdGFnPWkuZnJvbV90YWcsdGhpcy5pZD1pLmNhbGxfaWQrdGhpcy5mcm9tX3RhZyx0aGlzLnJlcXVlc3Q9aSx0aGlzLmNvbnRhY3Q9dGhpcy51YS5jb250YWN0LnRvU3RyaW5nKCksdGhpcy5sb2dnZXI9dC5nZXRMb2dnZXIoXCJzaXAucmVmZXJzZXJ2ZXJjb250ZXh0XCIsdGhpcy5pZCksIXRoaXMucmVxdWVzdC5oYXNIZWFkZXIoXCJyZWZlci10b1wiKSlyZXR1cm4gdGhpcy5sb2dnZXIud2FybihcIkludmFsaWQgUkVGRVIgcGFja2V0LiBBIHJlZmVyLXRvIGhlYWRlciBpcyByZXF1aXJlZC4gUmVqZWN0aW5nIHJlZmVyLlwiKSx2b2lkIHRoaXMucmVqZWN0KCk7dGhpcy5yZWZlclRvPXRoaXMucmVxdWVzdC5wYXJzZUhlYWRlcihcInJlZmVyLXRvXCIpLHRoaXMucmVmZXJyZWRTZXNzaW9uPXRoaXMudWEuZmluZFNlc3Npb24oaSksdGhpcy5jc2VxPU1hdGguZmxvb3IoMWU0Kk1hdGgucmFuZG9tKCkpLHRoaXMuY2FsbF9pZD10aGlzLnJlcXVlc3QuY2FsbF9pZCx0aGlzLmZyb21fdXJpPXRoaXMucmVxdWVzdC50by51cmksdGhpcy5mcm9tX3RhZz10aGlzLnJlcXVlc3QudG8ucGFyYW1ldGVycy50YWcsdGhpcy5yZW1vdGVfdGFyZ2V0PXRoaXMucmVxdWVzdC5oZWFkZXJzLkNvbnRhY3RbMF0ucGFyc2VkLnVyaSx0aGlzLnRvX3VyaT10aGlzLnJlcXVlc3QuZnJvbS51cmksdGhpcy50b190YWc9dGhpcy5yZXF1ZXN0LmZyb21fdGFnLHRoaXMucm91dGVfc2V0PXRoaXMucmVxdWVzdC5nZXRIZWFkZXJzKFwicmVjb3JkLXJvdXRlXCIpLHRoaXMucmVjZWl2ZU5vbkludml0ZVJlc3BvbnNlPWZ1bmN0aW9uKCl7fSx0aGlzLnJlcXVlc3QuaGFzSGVhZGVyKFwicmVmZXJyZWQtYnlcIikmJih0aGlzLnJlZmVycmVkQnk9dGhpcy5yZXF1ZXN0LmdldEhlYWRlcihcInJlZmVycmVkLWJ5XCIpKSx0aGlzLnJlZmVyVG8udXJpLmhhc0hlYWRlcihcInJlcGxhY2VzXCIpJiYodGhpcy5yZXBsYWNlcz10aGlzLnJlZmVyVG8udXJpLmdldEhlYWRlcihcInJlcGxhY2VzXCIpKSx0aGlzLnN0YXR1cz1jLlNUQVRVU19XQUlUSU5HX0ZPUl9BTlNXRVJ9KS5wcm90b3R5cGU9e3Byb2dyZXNzOmZ1bmN0aW9uKCl7aWYodGhpcy5zdGF0dXMhPT1jLlNUQVRVU19XQUlUSU5HX0ZPUl9BTlNXRVIpdGhyb3cgbmV3IGUuRXhjZXB0aW9ucy5JbnZhbGlkU3RhdGVFcnJvcih0aGlzLnN0YXR1cyk7dGhpcy5yZXF1ZXN0LnJlcGx5KDEwMCl9LHJlamVjdDpmdW5jdGlvbih0KXtpZih0aGlzLnN0YXR1cz09PWMuU1RBVFVTX1RFUk1JTkFURUQpdGhyb3cgbmV3IGUuRXhjZXB0aW9ucy5JbnZhbGlkU3RhdGVFcnJvcih0aGlzLnN0YXR1cyk7dGhpcy5sb2dnZXIubG9nKFwiUmVqZWN0aW5nIHJlZmVyXCIpLHRoaXMuc3RhdHVzPWMuU1RBVFVTX1RFUk1JTkFURUQsZS5TZXJ2ZXJDb250ZXh0LnByb3RvdHlwZS5yZWplY3QuY2FsbCh0aGlzLHQpLHRoaXMuZW1pdChcInJlZmVyUmVxdWVzdFJlamVjdGVkXCIsdGhpcyl9LGFjY2VwdDpmdW5jdGlvbih0LGkpe2lmKHQ9dHx8e30sdGhpcy5zdGF0dXMhPT1jLlNUQVRVU19XQUlUSU5HX0ZPUl9BTlNXRVIpdGhyb3cgbmV3IGUuRXhjZXB0aW9ucy5JbnZhbGlkU3RhdGVFcnJvcih0aGlzLnN0YXR1cyk7aWYodGhpcy5zdGF0dXM9Yy5TVEFUVVNfQU5TV0VSRUQsdGhpcy5yZXF1ZXN0LnJlcGx5KDIwMixcIkFjY2VwdGVkXCIpLHRoaXMuZW1pdChcInJlZmVyUmVxdWVzdEFjY2VwdGVkXCIsdGhpcyksdC5mb2xsb3dSZWZlcil7dGhpcy5sb2dnZXIubG9nKFwiQWNjZXB0ZWQgcmVmZXIsIGF0dGVtcHRpbmcgdG8gYXV0b21hdGljYWxseSBmb2xsb3cgaXRcIik7dmFyIHM9dGhpcy5yZWZlclRvLnVyaTtpZighcy5zY2hlbWUubWF0Y2goXCJec2lwcz8kXCIpKXJldHVybiB0aGlzLmxvZ2dlci5lcnJvcihcIlNJUC5qcyBjYW4gb25seSBhdXRvbWF0aWNhbGx5IGZvbGxvdyBTSVAgcmVmZXIgdGFyZ2V0XCIpLHZvaWQgdGhpcy5yZWplY3QoKTt2YXIgcj10Lmludml0ZU9wdGlvbnN8fHt9LG49KHIuZXh0cmFIZWFkZXJzfHxbXSkuc2xpY2UoKTt0aGlzLnJlcGxhY2VzJiZuLnB1c2goXCJSZXBsYWNlczogXCIrZGVjb2RlVVJJQ29tcG9uZW50KHRoaXMucmVwbGFjZXMpKSx0aGlzLnJlZmVycmVkQnkmJm4ucHVzaChcIlJlZmVycmVkLUJ5OiBcIit0aGlzLnJlZmVycmVkQnkpLHIuZXh0cmFIZWFkZXJzPW4scy5jbGVhckhlYWRlcnMoKSx0aGlzLnRhcmdldFNlc3Npb249dGhpcy51YS5pbnZpdGUocyxyLGkpLHRoaXMuZW1pdChcInJlZmVySW52aXRlU2VudFwiLHRoaXMpLHRoaXMudGFyZ2V0U2Vzc2lvbi5vbmNlKFwicHJvZ3Jlc3NcIixmdW5jdGlvbigpe3RoaXMuc2VuZE5vdGlmeShcIlNJUC8yLjAgMTAwIFRyeWluZ1wiKSx0aGlzLmVtaXQoXCJyZWZlclByb2dyZXNzXCIsdGhpcyksdGhpcy5yZWZlcnJlZFNlc3Npb24mJnRoaXMucmVmZXJyZWRTZXNzaW9uLmVtaXQoXCJyZWZlclByb2dyZXNzXCIsdGhpcyl9LmJpbmQodGhpcykpLHRoaXMudGFyZ2V0U2Vzc2lvbi5vbmNlKFwiYWNjZXB0ZWRcIixmdW5jdGlvbigpe3RoaXMubG9nZ2VyLmxvZyhcIlN1Y2Nlc3NmdWxseSBmb2xsb3dlZCB0aGUgcmVmZXJcIiksdGhpcy5zZW5kTm90aWZ5KFwiU0lQLzIuMCAyMDAgT0tcIiksdGhpcy5lbWl0KFwicmVmZXJBY2NlcHRlZFwiLHRoaXMpLHRoaXMucmVmZXJyZWRTZXNzaW9uJiZ0aGlzLnJlZmVycmVkU2Vzc2lvbi5lbWl0KFwicmVmZXJBY2NlcHRlZFwiLHRoaXMpfS5iaW5kKHRoaXMpKTt2YXIgbz1mdW5jdGlvbihlKXtpZih0aGlzLnN0YXR1cyE9PWMuU1RBVFVTX1RFUk1JTkFURUQpe2lmKHRoaXMubG9nZ2VyLmxvZyhcIlJlZmVyIHdhcyBub3Qgc3VjY2Vzc2Z1bC4gUmVzdW1pbmcgc2Vzc2lvblwiKSxlJiY0Mjk9PT1lLnN0YXR1c19jb2RlKXJldHVybiB0aGlzLmxvZ2dlci5sb2coXCJBbGVydGluZyByZWZlcnJlciB0aGF0IGlkZW50aXR5IGlzIHJlcXVpcmVkLlwiKSx2b2lkIHRoaXMuc2VuZE5vdGlmeShcIlNJUC8yLjAgNDI5IFByb3ZpZGUgUmVmZXJyZXIgSWRlbnRpdHlcIik7dGhpcy5zZW5kTm90aWZ5KFwiU0lQLzIuMCA2MDMgRGVjbGluZWRcIiksdGhpcy5zdGF0dXM9Yy5TVEFUVVNfVEVSTUlOQVRFRCx0aGlzLmVtaXQoXCJyZWZlclJlamVjdGVkXCIsdGhpcyksdGhpcy5yZWZlcnJlZFNlc3Npb24mJnRoaXMucmVmZXJyZWRTZXNzaW9uLmVtaXQoXCJyZWZlclJlamVjdGVkXCIpfX07dGhpcy50YXJnZXRTZXNzaW9uLm9uY2UoXCJyZWplY3RlZFwiLG8uYmluZCh0aGlzKSksdGhpcy50YXJnZXRTZXNzaW9uLm9uY2UoXCJmYWlsZWRcIixvLmJpbmQodGhpcykpfWVsc2UgdGhpcy5sb2dnZXIubG9nKFwiQWNjZXB0ZWQgcmVmZXIsIGJ1dCBkaWQgbm90IGF1dG9tYXRpY2FsbHkgZm9sbG93IGl0XCIpLHRoaXMuc2VuZE5vdGlmeShcIlNJUC8yLjAgMjAwIE9LXCIpLHRoaXMuZW1pdChcInJlZmVyQWNjZXB0ZWRcIix0aGlzKSx0aGlzLnJlZmVycmVkU2Vzc2lvbiYmdGhpcy5yZWZlcnJlZFNlc3Npb24uZW1pdChcInJlZmVyQWNjZXB0ZWRcIix0aGlzKX0sc2VuZE5vdGlmeTpmdW5jdGlvbih0KXtpZih0aGlzLnN0YXR1cyE9PWMuU1RBVFVTX0FOU1dFUkVEKXRocm93IG5ldyBlLkV4Y2VwdGlvbnMuSW52YWxpZFN0YXRlRXJyb3IodGhpcy5zdGF0dXMpO2lmKC0xPT09ZS5HcmFtbWFyLnBhcnNlKHQsXCJzaXBmcmFnXCIpKXRocm93IG5ldyBFcnJvcihcInNpcGZyYWcgYm9keSBpcyByZXF1aXJlZCB0byBzZW5kIG5vdGlmeSBmb3IgcmVmZXJcIik7dmFyIGk9bmV3IGUuT3V0Z29pbmdSZXF1ZXN0KGUuQy5OT1RJRlksdGhpcy5yZW1vdGVfdGFyZ2V0LHRoaXMudWEse2NzZXE6dGhpcy5jc2VxKz0xLGNhbGxfaWQ6dGhpcy5jYWxsX2lkLGZyb21fdXJpOnRoaXMuZnJvbV91cmksZnJvbV90YWc6dGhpcy5mcm9tX3RhZyx0b191cmk6dGhpcy50b191cmksdG9fdGFnOnRoaXMudG9fdGFnLHJvdXRlX3NldDp0aGlzLnJvdXRlX3NldH0sW1wiRXZlbnQ6IHJlZmVyXCIsXCJTdWJzY3JpcHRpb24tU3RhdGU6IHRlcm1pbmF0ZWRcIixcIkNvbnRlbnQtVHlwZTogbWVzc2FnZS9zaXBmcmFnXCJdLHQpO25ldyBlLlJlcXVlc3RTZW5kZXIoe3JlcXVlc3Q6aSxvblJlcXVlc3RUaW1lb3V0OmZ1bmN0aW9uKCl7fSxvblRyYW5zcG9ydEVycm9yOmZ1bmN0aW9uKCl7fSxyZWNlaXZlUmVzcG9uc2U6ZnVuY3Rpb24oKXt9fSx0aGlzLnVhKS5zZW5kKCl9fSxlLlJlZmVyU2VydmVyQ29udGV4dD1ufX0sZnVuY3Rpb24oZSx0LGkpe1widXNlIHN0cmljdFwiO2UuZXhwb3J0cz1mdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4gdD1mdW5jdGlvbihpLHMscil7dmFyIG4sbztpZih2b2lkIDA9PT1zKXRocm93IG5ldyBUeXBlRXJyb3IoXCJOb3QgZW5vdWdoIGFyZ3VtZW50c1wiKTtpZih0aGlzLmxvZ2dlcj1pLnVhLmdldExvZ2dlcihcInNpcC5pbnZpdGVjb250ZXh0LmR0bWZcIixpLmlkKSx0aGlzLm93bmVyPWksdGhpcy5kaXJlY3Rpb249bnVsbCxyPXJ8fHt9LG49ci5kdXJhdGlvbnx8bnVsbCxvPXIuaW50ZXJUb25lR2FwfHxudWxsLFwic3RyaW5nXCI9PXR5cGVvZiBzKXM9cy50b1VwcGVyQ2FzZSgpO2Vsc2V7aWYoXCJudW1iZXJcIiE9dHlwZW9mIHMpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgdG9uZTogXCIrcyk7cz1zLnRvU3RyaW5nKCl9aWYoIXMubWF0Y2goL15bMC05QS1EIypdJC8pKXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIHRvbmU6IFwiK3MpO2lmKHRoaXMudG9uZT1zLG4mJiFlLlV0aWxzLmlzRGVjaW1hbChuKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCB0b25lIGR1cmF0aW9uOiBcIituKTtpZihuP248dC5DLk1JTl9EVVJBVElPTj8odGhpcy5sb2dnZXIud2FybignXCJkdXJhdGlvblwiIHZhbHVlIGlzIGxvd2VyIHRoYW4gdGhlIG1pbmltdW0gYWxsb3dlZCwgc2V0dGluZyBpdCB0byAnK3QuQy5NSU5fRFVSQVRJT04rXCIgbWlsbGlzZWNvbmRzXCIpLG49dC5DLk1JTl9EVVJBVElPTik6bj50LkMuTUFYX0RVUkFUSU9OPyh0aGlzLmxvZ2dlci53YXJuKCdcImR1cmF0aW9uXCIgdmFsdWUgaXMgZ3JlYXRlciB0aGFuIHRoZSBtYXhpbXVtIGFsbG93ZWQsIHNldHRpbmcgaXQgdG8gJyt0LkMuTUFYX0RVUkFUSU9OK1wiIG1pbGxpc2Vjb25kc1wiKSxuPXQuQy5NQVhfRFVSQVRJT04pOm49TWF0aC5hYnMobik6bj10LkMuREVGQVVMVF9EVVJBVElPTix0aGlzLmR1cmF0aW9uPW4sbyYmIWUuVXRpbHMuaXNEZWNpbWFsKG8pKXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGludGVyVG9uZUdhcDogXCIrbyk7bz9vPHQuQy5NSU5fSU5URVJfVE9ORV9HQVA/KHRoaXMubG9nZ2VyLndhcm4oJ1wiaW50ZXJUb25lR2FwXCIgdmFsdWUgaXMgbG93ZXIgdGhhbiB0aGUgbWluaW11bSBhbGxvd2VkLCBzZXR0aW5nIGl0IHRvICcrdC5DLk1JTl9JTlRFUl9UT05FX0dBUCtcIiBtaWxsaXNlY29uZHNcIiksbz10LkMuTUlOX0lOVEVSX1RPTkVfR0FQKTpvPU1hdGguYWJzKG8pOm89dC5DLkRFRkFVTFRfSU5URVJfVE9ORV9HQVAsdGhpcy5pbnRlclRvbmVHYXA9b30sdC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlLkV2ZW50RW1pdHRlci5wcm90b3R5cGUpLHQucHJvdG90eXBlLnNlbmQ9ZnVuY3Rpb24odCl7dmFyIGkscz17fTtpZih0aGlzLmRpcmVjdGlvbj1cIm91dGdvaW5nXCIsdGhpcy5vd25lci5zdGF0dXMhPT1lLlNlc3Npb24uQy5TVEFUVVNfQ09ORklSTUVEJiZ0aGlzLm93bmVyLnN0YXR1cyE9PWUuU2Vzc2lvbi5DLlNUQVRVU19XQUlUSU5HX0ZPUl9BQ0spdGhyb3cgbmV3IGUuRXhjZXB0aW9ucy5JbnZhbGlkU3RhdGVFcnJvcih0aGlzLm93bmVyLnN0YXR1cyk7aT0odD10fHx7fSkuZXh0cmFIZWFkZXJzP3QuZXh0cmFIZWFkZXJzLnNsaWNlKCk6W10scy5jb250ZW50VHlwZT1cImFwcGxpY2F0aW9uL2R0bWYtcmVsYXlcIixzLmJvZHk9XCJTaWduYWw9IFwiK3RoaXMudG9uZStcIlxcclxcblwiLHMuYm9keSs9XCJEdXJhdGlvbj0gXCIrdGhpcy5kdXJhdGlvbix0aGlzLnJlcXVlc3Q9dGhpcy5vd25lci5kaWFsb2cuc2VuZFJlcXVlc3QodGhpcyxlLkMuSU5GTyx7ZXh0cmFIZWFkZXJzOmksYm9keTpzfSksdGhpcy5vd25lci5lbWl0KFwiZHRtZlwiLHRoaXMucmVxdWVzdCx0aGlzKX0sdC5wcm90b3R5cGUucmVjZWl2ZVJlc3BvbnNlPWZ1bmN0aW9uKHQpe3ZhciBpO3N3aXRjaCghMCl7Y2FzZS9eMVswLTldezJ9JC8udGVzdCh0LnN0YXR1c19jb2RlKTpicmVhaztjYXNlL14yWzAtOV17Mn0kLy50ZXN0KHQuc3RhdHVzX2NvZGUpOnRoaXMuZW1pdChcInN1Y2NlZWRlZFwiLHtvcmlnaW5hdG9yOlwicmVtb3RlXCIscmVzcG9uc2U6dH0pO2JyZWFrO2RlZmF1bHQ6aT1lLlV0aWxzLnNpcEVycm9yQ2F1c2UodC5zdGF0dXNfY29kZSksdGhpcy5lbWl0KFwiZmFpbGVkXCIsdCxpKX19LHQucHJvdG90eXBlLm9uUmVxdWVzdFRpbWVvdXQ9ZnVuY3Rpb24oKXt0aGlzLmVtaXQoXCJmYWlsZWRcIixudWxsLGUuQy5jYXVzZXMuUkVRVUVTVF9USU1FT1VUKSx0aGlzLm93bmVyLm9uUmVxdWVzdFRpbWVvdXQoKX0sdC5wcm90b3R5cGUub25UcmFuc3BvcnRFcnJvcj1mdW5jdGlvbigpe3RoaXMuZW1pdChcImZhaWxlZFwiLG51bGwsZS5DLmNhdXNlcy5DT05ORUNUSU9OX0VSUk9SKSx0aGlzLm93bmVyLm9uVHJhbnNwb3J0RXJyb3IoKX0sdC5wcm90b3R5cGUub25EaWFsb2dFcnJvcj1mdW5jdGlvbih0KXt0aGlzLmVtaXQoXCJmYWlsZWRcIix0LGUuQy5jYXVzZXMuRElBTE9HX0VSUk9SKSx0aGlzLm93bmVyLm9uRGlhbG9nRXJyb3IodCl9LHQucHJvdG90eXBlLmluaXRfaW5jb21pbmc9ZnVuY3Rpb24oZSl7dGhpcy5kaXJlY3Rpb249XCJpbmNvbWluZ1wiLHRoaXMucmVxdWVzdD1lLGUucmVwbHkoMjAwKSx0aGlzLnRvbmUmJnRoaXMuZHVyYXRpb24/dGhpcy5vd25lci5lbWl0KFwiZHRtZlwiLGUsdGhpcyk6dGhpcy5sb2dnZXIud2FybihcImludmFsaWQgSU5GTyBEVE1GIHJlY2VpdmVkLCBkaXNjYXJkZWRcIil9LHQuQz17TUlOX0RVUkFUSU9OOjcwLE1BWF9EVVJBVElPTjo2ZTMsREVGQVVMVF9EVVJBVElPTjoxMDAsTUlOX0lOVEVSX1RPTkVfR0FQOjUwLERFRkFVTFRfSU5URVJfVE9ORV9HQVA6NTAwfSx0fX0sZnVuY3Rpb24oZSx0LGkpe1widXNlIHN0cmljdFwiO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtlLlN1YnNjcmlwdGlvbj1mdW5jdGlvbih0LGkscyxyKXtpZihyPU9iamVjdC5jcmVhdGUocnx8T2JqZWN0LnByb3RvdHlwZSksdGhpcy5leHRyYUhlYWRlcnM9ci5leHRyYUhlYWRlcnM9KHIuZXh0cmFIZWFkZXJzfHxbXSkuc2xpY2UoKSx0aGlzLmlkPW51bGwsdGhpcy5zdGF0ZT1cImluaXRcIiwhcyl0aHJvdyBuZXcgVHlwZUVycm9yKFwiRXZlbnQgbmVjZXNzYXJ5IHRvIGNyZWF0ZSBhIHN1YnNjcmlwdGlvbi5cIik7dGhpcy5ldmVudD1zLFwibnVtYmVyXCIhPXR5cGVvZiByLmV4cGlyZXM/KHQubG9nZ2VyLndhcm4oXCJleHBpcmVzIG11c3QgYmUgYSBudW1iZXIuIFVzaW5nIGRlZmF1bHQgb2YgMzYwMC5cIiksdGhpcy5leHBpcmVzPTM2MDApOnRoaXMuZXhwaXJlcz1yLmV4cGlyZXMsdGhpcy5yZXF1ZXN0ZWRFeHBpcmVzPXRoaXMuZXhwaXJlcyxyLmV4dHJhSGVhZGVycy5wdXNoKFwiRXZlbnQ6IFwiK3RoaXMuZXZlbnQpLHIuZXh0cmFIZWFkZXJzLnB1c2goXCJFeHBpcmVzOiBcIit0aGlzLmV4cGlyZXMpLHIuYm9keSYmKHRoaXMuYm9keT1yLmJvZHkpLHRoaXMuY29udGFjdD10LmNvbnRhY3QudG9TdHJpbmcoKSxyLmV4dHJhSGVhZGVycy5wdXNoKFwiQ29udGFjdDogXCIrdGhpcy5jb250YWN0KSxyLmV4dHJhSGVhZGVycy5wdXNoKFwiQWxsb3c6IFwiK2UuVUEuQy5BTExPV0VEX01FVEhPRFMudG9TdHJpbmcoKSksZS5VdGlscy5hdWdtZW50KHRoaXMsZS5DbGllbnRDb250ZXh0LFt0LGUuQy5TVUJTQ1JJQkUsaSxyXSksdGhpcy5sb2dnZXI9dC5nZXRMb2dnZXIoXCJzaXAuc3Vic2NyaXB0aW9uXCIpLHRoaXMuZGlhbG9nPW51bGwsdGhpcy50aW1lcnM9e046bnVsbCxzdWJfZHVyYXRpb246bnVsbH0sdGhpcy5lcnJvckNvZGVzPVs0MDQsNDA1LDQxMCw0MTYsNDgwLDQ4MSw0ODIsNDgzLDQ4NCw0ODUsNDg5LDUwMSw2MDRdfSxlLlN1YnNjcmlwdGlvbi5wcm90b3R5cGU9e3N1YnNjcmliZTpmdW5jdGlvbigpe3JldHVyblwiYWN0aXZlXCI9PT10aGlzLnN0YXRlPyh0aGlzLnJlZnJlc2goKSx0aGlzKTpcIm5vdGlmeV93YWl0XCI9PT10aGlzLnN0YXRlP3RoaXM6KGUuVGltZXJzLmNsZWFyVGltZW91dCh0aGlzLnRpbWVycy5zdWJfZHVyYXRpb24pLGUuVGltZXJzLmNsZWFyVGltZW91dCh0aGlzLnRpbWVycy5OKSx0aGlzLnRpbWVycy5OPWUuVGltZXJzLnNldFRpbWVvdXQodGhpcy50aW1lcl9maXJlLmJpbmQodGhpcyksZS5UaW1lcnMuVElNRVJfTiksdGhpcy51YS5lYXJseVN1YnNjcmlwdGlvbnNbdGhpcy5yZXF1ZXN0LmNhbGxfaWQrdGhpcy5yZXF1ZXN0LmZyb20ucGFyYW1ldGVycy50YWcrdGhpcy5ldmVudF09dGhpcyx0aGlzLnNlbmQoKSx0aGlzLnN0YXRlPVwibm90aWZ5X3dhaXRcIix0aGlzKX0scmVmcmVzaDpmdW5jdGlvbigpe1widGVybWluYXRlZFwiIT09dGhpcy5zdGF0ZSYmXCJwZW5kaW5nXCIhPT10aGlzLnN0YXRlJiZcIm5vdGlmeV93YWl0XCIhPT10aGlzLnN0YXRlJiZ0aGlzLmRpYWxvZy5zZW5kUmVxdWVzdCh0aGlzLGUuQy5TVUJTQ1JJQkUse2V4dHJhSGVhZGVyczp0aGlzLmV4dHJhSGVhZGVycyxib2R5OnRoaXMuYm9keX0pfSxyZWNlaXZlUmVzcG9uc2U6ZnVuY3Rpb24odCl7dmFyIGkscz1lLlV0aWxzLmdldFJlYXNvblBocmFzZSh0LnN0YXR1c19jb2RlKTtcIm5vdGlmeV93YWl0XCI9PT10aGlzLnN0YXRlJiZ0LnN0YXR1c19jb2RlPj0zMDB8fFwibm90aWZ5X3dhaXRcIiE9PXRoaXMuc3RhdGUmJi0xIT09dGhpcy5lcnJvckNvZGVzLmluZGV4T2YodC5zdGF0dXNfY29kZSk/dGhpcy5mYWlsZWQodCxudWxsKTovXjJbMC05XXsyfSQvLnRlc3QodC5zdGF0dXNfY29kZSk/KHRoaXMuZW1pdChcImFjY2VwdGVkXCIsdCxzKSwoaT10LmdldEhlYWRlcihcIkV4cGlyZXNcIikpJiZpPD10aGlzLnJlcXVlc3RlZEV4cGlyZXM/KHRoaXMuZXhwaXJlcz1pLHRoaXMudGltZXJzLnN1Yl9kdXJhdGlvbj1lLlRpbWVycy5zZXRUaW1lb3V0KHRoaXMucmVmcmVzaC5iaW5kKHRoaXMpLDkwMCppKSk6aT8odGhpcy5sb2dnZXIud2FybihcIkV4cGlyZXMgaGVhZGVyIGluIGEgMjAwLWNsYXNzIHJlc3BvbnNlIHRvIFNVQlNDUklCRSB3aXRoIGEgaGlnaGVyIHZhbHVlIHRoYW4gdGhlIG9uZSBpbiB0aGUgcmVxdWVzdFwiKSx0aGlzLmZhaWxlZCh0LGUuQy5JTlZBTElEX0VYUElSRVNfSEVBREVSKSk6KHRoaXMubG9nZ2VyLndhcm4oXCJFeHBpcmVzIGhlYWRlciBtaXNzaW5nIGluIGEgMjAwLWNsYXNzIHJlc3BvbnNlIHRvIFNVQlNDUklCRVwiKSx0aGlzLmZhaWxlZCh0LGUuQy5FWFBJUkVTX0hFQURFUl9NSVNTSU5HKSkpOnQuc3RhdHVzQ29kZT4zMDAmJih0aGlzLmVtaXQoXCJmYWlsZWRcIix0LHMpLHRoaXMuZW1pdChcInJlamVjdGVkXCIsdCxzKSl9LHVuc3Vic2NyaWJlOmZ1bmN0aW9uKCl7dmFyIHQ9W107dGhpcy5zdGF0ZT1cInRlcm1pbmF0ZWRcIix0LnB1c2goXCJFdmVudDogXCIrdGhpcy5ldmVudCksdC5wdXNoKFwiRXhwaXJlczogMFwiKSx0LnB1c2goXCJDb250YWN0OiBcIit0aGlzLmNvbnRhY3QpLHQucHVzaChcIkFsbG93OiBcIitlLlVBLkMuQUxMT1dFRF9NRVRIT0RTLnRvU3RyaW5nKCkpLHRoaXMucmVjZWl2ZVJlc3BvbnNlPWZ1bmN0aW9uKCl7fSx0aGlzLmRpYWxvZy5zZW5kUmVxdWVzdCh0aGlzLHRoaXMubWV0aG9kLHtleHRyYUhlYWRlcnM6dCxib2R5OnRoaXMuYm9keX0pLGUuVGltZXJzLmNsZWFyVGltZW91dCh0aGlzLnRpbWVycy5zdWJfZHVyYXRpb24pLGUuVGltZXJzLmNsZWFyVGltZW91dCh0aGlzLnRpbWVycy5OKSx0aGlzLnRpbWVycy5OPWUuVGltZXJzLnNldFRpbWVvdXQodGhpcy50aW1lcl9maXJlLmJpbmQodGhpcyksZS5UaW1lcnMuVElNRVJfTil9LHRpbWVyX2ZpcmU6ZnVuY3Rpb24oKXtcInRlcm1pbmF0ZWRcIj09PXRoaXMuc3RhdGU/KHRoaXMudGVybWluYXRlRGlhbG9nKCksZS5UaW1lcnMuY2xlYXJUaW1lb3V0KHRoaXMudGltZXJzLk4pLGUuVGltZXJzLmNsZWFyVGltZW91dCh0aGlzLnRpbWVycy5zdWJfZHVyYXRpb24pLGRlbGV0ZSB0aGlzLnVhLnN1YnNjcmlwdGlvbnNbdGhpcy5pZF0pOlwibm90aWZ5X3dhaXRcIj09PXRoaXMuc3RhdGV8fFwicGVuZGluZ1wiPT09dGhpcy5zdGF0ZT90aGlzLmNsb3NlKCk6dGhpcy5yZWZyZXNoKCl9LGNsb3NlOmZ1bmN0aW9uKCl7XCJub3RpZnlfd2FpdFwiPT09dGhpcy5zdGF0ZT8odGhpcy5zdGF0ZT1cInRlcm1pbmF0ZWRcIixlLlRpbWVycy5jbGVhclRpbWVvdXQodGhpcy50aW1lcnMuTiksZS5UaW1lcnMuY2xlYXJUaW1lb3V0KHRoaXMudGltZXJzLnN1Yl9kdXJhdGlvbiksdGhpcy5yZWNlaXZlUmVzcG9uc2U9ZnVuY3Rpb24oKXt9LGRlbGV0ZSB0aGlzLnVhLmVhcmx5U3Vic2NyaXB0aW9uc1t0aGlzLnJlcXVlc3QuY2FsbF9pZCt0aGlzLnJlcXVlc3QuZnJvbS5wYXJhbWV0ZXJzLnRhZyt0aGlzLmV2ZW50XSk6XCJ0ZXJtaW5hdGVkXCIhPT10aGlzLnN0YXRlJiZ0aGlzLnVuc3Vic2NyaWJlKCl9LGNyZWF0ZUNvbmZpcm1lZERpYWxvZzpmdW5jdGlvbih0LGkpe3ZhciBzO3JldHVybiB0aGlzLnRlcm1pbmF0ZURpYWxvZygpLHM9bmV3IGUuRGlhbG9nKHRoaXMsdCxpKSxzLmludml0ZV9zZXFudW09dGhpcy5yZXF1ZXN0LmNzZXEscy5sb2NhbF9zZXFudW09dGhpcy5yZXF1ZXN0LmNzZXEsIXMuZXJyb3ImJih0aGlzLmRpYWxvZz1zLCEwKX0sdGVybWluYXRlRGlhbG9nOmZ1bmN0aW9uKCl7dGhpcy5kaWFsb2cmJihkZWxldGUgdGhpcy51YS5zdWJzY3JpcHRpb25zW3RoaXMuaWRdLHRoaXMuZGlhbG9nLnRlcm1pbmF0ZSgpLGRlbGV0ZSB0aGlzLmRpYWxvZyl9LHJlY2VpdmVSZXF1ZXN0OmZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGkoKXtzLmV4cGlyZXMmJihlLlRpbWVycy5jbGVhclRpbWVvdXQoci50aW1lcnMuc3ViX2R1cmF0aW9uKSxzLmV4cGlyZXM9TWF0aC5taW4oci5leHBpcmVzLE1hdGgubWF4KHMuZXhwaXJlcywwKSksci50aW1lcnMuc3ViX2R1cmF0aW9uPWUuVGltZXJzLnNldFRpbWVvdXQoci5yZWZyZXNoLmJpbmQociksOTAwKnMuZXhwaXJlcykpfXZhciBzLHI9dGhpcztpZih0aGlzLm1hdGNoRXZlbnQodCkpaWYodGhpcy5kaWFsb2d8fHRoaXMuY3JlYXRlQ29uZmlybWVkRGlhbG9nKHQsXCJVQVNcIikmJih0aGlzLmlkPXRoaXMuZGlhbG9nLmlkLnRvU3RyaW5nKCksZGVsZXRlIHRoaXMudWEuZWFybHlTdWJzY3JpcHRpb25zW3RoaXMucmVxdWVzdC5jYWxsX2lkK3RoaXMucmVxdWVzdC5mcm9tLnBhcmFtZXRlcnMudGFnK3RoaXMuZXZlbnRdLHRoaXMudWEuc3Vic2NyaXB0aW9uc1t0aGlzLmlkXT10aGlzKSxzPXQucGFyc2VIZWFkZXIoXCJTdWJzY3JpcHRpb24tU3RhdGVcIiksdC5yZXBseSgyMDAsZS5DLlJFQVNPTl8yMDApLGUuVGltZXJzLmNsZWFyVGltZW91dCh0aGlzLnRpbWVycy5OKSx0aGlzLmVtaXQoXCJub3RpZnlcIix7cmVxdWVzdDp0fSksXCJ0ZXJtaW5hdGVkXCIhPT10aGlzLnN0YXRlKXN3aXRjaChzLnN0YXRlKXtjYXNlXCJhY3RpdmVcIjp0aGlzLnN0YXRlPVwiYWN0aXZlXCIsaSgpO2JyZWFrO2Nhc2VcInBlbmRpbmdcIjpcIm5vdGlmeV93YWl0XCI9PT10aGlzLnN0YXRlJiZpKCksdGhpcy5zdGF0ZT1cInBlbmRpbmdcIjticmVhaztjYXNlXCJ0ZXJtaW5hdGVkXCI6aWYoZS5UaW1lcnMuY2xlYXJUaW1lb3V0KHRoaXMudGltZXJzLnN1Yl9kdXJhdGlvbikscy5yZWFzb24pc3dpdGNoKHRoaXMubG9nZ2VyLmxvZyhcInRlcm1pbmF0aW5nIHN1YnNjcmlwdGlvbiB3aXRoIHJlYXNvbiBcIitzLnJlYXNvbikscy5yZWFzb24pe2Nhc2VcImRlYWN0aXZhdGVkXCI6Y2FzZVwidGltZW91dFwiOnJldHVybiB2b2lkIHRoaXMuc3Vic2NyaWJlKCk7Y2FzZVwicHJvYmF0aW9uXCI6Y2FzZVwiZ2l2ZXVwXCI6cmV0dXJuIHZvaWQocy5wYXJhbXMmJnMucGFyYW1zW1wicmV0cnktYWZ0ZXJcIl0/dGhpcy50aW1lcnMuc3ViX2R1cmF0aW9uPWUuVGltZXJzLnNldFRpbWVvdXQoci5zdWJzY3JpYmUuYmluZChyKSxzLnBhcmFtc1tcInJldHJ5LWFmdGVyXCJdKTp0aGlzLnN1YnNjcmliZSgpKX10aGlzLmNsb3NlKCl9ZWxzZVwidGVybWluYXRlZFwiPT09cy5zdGF0ZSYmKHRoaXMudGVybWluYXRlRGlhbG9nKCksZS5UaW1lcnMuY2xlYXJUaW1lb3V0KHRoaXMudGltZXJzLk4pLGUuVGltZXJzLmNsZWFyVGltZW91dCh0aGlzLnRpbWVycy5zdWJfZHVyYXRpb24pLGRlbGV0ZSB0aGlzLnVhLnN1YnNjcmlwdGlvbnNbdGhpcy5pZF0pO2Vsc2UgdC5yZXBseSg0ODkpfSxmYWlsZWQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5jbG9zZSgpLHRoaXMuZW1pdChcImZhaWxlZFwiLGUsdCksdGhpcy5lbWl0KFwicmVqZWN0ZWRcIixlLHQpLHRoaXN9LG9uRGlhbG9nRXJyb3I6ZnVuY3Rpb24odCl7dGhpcy5mYWlsZWQodCxlLkMuY2F1c2VzLkRJQUxPR19FUlJPUil9LG1hdGNoRXZlbnQ6ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIGUuaGFzSGVhZGVyKFwiRXZlbnRcIik/ZS5oYXNIZWFkZXIoXCJTdWJzY3JpcHRpb24tU3RhdGVcIik/KHQ9ZS5wYXJzZUhlYWRlcihcImV2ZW50XCIpLmV2ZW50LHRoaXMuZXZlbnQ9PT10fHwodGhpcy5sb2dnZXIud2FybihcImV2ZW50IG1hdGNoIGZhaWxlZFwiKSxlLnJlcGx5KDQ4MSxcIkV2ZW50IE1hdGNoIEZhaWxlZFwiKSwhMSkpOih0aGlzLmxvZ2dlci53YXJuKFwibWlzc2luZyBTdWJzY3JpcHRpb24tU3RhdGUgaGVhZGVyXCIpLCExKToodGhpcy5sb2dnZXIud2FybihcIm1pc3NpbmcgRXZlbnQgaGVhZGVyXCIpLCExKX19fX0sZnVuY3Rpb24oZSx0LGkpe1widXNlIHN0cmljdFwiOyhmdW5jdGlvbih0KXt2YXIgcz1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlwic3ltYm9sXCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24oZSl7cmV0dXJuIHR5cGVvZiBlfTpmdW5jdGlvbihlKXtyZXR1cm4gZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZlLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZlIT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiBlfTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSxyKXtmdW5jdGlvbiBuKHQpe2lmKHQgaW5zdGFuY2VvZiBGdW5jdGlvbilyZXR1cm4gdC5pbml0aWFsaXplfHwodC5pbml0aWFsaXplPWZ1bmN0aW9uKCl7cmV0dXJuIGUuVXRpbHMuUHJvbWlzZS5yZXNvbHZlKCl9KSx0fXZhciBvLGE9e1NUQVRVU19JTklUOjAsU1RBVFVTX1NUQVJUSU5HOjEsU1RBVFVTX1JFQURZOjIsU1RBVFVTX1VTRVJfQ0xPU0VEOjMsU1RBVFVTX05PVF9SRUFEWTo0LENPTkZJR1VSQVRJT05fRVJST1I6MSxORVRXT1JLX0VSUk9SOjIsQUxMT1dFRF9NRVRIT0RTOltcIkFDS1wiLFwiQ0FOQ0VMXCIsXCJJTlZJVEVcIixcIk1FU1NBR0VcIixcIkJZRVwiLFwiT1BUSU9OU1wiLFwiSU5GT1wiLFwiTk9USUZZXCIsXCJSRUZFUlwiXSxBQ0NFUFRFRF9CT0RZX1RZUEVTOltcImFwcGxpY2F0aW9uL3NkcFwiLFwiYXBwbGljYXRpb24vZHRtZi1yZWxheVwiXSxNQVhfRk9SV0FSRFM6NzAsVEFHX0xFTkdUSDoxMH07KChvPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGkoZSl7cmV0dXJuIHMuZW1pdC5iaW5kKHMsZSl9dmFyIHM9dGhpczthLkFDQ0VQVEVEX0JPRFlfVFlQRVM9YS5BQ0NFUFRFRF9CT0RZX1RZUEVTLnRvU3RyaW5nKCksdGhpcy5sb2c9bmV3IGUuTG9nZ2VyRmFjdG9yeSx0aGlzLmxvZ2dlcj10aGlzLmdldExvZ2dlcihcInNpcC51YVwiKSx0aGlzLmNhY2hlPXtjcmVkZW50aWFsczp7fX0sdGhpcy5jb25maWd1cmF0aW9uPXt9LHRoaXMuZGlhbG9ncz17fSx0aGlzLmFwcGxpY2FudHM9e30sdGhpcy5kYXRhPXt9LHRoaXMuc2Vzc2lvbnM9e30sdGhpcy5zdWJzY3JpcHRpb25zPXt9LHRoaXMuZWFybHlTdWJzY3JpcHRpb25zPXt9LHRoaXMudHJhbnNwb3J0PW51bGwsdGhpcy5jb250YWN0PW51bGwsdGhpcy5zdGF0dXM9YS5TVEFUVVNfSU5JVCx0aGlzLmVycm9yPW51bGwsdGhpcy50cmFuc2FjdGlvbnM9e25pc3Q6e30sbmljdDp7fSxpc3Q6e30saWN0Ont9fSx0aGlzLnRyYW5zcG9ydFJlY292ZXJBdHRlbXB0cz0wLHRoaXMudHJhbnNwb3J0UmVjb3ZlcnlUaW1lcj1udWxsLE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMse3RyYW5zYWN0aW9uc0NvdW50OntnZXQ6ZnVuY3Rpb24oKXt2YXIgZSx0PVtcIm5pc3RcIixcIm5pY3RcIixcImlzdFwiLFwiaWN0XCJdLGk9MDtmb3IoZSBpbiB0KWkrPU9iamVjdC5rZXlzKHRoaXMudHJhbnNhY3Rpb25zW3RbZV1dKS5sZW5ndGg7cmV0dXJuIGl9fSxuaWN0VHJhbnNhY3Rpb25zQ291bnQ6e2dldDpmdW5jdGlvbigpe3JldHVybiBPYmplY3Qua2V5cyh0aGlzLnRyYW5zYWN0aW9ucy5uaWN0KS5sZW5ndGh9fSxuaXN0VHJhbnNhY3Rpb25zQ291bnQ6e2dldDpmdW5jdGlvbigpe3JldHVybiBPYmplY3Qua2V5cyh0aGlzLnRyYW5zYWN0aW9ucy5uaXN0KS5sZW5ndGh9fSxpY3RUcmFuc2FjdGlvbnNDb3VudDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIE9iamVjdC5rZXlzKHRoaXMudHJhbnNhY3Rpb25zLmljdCkubGVuZ3RofX0saXN0VHJhbnNhY3Rpb25zQ291bnQ6e2dldDpmdW5jdGlvbigpe3JldHVybiBPYmplY3Qua2V5cyh0aGlzLnRyYW5zYWN0aW9ucy5pc3QpLmxlbmd0aH19fSksdm9pZCAwPT09dD90PXt9OihcInN0cmluZ1wiPT10eXBlb2YgdHx8dCBpbnN0YW5jZW9mIFN0cmluZykmJih0PXt1cmk6dH0pLHQubG9nJiYodC5sb2cuaGFzT3duUHJvcGVydHkoXCJidWlsdGluRW5hYmxlZFwiKSYmKHRoaXMubG9nLmJ1aWx0aW5FbmFibGVkPXQubG9nLmJ1aWx0aW5FbmFibGVkKSx0LmxvZy5oYXNPd25Qcm9wZXJ0eShcImxldmVsXCIpJiYodGhpcy5sb2cubGV2ZWw9dC5sb2cubGV2ZWwpLHQubG9nLmhhc093blByb3BlcnR5KFwiY29ubmVjdG9yXCIpJiYodGhpcy5sb2cuY29ubmVjdG9yPXQubG9nLmNvbm5lY3RvcikpO3RyeXt0aGlzLmxvYWRDb25maWcodCl9Y2F0Y2goZSl7dGhyb3cgdGhpcy5zdGF0dXM9YS5TVEFUVVNfTk9UX1JFQURZLHRoaXMuZXJyb3I9YS5DT05GSUdVUkFUSU9OX0VSUk9SLGV9dGhpcy5yZWdpc3RlckNvbnRleHQ9bmV3IGUuUmVnaXN0ZXJDb250ZXh0KHRoaXMpLHRoaXMucmVnaXN0ZXJDb250ZXh0Lm9uKFwiZmFpbGVkXCIsaShcInJlZ2lzdHJhdGlvbkZhaWxlZFwiKSksdGhpcy5yZWdpc3RlckNvbnRleHQub24oXCJyZWdpc3RlcmVkXCIsaShcInJlZ2lzdGVyZWRcIikpLHRoaXMucmVnaXN0ZXJDb250ZXh0Lm9uKFwidW5yZWdpc3RlcmVkXCIsaShcInVucmVnaXN0ZXJlZFwiKSksdGhpcy5jb25maWd1cmF0aW9uLmF1dG9zdGFydCYmdGhpcy5zdGFydCgpfSkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZS5FdmVudEVtaXR0ZXIucHJvdG90eXBlKSkucmVnaXN0ZXI9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuY29uZmlndXJhdGlvbi5yZWdpc3Rlcj0hMCx0aGlzLnJlZ2lzdGVyQ29udGV4dC5yZWdpc3RlcihlKSx0aGlzfSxvLnByb3RvdHlwZS51bnJlZ2lzdGVyPWZ1bmN0aW9uKGUpe3RoaXMuY29uZmlndXJhdGlvbi5yZWdpc3Rlcj0hMTt2YXIgdD10aGlzLnJlZ2lzdGVyQ29udGV4dDtyZXR1cm4gdGhpcy5hZnRlckNvbm5lY3RlZCh0LnVucmVnaXN0ZXIuYmluZCh0LGUpKSx0aGlzfSxvLnByb3RvdHlwZS5pc1JlZ2lzdGVyZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZWdpc3RlckNvbnRleHQucmVnaXN0ZXJlZH0sby5wcm90b3R5cGUuaXNDb25uZWN0ZWQ9ZnVuY3Rpb24oKXtyZXR1cm4hIXRoaXMudHJhbnNwb3J0JiZ0aGlzLnRyYW5zcG9ydC5jb25uZWN0ZWR9LG8ucHJvdG90eXBlLmFmdGVyQ29ubmVjdGVkPWZ1bmN0aW9uKGUpe3RoaXMuaXNDb25uZWN0ZWQoKT9lKCk6dGhpcy5vbmNlKFwiY29ubmVjdGVkXCIsZSl9LG8ucHJvdG90eXBlLndhaXRGb3JDb25uZWN0ZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGUuVXRpbHMuUHJvbWlzZShmdW5jdGlvbihlKXt0aGlzLmFmdGVyQ29ubmVjdGVkKGUpfS5iaW5kKHRoaXMpKX0sby5wcm90b3R5cGUuaW52aXRlPWZ1bmN0aW9uKHQsaSxzKXt2YXIgcj1uZXcgZS5JbnZpdGVDbGllbnRDb250ZXh0KHRoaXMsdCxpLHMpO3JldHVybiB0aGlzLndhaXRGb3JDb25uZWN0ZWQoKS50aGVuKGZ1bmN0aW9uKCl7ci5pbnZpdGUoKSx0aGlzLmVtaXQoXCJpbnZpdGVTZW50XCIscil9LmJpbmQodGhpcykpLHJ9LG8ucHJvdG90eXBlLnN1YnNjcmliZT1mdW5jdGlvbih0LGkscyl7dmFyIHI9bmV3IGUuU3Vic2NyaXB0aW9uKHRoaXMsdCxpLHMpO3JldHVybiB0aGlzLmFmdGVyQ29ubmVjdGVkKHIuc3Vic2NyaWJlLmJpbmQocikpLHJ9LG8ucHJvdG90eXBlLm1lc3NhZ2U9ZnVuY3Rpb24odCxpLHMpe2lmKHZvaWQgMD09PWkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIk5vdCBlbm91Z2ggYXJndW1lbnRzXCIpO3JldHVybihzPU9iamVjdC5jcmVhdGUoc3x8T2JqZWN0LnByb3RvdHlwZSkpLmNvbnRlbnRUeXBlfHwocy5jb250ZW50VHlwZT1cInRleHQvcGxhaW5cIikscy5ib2R5PWksdGhpcy5yZXF1ZXN0KGUuQy5NRVNTQUdFLHQscyl9LG8ucHJvdG90eXBlLnJlcXVlc3Q9ZnVuY3Rpb24odCxpLHMpe3ZhciByPW5ldyBlLkNsaWVudENvbnRleHQodGhpcyx0LGkscyk7cmV0dXJuIHRoaXMuYWZ0ZXJDb25uZWN0ZWQoci5zZW5kLmJpbmQocikpLHJ9LG8ucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24oKXtmdW5jdGlvbiBpKCl7MD09PWMubmlzdFRyYW5zYWN0aW9uc0NvdW50JiYwPT09Yy5uaWN0VHJhbnNhY3Rpb25zQ291bnQmJihjLnJlbW92ZUxpc3RlbmVyKFwidHJhbnNhY3Rpb25EZXN0cm95ZWRcIixpKSxjLnRyYW5zcG9ydC5kaXNjb25uZWN0KCkpfXZhciBzLG4sbyxjPXRoaXM7aWYodGhpcy5sb2dnZXIubG9nKFwidXNlciByZXF1ZXN0ZWQgY2xvc3VyZS4uLlwiKSx0aGlzLnN0YXR1cz09PWEuU1RBVFVTX1VTRVJfQ0xPU0VEKXJldHVybiB0aGlzLmxvZ2dlci53YXJuKFwiVUEgYWxyZWFkeSBjbG9zZWRcIiksdGhpcztlLlRpbWVycy5jbGVhclRpbWVvdXQodGhpcy50cmFuc3BvcnRSZWNvdmVyeVRpbWVyKSx0aGlzLmxvZ2dlci5sb2coXCJjbG9zaW5nIHJlZ2lzdGVyQ29udGV4dFwiKSx0aGlzLnJlZ2lzdGVyQ29udGV4dC5jbG9zZSgpO2ZvcihzIGluIHRoaXMuc2Vzc2lvbnMpdGhpcy5sb2dnZXIubG9nKFwiY2xvc2luZyBzZXNzaW9uIFwiK3MpLHRoaXMuc2Vzc2lvbnNbc10udGVybWluYXRlKCk7Zm9yKG4gaW4gdGhpcy5zdWJzY3JpcHRpb25zKXRoaXMubG9nZ2VyLmxvZyhcInVuc3Vic2NyaWJpbmcgZnJvbSBzdWJzY3JpcHRpb24gXCIrbiksdGhpcy5zdWJzY3JpcHRpb25zW25dLmNsb3NlKCk7Zm9yKG4gaW4gdGhpcy5lYXJseVN1YnNjcmlwdGlvbnMpdGhpcy5sb2dnZXIubG9nKFwidW5zdWJzY3JpYmluZyBmcm9tIGVhcmx5IHN1YnNjcmlwdGlvbiBcIituKSx0aGlzLmVhcmx5U3Vic2NyaXB0aW9uc1tuXS5jbG9zZSgpO2ZvcihvIGluIHRoaXMuYXBwbGljYW50cyl0aGlzLmFwcGxpY2FudHNbb10uY2xvc2UoKTtyZXR1cm4gdGhpcy5zdGF0dXM9YS5TVEFUVVNfVVNFUl9DTE9TRUQsMD09PXRoaXMubmlzdFRyYW5zYWN0aW9uc0NvdW50JiYwPT09dGhpcy5uaWN0VHJhbnNhY3Rpb25zQ291bnQ/dGhpcy50cmFuc3BvcnQuZGlzY29ubmVjdCgpOnRoaXMub24oXCJ0cmFuc2FjdGlvbkRlc3Ryb3llZFwiLGkpLFwiZnVuY3Rpb25cIj09dHlwZW9mIHIucmVtb3ZlRXZlbnRMaXN0ZW5lciYmKHQuY2hyb21lJiZ0LmNocm9tZS5hcHAmJnQuY2hyb21lLmFwcC5ydW50aW1lfHxyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ1bmxvYWRcIix0aGlzLmVudmlyb25MaXN0ZW5lcikpLHRoaXN9LG8ucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKCl7dmFyIGk7cmV0dXJuIHRoaXMubG9nZ2VyLmxvZyhcInVzZXIgcmVxdWVzdGVkIHN0YXJ0dXAuLi5cIiksdGhpcy5zdGF0dXM9PT1hLlNUQVRVU19JTklUPyhpPXRoaXMuZ2V0TmV4dFdzU2VydmVyKCksdGhpcy5zdGF0dXM9YS5TVEFUVVNfU1RBUlRJTkcsbmV3IGUuVHJhbnNwb3J0KHRoaXMsaSkpOnRoaXMuc3RhdHVzPT09YS5TVEFUVVNfVVNFUl9DTE9TRUQ/KHRoaXMubG9nZ2VyLmxvZyhcInJlc3VtaW5nXCIpLHRoaXMuc3RhdHVzPWEuU1RBVFVTX1JFQURZLHRoaXMudHJhbnNwb3J0LmNvbm5lY3QoKSk6dGhpcy5zdGF0dXM9PT1hLlNUQVRVU19TVEFSVElORz90aGlzLmxvZ2dlci5sb2coXCJVQSBpcyBpbiBTVEFSVElORyBzdGF0dXMsIG5vdCBvcGVuaW5nIG5ldyBjb25uZWN0aW9uXCIpOnRoaXMuc3RhdHVzPT09YS5TVEFUVVNfUkVBRFk/dGhpcy5sb2dnZXIubG9nKFwiVUEgaXMgaW4gUkVBRFkgc3RhdHVzLCBub3QgcmVzdW1pbmdcIik6dGhpcy5sb2dnZXIuZXJyb3IoXCJDb25uZWN0aW9uIGlzIGRvd24uIEF1dG8tUmVjb3Zlcnkgc3lzdGVtIGlzIHRyeWluZyB0byBjb25uZWN0XCIpLHRoaXMuY29uZmlndXJhdGlvbi5hdXRvc3RvcCYmXCJmdW5jdGlvblwiPT10eXBlb2Ygci5hZGRFdmVudExpc3RlbmVyJiYodC5jaHJvbWUmJnQuY2hyb21lLmFwcCYmdC5jaHJvbWUuYXBwLnJ1bnRpbWV8fCh0aGlzLmVudmlyb25MaXN0ZW5lcj10aGlzLnN0b3AuYmluZCh0aGlzKSxyLmFkZEV2ZW50TGlzdGVuZXIoXCJ1bmxvYWRcIix0aGlzLmVudmlyb25MaXN0ZW5lcikpKSx0aGlzfSxvLnByb3RvdHlwZS5ub3JtYWxpemVUYXJnZXQ9ZnVuY3Rpb24odCl7cmV0dXJuIGUuVXRpbHMubm9ybWFsaXplVGFyZ2V0KHQsdGhpcy5jb25maWd1cmF0aW9uLmhvc3Rwb3J0UGFyYW1zKX0sby5wcm90b3R5cGUuc2F2ZUNyZWRlbnRpYWxzPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmNhY2hlLmNyZWRlbnRpYWxzW2UucmVhbG1dPXRoaXMuY2FjaGUuY3JlZGVudGlhbHNbZS5yZWFsbV18fHt9LHRoaXMuY2FjaGUuY3JlZGVudGlhbHNbZS5yZWFsbV1bZS51cmldPWUsdGhpc30sby5wcm90b3R5cGUuZ2V0Q3JlZGVudGlhbHM9ZnVuY3Rpb24oZSl7dmFyIHQsaTtyZXR1cm4gdD1lLnJ1cmkuaG9zdCx0aGlzLmNhY2hlLmNyZWRlbnRpYWxzW3RdJiZ0aGlzLmNhY2hlLmNyZWRlbnRpYWxzW3RdW2UucnVyaV0mJigoaT10aGlzLmNhY2hlLmNyZWRlbnRpYWxzW3RdW2UucnVyaV0pLm1ldGhvZD1lLm1ldGhvZCksaX0sby5wcm90b3R5cGUuZ2V0TG9nZ2VyPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMubG9nLmdldExvZ2dlcihlLHQpfSxvLnByb3RvdHlwZS5vblRyYW5zcG9ydENsb3NlZD1mdW5jdGlvbih0KXt2YXIgaSxzLHIsbj1bXCJuaWN0XCIsXCJpY3RcIixcIm5pc3RcIixcImlzdFwiXTtmb3IodC5zZXJ2ZXIuc3RhdHVzPWUuVHJhbnNwb3J0LkMuU1RBVFVTX0RJU0NPTk5FQ1RFRCx0aGlzLmxvZ2dlci5sb2coXCJjb25uZWN0aW9uIHN0YXRlIHNldCB0byBcIitlLlRyYW5zcG9ydC5DLlNUQVRVU19ESVNDT05ORUNURUQpLHI9bi5sZW5ndGgsaT0wO2k8cjtpKyspZm9yKHMgaW4gdGhpcy50cmFuc2FjdGlvbnNbbltpXV0pdGhpcy50cmFuc2FjdGlvbnNbbltpXV1bc10ub25UcmFuc3BvcnRFcnJvcigpO3RoaXMuY29udGFjdC5wdWJfZ3J1dXx8dGhpcy5jbG9zZVNlc3Npb25zT25UcmFuc3BvcnRFcnJvcigpfSxvLnByb3RvdHlwZS5vblRyYW5zcG9ydEVycm9yPWZ1bmN0aW9uKHQpe3ZhciBpO3RoaXMubG9nZ2VyLmxvZyhcInRyYW5zcG9ydCBcIit0LnNlcnZlci53c191cmkrXCIgZmFpbGVkIHwgY29ubmVjdGlvbiBzdGF0ZSBzZXQgdG8gXCIrZS5UcmFuc3BvcnQuQy5TVEFUVVNfRVJST1IpLHQuc2VydmVyLnN0YXR1cz1lLlRyYW5zcG9ydC5DLlNUQVRVU19FUlJPUix0aGlzLmVtaXQoXCJkaXNjb25uZWN0ZWRcIix7dHJhbnNwb3J0OnR9KSx0aGlzLnN0YXR1cyE9PWEuU1RBVFVTX1VTRVJfQ0xPU0VEJiYoKGk9dGhpcy5nZXROZXh0V3NTZXJ2ZXIoKSk/bmV3IGUuVHJhbnNwb3J0KHRoaXMsaSk6KHRoaXMuY2xvc2VTZXNzaW9uc09uVHJhbnNwb3J0RXJyb3IoKSx0aGlzLmVycm9yJiZ0aGlzLmVycm9yPT09YS5ORVRXT1JLX0VSUk9SfHwodGhpcy5zdGF0dXM9YS5TVEFUVVNfTk9UX1JFQURZLHRoaXMuZXJyb3I9YS5ORVRXT1JLX0VSUk9SKSx0aGlzLnJlY292ZXJUcmFuc3BvcnQoKSkpfSxvLnByb3RvdHlwZS5vblRyYW5zcG9ydENvbm5lY3RlZD1mdW5jdGlvbih0KXt0aGlzLnRyYW5zcG9ydD10LHRoaXMudHJhbnNwb3J0UmVjb3ZlckF0dGVtcHRzPTAsdC5zZXJ2ZXIuc3RhdHVzPWUuVHJhbnNwb3J0LkMuU1RBVFVTX1JFQURZLHRoaXMubG9nZ2VyLmxvZyhcImNvbm5lY3Rpb24gc3RhdGUgc2V0IHRvIFwiK2UuVHJhbnNwb3J0LkMuU1RBVFVTX1JFQURZKSx0aGlzLnN0YXR1cyE9PWEuU1RBVFVTX1VTRVJfQ0xPU0VEJiYodGhpcy5zdGF0dXM9YS5TVEFUVVNfUkVBRFksdGhpcy5lcnJvcj1udWxsLHRoaXMuY29uZmlndXJhdGlvbi5yZWdpc3RlciYmdGhpcy5jb25maWd1cmF0aW9uLmF1dGhlbnRpY2F0aW9uRmFjdG9yeS5pbml0aWFsaXplKCkudGhlbihmdW5jdGlvbigpe3RoaXMucmVnaXN0ZXJDb250ZXh0Lm9uVHJhbnNwb3J0Q29ubmVjdGVkKCl9LmJpbmQodGhpcykpLHRoaXMuZW1pdChcImNvbm5lY3RlZFwiLHt0cmFuc3BvcnQ6dH0pKX0sby5wcm90b3R5cGUub25UcmFuc3BvcnRDb25uZWN0aW5nPWZ1bmN0aW9uKGUsdCl7dGhpcy5lbWl0KFwiY29ubmVjdGluZ1wiLHt0cmFuc3BvcnQ6ZSxhdHRlbXB0czp0fSl9LG8ucHJvdG90eXBlLm5ld1RyYW5zYWN0aW9uPWZ1bmN0aW9uKGUpe3RoaXMudHJhbnNhY3Rpb25zW2UudHlwZV1bZS5pZF09ZSx0aGlzLmVtaXQoXCJuZXdUcmFuc2FjdGlvblwiLHt0cmFuc2FjdGlvbjplfSl9LG8ucHJvdG90eXBlLmRlc3Ryb3lUcmFuc2FjdGlvbj1mdW5jdGlvbihlKXtkZWxldGUgdGhpcy50cmFuc2FjdGlvbnNbZS50eXBlXVtlLmlkXSx0aGlzLmVtaXQoXCJ0cmFuc2FjdGlvbkRlc3Ryb3llZFwiLHt0cmFuc2FjdGlvbjplfSl9LG8ucHJvdG90eXBlLnJlY2VpdmVSZXF1ZXN0PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGkoZSl7cmV0dXJuIGUmJmUudXNlcj09PXQucnVyaS51c2VyfXZhciBzLHIsbixvLGMsaCx1PXQubWV0aG9kO2lmKCEoaSh0aGlzLmNvbmZpZ3VyYXRpb24udXJpKXx8aSh0aGlzLmNvbnRhY3QudXJpKXx8aSh0aGlzLmNvbnRhY3QucHViX2dydXUpfHxpKHRoaXMuY29udGFjdC50ZW1wX2dydXUpKSlyZXR1cm4gdGhpcy5sb2dnZXIud2FybihcIlJlcXVlc3QtVVJJIGRvZXMgbm90IHBvaW50IHRvIHVzXCIpLHZvaWQodC5tZXRob2QhPT1lLkMuQUNLJiZ0LnJlcGx5X3NsKDQwNCkpO2lmKHQucnVyaS5zY2hlbWUhPT1lLkMuU0lQUyl7aWYoIWUuVHJhbnNhY3Rpb25zLmNoZWNrVHJhbnNhY3Rpb24odGhpcyx0KSlpZih1PT09ZS5DLk9QVElPTlM/KG5ldyBlLlRyYW5zYWN0aW9ucy5Ob25JbnZpdGVTZXJ2ZXJUcmFuc2FjdGlvbih0LHRoaXMpLHQucmVwbHkoMjAwLG51bGwsW1wiQWxsb3c6IFwiK2UuVUEuQy5BTExPV0VEX01FVEhPRFMudG9TdHJpbmcoKSxcIkFjY2VwdDogXCIrYS5BQ0NFUFRFRF9CT0RZX1RZUEVTXSkpOnU9PT1lLkMuTUVTU0FHRT8oKG49bmV3IGUuU2VydmVyQ29udGV4dCh0aGlzLHQpKS5ib2R5PXQuYm9keSxuLmNvbnRlbnRfdHlwZT10LmdldEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiKXx8XCJ0ZXh0L3BsYWluXCIsdC5yZXBseSgyMDAsbnVsbCksdGhpcy5lbWl0KFwibWVzc2FnZVwiLG4pKTp1IT09ZS5DLklOVklURSYmdSE9PWUuQy5BQ0smJm5ldyBlLlNlcnZlckNvbnRleHQodGhpcyx0KSx0LnRvX3RhZykocz10aGlzLmZpbmREaWFsb2codCkpPyh1PT09ZS5DLklOVklURSYmbmV3IGUuVHJhbnNhY3Rpb25zLkludml0ZVNlcnZlclRyYW5zYWN0aW9uKHQsdGhpcykscy5yZWNlaXZlUmVxdWVzdCh0KSk6dT09PWUuQy5OT1RJRlk/KHI9dGhpcy5maW5kU2Vzc2lvbih0KSxvPXRoaXMuZmluZEVhcmx5U3Vic2NyaXB0aW9uKHQpLHI/ci5yZWNlaXZlUmVxdWVzdCh0KTpvP28ucmVjZWl2ZVJlcXVlc3QodCk6KHRoaXMubG9nZ2VyLndhcm4oXCJyZWNlaXZlZCBOT1RJRlkgcmVxdWVzdCBmb3IgYSBub24gZXhpc3RlbnQgc2Vzc2lvbiBvciBzdWJzY3JpcHRpb25cIiksdC5yZXBseSg0ODEsXCJTdWJzY3JpcHRpb24gZG9lcyBub3QgZXhpc3RcIikpKTp1IT09ZS5DLkFDSyYmdC5yZXBseSg0ODEpO2Vsc2Ugc3dpdGNoKHUpe2Nhc2UgZS5DLklOVklURTppZihjPXRoaXMuY29uZmlndXJhdGlvbi5yZXBsYWNlcyE9PWUuQy5zdXBwb3J0ZWQuVU5TVVBQT1JURUQmJnQucGFyc2VIZWFkZXIoXCJyZXBsYWNlc1wiKSl7aWYoIShoPXRoaXMuZGlhbG9nc1tjLmNhbGxfaWQrYy5yZXBsYWNlc190b190YWcrYy5yZXBsYWNlc19mcm9tX3RhZ10pKXJldHVybiB2b2lkIHQucmVwbHlfc2woNDgxLG51bGwpO2lmKGgub3duZXIuc3RhdHVzPT09ZS5TZXNzaW9uLkMuU1RBVFVTX1RFUk1JTkFURUQpcmV0dXJuIHZvaWQgdC5yZXBseV9zbCg2MDMsbnVsbCk7aWYoaC5zdGF0ZT09PWUuRGlhbG9nLkMuU1RBVFVTX0NPTkZJUk1FRCYmYy5lYXJseV9vbmx5KXJldHVybiB2b2lkIHQucmVwbHlfc2woNDg2LG51bGwpfShyPW5ldyBlLkludml0ZVNlcnZlckNvbnRleHQodGhpcyx0KSkucmVwbGFjZWU9aCYmaC5vd25lcix0aGlzLmVtaXQoXCJpbnZpdGVcIixyKTticmVhaztjYXNlIGUuQy5CWUU6dC5yZXBseSg0ODEpO2JyZWFrO2Nhc2UgZS5DLkNBTkNFTDoocj10aGlzLmZpbmRTZXNzaW9uKHQpKT9yLnJlY2VpdmVSZXF1ZXN0KHQpOnRoaXMubG9nZ2VyLndhcm4oXCJyZWNlaXZlZCBDQU5DRUwgcmVxdWVzdCBmb3IgYSBub24gZXhpc3RlbnQgc2Vzc2lvblwiKTticmVhaztjYXNlIGUuQy5BQ0s6YnJlYWs7Y2FzZSBlLkMuTk9USUZZOnRoaXMuY29uZmlndXJhdGlvbi5hbGxvd0xlZ2FjeU5vdGlmaWNhdGlvbnMmJnRoaXMubGlzdGVuZXJzKFwibm90aWZ5XCIpLmxlbmd0aD4wPyh0LnJlcGx5KDIwMCxudWxsKSx0aGlzLmVtaXQoXCJub3RpZnlcIix7cmVxdWVzdDp0fSkpOnQucmVwbHkoNDgxLFwiU3Vic2NyaXB0aW9uIGRvZXMgbm90IGV4aXN0XCIpO2JyZWFrO2Nhc2UgZS5DLlJFRkVSOmlmKHRoaXMubG9nZ2VyLmxvZyhcIlJlY2VpdmVkIGFuIG91dCBvZiBkaWFsb2cgcmVmZXJcIiksdGhpcy5jb25maWd1cmF0aW9uLmFsbG93T3V0T2ZEaWFsb2dSZWZlcnMpe3RoaXMubG9nZ2VyLmxvZyhcIkFsbG93IG91dCBvZiBkaWFsb2cgcmVmZXJzIGlzIGVuYWJsZWQgb24gdGhlIFVBXCIpO3ZhciBsPW5ldyBlLlJlZmVyU2VydmVyQ29udGV4dCh0aGlzLHQpO3RoaXMubGlzdGVuZXJzKFwib3V0T2ZEaWFsb2dSZWZlclJlcXVlc3RlZFwiKS5sZW5ndGg/dGhpcy5lbWl0KFwib3V0T2ZEaWFsb2dSZWZlclJlcXVlc3RlZFwiLGwpOih0aGlzLmxvZ2dlci5sb2coXCJObyBvdXRPZkRpYWxvZ1JlZmVyUmVxdWVzdCBsaXN0ZW5lcnMsIGF1dG9tYXRpY2FsbHkgYWNjZXB0aW5nIGFuZCBmb2xsb3dpbmcgdGhlIG91dCBvZiBkaWFsb2cgcmVmZXJcIiksbC5hY2NlcHQoe2ZvbGxvd1JlZmVyOiEwfSkpO2JyZWFrfXQucmVwbHkoNDA1KTticmVhaztkZWZhdWx0OnQucmVwbHkoNDA1KX19ZWxzZSB0LnJlcGx5X3NsKDQxNil9LG8ucHJvdG90eXBlLmZpbmRTZXNzaW9uPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnNlc3Npb25zW2UuY2FsbF9pZCtlLmZyb21fdGFnXXx8dGhpcy5zZXNzaW9uc1tlLmNhbGxfaWQrZS50b190YWddfHxudWxsfSxvLnByb3RvdHlwZS5maW5kRGlhbG9nPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmRpYWxvZ3NbZS5jYWxsX2lkK2UuZnJvbV90YWcrZS50b190YWddfHx0aGlzLmRpYWxvZ3NbZS5jYWxsX2lkK2UudG9fdGFnK2UuZnJvbV90YWddfHxudWxsfSxvLnByb3RvdHlwZS5maW5kRWFybHlTdWJzY3JpcHRpb249ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZWFybHlTdWJzY3JpcHRpb25zW2UuY2FsbF9pZCtlLnRvX3RhZytlLmdldEhlYWRlcihcImV2ZW50XCIpXXx8bnVsbH0sby5wcm90b3R5cGUuZ2V0TmV4dFdzU2VydmVyPWZ1bmN0aW9uKCl7dmFyIHQsaSxzLHI9W107Zm9yKGk9dGhpcy5jb25maWd1cmF0aW9uLndzU2VydmVycy5sZW5ndGgsdD0wO3Q8aTt0KyspKHM9dGhpcy5jb25maWd1cmF0aW9uLndzU2VydmVyc1t0XSkuc3RhdHVzIT09ZS5UcmFuc3BvcnQuQy5TVEFUVVNfRVJST1ImJigwPT09ci5sZW5ndGg/ci5wdXNoKHMpOnMud2VpZ2h0PnJbMF0ud2VpZ2h0P3I9W3NdOnMud2VpZ2h0PT09clswXS53ZWlnaHQmJnIucHVzaChzKSk7cmV0dXJuIHQ9TWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKnIubGVuZ3RoKSxyW3RdfSxvLnByb3RvdHlwZS5jbG9zZVNlc3Npb25zT25UcmFuc3BvcnRFcnJvcj1mdW5jdGlvbigpe3ZhciBlO2ZvcihlIGluIHRoaXMuc2Vzc2lvbnMpdGhpcy5zZXNzaW9uc1tlXS5vblRyYW5zcG9ydEVycm9yKCk7dGhpcy5yZWdpc3RlckNvbnRleHQub25UcmFuc3BvcnRDbG9zZWQoKX0sby5wcm90b3R5cGUucmVjb3ZlclRyYW5zcG9ydD1mdW5jdGlvbih0KXt2YXIgaSxzLHIsbixvO2ZvcihuPSh0PXR8fHRoaXMpLnRyYW5zcG9ydFJlY292ZXJBdHRlbXB0cyxzPXQuY29uZmlndXJhdGlvbi53c1NlcnZlcnMubGVuZ3RoLGk9MDtpPHM7aSsrKXQuY29uZmlndXJhdGlvbi53c1NlcnZlcnNbaV0uc3RhdHVzPTA7bz10LmdldE5leHRXc1NlcnZlcigpLChyPU1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSpNYXRoLnBvdygyLG4pKzEpKnQuY29uZmlndXJhdGlvbi5jb25uZWN0aW9uUmVjb3ZlcnlNaW5JbnRlcnZhbCk+dC5jb25maWd1cmF0aW9uLmNvbm5lY3Rpb25SZWNvdmVyeU1heEludGVydmFsJiYodGhpcy5sb2dnZXIubG9nKFwidGltZSBmb3IgbmV4dCBjb25uZWN0aW9uIGF0dGVtcHQgZXhjZWVkcyBjb25uZWN0aW9uUmVjb3ZlcnlNYXhJbnRlcnZhbCwgcmVzZXR0aW5nIGNvdW50ZXJcIikscj10LmNvbmZpZ3VyYXRpb24uY29ubmVjdGlvblJlY292ZXJ5TWluSW50ZXJ2YWwsbj0wKSx0aGlzLmxvZ2dlci5sb2coXCJuZXh0IGNvbm5lY3Rpb24gYXR0ZW1wdCBpbiBcIityK1wiIHNlY29uZHNcIiksdGhpcy50cmFuc3BvcnRSZWNvdmVyeVRpbWVyPWUuVGltZXJzLnNldFRpbWVvdXQoZnVuY3Rpb24oKXt0LnRyYW5zcG9ydFJlY292ZXJBdHRlbXB0cz1uKzEsbmV3IGUuVHJhbnNwb3J0KHQsbyl9LDFlMypyKX0sby5wcm90b3R5cGUubG9hZENvbmZpZz1mdW5jdGlvbih0KXtmdW5jdGlvbiBzKGUsaSl7dmFyIHM9ZS5yZXBsYWNlKC8oW2Etel1bQS1aXSkvZyxmdW5jdGlvbihlKXtyZXR1cm4gZVswXStcIl9cIitlWzFdLnRvTG93ZXJDYXNlKCl9KTtpZihlIT09cyl7dmFyIHI9dC5oYXNPd25Qcm9wZXJ0eShlKTt0Lmhhc093blByb3BlcnR5KHMpJiYoaS53YXJuKHMrXCIgaXMgZGVwcmVjYXRlZCwgcGxlYXNlIHVzZSBcIitlKSxyJiZpLndhcm4oZStcIiBvdmVycmlkaW5nIFwiK3MpKSx0W2VdPXI/dFtlXTp0W3NdfX12YXIgcixvLGEsYyxoLHU9e3ZpYUhvc3Q6ZS5VdGlscy5jcmVhdGVSYW5kb21Ub2tlbigxMikrXCIuaW52YWxpZFwiLHVyaTpuZXcgZS5VUkkoXCJzaXBcIixcImFub255bW91cy5cIitlLlV0aWxzLmNyZWF0ZVJhbmRvbVRva2VuKDYpLFwiYW5vbnltb3VzLmludmFsaWRcIixudWxsLG51bGwpLHdzU2VydmVyczpbe3NjaGVtZTpcIldTU1wiLHNpcF91cmk6XCI8c2lwOmVkZ2Uuc2lwLm9uc2lwLmNvbTt0cmFuc3BvcnQ9d3M7bHI+XCIsc3RhdHVzOjAsd2VpZ2h0OjAsd3NfdXJpOlwid3NzOi8vZWRnZS5zaXAub25zaXAuY29tXCJ9XSxjdXN0b206e30sZGlzcGxheU5hbWU6XCJcIixwYXNzd29yZDpudWxsLHJlZ2lzdGVyRXhwaXJlczo2MDAscmVnaXN0ZXI6ITAscmVnaXN0cmFyU2VydmVyOm51bGwsd3NTZXJ2ZXJNYXhSZWNvbm5lY3Rpb246Myx3c1NlcnZlclJlY29ubmVjdGlvblRpbWVvdXQ6NCxjb25uZWN0aW9uUmVjb3ZlcnlNaW5JbnRlcnZhbDoyLGNvbm5lY3Rpb25SZWNvdmVyeU1heEludGVydmFsOjMwLGtlZXBBbGl2ZUludGVydmFsOjAsZXh0cmFTdXBwb3J0ZWQ6W10sdXNlUHJlbG9hZGVkUm91dGU6ITEsdXNlckFnZW50U3RyaW5nOmUuQy5VU0VSX0FHRU5ULG5vQW5zd2VyVGltZW91dDo2MCx0cmFjZVNpcDohMSxoYWNrVmlhVGNwOiExLGhhY2tJcEluQ29udGFjdDohMSxoYWNrV3NzSW5UcmFuc3BvcnQ6ITEsaGFja0FsbG93VW5yZWdpc3RlcmVkT3B0aW9uVGFnczohMSxzZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyRmFjdG9yeU9wdGlvbnM6e2NvbnN0cmFpbnRzOnt9LHBlZXJDb25uZWN0aW9uT3B0aW9uczp7fX0sY29udGFjdE5hbWU6ZS5VdGlscy5jcmVhdGVSYW5kb21Ub2tlbig4KSxjb250YWN0VHJhbnNwb3J0Olwid3NcIixmb3JjZVJwb3J0OiExLGF1dG9zdGFydDohMCxhdXRvc3RvcDohMCxyZWwxMDA6ZS5DLnN1cHBvcnRlZC5VTlNVUFBPUlRFRCxyZXBsYWNlczplLkMuc3VwcG9ydGVkLlVOU1VQUE9SVEVELHNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJGYWN0b3J5OmkoMjcpKGUpLmRlZmF1bHRGYWN0b3J5LGF1dGhlbnRpY2F0aW9uRmFjdG9yeTpuKGZ1bmN0aW9uKHQpe3JldHVybiBuZXcgZS5EaWdlc3RBdXRoZW50aWNhdGlvbih0KX0pLGFsbG93TGVnYWN5Tm90aWZpY2F0aW9uczohMSxhbGxvd091dE9mRGlhbG9nUmVmZXJzOiExfSxsPXRoaXMuZ2V0Q29uZmlndXJhdGlvbkNoZWNrKCk7Zm9yKHIgaW4gbC5tYW5kYXRvcnkpe2lmKHMocix0aGlzLmxvZ2dlciksIXQuaGFzT3duUHJvcGVydHkocikpdGhyb3cgbmV3IGUuRXhjZXB0aW9ucy5Db25maWd1cmF0aW9uRXJyb3Iocik7aWYobz10W3JdLHZvaWQgMD09PShhPWwubWFuZGF0b3J5W3JdKG8pKSl0aHJvdyBuZXcgZS5FeGNlcHRpb25zLkNvbmZpZ3VyYXRpb25FcnJvcihyLG8pO3Vbcl09YX1mb3IociBpbiBsLm9wdGlvbmFsKWlmKHMocix0aGlzLmxvZ2dlciksdC5oYXNPd25Qcm9wZXJ0eShyKSl7aWYoKG89dFtyXSlpbnN0YW5jZW9mIEFycmF5JiYwPT09by5sZW5ndGgpY29udGludWU7aWYobnVsbD09PW98fFwiXCI9PT1vfHx2b2lkIDA9PT1vKWNvbnRpbnVlO2lmKFwibnVtYmVyXCI9PXR5cGVvZiBvJiZpc05hTihvKSljb250aW51ZTtpZih2b2lkIDA9PT0oYT1sLm9wdGlvbmFsW3JdKG8pKSl0aHJvdyBuZXcgZS5FeGNlcHRpb25zLkNvbmZpZ3VyYXRpb25FcnJvcihyLG8pO3Vbcl09YX1pZih1LmNvbm5lY3Rpb25SZWNvdmVyeU1heEludGVydmFsPHUuY29ubmVjdGlvblJlY292ZXJ5TWluSW50ZXJ2YWwpdGhyb3cgbmV3IGUuRXhjZXB0aW9ucy5Db25maWd1cmF0aW9uRXJyb3IoXCJjb25uZWN0aW9uUmVjb3ZlcnlNYXhJbnRlcnZhbFwiLHUuY29ubmVjdGlvblJlY292ZXJ5TWF4SW50ZXJ2YWwpOzA9PT11LmRpc3BsYXlOYW1lJiYodS5kaXNwbGF5TmFtZT1cIjBcIiksdS5pbnN0YW5jZUlkfHwodS5pbnN0YW5jZUlkPWUuVXRpbHMubmV3VVVJRCgpKSx1LnNpcGpzSWQ9ZS5VdGlscy5jcmVhdGVSYW5kb21Ub2tlbig1KSwoYz11LnVyaS5jbG9uZSgpKS51c2VyPW51bGwsdS5ob3N0cG9ydFBhcmFtcz1jLnRvUmF3KCkucmVwbGFjZSgvXnNpcDovaSxcIlwiKSx1LmF1dGhvcml6YXRpb25Vc2VyfHwodS5hdXRob3JpemF0aW9uVXNlcj11LnVyaS51c2VyKSx1LnJlZ2lzdHJhclNlcnZlcnx8KChoPXUudXJpLmNsb25lKCkpLnVzZXI9bnVsbCx1LnJlZ2lzdHJhclNlcnZlcj1oKSx1Lm5vQW5zd2VyVGltZW91dD0xZTMqdS5ub0Fuc3dlclRpbWVvdXQsdS5oYWNrSXBJbkNvbnRhY3QmJihcImJvb2xlYW5cIj09dHlwZW9mIHUuaGFja0lwSW5Db250YWN0P3UudmlhSG9zdD1lLlV0aWxzLmdldFJhbmRvbVRlc3ROZXRJUCgpOlwic3RyaW5nXCI9PXR5cGVvZiB1LmhhY2tJcEluQ29udGFjdCYmKHUudmlhSG9zdD11LmhhY2tJcEluQ29udGFjdCkpLHUuaGFja1dzc0luVHJhbnNwb3J0JiYodS5jb250YWN0VHJhbnNwb3J0PVwid3NzXCIpLHRoaXMuY29udGFjdD17cHViX2dydXU6bnVsbCx0ZW1wX2dydXU6bnVsbCx1cmk6bmV3IGUuVVJJKFwic2lwXCIsdS5jb250YWN0TmFtZSx1LnZpYUhvc3QsbnVsbCx7dHJhbnNwb3J0OnUuY29udGFjdFRyYW5zcG9ydH0pLHRvU3RyaW5nOmZ1bmN0aW9uKGUpe3ZhciB0PShlPWV8fHt9KS5hbm9ueW1vdXN8fG51bGwsaT1lLm91dGJvdW5kfHxudWxsLHM9XCI8XCI7cmV0dXJuIHMrPXQ/KHRoaXMudGVtcF9ncnV1fHxcInNpcDphbm9ueW1vdXNAYW5vbnltb3VzLmludmFsaWQ7dHJhbnNwb3J0PVwiK3UuY29udGFjdFRyYW5zcG9ydCkudG9TdHJpbmcoKToodGhpcy5wdWJfZ3J1dXx8dGhpcy51cmkpLnRvU3RyaW5nKCksaSYmKHMrPVwiO29iXCIpLHMrPVwiPlwifX07dmFyIGQ9e307Zm9yKHIgaW4gdSlkW3JdPXt2YWx1ZTp1W3JdLHdyaXRhYmxlOlwicmVnaXN0ZXJcIj09PXJ8fFwiY3VzdG9tXCI9PT1yLGNvbmZpZ3VyYWJsZTohMX07T2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcy5jb25maWd1cmF0aW9uLGQpLHRoaXMubG9nZ2VyLmxvZyhcImNvbmZpZ3VyYXRpb24gcGFyYW1ldGVycyBhZnRlciB2YWxpZGF0aW9uOlwiKTtmb3IociBpbiB1KXN3aXRjaChyKXtjYXNlXCJ1cmlcIjpjYXNlXCJyZWdpc3RyYXJTZXJ2ZXJcIjpjYXNlXCJzZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyRmFjdG9yeVwiOnRoaXMubG9nZ2VyLmxvZyhcIlxceGI3IFwiK3IrXCI6IFwiK3Vbcl0pO2JyZWFrO2Nhc2VcInBhc3N3b3JkXCI6dGhpcy5sb2dnZXIubG9nKFwiXFx4YjcgXCIrcitcIjogTk9UIFNIT1dOXCIpO2JyZWFrO2RlZmF1bHQ6dGhpcy5sb2dnZXIubG9nKFwiXFx4YjcgXCIrcitcIjogXCIrSlNPTi5zdHJpbmdpZnkodVtyXSkpfX0sby5wcm90b3R5cGUuZ2V0Q29uZmlndXJhdGlvbkNoZWNrPWZ1bmN0aW9uKCl7cmV0dXJue21hbmRhdG9yeTp7fSxvcHRpb25hbDp7dXJpOmZ1bmN0aW9uKHQpe3ZhciBpO3JldHVybi9ec2lwOi9pLnRlc3QodCl8fCh0PWUuQy5TSVArXCI6XCIrdCksKGk9ZS5VUkkucGFyc2UodCkpJiZpLnVzZXI/aTp2b2lkIDB9LHdzU2VydmVyczpmdW5jdGlvbih0KXt2YXIgaSxzLHI7aWYoXCJzdHJpbmdcIj09dHlwZW9mIHQpdD1be3dzX3VyaTp0fV07ZWxzZXtpZighKHQgaW5zdGFuY2VvZiBBcnJheSkpcmV0dXJuO2ZvcihzPXQubGVuZ3RoLGk9MDtpPHM7aSsrKVwic3RyaW5nXCI9PXR5cGVvZiB0W2ldJiYodFtpXT17d3NfdXJpOnRbaV19KX1pZigwPT09dC5sZW5ndGgpcmV0dXJuITE7Zm9yKHM9dC5sZW5ndGgsaT0wO2k8cztpKyspe2lmKCF0W2ldLndzX3VyaSlyZXR1cm47aWYodFtpXS53ZWlnaHQmJiFOdW1iZXIodFtpXS53ZWlnaHQpKXJldHVybjtpZigtMT09PShyPWUuR3JhbW1hci5wYXJzZSh0W2ldLndzX3VyaSxcImFic29sdXRlVVJJXCIpKSlyZXR1cm47aWYoW1wid3NzXCIsXCJ3c1wiLFwidWRwXCJdLmluZGV4T2Yoci5zY2hlbWUpPDApcmV0dXJuO3RbaV0uc2lwX3VyaT1cIjxzaXA6XCIrci5ob3N0KyhyLnBvcnQ/XCI6XCIrci5wb3J0OlwiXCIpK1wiO3RyYW5zcG9ydD1cIityLnNjaGVtZS5yZXBsYWNlKC9ed3NzJC9pLFwid3NcIikrXCI7bHI+XCIsdFtpXS53ZWlnaHR8fCh0W2ldLndlaWdodD0wKSx0W2ldLnN0YXR1cz0wLHRbaV0uc2NoZW1lPXIuc2NoZW1lLnRvVXBwZXJDYXNlKCl9cmV0dXJuIHR9LGF1dGhvcml6YXRpb25Vc2VyOmZ1bmN0aW9uKHQpe3JldHVybi0xPT09ZS5HcmFtbWFyLnBhcnNlKCdcIicrdCsnXCInLFwicXVvdGVkX3N0cmluZ1wiKT92b2lkIDA6dH0sY29ubmVjdGlvblJlY292ZXJ5TWF4SW50ZXJ2YWw6ZnVuY3Rpb24odCl7dmFyIGk7aWYoZS5VdGlscy5pc0RlY2ltYWwodCkmJihpPU51bWJlcih0KSk+MClyZXR1cm4gaX0sY29ubmVjdGlvblJlY292ZXJ5TWluSW50ZXJ2YWw6ZnVuY3Rpb24odCl7dmFyIGk7aWYoZS5VdGlscy5pc0RlY2ltYWwodCkmJihpPU51bWJlcih0KSk+MClyZXR1cm4gaX0sZGlzcGxheU5hbWU6ZnVuY3Rpb24odCl7cmV0dXJuLTE9PT1lLkdyYW1tYXIucGFyc2UoJ1wiJyt0KydcIicsXCJkaXNwbGF5TmFtZVwiKT92b2lkIDA6dH0saGFja1ZpYVRjcDpmdW5jdGlvbihlKXtpZihcImJvb2xlYW5cIj09dHlwZW9mIGUpcmV0dXJuIGV9LGhhY2tJcEluQ29udGFjdDpmdW5jdGlvbih0KXtyZXR1cm5cImJvb2xlYW5cIj09dHlwZW9mIHQ/dDpcInN0cmluZ1wiPT10eXBlb2YgdCYmLTEhPT1lLkdyYW1tYXIucGFyc2UodCxcImhvc3RcIik/dDp2b2lkIDB9LGhhY2tXc3NJblRyYW5zcG9ydDpmdW5jdGlvbihlKXtpZihcImJvb2xlYW5cIj09dHlwZW9mIGUpcmV0dXJuIGV9LGhhY2tBbGxvd1VucmVnaXN0ZXJlZE9wdGlvblRhZ3M6ZnVuY3Rpb24oZSl7aWYoXCJib29sZWFuXCI9PXR5cGVvZiBlKXJldHVybiBlfSxjb250YWN0VHJhbnNwb3J0OmZ1bmN0aW9uKGUpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiBlKXJldHVybiBlfSxmb3JjZVJwb3J0OmZ1bmN0aW9uKGUpe2lmKFwiYm9vbGVhblwiPT10eXBlb2YgZSlyZXR1cm4gZX0saW5zdGFuY2VJZDpmdW5jdGlvbih0KXtpZihcInN0cmluZ1wiPT10eXBlb2YgdClyZXR1cm4vXnV1aWQ6L2kudGVzdCh0KSYmKHQ9dC5zdWJzdHIoNSkpLC0xPT09ZS5HcmFtbWFyLnBhcnNlKHQsXCJ1dWlkXCIpP3ZvaWQgMDp0fSxrZWVwQWxpdmVJbnRlcnZhbDpmdW5jdGlvbih0KXt2YXIgaTtpZihlLlV0aWxzLmlzRGVjaW1hbCh0KSYmKGk9TnVtYmVyKHQpKT4wKXJldHVybiBpfSxleHRyYVN1cHBvcnRlZDpmdW5jdGlvbihlKXt2YXIgdCxpO2lmKGUgaW5zdGFuY2VvZiBBcnJheSl7Zm9yKGk9ZS5sZW5ndGgsdD0wO3Q8aTt0KyspaWYoXCJzdHJpbmdcIiE9dHlwZW9mIGVbdF0pcmV0dXJuO3JldHVybiBlfX0sbm9BbnN3ZXJUaW1lb3V0OmZ1bmN0aW9uKHQpe3ZhciBpO2lmKGUuVXRpbHMuaXNEZWNpbWFsKHQpJiYoaT1OdW1iZXIodCkpPjApcmV0dXJuIGl9LHBhc3N3b3JkOmZ1bmN0aW9uKGUpe3JldHVybiBTdHJpbmcoZSl9LHJlbDEwMDpmdW5jdGlvbih0KXtyZXR1cm4gdD09PWUuQy5zdXBwb3J0ZWQuUkVRVUlSRUQ/ZS5DLnN1cHBvcnRlZC5SRVFVSVJFRDp0PT09ZS5DLnN1cHBvcnRlZC5TVVBQT1JURUQ/ZS5DLnN1cHBvcnRlZC5TVVBQT1JURUQ6ZS5DLnN1cHBvcnRlZC5VTlNVUFBPUlRFRH0scmVwbGFjZXM6ZnVuY3Rpb24odCl7cmV0dXJuIHQ9PT1lLkMuc3VwcG9ydGVkLlJFUVVJUkVEP2UuQy5zdXBwb3J0ZWQuUkVRVUlSRUQ6dD09PWUuQy5zdXBwb3J0ZWQuU1VQUE9SVEVEP2UuQy5zdXBwb3J0ZWQuU1VQUE9SVEVEOmUuQy5zdXBwb3J0ZWQuVU5TVVBQT1JURUR9LHJlZ2lzdGVyOmZ1bmN0aW9uKGUpe2lmKFwiYm9vbGVhblwiPT10eXBlb2YgZSlyZXR1cm4gZX0scmVnaXN0ZXJFeHBpcmVzOmZ1bmN0aW9uKHQpe3ZhciBpO2lmKGUuVXRpbHMuaXNEZWNpbWFsKHQpJiYoaT1OdW1iZXIodCkpPjApcmV0dXJuIGl9LHJlZ2lzdHJhclNlcnZlcjpmdW5jdGlvbih0KXt2YXIgaTtpZihcInN0cmluZ1wiPT10eXBlb2YgdClyZXR1cm4vXnNpcDovaS50ZXN0KHQpfHwodD1lLkMuU0lQK1wiOlwiK3QpLChpPWUuVVJJLnBhcnNlKHQpKT9pLnVzZXI/dm9pZCAwOmk6dm9pZCAwfSx0cmFjZVNpcDpmdW5jdGlvbihlKXtpZihcImJvb2xlYW5cIj09dHlwZW9mIGUpcmV0dXJuIGV9LHVzZXJBZ2VudFN0cmluZzpmdW5jdGlvbihlKXtpZihcInN0cmluZ1wiPT10eXBlb2YgZSlyZXR1cm4gZX0sdXNlUHJlbG9hZGVkUm91dGU6ZnVuY3Rpb24oZSl7aWYoXCJib29sZWFuXCI9PXR5cGVvZiBlKXJldHVybiBlfSx3c1NlcnZlck1heFJlY29ubmVjdGlvbjpmdW5jdGlvbih0KXt2YXIgaTtpZihlLlV0aWxzLmlzRGVjaW1hbCh0KSYmKGk9TnVtYmVyKHQpKT4wKXJldHVybiBpfSx3c1NlcnZlclJlY29ubmVjdGlvblRpbWVvdXQ6ZnVuY3Rpb24odCl7dmFyIGk7aWYoZS5VdGlscy5pc0RlY2ltYWwodCkmJihpPU51bWJlcih0KSk+MClyZXR1cm4gaX0sYXV0b3N0YXJ0OmZ1bmN0aW9uKGUpe2lmKFwiYm9vbGVhblwiPT10eXBlb2YgZSlyZXR1cm4gZX0sYXV0b3N0b3A6ZnVuY3Rpb24oZSl7aWYoXCJib29sZWFuXCI9PXR5cGVvZiBlKXJldHVybiBlfSxzZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyRmFjdG9yeTpmdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgRnVuY3Rpb24pcmV0dXJuIGV9LHNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJGYWN0b3J5T3B0aW9uczpmdW5jdGlvbihlKXtpZihcIm9iamVjdFwiPT09KHZvaWQgMD09PWU/XCJ1bmRlZmluZWRcIjpzKGUpKSlyZXR1cm4gZX0sYXV0aGVudGljYXRpb25GYWN0b3J5Om4sYWxsb3dMZWdhY3lOb3RpZmljYXRpb25zOmZ1bmN0aW9uKGUpe2lmKFwiYm9vbGVhblwiPT10eXBlb2YgZSlyZXR1cm4gZX0sY3VzdG9tOmZ1bmN0aW9uKGUpe2lmKFwib2JqZWN0XCI9PT0odm9pZCAwPT09ZT9cInVuZGVmaW5lZFwiOnMoZSkpKXJldHVybiBlfSxjb250YWN0TmFtZTpmdW5jdGlvbihlKXtpZihcInN0cmluZ1wiPT10eXBlb2YgZSlyZXR1cm4gZX19fX0sby5DPWEsZS5VQT1vfX0pLmNhbGwodCxpKDApKX0sZnVuY3Rpb24oZSx0LGkpe1widXNlIHN0cmljdFwiOyhmdW5jdGlvbih0KXtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIGk9ZnVuY3Rpb24oZSxpKXt0aGlzLm9wdGlvbnM9aXx8e30sdGhpcy5sb2dnZXI9ZS51YS5nZXRMb2dnZXIoXCJzaXAuaW52aXRlY29udGV4dC5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyXCIsZS5pZCksdGhpcy5zZXNzaW9uPWUsdGhpcy5DT05URU5UX1RZUEU9XCJhcHBsaWNhdGlvbi9zZHBcIix0aGlzLm1vZGlmaWVycz10aGlzLm9wdGlvbnMubW9kaWZpZXJzfHxbXSxBcnJheS5pc0FycmF5KHRoaXMubW9kaWZpZXJzKXx8KHRoaXMubW9kaWZpZXJzPVt0aGlzLm1vZGlmaWVyc10pO3ZhciBzPXQud2luZG93fHx0O3RoaXMuV2ViUlRDPXtNZWRpYVN0cmVhbTpzLk1lZGlhU3RyZWFtLGdldFVzZXJNZWRpYTpzLm5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhLmJpbmQocy5uYXZpZ2F0b3IubWVkaWFEZXZpY2VzKSxSVENQZWVyQ29ubmVjdGlvbjpzLlJUQ1BlZXJDb25uZWN0aW9uLFJUQ1Nlc3Npb25EZXNjcmlwdGlvbjpzLlJUQ1Nlc3Npb25EZXNjcmlwdGlvbn0sdGhpcy5pY2VHYXRoZXJpbmdEZWZlcnJlZD1udWxsLHRoaXMuaWNlR2F0aGVyaW5nVGltZW91dD0hMSx0aGlzLmljZUdhdGhlcmluZ1RpbWVyPW51bGwsdGhpcy5pbml0UGVlckNvbm5lY3Rpb24odGhpcy5vcHRpb25zLnBlZXJDb25uZWN0aW9uT3B0aW9ucyksdGhpcy5jb25zdHJhaW50cz10aGlzLmNoZWNrQW5kRGVmYXVsdENvbnN0cmFpbnRzKHRoaXMub3B0aW9ucy5jb25zdHJhaW50cyksdGhpcy5zZXNzaW9uLmVtaXQoXCJTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLWNyZWF0ZWRcIix0aGlzKX07cmV0dXJuIGkuZGVmYXVsdEZhY3Rvcnk9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbmV3IGkoZSx0KX0saS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlLlNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIucHJvdG90eXBlLHtjbG9zZTp7d3JpdGFibGU6ITAsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmxvZ2dlci5sb2coXCJjbG9zaW5nIFBlZXJDb25uZWN0aW9uXCIpLHRoaXMucGVlckNvbm5lY3Rpb24mJlwiY2xvc2VkXCIhPT10aGlzLnBlZXJDb25uZWN0aW9uLnNpZ25hbGluZ1N0YXRlJiYodGhpcy5wZWVyQ29ubmVjdGlvbi5nZXRTZW5kZXJzP3RoaXMucGVlckNvbm5lY3Rpb24uZ2V0U2VuZGVycygpLmZvckVhY2goZnVuY3Rpb24oZSl7ZS50cmFjayYmZS50cmFjay5zdG9wKCl9KToodGhpcy5sb2dnZXIud2FybihcIlVzaW5nIGdldExvY2FsU3RyZWFtcyB3aGljaCBpcyBkZXByZWNhdGVkXCIpLHRoaXMucGVlckNvbm5lY3Rpb24uZ2V0TG9jYWxTdHJlYW1zKCkuZm9yRWFjaChmdW5jdGlvbihlKXtlLmdldFRyYWNrcygpLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5zdG9wKCl9KX0pKSx0aGlzLnBlZXJDb25uZWN0aW9uLmdldFJlY2VpdmVycz90aGlzLnBlZXJDb25uZWN0aW9uLmdldFJlY2VpdmVycygpLmZvckVhY2goZnVuY3Rpb24oZSl7ZS50cmFjayYmZS50cmFjay5zdG9wKCl9KToodGhpcy5sb2dnZXIud2FybihcIlVzaW5nIGdldFJlbW90ZVN0cmVhbXMgd2hpY2ggaXMgZGVwcmVjYXRlZFwiKSx0aGlzLnBlZXJDb25uZWN0aW9uLmdldFJlbW90ZVN0cmVhbXMoKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UuZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbihlKXtlLnN0b3AoKX0pfSkpLHRoaXMucmVzZXRJY2VHYXRoZXJpbmdDb21wbGV0ZSgpLHRoaXMucGVlckNvbm5lY3Rpb24uY2xvc2UoKSl9fSxnZXREZXNjcmlwdGlvbjp7d3JpdGFibGU6ITAsdmFsdWU6ZnVuY3Rpb24odCxpKXt2YXIgcz10aGlzLHI9ITA7aWYodGhpcy5zZXNzaW9uLmRpc2FibGVSZW5lZ290aWF0aW9uKXJldHVybiB0aGlzLmxvZ2dlci53YXJuKCdUaGUgZmxhZyBcImRpc2FibGVSZW5lZ290aWF0aW9uXCIgaXMgc2V0IHRvIHRydWUgZm9yIHRoaXMgc2Vzc2lvbiBkZXNjcmlwdGlvbiBoYW5kbGVyLiBXZSB3aWxsIG5vdCB0cnkgdG8gcmVuZWdvdGlhdGUuJyksZS5VdGlscy5Qcm9taXNlLnJlamVjdChuZXcgZS5FeGNlcHRpb25zLlJlbmVnb3RpYXRpb25FcnJvcihcImRpc2FibGVSZW5lZ290aWF0aW9uIGZsYWcgc2V0IHRvIHRydWUgZm9yIHRoaXMgc2Vzc2lvbiBkZXNjcmlwdGlvbiBoYW5kbGVyXCIpKTsodD10fHx7fSkucGVlckNvbm5lY3Rpb25PcHRpb25zJiZ0aGlzLmluaXRQZWVyQ29ubmVjdGlvbih0LnBlZXJDb25uZWN0aW9uT3B0aW9ucyk7dmFyIG49T2JqZWN0LmFzc2lnbih7fSx0aGlzLmNvbnN0cmFpbnRzLHQuY29uc3RyYWludHMpO3JldHVybiBuPXRoaXMuY2hlY2tBbmREZWZhdWx0Q29uc3RyYWludHMobiksSlNPTi5zdHJpbmdpZnkobikhPT1KU09OLnN0cmluZ2lmeSh0aGlzLmNvbnN0cmFpbnRzKT90aGlzLmNvbnN0cmFpbnRzPW46cj0hMSxpPWl8fFtdLEFycmF5LmlzQXJyYXkoaSl8fChpPVtpXSksaT1pLmNvbmNhdCh0aGlzLm1vZGlmaWVycyksIXImJnRoaXMucGVlckNvbm5lY3Rpb24ubG9jYWxEZXNjcmlwdGlvbiYmdGhpcy5wZWVyQ29ubmVjdGlvbi5sb2NhbERlc2NyaXB0aW9uLnNkcCYmXCJcIiE9PXRoaXMucGVlckNvbm5lY3Rpb24ubG9jYWxEZXNjcmlwdGlvbi5zZHA/dGhpcy5jcmVhdGVPZmZlck9yQW5zd2VyKHQuUlRDT2ZmZXJPcHRpb25zLGkpLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJue2JvZHk6ZSxjb250ZW50VHlwZTpzLkNPTlRFTlRfVFlQRX19KToocy5sb2dnZXIubG9nKFwiYWNxdWlyaW5nIGxvY2FsIG1lZGlhXCIpLHRoaXMuYWNxdWlyZShzLmNvbnN0cmFpbnRzKS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiBzLmxvZ2dlci5sb2coXCJhY3F1aXJlZCBsb2NhbCBtZWRpYSBzdHJlYW1zXCIpLGV9LGZ1bmN0aW9uKGUpe3Rocm93IHMubG9nZ2VyLmVycm9yKFwidW5hYmxlIHRvIGFjcXVpcmUgc3RyZWFtc1wiKSxzLmxvZ2dlci5lcnJvcihlKSxlfSkudGhlbihmdW5jdGlvbih0KXt0cnl7KHQ9W10uY29uY2F0KHQpKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3MucGVlckNvbm5lY3Rpb24uYWRkVHJhY2s/ZS5nZXRUcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3MucGVlckNvbm5lY3Rpb24uYWRkVHJhY2sodCxlKX0pOnMucGVlckNvbm5lY3Rpb24uYWRkU3RyZWFtKGUpfSx0aGlzKX1jYXRjaCh0KXtyZXR1cm4gcy5sb2dnZXIuZXJyb3IoXCJlcnJvciBhZGRpbmcgc3RyZWFtXCIpLHMubG9nZ2VyLmVycm9yKHQpLGUuVXRpbHMuUHJvbWlzZS5yZWplY3QodCl9cmV0dXJuIGUuVXRpbHMuUHJvbWlzZS5yZXNvbHZlKCl9KS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIHMuY3JlYXRlT2ZmZXJPckFuc3dlcih0LlJUQ09mZmVyT3B0aW9ucyxpKX0pLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJue2JvZHk6ZSxjb250ZW50VHlwZTpzLkNPTlRFTlRfVFlQRX19KS5jYXRjaChmdW5jdGlvbihlKXt0aHJvdyB0aGlzLnNlc3Npb24uZGlzYWJsZVJlbmVnb3RpYXRpb249ITAsZX0pKX19LGhhc0Rlc2NyaXB0aW9uOnt3cml0YWJsZTohMCx2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZT09PXRoaXMuQ09OVEVOVF9UWVBFfX0saG9sZE1vZGlmaWVyOnt3cml0YWJsZTohMCx2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4vYT0oc2VuZHJlY3Z8c2VuZG9ubHl8cmVjdm9ubHl8aW5hY3RpdmUpLy50ZXN0KHQuc2RwKT8odC5zZHA9dC5zZHAucmVwbGFjZSgvYT1zZW5kcmVjdlxcclxcbi9nLFwiYT1zZW5kb25seVxcclxcblwiKSx0LnNkcD10LnNkcC5yZXBsYWNlKC9hPXJlY3Zvbmx5XFxyXFxuL2csXCJhPWluYWN0aXZlXFxyXFxuXCIpKTp0LnNkcD10LnNkcC5yZXBsYWNlKC8obT1bXlxccl0qXFxyXFxuKS9nLFwiJDFhPXNlbmRvbmx5XFxyXFxuXCIpLGUuVXRpbHMuUHJvbWlzZS5yZXNvbHZlKHQpfX0sc2V0RGVzY3JpcHRpb246e3dyaXRhYmxlOiEwLHZhbHVlOmZ1bmN0aW9uKHQsaSxzKXt2YXIgcj10aGlzLG49XCJ1bmRlZmluZWRcIiE9dHlwZW9mIEluc3RhbGxUcmlnZ2VyO2lmKCF0aGlzLnNlc3Npb24uZGlzYWJsZVJlbmVnb3RpYXRpb24mJm4mJnRoaXMucGVlckNvbm5lY3Rpb24mJnRoaXMuaXNWaWRlb0hvbGQodCkmJih0aGlzLnNlc3Npb24uZGlzYWJsZVJlbmVnb3RpYXRpb249ITApLHRoaXMuc2Vzc2lvbi5kaXNhYmxlUmVuZWdvdGlhdGlvbilyZXR1cm4gdGhpcy5sb2dnZXIud2FybignVGhlIGZsYWcgXCJkaXNhYmxlUmVuZWdvdGlhdGlvblwiIGlzIHNldCB0byB0cnVlIGZvciB0aGlzIHNlc3Npb24gZGVzY3JpcHRpb24gaGFuZGxlci4gV2Ugd2lsbCBub3QgdHJ5IHRvIHJlbmVnb3RpYXRlLicpLGUuVXRpbHMuUHJvbWlzZS5yZWplY3QobmV3IGUuRXhjZXB0aW9ucy5SZW5lZ290aWF0aW9uRXJyb3IoXCJkaXNhYmxlUmVuZWdvdGlhdGlvbiBmbGFnIHNldCB0byB0cnVlIGZvciB0aGlzIHNlc3Npb24gZGVzY3JpcHRpb24gaGFuZGxlclwiKSk7KGk9aXx8e30pLnBlZXJDb25uZWN0aW9uT3B0aW9ucyYmdGhpcy5pbml0UGVlckNvbm5lY3Rpb24oaS5wZWVyQ29ubmVjdGlvbk9wdGlvbnMpLHRoaXMuY29uc3RyYWludHM9T2JqZWN0LmFzc2lnbih7fSx0aGlzLmNvbnN0cmFpbnRzLGkuY29uc3RyYWludHMpLHRoaXMuY29uc3RyYWludHM9dGhpcy5jaGVja0FuZERlZmF1bHRDb25zdHJhaW50cyh0aGlzLmNvbnN0cmFpbnRzKSxzPXN8fFtdLEFycmF5LmlzQXJyYXkocyl8fChzPVtzXSkscz1zLmNvbmNhdCh0aGlzLm1vZGlmaWVycyk7dmFyIG89e3R5cGU6dGhpcy5oYXNPZmZlcihcImxvY2FsXCIpP1wiYW5zd2VyXCI6XCJvZmZlclwiLHNkcDp0fTtyZXR1cm4gZS5VdGlscy5yZWR1Y2VQcm9taXNlcyhzLG8pLmNhdGNoKGZ1bmN0aW9uKGUpe3Rocm93IHIubG9nZ2VyLmVycm9yKFwiVGhlIG1vZGlmaWVycyBkaWQgbm90IHJlc29sdmUgc3VjY2Vzc2Z1bGx5XCIpLHIubG9nZ2VyLmVycm9yKGUpLGV9KS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiByLmVtaXQoXCJzZXREZXNjcmlwdGlvblwiLGUpLHIucGVlckNvbm5lY3Rpb24uc2V0UmVtb3RlRGVzY3JpcHRpb24obmV3IHIuV2ViUlRDLlJUQ1Nlc3Npb25EZXNjcmlwdGlvbihlKSl9KS5jYXRjaChmdW5jdGlvbihlKXt0aHJvdyByLnNlc3Npb24uZGlzYWJsZVJlbmVnb3RpYXRpb249ITAsci5sb2dnZXIuZXJyb3IoZSksci5lbWl0KFwicGVlckNvbm5lY3Rpb24tc2V0UmVtb3RlRGVzY3JpcHRpb25GYWlsZWRcIixlKSxlfSkudGhlbihmdW5jdGlvbigpe3IucGVlckNvbm5lY3Rpb24uZ2V0UmVjZWl2ZXJzP3IuZW1pdChcInNldFJlbW90ZURlc2NyaXB0aW9uXCIsci5wZWVyQ29ubmVjdGlvbi5nZXRSZWNlaXZlcnMoKSk6ci5lbWl0KFwic2V0UmVtb3RlRGVzY3JpcHRpb25cIixyLnBlZXJDb25uZWN0aW9uLmdldFJlbW90ZVN0cmVhbXMoKSksci5lbWl0KFwiY29uZmlybWVkXCIscil9KX19LGNyZWF0ZU9mZmVyT3JBbnN3ZXI6e3dyaXRhYmxlOiEwLHZhbHVlOmZ1bmN0aW9uKHQsaSl7dmFyIHMscj10aGlzLG49dGhpcy5wZWVyQ29ubmVjdGlvbjtyZXR1cm4gdD10fHx7fSxzPXIuaGFzT2ZmZXIoXCJyZW1vdGVcIik/XCJjcmVhdGVBbnN3ZXJcIjpcImNyZWF0ZU9mZmVyXCIsbltzXSh0KS5jYXRjaChmdW5jdGlvbihlKXt0aHJvdyByLmVtaXQoXCJwZWVyQ29ubmVjdGlvbi1cIitzK1wiRmFpbGVkXCIsZSksZX0pLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIGUuVXRpbHMucmVkdWNlUHJvbWlzZXMoaSx0KX0pLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIHIubG9nZ2VyLmxvZyhlKSxuLnNldExvY2FsRGVzY3JpcHRpb24oZSl9KS5jYXRjaChmdW5jdGlvbihlKXt0aHJvdyByLmVtaXQoXCJwZWVyQ29ubmVjdGlvbi1TZXRMb2NhbERlc2NyaXB0aW9uRmFpbGVkXCIsZSksZX0pLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gci53YWl0Rm9ySWNlR2F0aGVyaW5nQ29tcGxldGUoKX0pLnRoZW4oZnVuY3Rpb24oKXt2YXIgdD1yLnBlZXJDb25uZWN0aW9uLmxvY2FsRGVzY3JpcHRpb247cmV0dXJuIGUuVXRpbHMucmVkdWNlUHJvbWlzZXMoaSx0KX0pLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIHIuZW1pdChcImdldERlc2NyaXB0aW9uXCIsZSksZS5zZHB9KS5jYXRjaChmdW5jdGlvbih0KXt0aHJvdyByLmxvZ2dlci5lcnJvcih0KSxuZXcgZS5FeGNlcHRpb25zLkdldERlc2NyaXB0aW9uRXJyb3IodCl9KX19LGFkZERlZmF1bHRJY2VDaGVja2luZ1RpbWVvdXQ6e3dyaXRhYmxlOiEwLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1lLmljZUNoZWNraW5nVGltZW91dCYmKGUuaWNlQ2hlY2tpbmdUaW1lb3V0PTVlMyksZX19LGFkZERlZmF1bHRJY2VTZXJ2ZXJzOnt3cml0YWJsZTohMCx2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZS5pY2VTZXJ2ZXJzfHwoZS5pY2VTZXJ2ZXJzPVt7dXJsczpcInN0dW46c3R1bi5sLmdvb2dsZS5jb206MTkzMDJcIn1dKSxlfX0sY2hlY2tBbmREZWZhdWx0Q29uc3RyYWludHM6e3dyaXRhYmxlOiEwLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXthdWRpbzohMCx2aWRlbzohMH07cmV0dXJuIGU9ZXx8dCwwPT09T2JqZWN0LmtleXMoZSkubGVuZ3RoJiZlLmNvbnN0cnVjdG9yPT09T2JqZWN0P3Q6ZX19LGluaXRQZWVyQ29ubmVjdGlvbjp7d3JpdGFibGU6ITAsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGk9dGhpczt0PXR8fHt9LCh0PXRoaXMuYWRkRGVmYXVsdEljZUNoZWNraW5nVGltZW91dCh0KSkucnRjQ29uZmlndXJhdGlvbj10LnJ0Y0NvbmZpZ3VyYXRpb258fHt9LHQucnRjQ29uZmlndXJhdGlvbj10aGlzLmFkZERlZmF1bHRJY2VTZXJ2ZXJzKHQucnRjQ29uZmlndXJhdGlvbiksdGhpcy5sb2dnZXIubG9nKFwiaW5pdFBlZXJDb25uZWN0aW9uXCIpLHRoaXMucGVlckNvbm5lY3Rpb24mJih0aGlzLmxvZ2dlci5sb2coXCJBbHJlYWR5IGhhdmUgYSBwZWVyIGNvbm5lY3Rpb24gZm9yIHRoaXMgc2Vzc2lvbi4gVGVhcmluZyBkb3duLlwiKSx0aGlzLnJlc2V0SWNlR2F0aGVyaW5nQ29tcGxldGUoKSx0aGlzLnBlZXJDb25uZWN0aW9uLmNsb3NlKCkpLHRoaXMucGVlckNvbm5lY3Rpb249bmV3IHRoaXMuV2ViUlRDLlJUQ1BlZXJDb25uZWN0aW9uKHQucnRjQ29uZmlndXJhdGlvbiksdGhpcy5sb2dnZXIubG9nKFwiTmV3IHBlZXIgY29ubmVjdGlvbiBjcmVhdGVkXCIpLHRoaXMuc2Vzc2lvbi5lbWl0KFwicGVlckNvbm5lY3Rpb24tY3JlYXRlZFwiLHRoaXMucGVlckNvbm5lY3Rpb24pLHRoaXMucGVlckNvbm5lY3Rpb24ub250cmFjaz1mdW5jdGlvbihlKXtpLmxvZ2dlci5sb2coXCJ0cmFjayBhZGRlZFwiKSxpLmVtaXQoXCJhZGRUcmFja1wiLGUpfSx0aGlzLnBlZXJDb25uZWN0aW9uLm9uYWRkc3RyZWFtPWZ1bmN0aW9uKGUpe2kubG9nZ2VyLndhcm4oXCJVc2luZyBkZXByZWNhdGVkIHN0cmVhbSBBUElcIiksaS5sb2dnZXIubG9nKFwic3RyZWFtIGFkZGVkXCIpLGkuZW1pdChcImFkZFN0cmVhbVwiLGUpfSx0aGlzLnBlZXJDb25uZWN0aW9uLm9ucmVtb3Zlc3RyZWFtPWZ1bmN0aW9uKGUpe2kubG9nZ2VyLmxvZyhcInN0cmVhbSByZW1vdmVkOiBcIitlLnN0cmVhbS5pZCl9LHRoaXMucGVlckNvbm5lY3Rpb24ub25pY2VjYW5kaWRhdGU9ZnVuY3Rpb24oZSl7aS5lbWl0KFwiaWNlQ2FuZGlkYXRlXCIsZSksZS5jYW5kaWRhdGUmJmkubG9nZ2VyLmxvZyhcIklDRSBjYW5kaWRhdGUgcmVjZWl2ZWQ6IFwiKyhudWxsPT09ZS5jYW5kaWRhdGUuY2FuZGlkYXRlP251bGw6ZS5jYW5kaWRhdGUuY2FuZGlkYXRlLnRyaW0oKSkpfSx0aGlzLnBlZXJDb25uZWN0aW9uLm9uaWNlZ2F0aGVyaW5nc3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXtzd2l0Y2goaS5sb2dnZXIubG9nKFwiUlRDSWNlR2F0aGVyaW5nU3RhdGUgY2hhbmdlZDogXCIrdGhpcy5pY2VHYXRoZXJpbmdTdGF0ZSksdGhpcy5pY2VHYXRoZXJpbmdTdGF0ZSl7Y2FzZVwiZ2F0aGVyaW5nXCI6aS5lbWl0KFwiaWNlR2F0aGVyaW5nXCIsdGhpcyksIWkuaWNlR2F0aGVyaW5nVGltZXImJnQuaWNlQ2hlY2tpbmdUaW1lb3V0JiYoaS5pY2VHYXRoZXJpbmdUaW1lb3V0PSExLGkuaWNlR2F0aGVyaW5nVGltZXI9ZS5UaW1lcnMuc2V0VGltZW91dChmdW5jdGlvbigpe2kubG9nZ2VyLmxvZyhcIlJUQ0ljZUNoZWNraW5nIFRpbWVvdXQgVHJpZ2dlcmVkIGFmdGVyIFwiK3QuaWNlQ2hlY2tpbmdUaW1lb3V0K1wiIG1pbGxpc2Vjb25kc1wiKSxpLmljZUdhdGhlcmluZ1RpbWVvdXQ9ITAsaS50cmlnZ2VySWNlR2F0aGVyaW5nQ29tcGxldGUoKX0sdC5pY2VDaGVja2luZ1RpbWVvdXQpKTticmVhaztjYXNlXCJjb21wbGV0ZVwiOmkudHJpZ2dlckljZUdhdGhlcmluZ0NvbXBsZXRlKCl9fSx0aGlzLnBlZXJDb25uZWN0aW9uLm9uaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7dmFyIGU7c3dpdGNoKHRoaXMuaWNlQ29ubmVjdGlvblN0YXRlKXtjYXNlXCJuZXdcIjplPVwiaWNlQ29ubmVjdGlvblwiO2JyZWFrO2Nhc2VcImNoZWNraW5nXCI6ZT1cImljZUNvbm5lY3Rpb25DaGVja2luZ1wiO2JyZWFrO2Nhc2VcImNvbm5lY3RlZFwiOmU9XCJpY2VDb25uZWN0aW9uQ29ubmVjdGVkXCI7YnJlYWs7Y2FzZVwiY29tcGxldGVkXCI6ZT1cImljZUNvbm5lY3Rpb25Db21wbGV0ZWRcIjticmVhaztjYXNlXCJmYWlsZWRcIjplPVwiaWNlQ29ubmVjdGlvbkZhaWxlZFwiO2JyZWFrO2Nhc2VcImRpc2Nvbm5lY3RlZFwiOmU9XCJpY2VDb25uZWN0aW9uRGlzY29ubmVjdGVkXCI7YnJlYWs7Y2FzZVwiY2xvc2VkXCI6ZT1cImljZUNvbm5lY3Rpb25DbG9zZWRcIjticmVhaztkZWZhdWx0OnJldHVybiB2b2lkIGkubG9nZ2VyLndhcm4oXCJVbmtub3duIGljZUNvbm5lY3Rpb24gc3RhdGU6XCIsdGhpcy5pY2VDb25uZWN0aW9uU3RhdGUpfWkuZW1pdChlLHRoaXMpfX19LGFjcXVpcmU6e3dyaXRhYmxlOiEwLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0PXRoaXMuY2hlY2tBbmREZWZhdWx0Q29uc3RyYWludHModCksbmV3IGUuVXRpbHMuUHJvbWlzZShmdW5jdGlvbihlLGkpe3RoaXMuZW1pdChcInVzZXJNZWRpYVJlcXVlc3RcIix0KTt2YXIgcz1mdW5jdGlvbihlLHQpe3ZhciBpPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywyKSxzPVtlXS5jb25jYXQoaSk7cmV0dXJuIHRoaXMuZW1pdC5hcHBseSh0aGlzLHMpLHQuYXBwbHkobnVsbCxpKX0uYmluZCh0aGlzKTt0LmF1ZGlvfHx0LnZpZGVvP3RoaXMuV2ViUlRDLmdldFVzZXJNZWRpYSh0KS50aGVuKHMuYmluZCh0aGlzLFwidXNlck1lZGlhXCIsZnVuY3Rpb24odCl7ZSh0KX0pLHMuYmluZCh0aGlzLFwidXNlck1lZGlhRmFpbGVkXCIsZnVuY3Rpb24oZSl7dGhyb3cgaShlKSxlfSkpOmUoW10pfS5iaW5kKHRoaXMpKX19LGlzVmlkZW9Ib2xkOnt3cml0YWJsZTohMCx2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4tMSE9PWUuc2VhcmNoKC9eKG09dmlkZW8uKj8pW1xcc1xcU10qXihhPXNlbmRvbmx5PykvZ20pfX0saGFzT2ZmZXI6e3dyaXRhYmxlOiEwLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PVwiaGF2ZS1cIitlK1wiLW9mZmVyXCI7cmV0dXJuIHRoaXMucGVlckNvbm5lY3Rpb24uc2lnbmFsaW5nU3RhdGU9PT10fX0saXNJY2VHYXRoZXJpbmdDb21wbGV0ZTp7d3JpdGFibGU6ITAsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm5cImNvbXBsZXRlXCI9PT10aGlzLnBlZXJDb25uZWN0aW9uLmljZUdhdGhlcmluZ1N0YXRlfHx0aGlzLmljZUdhdGhlcmluZ1RpbWVvdXR9fSxyZXNldEljZUdhdGhlcmluZ0NvbXBsZXRlOnt3cml0YWJsZTohMCx2YWx1ZTpmdW5jdGlvbigpe3RoaXMuaWNlR2F0aGVyaW5nVGltZW91dD0hMSx0aGlzLmljZUdhdGhlcmluZ1RpbWVyJiYoZS5UaW1lcnMuY2xlYXJUaW1lb3V0KHRoaXMuaWNlR2F0aGVyaW5nVGltZXIpLHRoaXMuaWNlR2F0aGVyaW5nVGltZXI9bnVsbCksdGhpcy5pY2VHYXRoZXJpbmdEZWZlcnJlZCYmKHRoaXMuaWNlR2F0aGVyaW5nRGVmZXJyZWQucmVqZWN0KCksdGhpcy5pY2VHYXRoZXJpbmdEZWZlcnJlZD1udWxsKX19LHRyaWdnZXJJY2VHYXRoZXJpbmdDb21wbGV0ZTp7d3JpdGFibGU6ITAsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmlzSWNlR2F0aGVyaW5nQ29tcGxldGUoKSYmKHRoaXMuZW1pdChcImljZUdhdGhlcmluZ0NvbXBsZXRlXCIsdGhpcyksdGhpcy5pY2VHYXRoZXJpbmdUaW1lciYmKGUuVGltZXJzLmNsZWFyVGltZW91dCh0aGlzLmljZUdhdGhlcmluZ1RpbWVyKSx0aGlzLmljZUdhdGhlcmluZ1RpbWVyPW51bGwpLHRoaXMuaWNlR2F0aGVyaW5nRGVmZXJyZWQmJih0aGlzLmljZUdhdGhlcmluZ0RlZmVycmVkLnJlc29sdmUoKSx0aGlzLmljZUdhdGhlcmluZ0RlZmVycmVkPW51bGwpKX19LHdhaXRGb3JJY2VHYXRoZXJpbmdDb21wbGV0ZTp7d3JpdGFibGU6ITAsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0ljZUdhdGhlcmluZ0NvbXBsZXRlKCk/ZS5VdGlscy5Qcm9taXNlLnJlc29sdmUoKToodGhpcy5pc0ljZUdhdGhlcmluZ0RlZmVycmVkfHwodGhpcy5pY2VHYXRoZXJpbmdEZWZlcnJlZD1lLlV0aWxzLmRlZmVyKCkpLHRoaXMuaWNlR2F0aGVyaW5nRGVmZXJyZWQucHJvbWlzZSl9fX0pLGl9fSkuY2FsbCh0LGkoMCkpfSxmdW5jdGlvbihlLHQsaSl7XCJ1c2Ugc3RyaWN0XCI7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxpLHMpe2Zvcih2YXIgcixuPWUuVXRpbHMuYnVpbGRTdGF0dXNMaW5lKHQpLG89aS5nZXRIZWFkZXJzKFwidmlhXCIpLGE9by5sZW5ndGgsYz0wO2M8YTtjKyspbis9XCJWaWE6IFwiK29bY10rXCJcXHJcXG5cIjtyPWkuZ2V0SGVhZGVyKFwiVG9cIiksaS50b190YWd8fChyKz1cIjt0YWc9XCIrZS5VdGlscy5uZXdUYWcoKSksbis9XCJUbzogXCIrcitcIlxcclxcblwiLG4rPVwiRnJvbTogXCIraS5nZXRIZWFkZXIoXCJGcm9tXCIpK1wiXFxyXFxuXCIsbis9XCJDYWxsLUlEOiBcIitpLmNhbGxfaWQrXCJcXHJcXG5cIixuKz1cIkNTZXE6IFwiK2kuY3NlcStcIiBcIitpLm1ldGhvZCtcIlxcclxcblwiLG4rPVwiXFxyXFxuXCIscy5zZW5kKG4pfXZhciBpLHM9W10scj1bXSxuPVtdO3MucHVzaChmdW5jdGlvbihlLGkscyl7aWYoIWUucnVyaXx8XCJzaXBcIiE9PWUucnVyaS5zY2hlbWUpcmV0dXJuIHQoNDE2LGUscyksITF9KSxzLnB1c2goZnVuY3Rpb24oZSxpLHMpe2lmKCFlLnRvX3RhZyYmZS5jYWxsX2lkLnN1YnN0cigwLDUpPT09aS5jb25maWd1cmF0aW9uLnNpcGpzSWQpcmV0dXJuIHQoNDgyLGUscyksITF9KSxzLnB1c2goZnVuY3Rpb24oaSxzLHIpe2lmKGUuVXRpbHMuc3RyX3V0ZjhfbGVuZ3RoKGkuYm9keSk8aS5nZXRIZWFkZXIoXCJjb250ZW50LWxlbmd0aFwiKSlyZXR1cm4gdCg0MDAsaSxyKSwhMX0pLHMucHVzaChmdW5jdGlvbihpLHMscil7dmFyIG4sbyxhPWkuZnJvbV90YWcsYz1pLmNhbGxfaWQsaD1pLmNzZXE7aWYoIWkudG9fdGFnKWlmKGkubWV0aG9kPT09ZS5DLklOVklURSl7aWYobj1zLnRyYW5zYWN0aW9ucy5pc3RbaS52aWFfYnJhbmNoXSlyZXR1cm47Zm9yKG8gaW4gcy50cmFuc2FjdGlvbnMuaXN0KWlmKChuPXMudHJhbnNhY3Rpb25zLmlzdFtvXSkucmVxdWVzdC5mcm9tX3RhZz09PWEmJm4ucmVxdWVzdC5jYWxsX2lkPT09YyYmbi5yZXF1ZXN0LmNzZXE9PT1oKXJldHVybiB0KDQ4MixpLHIpLCExfWVsc2V7aWYobj1zLnRyYW5zYWN0aW9ucy5uaXN0W2kudmlhX2JyYW5jaF0pcmV0dXJuO2ZvcihvIGluIHMudHJhbnNhY3Rpb25zLm5pc3QpaWYoKG49cy50cmFuc2FjdGlvbnMubmlzdFtvXSkucmVxdWVzdC5mcm9tX3RhZz09PWEmJm4ucmVxdWVzdC5jYWxsX2lkPT09YyYmbi5yZXF1ZXN0LmNzZXE9PT1oKXJldHVybiB0KDQ4MixpLHIpLCExfX0pLHIucHVzaChmdW5jdGlvbihlLHQpe2lmKGUuZ2V0SGVhZGVycyhcInZpYVwiKS5sZW5ndGg+MSlyZXR1cm4gdC5nZXRMb2dnZXIoXCJzaXAuc2FuaXR5Y2hlY2tcIikud2FybihcIk1vcmUgdGhhbiBvbmUgVmlhIGhlYWRlciBmaWVsZCBwcmVzZW50IGluIHRoZSByZXNwb25zZS4gRHJvcHBpbmcgdGhlIHJlc3BvbnNlXCIpLCExfSksci5wdXNoKGZ1bmN0aW9uKGUsdCl7dmFyIGk9dC5jb25maWd1cmF0aW9uLnZpYUhvc3Q7aWYoZS52aWEuaG9zdCE9PWl8fHZvaWQgMCE9PWUudmlhLnBvcnQpcmV0dXJuIHQuZ2V0TG9nZ2VyKFwic2lwLnNhbml0eWNoZWNrXCIpLndhcm4oXCJWaWEgc2VudC1ieSBpbiB0aGUgcmVzcG9uc2UgZG9lcyBub3QgbWF0Y2ggVUEgVmlhIGhvc3QgdmFsdWUuIERyb3BwaW5nIHRoZSByZXNwb25zZVwiKSwhMX0pLHIucHVzaChmdW5jdGlvbih0LGkpe2lmKGUuVXRpbHMuc3RyX3V0ZjhfbGVuZ3RoKHQuYm9keSk8dC5nZXRIZWFkZXIoXCJjb250ZW50LWxlbmd0aFwiKSlyZXR1cm4gaS5nZXRMb2dnZXIoXCJzaXAuc2FuaXR5Y2hlY2tcIikud2FybihcIk1lc3NhZ2UgYm9keSBsZW5ndGggaXMgbG93ZXIgdGhhbiB0aGUgdmFsdWUgaW4gQ29udGVudC1MZW5ndGggaGVhZGVyIGZpZWxkLiBEcm9wcGluZyB0aGUgcmVzcG9uc2VcIiksITF9KSxuLnB1c2goZnVuY3Rpb24oZSx0KXtmb3IodmFyIGk9W1wiZnJvbVwiLFwidG9cIixcImNhbGxfaWRcIixcImNzZXFcIixcInZpYVwiXSxzPWkubGVuZ3RoO3MtLTspaWYoIWUuaGFzSGVhZGVyKGlbc10pKXJldHVybiB0LmdldExvZ2dlcihcInNpcC5zYW5pdHljaGVja1wiKS53YXJuKFwiTWlzc2luZyBtYW5kYXRvcnkgaGVhZGVyIGZpZWxkIDogXCIraVtzXStcIi4gRHJvcHBpbmcgdGhlIHJlc3BvbnNlXCIpLCExfSksaT1mdW5jdGlvbih0LGksbyl7dmFyIGE7Zm9yKGE9bi5sZW5ndGg7YS0tOylpZighMT09PW5bYV0odCxpLG8pKXJldHVybiExO2lmKHQgaW5zdGFuY2VvZiBlLkluY29taW5nUmVxdWVzdCl7Zm9yKGE9cy5sZW5ndGg7YS0tOylpZighMT09PXNbYV0odCxpLG8pKXJldHVybiExfWVsc2UgaWYodCBpbnN0YW5jZW9mIGUuSW5jb21pbmdSZXNwb25zZSlmb3IoYT1yLmxlbmd0aDthLS07KWlmKCExPT09clthXSh0LGksbykpcmV0dXJuITE7cmV0dXJuITB9LGUuc2FuaXR5Q2hlY2s9aX19LGZ1bmN0aW9uKGUsdCxpKXtcInVzZSBzdHJpY3RcIjtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIHQ9ZnVuY3Rpb24oZSl7dGhpcy5sb2dnZXI9ZS5nZXRMb2dnZXIoXCJzaXBqcy5kaWdlc3RhdXRoZW50aWNhdGlvblwiKSx0aGlzLnVzZXJuYW1lPWUuY29uZmlndXJhdGlvbi5hdXRob3JpemF0aW9uVXNlcix0aGlzLnBhc3N3b3JkPWUuY29uZmlndXJhdGlvbi5wYXNzd29yZCx0aGlzLmNub25jZT1udWxsLHRoaXMubmM9MCx0aGlzLm5jSGV4PVwiMDAwMDAwMDBcIix0aGlzLnJlc3BvbnNlPW51bGx9LHQucHJvdG90eXBlLmF1dGhlbnRpY2F0ZT1mdW5jdGlvbih0LGkpe2lmKHRoaXMuYWxnb3JpdGhtPWkuYWxnb3JpdGhtLHRoaXMucmVhbG09aS5yZWFsbSx0aGlzLm5vbmNlPWkubm9uY2UsdGhpcy5vcGFxdWU9aS5vcGFxdWUsdGhpcy5zdGFsZT1pLnN0YWxlLHRoaXMuYWxnb3JpdGhtKXtpZihcIk1ENVwiIT09dGhpcy5hbGdvcml0aG0pcmV0dXJuIHRoaXMubG9nZ2VyLndhcm4oJ2NoYWxsZW5nZSB3aXRoIERpZ2VzdCBhbGdvcml0aG0gZGlmZmVyZW50IHRoYW4gXCJNRDVcIiwgYXV0aGVudGljYXRpb24gYWJvcnRlZCcpLCExfWVsc2UgdGhpcy5hbGdvcml0aG09XCJNRDVcIjtpZighdGhpcy5yZWFsbSlyZXR1cm4gdGhpcy5sb2dnZXIud2FybihcImNoYWxsZW5nZSB3aXRob3V0IERpZ2VzdCByZWFsbSwgYXV0aGVudGljYXRpb24gYWJvcnRlZFwiKSwhMTtpZighdGhpcy5ub25jZSlyZXR1cm4gdGhpcy5sb2dnZXIud2FybihcImNoYWxsZW5nZSB3aXRob3V0IERpZ2VzdCBub25jZSwgYXV0aGVudGljYXRpb24gYWJvcnRlZFwiKSwhMTtpZihpLnFvcClpZihpLnFvcC5pbmRleE9mKFwiYXV0aFwiKT4tMSl0aGlzLnFvcD1cImF1dGhcIjtlbHNle2lmKCEoaS5xb3AuaW5kZXhPZihcImF1dGgtaW50XCIpPi0xKSlyZXR1cm4gdGhpcy5sb2dnZXIud2FybignY2hhbGxlbmdlIHdpdGhvdXQgRGlnZXN0IHFvcCBkaWZmZXJlbnQgdGhhbiBcImF1dGhcIiBvciBcImF1dGgtaW50XCIsIGF1dGhlbnRpY2F0aW9uIGFib3J0ZWQnKSwhMTt0aGlzLnFvcD1cImF1dGgtaW50XCJ9ZWxzZSB0aGlzLnFvcD1udWxsO3JldHVybiB0aGlzLm1ldGhvZD10Lm1ldGhvZCx0aGlzLnVyaT10LnJ1cmksdGhpcy5jbm9uY2U9ZS5jcmVhdGVSYW5kb21Ub2tlbigxMiksdGhpcy5uYys9MSx0aGlzLnVwZGF0ZU5jSGV4KCksNDI5NDk2NzI5Nj09PXRoaXMubmMmJih0aGlzLm5jPTEsdGhpcy5uY0hleD1cIjAwMDAwMDAxXCIpLHRoaXMuY2FsY3VsYXRlUmVzcG9uc2UoKSwhMH0sdC5wcm90b3R5cGUuY2FsY3VsYXRlUmVzcG9uc2U9ZnVuY3Rpb24oKXt2YXIgdCxpO3Q9ZS5jYWxjdWxhdGVNRDUodGhpcy51c2VybmFtZStcIjpcIit0aGlzLnJlYWxtK1wiOlwiK3RoaXMucGFzc3dvcmQpLFwiYXV0aFwiPT09dGhpcy5xb3A/KGk9ZS5jYWxjdWxhdGVNRDUodGhpcy5tZXRob2QrXCI6XCIrdGhpcy51cmkpLHRoaXMucmVzcG9uc2U9ZS5jYWxjdWxhdGVNRDUodCtcIjpcIit0aGlzLm5vbmNlK1wiOlwiK3RoaXMubmNIZXgrXCI6XCIrdGhpcy5jbm9uY2UrXCI6YXV0aDpcIitpKSk6XCJhdXRoLWludFwiPT09dGhpcy5xb3A/KGk9ZS5jYWxjdWxhdGVNRDUodGhpcy5tZXRob2QrXCI6XCIrdGhpcy51cmkrXCI6XCIrZS5jYWxjdWxhdGVNRDUodGhpcy5ib2R5P3RoaXMuYm9keTpcIlwiKSksdGhpcy5yZXNwb25zZT1lLmNhbGN1bGF0ZU1ENSh0K1wiOlwiK3RoaXMubm9uY2UrXCI6XCIrdGhpcy5uY0hleCtcIjpcIit0aGlzLmNub25jZStcIjphdXRoLWludDpcIitpKSk6bnVsbD09PXRoaXMucW9wJiYoaT1lLmNhbGN1bGF0ZU1ENSh0aGlzLm1ldGhvZCtcIjpcIit0aGlzLnVyaSksdGhpcy5yZXNwb25zZT1lLmNhbGN1bGF0ZU1ENSh0K1wiOlwiK3RoaXMubm9uY2UrXCI6XCIraSkpfSx0LnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3ZhciBlPVtdO2lmKCF0aGlzLnJlc3BvbnNlKXRocm93IG5ldyBFcnJvcihcInJlc3BvbnNlIGZpZWxkIGRvZXMgbm90IGV4aXN0LCBjYW5ub3QgZ2VuZXJhdGUgQXV0aG9yaXphdGlvbiBoZWFkZXJcIik7cmV0dXJuIGUucHVzaChcImFsZ29yaXRobT1cIit0aGlzLmFsZ29yaXRobSksZS5wdXNoKCd1c2VybmFtZT1cIicrdGhpcy51c2VybmFtZSsnXCInKSxlLnB1c2goJ3JlYWxtPVwiJyt0aGlzLnJlYWxtKydcIicpLGUucHVzaCgnbm9uY2U9XCInK3RoaXMubm9uY2UrJ1wiJyksZS5wdXNoKCd1cmk9XCInK3RoaXMudXJpKydcIicpLGUucHVzaCgncmVzcG9uc2U9XCInK3RoaXMucmVzcG9uc2UrJ1wiJyksdGhpcy5vcGFxdWUmJmUucHVzaCgnb3BhcXVlPVwiJyt0aGlzLm9wYXF1ZSsnXCInKSx0aGlzLnFvcCYmKGUucHVzaChcInFvcD1cIit0aGlzLnFvcCksZS5wdXNoKCdjbm9uY2U9XCInK3RoaXMuY25vbmNlKydcIicpLGUucHVzaChcIm5jPVwiK3RoaXMubmNIZXgpKSxcIkRpZ2VzdCBcIitlLmpvaW4oXCIsIFwiKX0sdC5wcm90b3R5cGUudXBkYXRlTmNIZXg9ZnVuY3Rpb24oKXt2YXIgZT1OdW1iZXIodGhpcy5uYykudG9TdHJpbmcoMTYpO3RoaXMubmNIZXg9XCIwMDAwMDAwMFwiLnN1YnN0cigwLDgtZS5sZW5ndGgpK2V9LHR9fSxmdW5jdGlvbihlLHQsaSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHM9aSgzMSk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybntwYXJzZTpmdW5jdGlvbih0LGkpe3ZhciByPXtzdGFydFJ1bGU6aSxTSVA6ZX07dHJ5e3MucGFyc2UodCxyKX1jYXRjaChlKXtyLmRhdGE9LTF9cmV0dXJuIHIuZGF0YX19fX0sZnVuY3Rpb24oZSx0LGkpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHMoZSx0LGkscil7dGhpcy5tZXNzYWdlPWUsdGhpcy5leHBlY3RlZD10LHRoaXMuZm91bmQ9aSx0aGlzLmxvY2F0aW9uPXIsdGhpcy5uYW1lPVwiU3ludGF4RXJyb3JcIixcImZ1bmN0aW9uXCI9PXR5cGVvZiBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSYmRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcyxzKX0hZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBpKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWkucHJvdG90eXBlPXQucHJvdG90eXBlLGUucHJvdG90eXBlPW5ldyBpfShzLEVycm9yKSxzLmJ1aWxkTWVzc2FnZT1mdW5jdGlvbihlLHQpe2Z1bmN0aW9uIGkoZSl7cmV0dXJuIGUuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNikudG9VcHBlckNhc2UoKX1mdW5jdGlvbiBzKGUpe3JldHVybiBlLnJlcGxhY2UoL1xcXFwvZyxcIlxcXFxcXFxcXCIpLnJlcGxhY2UoL1wiL2csJ1xcXFxcIicpLnJlcGxhY2UoL1xcMC9nLFwiXFxcXDBcIikucmVwbGFjZSgvXFx0L2csXCJcXFxcdFwiKS5yZXBsYWNlKC9cXG4vZyxcIlxcXFxuXCIpLnJlcGxhY2UoL1xcci9nLFwiXFxcXHJcIikucmVwbGFjZSgvW1xceDAwLVxceDBGXS9nLGZ1bmN0aW9uKGUpe3JldHVyblwiXFxcXHgwXCIraShlKX0pLnJlcGxhY2UoL1tcXHgxMC1cXHgxRlxceDdGLVxceDlGXS9nLGZ1bmN0aW9uKGUpe3JldHVyblwiXFxcXHhcIitpKGUpfSl9ZnVuY3Rpb24gcihlKXtyZXR1cm4gZS5yZXBsYWNlKC9cXFxcL2csXCJcXFxcXFxcXFwiKS5yZXBsYWNlKC9cXF0vZyxcIlxcXFxdXCIpLnJlcGxhY2UoL1xcXi9nLFwiXFxcXF5cIikucmVwbGFjZSgvLS9nLFwiXFxcXC1cIikucmVwbGFjZSgvXFwwL2csXCJcXFxcMFwiKS5yZXBsYWNlKC9cXHQvZyxcIlxcXFx0XCIpLnJlcGxhY2UoL1xcbi9nLFwiXFxcXG5cIikucmVwbGFjZSgvXFxyL2csXCJcXFxcclwiKS5yZXBsYWNlKC9bXFx4MDAtXFx4MEZdL2csZnVuY3Rpb24oZSl7cmV0dXJuXCJcXFxceDBcIitpKGUpfSkucmVwbGFjZSgvW1xceDEwLVxceDFGXFx4N0YtXFx4OUZdL2csZnVuY3Rpb24oZSl7cmV0dXJuXCJcXFxceFwiK2koZSl9KX1mdW5jdGlvbiBuKGUpe3JldHVybiBvW2UudHlwZV0oZSl9dmFyIG89e2xpdGVyYWw6ZnVuY3Rpb24oZSl7cmV0dXJuJ1wiJytzKGUudGV4dCkrJ1wiJ30sY2xhc3M6ZnVuY3Rpb24oZSl7dmFyIHQsaT1cIlwiO2Zvcih0PTA7dDxlLnBhcnRzLmxlbmd0aDt0KyspaSs9ZS5wYXJ0c1t0XWluc3RhbmNlb2YgQXJyYXk/cihlLnBhcnRzW3RdWzBdKStcIi1cIityKGUucGFydHNbdF1bMV0pOnIoZS5wYXJ0c1t0XSk7cmV0dXJuXCJbXCIrKGUuaW52ZXJ0ZWQ/XCJeXCI6XCJcIikraStcIl1cIn0sYW55OmZ1bmN0aW9uKGUpe3JldHVyblwiYW55IGNoYXJhY3RlclwifSxlbmQ6ZnVuY3Rpb24oZSl7cmV0dXJuXCJlbmQgb2YgaW5wdXRcIn0sb3RoZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZGVzY3JpcHRpb259fTtyZXR1cm5cIkV4cGVjdGVkIFwiK2Z1bmN0aW9uKGUpe3ZhciB0LGkscz1uZXcgQXJyYXkoZS5sZW5ndGgpO2Zvcih0PTA7dDxlLmxlbmd0aDt0Kyspc1t0XT1uKGVbdF0pO2lmKHMuc29ydCgpLHMubGVuZ3RoPjApe2Zvcih0PTEsaT0xO3Q8cy5sZW5ndGg7dCsrKXNbdC0xXSE9PXNbdF0mJihzW2ldPXNbdF0saSsrKTtzLmxlbmd0aD1pfXN3aXRjaChzLmxlbmd0aCl7Y2FzZSAxOnJldHVybiBzWzBdO2Nhc2UgMjpyZXR1cm4gc1swXStcIiBvciBcIitzWzFdO2RlZmF1bHQ6cmV0dXJuIHMuc2xpY2UoMCwtMSkuam9pbihcIiwgXCIpK1wiLCBvciBcIitzW3MubGVuZ3RoLTFdfX0oZSkrXCIgYnV0IFwiK2Z1bmN0aW9uKGUpe3JldHVybiBlPydcIicrcyhlKSsnXCInOlwiZW5kIG9mIGlucHV0XCJ9KHQpK1wiIGZvdW5kLlwifSxlLmV4cG9ydHM9e1N5bnRheEVycm9yOnMscGFyc2U6ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBpKCl7cmV0dXJuIGUuc3Vic3RyaW5nKFMsRSl9ZnVuY3Rpb24gcigpe3JldHVybiBjKFMsRSl9ZnVuY3Rpb24gbihlLHQpe3JldHVybnt0eXBlOlwibGl0ZXJhbFwiLHRleHQ6ZSxpZ25vcmVDYXNlOnR9fWZ1bmN0aW9uIG8oZSx0LGkpe3JldHVybnt0eXBlOlwiY2xhc3NcIixwYXJ0czplLGludmVydGVkOnQsaWdub3JlQ2FzZTppfX1mdW5jdGlvbiBhKHQpe3ZhciBpLHM9Q1t0XTtpZihzKXJldHVybiBzO2ZvcihpPXQtMTshQ1tpXTspaS0tO2ZvcihzPXtsaW5lOihzPUNbaV0pLmxpbmUsY29sdW1uOnMuY29sdW1ufTtpPHQ7KTEwPT09ZS5jaGFyQ29kZUF0KGkpPyhzLmxpbmUrKyxzLmNvbHVtbj0xKTpzLmNvbHVtbisrLGkrKztyZXR1cm4gQ1t0XT1zLHN9ZnVuY3Rpb24gYyhlLHQpe3ZhciBpPWEoZSkscz1hKHQpO3JldHVybntzdGFydDp7b2Zmc2V0OmUsbGluZTppLmxpbmUsY29sdW1uOmkuY29sdW1ufSxlbmQ6e29mZnNldDp0LGxpbmU6cy5saW5lLGNvbHVtbjpzLmNvbHVtbn19fWZ1bmN0aW9uIGgoZSl7RTxSfHwoRT5SJiYoUj1FLHY9W10pLHYucHVzaChlKSl9ZnVuY3Rpb24gdShlLHQsaSl7cmV0dXJuIG5ldyBzKHMuYnVpbGRNZXNzYWdlKGUsdCksZSx0LGkpfWZ1bmN0aW9uIGwoZSl7dmFyIHQsaT1uZXcgQXJyYXkoZS5sZW5ndGgpO2Zvcih0PTA7dDxlLmxlbmd0aDt0KyspaVt0XT1lLmNoYXJDb2RlQXQodCktMzI7cmV0dXJuIGl9ZnVuY3Rpb24gZCh0KXtmb3IodmFyIGkscyxyPV9bdF0sbj0wLG89W10sYT1yLmxlbmd0aCxjPVtdLHU9W107Oyl7Zm9yKDtuPGE7KXN3aXRjaChyW25dKXtjYXNlIDA6dS5wdXNoKG1bcltuKzFdXSksbis9MjticmVhaztjYXNlIDE6dS5wdXNoKHZvaWQgMCksbisrO2JyZWFrO2Nhc2UgMjp1LnB1c2gobnVsbCksbisrO2JyZWFrO2Nhc2UgMzp1LnB1c2goZyksbisrO2JyZWFrO2Nhc2UgNDp1LnB1c2goW10pLG4rKzticmVhaztjYXNlIDU6dS5wdXNoKEUpLG4rKzticmVhaztjYXNlIDY6dS5wb3AoKSxuKys7YnJlYWs7Y2FzZSA3OkU9dS5wb3AoKSxuKys7YnJlYWs7Y2FzZSA4OnUubGVuZ3RoLT1yW24rMV0sbis9MjticmVhaztjYXNlIDk6dS5zcGxpY2UoLTIsMSksbisrO2JyZWFrO2Nhc2UgMTA6dVt1Lmxlbmd0aC0yXS5wdXNoKHUucG9wKCkpLG4rKzticmVhaztjYXNlIDExOnUucHVzaCh1LnNwbGljZSh1Lmxlbmd0aC1yW24rMV0scltuKzFdKSksbis9MjticmVhaztjYXNlIDEyOnUucHVzaChlLnN1YnN0cmluZyh1LnBvcCgpLEUpKSxuKys7YnJlYWs7Y2FzZSAxMzpjLnB1c2goYSksby5wdXNoKG4rMytyW24rMV0rcltuKzJdKSx1W3UubGVuZ3RoLTFdPyhhPW4rMytyW24rMV0sbis9Myk6KGE9biszK3JbbisxXStyW24rMl0sbis9MytyW24rMV0pO2JyZWFrO2Nhc2UgMTQ6Yy5wdXNoKGEpLG8ucHVzaChuKzMrcltuKzFdK3JbbisyXSksdVt1Lmxlbmd0aC0xXT09PWc/KGE9biszK3JbbisxXSxuKz0zKTooYT1uKzMrcltuKzFdK3JbbisyXSxuKz0zK3JbbisxXSk7YnJlYWs7Y2FzZSAxNTpjLnB1c2goYSksby5wdXNoKG4rMytyW24rMV0rcltuKzJdKSx1W3UubGVuZ3RoLTFdIT09Zz8oYT1uKzMrcltuKzFdLG4rPTMpOihhPW4rMytyW24rMV0rcltuKzJdLG4rPTMrcltuKzFdKTticmVhaztjYXNlIDE2OnVbdS5sZW5ndGgtMV0hPT1nPyhjLnB1c2goYSksby5wdXNoKG4pLGE9bisyK3JbbisxXSxuKz0yKTpuKz0yK3JbbisxXTticmVhaztjYXNlIDE3OmMucHVzaChhKSxvLnB1c2gobiszK3JbbisxXStyW24rMl0pLGUubGVuZ3RoPkU/KGE9biszK3JbbisxXSxuKz0zKTooYT1uKzMrcltuKzFdK3JbbisyXSxuKz0zK3JbbisxXSk7YnJlYWs7Y2FzZSAxODpjLnB1c2goYSksby5wdXNoKG4rNCtyW24rMl0rcltuKzNdKSxlLnN1YnN0cihFLG1bcltuKzFdXS5sZW5ndGgpPT09bVtyW24rMV1dPyhhPW4rNCtyW24rMl0sbis9NCk6KGE9bis0K3JbbisyXStyW24rM10sbis9NCtyW24rMl0pO2JyZWFrO2Nhc2UgMTk6Yy5wdXNoKGEpLG8ucHVzaChuKzQrcltuKzJdK3JbbiszXSksZS5zdWJzdHIoRSxtW3JbbisxXV0ubGVuZ3RoKS50b0xvd2VyQ2FzZSgpPT09bVtyW24rMV1dPyhhPW4rNCtyW24rMl0sbis9NCk6KGE9bis0K3JbbisyXStyW24rM10sbis9NCtyW24rMl0pO2JyZWFrO2Nhc2UgMjA6Yy5wdXNoKGEpLG8ucHVzaChuKzQrcltuKzJdK3JbbiszXSksbVtyW24rMV1dLnRlc3QoZS5jaGFyQXQoRSkpPyhhPW4rNCtyW24rMl0sbis9NCk6KGE9bis0K3JbbisyXStyW24rM10sbis9NCtyW24rMl0pO2JyZWFrO2Nhc2UgMjE6dS5wdXNoKGUuc3Vic3RyKEUscltuKzFdKSksRSs9cltuKzFdLG4rPTI7YnJlYWs7Y2FzZSAyMjp1LnB1c2gobVtyW24rMV1dKSxFKz1tW3JbbisxXV0ubGVuZ3RoLG4rPTI7YnJlYWs7Y2FzZSAyMzp1LnB1c2goZyksMD09PUEmJmgobVtyW24rMV1dKSxuKz0yO2JyZWFrO2Nhc2UgMjQ6Uz11W3UubGVuZ3RoLTEtcltuKzFdXSxuKz0yO2JyZWFrO2Nhc2UgMjU6Uz1FLG4rKzticmVhaztjYXNlIDI2OmZvcihpPXIuc2xpY2Uobis0LG4rNCtyW24rM10pLHM9MDtzPHJbbiszXTtzKyspaVtzXT11W3UubGVuZ3RoLTEtaVtzXV07dS5zcGxpY2UodS5sZW5ndGgtcltuKzJdLHJbbisyXSxtW3JbbisxXV0uYXBwbHkobnVsbCxpKSksbis9NCtyW24rM107YnJlYWs7Y2FzZSAyNzp1LnB1c2goZChyW24rMV0pKSxuKz0yO2JyZWFrO2Nhc2UgMjg6QSsrLG4rKzticmVhaztjYXNlIDI5OkEtLSxuKys7YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIG9wY29kZTogXCIrcltuXStcIi5cIil9aWYoIShjLmxlbmd0aD4wKSlicmVhazthPWMucG9wKCksbj1vLnBvcCgpfXJldHVybiB1WzBdfXQ9dm9pZCAwIT09dD90Ont9O3ZhciBwLGc9e30sZj17Q29udGFjdDoxMTgsTmFtZV9BZGRyX0hlYWRlcjoxNTUsUmVjb3JkX1JvdXRlOjE3NSxSZXF1ZXN0X1Jlc3BvbnNlOjgxLFNJUF9VUkk6NDUsU3Vic2NyaXB0aW9uX1N0YXRlOjE4NSxTdXBwb3J0ZWQ6MTkwLFJlcXVpcmU6MTgxLFZpYToxOTMsYWJzb2x1dGVVUkk6ODQsQ2FsbF9JRDoxMTcsQ29udGVudF9EaXNwb3NpdGlvbjoxMjksQ29udGVudF9MZW5ndGg6MTM0LENvbnRlbnRfVHlwZToxMzUsQ1NlcToxNDUsZGlzcGxheU5hbWU6MTIxLEV2ZW50OjE0OCxGcm9tOjE1MCxob3N0OjUyLE1heF9Gb3J3YXJkczoxNTMsTWluX1NFOjIxMixQcm94eV9BdXRoZW50aWNhdGU6MTU2LHF1b3RlZF9zdHJpbmc6NDAsUmVmZXJfVG86MTc3LFJlcGxhY2VzOjE3OCxTZXNzaW9uX0V4cGlyZXM6MjA5LHN0dW5fVVJJOjIxNixUbzoxOTEsdHVybl9VUkk6MjIyLHV1aWQ6MjI1LFdXV19BdXRoZW50aWNhdGU6MjA4LGNoYWxsZW5nZToxNTcsc2lwZnJhZzoyMjksUmVmZXJyZWRfQnk6MjMwfSxUPTExOCxtPVtcIlxcclxcblwiLG4oXCJcXHJcXG5cIiwhMSksL15bMC05XS8sbyhbW1wiMFwiLFwiOVwiXV0sITEsITEpLC9eW2EtekEtWl0vLG8oW1tcImFcIixcInpcIl0sW1wiQVwiLFwiWlwiXV0sITEsITEpLC9eWzAtOWEtZkEtRl0vLG8oW1tcIjBcIixcIjlcIl0sW1wiYVwiLFwiZlwiXSxbXCJBXCIsXCJGXCJdXSwhMSwhMSksL15bXFwwLVxceEZGXS8sbyhbW1wiXFwwXCIsXCJcXHhmZlwiXV0sITEsITEpLC9eW1wiXS8sbyhbJ1wiJ10sITEsITEpLFwiIFwiLG4oXCIgXCIsITEpLFwiXFx0XCIsbihcIlxcdFwiLCExKSwvXlthLXpBLVowLTldLyxvKFtbXCJhXCIsXCJ6XCJdLFtcIkFcIixcIlpcIl0sW1wiMFwiLFwiOVwiXV0sITEsITEpLFwiO1wiLG4oXCI7XCIsITEpLFwiL1wiLG4oXCIvXCIsITEpLFwiP1wiLG4oXCI/XCIsITEpLFwiOlwiLG4oXCI6XCIsITEpLFwiQFwiLG4oXCJAXCIsITEpLFwiJlwiLG4oXCImXCIsITEpLFwiPVwiLG4oXCI9XCIsITEpLFwiK1wiLG4oXCIrXCIsITEpLFwiJFwiLG4oXCIkXCIsITEpLFwiLFwiLG4oXCIsXCIsITEpLFwiLVwiLG4oXCItXCIsITEpLFwiX1wiLG4oXCJfXCIsITEpLFwiLlwiLG4oXCIuXCIsITEpLFwiIVwiLG4oXCIhXCIsITEpLFwiflwiLG4oXCJ+XCIsITEpLFwiKlwiLG4oXCIqXCIsITEpLFwiJ1wiLG4oXCInXCIsITEpLFwiKFwiLG4oXCIoXCIsITEpLFwiKVwiLG4oXCIpXCIsITEpLFwiJVwiLG4oXCIlXCIsITEpLGZ1bmN0aW9uKCl7cmV0dXJuXCIgXCJ9LGZ1bmN0aW9uKCl7cmV0dXJuXCI6XCJ9LC9eWyEtfl0vLG8oW1tcIiFcIixcIn5cIl1dLCExLCExKSwvXltcXHg4MC1cXHVGRkZGXS8sbyhbW1wiXFx4ODBcIixcIlxcdWZmZmZcIl1dLCExLCExKSwvXltcXHg4MC1cXHhCRl0vLG8oW1tcIlxceDgwXCIsXCJcXHhiZlwiXV0sITEsITEpLC9eW2EtZl0vLG8oW1tcImFcIixcImZcIl1dLCExLCExKSxcImBcIixuKFwiYFwiLCExKSxcIjxcIixuKFwiPFwiLCExKSxcIj5cIixuKFwiPlwiLCExKSxcIlxcXFxcIixuKFwiXFxcXFwiLCExKSxcIltcIixuKFwiW1wiLCExKSxcIl1cIixuKFwiXVwiLCExKSxcIntcIixuKFwie1wiLCExKSxcIn1cIixuKFwifVwiLCExKSxmdW5jdGlvbigpe3JldHVyblwiKlwifSxmdW5jdGlvbigpe3JldHVyblwiL1wifSxmdW5jdGlvbigpe3JldHVyblwiPVwifSxmdW5jdGlvbigpe3JldHVyblwiKFwifSxmdW5jdGlvbigpe3JldHVyblwiKVwifSxmdW5jdGlvbigpe3JldHVyblwiPlwifSxmdW5jdGlvbigpe3JldHVyblwiPFwifSxmdW5jdGlvbigpe3JldHVyblwiLFwifSxmdW5jdGlvbigpe3JldHVyblwiO1wifSxmdW5jdGlvbigpe3JldHVyblwiOlwifSxmdW5jdGlvbigpe3JldHVybidcIid9LC9eWyEtJ10vLG8oW1tcIiFcIixcIidcIl1dLCExLCExKSwvXlsqLVtdLyxvKFtbXCIqXCIsXCJbXCJdXSwhMSwhMSksL15bXFxdLX5dLyxvKFtbXCJdXCIsXCJ+XCJdXSwhMSwhMSksZnVuY3Rpb24oZSl7cmV0dXJuIGV9LC9eWyMtW10vLG8oW1tcIiNcIixcIltcIl1dLCExLCExKSwvXltcXDAtXFx0XS8sbyhbW1wiXFwwXCIsXCJcXHRcIl1dLCExLCExKSwvXltcXHgwQi1cXGZdLyxvKFtbXCJcXHZcIixcIlxcZlwiXV0sITEsITEpLC9eW1xceDBFLVxceDdGXS8sbyhbW1wiXFx4MGVcIixcIlxceDdmXCJdXSwhMSwhMSksZnVuY3Rpb24oKXt0LmRhdGEudXJpPW5ldyB0LlNJUC5VUkkodC5kYXRhLnNjaGVtZSx0LmRhdGEudXNlcix0LmRhdGEuaG9zdCx0LmRhdGEucG9ydCksZGVsZXRlIHQuZGF0YS5zY2hlbWUsZGVsZXRlIHQuZGF0YS51c2VyLGRlbGV0ZSB0LmRhdGEuaG9zdCxkZWxldGUgdC5kYXRhLmhvc3RfdHlwZSxkZWxldGUgdC5kYXRhLnBvcnR9LGZ1bmN0aW9uKCl7dC5kYXRhLnVyaT1uZXcgdC5TSVAuVVJJKHQuZGF0YS5zY2hlbWUsdC5kYXRhLnVzZXIsdC5kYXRhLmhvc3QsdC5kYXRhLnBvcnQsdC5kYXRhLnVyaV9wYXJhbXMsdC5kYXRhLnVyaV9oZWFkZXJzKSxkZWxldGUgdC5kYXRhLnNjaGVtZSxkZWxldGUgdC5kYXRhLnVzZXIsZGVsZXRlIHQuZGF0YS5ob3N0LGRlbGV0ZSB0LmRhdGEuaG9zdF90eXBlLGRlbGV0ZSB0LmRhdGEucG9ydCxkZWxldGUgdC5kYXRhLnVyaV9wYXJhbXMsXCJTSVBfVVJJXCI9PT10LnN0YXJ0UnVsZSYmKHQuZGF0YT10LmRhdGEudXJpKX0sXCJzaXBzXCIsbihcInNpcHNcIiwhMCksXCJzaXBcIixuKFwic2lwXCIsITApLGZ1bmN0aW9uKGUpe3QuZGF0YS5zY2hlbWU9ZX0sZnVuY3Rpb24oKXt0LmRhdGEudXNlcj1kZWNvZGVVUklDb21wb25lbnQoaSgpLnNsaWNlKDAsLTEpKX0sZnVuY3Rpb24oKXt0LmRhdGEucGFzc3dvcmQ9aSgpfSxmdW5jdGlvbigpe3JldHVybiB0LmRhdGEuaG9zdD1pKCksdC5kYXRhLmhvc3R9LGZ1bmN0aW9uKCl7cmV0dXJuIHQuZGF0YS5ob3N0X3R5cGU9XCJkb21haW5cIixpKCl9LC9eW2EtekEtWjAtOV9cXC1dLyxvKFtbXCJhXCIsXCJ6XCJdLFtcIkFcIixcIlpcIl0sW1wiMFwiLFwiOVwiXSxcIl9cIixcIi1cIl0sITEsITEpLC9eW2EtekEtWjAtOVxcLV0vLG8oW1tcImFcIixcInpcIl0sW1wiQVwiLFwiWlwiXSxbXCIwXCIsXCI5XCJdLFwiLVwiXSwhMSwhMSksZnVuY3Rpb24oKXtyZXR1cm4gdC5kYXRhLmhvc3RfdHlwZT1cIklQdjZcIixpKCl9LFwiOjpcIixuKFwiOjpcIiwhMSksZnVuY3Rpb24oKXtyZXR1cm4gdC5kYXRhLmhvc3RfdHlwZT1cIklQdjZcIixpKCl9LGZ1bmN0aW9uKCl7cmV0dXJuIHQuZGF0YS5ob3N0X3R5cGU9XCJJUHY0XCIsaSgpfSxcIjI1XCIsbihcIjI1XCIsITEpLC9eWzAtNV0vLG8oW1tcIjBcIixcIjVcIl1dLCExLCExKSxcIjJcIixuKFwiMlwiLCExKSwvXlswLTRdLyxvKFtbXCIwXCIsXCI0XCJdXSwhMSwhMSksXCIxXCIsbihcIjFcIiwhMSksL15bMS05XS8sbyhbW1wiMVwiLFwiOVwiXV0sITEsITEpLGZ1bmN0aW9uKGUpe3JldHVybiBlPXBhcnNlSW50KGUuam9pbihcIlwiKSksdC5kYXRhLnBvcnQ9ZSxlfSxcInRyYW5zcG9ydD1cIixuKFwidHJhbnNwb3J0PVwiLCEwKSxcInVkcFwiLG4oXCJ1ZHBcIiwhMCksXCJ0Y3BcIixuKFwidGNwXCIsITApLFwic2N0cFwiLG4oXCJzY3RwXCIsITApLFwidGxzXCIsbihcInRsc1wiLCEwKSxmdW5jdGlvbihlKXt0LmRhdGEudXJpX3BhcmFtc3x8KHQuZGF0YS51cmlfcGFyYW1zPXt9KSx0LmRhdGEudXJpX3BhcmFtcy50cmFuc3BvcnQ9ZS50b0xvd2VyQ2FzZSgpfSxcInVzZXI9XCIsbihcInVzZXI9XCIsITApLFwicGhvbmVcIixuKFwicGhvbmVcIiwhMCksXCJpcFwiLG4oXCJpcFwiLCEwKSxmdW5jdGlvbihlKXt0LmRhdGEudXJpX3BhcmFtc3x8KHQuZGF0YS51cmlfcGFyYW1zPXt9KSx0LmRhdGEudXJpX3BhcmFtcy51c2VyPWUudG9Mb3dlckNhc2UoKX0sXCJtZXRob2Q9XCIsbihcIm1ldGhvZD1cIiwhMCksZnVuY3Rpb24oZSl7dC5kYXRhLnVyaV9wYXJhbXN8fCh0LmRhdGEudXJpX3BhcmFtcz17fSksdC5kYXRhLnVyaV9wYXJhbXMubWV0aG9kPWV9LFwidHRsPVwiLG4oXCJ0dGw9XCIsITApLGZ1bmN0aW9uKGUpe3QuZGF0YS5wYXJhbXN8fCh0LmRhdGEucGFyYW1zPXt9KSx0LmRhdGEucGFyYW1zLnR0bD1lfSxcIm1hZGRyPVwiLG4oXCJtYWRkcj1cIiwhMCksZnVuY3Rpb24oZSl7dC5kYXRhLnVyaV9wYXJhbXN8fCh0LmRhdGEudXJpX3BhcmFtcz17fSksdC5kYXRhLnVyaV9wYXJhbXMubWFkZHI9ZX0sXCJsclwiLG4oXCJsclwiLCEwKSxmdW5jdGlvbigpe3QuZGF0YS51cmlfcGFyYW1zfHwodC5kYXRhLnVyaV9wYXJhbXM9e30pLHQuZGF0YS51cmlfcGFyYW1zLmxyPXZvaWQgMH0sZnVuY3Rpb24oZSxpKXt0LmRhdGEudXJpX3BhcmFtc3x8KHQuZGF0YS51cmlfcGFyYW1zPXt9KSxpPW51bGw9PT1pP3ZvaWQgMDppWzFdLHQuZGF0YS51cmlfcGFyYW1zW2UudG9Mb3dlckNhc2UoKV09aSYmaS50b0xvd2VyQ2FzZSgpfSxmdW5jdGlvbihlLGkpe2U9ZS5qb2luKFwiXCIpLnRvTG93ZXJDYXNlKCksaT1pLmpvaW4oXCJcIiksdC5kYXRhLnVyaV9oZWFkZXJzfHwodC5kYXRhLnVyaV9oZWFkZXJzPXt9KSx0LmRhdGEudXJpX2hlYWRlcnNbZV0/dC5kYXRhLnVyaV9oZWFkZXJzW2VdLnB1c2goaSk6dC5kYXRhLnVyaV9oZWFkZXJzW2VdPVtpXX0sZnVuY3Rpb24oKXtcIlJlZmVyX1RvXCI9PT10LnN0YXJ0UnVsZSYmKHQuZGF0YS51cmk9bmV3IHQuU0lQLlVSSSh0LmRhdGEuc2NoZW1lLHQuZGF0YS51c2VyLHQuZGF0YS5ob3N0LHQuZGF0YS5wb3J0LHQuZGF0YS51cmlfcGFyYW1zLHQuZGF0YS51cmlfaGVhZGVycyksZGVsZXRlIHQuZGF0YS5zY2hlbWUsZGVsZXRlIHQuZGF0YS51c2VyLGRlbGV0ZSB0LmRhdGEuaG9zdCxkZWxldGUgdC5kYXRhLmhvc3RfdHlwZSxkZWxldGUgdC5kYXRhLnBvcnQsZGVsZXRlIHQuZGF0YS51cmlfcGFyYW1zKX0sXCIvL1wiLG4oXCIvL1wiLCExKSxmdW5jdGlvbigpe3QuZGF0YS5zY2hlbWU9aSgpfSxuKFwiU0lQXCIsITApLGZ1bmN0aW9uKCl7dC5kYXRhLnNpcF92ZXJzaW9uPWkoKX0sXCJJTlZJVEVcIixuKFwiSU5WSVRFXCIsITEpLFwiQUNLXCIsbihcIkFDS1wiLCExKSxcIlZYQUNIXCIsbihcIlZYQUNIXCIsITEpLFwiT1BUSU9OU1wiLG4oXCJPUFRJT05TXCIsITEpLFwiQllFXCIsbihcIkJZRVwiLCExKSxcIkNBTkNFTFwiLG4oXCJDQU5DRUxcIiwhMSksXCJSRUdJU1RFUlwiLG4oXCJSRUdJU1RFUlwiLCExKSxcIlNVQlNDUklCRVwiLG4oXCJTVUJTQ1JJQkVcIiwhMSksXCJOT1RJRllcIixuKFwiTk9USUZZXCIsITEpLFwiUkVGRVJcIixuKFwiUkVGRVJcIiwhMSksZnVuY3Rpb24oKXtyZXR1cm4gdC5kYXRhLm1ldGhvZD1pKCksdC5kYXRhLm1ldGhvZH0sZnVuY3Rpb24oZSl7dC5kYXRhLnN0YXR1c19jb2RlPXBhcnNlSW50KGUuam9pbihcIlwiKSl9LGZ1bmN0aW9uKCl7dC5kYXRhLnJlYXNvbl9waHJhc2U9aSgpfSxmdW5jdGlvbigpe3QuZGF0YT1pKCl9LGZ1bmN0aW9uKCl7dmFyIGUsaTtmb3IoaT10LmRhdGEubXVsdGlfaGVhZGVyLmxlbmd0aCxlPTA7ZTxpO2UrKylpZihudWxsPT09dC5kYXRhLm11bHRpX2hlYWRlcltlXS5wYXJzZWQpe3QuZGF0YT1udWxsO2JyZWFrfW51bGwhPT10LmRhdGE/dC5kYXRhPXQuZGF0YS5tdWx0aV9oZWFkZXI6dC5kYXRhPS0xfSxmdW5jdGlvbigpe3ZhciBlO3QuZGF0YS5tdWx0aV9oZWFkZXJ8fCh0LmRhdGEubXVsdGlfaGVhZGVyPVtdKTt0cnl7ZT1uZXcgdC5TSVAuTmFtZUFkZHJIZWFkZXIodC5kYXRhLnVyaSx0LmRhdGEuZGlzcGxheU5hbWUsdC5kYXRhLnBhcmFtcyksZGVsZXRlIHQuZGF0YS51cmksZGVsZXRlIHQuZGF0YS5kaXNwbGF5TmFtZSxkZWxldGUgdC5kYXRhLnBhcmFtc31jYXRjaCh0KXtlPW51bGx9dC5kYXRhLm11bHRpX2hlYWRlci5wdXNoKHtwb3NpdGlvbjpFLG9mZnNldDpyKCkuc3RhcnQub2Zmc2V0LHBhcnNlZDplfSl9LGZ1bmN0aW9uKGUpeydcIic9PT0oZT1pKCkudHJpbSgpKVswXSYmKGU9ZS5zdWJzdHJpbmcoMSxlLmxlbmd0aC0xKSksdC5kYXRhLmRpc3BsYXlOYW1lPWV9LFwicVwiLG4oXCJxXCIsITApLGZ1bmN0aW9uKGUpe3QuZGF0YS5wYXJhbXN8fCh0LmRhdGEucGFyYW1zPXt9KSx0LmRhdGEucGFyYW1zLnE9ZX0sXCJleHBpcmVzXCIsbihcImV4cGlyZXNcIiwhMCksZnVuY3Rpb24oZSl7dC5kYXRhLnBhcmFtc3x8KHQuZGF0YS5wYXJhbXM9e30pLHQuZGF0YS5wYXJhbXMuZXhwaXJlcz1lfSxmdW5jdGlvbihlKXtyZXR1cm4gcGFyc2VJbnQoZS5qb2luKFwiXCIpKX0sXCIwXCIsbihcIjBcIiwhMSksZnVuY3Rpb24oKXtyZXR1cm4gcGFyc2VGbG9hdChpKCkpfSxmdW5jdGlvbihlLGkpe3QuZGF0YS5wYXJhbXN8fCh0LmRhdGEucGFyYW1zPXt9KSxpPW51bGw9PT1pP3ZvaWQgMDppWzFdLHQuZGF0YS5wYXJhbXNbZS50b0xvd2VyQ2FzZSgpXT1pfSxcInJlbmRlclwiLG4oXCJyZW5kZXJcIiwhMCksXCJzZXNzaW9uXCIsbihcInNlc3Npb25cIiwhMCksXCJpY29uXCIsbihcImljb25cIiwhMCksXCJhbGVydFwiLG4oXCJhbGVydFwiLCEwKSxmdW5jdGlvbigpe1wiQ29udGVudF9EaXNwb3NpdGlvblwiPT09dC5zdGFydFJ1bGUmJih0LmRhdGEudHlwZT1pKCkudG9Mb3dlckNhc2UoKSl9LFwiaGFuZGxpbmdcIixuKFwiaGFuZGxpbmdcIiwhMCksXCJvcHRpb25hbFwiLG4oXCJvcHRpb25hbFwiLCEwKSxcInJlcXVpcmVkXCIsbihcInJlcXVpcmVkXCIsITApLGZ1bmN0aW9uKGUpe3QuZGF0YT1wYXJzZUludChlLmpvaW4oXCJcIikpfSxmdW5jdGlvbigpe3QuZGF0YT1pKCl9LFwidGV4dFwiLG4oXCJ0ZXh0XCIsITApLFwiaW1hZ2VcIixuKFwiaW1hZ2VcIiwhMCksXCJhdWRpb1wiLG4oXCJhdWRpb1wiLCEwKSxcInZpZGVvXCIsbihcInZpZGVvXCIsITApLFwiYXBwbGljYXRpb25cIixuKFwiYXBwbGljYXRpb25cIiwhMCksXCJtZXNzYWdlXCIsbihcIm1lc3NhZ2VcIiwhMCksXCJtdWx0aXBhcnRcIixuKFwibXVsdGlwYXJ0XCIsITApLFwieC1cIixuKFwieC1cIiwhMCksZnVuY3Rpb24oZSl7dC5kYXRhLnZhbHVlPXBhcnNlSW50KGUuam9pbihcIlwiKSl9LGZ1bmN0aW9uKGUpe3QuZGF0YT1lfSxmdW5jdGlvbihlKXt0LmRhdGEuZXZlbnQ9ZS50b0xvd2VyQ2FzZSgpfSxmdW5jdGlvbigpe3ZhciBlPXQuZGF0YS50YWc7dC5kYXRhPW5ldyB0LlNJUC5OYW1lQWRkckhlYWRlcih0LmRhdGEudXJpLHQuZGF0YS5kaXNwbGF5TmFtZSx0LmRhdGEucGFyYW1zKSxlJiZ0LmRhdGEuc2V0UGFyYW0oXCJ0YWdcIixlKX0sXCJ0YWdcIixuKFwidGFnXCIsITApLGZ1bmN0aW9uKGUpe3QuZGF0YS50YWc9ZX0sZnVuY3Rpb24oZSl7dC5kYXRhPXBhcnNlSW50KGUuam9pbihcIlwiKSl9LGZ1bmN0aW9uKGUpe3QuZGF0YT1lfSxmdW5jdGlvbigpe3QuZGF0YT1uZXcgdC5TSVAuTmFtZUFkZHJIZWFkZXIodC5kYXRhLnVyaSx0LmRhdGEuZGlzcGxheU5hbWUsdC5kYXRhLnBhcmFtcyl9LFwiZGlnZXN0XCIsbihcIkRpZ2VzdFwiLCEwKSxcInJlYWxtXCIsbihcInJlYWxtXCIsITApLGZ1bmN0aW9uKGUpe3QuZGF0YS5yZWFsbT1lfSxcImRvbWFpblwiLG4oXCJkb21haW5cIiwhMCksXCJub25jZVwiLG4oXCJub25jZVwiLCEwKSxmdW5jdGlvbihlKXt0LmRhdGEubm9uY2U9ZX0sXCJvcGFxdWVcIixuKFwib3BhcXVlXCIsITApLGZ1bmN0aW9uKGUpe3QuZGF0YS5vcGFxdWU9ZX0sXCJzdGFsZVwiLG4oXCJzdGFsZVwiLCEwKSxcInRydWVcIixuKFwidHJ1ZVwiLCEwKSxmdW5jdGlvbigpe3QuZGF0YS5zdGFsZT0hMH0sXCJmYWxzZVwiLG4oXCJmYWxzZVwiLCEwKSxmdW5jdGlvbigpe3QuZGF0YS5zdGFsZT0hMX0sXCJhbGdvcml0aG1cIixuKFwiYWxnb3JpdGhtXCIsITApLFwibWQ1XCIsbihcIk1ENVwiLCEwKSxcIm1kNS1zZXNzXCIsbihcIk1ENS1zZXNzXCIsITApLGZ1bmN0aW9uKGUpe3QuZGF0YS5hbGdvcml0aG09ZS50b1VwcGVyQ2FzZSgpfSxcInFvcFwiLG4oXCJxb3BcIiwhMCksXCJhdXRoLWludFwiLG4oXCJhdXRoLWludFwiLCEwKSxcImF1dGhcIixuKFwiYXV0aFwiLCEwKSxmdW5jdGlvbihlKXt0LmRhdGEucW9wfHwodC5kYXRhLnFvcD1bXSksdC5kYXRhLnFvcC5wdXNoKGUudG9Mb3dlckNhc2UoKSl9LGZ1bmN0aW9uKGUpe3QuZGF0YS52YWx1ZT1wYXJzZUludChlLmpvaW4oXCJcIikpfSxmdW5jdGlvbigpe3ZhciBlLGk7Zm9yKGk9dC5kYXRhLm11bHRpX2hlYWRlci5sZW5ndGgsZT0wO2U8aTtlKyspaWYobnVsbD09PXQuZGF0YS5tdWx0aV9oZWFkZXJbZV0ucGFyc2VkKXt0LmRhdGE9bnVsbDticmVha31udWxsIT09dC5kYXRhP3QuZGF0YT10LmRhdGEubXVsdGlfaGVhZGVyOnQuZGF0YT0tMX0sZnVuY3Rpb24oKXt2YXIgZTt0LmRhdGEubXVsdGlfaGVhZGVyfHwodC5kYXRhLm11bHRpX2hlYWRlcj1bXSk7dHJ5e2U9bmV3IHQuU0lQLk5hbWVBZGRySGVhZGVyKHQuZGF0YS51cmksdC5kYXRhLmRpc3BsYXlOYW1lLHQuZGF0YS5wYXJhbXMpLGRlbGV0ZSB0LmRhdGEudXJpLGRlbGV0ZSB0LmRhdGEuZGlzcGxheU5hbWUsZGVsZXRlIHQuZGF0YS5wYXJhbXN9Y2F0Y2godCl7ZT1udWxsfXQuZGF0YS5tdWx0aV9oZWFkZXIucHVzaCh7cG9zaXRpb246RSxvZmZzZXQ6cigpLnN0YXJ0Lm9mZnNldCxwYXJzZWQ6ZX0pfSxmdW5jdGlvbigpe3QuZGF0YT1uZXcgdC5TSVAuTmFtZUFkZHJIZWFkZXIodC5kYXRhLnVyaSx0LmRhdGEuZGlzcGxheU5hbWUsdC5kYXRhLnBhcmFtcyl9LGZ1bmN0aW9uKCl7dC5kYXRhLnJlcGxhY2VzX2Zyb21fdGFnJiZ0LmRhdGEucmVwbGFjZXNfdG9fdGFnfHwodC5kYXRhPS0xKX0sZnVuY3Rpb24oKXt0LmRhdGE9e2NhbGxfaWQ6dC5kYXRhfX0sXCJmcm9tLXRhZ1wiLG4oXCJmcm9tLXRhZ1wiLCEwKSxmdW5jdGlvbihlKXt0LmRhdGEucmVwbGFjZXNfZnJvbV90YWc9ZX0sXCJ0by10YWdcIixuKFwidG8tdGFnXCIsITApLGZ1bmN0aW9uKGUpe3QuZGF0YS5yZXBsYWNlc190b190YWc9ZX0sXCJlYXJseS1vbmx5XCIsbihcImVhcmx5LW9ubHlcIiwhMCksZnVuY3Rpb24oKXt0LmRhdGEuZWFybHlfb25seT0hMH0sZnVuY3Rpb24oZSx0KXtyZXR1cm4gdH0sZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24oZSx0KXtyZXR1cm5bZV0uY29uY2F0KHQpfShlLHQpfSxmdW5jdGlvbihlKXtcIlJlcXVpcmVcIj09PXQuc3RhcnRSdWxlJiYodC5kYXRhPWV8fFtdKX0sZnVuY3Rpb24oZSl7dC5kYXRhLnZhbHVlPXBhcnNlSW50KGUuam9pbihcIlwiKSl9LFwiYWN0aXZlXCIsbihcImFjdGl2ZVwiLCEwKSxcInBlbmRpbmdcIixuKFwicGVuZGluZ1wiLCEwKSxcInRlcm1pbmF0ZWRcIixuKFwidGVybWluYXRlZFwiLCEwKSxmdW5jdGlvbigpe3QuZGF0YS5zdGF0ZT1pKCl9LFwicmVhc29uXCIsbihcInJlYXNvblwiLCEwKSxmdW5jdGlvbihlKXt2b2lkIDAhPT1lJiYodC5kYXRhLnJlYXNvbj1lKX0sZnVuY3Rpb24oZSl7dm9pZCAwIT09ZSYmKHQuZGF0YS5leHBpcmVzPWUpfSxcInJldHJ5X2FmdGVyXCIsbihcInJldHJ5X2FmdGVyXCIsITApLGZ1bmN0aW9uKGUpe3ZvaWQgMCE9PWUmJih0LmRhdGEucmV0cnlfYWZ0ZXI9ZSl9LFwiZGVhY3RpdmF0ZWRcIixuKFwiZGVhY3RpdmF0ZWRcIiwhMCksXCJwcm9iYXRpb25cIixuKFwicHJvYmF0aW9uXCIsITApLFwicmVqZWN0ZWRcIixuKFwicmVqZWN0ZWRcIiwhMCksXCJ0aW1lb3V0XCIsbihcInRpbWVvdXRcIiwhMCksXCJnaXZldXBcIixuKFwiZ2l2ZXVwXCIsITApLFwibm9yZXNvdXJjZVwiLG4oXCJub3Jlc291cmNlXCIsITApLFwiaW52YXJpYW50XCIsbihcImludmFyaWFudFwiLCEwKSxmdW5jdGlvbihlKXtcIlN1cHBvcnRlZFwiPT09dC5zdGFydFJ1bGUmJih0LmRhdGE9ZXx8W10pfSxmdW5jdGlvbigpe3ZhciBlPXQuZGF0YS50YWc7dC5kYXRhPW5ldyB0LlNJUC5OYW1lQWRkckhlYWRlcih0LmRhdGEudXJpLHQuZGF0YS5kaXNwbGF5TmFtZSx0LmRhdGEucGFyYW1zKSxlJiZ0LmRhdGEuc2V0UGFyYW0oXCJ0YWdcIixlKX0sXCJ0dGxcIixuKFwidHRsXCIsITApLGZ1bmN0aW9uKGUpe3QuZGF0YS50dGw9ZX0sXCJtYWRkclwiLG4oXCJtYWRkclwiLCEwKSxmdW5jdGlvbihlKXt0LmRhdGEubWFkZHI9ZX0sXCJyZWNlaXZlZFwiLG4oXCJyZWNlaXZlZFwiLCEwKSxmdW5jdGlvbihlKXt0LmRhdGEucmVjZWl2ZWQ9ZX0sXCJicmFuY2hcIixuKFwiYnJhbmNoXCIsITApLGZ1bmN0aW9uKGUpe3QuZGF0YS5icmFuY2g9ZX0sXCJycG9ydFwiLG4oXCJycG9ydFwiLCEwKSxmdW5jdGlvbigpe1widW5kZWZpbmVkXCIhPXR5cGVvZiByZXNwb25zZV9wb3J0JiYodC5kYXRhLnJwb3J0PXJlc3BvbnNlX3BvcnQuam9pbihcIlwiKSl9LGZ1bmN0aW9uKGUpe3QuZGF0YS5wcm90b2NvbD1lfSxuKFwiVURQXCIsITApLG4oXCJUQ1BcIiwhMCksbihcIlRMU1wiLCEwKSxuKFwiU0NUUFwiLCEwKSxmdW5jdGlvbihlKXt0LmRhdGEudHJhbnNwb3J0PWV9LGZ1bmN0aW9uKCl7dC5kYXRhLmhvc3Q9aSgpfSxmdW5jdGlvbihlKXt0LmRhdGEucG9ydD1wYXJzZUludChlLmpvaW4oXCJcIikpfSxmdW5jdGlvbihlKXtyZXR1cm4gcGFyc2VJbnQoZS5qb2luKFwiXCIpKX0sZnVuY3Rpb24oZSl7XCJTZXNzaW9uX0V4cGlyZXNcIj09PXQuc3RhcnRSdWxlJiYodC5kYXRhLmRlbHRhU2Vjb25kcz1lKX0sXCJyZWZyZXNoZXJcIixuKFwicmVmcmVzaGVyXCIsITEpLFwidWFzXCIsbihcInVhc1wiLCExKSxcInVhY1wiLG4oXCJ1YWNcIiwhMSksZnVuY3Rpb24oZSl7XCJTZXNzaW9uX0V4cGlyZXNcIj09PXQuc3RhcnRSdWxlJiYodC5kYXRhLnJlZnJlc2hlcj1lKX0sZnVuY3Rpb24oZSl7XCJNaW5fU0VcIj09PXQuc3RhcnRSdWxlJiYodC5kYXRhPWUpfSxcInN0dW5zXCIsbihcInN0dW5zXCIsITApLFwic3R1blwiLG4oXCJzdHVuXCIsITApLGZ1bmN0aW9uKGUpe3QuZGF0YS5zY2hlbWU9ZX0sZnVuY3Rpb24oZSl7dC5kYXRhLmhvc3Q9ZX0sXCI/dHJhbnNwb3J0PVwiLG4oXCI/dHJhbnNwb3J0PVwiLCExKSxcInR1cm5zXCIsbihcInR1cm5zXCIsITApLFwidHVyblwiLG4oXCJ0dXJuXCIsITApLGZ1bmN0aW9uKCl7dC5kYXRhLnRyYW5zcG9ydD10cmFuc3BvcnR9LGZ1bmN0aW9uKCl7dC5kYXRhPWkoKX0sXCJSZWZlcnJlZC1CeVwiLG4oXCJSZWZlcnJlZC1CeVwiLCExKSxcImJcIixuKFwiYlwiLCExKSxcImNpZFwiLG4oXCJjaWRcIiwhMSldLF89W2woJzIgXCJcIjYgNyEnKSxsKCc0XCJcIlwiNSE3IycpLGwoJzQkXCJcIjUhNyUnKSxsKCc0JlwiXCI1ITdcXCcnKSxsKFwiOycuIyAmOyhcIiksbCgnNChcIlwiNSE3KScpLGwoJzQqXCJcIjUhNysnKSxsKCcyLFwiXCI2LDctJyksbCgnMi5cIlwiNi43LycpLGwoJzQwXCJcIjUhNzEnKSxsKCcyMlwiXCI2MjczLlxceDg5ICYyNFwiXCI2NDc1Ln0gJjI2XCJcIjY2NzcucSAmMjhcIlwiNjg3OS5lICYyOlwiXCI2Ojc7LlkgJjI8XCJcIjY8Nz0uTSAmMj5cIlwiNj43Py5BICYyQFwiXCI2QDdBLjUgJjJCXCJcIjZCN0MuKSAmMkRcIlwiNkQ3RScpLGwoXCI7KS4jICY7LFwiKSxsKCcyRlwiXCI2RjdHLn0gJjJIXCJcIjZIN0kucSAmMkpcIlwiNko3Sy5lICYyTFwiXCI2TDdNLlkgJjJOXCJcIjZON08uTSAmMlBcIlwiNlA3US5BICYyUlwiXCI2UjdTLjUgJjJUXCJcIjZUN1UuKSAmMlZcIlwiNlY3VycpLGwoJyUlMlhcIlwiNlg3WS81IzsjLywkOyMvIyQrIykoI1xcJyMoXCJcXCcjJlxcJyMvXCIhJiwpJyksbCgnJSUkOyQwIyo7JCYvLCM7IC8jJCtcIikoXCJcXCcjJlxcJyMuXCIgJlwiLz0jJDskLyYjMCMqOyQmJiYjL1xcJyQ4XCI6WlwiICkoXCJcXCcjJlxcJyMnKSxsKCc7Li5cIiAmXCInKSxsKFwiJSQ7Jy4jICY7KDApKjsnLiMgJjsoJi8/IzI4XFxcIlxcXCI2ODc5LzAkOy8vJyQ4IzpbIyApKCMnIyhcXFwiJyMmJyNcIiksbCgnJSUkOzIvJiMwIyo7MiYmJiMvZyMkJSQ7LjAjKjsuJi8sIzsyLyMkK1wiKShcIlxcJyMmXFwnIzA9KiUkOy4wIyo7LiYvLCM7Mi8jJCtcIikoXCJcXCcjJlxcJyMmLyMkK1wiKShcIlxcJyMmXFwnIy9cIiEmLCknKSxsKCc0XFxcXFwiXCI1ITddLiMgJjszJyksbCgnNF5cIlwiNSE3XycpLGwoJzRgXCJcIjUhN2EnKSxsKCc7IS4pICY0YlwiXCI1ITdjJyksbCgnJSQ7KS5cXHg5NSAmMkZcIlwiNkY3Ry5cXHg4OSAmMkpcIlwiNko3Sy59ICYyTFwiXCI2TDdNLnEgJjJYXCJcIjZYN1kuZSAmMlBcIlwiNlA3US5ZICYySFwiXCI2SDdJLk0gJjJAXCJcIjZAN0EuQSAmMmRcIlwiNmQ3ZS41ICYyUlwiXCI2UjdTLikgJjJOXCJcIjZON08vXFx4OWUjMFxceDliKjspLlxceDk1ICYyRlwiXCI2RjdHLlxceDg5ICYySlwiXCI2SjdLLn0gJjJMXCJcIjZMN00ucSAmMlhcIlwiNlg3WS5lICYyUFwiXCI2UDdRLlkgJjJIXCJcIjZIN0kuTSAmMkBcIlwiNkA3QS5BICYyZFwiXCI2ZDdlLjUgJjJSXCJcIjZSN1MuKSAmMk5cIlwiNk43TyYmJiMvXCIhJiwpJyksbCgnJSQ7KS5cXHg4OSAmMkZcIlwiNkY3Ry59ICYyTFwiXCI2TDdNLnEgJjJYXCJcIjZYN1kuZSAmMlBcIlwiNlA3US5ZICYySFwiXCI2SDdJLk0gJjJAXCJcIjZAN0EuQSAmMmRcIlwiNmQ3ZS41ICYyUlwiXCI2UjdTLikgJjJOXCJcIjZON08vXFx4OTIjMFxceDhmKjspLlxceDg5ICYyRlwiXCI2RjdHLn0gJjJMXCJcIjZMN00ucSAmMlhcIlwiNlg3WS5lICYyUFwiXCI2UDdRLlkgJjJIXCJcIjZIN0kuTSAmMkBcIlwiNkA3QS5BICYyZFwiXCI2ZDdlLjUgJjJSXCJcIjZSN1MuKSAmMk5cIlwiNk43TyYmJiMvXCIhJiwpJyksbCgnMlRcIlwiNlQ3VS5cXHhlMyAmMlZcIlwiNlY3Vy5cXHhkNyAmMmZcIlwiNmY3Zy5cXHhjYiAmMmhcIlwiNmg3aS5cXHhiZiAmMjpcIlwiNjo3Oy5cXHhiMyAmMkRcIlwiNkQ3RS5cXHhhNyAmMjJcIlwiNjI3My5cXHg5YiAmMjhcIlwiNjg3OS5cXHg4ZiAmMmpcIlwiNmo3ay5cXHg4MyAmOyYufSAmMjRcIlwiNjQ3NS5xICYybFwiXCI2bDdtLmUgJjJuXCJcIjZuN28uWSAmMjZcIlwiNjY3Ny5NICYyPlwiXCI2Pjc/LkEgJjJwXCJcIjZwN3EuNSAmMnJcIlwiNnI3cy4pICY7XFwnLiMgJjsoJyksbCgnJSQ7KS5cXHUwMTJiICYyRlwiXCI2RjdHLlxcdTAxMWYgJjJKXCJcIjZKN0suXFx1MDExMyAmMkxcIlwiNkw3TS5cXHUwMTA3ICYyWFwiXCI2WDdZLlxceGZiICYyUFwiXCI2UDdRLlxceGVmICYySFwiXCI2SDdJLlxceGUzICYyQFwiXCI2QDdBLlxceGQ3ICYyZFwiXCI2ZDdlLlxceGNiICYyUlwiXCI2UjdTLlxceGJmICYyTlwiXCI2TjdPLlxceGIzICYyVFwiXCI2VDdVLlxceGE3ICYyVlwiXCI2VjdXLlxceDliICYyZlwiXCI2ZjdnLlxceDhmICYyaFwiXCI2aDdpLlxceDgzICYyOFwiXCI2ODc5LncgJjJqXCJcIjZqN2suayAmOyYuZSAmMjRcIlwiNjQ3NS5ZICYybFwiXCI2bDdtLk0gJjJuXCJcIjZuN28uQSAmMjZcIlwiNjY3Ny41ICYycFwiXCI2cDdxLikgJjJyXCJcIjZyN3MvXFx1MDEzNCMwXFx1MDEzMSo7KS5cXHUwMTJiICYyRlwiXCI2RjdHLlxcdTAxMWYgJjJKXCJcIjZKN0suXFx1MDExMyAmMkxcIlwiNkw3TS5cXHUwMTA3ICYyWFwiXCI2WDdZLlxceGZiICYyUFwiXCI2UDdRLlxceGVmICYySFwiXCI2SDdJLlxceGUzICYyQFwiXCI2QDdBLlxceGQ3ICYyZFwiXCI2ZDdlLlxceGNiICYyUlwiXCI2UjdTLlxceGJmICYyTlwiXCI2TjdPLlxceGIzICYyVFwiXCI2VDdVLlxceGE3ICYyVlwiXCI2VjdXLlxceDliICYyZlwiXCI2ZjdnLlxceDhmICYyaFwiXCI2aDdpLlxceDgzICYyOFwiXCI2ODc5LncgJjJqXCJcIjZqN2suayAmOyYuZSAmMjRcIlwiNjQ3NS5ZICYybFwiXCI2bDdtLk0gJjJuXCJcIjZuN28uQSAmMjZcIlwiNjY3Ny41ICYycFwiXCI2cDdxLikgJjJyXCJcIjZyN3MmJiYjL1wiISYsKScpLGwoXCIlOy8vPyMyUFxcXCJcXFwiNlA3US8wJDsvLyckOCM6dCMgKSgjJyMoXFxcIicjJicjXCIpLGwoXCIlOy8vPyMyNFxcXCJcXFwiNjQ3NS8wJDsvLyckOCM6dSMgKSgjJyMoXFxcIicjJicjXCIpLGwoXCIlOy8vPyMyPlxcXCJcXFwiNj43Py8wJDsvLyckOCM6diMgKSgjJyMoXFxcIicjJicjXCIpLGwoXCIlOy8vPyMyVFxcXCJcXFwiNlQ3VS8wJDsvLyckOCM6dyMgKSgjJyMoXFxcIicjJicjXCIpLGwoXCIlOy8vPyMyVlxcXCJcXFwiNlY3Vy8wJDsvLyckOCM6eCMgKSgjJyMoXFxcIicjJicjXCIpLGwoJyUyaFwiXCI2aDdpLzAjOy8vXFwnJDhcIjp5XCIgKShcIlxcJyMmXFwnIycpLGwoJyU7Ly82IzJmXCJcIjZmN2cvXFwnJDhcIjp6XCIgKShcIlxcJyMmXFwnIycpLGwoXCIlOy8vPyMyRFxcXCJcXFwiNkQ3RS8wJDsvLyckOCM6eyMgKSgjJyMoXFxcIicjJicjXCIpLGwoXCIlOy8vPyMyMlxcXCJcXFwiNjI3My8wJDsvLyckOCM6fCMgKSgjJyMoXFxcIicjJicjXCIpLGwoXCIlOy8vPyMyOFxcXCJcXFwiNjg3OS8wJDsvLyckOCM6fSMgKSgjJyMoXFxcIicjJicjXCIpLGwoXCIlOy8vMCM7Ji8nJDhcXFwiOn5cXFwiICkoXFxcIicjJicjXCIpLGwoXCIlOyYvMCM7Ly8nJDhcXFwiOn5cXFwiICkoXFxcIicjJicjXCIpLGwoXCIlOz0vVCMkO0cuKSAmO0suIyAmO0YwLyo7Ry4pICY7Sy4jICY7RiYvLCQ7Pi8jJCsjKSgjJyMoXFxcIicjJicjXCIpLGwoJzRcXHg3ZlwiXCI1ITdcXHg4MC5BICY0XFx4ODFcIlwiNSE3XFx4ODIuNSAmNFxceDgzXCJcIjUhN1xceDg0LikgJjszLiMgJjsuJyksbChcIiUlOy8vUSM7Ji9IJCQ7Si4jICY7SzApKjtKLiMgJjtLJi8sJDsmLyMkKyQpKCQnIygjJyMoXFxcIicjJicjL1xcXCIhJiwpXCIpLGwoXCIlOy8vXSM7Ji9UJCUkO0ouIyAmO0swKSo7Si4jICY7SyYvXFxcIiEmLCkvMSQ7Ji8oJDgkOlxceDg1JCEhKSgkJyMoIycjKFxcXCInIyYnI1wiKSxsKCc7Li5HICYyTFwiXCI2TDdNLjsgJjRcXHg4NlwiXCI1ITdcXHg4Ny4vICY0XFx4ODNcIlwiNSE3XFx4ODQuIyAmOzMnKSxsKCclMmpcIlwiNmo3ay9KIzRcXHg4OFwiXCI1ITdcXHg4OS41ICY0XFx4OGFcIlwiNSE3XFx4OGIuKSAmNFxceDhjXCJcIjUhN1xceDhkLyMkK1wiKShcIlxcJyMmXFwnIycpLGwoXCIlO04vTSMyOFxcXCJcXFwiNjg3OS8+JDtPLlxcXCIgJlxcXCIvMCQ7Uy8nJDgkOlxceDhlJCApKCQnIygjJyMoXFxcIicjJicjXCIpLGwoXCIlO04vZCMyOFxcXCJcXFwiNjg3OS9VJDtPLlxcXCIgJlxcXCIvRyQ7Uy8+JDtfLzUkO2wuXFxcIiAmXFxcIi8nJDgmOlxceDhmJiApKCYnIyglJyMoJCcjKCMnIyhcXFwiJyMmJyNcIiksbCgnJTNcXHg5MFwiXCI1JDdcXHg5MS4pICYzXFx4OTJcIlwiNSM3XFx4OTMvXFwnIDghOlxceDk0ISEgKScpLGwoJyU7UC9dIyUyOFwiXCI2ODc5LywjO1IvIyQrXCIpKFwiXFwnIyZcXCcjLlwiICZcIi82JDI6XCJcIjY6NzsvXFwnJDgjOlxceDk1IyApKCNcXCcjKFwiXFwnIyZcXCcjJyksbChcIiQ7Ky4pICY7LS4jICY7US8yIzAvKjsrLikgJjstLiMgJjtRJiYmI1wiKSxsKCcyPFwiXCI2PDc9LnEgJjI+XCJcIjY+Nz8uZSAmMkBcIlwiNkA3QS5ZICYyQlwiXCI2QjdDLk0gJjJEXCJcIjZEN0UuQSAmMjJcIlwiNjI3My41ICYyNlwiXCI2Njc3LikgJjI0XCJcIjY0NzUnKSxsKCclJDsrLl8gJjstLlkgJjI8XCJcIjY8Nz0uTSAmMj5cIlwiNj43Py5BICYyQFwiXCI2QDdBLjUgJjJCXCJcIjZCN0MuKSAmMkRcIlwiNkQ3RTBlKjsrLl8gJjstLlkgJjI8XCJcIjY8Nz0uTSAmMj5cIlwiNj43Py5BICYyQFwiXCI2QDdBLjUgJjJCXCJcIjZCN0MuKSAmMkRcIlwiNkQ3RSYvJiA4ITpcXHg5NiEgKScpLGwoJyU7VC9KIyUyOFwiXCI2ODc5LywjO14vIyQrXCIpKFwiXFwnIyZcXCcjLlwiICZcIi8jJCtcIikoXCJcXCcjJlxcJyMnKSxsKFwiJTtVLikgJjtcXFxcLiMgJjtYLyYgOCE6XFx4OTchIClcIiksbCgnJSQlO1YvMiMySlwiXCI2SjdLLyMkK1wiKShcIlxcJyMmXFwnIzA8KiU7Vi8yIzJKXCJcIjZKN0svIyQrXCIpKFwiXFwnIyZcXCcjJi9EIztXLzskMkpcIlwiNko3Sy5cIiAmXCIvXFwnJDgjOlxceDk4IyApKCNcXCcjKFwiXFwnIyZcXCcjJyksbCgnJDRcXHg5OVwiXCI1ITdcXHg5YS8sIzApKjRcXHg5OVwiXCI1ITdcXHg5YSYmJiMnKSxsKCclNCRcIlwiNSE3JS8/IyQ0XFx4OWJcIlwiNSE3XFx4OWMwKSo0XFx4OWJcIlwiNSE3XFx4OWMmLyMkK1wiKShcIlxcJyMmXFwnIycpLGwoJyUybFwiXCI2bDdtLz8jO1kvNiQyblwiXCI2bjdvL1xcJyQ4IzpcXHg5ZCMgKSgjXFwnIyhcIlxcJyMmXFwnIycpLGwoJyUlO1ovXFx4YjMjMjhcIlwiNjg3OS9cXHhhNCQ7Wi9cXHg5YiQyOFwiXCI2ODc5L1xceDhjJDtaL1xceDgzJDI4XCJcIjY4NzkvdCQ7Wi9rJDI4XCJcIjY4NzkvXFxcXCQ7Wi9TJDI4XCJcIjY4NzkvRCQ7Wi87JDI4XCJcIjY4NzkvLCQ7Wy8jJCstKSgtXFwnIygsXFwnIygrXFwnIygqXFwnIygpXFwnIygoXFwnIyhcXCdcXCcjKCZcXCcjKCVcXCcjKCRcXCcjKCNcXCcjKFwiXFwnIyZcXCcjLlxcdTA3OTAgJiUyXFx4OWVcIlwiNlxceDllN1xceDlmL1xceGE0IztaL1xceDliJDI4XCJcIjY4NzkvXFx4OGMkO1ovXFx4ODMkMjhcIlwiNjg3OS90JDtaL2skMjhcIlwiNjg3OS9cXFxcJDtaL1MkMjhcIlwiNjg3OS9EJDtaLzskMjhcIlwiNjg3OS8sJDtbLyMkKywpKCxcXCcjKCtcXCcjKCpcXCcjKClcXCcjKChcXCcjKFxcJ1xcJyMoJlxcJyMoJVxcJyMoJFxcJyMoI1xcJyMoXCJcXCcjJlxcJyMuXFx1MDZmOSAmJTJcXHg5ZVwiXCI2XFx4OWU3XFx4OWYvXFx4OGMjO1ovXFx4ODMkMjhcIlwiNjg3OS90JDtaL2skMjhcIlwiNjg3OS9cXFxcJDtaL1MkMjhcIlwiNjg3OS9EJDtaLzskMjhcIlwiNjg3OS8sJDtbLyMkKyopKCpcXCcjKClcXCcjKChcXCcjKFxcJ1xcJyMoJlxcJyMoJVxcJyMoJFxcJyMoI1xcJyMoXCJcXCcjJlxcJyMuXFx1MDY3YSAmJTJcXHg5ZVwiXCI2XFx4OWU3XFx4OWYvdCM7Wi9rJDI4XCJcIjY4NzkvXFxcXCQ7Wi9TJDI4XCJcIjY4NzkvRCQ7Wi87JDI4XCJcIjY4NzkvLCQ7Wy8jJCsoKSgoXFwnIyhcXCdcXCcjKCZcXCcjKCVcXCcjKCRcXCcjKCNcXCcjKFwiXFwnIyZcXCcjLlxcdTA2MTMgJiUyXFx4OWVcIlwiNlxceDllN1xceDlmL1xcXFwjO1ovUyQyOFwiXCI2ODc5L0QkO1ovOyQyOFwiXCI2ODc5LywkO1svIyQrJikoJlxcJyMoJVxcJyMoJFxcJyMoI1xcJyMoXCJcXCcjJlxcJyMuXFx1MDVjNCAmJTJcXHg5ZVwiXCI2XFx4OWU3XFx4OWYvRCM7Wi87JDI4XCJcIjY4NzkvLCQ7Wy8jJCskKSgkXFwnIygjXFwnIyhcIlxcJyMmXFwnIy5cXHUwNThkICYlMlxceDllXCJcIjZcXHg5ZTdcXHg5Zi8sIztbLyMkK1wiKShcIlxcJyMmXFwnIy5cXHUwNTZlICYlMlxceDllXCJcIjZcXHg5ZTdcXHg5Zi8sIztaLyMkK1wiKShcIlxcJyMmXFwnIy5cXHUwNTRmICYlO1ovXFx4OWIjMlxceDllXCJcIjZcXHg5ZTdcXHg5Zi9cXHg4YyQ7Wi9cXHg4MyQyOFwiXCI2ODc5L3QkO1ovayQyOFwiXCI2ODc5L1xcXFwkO1ovUyQyOFwiXCI2ODc5L0QkO1ovOyQyOFwiXCI2ODc5LywkO1svIyQrKykoK1xcJyMoKlxcJyMoKVxcJyMoKFxcJyMoXFwnXFwnIygmXFwnIyglXFwnIygkXFwnIygjXFwnIyhcIlxcJyMmXFwnIy5cXHUwNGM3ICYlO1ovXFx4YWEjJTI4XCJcIjY4NzkvLCM7Wi8jJCtcIikoXCJcXCcjJlxcJyMuXCIgJlwiL1xceDgzJDJcXHg5ZVwiXCI2XFx4OWU3XFx4OWYvdCQ7Wi9rJDI4XCJcIjY4NzkvXFxcXCQ7Wi9TJDI4XCJcIjY4NzkvRCQ7Wi87JDI4XCJcIjY4NzkvLCQ7Wy8jJCsqKSgqXFwnIygpXFwnIygoXFwnIyhcXCdcXCcjKCZcXCcjKCVcXCcjKCRcXCcjKCNcXCcjKFwiXFwnIyZcXCcjLlxcdTA0MzAgJiU7Wi9cXHhiOSMlMjhcIlwiNjg3OS8sIztaLyMkK1wiKShcIlxcJyMmXFwnIy5cIiAmXCIvXFx4OTIkJTI4XCJcIjY4NzkvLCM7Wi8jJCtcIikoXCJcXCcjJlxcJyMuXCIgJlwiL2skMlxceDllXCJcIjZcXHg5ZTdcXHg5Zi9cXFxcJDtaL1MkMjhcIlwiNjg3OS9EJDtaLzskMjhcIlwiNjg3OS8sJDtbLyMkKykpKClcXCcjKChcXCcjKFxcJ1xcJyMoJlxcJyMoJVxcJyMoJFxcJyMoI1xcJyMoXCJcXCcjJlxcJyMuXFx1MDM4YSAmJTtaL1xceGM4IyUyOFwiXCI2ODc5LywjO1ovIyQrXCIpKFwiXFwnIyZcXCcjLlwiICZcIi9cXHhhMSQlMjhcIlwiNjg3OS8sIztaLyMkK1wiKShcIlxcJyMmXFwnIy5cIiAmXCIveiQlMjhcIlwiNjg3OS8sIztaLyMkK1wiKShcIlxcJyMmXFwnIy5cIiAmXCIvUyQyXFx4OWVcIlwiNlxceDllN1xceDlmL0QkO1ovOyQyOFwiXCI2ODc5LywkO1svIyQrKCkoKFxcJyMoXFwnXFwnIygmXFwnIyglXFwnIygkXFwnIygjXFwnIyhcIlxcJyMmXFwnIy5cXHUwMmQ1ICYlO1ovXFx4ZDcjJTI4XCJcIjY4NzkvLCM7Wi8jJCtcIikoXCJcXCcjJlxcJyMuXCIgJlwiL1xceGIwJCUyOFwiXCI2ODc5LywjO1ovIyQrXCIpKFwiXFwnIyZcXCcjLlwiICZcIi9cXHg4OSQlMjhcIlwiNjg3OS8sIztaLyMkK1wiKShcIlxcJyMmXFwnIy5cIiAmXCIvYiQlMjhcIlwiNjg3OS8sIztaLyMkK1wiKShcIlxcJyMmXFwnIy5cIiAmXCIvOyQyXFx4OWVcIlwiNlxceDllN1xceDlmLywkO1svIyQrXFwnKShcXCdcXCcjKCZcXCcjKCVcXCcjKCRcXCcjKCNcXCcjKFwiXFwnIyZcXCcjLlxcdTAyMTEgJiU7Wi9cXHhmZSMlMjhcIlwiNjg3OS8sIztaLyMkK1wiKShcIlxcJyMmXFwnIy5cIiAmXCIvXFx4ZDckJTI4XCJcIjY4NzkvLCM7Wi8jJCtcIikoXCJcXCcjJlxcJyMuXCIgJlwiL1xceGIwJCUyOFwiXCI2ODc5LywjO1ovIyQrXCIpKFwiXFwnIyZcXCcjLlwiICZcIi9cXHg4OSQlMjhcIlwiNjg3OS8sIztaLyMkK1wiKShcIlxcJyMmXFwnIy5cIiAmXCIvYiQlMjhcIlwiNjg3OS8sIztaLyMkK1wiKShcIlxcJyMmXFwnIy5cIiAmXCIvOyQyXFx4OWVcIlwiNlxceDllN1xceDlmLywkO1ovIyQrKCkoKFxcJyMoXFwnXFwnIygmXFwnIyglXFwnIygkXFwnIygjXFwnIyhcIlxcJyMmXFwnIy5cXHUwMTI2ICYlO1ovXFx1MDExYyMlMjhcIlwiNjg3OS8sIztaLyMkK1wiKShcIlxcJyMmXFwnIy5cIiAmXCIvXFx4ZjUkJTI4XCJcIjY4NzkvLCM7Wi8jJCtcIikoXCJcXCcjJlxcJyMuXCIgJlwiL1xceGNlJCUyOFwiXCI2ODc5LywjO1ovIyQrXCIpKFwiXFwnIyZcXCcjLlwiICZcIi9cXHhhNyQlMjhcIlwiNjg3OS8sIztaLyMkK1wiKShcIlxcJyMmXFwnIy5cIiAmXCIvXFx4ODAkJTI4XCJcIjY4NzkvLCM7Wi8jJCtcIikoXCJcXCcjJlxcJyMuXCIgJlwiL1kkJTI4XCJcIjY4NzkvLCM7Wi8jJCtcIikoXCJcXCcjJlxcJyMuXCIgJlwiLzIkMlxceDllXCJcIjZcXHg5ZTdcXHg5Zi8jJCsoKSgoXFwnIyhcXCdcXCcjKCZcXCcjKCVcXCcjKCRcXCcjKCNcXCcjKFwiXFwnIyZcXCcjLyYgOCE6XFx4YTAhICknKSxsKCclOyMvTSM7Iy5cIiAmXCIvPyQ7Iy5cIiAmXCIvMSQ7Iy5cIiAmXCIvIyQrJCkoJFxcJyMoI1xcJyMoXCJcXCcjJlxcJyMnKSxsKFwiJTtaLzsjMjhcXFwiXFxcIjY4NzkvLCQ7Wi8jJCsjKSgjJyMoXFxcIicjJicjLiMgJjtcXFxcXCIpLGwoXCIlO10vbyMySlxcXCJcXFwiNko3Sy9gJDtdL1ckMkpcXFwiXFxcIjZKN0svSCQ7XS8/JDJKXFxcIlxcXCI2SjdLLzAkO10vJyQ4JzpcXHhhMScgKSgnJyMoJicjKCUnIygkJyMoIycjKFxcXCInIyYnI1wiKSxsKCclMlxceGEyXCJcIjZcXHhhMjdcXHhhMy8yIzRcXHhhNFwiXCI1ITdcXHhhNS8jJCtcIikoXCJcXCcjJlxcJyMuXFx4OTggJiUyXFx4YTZcIlwiNlxceGE2N1xceGE3LzsjNFxceGE4XCJcIjUhN1xceGE5LywkOyEvIyQrIykoI1xcJyMoXCJcXCcjJlxcJyMuaiAmJTJcXHhhYVwiXCI2XFx4YWE3XFx4YWIvNSM7IS8sJDshLyMkKyMpKCNcXCcjKFwiXFwnIyZcXCcjLkIgJiU0XFx4YWNcIlwiNSE3XFx4YWQvLCM7IS8jJCtcIikoXCJcXCcjJlxcJyMuIyAmOyEnKSxsKCclJTshLlwiICZcIi9bIzshLlwiICZcIi9NJDshLlwiICZcIi8/JDshLlwiICZcIi8xJDshLlwiICZcIi8jJCslKSglXFwnIygkXFwnIygjXFwnIyhcIlxcJyMmXFwnIy9cXCcgOCE6XFx4YWUhISApJyksbCgnJCUyMlwiXCI2MjczLywjO2AvIyQrXCIpKFwiXFwnIyZcXCcjMDwqJTIyXCJcIjYyNzMvLCM7YC8jJCtcIikoXCJcXCcjJlxcJyMmJyksbChcIjthLkEgJjtiLjsgJjtjLjUgJjtkLi8gJjtlLikgJjtmLiMgJjtnXCIpLGwoJyUzXFx4YWZcIlwiNSo3XFx4YjAvYSMzXFx4YjFcIlwiNSM3XFx4YjIuRyAmM1xceGIzXCJcIjUjN1xceGI0LjsgJjNcXHhiNVwiXCI1JDdcXHhiNi4vICYzXFx4YjdcIlwiNSM3XFx4YjguIyAmOzYvKCQ4XCI6XFx4YjlcIiEgKShcIlxcJyMmXFwnIycpLGwoJyUzXFx4YmFcIlwiNSU3XFx4YmIvSSMzXFx4YmNcIlwiNSU3XFx4YmQuLyAmM1xceGJlXCJcIjVcIjdcXHhiZi4jICY7Ni8oJDhcIjpcXHhjMFwiISApKFwiXFwnIyZcXCcjJyksbCgnJTNcXHhjMVwiXCI1XFwnN1xceGMyLzEjO1xceDhmLygkOFwiOlxceGMzXCIhICkoXCJcXCcjJlxcJyMnKSxsKCclM1xceGM0XCJcIjUkN1xceGM1LzEjO1xceGVmLygkOFwiOlxceGM2XCIhICkoXCJcXCcjJlxcJyMnKSxsKCclM1xceGM3XCJcIjUmN1xceGM4LzEjO1QvKCQ4XCI6XFx4YzlcIiEgKShcIlxcJyMmXFwnIycpLGwoJyUzXFx4Y2FcIlwiNVwiN1xceGNiL04jJTI+XCJcIjY+Nz8vLCM7Ni8jJCtcIikoXCJcXCcjJlxcJyMuXCIgJlwiL1xcJyQ4XCI6XFx4Y2NcIiApKFwiXFwnIyZcXCcjJyksbCgnJTtoL1AjJTI+XCJcIjY+Nz8vLCM7aS8jJCtcIikoXCJcXCcjJlxcJyMuXCIgJlwiLykkOFwiOlxceGNkXCJcIiEgKShcIlxcJyMmXFwnIycpLGwoJyUkO2ovJiMwIyo7aiYmJiMvXCIhJiwpJyksbCgnJSQ7ai8mIzAjKjtqJiYmIy9cIiEmLCknKSxsKFwiO2suKSAmOysuIyAmOy1cIiksbCgnMmxcIlwiNmw3bS5lICYyblwiXCI2bjdvLlkgJjI0XCJcIjY0NzUuTSAmMjhcIlwiNjg3OS5BICYyPFwiXCI2PDc9LjUgJjJAXCJcIjZAN0EuKSAmMkJcIlwiNkI3QycpLGwoJyUyNlwiXCI2Njc3L24jO20vZSQkJTI8XCJcIjY8Nz0vLCM7bS8jJCtcIikoXCJcXCcjJlxcJyMwPColMjxcIlwiNjw3PS8sIzttLyMkK1wiKShcIlxcJyMmXFwnIyYvIyQrIykoI1xcJyMoXCJcXCcjJlxcJyMnKSxsKCclO24vQSMyPlwiXCI2Pjc/LzIkO28vKSQ4IzpcXHhjZSNcIlwiICkoI1xcJyMoXCJcXCcjJlxcJyMnKSxsKFwiJDtwLikgJjsrLiMgJjstLzIjMC8qO3AuKSAmOysuIyAmOy0mJiYjXCIpLGwoXCIkO3AuKSAmOysuIyAmOy0wLyo7cC4pICY7Ky4jICY7LSZcIiksbCgnMmxcIlwiNmw3bS5lICYyblwiXCI2bjdvLlkgJjI0XCJcIjY0NzUuTSAmMjZcIlwiNjY3Ny5BICYyOFwiXCI2ODc5LjUgJjJAXCJcIjZAN0EuKSAmMkJcIlwiNkI3QycpLGwoXCI7XFx4OTAuIyAmO3JcIiksbChcIiU7XFx4OGYvRyM7Jy8+JDtzLzUkOycvLCQ7XFx4ODQvIyQrJSkoJScjKCQnIygjJyMoXFxcIicjJicjXCIpLGwoXCI7TS4jICY7dFwiKSxsKFwiJTtcXHg3Zi9FIzI4XFxcIlxcXCI2ODc5LzYkO3UuIyAmO3gvJyQ4IzpcXHhjZiMgKSgjJyMoXFxcIicjJicjXCIpLGwoJyU7di4jICY7dy9KIyUyNlwiXCI2Njc3LywjO1xceDgzLyMkK1wiKShcIlxcJyMmXFwnIy5cIiAmXCIvIyQrXCIpKFwiXFwnIyZcXCcjJyksbCgnJTJcXHhkMFwiXCI2XFx4ZDA3XFx4ZDEvOiM7XFx4ODAvMSQ7dy5cIiAmXCIvIyQrIykoI1xcJyMoXCJcXCcjJlxcJyMnKSxsKCclMjRcIlwiNjQ3NS8sIzt7LyMkK1wiKShcIlxcJyMmXFwnIycpLGwoXCIlO3ovMyMkO3kwIyo7eSYvIyQrXFxcIikoXFxcIicjJicjXCIpLGwoXCI7Ki4pICY7Ky4jICY7LVwiKSxsKCc7Ky5cXHg4ZiAmOy0uXFx4ODkgJjIyXCJcIjYyNzMufSAmMjZcIlwiNjY3Ny5xICYyOFwiXCI2ODc5LmUgJjI6XCJcIjY6NzsuWSAmMjxcIlwiNjw3PS5NICYyPlwiXCI2Pjc/LkEgJjJAXCJcIjZAN0EuNSAmMkJcIlwiNkI3Qy4pICYyRFwiXCI2RDdFJyksbCgnJTt8L2UjJCUyNFwiXCI2NDc1LywjO3wvIyQrXCIpKFwiXFwnIyZcXCcjMDwqJTI0XCJcIjY0NzUvLCM7fC8jJCtcIikoXCJcXCcjJlxcJyMmLyMkK1wiKShcIlxcJyMmXFwnIycpLGwoJyUkO34wIyo7fiYvZSMkJTIyXCJcIjYyNzMvLCM7fS8jJCtcIikoXCJcXCcjJlxcJyMwPColMjJcIlwiNjI3My8sIzt9LyMkK1wiKShcIlxcJyMmXFwnIyYvIyQrXCIpKFwiXFwnIyZcXCcjJyksbChcIiQ7fjAjKjt+JlwiKSxsKCc7Ky53ICY7LS5xICYyOFwiXCI2ODc5LmUgJjI6XCJcIjY6NzsuWSAmMjxcIlwiNjw3PS5NICYyPlwiXCI2Pjc/LkEgJjJAXCJcIjZAN0EuNSAmMkJcIlwiNkI3Qy4pICYyRFwiXCI2RDdFJyksbCgnJSU7XCIvXFx4ODcjJDtcIi5HICY7IS5BICYyQFwiXCI2QDdBLjUgJjJGXCJcIjZGN0cuKSAmMkpcIlwiNko3SzBNKjtcIi5HICY7IS5BICYyQFwiXCI2QDdBLjUgJjJGXCJcIjZGN0cuKSAmMkpcIlwiNko3SyYvIyQrXCIpKFwiXFwnIyZcXCcjLyYgOCE6XFx4ZDIhICknKSxsKFwiO1xceDgxLiMgJjtcXHg4MlwiKSxsKCclJTtPLzIjMjpcIlwiNjo3Oy8jJCtcIikoXCJcXCcjJlxcJyMuXCIgJlwiLywjO1MvIyQrXCIpKFwiXFwnIyZcXCcjLlwiICZcIicpLGwoJyQ7Ky5cXHg4MyAmOy0ufSAmMkJcIlwiNkI3Qy5xICYyRFwiXCI2RDdFLmUgJjIyXCJcIjYyNzMuWSAmMjhcIlwiNjg3OS5NICYyOlwiXCI2Ojc7LkEgJjI8XCJcIjY8Nz0uNSAmMj5cIlwiNj43Py4pICYyQFwiXCI2QDdBL1xceDhjIzBcXHg4OSo7Ky5cXHg4MyAmOy0ufSAmMkJcIlwiNkI3Qy5xICYyRFwiXCI2RDdFLmUgJjIyXCJcIjYyNzMuWSAmMjhcIlwiNjg3OS5NICYyOlwiXCI2Ojc7LkEgJjI8XCJcIjY8Nz0uNSAmMj5cIlwiNj43Py4pICYyQFwiXCI2QDdBJiYmIycpLGwoXCIkO3kwIyo7eSZcIiksbCgnJTNcXHg5MlwiXCI1IzdcXHhkMy9xIzI0XCJcIjY0NzUvYiQkOyEvJiMwIyo7ISYmJiMvTCQySlwiXCI2SjdLLz0kJDshLyYjMCMqOyEmJiYjL1xcJyQ4JTpcXHhkNCUgKSglXFwnIygkXFwnIygjXFwnIyhcIlxcJyMmXFwnIycpLGwoJzJcXHhkNVwiXCI2XFx4ZDU3XFx4ZDYnKSxsKCcyXFx4ZDdcIlwiNlxceGQ3N1xceGQ4JyksbCgnMlxceGQ5XCJcIjZcXHhkOTdcXHhkYScpLGwoJzJcXHhkYlwiXCI2XFx4ZGI3XFx4ZGMnKSxsKCcyXFx4ZGRcIlwiNlxceGRkN1xceGRlJyksbCgnMlxceGRmXCJcIjZcXHhkZjdcXHhlMCcpLGwoJzJcXHhlMVwiXCI2XFx4ZTE3XFx4ZTInKSxsKCcyXFx4ZTNcIlwiNlxceGUzN1xceGU0JyksbCgnMlxceGU1XCJcIjZcXHhlNTdcXHhlNicpLGwoJzJcXHhlN1wiXCI2XFx4ZTc3XFx4ZTgnKSxsKFwiJTtcXHg4NS5TICY7XFx4ODYuTSAmO1xceDg4LkcgJjtcXHg4OS5BICY7XFx4OGEuOyAmO1xceDhiLjUgJjtcXHg4Yy4vICY7XFx4OGQuKSAmO1xceDhlLiMgJjs2LyYgOCE6XFx4ZTkhIClcIiksbChcIiU7XFx4ODQvRyM7Jy8+JDtcXHg5MS81JDsnLywkO1xceDkzLyMkKyUpKCUnIygkJyMoIycjKFxcXCInIyYnI1wiKSxsKFwiJTtcXHg5Mi8nIDghOlxceGVhISEgKVwiKSxsKFwiJTshLzUjOyEvLCQ7IS8jJCsjKSgjJyMoXFxcIicjJicjXCIpLGwoXCIlJDsqLkEgJjsrLjsgJjstLjUgJjszLi8gJjs0LikgJjsnLiMgJjsoMEcqOyouQSAmOysuOyAmOy0uNSAmOzMuLyAmOzQuKSAmOycuIyAmOygmLyYgOCE6XFx4ZWIhIClcIiksbChcIiU7XFx4YjUvWSMkJTtBLywjO1xceGI1LyMkK1xcXCIpKFxcXCInIyYnIzA2KiU7QS8sIztcXHhiNS8jJCtcXFwiKShcXFwiJyMmJyMmLyMkK1xcXCIpKFxcXCInIyYnI1wiKSxsKCclOzkvTiMlMjpcIlwiNjo3Oy8sIzs5LyMkK1wiKShcIlxcJyMmXFwnIy5cIiAmXCIvXFwnJDhcIjpcXHhlY1wiICkoXCJcXCcjJlxcJyMnKSxsKFwiJTs6LmMgJiU7XFx4OTcvWSMkJTtBLywjO1xceDk3LyMkK1xcXCIpKFxcXCInIyYnIzA2KiU7QS8sIztcXHg5Ny8jJCtcXFwiKShcXFwiJyMmJyMmLyMkK1xcXCIpKFxcXCInIyYnIy8mIDghOlxceGVkISApXCIpLGwoXCIlO0wuIyAmO1xceDk4L10jJCU7Qi8sIztcXHg5YS8jJCtcXFwiKShcXFwiJyMmJyMwNiolO0IvLCM7XFx4OWEvIyQrXFxcIikoXFxcIicjJicjJi8nJDhcXFwiOlxceGVlXFxcIiApKFxcXCInIyYnI1wiKSxsKFwiJTtcXHg5OS5cXFwiICZcXFwiLz4jO0AvNSQ7TS8sJDs/LyMkKyQpKCQnIygjJyMoXFxcIicjJicjXCIpLGwoXCIlJTs2L1kjJCU7Li8sIzs2LyMkK1xcXCIpKFxcXCInIyYnIzA2KiU7Li8sIzs2LyMkK1xcXCIpKFxcXCInIyYnIyYvIyQrXFxcIikoXFxcIicjJicjLiMgJjtILycgOCE6XFx4ZWYhISApXCIpLGwoXCI7XFx4OWIuKSAmO1xceDljLiMgJjtcXHg5ZlwiKSxsKFwiJTNcXHhmMFxcXCJcXFwiNSE3XFx4ZjEvOiM7PC8xJDtcXHg5ZS8oJDgjOlxceGYyIyEgKSgjJyMoXFxcIicjJicjXCIpLGwoXCIlM1xceGYzXFxcIlxcXCI1JzdcXHhmNC86Izs8LzEkO1xceDlkLygkOCM6XFx4ZjUjISApKCMnIyhcXFwiJyMmJyNcIiksbChcIiUkOyEvJiMwIyo7ISYmJiMvJyA4ITpcXHhmNiEhIClcIiksbCgnJTJcXHhmN1wiXCI2XFx4Zjc3XFx4ZjgvbyMlMkpcIlwiNko3Sy9NIzshLlwiICZcIi8/JDshLlwiICZcIi8xJDshLlwiICZcIi8jJCskKSgkXFwnIygjXFwnIyhcIlxcJyMmXFwnIy5cIiAmXCIvXFwnJDhcIjpcXHhmOVwiICkoXCJcXCcjJlxcJyMnKSxsKCclOzYvSiMlOzwvLCM7XFx4YTAvIyQrXCIpKFwiXFwnIyZcXCcjLlwiICZcIi8pJDhcIjpcXHhmYVwiXCIhICkoXCJcXCcjJlxcJyMnKSxsKFwiOzYuKSAmO1QuIyAmO0hcIiksbChcIiU7XFx4YTIvWSMkJTtCLywjO1xceGEzLyMkK1xcXCIpKFxcXCInIyYnIzA2KiU7Qi8sIztcXHhhMy8jJCtcXFwiKShcXFwiJyMmJyMmLyMkK1xcXCIpKFxcXCInIyYnI1wiKSxsKCclM1xceGZiXCJcIjUmN1xceGZjLkcgJjNcXHhmZFwiXCI1XFwnN1xceGZlLjsgJjNcXHhmZlwiXCI1JDdcXHUwMTAwLi8gJjNcXHUwMTAxXCJcIjUlN1xcdTAxMDIuIyAmOzYvJiA4ITpcXHUwMTAzISApJyksbChcIjtcXHhhNC4jICY7XFx4OWZcIiksbCgnJTNcXHUwMTA0XCJcIjUoN1xcdTAxMDUvTSM7PC9EJDNcXHUwMTA2XCJcIjUoN1xcdTAxMDcuLyAmM1xcdTAxMDhcIlwiNSg3XFx1MDEwOS4jICY7Ni8jJCsjKSgjXFwnIyhcIlxcJyMmXFwnIycpLGwoXCIlOzYvWSMkJTtBLywjOzYvIyQrXFxcIikoXFxcIicjJicjMDYqJTtBLywjOzYvIyQrXFxcIikoXFxcIicjJicjJi8jJCtcXFwiKShcXFwiJyMmJyNcIiksbChcIiUkOyEvJiMwIyo7ISYmJiMvJyA4ITpcXHUwMTBhISEgKVwiKSxsKFwiJTtcXHhhOC8mIDghOlxcdTAxMGIhIClcIiksbChcIiU7XFx4YTkvayM7Oy9iJDtcXHhhZS9ZJCQlO0IvLCM7XFx4YWYvIyQrXFxcIikoXFxcIicjJicjMDYqJTtCLywjO1xceGFmLyMkK1xcXCIpKFxcXCInIyYnIyYvIyQrJCkoJCcjKCMnIyhcXFwiJyMmJyNcIiksbChcIjtcXHhhYS4jICY7XFx4YWJcIiksbCgnM1xcdTAxMGNcIlwiNSQ3XFx1MDEwZC5TICYzXFx1MDEwZVwiXCI1JTdcXHUwMTBmLkcgJjNcXHUwMTEwXCJcIjUlN1xcdTAxMTEuOyAmM1xcdTAxMTJcIlwiNSU3XFx1MDExMy4vICYzXFx1MDExNFwiXCI1KzdcXHUwMTE1LiMgJjtcXHhhYycpLGwoJzNcXHUwMTE2XCJcIjVcXCc3XFx1MDExNy4vICYzXFx1MDExOFwiXCI1KTdcXHUwMTE5LiMgJjtcXHhhYycpLGwoXCI7Ni4jICY7XFx4YWRcIiksbCgnJTNcXHUwMTFhXCJcIjVcIjdcXHUwMTFiLywjOzYvIyQrXCIpKFwiXFwnIyZcXCcjJyksbChcIjtcXHhhYy4jICY7NlwiKSxsKFwiJTs2LzUjOzwvLCQ7XFx4YjAvIyQrIykoIycjKFxcXCInIyYnI1wiKSxsKFwiOzYuIyAmO0hcIiksbChcIiU7XFx4YjIvNSM7Li8sJDtcXHg4Zi8jJCsjKSgjJyMoXFxcIicjJicjXCIpLGwoXCIlJDshLyYjMCMqOyEmJiYjLycgOCE6XFx1MDExYyEhIClcIiksbChcIiU7XFx4OWQvJyA4ITpcXHUwMTFkISEgKVwiKSxsKCclO1xceGI1L14jJCU7Qi8sIztcXHg5Zi8jJCtcIikoXCJcXCcjJlxcJyMwNiolO0IvLCM7XFx4OWYvIyQrXCIpKFwiXFwnIyZcXCcjJi8oJDhcIjpcXHUwMTFlXCIhISkoXCJcXCcjJlxcJyMnKSxsKCclJTs3L2UjJCUySlwiXCI2SjdLLywjOzcvIyQrXCIpKFwiXFwnIyZcXCcjMDwqJTJKXCJcIjZKN0svLCM7Ny8jJCtcIikoXCJcXCcjJlxcJyMmLyMkK1wiKShcIlxcJyMmXFwnIy9cIiEmLCknKSxsKFwiJTtMLiMgJjtcXHg5OC9dIyQlO0IvLCM7XFx4YjcvIyQrXFxcIikoXFxcIicjJicjMDYqJTtCLywjO1xceGI3LyMkK1xcXCIpKFxcXCInIyYnIyYvJyQ4XFxcIjpcXHUwMTFmXFxcIiApKFxcXCInIyYnI1wiKSxsKFwiO1xceGI4LiMgJjtcXHg5ZlwiKSxsKFwiJTNcXHUwMTIwXFxcIlxcXCI1IzdcXHUwMTIxLzojOzwvMSQ7Ni8oJDgjOlxcdTAxMjIjISApKCMnIyhcXFwiJyMmJyNcIiksbChcIiUkOyEvJiMwIyo7ISYmJiMvJyA4ITpcXHUwMTIzISEgKVwiKSxsKFwiJTtcXHg5ZC8nIDghOlxcdTAxMjQhISApXCIpLGwoXCIlJDtcXHg5OTAjKjtcXHg5OSYveCM7QC9vJDtNL2YkOz8vXSQkJTtCLywjO1xceDlmLyMkK1xcXCIpKFxcXCInIyYnIzA2KiU7Qi8sIztcXHg5Zi8jJCtcXFwiKShcXFwiJyMmJyMmLyckOCU6XFx1MDEyNSUgKSglJyMoJCcjKCMnIyhcXFwiJyMmJyNcIiksbChcIjtcXHhiZFwiKSxsKFwiJTNcXHUwMTI2XFxcIlxcXCI1JjdcXHUwMTI3L2sjOy4vYiQ7XFx4YzAvWSQkJTtBLywjO1xceGMwLyMkK1xcXCIpKFxcXCInIyYnIzA2KiU7QS8sIztcXHhjMC8jJCtcXFwiKShcXFwiJyMmJyMmLyMkKyQpKCQnIygjJyMoXFxcIicjJicjLiMgJjtcXHhiZVwiKSxsKFwiJTs2L2sjOy4vYiQ7XFx4YmYvWSQkJTtBLywjO1xceGJmLyMkK1xcXCIpKFxcXCInIyYnIzA2KiU7QS8sIztcXHhiZi8jJCtcXFwiKShcXFwiJyMmJyMmLyMkKyQpKCQnIygjJyMoXFxcIicjJicjXCIpLGwoXCIlOzYvOyM7PC8yJDs2LiMgJjtILyMkKyMpKCMnIyhcXFwiJyMmJyNcIiksbChcIjtcXHhjMS5HICY7XFx4YzMuQSAmO1xceGM1LjsgJjtcXHhjNy41ICY7XFx4YzguLyAmO1xceGM5LikgJjtcXHhjYS4jICY7XFx4YmZcIiksbChcIiUzXFx1MDEyOFxcXCJcXFwiNSU3XFx1MDEyOS81Izs8LywkO1xceGMyLyMkKyMpKCMnIyhcXFwiJyMmJyNcIiksbChcIiU7SS8nIDghOlxcdTAxMmEhISApXCIpLGwoXCIlM1xcdTAxMmJcXFwiXFxcIjUmN1xcdTAxMmMvXFx4OTcjOzwvXFx4OGUkO0QvXFx4ODUkO1xceGM0L3wkJCUkOycvJiMwIyo7JyYmJiMvLCM7XFx4YzQvIyQrXFxcIikoXFxcIicjJicjMEMqJSQ7Jy8mIzAjKjsnJiYmIy8sIztcXHhjNC8jJCtcXFwiKShcXFwiJyMmJyMmLywkO0UvIyQrJikoJicjKCUnIygkJyMoIycjKFxcXCInIyYnI1wiKSxsKFwiO3QuIyAmO3dcIiksbChcIiUzXFx1MDEyZFxcXCJcXFwiNSU3XFx1MDEyZS81Izs8LywkO1xceGM2LyMkKyMpKCMnIyhcXFwiJyMmJyNcIiksbChcIiU7SS8nIDghOlxcdTAxMmYhISApXCIpLGwoXCIlM1xcdTAxMzBcXFwiXFxcIjUmN1xcdTAxMzEvOiM7PC8xJDtJLygkOCM6XFx1MDEzMiMhICkoIycjKFxcXCInIyYnI1wiKSxsKCclM1xcdTAxMzNcIlwiNSU3XFx1MDEzNC9dIzs8L1QkJTNcXHUwMTM1XCJcIjUkN1xcdTAxMzYvJiA4ITpcXHUwMTM3ISApLjQgJiUzXFx1MDEzOFwiXCI1JTdcXHUwMTM5LyYgOCE6XFx1MDEzYSEgKS8jJCsjKSgjXFwnIyhcIlxcJyMmXFwnIycpLGwoJyUzXFx1MDEzYlwiXCI1KTdcXHUwMTNjL1IjOzwvSSQzXFx1MDEzZFwiXCI1IzdcXHUwMTNlLi8gJjNcXHUwMTNmXCJcIjUoN1xcdTAxNDAuIyAmOzYvKCQ4IzpcXHUwMTQxIyEgKSgjXFwnIyhcIlxcJyMmXFwnIycpLGwoJyUzXFx1MDE0MlwiXCI1IzdcXHUwMTQzL1xceDkzIzs8L1xceDhhJDtEL1xceDgxJCU7XFx4Y2IvZSMkJTJEXCJcIjZEN0UvLCM7XFx4Y2IvIyQrXCIpKFwiXFwnIyZcXCcjMDwqJTJEXCJcIjZEN0UvLCM7XFx4Y2IvIyQrXCIpKFwiXFwnIyZcXCcjJi8jJCtcIikoXCJcXCcjJlxcJyMvLCQ7RS8jJCslKSglXFwnIygkXFwnIygjXFwnIyhcIlxcJyMmXFwnIycpLGwoJyUzXFx1MDE0NFwiXCI1KDdcXHUwMTQ1Li8gJjNcXHUwMTQ2XCJcIjUkN1xcdTAxNDcuIyAmOzYvXFwnIDghOlxcdTAxNDghISApJyksbChcIiU7Ni9ZIyQlO0EvLCM7Ni8jJCtcXFwiKShcXFwiJyMmJyMwNiolO0EvLCM7Ni8jJCtcXFwiKShcXFwiJyMmJyMmLyMkK1xcXCIpKFxcXCInIyYnI1wiKSxsKFwiJTtcXHhjZS9HIzsuLz4kO1xceGNlLzUkOy4vLCQ7XFx4OGYvIyQrJSkoJScjKCQnIygjJyMoXFxcIicjJicjXCIpLGwoXCIlJDshLyYjMCMqOyEmJiYjLycgOCE6XFx1MDE0OSEhIClcIiksbChcIiU7XFx4ZDAvXSMkJTtBLywjO1xceGQwLyMkK1xcXCIpKFxcXCInIyYnIzA2KiU7QS8sIztcXHhkMC8jJCtcXFwiKShcXFwiJyMmJyMmLyckOFxcXCI6XFx1MDE0YVxcXCIgKShcXFwiJyMmJyNcIiksbChcIiU7XFx4OTgvXSMkJTtCLywjO1xceDlmLyMkK1xcXCIpKFxcXCInIyYnIzA2KiU7Qi8sIztcXHg5Zi8jJCtcXFwiKShcXFwiJyMmJyMmLyckOFxcXCI6XFx1MDE0YlxcXCIgKShcXFwiJyMmJyNcIiksbCgnJTtMLk8gJjtcXHg5OC5JICYlO0AuXCIgJlwiLzojO3QvMSQ7Py5cIiAmXCIvIyQrIykoI1xcJyMoXCJcXCcjJlxcJyMvXSMkJTtCLywjO1xceDlmLyMkK1wiKShcIlxcJyMmXFwnIzA2KiU7Qi8sIztcXHg5Zi8jJCtcIikoXCJcXCcjJlxcJyMmL1xcJyQ4XCI6XFx1MDE0Y1wiICkoXCJcXCcjJlxcJyMnKSxsKFwiJTtcXHhkMy9dIyQlO0IvLCM7XFx4ZDQvIyQrXFxcIikoXFxcIicjJicjMDYqJTtCLywjO1xceGQ0LyMkK1xcXCIpKFxcXCInIyYnIyYvJyQ4XFxcIjpcXHUwMTRkXFxcIiApKFxcXCInIyYnI1wiKSxsKFwiJTtcXHg5NS8mIDghOlxcdTAxNGUhIClcIiksbCgnJTNcXHUwMTRmXCJcIjUoN1xcdTAxNTAvOiM7PC8xJDs2LygkOCM6XFx1MDE1MSMhICkoI1xcJyMoXCJcXCcjJlxcJyMuZyAmJTNcXHUwMTUyXCJcIjUmN1xcdTAxNTMvOiM7PC8xJDs2LygkOCM6XFx1MDE1NCMhICkoI1xcJyMoXCJcXCcjJlxcJyMuOiAmJTNcXHUwMTU1XCJcIjUqN1xcdTAxNTYvJiA4ITpcXHUwMTU3ISApLiMgJjtcXHg5ZicpLGwoJyUlOzYvayMkJTtBLzIjOzYvKSQ4XCI6XFx1MDE1OFwiXCIkICkoXCJcXCcjJlxcJyMwPColO0EvMiM7Ni8pJDhcIjpcXHUwMTU4XCJcIiQgKShcIlxcJyMmXFwnIyYvKSQ4XCI6XFx1MDE1OVwiXCIhICkoXCJcXCcjJlxcJyMuXCIgJlwiL1xcJyA4ITpcXHUwMTVhISEgKScpLGwoXCIlO1xceGQ3L1kjJCU7QS8sIztcXHhkNy8jJCtcXFwiKShcXFwiJyMmJyMwNiolO0EvLCM7XFx4ZDcvIyQrXFxcIikoXFxcIicjJicjJi8jJCtcXFwiKShcXFwiJyMmJyNcIiksbChcIiU7XFx4OTgvWSMkJTtCLywjO1xceDlmLyMkK1xcXCIpKFxcXCInIyYnIzA2KiU7Qi8sIztcXHg5Zi8jJCtcXFwiKShcXFwiJyMmJyMmLyMkK1xcXCIpKFxcXCInIyYnI1wiKSxsKFwiJSQ7IS8mIzAjKjshJiYmIy8nIDghOlxcdTAxNWIhISApXCIpLGwoXCIlO1xceGRhL1kjJCU7Qi8sIztcXHhkYi8jJCtcXFwiKShcXFwiJyMmJyMwNiolO0IvLCM7XFx4ZGIvIyQrXFxcIikoXFxcIicjJicjJi8jJCtcXFwiKShcXFwiJyMmJyNcIiksbCgnJTNcXHUwMTVjXCJcIjUmN1xcdTAxNWQuOyAmM1xcdTAxNWVcIlwiNVxcJzdcXHUwMTVmLi8gJjNcXHUwMTYwXCJcIjUqN1xcdTAxNjEuIyAmOzYvJiA4ITpcXHUwMTYyISApJyksbChcIiUzXFx1MDE2M1xcXCJcXFwiNSY3XFx1MDE2NC86Izs8LzEkO1xceGRjLygkOCM6XFx1MDE2NSMhICkoIycjKFxcXCInIyYnIy59ICYlM1xceGYzXFxcIlxcXCI1JzdcXHhmNC86Izs8LzEkO1xceDlkLygkOCM6XFx1MDE2NiMhICkoIycjKFxcXCInIyYnIy5QICYlM1xcdTAxNjdcXFwiXFxcIjUrN1xcdTAxNjgvOiM7PC8xJDtcXHg5ZC8oJDgjOlxcdTAxNjkjISApKCMnIyhcXFwiJyMmJyMuIyAmO1xceDlmXCIpLGwoJzNcXHUwMTZhXCJcIjUrN1xcdTAxNmIuayAmM1xcdTAxNmNcIlwiNSk3XFx1MDE2ZC5fICYzXFx1MDE2ZVwiXCI1KDdcXHUwMTZmLlMgJjNcXHUwMTcwXCJcIjVcXCc3XFx1MDE3MS5HICYzXFx1MDE3MlwiXCI1JjdcXHUwMTczLjsgJjNcXHUwMTc0XCJcIjUqN1xcdTAxNzUuLyAmM1xcdTAxNzZcIlwiNSk3XFx1MDE3Ny4jICY7NicpLGwoJzsxLlwiICZcIicpLGwoJyUlOzYvayMkJTtBLzIjOzYvKSQ4XCI6XFx1MDE1OFwiXCIkICkoXCJcXCcjJlxcJyMwPColO0EvMiM7Ni8pJDhcIjpcXHUwMTU4XCJcIiQgKShcIlxcJyMmXFwnIyYvKSQ4XCI6XFx1MDE1OVwiXCIhICkoXCJcXCcjJlxcJyMuXCIgJlwiL1xcJyA4ITpcXHUwMTc4ISEgKScpLGwoXCIlO0wuIyAmO1xceDk4L10jJCU7Qi8sIztcXHhlMC8jJCtcXFwiKShcXFwiJyMmJyMwNiolO0IvLCM7XFx4ZTAvIyQrXFxcIikoXFxcIicjJicjJi8nJDhcXFwiOlxcdTAxNzlcXFwiICkoXFxcIicjJicjXCIpLGwoXCI7XFx4YjguIyAmO1xceDlmXCIpLGwoXCIlO1xceGUyL1kjJCU7QS8sIztcXHhlMi8jJCtcXFwiKShcXFwiJyMmJyMwNiolO0EvLCM7XFx4ZTIvIyQrXFxcIikoXFxcIicjJicjJi8jJCtcXFwiKShcXFwiJyMmJyNcIiksbChcIiU7XFx4ZTkvayM7Li9iJDtcXHhlYy9ZJCQlO0IvLCM7XFx4ZTMvIyQrXFxcIikoXFxcIicjJicjMDYqJTtCLywjO1xceGUzLyMkK1xcXCIpKFxcXCInIyYnIyYvIyQrJCkoJCcjKCMnIyhcXFwiJyMmJyNcIiksbChcIjtcXHhlNC47ICY7XFx4ZTUuNSAmO1xceGU2Li8gJjtcXHhlNy4pICY7XFx4ZTguIyAmO1xceDlmXCIpLGwoXCIlM1xcdTAxN2FcXFwiXFxcIjUjN1xcdTAxN2IvOiM7PC8xJDtcXHhlZi8oJDgjOlxcdTAxN2MjISApKCMnIyhcXFwiJyMmJyNcIiksbChcIiUzXFx1MDE3ZFxcXCJcXFwiNSU3XFx1MDE3ZS86Izs8LzEkO1QvKCQ4IzpcXHUwMTdmIyEgKSgjJyMoXFxcIicjJicjXCIpLGwoXCIlM1xcdTAxODBcXFwiXFxcIjUoN1xcdTAxODEvQCM7PC83JDtcXFxcLiMgJjtZLygkOCM6XFx1MDE4MiMhICkoIycjKFxcXCInIyYnI1wiKSxsKFwiJTNcXHUwMTgzXFxcIlxcXCI1JjdcXHUwMTg0LzojOzwvMSQ7Ni8oJDgjOlxcdTAxODUjISApKCMnIyhcXFwiJyMmJyNcIiksbCgnJTNcXHUwMTg2XCJcIjUlN1xcdTAxODcvTyMlOzwvMyMkOyEwIyo7ISYvIyQrXCIpKFwiXFwnIyZcXCcjLlwiICZcIi9cXCckOFwiOlxcdTAxODhcIiApKFwiXFwnIyZcXCcjJyksbChcIiU7XFx4ZWEvRyM7Oy8+JDs2LzUkOzsvLCQ7XFx4ZWIvIyQrJSkoJScjKCQnIygjJyMoXFxcIicjJicjXCIpLGwoJyUzXFx4OTJcIlwiNSM3XFx4ZDMuIyAmOzYvXFwnIDghOlxcdTAxODkhISApJyksbCgnJTNcXHhiMVwiXCI1IzdcXHUwMThhLkcgJjNcXHhiM1wiXCI1IzdcXHUwMThiLjsgJjNcXHhiN1wiXCI1IzdcXHUwMThjLi8gJjNcXHhiNVwiXCI1JDdcXHUwMThkLiMgJjs2L1xcJyA4ITpcXHUwMThlISEgKScpLGwoJyU7XFx4ZWQvRCMlO0MvLCM7XFx4ZWUvIyQrXCIpKFwiXFwnIyZcXCcjLlwiICZcIi8jJCtcIikoXCJcXCcjJlxcJyMnKSxsKFwiJTtVLikgJjtcXFxcLiMgJjtYLyYgOCE6XFx1MDE4ZiEgKVwiKSxsKCclJTshLlwiICZcIi9bIzshLlwiICZcIi9NJDshLlwiICZcIi8/JDshLlwiICZcIi8xJDshLlwiICZcIi8jJCslKSglXFwnIygkXFwnIygjXFwnIyhcIlxcJyMmXFwnIy9cXCcgOCE6XFx1MDE5MCEhICknKSxsKCclJTshLz8jOyEuXCIgJlwiLzEkOyEuXCIgJlwiLyMkKyMpKCNcXCcjKFwiXFwnIyZcXCcjL1xcJyA4ITpcXHUwMTkxISEgKScpLGwoXCI7XFx4YmRcIiksbCgnJTtcXHg5ZC9eIyQlO0IvLCM7XFx4ZjIvIyQrXCIpKFwiXFwnIyZcXCcjMDYqJTtCLywjO1xceGYyLyMkK1wiKShcIlxcJyMmXFwnIyYvKCQ4XCI6XFx1MDE5MlwiISEpKFwiXFwnIyZcXCcjJyksbChcIjtcXHhmMy4jICY7XFx4OWZcIiksbCgnJTJcXHUwMTkzXCJcIjZcXHUwMTkzN1xcdTAxOTQvTCM7PC9DJDJcXHUwMTk1XCJcIjZcXHUwMTk1N1xcdTAxOTYuKSAmMlxcdTAxOTdcIlwiNlxcdTAxOTc3XFx1MDE5OC8oJDgjOlxcdTAxOTkjISApKCNcXCcjKFwiXFwnIyZcXCcjJyksbCgnJTtcXHg5ZC9eIyQlO0IvLCM7XFx4OWYvIyQrXCIpKFwiXFwnIyZcXCcjMDYqJTtCLywjO1xceDlmLyMkK1wiKShcIlxcJyMmXFwnIyYvKCQ4XCI6XFx1MDE5YVwiISEpKFwiXFwnIyZcXCcjJyksbChcIiU7Ni81IzswLywkO1xceGY2LyMkKyMpKCMnIyhcXFwiJyMmJyNcIiksbChcIiQ7Mi4pICY7NC4jICY7LjAvKjsyLikgJjs0LiMgJjsuJlwiKSxsKFwiJDslMCMqOyUmXCIpLGwoXCIlO1xceGY5LzsjMjhcXFwiXFxcIjY4NzkvLCQ7XFx4ZmEvIyQrIykoIycjKFxcXCInIyYnI1wiKSxsKCclM1xcdTAxOWJcIlwiNSU3XFx1MDE5Yy4pICYzXFx1MDE5ZFwiXCI1JDdcXHUwMTllL1xcJyA4ITpcXHUwMTlmISEgKScpLGwoJyU7XFx4ZmIvSiMlMjhcIlwiNjg3OS8sIzteLyMkK1wiKShcIlxcJyMmXFwnIy5cIiAmXCIvIyQrXCIpKFwiXFwnIyZcXCcjJyksbChcIiU7XFxcXC4pICY7WC4jICY7XFx4ODIvJyA4ITpcXHUwMWEwISEgKVwiKSxsKCc7XCIuUyAmOyEuTSAmMkZcIlwiNkY3Ry5BICYySlwiXCI2SjdLLjUgJjJIXCJcIjZIN0kuKSAmMk5cIlwiNk43TycpLGwoJzJMXCJcIjZMN00uXFx4OTUgJjJCXCJcIjZCN0MuXFx4ODkgJjI8XCJcIjY8Nz0ufSAmMlJcIlwiNlI3Uy5xICYyVFwiXCI2VDdVLmUgJjJWXCJcIjZWN1cuWSAmMlBcIlwiNlA3US5NICYyQFwiXCI2QDdBLkEgJjJEXCJcIjZEN0UuNSAmMjJcIlwiNjI3My4pICYyPlwiXCI2Pjc/JyksbCgnJTtcXHhmZi9iIzI4XCJcIjY4NzkvUyQ7XFx4ZmEvSiQlMlxcdTAxYTFcIlwiNlxcdTAxYTE3XFx1MDFhMi8sIztcXHhlYi8jJCtcIikoXCJcXCcjJlxcJyMuXCIgJlwiLyMkKyQpKCRcXCcjKCNcXCcjKFwiXFwnIyZcXCcjJyksbCgnJTNcXHUwMWEzXCJcIjUlN1xcdTAxYTQuKSAmM1xcdTAxYTVcIlwiNSQ3XFx1MDFhNi9cXCcgOCE6XFx1MDE5ZiEhICknKSxsKCclO1xceGViL08jM1xceGIxXCJcIjUjN1xceGIyLjYgJjNcXHhiM1wiXCI1IzdcXHhiNC4qICYkOyswIyo7KyYvXFwnJDhcIjpcXHUwMWE3XCIgKShcIlxcJyMmXFwnIycpLGwoXCIlO1xcdTAxMDMvXFx4ODcjMkZcXFwiXFxcIjZGN0cveCQ7XFx1MDEwMi9vJDJGXFxcIlxcXCI2RjdHL2AkO1xcdTAxMDIvVyQyRlxcXCJcXFwiNkY3Ry9IJDtcXHUwMTAyLz8kMkZcXFwiXFxcIjZGN0cvMCQ7XFx1MDEwNC8nJDgpOlxcdTAxYTgpICkoKScjKCgnIygnJyMoJicjKCUnIygkJyMoIycjKFxcXCInIyYnI1wiKSxsKFwiJTsjLz4jOyMvNSQ7Iy8sJDsjLyMkKyQpKCQnIygjJyMoXFxcIicjJicjXCIpLGwoXCIlO1xcdTAxMDIvLCM7XFx1MDEwMi8jJCtcXFwiKShcXFwiJyMmJyNcIiksbChcIiU7XFx1MDEwMi81IztcXHUwMTAyLywkO1xcdTAxMDIvIyQrIykoIycjKFxcXCInIyYnI1wiKSxsKFwiJTtcXHg4NC9VIzsnL0wkO1xceDkxL0MkOycvOiQ7XFx4OGYvMSQ7IC5cXFwiICZcXFwiLyMkKyYpKCYnIyglJyMoJCcjKCMnIyhcXFwiJyMmJyNcIiksbCgnJTJcXHUwMWE5XCJcIjZcXHUwMWE5N1xcdTAxYWEuKSAmMlxcdTAxYWJcIlwiNlxcdTAxYWI3XFx1MDFhYy93IzswL24kO1xcdTAxMDcvZSQkJTtCLzIjO1xcdTAxMDguIyAmO1xceDlmLyMkK1wiKShcIlxcJyMmXFwnIzA8KiU7Qi8yIztcXHUwMTA4LiMgJjtcXHg5Zi8jJCtcIikoXCJcXCcjJlxcJyMmLyMkKyQpKCRcXCcjKCNcXCcjKFwiXFwnIyZcXCcjJyksbChcIjtcXHg5OC4jICY7TFwiKSxsKFwiJTJcXHUwMWFkXFxcIlxcXCI2XFx1MDFhZDdcXHUwMWFlLzUjOzwvLCQ7XFx1MDEwOS8jJCsjKSgjJyMoXFxcIicjJicjXCIpLGwoXCIlO0QvUyM7LC9KJDI6XFxcIlxcXCI2Ojc7LzskOywuIyAmO1QvLCQ7RS8jJCslKSglJyMoJCcjKCMnIyhcXFwiJyMmJyNcIildLEU9MCxTPTAsQz1be2xpbmU6MSxjb2x1bW46MX1dLFI9MCx2PVtdLEE9MDtpZihcInN0YXJ0UnVsZVwiaW4gdCl7aWYoISh0LnN0YXJ0UnVsZSBpbiBmKSl0aHJvdyBuZXcgRXJyb3IoXCJDYW4ndCBzdGFydCBwYXJzaW5nIGZyb20gcnVsZSBcXFwiXCIrdC5zdGFydFJ1bGUrJ1wiLicpO1Q9Zlt0LnN0YXJ0UnVsZV19aWYodC5kYXRhPXt9LChwPWQoVCkpIT09ZyYmRT09PWUubGVuZ3RoKXJldHVybiBwO3Rocm93IHAhPT1nJiZFPGUubGVuZ3RoJiZoKHt0eXBlOlwiZW5kXCJ9KSx1KHYsUjxlLmxlbmd0aD9lLmNoYXJBdChSKTpudWxsLFI8ZS5sZW5ndGg/YyhSLFIrMSk6YyhSLFIpKX19fSxmdW5jdGlvbihlLHQsaSl7XCJ1c2Ugc3RyaWN0XCI7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybntzdHJpcFRjcENhbmRpZGF0ZXM6ZnVuY3Rpb24odCl7cmV0dXJuIHQuc2RwPXQuc2RwLnJlcGxhY2UoL15hPWNhbmRpZGF0ZTpcXGQrIFxcZCsgdGNwIC4qP1xcclxcbi9naW0sXCJcIiksZS5VdGlscy5Qcm9taXNlLnJlc29sdmUodCl9LHN0cmlwVGVsZXBob25lRXZlbnQ6ZnVuY3Rpb24odCl7cmV0dXJuIHQuc2RwPXQuc2RwLnJlcGxhY2UoL15hPXJ0cG1hcDpcXGQrIHRlbGVwaG9uZS1ldmVudFxcL1xcZCtcXHJcXG4vZ2ltLFwiXCIpLGUuVXRpbHMuUHJvbWlzZS5yZXNvbHZlKHQpfSxjbGVhbkppdHNpU2RwSW1hZ2VhdHRyOmZ1bmN0aW9uKHQpe3JldHVybiB0LnNkcD10LnNkcC5yZXBsYWNlKC9eKGE9aW1hZ2VhdHRyOi4qPykoeHx5KT1cXFswLS9nbSxcIiQxJDI9WzE6XCIpLGUuVXRpbHMuUHJvbWlzZS5yZXNvbHZlKHQpfSxzdHJpcEc3MjI6ZnVuY3Rpb24odCl7dmFyIGk9dC5zZHAubWF0Y2goL15tPWF1ZGlvLiokL2dtKTtpZihpKXt2YXIgcz1pWzBdO3M9cy5zcGxpdChcIiBcIik7Zm9yKHZhciByPTM7cjxzLmxlbmd0aDtyKz0xKWlmKFwiOVwiPT09c1tyXSl7cy5zcGxpY2UociwxKTt2YXIgbj1wYXJzZUludChzWzFdLDEwKTtuLT0xLHNbMV09bi50b1N0cmluZygpfXM9cy5qb2luKFwiIFwiKSx0LnNkcD10LnNkcC5yZXBsYWNlKC9ebT1hdWRpby4qJC9nbSxzKSx0LnNkcD10LnNkcC5yZXBsYWNlKC9eYT1ydHBtYXA6LipHNzIyXFwvODAwMFxcclxcbj8vZ20sXCJcIikucmVwbGFjZSgpfXJldHVybiBlLlV0aWxzLlByb21pc2UucmVzb2x2ZSh0KX19fX0sZnVuY3Rpb24oZSx0LGkpe1widXNlIHN0cmljdFwiOyhmdW5jdGlvbih0KXtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIGk9e1NUQVRVU19OVUxMOjAsU1RBVFVTX05FVzoxLFNUQVRVU19DT05ORUNUSU5HOjIsU1RBVFVTX0NPTk5FQ1RFRDozLFNUQVRVU19DT01QTEVURUQ6NH0scz1mdW5jdGlvbihzKXtpZihzLm1lZGlhLnJlbW90ZS52aWRlbz90aGlzLnZpZGVvPSEwOnRoaXMudmlkZW89ITEscy5tZWRpYS5yZW1vdGUuYXVkaW8/dGhpcy5hdWRpbz0hMDp0aGlzLmF1ZGlvPSExLCF0aGlzLmF1ZGlvJiYhdGhpcy52aWRlbyl0aHJvdyBuZXcgRXJyb3IoXCJBdCBsZWFzdCBvbmUgcmVtb3RlIGF1ZGlvIG9yIHZpZGVvIGVsZW1lbnQgaXMgcmVxdWlyZWQgZm9yIFNpbXBsZS5cIik7dGhpcy5vcHRpb25zPXM7dmFyIHI9dC5uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCksbj0hMTtyLmluZGV4T2YoXCJzYWZhcmlcIik+LTEmJnIuaW5kZXhPZihcImNocm9tZVwiKTwwJiYobj0hMCk7dmFyIG89e307cmV0dXJuIG4mJihvLm1vZGlmaWVycz1bZS5XZWJSVEMuTW9kaWZpZXJzLnN0cmlwRzcyMl0pLHRoaXMub3B0aW9ucy51YS51cml8fCh0aGlzLmFub255bW91cz0hMCksdGhpcy51YT1uZXcgZS5VQSh7d3NTZXJ2ZXJzOnRoaXMub3B0aW9ucy51YS53c1NlcnZlcnMsdXJpOnRoaXMub3B0aW9ucy51YS51cmksYXV0aG9yaXphdGlvblVzZXI6dGhpcy5vcHRpb25zLnVhLmF1dGhvcml6YXRpb25Vc2VyLHBhc3N3b3JkOnRoaXMub3B0aW9ucy51YS5wYXNzd29yZCxkaXNwbGF5TmFtZTp0aGlzLm9wdGlvbnMudWEuZGlzcGxheU5hbWUsdHJhY2VTaXA6dGhpcy5vcHRpb25zLnVhLnRyYWNlU2lwLHVzZXJBZ2VudFN0cmluZzp0aGlzLm9wdGlvbnMudWEudXNlckFnZW50U3RyaW5nLHJlZ2lzdGVyOiEwLHNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJGYWN0b3J5T3B0aW9uczpvfSksdGhpcy5zdGF0ZT1pLlNUQVRVU19OVUxMLHRoaXMubG9nZ2VyPXRoaXMudWEuZ2V0TG9nZ2VyKFwic2lwLnNpbXBsZVwiKSx0aGlzLnVhLm9uKFwicmVnaXN0ZXJlZFwiLGZ1bmN0aW9uKCl7dGhpcy5lbWl0KFwicmVnaXN0ZXJlZFwiLHRoaXMudWEpfS5iaW5kKHRoaXMpKSx0aGlzLnVhLm9uKFwidW5yZWdpc3RlcmVkXCIsZnVuY3Rpb24oKXt0aGlzLmVtaXQoXCJ1bnJlZ2lzdGVyZWRcIix0aGlzLnVhKX0uYmluZCh0aGlzKSksdGhpcy51YS5vbihcImZhaWxlZFwiLGZ1bmN0aW9uKCl7dGhpcy5lbWl0KFwidW5yZWdpc3RlcmVkXCIsdGhpcy51YSl9LmJpbmQodGhpcykpLHRoaXMudWEub24oXCJpbnZpdGVcIixmdW5jdGlvbihlKXtpZih0aGlzLnN0YXRlIT09aS5TVEFUVVNfTlVMTCYmdGhpcy5zdGF0ZSE9PWkuU1RBVFVTX0NPTVBMRVRFRClyZXR1cm4gdGhpcy5sb2dnZXIud2FybihcIlJlamVjdGluZyBpbmNvbWluZyBjYWxsLiBTaW1wbGUgb25seSBzdXBwb3J0cyAxIGNhbGwgYXQgYSB0aW1lXCIpLHZvaWQgZS5yZWplY3QoKTt0aGlzLnNlc3Npb249ZSx0aGlzLnNldHVwU2Vzc2lvbigpLHRoaXMuZW1pdChcInJpbmdpbmdcIix0aGlzLnNlc3Npb24pfS5iaW5kKHRoaXMpKSx0aGlzLnVhLm9uKFwibWVzc2FnZVwiLGZ1bmN0aW9uKGUpe3RoaXMuZW1pdChcIm1lc3NhZ2VcIixlKX0uYmluZCh0aGlzKSksdGhpc307cmV0dXJuIHMucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZS5FdmVudEVtaXR0ZXIucHJvdG90eXBlKSxzLkM9aSxzLnByb3RvdHlwZS5jYWxsPWZ1bmN0aW9uKGUpe2lmKHRoaXMudWEmJnRoaXMuY2hlY2tSZWdpc3RyYXRpb24oKSl7aWYodGhpcy5zdGF0ZT09PWkuU1RBVFVTX05VTEx8fHRoaXMuc3RhdGU9PT1pLlNUQVRVU19DT01QTEVURUQpcmV0dXJuIHRoaXMub3B0aW9ucy5tZWRpYS5yZW1vdGUuYXVkaW8mJih0aGlzLm9wdGlvbnMubWVkaWEucmVtb3RlLmF1ZGlvLmF1dG9wbGF5PSEwKSx0aGlzLm9wdGlvbnMubWVkaWEucmVtb3RlLnZpZGVvJiYodGhpcy5vcHRpb25zLm1lZGlhLnJlbW90ZS52aWRlby5hdXRvcGxheT0hMCksdGhpcy5vcHRpb25zLm1lZGlhLmxvY2FsJiZ0aGlzLm9wdGlvbnMubWVkaWEubG9jYWwudmlkZW8mJih0aGlzLm9wdGlvbnMubWVkaWEubG9jYWwudmlkZW8uYXV0b3BsYXk9ITAsdGhpcy5vcHRpb25zLm1lZGlhLmxvY2FsLnZpZGVvLnZvbHVtZT0wKSx0aGlzLnNlc3Npb249dGhpcy51YS5pbnZpdGUoZSx7c2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnM6e2NvbnN0cmFpbnRzOnthdWRpbzp0aGlzLmF1ZGlvLHZpZGVvOnRoaXMudmlkZW99fX0pLHRoaXMuc2V0dXBTZXNzaW9uKCksdGhpcy5zZXNzaW9uO3RoaXMubG9nZ2VyLndhcm4oXCJDYW5ub3QgbWFrZSBtb3JlIHRoYW4gYSBzaW5nbGUgY2FsbCB3aXRoIFNpbXBsZVwiKX1lbHNlIHRoaXMubG9nZ2VyLndhcm4oXCJBIHJlZ2lzdGVyZWQgVUEgaXMgcmVxdWlyZWQgZm9yIGNhbGxpbmdcIil9LHMucHJvdG90eXBlLmFuc3dlcj1mdW5jdGlvbigpe2lmKHRoaXMuc3RhdGU9PT1pLlNUQVRVU19ORVd8fHRoaXMuc3RhdGU9PT1pLlNUQVRVU19DT05ORUNUSU5HKXJldHVybiB0aGlzLm9wdGlvbnMubWVkaWEucmVtb3RlLmF1ZGlvJiYodGhpcy5vcHRpb25zLm1lZGlhLnJlbW90ZS5hdWRpby5hdXRvcGxheT0hMCksdGhpcy5vcHRpb25zLm1lZGlhLnJlbW90ZS52aWRlbyYmKHRoaXMub3B0aW9ucy5tZWRpYS5yZW1vdGUudmlkZW8uYXV0b3BsYXk9ITApLHRoaXMuc2Vzc2lvbi5hY2NlcHQoe3Nlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zOntjb25zdHJhaW50czp7YXVkaW86dGhpcy5hdWRpbyx2aWRlbzp0aGlzLnZpZGVvfX19KTt0aGlzLmxvZ2dlci53YXJuKFwiTm8gY2FsbCB0byBhbnN3ZXJcIil9LHMucHJvdG90eXBlLnJlamVjdD1mdW5jdGlvbigpe2lmKHRoaXMuc3RhdGU9PT1pLlNUQVRVU19ORVd8fHRoaXMuc3RhdGU9PT1pLlNUQVRVU19DT05ORUNUSU5HKXJldHVybiB0aGlzLnNlc3Npb24ucmVqZWN0KCk7dGhpcy5sb2dnZXIud2FybihcIkNhbGwgaXMgYWxyZWFkeSBhbnN3ZXJlZFwiKX0scy5wcm90b3R5cGUuaGFuZ3VwPWZ1bmN0aW9uKCl7aWYodGhpcy5zdGF0ZT09PWkuU1RBVFVTX0NPTk5FQ1RFRHx8dGhpcy5zdGF0ZT09PWkuU1RBVFVTX0NPTk5FQ1RJTkd8fHRoaXMuc3RhdGU9PT1pLlNUQVRVU19ORVcpcmV0dXJuIHRoaXMuc3RhdGUhPT1pLlNUQVRVU19DT05ORUNURUQ/dGhpcy5zZXNzaW9uLmNhbmNlbCgpOnRoaXMuc2Vzc2lvbi5ieWUoKTt0aGlzLmxvZ2dlci53YXJuKFwiTm8gYWN0aXZlIGNhbGwgdG8gaGFuZyB1cCBvblwiKX0scy5wcm90b3R5cGUuaG9sZD1mdW5jdGlvbigpe2lmKHRoaXMuc3RhdGU9PT1pLlNUQVRVU19DT05ORUNURUQmJiF0aGlzLnNlc3Npb24ubG9jYWxfaG9sZClyZXR1cm4gdGhpcy5tdXRlKCksdGhpcy5sb2dnZXIubG9nKFwiUGxhY2luZyBzZXNzaW9uIG9uIGhvbGRcIiksdGhpcy5zZXNzaW9uLmhvbGQoKTt0aGlzLmxvZ2dlci53YXJuKFwiQ2Fubm90IHB1dCBjYWxsIG9uIGhvbGRcIil9LHMucHJvdG90eXBlLnVuaG9sZD1mdW5jdGlvbigpe2lmKHRoaXMuc3RhdGU9PT1pLlNUQVRVU19DT05ORUNURUQmJnRoaXMuc2Vzc2lvbi5sb2NhbF9ob2xkKXJldHVybiB0aGlzLnVubXV0ZSgpLHRoaXMubG9nZ2VyLmxvZyhcIlBsYWNpbmcgY2FsbCBvZmYgaG9sZFwiKSx0aGlzLnNlc3Npb24udW5ob2xkKCk7dGhpcy5sb2dnZXIud2FybihcIkNhbm5vdCB1bmhvbGQgYSBjYWxsIHRoYXQgaXMgbm90IG9uIGhvbGRcIil9LHMucHJvdG90eXBlLm11dGU9ZnVuY3Rpb24oKXt0aGlzLnN0YXRlPT09aS5TVEFUVVNfQ09OTkVDVEVEPyh0aGlzLmxvZ2dlci5sb2coXCJNdXRpbmcgQXVkaW9cIiksdGhpcy50b2dnbGVNdXRlKCEwKSx0aGlzLmVtaXQoXCJtdXRlXCIsdGhpcykpOnRoaXMubG9nZ2VyLndhcm4oXCJBbiBhY2l0dmUgY2FsbCBpcyByZXF1aXJlZCB0byBtdXRlIGF1ZGlvXCIpfSxzLnByb3RvdHlwZS51bm11dGU9ZnVuY3Rpb24oKXt0aGlzLnN0YXRlPT09aS5TVEFUVVNfQ09OTkVDVEVEPyh0aGlzLmxvZ2dlci5sb2coXCJVbm11dGluZyBBdWRpb1wiKSx0aGlzLnRvZ2dsZU11dGUoITEpLHRoaXMuZW1pdChcInVubXV0ZVwiLHRoaXMpKTp0aGlzLmxvZ2dlci53YXJuKFwiQW4gYWN0aXZlIGNhbGwgaXMgcmVxdWlyZWQgdG8gdW5tdXRlIGF1ZGlvXCIpfSxzLnByb3RvdHlwZS5zZW5kRFRNRj1mdW5jdGlvbihlKXt0aGlzLnN0YXRlPT09aS5TVEFUVVNfQ09OTkVDVEVEPyh0aGlzLmxvZ2dlci5sb2coXCJTZW5kaW5nIERUTUYgdG9uZTogXCIrZSksdGhpcy5zZXNzaW9uLmR0bWYoZSkpOnRoaXMubG9nZ2VyLndhcm4oXCJBbiBhY3RpdmUgY2FsbCBpcyByZXF1aXJlZCB0byBzZW5kIGEgRFRNRiB0b25lXCIpfSxzLnByb3RvdHlwZS5tZXNzYWdlPWZ1bmN0aW9uKGUsdCl7dGhpcy51YSYmdGhpcy5jaGVja1JlZ2lzdHJhdGlvbigpP2UmJnQ/dGhpcy51YS5tZXNzYWdlKGUsdCk6dGhpcy5sb2dnZXIud2FybihcIkEgZGVzdGluYXRpb24gYW5kIG1lc3NhZ2UgYXJlIHJlcXVpcmVkIHRvIHNlbmQgYSBtZXNzYWdlXCIpOnRoaXMubG9nZ2VyLndhcm4oXCJBIHJlZ2lzdGVyZWQgVUEgaXMgcmVxdWlyZWQgdG8gc2VuZCBhIG1lc3NhZ2VcIil9LHMucHJvdG90eXBlLmNoZWNrUmVnaXN0cmF0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYW5vbnltb3VzfHx0aGlzLnVhJiZ0aGlzLnVhLmlzUmVnaXN0ZXJlZCgpfSxzLnByb3RvdHlwZS5zZXR1cFJlbW90ZU1lZGlhPWZ1bmN0aW9uKCl7dmFyIGUsaT10aGlzLnNlc3Npb24uc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlci5wZWVyQ29ubmVjdGlvbjtpLmdldFJlY2VpdmVycz8oZT1uZXcgdC53aW5kb3cuTWVkaWFTdHJlYW0saS5nZXRSZWNlaXZlcnMoKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBpPXQudHJhY2s7aSYmZS5hZGRUcmFjayhpKX0pKTplPWkuZ2V0UmVtb3RlU3RyZWFtcygpWzBdLHRoaXMudmlkZW8/KHRoaXMub3B0aW9ucy5tZWRpYS5yZW1vdGUudmlkZW8uc3JjT2JqZWN0PWUsdGhpcy5vcHRpb25zLm1lZGlhLnJlbW90ZS52aWRlby5wbGF5KCkuY2F0Y2goZnVuY3Rpb24oKXt0aGlzLmxvZ2dlci5sb2coXCJwbGF5IHdhcyByZWplY3RlZFwiKX0uYmluZCh0aGlzKSkpOnRoaXMuYXVkaW8mJih0aGlzLm9wdGlvbnMubWVkaWEucmVtb3RlLmF1ZGlvLnNyY09iamVjdD1lLHRoaXMub3B0aW9ucy5tZWRpYS5yZW1vdGUuYXVkaW8ucGxheSgpLmNhdGNoKGZ1bmN0aW9uKCl7dGhpcy5sb2dnZXIubG9nKFwicGxheSB3YXMgcmVqZWN0ZWRcIil9LmJpbmQodGhpcykpKX0scy5wcm90b3R5cGUuc2V0dXBMb2NhbE1lZGlhPWZ1bmN0aW9uKCl7aWYodGhpcy52aWRlbyYmdGhpcy5vcHRpb25zLm1lZGlhLmxvY2FsJiZ0aGlzLm9wdGlvbnMubWVkaWEubG9jYWwudmlkZW8pe3ZhciBlLGk9dGhpcy5zZXNzaW9uLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIucGVlckNvbm5lY3Rpb247aS5nZXRTZW5kZXJzPyhlPW5ldyB0LndpbmRvdy5NZWRpYVN0cmVhbSxpLmdldFNlbmRlcnMoKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBpPXQudHJhY2s7aSYmXCJ2aWRlb1wiPT09aS5raW5kJiZlLmFkZFRyYWNrKGkpfSkpOmU9aS5nZXRMb2NhbFN0cmVhbXMoKVswXSx0aGlzLm9wdGlvbnMubWVkaWEubG9jYWwudmlkZW8uc3JjT2JqZWN0PWUsdGhpcy5vcHRpb25zLm1lZGlhLmxvY2FsLnZpZGVvLnZvbHVtZT0wLHRoaXMub3B0aW9ucy5tZWRpYS5sb2NhbC52aWRlby5wbGF5KCl9fSxzLnByb3RvdHlwZS5jbGVhbnVwTWVkaWE9ZnVuY3Rpb24oKXt0aGlzLnZpZGVvJiYodGhpcy5vcHRpb25zLm1lZGlhLnJlbW90ZS52aWRlby5zcmNPYmplY3Q9bnVsbCx0aGlzLm9wdGlvbnMubWVkaWEucmVtb3RlLnZpZGVvLnBhdXNlKCksdGhpcy5vcHRpb25zLm1lZGlhLmxvY2FsJiZ0aGlzLm9wdGlvbnMubWVkaWEubG9jYWwudmlkZW8mJih0aGlzLm9wdGlvbnMubWVkaWEubG9jYWwudmlkZW8uc3JjT2JqZWN0PW51bGwsdGhpcy5vcHRpb25zLm1lZGlhLmxvY2FsLnZpZGVvLnBhdXNlKCkpKSx0aGlzLmF1ZGlvJiYodGhpcy5vcHRpb25zLm1lZGlhLnJlbW90ZS5hdWRpby5zcmNPYmplY3Q9bnVsbCx0aGlzLm9wdGlvbnMubWVkaWEucmVtb3RlLmF1ZGlvLnBhdXNlKCkpfSxzLnByb3RvdHlwZS5zZXR1cFNlc3Npb249ZnVuY3Rpb24oKXt0aGlzLnN0YXRlPWkuU1RBVFVTX05FVyx0aGlzLmVtaXQoXCJuZXdcIix0aGlzLnNlc3Npb24pLHRoaXMuc2Vzc2lvbi5vbihcInByb2dyZXNzXCIsdGhpcy5vblByb2dyZXNzLmJpbmQodGhpcykpLHRoaXMuc2Vzc2lvbi5vbihcImFjY2VwdGVkXCIsdGhpcy5vbkFjY2VwdGVkLmJpbmQodGhpcykpLHRoaXMuc2Vzc2lvbi5vbihcInJlamVjdGVkXCIsdGhpcy5vbkVuZGVkLmJpbmQodGhpcykpLHRoaXMuc2Vzc2lvbi5vbihcImZhaWxlZFwiLHRoaXMub25GYWlsZWQuYmluZCh0aGlzKSksdGhpcy5zZXNzaW9uLm9uKFwidGVybWluYXRlZFwiLHRoaXMub25FbmRlZC5iaW5kKHRoaXMpKX0scy5wcm90b3R5cGUuZGVzdHJveU1lZGlhPWZ1bmN0aW9uKCl7dGhpcy5zZXNzaW9uLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIuY2xvc2UoKX0scy5wcm90b3R5cGUudG9nZ2xlTXV0ZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLnNlc3Npb24uc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlci5wZWVyQ29ubmVjdGlvbjt0LmdldFNlbmRlcnM/dC5nZXRTZW5kZXJzKCkuZm9yRWFjaChmdW5jdGlvbih0KXt0LnRyYWNrJiYodC50cmFjay5lbmFibGVkPSFlKX0pOnQuZ2V0TG9jYWxTdHJlYW1zKCkuZm9yRWFjaChmdW5jdGlvbih0KXt0LmdldEF1ZGlvVHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbih0KXt0LmVuYWJsZWQ9IWV9KSx0LmdldFZpZGVvVHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbih0KXt0LmVuYWJsZWQ9IWV9KX0pfSxzLnByb3RvdHlwZS5vbkFjY2VwdGVkPWZ1bmN0aW9uKCl7dGhpcy5zdGF0ZT1pLlNUQVRVU19DT05ORUNURUQsdGhpcy5lbWl0KFwiY29ubmVjdGVkXCIsdGhpcy5zZXNzaW9uKSx0aGlzLnNldHVwTG9jYWxNZWRpYSgpLHRoaXMuc2V0dXBSZW1vdGVNZWRpYSgpLHRoaXMuc2Vzc2lvbi5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLm9uKFwiYWRkVHJhY2tcIixmdW5jdGlvbigpe3RoaXMubG9nZ2VyLmxvZyhcIkEgdHJhY2sgaGFzIGJlZW4gYWRkZWQsIHRyaWdnZXJpbmcgbmV3IHJlbW90ZU1lZGlhIHNldHVwXCIpLHRoaXMuc2V0dXBSZW1vdGVNZWRpYSgpfS5iaW5kKHRoaXMpKSx0aGlzLnNlc3Npb24uc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlci5vbihcImFkZFN0cmVhbVwiLGZ1bmN0aW9uKCl7dGhpcy5sb2dnZXIubG9nKFwiQSBzdHJlYW0gaGFzIGJlZW4gYWRkZWQsIHRyaWdnZXIgbmV3IHJlbW90ZU1lZGlhIHNldHVwXCIpLHRoaXMuc2V0dXBSZW1vdGVNZWRpYSgpfS5iaW5kKHRoaXMpKSx0aGlzLnNlc3Npb24ub24oXCJob2xkXCIsZnVuY3Rpb24oKXt0aGlzLmVtaXQoXCJob2xkXCIsdGhpcy5zZXNzaW9uKX0uYmluZCh0aGlzKSksdGhpcy5zZXNzaW9uLm9uKFwidW5ob2xkXCIsZnVuY3Rpb24oKXt0aGlzLmVtaXQoXCJ1bmhvbGRcIix0aGlzLnNlc3Npb24pfS5iaW5kKHRoaXMpKSx0aGlzLnNlc3Npb24ub24oXCJkdG1mXCIsZnVuY3Rpb24oZSl7dGhpcy5lbWl0KFwiZHRtZlwiLGUpfS5iaW5kKHRoaXMpKSx0aGlzLnNlc3Npb24ub24oXCJieWVcIix0aGlzLm9uRW5kZWQuYmluZCh0aGlzKSl9LHMucHJvdG90eXBlLm9uUHJvZ3Jlc3M9ZnVuY3Rpb24oKXt0aGlzLnN0YXRlPWkuU1RBVFVTX0NPTk5FQ1RJTkcsdGhpcy5lbWl0KFwiY29ubmVjdGluZ1wiLHRoaXMuc2Vzc2lvbil9LHMucHJvdG90eXBlLm9uRmFpbGVkPWZ1bmN0aW9uKCl7dGhpcy5vbkVuZGVkKCl9LHMucHJvdG90eXBlLm9uRW5kZWQ9ZnVuY3Rpb24oKXt0aGlzLnN0YXRlPWkuU1RBVFVTX0NPTVBMRVRFRCx0aGlzLmVtaXQoXCJlbmRlZFwiLHRoaXMuc2Vzc2lvbiksdGhpcy5jbGVhbnVwTWVkaWEoKX0sc319KS5jYWxsKHQsaSgwKSl9LGZ1bmN0aW9uKGUsdCxpKXtcInVzZSBzdHJpY3RcIjsoZnVuY3Rpb24odCl7ZnVuY3Rpb24gcyhlLHQpe2lmKG51bGwhPWUpe3ZhciBpPXQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrdC5zbGljZSgxKSxzPVt0LFwid2Via2l0XCIraSxcIm1velwiK2ldO2Zvcih2YXIgciBpbiBzKXt2YXIgbj1lW3Nbcl1dO2lmKG4pcmV0dXJuIG4uYmluZChlKX19fXZhciByPXQud2luZG93fHx0O2UuZXhwb3J0cz17V2ViU29ja2V0OnIuV2ViU29ja2V0LFRyYW5zcG9ydDppKDM1KSxvcGVuOnIub3BlbixQcm9taXNlOnIuUHJvbWlzZSx0aW1lcnM6cixjb25zb2xlOnIuY29uc29sZXx8e2RlYnVnOmZ1bmN0aW9uKCl7fSxsb2c6ZnVuY3Rpb24oKXt9LHdhcm46ZnVuY3Rpb24oKXt9LGVycm9yOmZ1bmN0aW9uKCl7fX0sYWRkRXZlbnRMaXN0ZW5lcjpzKHIsXCJhZGRFdmVudExpc3RlbmVyXCIpLHJlbW92ZUV2ZW50TGlzdGVuZXI6cyhyLFwicmVtb3ZlRXZlbnRMaXN0ZW5lclwiKX19KS5jYWxsKHQsaSgwKSl9LGZ1bmN0aW9uKGUsdCxpKXtcInVzZSBzdHJpY3RcIjtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXt2YXIgaTtyZXR1cm4gaT1mdW5jdGlvbihlLHQpe3RoaXMubG9nZ2VyPWUuZ2V0TG9nZ2VyKFwic2lwLnRyYW5zcG9ydFwiKSx0aGlzLnVhPWUsdGhpcy53cz1udWxsLHRoaXMuc2VydmVyPXQsdGhpcy5yZWNvbm5lY3Rpb25fYXR0ZW1wdHM9MCx0aGlzLmNsb3NlZD0hMSx0aGlzLmNvbm5lY3RlZD0hMSx0aGlzLnJlY29ubmVjdFRpbWVyPW51bGwsdGhpcy5sYXN0VHJhbnNwb3J0RXJyb3I9e30sdGhpcy5rZWVwQWxpdmVJbnRlcnZhbD1lLmNvbmZpZ3VyYXRpb24ua2VlcEFsaXZlSW50ZXJ2YWwsdGhpcy5rZWVwQWxpdmVUaW1lb3V0PW51bGwsdGhpcy5rZWVwQWxpdmVUaW1lcj1udWxsLHRoaXMudWEudHJhbnNwb3J0PXRoaXMsdGhpcy5jb25uZWN0KCl9LGkucHJvdG90eXBlPXtzZW5kOmZ1bmN0aW9uKGUpe3ZhciBpPWUudG9TdHJpbmcoKTtyZXR1cm4gdGhpcy53cyYmdGhpcy53cy5yZWFkeVN0YXRlPT09dC5PUEVOPyghMD09PXRoaXMudWEuY29uZmlndXJhdGlvbi50cmFjZVNpcCYmdGhpcy5sb2dnZXIubG9nKFwic2VuZGluZyBXZWJTb2NrZXQgbWVzc2FnZTpcXG5cXG5cIitpK1wiXFxuXCIpLHRoaXMud3Muc2VuZChpKSwhMCk6KHRoaXMubG9nZ2VyLndhcm4oXCJ1bmFibGUgdG8gc2VuZCBtZXNzYWdlLCBXZWJTb2NrZXQgaXMgbm90IG9wZW5cIiksITEpfSxzZW5kS2VlcEFsaXZlOmZ1bmN0aW9uKCl7aWYoIXRoaXMua2VlcEFsaXZlVGltZW91dClyZXR1cm4gdGhpcy5rZWVwQWxpdmVUaW1lb3V0PWUuVGltZXJzLnNldFRpbWVvdXQoZnVuY3Rpb24oKXt0aGlzLnVhLmVtaXQoXCJrZWVwQWxpdmVUaW1lb3V0XCIpfS5iaW5kKHRoaXMpLDFlNCksdGhpcy5zZW5kKFwiXFxyXFxuXFxyXFxuXCIpfSxzdGFydFNlbmRpbmdLZWVwQWxpdmVzOmZ1bmN0aW9uKCl7dGhpcy5rZWVwQWxpdmVJbnRlcnZhbCYmIXRoaXMua2VlcEFsaXZlVGltZXImJih0aGlzLmtlZXBBbGl2ZVRpbWVyPWUuVGltZXJzLnNldFRpbWVvdXQoZnVuY3Rpb24oKXt0aGlzLnNlbmRLZWVwQWxpdmUoKSx0aGlzLmtlZXBBbGl2ZVRpbWVyPW51bGwsdGhpcy5zdGFydFNlbmRpbmdLZWVwQWxpdmVzKCl9LmJpbmQodGhpcyksZnVuY3Rpb24oZSl7dmFyIHQ9LjgqZTtyZXR1cm4gMWUzKihNYXRoLnJhbmRvbSgpKihlLXQpK3QpfSh0aGlzLmtlZXBBbGl2ZUludGVydmFsKSkpfSxzdG9wU2VuZGluZ0tlZXBBbGl2ZXM6ZnVuY3Rpb24oKXtlLlRpbWVycy5jbGVhclRpbWVvdXQodGhpcy5rZWVwQWxpdmVUaW1lciksZS5UaW1lcnMuY2xlYXJUaW1lb3V0KHRoaXMua2VlcEFsaXZlVGltZW91dCksdGhpcy5rZWVwQWxpdmVUaW1lcj1udWxsLHRoaXMua2VlcEFsaXZlVGltZW91dD1udWxsfSxkaXNjb25uZWN0OmZ1bmN0aW9uKCl7dGhpcy53cyYmKGUuVGltZXJzLmNsZWFyVGltZW91dCh0aGlzLnJlY29ubmVjdFRpbWVyKSx0aGlzLnN0b3BTZW5kaW5nS2VlcEFsaXZlcygpLHRoaXMuY2xvc2VkPSEwLHRoaXMubG9nZ2VyLmxvZyhcImNsb3NpbmcgV2ViU29ja2V0IFwiK3RoaXMuc2VydmVyLndzX3VyaSksdGhpcy53cy5jbG9zZSgpLHRoaXMud3M9bnVsbCksbnVsbCE9PXRoaXMucmVjb25uZWN0VGltZXImJihlLlRpbWVycy5jbGVhclRpbWVvdXQodGhpcy5yZWNvbm5lY3RUaW1lciksdGhpcy5yZWNvbm5lY3RUaW1lcj1udWxsLHRoaXMudWEuZW1pdChcImRpc2Nvbm5lY3RlZFwiLHt0cmFuc3BvcnQ6dGhpcyxjb2RlOnRoaXMubGFzdFRyYW5zcG9ydEVycm9yLmNvZGUscmVhc29uOnRoaXMubGFzdFRyYW5zcG9ydEVycm9yLnJlYXNvbn0pKX0sY29ubmVjdDpmdW5jdGlvbigpe3ZhciBlPXRoaXM7aWYodGhpcy53cyYmKHRoaXMud3MucmVhZHlTdGF0ZT09PXQuT1BFTnx8dGhpcy53cy5yZWFkeVN0YXRlPT09dC5DT05ORUNUSU5HKSlyZXR1cm4gdGhpcy5sb2dnZXIubG9nKFwiV2ViU29ja2V0IFwiK3RoaXMuc2VydmVyLndzX3VyaStcIiBpcyBhbHJlYWR5IGNvbm5lY3RlZFwiKSwhMTt0aGlzLndzJiYodGhpcy53cy5jbG9zZSgpLHRoaXMud3M9bnVsbCksdGhpcy5sb2dnZXIubG9nKFwiY29ubmVjdGluZyB0byBXZWJTb2NrZXQgXCIrdGhpcy5zZXJ2ZXIud3NfdXJpKSx0aGlzLnVhLm9uVHJhbnNwb3J0Q29ubmVjdGluZyh0aGlzLDA9PT10aGlzLnJlY29ubmVjdGlvbl9hdHRlbXB0cz8xOnRoaXMucmVjb25uZWN0aW9uX2F0dGVtcHRzKTt0cnl7dGhpcy53cz1uZXcgdCh0aGlzLnNlcnZlci53c191cmksXCJzaXBcIil9Y2F0Y2goZSl7dGhpcy5sb2dnZXIud2FybihcImVycm9yIGNvbm5lY3RpbmcgdG8gV2ViU29ja2V0IFwiK3RoaXMuc2VydmVyLndzX3VyaStcIjogXCIrZSl9dGhpcy53cy5iaW5hcnlUeXBlPVwiYXJyYXlidWZmZXJcIix0aGlzLndzLm9ub3Blbj1mdW5jdGlvbigpe2Uub25PcGVuKCl9LHRoaXMud3Mub25jbG9zZT1mdW5jdGlvbih0KXtlLm9uQ2xvc2UodCksdGhpcy5vbm9wZW49bnVsbCx0aGlzLm9uY2xvc2U9bnVsbCx0aGlzLm9ubWVzc2FnZT1udWxsLHRoaXMub25lcnJvcj1udWxsfSx0aGlzLndzLm9ubWVzc2FnZT1mdW5jdGlvbih0KXtlLm9uTWVzc2FnZSh0KX0sdGhpcy53cy5vbmVycm9yPWZ1bmN0aW9uKHQpe2Uub25FcnJvcih0KX19LG9uT3BlbjpmdW5jdGlvbigpe3RoaXMuY29ubmVjdGVkPSEwLHRoaXMubG9nZ2VyLmxvZyhcIldlYlNvY2tldCBcIit0aGlzLnNlcnZlci53c191cmkrXCIgY29ubmVjdGVkXCIpLG51bGwhPT10aGlzLnJlY29ubmVjdFRpbWVyJiYoZS5UaW1lcnMuY2xlYXJUaW1lb3V0KHRoaXMucmVjb25uZWN0VGltZXIpLHRoaXMucmVjb25uZWN0VGltZXI9bnVsbCksdGhpcy5yZWNvbm5lY3Rpb25fYXR0ZW1wdHM9MCx0aGlzLmNsb3NlZD0hMSx0aGlzLnVhLm9uVHJhbnNwb3J0Q29ubmVjdGVkKHRoaXMpLHRoaXMuc3RhcnRTZW5kaW5nS2VlcEFsaXZlcygpfSxvbkNsb3NlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuY29ubmVjdGVkO3RoaXMubGFzdFRyYW5zcG9ydEVycm9yLmNvZGU9ZS5jb2RlLHRoaXMubGFzdFRyYW5zcG9ydEVycm9yLnJlYXNvbj1lLnJlYXNvbix0aGlzLnN0b3BTZW5kaW5nS2VlcEFsaXZlcygpLHRoaXMucmVjb25uZWN0aW9uX2F0dGVtcHRzPjA/KHRoaXMubG9nZ2VyLmxvZyhcIlJlY29ubmVjdGlvbiBhdHRlbXB0IFwiK3RoaXMucmVjb25uZWN0aW9uX2F0dGVtcHRzK1wiIGZhaWxlZCAoY29kZTogXCIrZS5jb2RlKyhlLnJlYXNvbj9cInwgcmVhc29uOiBcIitlLnJlYXNvbjpcIlwiKStcIilcIiksdGhpcy5yZWNvbm5lY3QoKSk6KHRoaXMuY29ubmVjdGVkPSExLHRoaXMubG9nZ2VyLmxvZyhcIldlYlNvY2tldCBkaXNjb25uZWN0ZWQgKGNvZGU6IFwiK2UuY29kZSsoZS5yZWFzb24/XCJ8IHJlYXNvbjogXCIrZS5yZWFzb246XCJcIikrXCIpXCIpLCExPT09ZS53YXNDbGVhbiYmdGhpcy5sb2dnZXIud2FybihcIldlYlNvY2tldCBhYnJ1cHQgZGlzY29ubmVjdGlvblwiKSwhMD09PXQ/KHRoaXMudWEub25UcmFuc3BvcnRDbG9zZWQodGhpcyksdGhpcy5jbG9zZWQ/dGhpcy51YS5lbWl0KFwiZGlzY29ubmVjdGVkXCIse3RyYW5zcG9ydDp0aGlzLGNvZGU6dGhpcy5sYXN0VHJhbnNwb3J0RXJyb3IuY29kZSxyZWFzb246dGhpcy5sYXN0VHJhbnNwb3J0RXJyb3IucmVhc29ufSk6dGhpcy5yZWNvbm5lY3QoKSk6dGhpcy51YS5vblRyYW5zcG9ydEVycm9yKHRoaXMpKX0sb25NZXNzYWdlOmZ1bmN0aW9uKHQpe3ZhciBpLHMscj10LmRhdGE7aWYoXCJcXHJcXG5cIj09PXIpcmV0dXJuIGUuVGltZXJzLmNsZWFyVGltZW91dCh0aGlzLmtlZXBBbGl2ZVRpbWVvdXQpLHRoaXMua2VlcEFsaXZlVGltZW91dD1udWxsLHZvaWQoITA9PT10aGlzLnVhLmNvbmZpZ3VyYXRpb24udHJhY2VTaXAmJnRoaXMubG9nZ2VyLmxvZyhcInJlY2VpdmVkIFdlYlNvY2tldCBtZXNzYWdlIHdpdGggQ1JMRiBLZWVwIEFsaXZlIHJlc3BvbnNlXCIpKTtpZihcInN0cmluZ1wiIT10eXBlb2Ygcil7dHJ5e3I9U3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLG5ldyBVaW50OEFycmF5KHIpKX1jYXRjaChlKXtyZXR1cm4gdm9pZCB0aGlzLmxvZ2dlci53YXJuKFwicmVjZWl2ZWQgV2ViU29ja2V0IGJpbmFyeSBtZXNzYWdlIGZhaWxlZCB0byBiZSBjb252ZXJ0ZWQgaW50byBzdHJpbmcsIG1lc3NhZ2UgZGlzY2FyZGVkXCIpfSEwPT09dGhpcy51YS5jb25maWd1cmF0aW9uLnRyYWNlU2lwJiZ0aGlzLmxvZ2dlci5sb2coXCJyZWNlaXZlZCBXZWJTb2NrZXQgYmluYXJ5IG1lc3NhZ2U6XFxuXFxuXCIrcitcIlxcblwiKX1lbHNlITA9PT10aGlzLnVhLmNvbmZpZ3VyYXRpb24udHJhY2VTaXAmJnRoaXMubG9nZ2VyLmxvZyhcInJlY2VpdmVkIFdlYlNvY2tldCB0ZXh0IG1lc3NhZ2U6XFxuXFxuXCIrcitcIlxcblwiKTtpZigoaT1lLlBhcnNlci5wYXJzZU1lc3NhZ2Uocix0aGlzLnVhKSkmJiEodGhpcy51YS5zdGF0dXM9PT1lLlVBLkMuU1RBVFVTX1VTRVJfQ0xPU0VEJiZpIGluc3RhbmNlb2YgZS5JbmNvbWluZ1JlcXVlc3QpJiZlLnNhbml0eUNoZWNrKGksdGhpcy51YSx0aGlzKSlpZihpIGluc3RhbmNlb2YgZS5JbmNvbWluZ1JlcXVlc3QpaS50cmFuc3BvcnQ9dGhpcyx0aGlzLnVhLnJlY2VpdmVSZXF1ZXN0KGkpO2Vsc2UgaWYoaSBpbnN0YW5jZW9mIGUuSW5jb21pbmdSZXNwb25zZSlzd2l0Y2goaS5tZXRob2Qpe2Nhc2UgZS5DLklOVklURToocz10aGlzLnVhLnRyYW5zYWN0aW9ucy5pY3RbaS52aWFfYnJhbmNoXSkmJnMucmVjZWl2ZVJlc3BvbnNlKGkpO2JyZWFrO2Nhc2UgZS5DLkFDSzpicmVhaztkZWZhdWx0OihzPXRoaXMudWEudHJhbnNhY3Rpb25zLm5pY3RbaS52aWFfYnJhbmNoXSkmJnMucmVjZWl2ZVJlc3BvbnNlKGkpfX0sb25FcnJvcjpmdW5jdGlvbihlKXt0aGlzLmxvZ2dlci53YXJuKFwiV2ViU29ja2V0IGNvbm5lY3Rpb24gZXJyb3I6IFwiKSx0aGlzLmxvZ2dlci53YXJuKGUpfSxyZWNvbm5lY3Q6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMucmVjb25uZWN0aW9uX2F0dGVtcHRzKz0xLHRoaXMucmVjb25uZWN0aW9uX2F0dGVtcHRzPnRoaXMudWEuY29uZmlndXJhdGlvbi53c1NlcnZlck1heFJlY29ubmVjdGlvbj8odGhpcy5sb2dnZXIud2FybihcIm1heGltdW0gcmVjb25uZWN0aW9uIGF0dGVtcHRzIGZvciBXZWJTb2NrZXQgXCIrdGhpcy5zZXJ2ZXIud3NfdXJpKSx0aGlzLnVhLm9uVHJhbnNwb3J0RXJyb3IodGhpcykpOjE9PT10aGlzLnJlY29ubmVjdGlvbl9hdHRlbXB0cz8odGhpcy5sb2dnZXIubG9nKFwiQ29ubmVjdGlvbiB0byBXZWJTb2NrZXQgXCIrdGhpcy5zZXJ2ZXIud3NfdXJpK1wiIHNldmVyZWQsIGF0dGVtcHRpbmcgZmlyc3QgcmVjb25uZWN0XCIpLHQuY29ubmVjdCgpKToodGhpcy5sb2dnZXIubG9nKFwidHJ5aW5nIHRvIHJlY29ubmVjdCB0byBXZWJTb2NrZXQgXCIrdGhpcy5zZXJ2ZXIud3NfdXJpK1wiIChyZWNvbm5lY3Rpb24gYXR0ZW1wdCBcIit0aGlzLnJlY29ubmVjdGlvbl9hdHRlbXB0cytcIilcIiksdGhpcy5yZWNvbm5lY3RUaW1lcj1lLlRpbWVycy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC5jb25uZWN0KCksdC5yZWNvbm5lY3RUaW1lcj1udWxsfSwxZTMqdGhpcy51YS5jb25maWd1cmF0aW9uLndzU2VydmVyUmVjb25uZWN0aW9uVGltZW91dCkpfX0saS5DPXtTVEFUVVNfUkVBRFk6MCxTVEFUVVNfRElTQ09OTkVDVEVEOjEsU1RBVFVTX0VSUk9SOjJ9LGl9fV0pfSk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvc2lwLmpzL2Rpc3Qvc2lwLm1pbi5qc1xuLy8gbW9kdWxlIGlkID0gODZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///86\n')},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\n/**\n * This is where we keep the list of sip events we're interested in forwarding.\n **/\nexports.default = function () {\n  return ['chat', 'recording', 'memberlist', 'source_update'];\n}();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODcuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL1NpcE1lc3NhZ2VXaGl0ZWxpc3QuanM/ZDljZSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFRoaXMgaXMgd2hlcmUgd2Uga2VlcCB0aGUgbGlzdCBvZiBzaXAgZXZlbnRzIHdlJ3JlIGludGVyZXN0ZWQgaW4gZm9yd2FyZGluZy5cbiAqKi9cbmV4cG9ydCBkZWZhdWx0IChmdW5jdGlvbigpIHtcbiAgcmV0dXJuIFsnY2hhdCcsICdyZWNvcmRpbmcnLCAnbWVtYmVybGlzdCcsICdzb3VyY2VfdXBkYXRlJ107XG59KCkpO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNyYy9TaXBNZXNzYWdlV2hpdGVsaXN0LmpzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTs7O0FBR0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///87\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Logger = __webpack_require__(/*! ./Logger */ 0);\n\nvar _Logger2 = _interopRequireDefault(_Logger);\n\nvar _PodiumFacade = __webpack_require__(/*! ./PodiumFacade */ 89);\n\nvar _PodiumFacade2 = _interopRequireDefault(_PodiumFacade);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * SipMessageTransformer\n **/\nvar SipMessageTransformer = function () {\n  function SipMessageTransformer(user, opts) {\n    _classCallCheck(this, SipMessageTransformer);\n\n    this.opts = Object.assign({}, this.defaultOptions, opts);\n    this.user = user;\n    this.debug = this.debug.bind(this);\n    this.stamp = this.stamp.bind(this);\n    this.default = this.default.bind(this);\n    this.process = this.process.bind(this);\n    this.sourceUpdate = this.sourceUpdate.bind(this);\n  }\n\n  _createClass(SipMessageTransformer, [{\n    key: 'debug',\n    value: function debug() {\n      if (this.opts.debug) {\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        _Logger2.default.debug(args);\n      }\n    }\n\n    /**\n     * Put a stamp with _src on the message.\n     **/\n\n  }, {\n    key: 'stamp',\n    value: function stamp(message) {\n      return Object.assign({ _src: 'sip' }, message);\n    }\n  }, {\n    key: 'process',\n    value: function process(message) {\n      /* eslint-disable camelcase */\n      var transformation = { source_update: this.sourceUpdate }[message.type] || this.default;\n      /* eslint-enable camelcase */\n\n      return transformation(this.stamp(message));\n    }\n  }, {\n    key: 'default',\n    value: function _default(message) {\n      this.debug('SipMessageTransformer::default', message);\n      return message;\n    }\n  }, {\n    key: 'sourceUpdate',\n    value: function sourceUpdate(message) {\n      this.debug('SipMessageTransformer::sourceUpdate', message);\n\n      var podium = new _PodiumFacade2.default(message, this.user.uri);\n\n      var transformed = Object.assign({\n        type: 'podium',\n        solo: podium.isSolo,\n        audio: podium.hasAudioPosition,\n        video: podium.hasVideoPosition,\n        media: podium.hasMedia,\n        sources: podium.sources,\n        isSource: podium.isSource,\n        isPresenter: podium.isPresenter,\n        presentation: podium.hasPresenter,\n        videoSources: podium.videoSources,\n        hasVideoSources: podium.hasVideoSources,\n        hasDesktopSources: podium.hasDesktopSources\n      });\n\n      return transformed;\n    }\n  }, {\n    key: 'defaultOptions',\n    get: function get() {\n      return { debug: true };\n    }\n  }]);\n\n  return SipMessageTransformer;\n}();\n\nexports.default = SipMessageTransformer;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODguanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL1NpcE1lc3NhZ2VUcmFuc2Zvcm1lci5qcz80OGEwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBMb2dnZXIgZnJvbSAnLi9Mb2dnZXInO1xuaW1wb3J0IFBvZGl1bUZhY2FkZSBmcm9tICcuL1BvZGl1bUZhY2FkZSc7XG5cbi8qKlxuICogU2lwTWVzc2FnZVRyYW5zZm9ybWVyXG4gKiovXG5jbGFzcyBTaXBNZXNzYWdlVHJhbnNmb3JtZXIge1xuICBjb25zdHJ1Y3Rvcih1c2VyLCBvcHRzKSB7XG4gICAgdGhpcy5vcHRzID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5kZWZhdWx0T3B0aW9ucywgb3B0cyk7XG4gICAgdGhpcy51c2VyID0gdXNlcjtcbiAgICB0aGlzLmRlYnVnID0gdGhpcy5kZWJ1Zy5iaW5kKHRoaXMpO1xuICAgIHRoaXMuc3RhbXAgPSB0aGlzLnN0YW1wLmJpbmQodGhpcyk7XG4gICAgdGhpcy5kZWZhdWx0ID0gdGhpcy5kZWZhdWx0LmJpbmQodGhpcyk7XG4gICAgdGhpcy5wcm9jZXNzID0gdGhpcy5wcm9jZXNzLmJpbmQodGhpcyk7XG4gICAgdGhpcy5zb3VyY2VVcGRhdGUgPSB0aGlzLnNvdXJjZVVwZGF0ZS5iaW5kKHRoaXMpO1xuICB9XG5cbiAgZ2V0IGRlZmF1bHRPcHRpb25zKCkge1xuICAgIHJldHVybiB7IGRlYnVnOiB0cnVlIH07XG4gIH1cblxuICBkZWJ1ZyguLi5hcmdzKSB7XG4gICAgaWYgKHRoaXMub3B0cy5kZWJ1Zykge1xuICAgICAgTG9nZ2VyLmRlYnVnKGFyZ3MpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBQdXQgYSBzdGFtcCB3aXRoIF9zcmMgb24gdGhlIG1lc3NhZ2UuXG4gICAqKi9cbiAgc3RhbXAobWVzc2FnZSkge1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKHsgX3NyYzogJ3NpcCcgfSwgbWVzc2FnZSk7XG4gIH1cblxuICBwcm9jZXNzKG1lc3NhZ2UpIHtcbiAgICAvKiBlc2xpbnQtZGlzYWJsZSBjYW1lbGNhc2UgKi9cbiAgICBjb25zdCB0cmFuc2Zvcm1hdGlvbiA9XG4gICAgICB7IHNvdXJjZV91cGRhdGU6IHRoaXMuc291cmNlVXBkYXRlIH1bbWVzc2FnZS50eXBlXSB8fCB0aGlzLmRlZmF1bHQ7XG4gICAgLyogZXNsaW50LWVuYWJsZSBjYW1lbGNhc2UgKi9cblxuICAgIHJldHVybiB0cmFuc2Zvcm1hdGlvbih0aGlzLnN0YW1wKG1lc3NhZ2UpKTtcbiAgfVxuXG4gIGRlZmF1bHQobWVzc2FnZSkge1xuICAgIHRoaXMuZGVidWcoJ1NpcE1lc3NhZ2VUcmFuc2Zvcm1lcjo6ZGVmYXVsdCcsIG1lc3NhZ2UpO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG5cbiAgc291cmNlVXBkYXRlKG1lc3NhZ2UpIHtcbiAgICB0aGlzLmRlYnVnKCdTaXBNZXNzYWdlVHJhbnNmb3JtZXI6OnNvdXJjZVVwZGF0ZScsIG1lc3NhZ2UpO1xuXG4gICAgY29uc3QgcG9kaXVtID0gbmV3IFBvZGl1bUZhY2FkZShtZXNzYWdlLCB0aGlzLnVzZXIudXJpKTtcblxuICAgIGNvbnN0IHRyYW5zZm9ybWVkID0gT2JqZWN0LmFzc2lnbih7XG4gICAgICB0eXBlOiAncG9kaXVtJyxcbiAgICAgIHNvbG86IHBvZGl1bS5pc1NvbG8sXG4gICAgICBhdWRpbzogcG9kaXVtLmhhc0F1ZGlvUG9zaXRpb24sXG4gICAgICB2aWRlbzogcG9kaXVtLmhhc1ZpZGVvUG9zaXRpb24sXG4gICAgICBtZWRpYTogcG9kaXVtLmhhc01lZGlhLFxuICAgICAgc291cmNlczogcG9kaXVtLnNvdXJjZXMsXG4gICAgICBpc1NvdXJjZTogcG9kaXVtLmlzU291cmNlLFxuICAgICAgaXNQcmVzZW50ZXI6IHBvZGl1bS5pc1ByZXNlbnRlcixcbiAgICAgIHByZXNlbnRhdGlvbjogcG9kaXVtLmhhc1ByZXNlbnRlcixcbiAgICAgIHZpZGVvU291cmNlczogcG9kaXVtLnZpZGVvU291cmNlcyxcbiAgICAgIGhhc1ZpZGVvU291cmNlczogcG9kaXVtLmhhc1ZpZGVvU291cmNlcyxcbiAgICAgIGhhc0Rlc2t0b3BTb3VyY2VzOiBwb2RpdW0uaGFzRGVza3RvcFNvdXJjZXNcbiAgICB9KTtcblxuICAgIHJldHVybiB0cmFuc2Zvcm1lZDtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBTaXBNZXNzYWdlVHJhbnNmb3JtZXI7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc3JjL1NpcE1lc3NhZ2VUcmFuc2Zvcm1lci5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7Ozs7O0FBQ0E7OztBQUdBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFLQTtBQUNBO0FBQUE7QUFEQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUFHQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBWkE7QUFDQTtBQWNBO0FBQ0E7OztBQXBEQTtBQUNBO0FBQ0E7Ozs7OztBQXFEQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///88\n")},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\n/**\n * Podium Facade.\n **/\nvar PodiumFacade = function () {\n  function PodiumFacade(message, userId) {\n    _classCallCheck(this, PodiumFacade);\n\n    var src = message.src,\n        psrc = message.psrc,\n        asrc = message.asrc,\n        vsrc = message.vsrc,\n        dsrc = message.dsrc;\n\n    this.sources = src;\n    this.presenterIdx = psrc;\n    this.audioSources = asrc;\n    this.videoSources = vsrc;\n    this.desktopSources = dsrc;\n    this.userId = userId;\n  }\n\n  _createClass(PodiumFacade, [{\n    key: "isSolo",\n    get: function get() {\n      return this.sources.length === 1 && this.sources[0] === this.userId;\n    }\n  }, {\n    key: "isSource",\n    get: function get() {\n      return this.sources.includes(this.userId);\n    }\n  }, {\n    key: "isPresenter",\n    get: function get() {\n      return this.hasPresenter && this.sources[this.presenterIdx] === this.userId;\n    }\n  }, {\n    key: "hasMedia",\n    get: function get() {\n      return this.sources.some(function (source) {\n        return (/media/.test(source)\n        );\n      });\n    }\n  }, {\n    key: "hasPresenter",\n    get: function get() {\n      return !isNaN(this.presenterIdx);\n    }\n  }, {\n    key: "hasVideoSources",\n    get: function get() {\n      return Boolean(this.videoSources);\n    }\n  }, {\n    key: "hasDesktopSources",\n    get: function get() {\n      return !isNaN(parseInt(this.desktopSources, 10));\n    }\n  }, {\n    key: "hasAudioPosition",\n    get: function get() {\n      return this.audioSources.includes(this.sources.indexOf(this.userId));\n    }\n  }, {\n    key: "hasVideoPosition",\n    get: function get() {\n      return this.videoSources.includes(this.sources.indexOf(this.userId));\n    }\n  }]);\n\n  return PodiumFacade;\n}();\n\nexports.default = PodiumFacade;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODkuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL1BvZGl1bUZhY2FkZS5qcz9jN2JlIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogUG9kaXVtIEZhY2FkZS5cbiAqKi9cbmNsYXNzIFBvZGl1bUZhY2FkZSB7XG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIHVzZXJJZCkge1xuICAgIGNvbnN0IHsgc3JjLCBwc3JjLCBhc3JjLCB2c3JjLCBkc3JjIH0gPSBtZXNzYWdlO1xuICAgIHRoaXMuc291cmNlcyA9IHNyYztcbiAgICB0aGlzLnByZXNlbnRlcklkeCA9IHBzcmM7XG4gICAgdGhpcy5hdWRpb1NvdXJjZXMgPSBhc3JjO1xuICAgIHRoaXMudmlkZW9Tb3VyY2VzID0gdnNyYztcbiAgICB0aGlzLmRlc2t0b3BTb3VyY2VzID0gZHNyYztcbiAgICB0aGlzLnVzZXJJZCA9IHVzZXJJZDtcbiAgfVxuXG4gIGdldCBpc1NvbG8oKSB7XG4gICAgcmV0dXJuIHRoaXMuc291cmNlcy5sZW5ndGggPT09IDEgJiYgdGhpcy5zb3VyY2VzWzBdID09PSB0aGlzLnVzZXJJZDtcbiAgfVxuXG4gIGdldCBpc1NvdXJjZSgpIHtcbiAgICByZXR1cm4gdGhpcy5zb3VyY2VzLmluY2x1ZGVzKHRoaXMudXNlcklkKTtcbiAgfVxuXG4gIGdldCBpc1ByZXNlbnRlcigpIHtcbiAgICByZXR1cm4gdGhpcy5oYXNQcmVzZW50ZXIgJiYgdGhpcy5zb3VyY2VzW3RoaXMucHJlc2VudGVySWR4XSA9PT0gdGhpcy51c2VySWQ7XG4gIH1cblxuICBnZXQgaGFzTWVkaWEoKSB7XG4gICAgcmV0dXJuIHRoaXMuc291cmNlcy5zb21lKHNvdXJjZSA9PiAoL21lZGlhLykudGVzdChzb3VyY2UpKTtcbiAgfVxuXG4gIGdldCBoYXNQcmVzZW50ZXIoKSB7XG4gICAgcmV0dXJuICFpc05hTih0aGlzLnByZXNlbnRlcklkeCk7XG4gIH1cblxuICBnZXQgaGFzVmlkZW9Tb3VyY2VzKCkge1xuICAgIHJldHVybiBCb29sZWFuKHRoaXMudmlkZW9Tb3VyY2VzKTtcbiAgfVxuXG4gIGdldCBoYXNEZXNrdG9wU291cmNlcygpIHtcbiAgICByZXR1cm4gIWlzTmFOKHBhcnNlSW50KHRoaXMuZGVza3RvcFNvdXJjZXMsIDEwKSk7XG4gIH1cblxuICBnZXQgaGFzQXVkaW9Qb3NpdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5hdWRpb1NvdXJjZXMuaW5jbHVkZXModGhpcy5zb3VyY2VzLmluZGV4T2YodGhpcy51c2VySWQpKTtcbiAgfVxuXG4gIGdldCBoYXNWaWRlb1Bvc2l0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnZpZGVvU291cmNlcy5pbmNsdWRlcyh0aGlzLnNvdXJjZXMuaW5kZXhPZih0aGlzLnVzZXJJZCkpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBvZGl1bUZhY2FkZTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBzcmMvUG9kaXVtRmFjYWRlLmpzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUE7OztBQUdBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7Ozs7O0FBR0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///89\n')},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /* eslint-disable max-lines */\n\n\nvar _Logger = __webpack_require__(/*! ./Logger */ 0);\n\nvar _Logger2 = _interopRequireDefault(_Logger);\n\nvar _MediaStreamHandler = __webpack_require__(/*! ./MediaStreamHandler */ 3);\n\nvar _MediaStreamHandler2 = _interopRequireDefault(_MediaStreamHandler);\n\nvar _FeatureDetector = __webpack_require__(/*! ./FeatureDetector */ 4);\n\nvar _FeatureDetector2 = _interopRequireDefault(_FeatureDetector);\n\n__webpack_require__(/*! webrtc-adapter */ 22);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * SessionDescriptionHandler\n * @class PeerConnection helper Class.\n * @param {SIP.Session} session\n * @param {Object} [options]\n *\n * This class implements the 6 expected methods from SIP.js\n * constructor, getDescription, setDescription, hasDescription,\n * holdModifier and close.\n *\n */\nvar SessionDescriptionHandler = function () {\n  function SessionDescriptionHandler(session, options) {\n    _classCallCheck(this, SessionDescriptionHandler);\n\n    _Logger2.default.debug('SessionDescriptionHandler::constructor:', session, options);\n    this.options = options || {};\n    this.session = session;\n    this.connection = session.passedOptions.sessionDescriptionHandlerOptions.connection;\n    this.CONTENT_TYPE = 'application/sdp';\n    this.handledAccept = false;\n    this.initPeerConnection();\n  }\n\n  /**\n   * Gets the local description from the underlying media implementation\n   * @param {Object} [options] Options object to be used by getDescription\n   * @param {Array} [modifiers] Array with one time use description modifiers\n   * @returns {Promise} Promise that resolves with the local description to be\n   * used for the session\n   */\n\n\n  _createClass(SessionDescriptionHandler, [{\n    key: 'getDescription',\n    value: function getDescription(options, modifiers) {\n      var _this = this;\n\n      _Logger2.default.debug('SessionDescriptionHandler::getDescription:', options, modifiers);\n      this.localStream = options.stream;\n\n      this.localStream.getTracks().forEach(function (track) {\n        _this.peerConnection.addTrack(track, _this.localStream);\n      });\n\n      return this.createOfferOrAnswer(options.RTCConstraints, modifiers).then(function (sdp) {\n        return { body: sdp, contentType: _this.CONTENT_TYPE };\n      });\n    }\n\n    /**\n     * Set the remote description to the underlying media implementation\n     * @param {String} sessionDescription The description provided by a SIP\n     * message to be set on the media implementation\n     * @param {Object} [options] Options object to be used by setDescription\n     * @param {Array} [modifiers] Array with one time use description modifiers\n     * @returns {Promise} Promise that resolves once the description is set\n     */\n\n  }, {\n    key: 'setDescription',\n    value: function setDescription(sessionDescription, options, modifiers) {\n      _Logger2.default.debug('SessionDescriptionHandler::setDescription:', sessionDescription, options, modifiers);\n\n      var description = new RTCSessionDescription({\n        type: this.hasOffer('local') ? 'answer' : 'offer',\n        sdp: sessionDescription\n      });\n\n      return this.peerConnection.setRemoteDescription(description);\n    }\n\n    /**\n     * Check if the Session Description Handler can handle the Content-Type\n     * described by a SIP Message\n     * @param {String} contentType The content type that is in the SIP Message\n     * @returns {boolean}\n     */\n\n  }, {\n    key: 'hasDescription',\n    value: function hasDescription(contentType) {\n      _Logger2.default.debug('SessionDescriptionHandler::hasDescription:', contentType);\n      return contentType === this.CONTENT_TYPE;\n    }\n\n    /**\n     * The modifier that should be used when the session would like to place\n     * the call on hold\n     * @param {String} [sdp] The description that will be modified\n     * @returns {Promise} Promise that resolves with modified SDP\n     */\n\n  }, {\n    key: 'holdModifier',\n    value: function holdModifier(description) {\n      _Logger2.default.warn('SessionDescriptionHandler::holdModifier: NOT IMPLEMENTED.', description);\n    }\n  }, {\n    key: 'close',\n    value: function close() {\n      _Logger2.default.debug('SessionDescriptionHandler::close');\n      if (!this.peerConnectionClosed()) {\n        this.stopAllTracks();\n        this.peerConnection.close();\n        clearTimeout(this.iceCheckingTimeout);\n        _Logger2.default.debug('SessionDescriptionHandler::close ' + 'Stopped streams and closed peerConnection.');\n      }\n    }\n\n    /**\n     * Starting here, we have \"Helper\" methods. That is to say: methods not\n     * expected by and for SIP.js\n     */\n\n  }, {\n    key: 'initPeerConnection',\n    value: function initPeerConnection() {\n      var _this2 = this;\n\n      var opts = this.buildPeerConnectionOptions();\n      _Logger2.default.debug('SessionDescriptionHandler::initPeerConnection with: ', opts);\n      this.onIceCompleted = new Promise(function (resolve, reject) {\n        _this2.resolveIceCompleted = resolve;\n        _this2.rejectIceCompleted = reject;\n      });\n      try {\n        this.peerConnection = new RTCPeerConnection(opts);\n        this.peerConnection.ontrack = this.gotRemoteStream.bind(this);\n        this.peerConnection.onicecandidate = this.gotIceCandidate.bind(this);\n        this.startIceCheckingTimer(opts.iceCheckingTimeout);\n      } catch (error) {\n        _Logger2.default.error('SessionDescriptionHandler::initPeerConnection failed:', error);\n        _Logger2.default.error('SessionDescriptionHandler::initPeerConnection user:', this.connection.user);\n      }\n    }\n  }, {\n    key: 'peerConnectionClosed',\n    value: function peerConnectionClosed() {\n      return Boolean(this.peerConnection && this.peerConnection.signalingState === 'closed');\n    }\n\n    /**\n     * Only signal (handleAccept) that we have a remote stream once ontrack\n     * says so.\n     */\n\n  }, {\n    key: 'gotRemoteStream',\n    value: function gotRemoteStream(event) {\n      var _event$streams = _slicedToArray(event.streams, 1);\n\n      this.remoteStream = _event$streams[0];\n\n      _Logger2.default.debug('SessionDescriptionHandler::gotRemoteStream: ', this.remoteStream);\n      if (!this.handledAccept) {\n        this.session.passedOptions.sessionDescriptionHandlerOptions.handleAccept();\n        this.handledAccept = true;\n      }\n    }\n  }, {\n    key: 'startIceCheckingTimer',\n    value: function startIceCheckingTimer(iceCheckingTimeout) {\n      var _this3 = this;\n\n      this.iceCheckingTimer = setTimeout(function () {\n        _Logger2.default.debug('iceCheckingTimeout triggered after: ' + iceCheckingTimeout + ' milliseconds');\n        _this3.resolveIceCompleted();\n      }, iceCheckingTimeout);\n    }\n  }, {\n    key: 'gotIceCandidate',\n    value: function gotIceCandidate(event) {\n      var candidate = event.candidate;\n\n\n      if (!candidate) {\n        _Logger2.default.debug('SessionDescriptionHandler::gotIceCandidate: ' + 'no candidates left, onIceCompleted.');\n        this.resolveIceCompleted();\n        return;\n      }\n\n      if (candidate.type === 'relay' && candidate.sdpMid === 'video') {\n        _Logger2.default.debug('SessionDescriptionHandler::gotIceCandidate: ' + candidate + '.\\n                   Relay candidate found, onIceCompleted.');\n        this.resolveIceCompleted();\n        return;\n      }\n\n      _Logger2.default.debug('SessionDescriptionHandler::gotIceCandidate: ' + candidate);\n    }\n\n    /**\n     * We need to re-format the iceServers here. SIP.js used to offer a\n     * higher level api and we supplied the servers in a different format e.g:\n     *\n     * { stunServers: [\"stun:stun1.visocon.com:3478\"] }\n     * { turnServers: [{ urls: [1,2,3], username: \"bob\", password: \"nob\" }] }\n     *\n     * We currently have the api set return the creds in that format.\n     * The peerConnection however expects:\n     *\n     * {\n     *   \"iceServers\": [\n     *     { \"urls\": \"stun:stun1.visocon.com:3478\" },\n     *     { \"urls\": [1,2,3], \"username\": \"bob\", \"credential\": \"nob\" }\n     *   ]\n     * }\n     *\n     * Note: Edge is a little picky when it comes to turn server urls. We need\n     * to specify the protocol via (`?transport=udp`) for edge to swallow it.\n     * But we don't want to add additional turn-server for the rest of the\n     * browsers, since FF gives us a warning \"Things will go wrong when providing\n     * more than 5 urls\". We also don't remove any turn urls, since adapter and\n     * edge will be doing that for us.\n     */\n\n  }, {\n    key: 'buildPeerConnectionOptions',\n    value: function buildPeerConnectionOptions() {\n      var tmp = Object.assign({}, this.connection.user);\n      tmp.stunServers = { urls: tmp.stunServers };\n      tmp.turnServers = tmp.turnServers.map(function (server) {\n        if (_FeatureDetector2.default.isEdge()) {\n          var urlWithoutProtocol = server.urls.find(function (url) {\n            return !url.match(/transport/);\n          });\n          server.urls.push(urlWithoutProtocol + '?transport=udp');\n        }\n        server.credential = server.password;\n        return server;\n      });\n      return Object.assign({}, this.options.peerConnectionOptions, { iceServers: tmp.turnServers.concat(tmp.stunServers) });\n    }\n\n    /**\n     * Heads up! In case we ever need to modify the sdp with modifiers. After\n     * changing the sdp with the current implementation, we still ended up\n     * using the old (unmodified) sdp. Not sure what the issue is tbh,\n     * maybe setLocalDescription() needs more time to set the sdp?\n     * Either way, this.peerConnection.localDescription.sdp is _not_ updated with\n     * the modifie(r)d sdp atm.\n     */\n\n  }, {\n    key: 'createOfferOrAnswer',\n    value: function createOfferOrAnswer(RTCOfferOptions, modifiers) {\n      var _this4 = this;\n\n      _Logger2.default.debug('SessionDescriptionHandler::createOfferOrAnswer: ', RTCOfferOptions, modifiers);\n\n      var offerOptions = RTCOfferOptions || {};\n      var sdpModifiers = modifiers || [];\n\n      var methodName = this.hasOffer('remote') ? 'createAnswer' : 'createOffer';\n\n      return this.peerConnection[methodName](offerOptions).then(function (sdp) {\n        sdpModifiers.forEach(function (modifier) {\n          return modifier(sdp);\n        });\n        return sdp;\n      }).then(function (sdp) {\n        _this4.peerConnection.setLocalDescription(sdp);\n      }).then(function () {\n        return _this4.onIceCompleted;\n      }).then(function () {\n        return _this4.peerConnection.localDescription.sdp;\n      });\n    }\n  }, {\n    key: 'hasOffer',\n    value: function hasOffer(type) {\n      return this.peerConnection.signalingState === 'have-' + type + '-offer';\n    }\n  }, {\n    key: 'getLocalStream',\n    value: function getLocalStream() {\n      return this.localStream;\n    }\n  }, {\n    key: 'getRemoteStream',\n    value: function getRemoteStream() {\n      return this.remoteStream;\n    }\n\n    /**\n     * Depending on the browser and support for replaceTrack, we do one of two\n     * things here:\n     * 1. Iterate over senders and replace the current tracks with the tracks from\n     *    the new stream.\n     *    We don't stop the audio track, in the case of a navigator capture\n     *    session, we're re-using it. (Since FF permission dialog for screen\n     *    capture is terrible).\n     * 2. Stop and remove the active stream from the peer connection and add\n     *    the new stream. Update the peer connection and renegotiate.\n     **/\n    /* eslint-disable max-statements */\n\n  }, {\n    key: 'setStream',\n    value: function setStream(newStream) {\n      var _this5 = this;\n\n      return new Promise(function (resolve, reject) {\n        var oldStream = _this5.getLocalStream();\n        var remoteStream = _this5.getRemoteStream();\n        _this5.localStream = newStream;\n\n        if (oldStream.id === newStream.id) {\n          _Logger2.default.debug('SessionDescriptionHandler::setStream equal streams');\n          return resolve({ newStream: newStream, remoteStream: remoteStream });\n        }\n\n        try {\n          if (!_FeatureDetector2.default.hasReplaceTrack()) {\n            _MediaStreamHandler2.default.stop(oldStream);\n            _this5.peerConnection.removeStream(oldStream);\n            _this5.peerConnection.addStream(newStream);\n            return _this5.renegotiate().then(function () {\n              resolve({ newStream: newStream, remoteStream: remoteStream });\n            });\n          }\n\n          var promises = _this5.peerConnection.getSenders().map(function (sender) {\n            var newTrack = newStream.getTracks().find(function (track) {\n              return track.kind === sender.track.kind;\n            });\n            return sender.replaceTrack(newTrack, newStream);\n          });\n          return Promise.all(promises).then(function () {\n            resolve({ newStream: newStream, remoteStream: remoteStream });\n          });\n        } catch (error) {\n          return reject(error);\n        }\n      });\n    }\n    /* eslint-enable max-statements */\n\n    /**\n     * Renegotiate with remote end.\n     **/\n\n  }, {\n    key: 'renegotiate',\n    value: function renegotiate() {\n      var _this6 = this;\n\n      return this.peerConnection.createOffer().then(function (offer) {\n        return _this6.peerConnection.setLocalDescription(offer);\n      }).then(function () {\n        _this6.connection.send({\n          type: 'stream_offer',\n          sdp: _this6.peerConnection.localDescription\n        });\n      });\n    }\n\n    /**\n     * Stop all tracks\n     */\n\n  }, {\n    key: 'stopAllTracks',\n    value: function stopAllTracks() {\n      _Logger2.default.debug('SessionDescriptionHandler::stopAllTracks');\n      var receivers = this.peerConnection.getReceivers ? this.peerConnection.getReceivers() : [];\n      this.peerConnection.getSenders().concat(receivers).forEach(function (rtp) {\n        if (rtp.track) {\n          rtp.track.stop();\n        }\n      });\n    }\n  }]);\n\n  return SessionDescriptionHandler;\n}();\n\nexports.default = SessionDescriptionHandler;\n/* eslint-enable max-lines *///# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL1Nlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIuanM/MTBkZSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBtYXgtbGluZXMgKi9cbmltcG9ydCBMb2dnZXIgZnJvbSAnLi9Mb2dnZXInO1xuaW1wb3J0IE1lZGlhU3RyZWFtSGFuZGxlciBmcm9tICcuL01lZGlhU3RyZWFtSGFuZGxlcic7XG5pbXBvcnQgRmVhdHVyZURldGVjdG9yIGZyb20gJy4vRmVhdHVyZURldGVjdG9yJztcbmltcG9ydCAnd2VicnRjLWFkYXB0ZXInO1xuXG4vKipcbiAqIFNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJcbiAqIEBjbGFzcyBQZWVyQ29ubmVjdGlvbiBoZWxwZXIgQ2xhc3MuXG4gKiBAcGFyYW0ge1NJUC5TZXNzaW9ufSBzZXNzaW9uXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gKlxuICogVGhpcyBjbGFzcyBpbXBsZW1lbnRzIHRoZSA2IGV4cGVjdGVkIG1ldGhvZHMgZnJvbSBTSVAuanNcbiAqIGNvbnN0cnVjdG9yLCBnZXREZXNjcmlwdGlvbiwgc2V0RGVzY3JpcHRpb24sIGhhc0Rlc2NyaXB0aW9uLFxuICogaG9sZE1vZGlmaWVyIGFuZCBjbG9zZS5cbiAqXG4gKi9cbmNsYXNzIFNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIge1xuICBjb25zdHJ1Y3RvcihzZXNzaW9uLCBvcHRpb25zKSB7XG4gICAgTG9nZ2VyLmRlYnVnKCdTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyOjpjb25zdHJ1Y3RvcjonLCBzZXNzaW9uLCBvcHRpb25zKTtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgIHRoaXMuc2Vzc2lvbiA9IHNlc3Npb247XG4gICAgdGhpcy5jb25uZWN0aW9uID1cbiAgICAgIHNlc3Npb24ucGFzc2VkT3B0aW9ucy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9ucy5jb25uZWN0aW9uO1xuICAgIHRoaXMuQ09OVEVOVF9UWVBFID0gJ2FwcGxpY2F0aW9uL3NkcCc7XG4gICAgdGhpcy5oYW5kbGVkQWNjZXB0ID0gZmFsc2U7XG4gICAgdGhpcy5pbml0UGVlckNvbm5lY3Rpb24oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBsb2NhbCBkZXNjcmlwdGlvbiBmcm9tIHRoZSB1bmRlcmx5aW5nIG1lZGlhIGltcGxlbWVudGF0aW9uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gT3B0aW9ucyBvYmplY3QgdG8gYmUgdXNlZCBieSBnZXREZXNjcmlwdGlvblxuICAgKiBAcGFyYW0ge0FycmF5fSBbbW9kaWZpZXJzXSBBcnJheSB3aXRoIG9uZSB0aW1lIHVzZSBkZXNjcmlwdGlvbiBtb2RpZmllcnNcbiAgICogQHJldHVybnMge1Byb21pc2V9IFByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSBsb2NhbCBkZXNjcmlwdGlvbiB0byBiZVxuICAgKiB1c2VkIGZvciB0aGUgc2Vzc2lvblxuICAgKi9cbiAgZ2V0RGVzY3JpcHRpb24ob3B0aW9ucywgbW9kaWZpZXJzKSB7XG4gICAgTG9nZ2VyLmRlYnVnKFxuICAgICAgJ1Nlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXI6OmdldERlc2NyaXB0aW9uOicsXG4gICAgICBvcHRpb25zLFxuICAgICAgbW9kaWZpZXJzXG4gICAgKTtcbiAgICB0aGlzLmxvY2FsU3RyZWFtID0gb3B0aW9ucy5zdHJlYW07XG5cbiAgICB0aGlzLmxvY2FsU3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2godHJhY2sgPT4ge1xuICAgICAgdGhpcy5wZWVyQ29ubmVjdGlvbi5hZGRUcmFjayh0cmFjaywgdGhpcy5sb2NhbFN0cmVhbSk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGhpcy5jcmVhdGVPZmZlck9yQW5zd2VyKG9wdGlvbnMuUlRDQ29uc3RyYWludHMsIG1vZGlmaWVycykudGhlbihcbiAgICAgIHNkcCA9PiB7XG4gICAgICAgIHJldHVybiB7IGJvZHk6IHNkcCwgY29udGVudFR5cGU6IHRoaXMuQ09OVEVOVF9UWVBFIH07XG4gICAgICB9XG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIHJlbW90ZSBkZXNjcmlwdGlvbiB0byB0aGUgdW5kZXJseWluZyBtZWRpYSBpbXBsZW1lbnRhdGlvblxuICAgKiBAcGFyYW0ge1N0cmluZ30gc2Vzc2lvbkRlc2NyaXB0aW9uIFRoZSBkZXNjcmlwdGlvbiBwcm92aWRlZCBieSBhIFNJUFxuICAgKiBtZXNzYWdlIHRvIGJlIHNldCBvbiB0aGUgbWVkaWEgaW1wbGVtZW50YXRpb25cbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBPcHRpb25zIG9iamVjdCB0byBiZSB1c2VkIGJ5IHNldERlc2NyaXB0aW9uXG4gICAqIEBwYXJhbSB7QXJyYXl9IFttb2RpZmllcnNdIEFycmF5IHdpdGggb25lIHRpbWUgdXNlIGRlc2NyaXB0aW9uIG1vZGlmaWVyc1xuICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gUHJvbWlzZSB0aGF0IHJlc29sdmVzIG9uY2UgdGhlIGRlc2NyaXB0aW9uIGlzIHNldFxuICAgKi9cbiAgc2V0RGVzY3JpcHRpb24oc2Vzc2lvbkRlc2NyaXB0aW9uLCBvcHRpb25zLCBtb2RpZmllcnMpIHtcbiAgICBMb2dnZXIuZGVidWcoXG4gICAgICAnU2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlcjo6c2V0RGVzY3JpcHRpb246JyxcbiAgICAgIHNlc3Npb25EZXNjcmlwdGlvbixcbiAgICAgIG9wdGlvbnMsXG4gICAgICBtb2RpZmllcnNcbiAgICApO1xuXG4gICAgY29uc3QgZGVzY3JpcHRpb24gPSBuZXcgUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKHtcbiAgICAgIHR5cGU6IHRoaXMuaGFzT2ZmZXIoJ2xvY2FsJykgPyAnYW5zd2VyJyA6ICdvZmZlcicsXG4gICAgICBzZHA6IHNlc3Npb25EZXNjcmlwdGlvblxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXMucGVlckNvbm5lY3Rpb24uc2V0UmVtb3RlRGVzY3JpcHRpb24oZGVzY3JpcHRpb24pO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIHRoZSBTZXNzaW9uIERlc2NyaXB0aW9uIEhhbmRsZXIgY2FuIGhhbmRsZSB0aGUgQ29udGVudC1UeXBlXG4gICAqIGRlc2NyaWJlZCBieSBhIFNJUCBNZXNzYWdlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBjb250ZW50VHlwZSBUaGUgY29udGVudCB0eXBlIHRoYXQgaXMgaW4gdGhlIFNJUCBNZXNzYWdlXG4gICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgKi9cbiAgaGFzRGVzY3JpcHRpb24oY29udGVudFR5cGUpIHtcbiAgICBMb2dnZXIuZGVidWcoJ1Nlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXI6Omhhc0Rlc2NyaXB0aW9uOicsIGNvbnRlbnRUeXBlKTtcbiAgICByZXR1cm4gY29udGVudFR5cGUgPT09IHRoaXMuQ09OVEVOVF9UWVBFO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBtb2RpZmllciB0aGF0IHNob3VsZCBiZSB1c2VkIHdoZW4gdGhlIHNlc3Npb24gd291bGQgbGlrZSB0byBwbGFjZVxuICAgKiB0aGUgY2FsbCBvbiBob2xkXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBbc2RwXSBUaGUgZGVzY3JpcHRpb24gdGhhdCB3aWxsIGJlIG1vZGlmaWVkXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCBtb2RpZmllZCBTRFBcbiAgICovXG4gIGhvbGRNb2RpZmllcihkZXNjcmlwdGlvbikge1xuICAgIExvZ2dlci53YXJuKFxuICAgICAgJ1Nlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXI6OmhvbGRNb2RpZmllcjogTk9UIElNUExFTUVOVEVELicsXG4gICAgICBkZXNjcmlwdGlvblxuICAgICk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICBMb2dnZXIuZGVidWcoJ1Nlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXI6OmNsb3NlJyk7XG4gICAgaWYgKCF0aGlzLnBlZXJDb25uZWN0aW9uQ2xvc2VkKCkpIHtcbiAgICAgIHRoaXMuc3RvcEFsbFRyYWNrcygpO1xuICAgICAgdGhpcy5wZWVyQ29ubmVjdGlvbi5jbG9zZSgpO1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuaWNlQ2hlY2tpbmdUaW1lb3V0KTtcbiAgICAgIExvZ2dlci5kZWJ1ZyhcbiAgICAgICAgJ1Nlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXI6OmNsb3NlICcgK1xuICAgICAgICAgICdTdG9wcGVkIHN0cmVhbXMgYW5kIGNsb3NlZCBwZWVyQ29ubmVjdGlvbi4nXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTdGFydGluZyBoZXJlLCB3ZSBoYXZlIFwiSGVscGVyXCIgbWV0aG9kcy4gVGhhdCBpcyB0byBzYXk6IG1ldGhvZHMgbm90XG4gICAqIGV4cGVjdGVkIGJ5IGFuZCBmb3IgU0lQLmpzXG4gICAqL1xuICBpbml0UGVlckNvbm5lY3Rpb24oKSB7XG4gICAgY29uc3Qgb3B0cyA9IHRoaXMuYnVpbGRQZWVyQ29ubmVjdGlvbk9wdGlvbnMoKTtcbiAgICBMb2dnZXIuZGVidWcoJ1Nlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXI6OmluaXRQZWVyQ29ubmVjdGlvbiB3aXRoOiAnLCBvcHRzKTtcbiAgICB0aGlzLm9uSWNlQ29tcGxldGVkID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdGhpcy5yZXNvbHZlSWNlQ29tcGxldGVkID0gcmVzb2x2ZTtcbiAgICAgIHRoaXMucmVqZWN0SWNlQ29tcGxldGVkID0gcmVqZWN0O1xuICAgIH0pO1xuICAgIHRyeSB7XG4gICAgICB0aGlzLnBlZXJDb25uZWN0aW9uID0gbmV3IFJUQ1BlZXJDb25uZWN0aW9uKG9wdHMpO1xuICAgICAgdGhpcy5wZWVyQ29ubmVjdGlvbi5vbnRyYWNrID0gdGhpcy5nb3RSZW1vdGVTdHJlYW0uYmluZCh0aGlzKTtcbiAgICAgIHRoaXMucGVlckNvbm5lY3Rpb24ub25pY2VjYW5kaWRhdGUgPSB0aGlzLmdvdEljZUNhbmRpZGF0ZS5iaW5kKHRoaXMpO1xuICAgICAgdGhpcy5zdGFydEljZUNoZWNraW5nVGltZXIob3B0cy5pY2VDaGVja2luZ1RpbWVvdXQpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBMb2dnZXIuZXJyb3IoXG4gICAgICAgICdTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyOjppbml0UGVlckNvbm5lY3Rpb24gZmFpbGVkOicsXG4gICAgICAgIGVycm9yXG4gICAgICApO1xuICAgICAgTG9nZ2VyLmVycm9yKFxuICAgICAgICAnU2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlcjo6aW5pdFBlZXJDb25uZWN0aW9uIHVzZXI6JyxcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uLnVzZXJcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgcGVlckNvbm5lY3Rpb25DbG9zZWQoKSB7XG4gICAgcmV0dXJuIEJvb2xlYW4oXG4gICAgICB0aGlzLnBlZXJDb25uZWN0aW9uICYmIHRoaXMucGVlckNvbm5lY3Rpb24uc2lnbmFsaW5nU3RhdGUgPT09ICdjbG9zZWQnXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBPbmx5IHNpZ25hbCAoaGFuZGxlQWNjZXB0KSB0aGF0IHdlIGhhdmUgYSByZW1vdGUgc3RyZWFtIG9uY2Ugb250cmFja1xuICAgKiBzYXlzIHNvLlxuICAgKi9cbiAgZ290UmVtb3RlU3RyZWFtKGV2ZW50KSB7XG4gICAgW3RoaXMucmVtb3RlU3RyZWFtXSA9IGV2ZW50LnN0cmVhbXM7XG4gICAgTG9nZ2VyLmRlYnVnKFxuICAgICAgJ1Nlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXI6OmdvdFJlbW90ZVN0cmVhbTogJyxcbiAgICAgIHRoaXMucmVtb3RlU3RyZWFtXG4gICAgKTtcbiAgICBpZiAoIXRoaXMuaGFuZGxlZEFjY2VwdCkge1xuICAgICAgdGhpcy5zZXNzaW9uLnBhc3NlZE9wdGlvbnMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnMuaGFuZGxlQWNjZXB0KCk7XG4gICAgICB0aGlzLmhhbmRsZWRBY2NlcHQgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIHN0YXJ0SWNlQ2hlY2tpbmdUaW1lcihpY2VDaGVja2luZ1RpbWVvdXQpIHtcbiAgICB0aGlzLmljZUNoZWNraW5nVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIExvZ2dlci5kZWJ1ZyhcbiAgICAgICAgJ2ljZUNoZWNraW5nVGltZW91dCB0cmlnZ2VyZWQgYWZ0ZXI6ICcgK1xuICAgICAgICAgIGljZUNoZWNraW5nVGltZW91dCArXG4gICAgICAgICAgJyBtaWxsaXNlY29uZHMnXG4gICAgICApO1xuICAgICAgdGhpcy5yZXNvbHZlSWNlQ29tcGxldGVkKCk7XG4gICAgfSwgaWNlQ2hlY2tpbmdUaW1lb3V0KTtcbiAgfVxuXG4gIGdvdEljZUNhbmRpZGF0ZShldmVudCkge1xuICAgIGNvbnN0IHsgY2FuZGlkYXRlIH0gPSBldmVudDtcblxuICAgIGlmICghY2FuZGlkYXRlKSB7XG4gICAgICBMb2dnZXIuZGVidWcoXG4gICAgICAgICdTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyOjpnb3RJY2VDYW5kaWRhdGU6ICcgK1xuICAgICAgICAgICdubyBjYW5kaWRhdGVzIGxlZnQsIG9uSWNlQ29tcGxldGVkLidcbiAgICAgICk7XG4gICAgICB0aGlzLnJlc29sdmVJY2VDb21wbGV0ZWQoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoY2FuZGlkYXRlLnR5cGUgPT09ICdyZWxheScgJiYgY2FuZGlkYXRlLnNkcE1pZCA9PT0gJ3ZpZGVvJykge1xuICAgICAgTG9nZ2VyLmRlYnVnKGBTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyOjpnb3RJY2VDYW5kaWRhdGU6ICR7Y2FuZGlkYXRlfS5cbiAgICAgICAgICAgICAgICAgICBSZWxheSBjYW5kaWRhdGUgZm91bmQsIG9uSWNlQ29tcGxldGVkLmApO1xuICAgICAgdGhpcy5yZXNvbHZlSWNlQ29tcGxldGVkKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgTG9nZ2VyLmRlYnVnKGBTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyOjpnb3RJY2VDYW5kaWRhdGU6ICR7Y2FuZGlkYXRlfWApO1xuICB9XG5cbiAgLyoqXG4gICAqIFdlIG5lZWQgdG8gcmUtZm9ybWF0IHRoZSBpY2VTZXJ2ZXJzIGhlcmUuIFNJUC5qcyB1c2VkIHRvIG9mZmVyIGFcbiAgICogaGlnaGVyIGxldmVsIGFwaSBhbmQgd2Ugc3VwcGxpZWQgdGhlIHNlcnZlcnMgaW4gYSBkaWZmZXJlbnQgZm9ybWF0IGUuZzpcbiAgICpcbiAgICogeyBzdHVuU2VydmVyczogW1wic3R1bjpzdHVuMS52aXNvY29uLmNvbTozNDc4XCJdIH1cbiAgICogeyB0dXJuU2VydmVyczogW3sgdXJsczogWzEsMiwzXSwgdXNlcm5hbWU6IFwiYm9iXCIsIHBhc3N3b3JkOiBcIm5vYlwiIH1dIH1cbiAgICpcbiAgICogV2UgY3VycmVudGx5IGhhdmUgdGhlIGFwaSBzZXQgcmV0dXJuIHRoZSBjcmVkcyBpbiB0aGF0IGZvcm1hdC5cbiAgICogVGhlIHBlZXJDb25uZWN0aW9uIGhvd2V2ZXIgZXhwZWN0czpcbiAgICpcbiAgICoge1xuICAgKiAgIFwiaWNlU2VydmVyc1wiOiBbXG4gICAqICAgICB7IFwidXJsc1wiOiBcInN0dW46c3R1bjEudmlzb2Nvbi5jb206MzQ3OFwiIH0sXG4gICAqICAgICB7IFwidXJsc1wiOiBbMSwyLDNdLCBcInVzZXJuYW1lXCI6IFwiYm9iXCIsIFwiY3JlZGVudGlhbFwiOiBcIm5vYlwiIH1cbiAgICogICBdXG4gICAqIH1cbiAgICpcbiAgICogTm90ZTogRWRnZSBpcyBhIGxpdHRsZSBwaWNreSB3aGVuIGl0IGNvbWVzIHRvIHR1cm4gc2VydmVyIHVybHMuIFdlIG5lZWRcbiAgICogdG8gc3BlY2lmeSB0aGUgcHJvdG9jb2wgdmlhIChgP3RyYW5zcG9ydD11ZHBgKSBmb3IgZWRnZSB0byBzd2FsbG93IGl0LlxuICAgKiBCdXQgd2UgZG9uJ3Qgd2FudCB0byBhZGQgYWRkaXRpb25hbCB0dXJuLXNlcnZlciBmb3IgdGhlIHJlc3Qgb2YgdGhlXG4gICAqIGJyb3dzZXJzLCBzaW5jZSBGRiBnaXZlcyB1cyBhIHdhcm5pbmcgXCJUaGluZ3Mgd2lsbCBnbyB3cm9uZyB3aGVuIHByb3ZpZGluZ1xuICAgKiBtb3JlIHRoYW4gNSB1cmxzXCIuIFdlIGFsc28gZG9uJ3QgcmVtb3ZlIGFueSB0dXJuIHVybHMsIHNpbmNlIGFkYXB0ZXIgYW5kXG4gICAqIGVkZ2Ugd2lsbCBiZSBkb2luZyB0aGF0IGZvciB1cy5cbiAgICovXG4gIGJ1aWxkUGVlckNvbm5lY3Rpb25PcHRpb25zKCkge1xuICAgIGNvbnN0IHRtcCA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuY29ubmVjdGlvbi51c2VyKTtcbiAgICB0bXAuc3R1blNlcnZlcnMgPSB7IHVybHM6IHRtcC5zdHVuU2VydmVycyB9O1xuICAgIHRtcC50dXJuU2VydmVycyA9IHRtcC50dXJuU2VydmVycy5tYXAoc2VydmVyID0+IHtcbiAgICAgIGlmIChGZWF0dXJlRGV0ZWN0b3IuaXNFZGdlKCkpIHtcbiAgICAgICAgY29uc3QgdXJsV2l0aG91dFByb3RvY29sID0gc2VydmVyLnVybHMuZmluZChcbiAgICAgICAgICB1cmwgPT4gIXVybC5tYXRjaCgvdHJhbnNwb3J0LylcbiAgICAgICAgKTtcbiAgICAgICAgc2VydmVyLnVybHMucHVzaCh1cmxXaXRob3V0UHJvdG9jb2wgKyAnP3RyYW5zcG9ydD11ZHAnKTtcbiAgICAgIH1cbiAgICAgIHNlcnZlci5jcmVkZW50aWFsID0gc2VydmVyLnBhc3N3b3JkO1xuICAgICAgcmV0dXJuIHNlcnZlcjtcbiAgICB9KTtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihcbiAgICAgIHt9LFxuICAgICAgdGhpcy5vcHRpb25zLnBlZXJDb25uZWN0aW9uT3B0aW9ucyxcbiAgICAgIHsgaWNlU2VydmVyczogdG1wLnR1cm5TZXJ2ZXJzLmNvbmNhdCh0bXAuc3R1blNlcnZlcnMpIH1cbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEhlYWRzIHVwISBJbiBjYXNlIHdlIGV2ZXIgbmVlZCB0byBtb2RpZnkgdGhlIHNkcCB3aXRoIG1vZGlmaWVycy4gQWZ0ZXJcbiAgICogY2hhbmdpbmcgdGhlIHNkcCB3aXRoIHRoZSBjdXJyZW50IGltcGxlbWVudGF0aW9uLCB3ZSBzdGlsbCBlbmRlZCB1cFxuICAgKiB1c2luZyB0aGUgb2xkICh1bm1vZGlmaWVkKSBzZHAuIE5vdCBzdXJlIHdoYXQgdGhlIGlzc3VlIGlzIHRiaCxcbiAgICogbWF5YmUgc2V0TG9jYWxEZXNjcmlwdGlvbigpIG5lZWRzIG1vcmUgdGltZSB0byBzZXQgdGhlIHNkcD9cbiAgICogRWl0aGVyIHdheSwgdGhpcy5wZWVyQ29ubmVjdGlvbi5sb2NhbERlc2NyaXB0aW9uLnNkcCBpcyBfbm90XyB1cGRhdGVkIHdpdGhcbiAgICogdGhlIG1vZGlmaWUocilkIHNkcCBhdG0uXG4gICAqL1xuICBjcmVhdGVPZmZlck9yQW5zd2VyKFJUQ09mZmVyT3B0aW9ucywgbW9kaWZpZXJzKSB7XG4gICAgTG9nZ2VyLmRlYnVnKFxuICAgICAgJ1Nlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXI6OmNyZWF0ZU9mZmVyT3JBbnN3ZXI6ICcsXG4gICAgICBSVENPZmZlck9wdGlvbnMsXG4gICAgICBtb2RpZmllcnNcbiAgICApO1xuXG4gICAgY29uc3Qgb2ZmZXJPcHRpb25zID0gUlRDT2ZmZXJPcHRpb25zIHx8IHt9O1xuICAgIGNvbnN0IHNkcE1vZGlmaWVycyA9IG1vZGlmaWVycyB8fCBbXTtcblxuICAgIGNvbnN0IG1ldGhvZE5hbWUgPSB0aGlzLmhhc09mZmVyKCdyZW1vdGUnKSA/ICdjcmVhdGVBbnN3ZXInIDogJ2NyZWF0ZU9mZmVyJztcblxuICAgIHJldHVybiB0aGlzLnBlZXJDb25uZWN0aW9uW21ldGhvZE5hbWVdKG9mZmVyT3B0aW9ucylcbiAgICAgIC50aGVuKHNkcCA9PiB7XG4gICAgICAgIHNkcE1vZGlmaWVycy5mb3JFYWNoKG1vZGlmaWVyID0+IG1vZGlmaWVyKHNkcCkpO1xuICAgICAgICByZXR1cm4gc2RwO1xuICAgICAgfSlcbiAgICAgIC50aGVuKHNkcCA9PiB7XG4gICAgICAgIHRoaXMucGVlckNvbm5lY3Rpb24uc2V0TG9jYWxEZXNjcmlwdGlvbihzZHApO1xuICAgICAgfSlcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMub25JY2VDb21wbGV0ZWQ7XG4gICAgICB9KVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5wZWVyQ29ubmVjdGlvbi5sb2NhbERlc2NyaXB0aW9uLnNkcDtcbiAgICAgIH0pO1xuICB9XG5cbiAgaGFzT2ZmZXIodHlwZSkge1xuICAgIHJldHVybiB0aGlzLnBlZXJDb25uZWN0aW9uLnNpZ25hbGluZ1N0YXRlID09PSBgaGF2ZS0ke3R5cGV9LW9mZmVyYDtcbiAgfVxuXG4gIGdldExvY2FsU3RyZWFtKCkge1xuICAgIHJldHVybiB0aGlzLmxvY2FsU3RyZWFtO1xuICB9XG5cbiAgZ2V0UmVtb3RlU3RyZWFtKCkge1xuICAgIHJldHVybiB0aGlzLnJlbW90ZVN0cmVhbTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZXBlbmRpbmcgb24gdGhlIGJyb3dzZXIgYW5kIHN1cHBvcnQgZm9yIHJlcGxhY2VUcmFjaywgd2UgZG8gb25lIG9mIHR3b1xuICAgKiB0aGluZ3MgaGVyZTpcbiAgICogMS4gSXRlcmF0ZSBvdmVyIHNlbmRlcnMgYW5kIHJlcGxhY2UgdGhlIGN1cnJlbnQgdHJhY2tzIHdpdGggdGhlIHRyYWNrcyBmcm9tXG4gICAqICAgIHRoZSBuZXcgc3RyZWFtLlxuICAgKiAgICBXZSBkb24ndCBzdG9wIHRoZSBhdWRpbyB0cmFjaywgaW4gdGhlIGNhc2Ugb2YgYSBuYXZpZ2F0b3IgY2FwdHVyZVxuICAgKiAgICBzZXNzaW9uLCB3ZSdyZSByZS11c2luZyBpdC4gKFNpbmNlIEZGIHBlcm1pc3Npb24gZGlhbG9nIGZvciBzY3JlZW5cbiAgICogICAgY2FwdHVyZSBpcyB0ZXJyaWJsZSkuXG4gICAqIDIuIFN0b3AgYW5kIHJlbW92ZSB0aGUgYWN0aXZlIHN0cmVhbSBmcm9tIHRoZSBwZWVyIGNvbm5lY3Rpb24gYW5kIGFkZFxuICAgKiAgICB0aGUgbmV3IHN0cmVhbS4gVXBkYXRlIHRoZSBwZWVyIGNvbm5lY3Rpb24gYW5kIHJlbmVnb3RpYXRlLlxuICAgKiovXG4gIC8qIGVzbGludC1kaXNhYmxlIG1heC1zdGF0ZW1lbnRzICovXG4gIHNldFN0cmVhbShuZXdTdHJlYW0pIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgY29uc3Qgb2xkU3RyZWFtID0gdGhpcy5nZXRMb2NhbFN0cmVhbSgpO1xuICAgICAgY29uc3QgcmVtb3RlU3RyZWFtID0gdGhpcy5nZXRSZW1vdGVTdHJlYW0oKTtcbiAgICAgIHRoaXMubG9jYWxTdHJlYW0gPSBuZXdTdHJlYW07XG5cbiAgICAgIGlmIChvbGRTdHJlYW0uaWQgPT09IG5ld1N0cmVhbS5pZCkge1xuICAgICAgICBMb2dnZXIuZGVidWcoJ1Nlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXI6OnNldFN0cmVhbSBlcXVhbCBzdHJlYW1zJyk7XG4gICAgICAgIHJldHVybiByZXNvbHZlKHsgbmV3U3RyZWFtOiBuZXdTdHJlYW0sIHJlbW90ZVN0cmVhbTogcmVtb3RlU3RyZWFtIH0pO1xuICAgICAgfVxuXG4gICAgICB0cnkge1xuICAgICAgICBpZiAoIUZlYXR1cmVEZXRlY3Rvci5oYXNSZXBsYWNlVHJhY2soKSkge1xuICAgICAgICAgIE1lZGlhU3RyZWFtSGFuZGxlci5zdG9wKG9sZFN0cmVhbSk7XG4gICAgICAgICAgdGhpcy5wZWVyQ29ubmVjdGlvbi5yZW1vdmVTdHJlYW0ob2xkU3RyZWFtKTtcbiAgICAgICAgICB0aGlzLnBlZXJDb25uZWN0aW9uLmFkZFN0cmVhbShuZXdTdHJlYW0pO1xuICAgICAgICAgIHJldHVybiB0aGlzLnJlbmVnb3RpYXRlKCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICByZXNvbHZlKHsgbmV3U3RyZWFtOiBuZXdTdHJlYW0sIHJlbW90ZVN0cmVhbTogcmVtb3RlU3RyZWFtIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcHJvbWlzZXMgPSB0aGlzLnBlZXJDb25uZWN0aW9uLmdldFNlbmRlcnMoKS5tYXAoc2VuZGVyID0+IHtcbiAgICAgICAgICBjb25zdCBuZXdUcmFjayA9IG5ld1N0cmVhbVxuICAgICAgICAgICAgLmdldFRyYWNrcygpXG4gICAgICAgICAgICAuZmluZCh0cmFjayA9PiB0cmFjay5raW5kID09PSBzZW5kZXIudHJhY2sua2luZCk7XG4gICAgICAgICAgcmV0dXJuIHNlbmRlci5yZXBsYWNlVHJhY2sobmV3VHJhY2ssIG5ld1N0cmVhbSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIHJlc29sdmUoeyBuZXdTdHJlYW06IG5ld1N0cmVhbSwgcmVtb3RlU3RyZWFtOiByZW1vdGVTdHJlYW0gfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIHJlamVjdChlcnJvcik7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgLyogZXNsaW50LWVuYWJsZSBtYXgtc3RhdGVtZW50cyAqL1xuXG4gIC8qKlxuICAgKiBSZW5lZ290aWF0ZSB3aXRoIHJlbW90ZSBlbmQuXG4gICAqKi9cbiAgcmVuZWdvdGlhdGUoKSB7XG4gICAgcmV0dXJuIHRoaXMucGVlckNvbm5lY3Rpb25cbiAgICAgIC5jcmVhdGVPZmZlcigpXG4gICAgICAudGhlbihvZmZlciA9PiB0aGlzLnBlZXJDb25uZWN0aW9uLnNldExvY2FsRGVzY3JpcHRpb24ob2ZmZXIpKVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb24uc2VuZCh7XG4gICAgICAgICAgdHlwZTogJ3N0cmVhbV9vZmZlcicsXG4gICAgICAgICAgc2RwOiB0aGlzLnBlZXJDb25uZWN0aW9uLmxvY2FsRGVzY3JpcHRpb25cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdG9wIGFsbCB0cmFja3NcbiAgICovXG4gIHN0b3BBbGxUcmFja3MoKSB7XG4gICAgTG9nZ2VyLmRlYnVnKCdTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyOjpzdG9wQWxsVHJhY2tzJyk7XG4gICAgbGV0IHJlY2VpdmVycyA9IHRoaXMucGVlckNvbm5lY3Rpb24uZ2V0UmVjZWl2ZXJzXG4gICAgICA/IHRoaXMucGVlckNvbm5lY3Rpb24uZ2V0UmVjZWl2ZXJzKClcbiAgICAgIDogW107XG4gICAgdGhpcy5wZWVyQ29ubmVjdGlvblxuICAgICAgLmdldFNlbmRlcnMoKVxuICAgICAgLmNvbmNhdChyZWNlaXZlcnMpXG4gICAgICAuZm9yRWFjaChydHAgPT4ge1xuICAgICAgICBpZiAocnRwLnRyYWNrKSB7XG4gICAgICAgICAgcnRwLnRyYWNrLnN0b3AoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlcjtcbi8qIGVzbGludC1lbmFibGUgbWF4LWxpbmVzICovXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc3JjL1Nlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIuanMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBREE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7Ozs7QUFDQTs7Ozs7Ozs7Ozs7QUFXQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQU9BO0FBQUE7QUFDQTtBQUFBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQVFBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7O0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7QUFNQTtBQUNBO0FBSUE7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7QUFJQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBSUE7QUFDQTs7O0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTs7Ozs7OztBQUlBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQXdCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQVFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQVdBO0FBQ0E7OztBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUFHQTtBQUFBO0FBQ0E7QUFBQTtBQUVBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQUdBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///90\n")},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _PublicEvent2 = __webpack_require__(/*! ./PublicEvent */ 2);\n\nvar _PublicEvent3 = _interopRequireDefault(_PublicEvent2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar FetchRoomEvent = function (_PublicEvent) {\n  _inherits(FetchRoomEvent, _PublicEvent);\n\n  function FetchRoomEvent() {\n    _classCallCheck(this, FetchRoomEvent);\n\n    return _possibleConstructorReturn(this, (FetchRoomEvent.__proto__ || Object.getPrototypeOf(FetchRoomEvent)).apply(this, arguments));\n  }\n\n  _createClass(FetchRoomEvent, [{\n    key: \'handle\',\n    value: function handle() {\n      var _this2 = this;\n\n      this.context._api.getRoom(function (room) {\n        return _get(FetchRoomEvent.prototype.__proto__ || Object.getPrototypeOf(FetchRoomEvent.prototype), \'handle\', _this2).call(_this2, { type: \'fetch_room\', room: room });\n      });\n    }\n  }]);\n\n  return FetchRoomEvent;\n}(_PublicEvent3.default);\n\nexports.default = FetchRoomEvent;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2V2ZW50cy9GZXRjaFJvb21FdmVudC5qcz8zYmQ3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQdWJsaWNFdmVudCBmcm9tICcuL1B1YmxpY0V2ZW50JztcblxuY2xhc3MgRmV0Y2hSb29tRXZlbnQgZXh0ZW5kcyBQdWJsaWNFdmVudCB7XG4gIGhhbmRsZSgpIHtcbiAgICB0aGlzLmNvbnRleHQuX2FwaS5nZXRSb29tKHJvb20gPT4ge1xuICAgICAgcmV0dXJuIHN1cGVyLmhhbmRsZSh7IHR5cGU6ICdmZXRjaF9yb29tJywgcm9vbSB9KTtcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBGZXRjaFJvb21FdmVudDtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBzcmMvZXZlbnRzL0ZldGNoUm9vbUV2ZW50LmpzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUE7QUFDQTs7Ozs7Ozs7Ozs7QUFDQTs7Ozs7Ozs7Ozs7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FBR0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///91\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _BaseEvent2 = __webpack_require__(/*! ./BaseEvent */ 1);\n\nvar _BaseEvent3 = _interopRequireDefault(_BaseEvent2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * Deletes a file using the com api.\n **/\nvar DeleteFileEvent = function (_BaseEvent) {\n  _inherits(DeleteFileEvent, _BaseEvent);\n\n  function DeleteFileEvent() {\n    _classCallCheck(this, DeleteFileEvent);\n\n    return _possibleConstructorReturn(this, (DeleteFileEvent.__proto__ || Object.getPrototypeOf(DeleteFileEvent)).apply(this, arguments));\n  }\n\n  _createClass(DeleteFileEvent, [{\n    key: \'handle\',\n    value: function handle(msg) {\n      this.context._api.deleteFile(msg.file);\n    }\n  }]);\n\n  return DeleteFileEvent;\n}(_BaseEvent3.default);\n\nexports.default = DeleteFileEvent;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2V2ZW50cy9EZWxldGVGaWxlRXZlbnQuanM/OGE2NiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQmFzZUV2ZW50IGZyb20gJy4vQmFzZUV2ZW50JztcblxuLyoqXG4gKiBEZWxldGVzIGEgZmlsZSB1c2luZyB0aGUgY29tIGFwaS5cbiAqKi9cbmNsYXNzIERlbGV0ZUZpbGVFdmVudCBleHRlbmRzIEJhc2VFdmVudCB7XG4gIGhhbmRsZShtc2cpIHtcbiAgICB0aGlzLmNvbnRleHQuX2FwaS5kZWxldGVGaWxlKG1zZy5maWxlKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBEZWxldGVGaWxlRXZlbnQ7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc3JjL2V2ZW50cy9EZWxldGVGaWxlRXZlbnQuanMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDQTs7Ozs7Ozs7Ozs7QUFDQTs7O0FBR0E7Ozs7Ozs7Ozs7O0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUFHQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///92\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _PublicEvent2 = __webpack_require__(/*! ./PublicEvent */ 2);\n\nvar _PublicEvent3 = _interopRequireDefault(_PublicEvent2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * Uploads a file using the com api.\n **/\n\nvar UploadFileEvent = function (_PublicEvent) {\n  _inherits(UploadFileEvent, _PublicEvent);\n\n  function UploadFileEvent() {\n    _classCallCheck(this, UploadFileEvent);\n\n    return _possibleConstructorReturn(this, (UploadFileEvent.__proto__ || Object.getPrototypeOf(UploadFileEvent)).apply(this, arguments));\n  }\n\n  _createClass(UploadFileEvent, [{\n    key: \'handle\',\n    value: function handle(msg) {\n      this.context._api.uploadFile(msg.file, this.addFile.bind(this));\n    }\n  }, {\n    key: \'addFile\',\n    value: function addFile(response) {\n      _get(UploadFileEvent.prototype.__proto__ || Object.getPrototypeOf(UploadFileEvent.prototype), \'handle\', this).call(this, {\n        type: \'add_file\',\n        file: response\n      });\n    }\n  }]);\n\n  return UploadFileEvent;\n}(_PublicEvent3.default);\n\nexports.default = UploadFileEvent;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2V2ZW50cy9VcGxvYWRGaWxlRXZlbnQuanM/M2I0NiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUHVibGljRXZlbnQgZnJvbSAnLi9QdWJsaWNFdmVudCc7XG5cbi8qKlxuICogVXBsb2FkcyBhIGZpbGUgdXNpbmcgdGhlIGNvbSBhcGkuXG4gKiovXG5cbmNsYXNzIFVwbG9hZEZpbGVFdmVudCBleHRlbmRzIFB1YmxpY0V2ZW50IHtcbiAgaGFuZGxlKG1zZykge1xuICAgIHRoaXMuY29udGV4dC5fYXBpLnVwbG9hZEZpbGUobXNnLmZpbGUsIHRoaXMuYWRkRmlsZS5iaW5kKHRoaXMpKTtcbiAgfVxuXG4gIGFkZEZpbGUocmVzcG9uc2UpIHtcbiAgICBzdXBlci5oYW5kbGUoe1xuICAgICAgdHlwZTogJ2FkZF9maWxlJyxcbiAgICAgIGZpbGU6IHJlc3BvbnNlXG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgVXBsb2FkRmlsZUV2ZW50O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNyYy9ldmVudHMvVXBsb2FkRmlsZUV2ZW50LmpzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUE7QUFDQTs7Ozs7Ozs7Ozs7QUFDQTs7OztBQUlBOzs7Ozs7Ozs7OztBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBOzs7Ozs7QUFHQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///93\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _PublicEvent2 = __webpack_require__(/*! ./PublicEvent */ 2);\n\nvar _PublicEvent3 = _interopRequireDefault(_PublicEvent2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar ReceiveChatEvent = function (_PublicEvent) {\n  _inherits(ReceiveChatEvent, _PublicEvent);\n\n  function ReceiveChatEvent() {\n    _classCallCheck(this, ReceiveChatEvent);\n\n    return _possibleConstructorReturn(this, (ReceiveChatEvent.__proto__ || Object.getPrototypeOf(ReceiveChatEvent)).apply(this, arguments));\n  }\n\n  _createClass(ReceiveChatEvent, [{\n    key: \'handle\',\n    value: function handle(msg) {\n      var userId = msg.cid.split(\'@\').shift();\n\n      this.msg = msg;\n      this.context._api.getUser(userId, this.forwardMessage.bind(this));\n    }\n  }, {\n    key: \'forwardMessage\',\n    value: function forwardMessage(user) {\n      var timestamp = Date.parse(this.msg.ts || this.msg.created_at);\n      _get(ReceiveChatEvent.prototype.__proto__ || Object.getPrototypeOf(ReceiveChatEvent.prototype), \'handle\', this).call(this, {\n        type: this.msg.type,\n        user: user,\n        timestamp: new Date(timestamp),\n        content: this.msg.content\n      });\n    }\n  }]);\n\n  return ReceiveChatEvent;\n}(_PublicEvent3.default);\n\nexports.default = ReceiveChatEvent;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2V2ZW50cy9SZWNlaXZlQ2hhdEV2ZW50LmpzPzJmNTgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFB1YmxpY0V2ZW50IGZyb20gJy4vUHVibGljRXZlbnQnO1xuXG5jbGFzcyBSZWNlaXZlQ2hhdEV2ZW50IGV4dGVuZHMgUHVibGljRXZlbnQge1xuICBoYW5kbGUobXNnKSB7XG4gICAgY29uc3QgdXNlcklkICAgID0gbXNnLmNpZC5zcGxpdCgnQCcpLnNoaWZ0KCk7XG5cbiAgICB0aGlzLm1zZyA9IG1zZztcbiAgICB0aGlzLmNvbnRleHQuX2FwaS5nZXRVc2VyKHVzZXJJZCwgdGhpcy5mb3J3YXJkTWVzc2FnZS5iaW5kKHRoaXMpKTtcbiAgfVxuXG4gIGZvcndhcmRNZXNzYWdlKHVzZXIpIHtcbiAgICBjb25zdCB0aW1lc3RhbXAgPSBEYXRlLnBhcnNlKHRoaXMubXNnLnRzIHx8IHRoaXMubXNnLmNyZWF0ZWRfYXQpO1xuICAgIHN1cGVyLmhhbmRsZSh7XG4gICAgICB0eXBlOiAgICAgIHRoaXMubXNnLnR5cGUsXG4gICAgICB1c2VyOiAgICAgIHVzZXIsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKHRpbWVzdGFtcCksXG4gICAgICBjb250ZW50OiAgIHRoaXMubXNnLmNvbnRlbnRcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBSZWNlaXZlQ2hhdEV2ZW50O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNyYy9ldmVudHMvUmVjZWl2ZUNoYXRFdmVudC5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBO0FBQ0E7Ozs7Ozs7Ozs7O0FBQ0E7Ozs7Ozs7Ozs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7Ozs7OztBQUdBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///94\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _PublicEvent2 = __webpack_require__(/*! ./PublicEvent */ 2);\n\nvar _PublicEvent3 = _interopRequireDefault(_PublicEvent2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar StopYouTubeEvent = function (_PublicEvent) {\n  _inherits(StopYouTubeEvent, _PublicEvent);\n\n  function StopYouTubeEvent() {\n    _classCallCheck(this, StopYouTubeEvent);\n\n    return _possibleConstructorReturn(this, (StopYouTubeEvent.__proto__ || Object.getPrototypeOf(StopYouTubeEvent)).apply(this, arguments));\n  }\n\n  _createClass(StopYouTubeEvent, [{\n    key: \'handle\',\n    value: function handle(msg) {\n      var _this2 = this;\n\n      this.context._api.stopBroadcast(\'youtube\').then(function () {\n        return _get(StopYouTubeEvent.prototype.__proto__ || Object.getPrototypeOf(StopYouTubeEvent.prototype), \'handle\', _this2).call(_this2, { type: msg.type });\n      });\n    }\n  }]);\n\n  return StopYouTubeEvent;\n}(_PublicEvent3.default);\n\nexports.default = StopYouTubeEvent;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTUuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2V2ZW50cy9TdG9wWW91VHViZUV2ZW50LmpzPzQwOGUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFB1YmxpY0V2ZW50IGZyb20gJy4vUHVibGljRXZlbnQnO1xuXG5jbGFzcyBTdG9wWW91VHViZUV2ZW50IGV4dGVuZHMgUHVibGljRXZlbnQge1xuICBoYW5kbGUobXNnKSB7XG4gICAgdGhpcy5jb250ZXh0Ll9hcGkuc3RvcEJyb2FkY2FzdCgneW91dHViZScpXG4gICAgICAudGhlbigoKSA9PiBzdXBlci5oYW5kbGUoeyB0eXBlOiBtc2cudHlwZSB9KSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU3RvcFlvdVR1YmVFdmVudDtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBzcmMvZXZlbnRzL1N0b3BZb3VUdWJlRXZlbnQuanMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTtBQUNBOzs7Ozs7Ozs7OztBQUNBOzs7Ozs7Ozs7OztBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBOzs7Ozs7QUFHQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///95\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _FeatureDetector = __webpack_require__(/*! ../FeatureDetector */ 4);\n\nvar _FeatureDetector2 = _interopRequireDefault(_FeatureDetector);\n\nvar _MediaStreamHandler = __webpack_require__(/*! ../MediaStreamHandler */ 3);\n\nvar _MediaStreamHandler2 = _interopRequireDefault(_MediaStreamHandler);\n\nvar _Logger = __webpack_require__(/*! ../Logger */ 0);\n\nvar _Logger2 = _interopRequireDefault(_Logger);\n\nvar _BaseEvent2 = __webpack_require__(/*! ./BaseEvent */ 1);\n\nvar _BaseEvent3 = _interopRequireDefault(_BaseEvent2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * ChangeStreamEvent updates a stream with the given constraints.  In\n * case the peerConnection allows updates, adjust the tracks according to\n * supplied constraints. Otherwise acquire a new stream.\n **/\nvar ChangeStreamEvent = function (_BaseEvent) {\n  _inherits(ChangeStreamEvent, _BaseEvent);\n\n  function ChangeStreamEvent() {\n    _classCallCheck(this, ChangeStreamEvent);\n\n    return _possibleConstructorReturn(this, (ChangeStreamEvent.__proto__ || Object.getPrototypeOf(ChangeStreamEvent)).apply(this, arguments));\n  }\n\n  _createClass(ChangeStreamEvent, [{\n    key: \'handle\',\n    value: function handle(msg) {\n      var _this2 = this;\n\n      _Logger2.default.debug(\'ChangeStreamEvent::handle\', msg.options);\n      var options = msg.options || {\n        audio: msg.audio !== false,\n        video: msg.video !== false\n      };\n\n      new _MediaStreamHandler2.default(options, this.context._session.localStream).start().then(this.context._session.setStream).then(function () {\n        if (_FeatureDetector2.default.hasReplaceTrack()) {\n          _this2.context._connection.send({\n            type: \'mute_video\',\n            on: !options.video\n          });\n        }\n      }).catch(_Logger2.default.error);\n    }\n  }]);\n\n  return ChangeStreamEvent;\n}(_BaseEvent3.default);\n\nexports.default = ChangeStreamEvent;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2V2ZW50cy9DaGFuZ2VTdHJlYW1FdmVudC5qcz9kMjM1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBGZWF0dXJlRGV0ZWN0b3IgZnJvbSAnLi4vRmVhdHVyZURldGVjdG9yJztcbmltcG9ydCBNZWRpYVN0cmVhbUhhbmRsZXIgZnJvbSAnLi4vTWVkaWFTdHJlYW1IYW5kbGVyJztcbmltcG9ydCBMb2dnZXIgZnJvbSAnLi4vTG9nZ2VyJztcbmltcG9ydCBCYXNlRXZlbnQgZnJvbSAnLi9CYXNlRXZlbnQnO1xuXG4vKipcbiAqIENoYW5nZVN0cmVhbUV2ZW50IHVwZGF0ZXMgYSBzdHJlYW0gd2l0aCB0aGUgZ2l2ZW4gY29uc3RyYWludHMuICBJblxuICogY2FzZSB0aGUgcGVlckNvbm5lY3Rpb24gYWxsb3dzIHVwZGF0ZXMsIGFkanVzdCB0aGUgdHJhY2tzIGFjY29yZGluZyB0b1xuICogc3VwcGxpZWQgY29uc3RyYWludHMuIE90aGVyd2lzZSBhY3F1aXJlIGEgbmV3IHN0cmVhbS5cbiAqKi9cbmNsYXNzIENoYW5nZVN0cmVhbUV2ZW50IGV4dGVuZHMgQmFzZUV2ZW50IHtcbiAgaGFuZGxlKG1zZykge1xuICAgIExvZ2dlci5kZWJ1ZygnQ2hhbmdlU3RyZWFtRXZlbnQ6OmhhbmRsZScsIG1zZy5vcHRpb25zKTtcbiAgICBjb25zdCBvcHRpb25zID0gbXNnLm9wdGlvbnMgfHwge1xuICAgICAgYXVkaW86IG1zZy5hdWRpbyAhPT0gZmFsc2UsXG4gICAgICB2aWRlbzogbXNnLnZpZGVvICE9PSBmYWxzZVxuICAgIH07XG5cbiAgICBuZXcgTWVkaWFTdHJlYW1IYW5kbGVyKG9wdGlvbnMsIHRoaXMuY29udGV4dC5fc2Vzc2lvbi5sb2NhbFN0cmVhbSlcbiAgICAgIC5zdGFydCgpXG4gICAgICAudGhlbih0aGlzLmNvbnRleHQuX3Nlc3Npb24uc2V0U3RyZWFtKVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICBpZiAoRmVhdHVyZURldGVjdG9yLmhhc1JlcGxhY2VUcmFjaygpKSB7XG4gICAgICAgICAgdGhpcy5jb250ZXh0Ll9jb25uZWN0aW9uLnNlbmQoe1xuICAgICAgICAgICAgdHlwZTogJ211dGVfdmlkZW8nLFxuICAgICAgICAgICAgb246ICFvcHRpb25zLnZpZGVvXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAuY2F0Y2goTG9nZ2VyLmVycm9yKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDaGFuZ2VTdHJlYW1FdmVudDtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBzcmMvZXZlbnRzL0NoYW5nZVN0cmVhbUV2ZW50LmpzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7Ozs7Ozs7Ozs7O0FBQ0E7Ozs7O0FBS0E7Ozs7Ozs7Ozs7O0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBSUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUVBOzs7Ozs7QUFHQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///96\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Logger = __webpack_require__(/*! ../Logger */ 0);\n\nvar _Logger2 = _interopRequireDefault(_Logger);\n\nvar _BaseEvent2 = __webpack_require__(/*! ./BaseEvent */ 1);\n\nvar _BaseEvent3 = _interopRequireDefault(_BaseEvent2);\n\nvar _MobileMediaStreamHandler = __webpack_require__(/*! ../MobileMediaStreamHandler */ 98);\n\nvar _MobileMediaStreamHandler2 = _interopRequireDefault(_MobileMediaStreamHandler);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * ToggleCameraEvent\n **/\nvar ToggleCameraEvent = function (_BaseEvent) {\n  _inherits(ToggleCameraEvent, _BaseEvent);\n\n  function ToggleCameraEvent() {\n    _classCallCheck(this, ToggleCameraEvent);\n\n    return _possibleConstructorReturn(this, (ToggleCameraEvent.__proto__ || Object.getPrototypeOf(ToggleCameraEvent)).apply(this, arguments));\n  }\n\n  _createClass(ToggleCameraEvent, [{\n    key: \'handle\',\n    value: function handle(msg) {\n      _Logger2.default.debug(\'ToggleCameraEvent::handle\', msg);\n      var localStream = this.context._session.session.sessionDescriptionHandler.localStream;\n\n\n      var options = {\n        audio: localStream.getAudioTracks()[0].enabled,\n        video: { facingMode: msg.facingMode }\n      };\n\n      new _MobileMediaStreamHandler2.default(options, localStream).start().then(this.context._session.setStream);\n    }\n  }]);\n\n  return ToggleCameraEvent;\n}(_BaseEvent3.default);\n\nexports.default = ToggleCameraEvent;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTcuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2V2ZW50cy9Ub2dnbGVDYW1lcmFFdmVudC5qcz85YTJiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBMb2dnZXIgZnJvbSAnLi4vTG9nZ2VyJztcbmltcG9ydCBCYXNlRXZlbnQgZnJvbSAnLi9CYXNlRXZlbnQnO1xuaW1wb3J0IE1vYmlsZU1lZGlhU3RyZWFtSGFuZGxlciBmcm9tICcuLi9Nb2JpbGVNZWRpYVN0cmVhbUhhbmRsZXInO1xuXG4vKipcbiAqIFRvZ2dsZUNhbWVyYUV2ZW50XG4gKiovXG5jbGFzcyBUb2dnbGVDYW1lcmFFdmVudCBleHRlbmRzIEJhc2VFdmVudCB7XG4gIGhhbmRsZShtc2cpIHtcbiAgICBMb2dnZXIuZGVidWcoJ1RvZ2dsZUNhbWVyYUV2ZW50OjpoYW5kbGUnLCBtc2cpO1xuICAgIGNvbnN0IHsgbG9jYWxTdHJlYW0gfSA9IHRoaXMuY29udGV4dC5fc2Vzc2lvbi5zZXNzaW9uXG4gICAgICAuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlcjtcblxuICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICBhdWRpbzogbG9jYWxTdHJlYW0uZ2V0QXVkaW9UcmFja3MoKVswXS5lbmFibGVkLFxuICAgICAgdmlkZW86IHsgZmFjaW5nTW9kZTogbXNnLmZhY2luZ01vZGUgfVxuICAgIH07XG5cbiAgICBuZXcgTW9iaWxlTWVkaWFTdHJlYW1IYW5kbGVyKG9wdGlvbnMsIGxvY2FsU3RyZWFtKVxuICAgICAgLnN0YXJ0KClcbiAgICAgIC50aGVuKHRoaXMuY29udGV4dC5fc2Vzc2lvbi5zZXRTdHJlYW0pO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFRvZ2dsZUNhbWVyYUV2ZW50O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNyYy9ldmVudHMvVG9nZ2xlQ2FtZXJhRXZlbnQuanMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7Ozs7Ozs7Ozs7QUFDQTs7O0FBR0E7Ozs7Ozs7Ozs7O0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFJQTtBQUdBOzs7Ozs7QUFHQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///97\n')},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Logger = __webpack_require__(/*! ./Logger */ 0);\n\nvar _Logger2 = _interopRequireDefault(_Logger);\n\nvar _DeviceManager = __webpack_require__(/*! ./DeviceManager */ 12);\n\nvar _DeviceManager2 = _interopRequireDefault(_DeviceManager);\n\nvar _FeatureDetector = __webpack_require__(/*! ./FeatureDetector */ 4);\n\nvar _FeatureDetector2 = _interopRequireDefault(_FeatureDetector);\n\nvar _MediaStreamHandler = __webpack_require__(/*! ./MediaStreamHandler */ 3);\n\nvar _MediaStreamHandler2 = _interopRequireDefault(_MediaStreamHandler);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * eyeson Media Stream Handler.\n **/\nvar MobileMediaStreamHandler = function () {\n\n  /**\n   * Valid options are {\n   *   audio: true/false,\n   *   video: true/false/{ facingMode: 'user'/'enviornment' }\n   * }\n   **/\n  function MobileMediaStreamHandler(options, existingStream) {\n    _classCallCheck(this, MobileMediaStreamHandler);\n\n    this.options = options || { audio: true, video: true };\n\n    if (!existingStream) {\n      throw new Error('Missing existing stream parameter');\n    }\n\n    this.existingStream = existingStream;\n\n    this.getUserMedia = this.getUserMedia.bind(this);\n    this.adjustAudioTrack = this.adjustAudioTrack.bind(this);\n    this.adjustVideoTrack = this.adjustVideoTrack.bind(this);\n  }\n\n  _createClass(MobileMediaStreamHandler, [{\n    key: 'start',\n    value: function start(onSuccess, onError) {\n      _Logger2.default.debug('MobileMediaStreamHandler::start', this.options);\n      return this.getUserMedia().then(onSuccess).catch(onError);\n    }\n\n    /**\n     * TODO test iOS handling\n     **/\n\n  }, {\n    key: 'getUserMedia',\n    value: function getUserMedia() {\n      var _this = this;\n\n      _Logger2.default.debug('MobileMediaStreamHandler::getUserMedia');\n\n      if (_FeatureDetector2.default.isIOSDevice()) {\n        return new Promise(function (resolve, reject) {\n          try {\n            _this.existingStream.getVideoTracks()[0].enabled = _this.options.video;\n            resolve(_this.existingStream);\n          } catch (error) {\n            reject(error);\n          }\n        });\n      }\n\n      _MediaStreamHandler2.default.stop(this.existingStream);\n\n      if (!_FeatureDetector2.default.hasMobileDevice()) {\n        return new Promise(function (resolve, reject) {\n          reject(new Error('MobileMediaStreamHandler::has no mobile app.'));\n        });\n      }\n\n      var options = { audio: true, video: this.options.video };\n      return _DeviceManager2.default.getMobileMediaConstraints(options).then(function (constraints) {\n        return navigator.mediaDevices.getUserMedia(constraints);\n      }).then(this.adjustVideoTrack).then(this.adjustAudioTrack).catch(function (error) {\n        _Logger2.default.error('MobileMediaStreamHandler::getUserMedia ', error);\n        return Promise.reject(error);\n      });\n    }\n\n    /**\n     * Adjust audio and video tracks according to the supplied options.\n     * We stop the video track so the camera indicator isn't active.\n     **/\n\n  }, {\n    key: 'adjustVideoTrack',\n    value: function adjustVideoTrack(stream) {\n      if (stream && stream.getVideoTracks().length === 1) {\n        stream.getVideoTracks()[0].enabled = this.options.video;\n        if (this.options.video === false) {\n          stream.getVideoTracks()[0].stop();\n        }\n      }\n      return stream;\n    }\n  }, {\n    key: 'adjustAudioTrack',\n    value: function adjustAudioTrack(stream) {\n      if (stream && stream.getAudioTracks().length === 1) {\n        stream.getAudioTracks()[0].enabled = this.options.audio;\n      }\n      return stream;\n    }\n  }]);\n\n  return MobileMediaStreamHandler;\n}();\n\nexports.default = MobileMediaStreamHandler;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTguanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL01vYmlsZU1lZGlhU3RyZWFtSGFuZGxlci5qcz8zNjhjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBMb2dnZXIgZnJvbSAnLi9Mb2dnZXInO1xuaW1wb3J0IERldmljZU1hbmFnZXIgZnJvbSAnLi9EZXZpY2VNYW5hZ2VyJztcbmltcG9ydCBGZWF0dXJlRGV0ZWN0b3IgZnJvbSAnLi9GZWF0dXJlRGV0ZWN0b3InO1xuaW1wb3J0IE1lZGlhU3RyZWFtSGFuZGxlciBmcm9tICcuL01lZGlhU3RyZWFtSGFuZGxlcic7XG5cbi8qKlxuICogZXllc29uIE1lZGlhIFN0cmVhbSBIYW5kbGVyLlxuICoqL1xuY2xhc3MgTW9iaWxlTWVkaWFTdHJlYW1IYW5kbGVyIHtcblxuICAvKipcbiAgICogVmFsaWQgb3B0aW9ucyBhcmUge1xuICAgKiAgIGF1ZGlvOiB0cnVlL2ZhbHNlLFxuICAgKiAgIHZpZGVvOiB0cnVlL2ZhbHNlL3sgZmFjaW5nTW9kZTogJ3VzZXInLydlbnZpb3JubWVudCcgfVxuICAgKiB9XG4gICAqKi9cbiAgY29uc3RydWN0b3Iob3B0aW9ucywgZXhpc3RpbmdTdHJlYW0pIHtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zIHx8IHsgYXVkaW86IHRydWUsIHZpZGVvOiB0cnVlIH07XG5cbiAgICBpZiAoIWV4aXN0aW5nU3RyZWFtKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgZXhpc3Rpbmcgc3RyZWFtIHBhcmFtZXRlcicpO1xuICAgIH1cblxuICAgIHRoaXMuZXhpc3RpbmdTdHJlYW0gPSBleGlzdGluZ1N0cmVhbTtcblxuICAgIHRoaXMuZ2V0VXNlck1lZGlhID0gdGhpcy5nZXRVc2VyTWVkaWEuYmluZCh0aGlzKTtcbiAgICB0aGlzLmFkanVzdEF1ZGlvVHJhY2sgPSB0aGlzLmFkanVzdEF1ZGlvVHJhY2suYmluZCh0aGlzKTtcbiAgICB0aGlzLmFkanVzdFZpZGVvVHJhY2sgPSB0aGlzLmFkanVzdFZpZGVvVHJhY2suYmluZCh0aGlzKTtcbiAgfVxuXG4gIHN0YXJ0KG9uU3VjY2Vzcywgb25FcnJvcikge1xuICAgIExvZ2dlci5kZWJ1ZygnTW9iaWxlTWVkaWFTdHJlYW1IYW5kbGVyOjpzdGFydCcsIHRoaXMub3B0aW9ucyk7XG4gICAgcmV0dXJuIHRoaXMuZ2V0VXNlck1lZGlhKClcbiAgICAgIC50aGVuKG9uU3VjY2VzcylcbiAgICAgIC5jYXRjaChvbkVycm9yKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUT0RPIHRlc3QgaU9TIGhhbmRsaW5nXG4gICAqKi9cbiAgZ2V0VXNlck1lZGlhKCkge1xuICAgIExvZ2dlci5kZWJ1ZygnTW9iaWxlTWVkaWFTdHJlYW1IYW5kbGVyOjpnZXRVc2VyTWVkaWEnKTtcblxuICAgIGlmIChGZWF0dXJlRGV0ZWN0b3IuaXNJT1NEZXZpY2UoKSkge1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB0aGlzLmV4aXN0aW5nU3RyZWFtLmdldFZpZGVvVHJhY2tzKClbMF0uZW5hYmxlZCA9IHRoaXMub3B0aW9ucy52aWRlbztcbiAgICAgICAgICByZXNvbHZlKHRoaXMuZXhpc3RpbmdTdHJlYW0pO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIE1lZGlhU3RyZWFtSGFuZGxlci5zdG9wKHRoaXMuZXhpc3RpbmdTdHJlYW0pO1xuXG4gICAgaWYgKCFGZWF0dXJlRGV0ZWN0b3IuaGFzTW9iaWxlRGV2aWNlKCkpIHtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ01vYmlsZU1lZGlhU3RyZWFtSGFuZGxlcjo6aGFzIG5vIG1vYmlsZSBhcHAuJykpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3Qgb3B0aW9ucyA9IHsgYXVkaW86IHRydWUsIHZpZGVvOiB0aGlzLm9wdGlvbnMudmlkZW8gfTtcbiAgICByZXR1cm4gRGV2aWNlTWFuYWdlci5nZXRNb2JpbGVNZWRpYUNvbnN0cmFpbnRzKG9wdGlvbnMpXG4gICAgICAudGhlbihjb25zdHJhaW50cyA9PiBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYShjb25zdHJhaW50cykpXG4gICAgICAudGhlbih0aGlzLmFkanVzdFZpZGVvVHJhY2spXG4gICAgICAudGhlbih0aGlzLmFkanVzdEF1ZGlvVHJhY2spXG4gICAgICAuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICBMb2dnZXIuZXJyb3IoJ01vYmlsZU1lZGlhU3RyZWFtSGFuZGxlcjo6Z2V0VXNlck1lZGlhICcsIGVycm9yKTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkanVzdCBhdWRpbyBhbmQgdmlkZW8gdHJhY2tzIGFjY29yZGluZyB0byB0aGUgc3VwcGxpZWQgb3B0aW9ucy5cbiAgICogV2Ugc3RvcCB0aGUgdmlkZW8gdHJhY2sgc28gdGhlIGNhbWVyYSBpbmRpY2F0b3IgaXNuJ3QgYWN0aXZlLlxuICAgKiovXG4gIGFkanVzdFZpZGVvVHJhY2soc3RyZWFtKSB7XG4gICAgaWYgKHN0cmVhbSAmJiBzdHJlYW0uZ2V0VmlkZW9UcmFja3MoKS5sZW5ndGggPT09IDEpIHtcbiAgICAgIHN0cmVhbS5nZXRWaWRlb1RyYWNrcygpWzBdLmVuYWJsZWQgPSB0aGlzLm9wdGlvbnMudmlkZW87XG4gICAgICBpZiAodGhpcy5vcHRpb25zLnZpZGVvID09PSBmYWxzZSkge1xuICAgICAgICBzdHJlYW0uZ2V0VmlkZW9UcmFja3MoKVswXS5zdG9wKCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzdHJlYW07XG4gIH1cblxuICBhZGp1c3RBdWRpb1RyYWNrKHN0cmVhbSkge1xuICAgIGlmIChzdHJlYW0gJiYgc3RyZWFtLmdldEF1ZGlvVHJhY2tzKCkubGVuZ3RoID09PSAxKSB7XG4gICAgICBzdHJlYW0uZ2V0QXVkaW9UcmFja3MoKVswXS5lbmFibGVkID0gdGhpcy5vcHRpb25zLmF1ZGlvO1xuICAgIH1cbiAgICByZXR1cm4gc3RyZWFtO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IE1vYmlsZU1lZGlhU3RyZWFtSGFuZGxlcjtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBzcmMvTW9iaWxlTWVkaWFTdHJlYW1IYW5kbGVyLmpzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7Ozs7Ozs7QUFDQTs7O0FBR0E7QUFDQTtBQUNBOzs7Ozs7QUFNQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBOzs7Ozs7QUFHQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUFHQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///98\n")},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _BaseEvent2 = __webpack_require__(/*! ./BaseEvent */ 1);\n\nvar _BaseEvent3 = _interopRequireDefault(_BaseEvent2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar StartYouTubeEvent = function (_BaseEvent) {\n  _inherits(StartYouTubeEvent, _BaseEvent);\n\n  function StartYouTubeEvent() {\n    _classCallCheck(this, StartYouTubeEvent);\n\n    return _possibleConstructorReturn(this, (StartYouTubeEvent.__proto__ || Object.getPrototypeOf(StartYouTubeEvent)).apply(this, arguments));\n  }\n\n  _createClass(StartYouTubeEvent, [{\n    key: \'handle\',\n    value: function handle(msg) {\n      this.context._api.startBroadcast(msg, \'youtube\');\n    }\n  }]);\n\n  return StartYouTubeEvent;\n}(_BaseEvent3.default);\n\nexports.default = StartYouTubeEvent;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTkuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2V2ZW50cy9TdGFydFlvdVR1YmVFdmVudC5qcz8yMWI3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBCYXNlRXZlbnQgZnJvbSAnLi9CYXNlRXZlbnQnO1xuXG5jbGFzcyBTdGFydFlvdVR1YmVFdmVudCBleHRlbmRzIEJhc2VFdmVudCB7XG4gIGhhbmRsZShtc2cpIHtcbiAgICB0aGlzLmNvbnRleHQuX2FwaS5zdGFydEJyb2FkY2FzdChtc2csICd5b3V0dWJlJyk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU3RhcnRZb3VUdWJlRXZlbnQ7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc3JjL2V2ZW50cy9TdGFydFlvdVR1YmVFdmVudC5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUNBOzs7Ozs7Ozs7OztBQUNBOzs7Ozs7Ozs7OztBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FBR0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///99\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _PublicEvent2 = __webpack_require__(/*! ./PublicEvent */ 2);\n\nvar _PublicEvent3 = _interopRequireDefault(_PublicEvent2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar StopFacebookEvent = function (_PublicEvent) {\n  _inherits(StopFacebookEvent, _PublicEvent);\n\n  function StopFacebookEvent() {\n    _classCallCheck(this, StopFacebookEvent);\n\n    return _possibleConstructorReturn(this, (StopFacebookEvent.__proto__ || Object.getPrototypeOf(StopFacebookEvent)).apply(this, arguments));\n  }\n\n  _createClass(StopFacebookEvent, [{\n    key: \'handle\',\n    value: function handle(msg) {\n      var _this2 = this;\n\n      this.context._api.stopBroadcast(\'facebook\').then(function () {\n        return _get(StopFacebookEvent.prototype.__proto__ || Object.getPrototypeOf(StopFacebookEvent.prototype), \'handle\', _this2).call(_this2, { type: msg.type });\n      });\n    }\n  }]);\n\n  return StopFacebookEvent;\n}(_PublicEvent3.default);\n\nexports.default = StopFacebookEvent;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTAwLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3NyYy9ldmVudHMvU3RvcEZhY2Vib29rRXZlbnQuanM/NTQ4YyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUHVibGljRXZlbnQgZnJvbSAnLi9QdWJsaWNFdmVudCc7XG5cbmNsYXNzIFN0b3BGYWNlYm9va0V2ZW50IGV4dGVuZHMgUHVibGljRXZlbnQge1xuICBoYW5kbGUobXNnKSB7XG4gICAgdGhpcy5jb250ZXh0Ll9hcGkuc3RvcEJyb2FkY2FzdCgnZmFjZWJvb2snKVxuICAgICAgLnRoZW4oKCkgPT4gc3VwZXIuaGFuZGxlKHsgdHlwZTogbXNnLnR5cGUgfSkpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFN0b3BGYWNlYm9va0V2ZW50O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNyYy9ldmVudHMvU3RvcEZhY2Vib29rRXZlbnQuanMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTtBQUNBOzs7Ozs7Ozs7OztBQUNBOzs7Ozs7Ozs7OztBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBOzs7Ozs7QUFHQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///100\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _PublicEvent2 = __webpack_require__(/*! ./PublicEvent */ 2);\n\nvar _PublicEvent3 = _interopRequireDefault(_PublicEvent2);\n\nvar _FeatureDetector = __webpack_require__(/*! ../FeatureDetector */ 4);\n\nvar _FeatureDetector2 = _interopRequireDefault(_FeatureDetector);\n\nvar _MediaStreamHandler = __webpack_require__(/*! ../MediaStreamHandler */ 3);\n\nvar _MediaStreamHandler2 = _interopRequireDefault(_MediaStreamHandler);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar AcceptSessionEvent = function (_PublicEvent) {\n  _inherits(AcceptSessionEvent, _PublicEvent);\n\n  function AcceptSessionEvent() {\n    _classCallCheck(this, AcceptSessionEvent);\n\n    return _possibleConstructorReturn(this, (AcceptSessionEvent.__proto__ || Object.getPrototypeOf(AcceptSessionEvent)).apply(this, arguments));\n  }\n\n  _createClass(AcceptSessionEvent, [{\n    key: \'handle\',\n    value: function handle(msg) {\n      var type = msg.type,\n          sessionDescriptionHandler = msg.session.sessionDescriptionHandler;\n\n      var localStream = sessionDescriptionHandler.getLocalStream();\n\n      _get(AcceptSessionEvent.prototype.__proto__ || Object.getPrototypeOf(AcceptSessionEvent.prototype), \'handle\', this).call(this, {\n        type: type,\n        localStream: localStream,\n        remoteStream: sessionDescriptionHandler.getRemoteStream()\n      });\n\n      if (_FeatureDetector2.default.hasReplaceTrack()) {\n        this.context._connection.send({\n          type: \'mute_video\',\n          on: !_MediaStreamHandler2.default.hasVideo(localStream)\n        });\n      }\n    }\n  }]);\n\n  return AcceptSessionEvent;\n}(_PublicEvent3.default);\n\nexports.default = AcceptSessionEvent;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTAxLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3NyYy9ldmVudHMvQWNjZXB0U2Vzc2lvbkV2ZW50LmpzP2VlODQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFB1YmxpY0V2ZW50IGZyb20gJy4vUHVibGljRXZlbnQnO1xuaW1wb3J0IEZlYXR1cmVEZXRlY3RvciBmcm9tICcuLi9GZWF0dXJlRGV0ZWN0b3InO1xuaW1wb3J0IE1lZGlhU3RyZWFtSGFuZGxlciBmcm9tICcuLi9NZWRpYVN0cmVhbUhhbmRsZXInO1xuXG5jbGFzcyBBY2NlcHRTZXNzaW9uRXZlbnQgZXh0ZW5kcyBQdWJsaWNFdmVudCB7XG4gIGhhbmRsZShtc2cpIHtcbiAgICBjb25zdCB7IHR5cGUsIHNlc3Npb246IHsgc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlciB9IH0gPSBtc2c7XG4gICAgY29uc3QgbG9jYWxTdHJlYW0gPSBzZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLmdldExvY2FsU3RyZWFtKCk7XG5cbiAgICBzdXBlci5oYW5kbGUoe1xuICAgICAgdHlwZTogdHlwZSxcbiAgICAgIGxvY2FsU3RyZWFtOiBsb2NhbFN0cmVhbSxcbiAgICAgIHJlbW90ZVN0cmVhbTogc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlci5nZXRSZW1vdGVTdHJlYW0oKVxuICAgIH0pO1xuXG4gICAgaWYgKEZlYXR1cmVEZXRlY3Rvci5oYXNSZXBsYWNlVHJhY2soKSkge1xuICAgICAgdGhpcy5jb250ZXh0Ll9jb25uZWN0aW9uLnNlbmQoe1xuICAgICAgICB0eXBlOiAnbXV0ZV92aWRlbycsXG4gICAgICAgIG9uOiAhTWVkaWFTdHJlYW1IYW5kbGVyLmhhc1ZpZGVvKGxvY2FsU3RyZWFtKVxuICAgICAgfSk7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEFjY2VwdFNlc3Npb25FdmVudDtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBzcmMvZXZlbnRzL0FjY2VwdFNlc3Npb25FdmVudC5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7Ozs7Ozs7Ozs7O0FBQ0E7Ozs7Ozs7Ozs7O0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7Ozs7OztBQUdBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///101\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _BaseEvent2 = __webpack_require__(/*! ./BaseEvent */ 1);\n\nvar _BaseEvent3 = _interopRequireDefault(_BaseEvent2);\n\nvar _Logger = __webpack_require__(/*! ../Logger */ 0);\n\nvar _Logger2 = _interopRequireDefault(_Logger);\n\nvar _MediaStreamHandler = __webpack_require__(/*! ../MediaStreamHandler */ 3);\n\nvar _MediaStreamHandler2 = _interopRequireDefault(_MediaStreamHandler);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * Restart a stream with updated credentials.\n **/\nvar RestartStreamEvent = function (_BaseEvent) {\n  _inherits(RestartStreamEvent, _BaseEvent);\n\n  function RestartStreamEvent() {\n    _classCallCheck(this, RestartStreamEvent);\n\n    return _possibleConstructorReturn(this, (RestartStreamEvent.__proto__ || Object.getPrototypeOf(RestartStreamEvent)).apply(this, arguments));\n  }\n\n  _createClass(RestartStreamEvent, [{\n    key: \'handle\',\n\n\n    /**\n     * Restart a video stream and assign it to the current session. If no\n     * constraints are given, the default constraints from device manager will be\n     * used.\n     **/\n    value: function handle(msg) {\n      _Logger2.default.debug(\'RestartStreamEvent::handle\', msg.options);\n      var localStream = this.context._session.session.sessionDescriptionHandler.localStream;\n\n      new _MediaStreamHandler2.default(msg.options, localStream).start().then(this.context._session.setStream).catch(_Logger2.default.error);\n    }\n  }]);\n\n  return RestartStreamEvent;\n}(_BaseEvent3.default);\n\nexports.default = RestartStreamEvent;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTAyLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3NyYy9ldmVudHMvUmVzdGFydFN0cmVhbUV2ZW50LmpzP2YzNmQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEJhc2VFdmVudCAgICAgICAgICBmcm9tICcuL0Jhc2VFdmVudCc7XG5pbXBvcnQgTG9nZ2VyICAgICAgICAgICAgIGZyb20gJy4uL0xvZ2dlcic7XG5pbXBvcnQgTWVkaWFTdHJlYW1IYW5kbGVyIGZyb20gJy4uL01lZGlhU3RyZWFtSGFuZGxlcic7XG5cbi8qKlxuICogUmVzdGFydCBhIHN0cmVhbSB3aXRoIHVwZGF0ZWQgY3JlZGVudGlhbHMuXG4gKiovXG5jbGFzcyBSZXN0YXJ0U3RyZWFtRXZlbnQgZXh0ZW5kcyBCYXNlRXZlbnQge1xuXG4gIC8qKlxuICAgKiBSZXN0YXJ0IGEgdmlkZW8gc3RyZWFtIGFuZCBhc3NpZ24gaXQgdG8gdGhlIGN1cnJlbnQgc2Vzc2lvbi4gSWYgbm9cbiAgICogY29uc3RyYWludHMgYXJlIGdpdmVuLCB0aGUgZGVmYXVsdCBjb25zdHJhaW50cyBmcm9tIGRldmljZSBtYW5hZ2VyIHdpbGwgYmVcbiAgICogdXNlZC5cbiAgICoqL1xuICBoYW5kbGUobXNnKSB7XG4gICAgTG9nZ2VyLmRlYnVnKCdSZXN0YXJ0U3RyZWFtRXZlbnQ6OmhhbmRsZScsIG1zZy5vcHRpb25zKTtcbiAgICBjb25zdCB7IGxvY2FsU3RyZWFtIH0gPSB0aGlzLmNvbnRleHQuX3Nlc3Npb24uc2Vzc2lvblxuICAgICAgLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXI7XG4gICAgbmV3IE1lZGlhU3RyZWFtSGFuZGxlcihtc2cub3B0aW9ucywgbG9jYWxTdHJlYW0pXG4gICAgICAuc3RhcnQoKVxuICAgICAgLnRoZW4odGhpcy5jb250ZXh0Ll9zZXNzaW9uLnNldFN0cmVhbSlcbiAgICAgIC5jYXRjaChMb2dnZXIuZXJyb3IpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFJlc3RhcnRTdHJlYW1FdmVudDtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBzcmMvZXZlbnRzL1Jlc3RhcnRTdHJlYW1FdmVudC5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7Ozs7Ozs7OztBQUNBOzs7QUFHQTs7Ozs7Ozs7Ozs7OztBQUVBOzs7OztBQUtBO0FBQ0E7QUFEQTtBQUNBO0FBR0E7QUFJQTs7Ozs7O0FBR0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///102\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _BaseEvent2 = __webpack_require__(/*! ./BaseEvent */ 1);\n\nvar _BaseEvent3 = _interopRequireDefault(_BaseEvent2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar StartFacebookEvent = function (_BaseEvent) {\n  _inherits(StartFacebookEvent, _BaseEvent);\n\n  function StartFacebookEvent() {\n    _classCallCheck(this, StartFacebookEvent);\n\n    return _possibleConstructorReturn(this, (StartFacebookEvent.__proto__ || Object.getPrototypeOf(StartFacebookEvent)).apply(this, arguments));\n  }\n\n  _createClass(StartFacebookEvent, [{\n    key: \'handle\',\n    value: function handle(msg) {\n      this.context._api.startBroadcast(msg, \'facebook\');\n    }\n  }]);\n\n  return StartFacebookEvent;\n}(_BaseEvent3.default);\n\nexports.default = StartFacebookEvent;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTAzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3NyYy9ldmVudHMvU3RhcnRGYWNlYm9va0V2ZW50LmpzPzZlNDUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEJhc2VFdmVudCBmcm9tICcuL0Jhc2VFdmVudCc7XG5cbmNsYXNzIFN0YXJ0RmFjZWJvb2tFdmVudCBleHRlbmRzIEJhc2VFdmVudCB7XG4gIGhhbmRsZShtc2cpIHtcbiAgICB0aGlzLmNvbnRleHQuX2FwaS5zdGFydEJyb2FkY2FzdChtc2csICdmYWNlYm9vaycpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFN0YXJ0RmFjZWJvb2tFdmVudDtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBzcmMvZXZlbnRzL1N0YXJ0RmFjZWJvb2tFdmVudC5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUNBOzs7Ozs7Ozs7OztBQUNBOzs7Ozs7Ozs7OztBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FBR0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///103\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _PublicEvent2 = __webpack_require__(/*! ./PublicEvent */ 2);\n\nvar _PublicEvent3 = _interopRequireDefault(_PublicEvent2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar StopRecordingEvent = function (_PublicEvent) {\n  _inherits(StopRecordingEvent, _PublicEvent);\n\n  function StopRecordingEvent() {\n    _classCallCheck(this, StopRecordingEvent);\n\n    return _possibleConstructorReturn(this, (StopRecordingEvent.__proto__ || Object.getPrototypeOf(StopRecordingEvent)).apply(this, arguments));\n  }\n\n  _createClass(StopRecordingEvent, [{\n    key: \'handle\',\n    value: function handle(msg) {\n      this.context._api.stopRecording(msg);\n    }\n  }]);\n\n  return StopRecordingEvent;\n}(_PublicEvent3.default);\n\nexports.default = StopRecordingEvent;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTA0LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3NyYy9ldmVudHMvU3RvcFJlY29yZGluZ0V2ZW50LmpzP2VjNDIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFB1YmxpY0V2ZW50IGZyb20gJy4vUHVibGljRXZlbnQnO1xuXG5jbGFzcyBTdG9wUmVjb3JkaW5nRXZlbnQgZXh0ZW5kcyBQdWJsaWNFdmVudCB7XG4gIGhhbmRsZShtc2cpIHtcbiAgICB0aGlzLmNvbnRleHQuX2FwaS5zdG9wUmVjb3JkaW5nKG1zZyk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU3RvcFJlY29yZGluZ0V2ZW50O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNyYy9ldmVudHMvU3RvcFJlY29yZGluZ0V2ZW50LmpzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBO0FBQ0E7Ozs7Ozs7Ozs7O0FBQ0E7Ozs7Ozs7Ozs7O0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUFHQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///104\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _BaseEvent2 = __webpack_require__(/*! ./BaseEvent */ 1);\n\nvar _BaseEvent3 = _interopRequireDefault(_BaseEvent2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar ScreenCaptureEvent = function (_BaseEvent) {\n  _inherits(ScreenCaptureEvent, _BaseEvent);\n\n  function ScreenCaptureEvent() {\n    _classCallCheck(this, ScreenCaptureEvent);\n\n    return _possibleConstructorReturn(this, (ScreenCaptureEvent.__proto__ || Object.getPrototypeOf(ScreenCaptureEvent)).apply(this, arguments));\n  }\n\n  _createClass(ScreenCaptureEvent, [{\n    key: \'handle\',\n    value: function handle(msg) {\n      this.context.startCaptureSession(msg.audio);\n    }\n  }]);\n\n  return ScreenCaptureEvent;\n}(_BaseEvent3.default);\n\nexports.default = ScreenCaptureEvent;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTA1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3NyYy9ldmVudHMvU2NyZWVuQ2FwdHVyZUV2ZW50LmpzPzllZjQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEJhc2VFdmVudCBmcm9tICcuL0Jhc2VFdmVudCc7XG5cbmNsYXNzIFNjcmVlbkNhcHR1cmVFdmVudCBleHRlbmRzIEJhc2VFdmVudCB7XG4gIGhhbmRsZShtc2cpIHtcbiAgICB0aGlzLmNvbnRleHQuc3RhcnRDYXB0dXJlU2Vzc2lvbihtc2cuYXVkaW8pO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFNjcmVlbkNhcHR1cmVFdmVudDtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBzcmMvZXZlbnRzL1NjcmVlbkNhcHR1cmVFdmVudC5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUNBOzs7Ozs7Ozs7OztBQUNBOzs7Ozs7Ozs7OztBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FBR0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///105\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _PublicEvent2 = __webpack_require__(/*! ./PublicEvent */ 2);\n\nvar _PublicEvent3 = _interopRequireDefault(_PublicEvent2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar StartRecordingEvent = function (_PublicEvent) {\n  _inherits(StartRecordingEvent, _PublicEvent);\n\n  function StartRecordingEvent() {\n    _classCallCheck(this, StartRecordingEvent);\n\n    return _possibleConstructorReturn(this, (StartRecordingEvent.__proto__ || Object.getPrototypeOf(StartRecordingEvent)).apply(this, arguments));\n  }\n\n  _createClass(StartRecordingEvent, [{\n    key: \'handle\',\n    value: function handle(msg) {\n      this.context._api.startRecording(msg);\n    }\n  }]);\n\n  return StartRecordingEvent;\n}(_PublicEvent3.default);\n\nexports.default = StartRecordingEvent;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTA2LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3NyYy9ldmVudHMvU3RhcnRSZWNvcmRpbmdFdmVudC5qcz9kOTc0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQdWJsaWNFdmVudCBmcm9tICcuL1B1YmxpY0V2ZW50JztcblxuY2xhc3MgU3RhcnRSZWNvcmRpbmdFdmVudCBleHRlbmRzIFB1YmxpY0V2ZW50IHtcbiAgaGFuZGxlKG1zZykge1xuICAgIHRoaXMuY29udGV4dC5fYXBpLnN0YXJ0UmVjb3JkaW5nKG1zZyk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU3RhcnRSZWNvcmRpbmdFdmVudDtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBzcmMvZXZlbnRzL1N0YXJ0UmVjb3JkaW5nRXZlbnQuanMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDQTs7Ozs7Ozs7Ozs7QUFDQTs7Ozs7Ozs7Ozs7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQUdBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///106\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _BaseEvent2 = __webpack_require__(/*! ./BaseEvent */ 1);\n\nvar _BaseEvent3 = _interopRequireDefault(_BaseEvent2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar StopPresentingEvent = function (_BaseEvent) {\n  _inherits(StopPresentingEvent, _BaseEvent);\n\n  function StopPresentingEvent() {\n    _classCallCheck(this, StopPresentingEvent);\n\n    return _possibleConstructorReturn(this, (StopPresentingEvent.__proto__ || Object.getPrototypeOf(StopPresentingEvent)).apply(this, arguments));\n  }\n\n  _createClass(StopPresentingEvent, [{\n    key: \'handle\',\n    value: function handle() {\n      this.context._api.stopPresent();\n      this.context.endCaptureSession();\n    }\n  }]);\n\n  return StopPresentingEvent;\n}(_BaseEvent3.default);\n\nexports.default = StopPresentingEvent;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTA3LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3NyYy9ldmVudHMvU3RvcFByZXNlbnRpbmdFdmVudC5qcz84NzI3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBCYXNlRXZlbnQgZnJvbSAnLi9CYXNlRXZlbnQnO1xuXG5jbGFzcyBTdG9wUHJlc2VudGluZ0V2ZW50IGV4dGVuZHMgQmFzZUV2ZW50IHtcbiAgaGFuZGxlKCkge1xuICAgIHRoaXMuY29udGV4dC5fYXBpLnN0b3BQcmVzZW50KCk7XG4gICAgdGhpcy5jb250ZXh0LmVuZENhcHR1cmVTZXNzaW9uKCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU3RvcFByZXNlbnRpbmdFdmVudDtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBzcmMvZXZlbnRzL1N0b3BQcmVzZW50aW5nRXZlbnQuanMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDQTs7Ozs7Ozs7Ozs7QUFDQTs7Ozs7Ozs7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FBR0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///107\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _PublicEvent2 = __webpack_require__(/*! ./PublicEvent */ 2);\n\nvar _PublicEvent3 = _interopRequireDefault(_PublicEvent2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar StopBroadcastsEvent = function (_PublicEvent) {\n  _inherits(StopBroadcastsEvent, _PublicEvent);\n\n  function StopBroadcastsEvent() {\n    _classCallCheck(this, StopBroadcastsEvent);\n\n    return _possibleConstructorReturn(this, (StopBroadcastsEvent.__proto__ || Object.getPrototypeOf(StopBroadcastsEvent)).apply(this, arguments));\n  }\n\n  _createClass(StopBroadcastsEvent, [{\n    key: \'handle\',\n    value: function handle(msg) {\n      var _this2 = this;\n\n      this.context._api.stopAllBroadcasts().then(function () {\n        return _get(StopBroadcastsEvent.prototype.__proto__ || Object.getPrototypeOf(StopBroadcastsEvent.prototype), \'handle\', _this2).call(_this2, { type: msg.type });\n      });\n    }\n  }]);\n\n  return StopBroadcastsEvent;\n}(_PublicEvent3.default);\n\nexports.default = StopBroadcastsEvent;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTA4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3NyYy9ldmVudHMvU3RvcEJyb2FkY2FzdHNFdmVudC5qcz85ZTUxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQdWJsaWNFdmVudCBmcm9tICcuL1B1YmxpY0V2ZW50JztcblxuY2xhc3MgU3RvcEJyb2FkY2FzdHNFdmVudCBleHRlbmRzIFB1YmxpY0V2ZW50IHtcbiAgaGFuZGxlKG1zZykge1xuICAgIHRoaXMuY29udGV4dC5fYXBpLnN0b3BBbGxCcm9hZGNhc3RzKClcbiAgICAgIC50aGVuKCgpID0+IHN1cGVyLmhhbmRsZSh7IHR5cGU6IG1zZy50eXBlIH0pKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBTdG9wQnJvYWRjYXN0c0V2ZW50O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNyYy9ldmVudHMvU3RvcEJyb2FkY2FzdHNFdmVudC5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBO0FBQ0E7Ozs7Ozs7Ozs7O0FBQ0E7Ozs7Ozs7Ozs7O0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7Ozs7OztBQUdBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///108\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _BaseEvent2 = __webpack_require__(/*! ./BaseEvent */ 1);\n\nvar _BaseEvent3 = _interopRequireDefault(_BaseEvent2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar ClearFrontLayerEvent = function (_BaseEvent) {\n  _inherits(ClearFrontLayerEvent, _BaseEvent);\n\n  function ClearFrontLayerEvent() {\n    _classCallCheck(this, ClearFrontLayerEvent);\n\n    return _possibleConstructorReturn(this, (ClearFrontLayerEvent.__proto__ || Object.getPrototypeOf(ClearFrontLayerEvent)).apply(this, arguments));\n  }\n\n  _createClass(ClearFrontLayerEvent, [{\n    key: \'handle\',\n    value: function handle() {\n      this.context._api.clearFrontLayer();\n    }\n  }]);\n\n  return ClearFrontLayerEvent;\n}(_BaseEvent3.default);\n\nexports.default = ClearFrontLayerEvent;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTA5LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3NyYy9ldmVudHMvQ2xlYXJGcm9udExheWVyRXZlbnQuanM/M2Y2YiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQmFzZUV2ZW50IGZyb20gJy4vQmFzZUV2ZW50JztcblxuY2xhc3MgQ2xlYXJGcm9udExheWVyRXZlbnQgZXh0ZW5kcyBCYXNlRXZlbnQge1xuICBoYW5kbGUoKSB7XG4gICAgdGhpcy5jb250ZXh0Ll9hcGkuY2xlYXJGcm9udExheWVyKCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ2xlYXJGcm9udExheWVyRXZlbnQ7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc3JjL2V2ZW50cy9DbGVhckZyb250TGF5ZXJFdmVudC5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUNBOzs7Ozs7Ozs7OztBQUNBOzs7Ozs7Ozs7OztBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FBR0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///109\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _PublicEvent2 = __webpack_require__(/*! ./PublicEvent */ 2);\n\nvar _PublicEvent3 = _interopRequireDefault(_PublicEvent2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar PublishBroadcastEvent = function (_PublicEvent) {\n  _inherits(PublishBroadcastEvent, _PublicEvent);\n\n  function PublishBroadcastEvent() {\n    _classCallCheck(this, PublishBroadcastEvent);\n\n    return _possibleConstructorReturn(this, (PublishBroadcastEvent.__proto__ || Object.getPrototypeOf(PublishBroadcastEvent)).apply(this, arguments));\n  }\n\n  _createClass(PublishBroadcastEvent, [{\n    key: \'handle\',\n    value: function handle(msg) {\n      this.context._api.publishBroadcast(msg, \'facebook\');\n    }\n  }]);\n\n  return PublishBroadcastEvent;\n}(_PublicEvent3.default);\n\nexports.default = PublishBroadcastEvent;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTEwLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3NyYy9ldmVudHMvUHVibGlzaEJyb2FkY2FzdEV2ZW50LmpzP2MxNjciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFB1YmxpY0V2ZW50IGZyb20gJy4vUHVibGljRXZlbnQnO1xuXG5jbGFzcyBQdWJsaXNoQnJvYWRjYXN0RXZlbnQgZXh0ZW5kcyBQdWJsaWNFdmVudCB7XG4gIGhhbmRsZShtc2cpIHtcbiAgICB0aGlzLmNvbnRleHQuX2FwaS5wdWJsaXNoQnJvYWRjYXN0KG1zZywgJ2ZhY2Vib29rJyk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUHVibGlzaEJyb2FkY2FzdEV2ZW50O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNyYy9ldmVudHMvUHVibGlzaEJyb2FkY2FzdEV2ZW50LmpzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBO0FBQ0E7Ozs7Ozs7Ozs7O0FBQ0E7Ozs7Ozs7Ozs7O0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUFHQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///110\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _PublicEvent2 = __webpack_require__(/*! ./PublicEvent */ 2);\n\nvar _PublicEvent3 = _interopRequireDefault(_PublicEvent2);\n\nvar _ComApi = __webpack_require__(/*! ../ComApi */ 20);\n\nvar _ComApi2 = _interopRequireDefault(_ComApi);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * Request a user from guest token.\n **/\nvar RequestGuestUserEvent = function (_PublicEvent) {\n  _inherits(RequestGuestUserEvent, _PublicEvent);\n\n  function RequestGuestUserEvent() {\n    _classCallCheck(this, RequestGuestUserEvent);\n\n    return _possibleConstructorReturn(this, (RequestGuestUserEvent.__proto__ || Object.getPrototypeOf(RequestGuestUserEvent)).apply(this, arguments));\n  }\n\n  _createClass(RequestGuestUserEvent, [{\n    key: \'handle\',\n    value: function handle(msg) {\n      var _this2 = this;\n\n      return new _ComApi2.default(msg.api, msg.token).requestUser({ name: msg.name, email: msg.email }, function (response) {\n        if (!response.access_key) {\n          _get(RequestGuestUserEvent.prototype.__proto__ || Object.getPrototypeOf(RequestGuestUserEvent.prototype), \'handle\', _this2).call(_this2, { type: \'error\', content: \'Request guest user failed\' });\n          return;\n        }\n        _get(RequestGuestUserEvent.prototype.__proto__ || Object.getPrototypeOf(RequestGuestUserEvent.prototype), \'handle\', _this2).call(_this2, { type: \'guest_user\', token: response.access_key });\n      });\n    }\n  }]);\n\n  return RequestGuestUserEvent;\n}(_PublicEvent3.default);\n\nexports.default = RequestGuestUserEvent;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTExLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3NyYy9ldmVudHMvUmVxdWVzdEd1ZXN0VXNlckV2ZW50LmpzP2Q5M2EiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFB1YmxpY0V2ZW50IGZyb20gJy4vUHVibGljRXZlbnQnO1xuaW1wb3J0IENvbUFwaSAgICAgIGZyb20gJy4uL0NvbUFwaSc7XG5cbi8qKlxuICogUmVxdWVzdCBhIHVzZXIgZnJvbSBndWVzdCB0b2tlbi5cbiAqKi9cbmNsYXNzIFJlcXVlc3RHdWVzdFVzZXJFdmVudCBleHRlbmRzIFB1YmxpY0V2ZW50IHtcbiAgaGFuZGxlKG1zZykge1xuICAgIHJldHVybiAobmV3IENvbUFwaShtc2cuYXBpLCBtc2cudG9rZW4pKVxuICAgICAgLnJlcXVlc3RVc2VyKHsgbmFtZTogbXNnLm5hbWUsIGVtYWlsOiBtc2cuZW1haWwgfSwgcmVzcG9uc2UgPT4ge1xuICAgICAgICBpZiAoIXJlc3BvbnNlLmFjY2Vzc19rZXkpIHtcbiAgICAgICAgICBzdXBlci5oYW5kbGUoeyB0eXBlOiAnZXJyb3InLCBjb250ZW50OiAnUmVxdWVzdCBndWVzdCB1c2VyIGZhaWxlZCcgfSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHN1cGVyLmhhbmRsZSh7IHR5cGU6ICdndWVzdF91c2VyJywgdG9rZW46IHJlc3BvbnNlLmFjY2Vzc19rZXkgfSk7XG4gICAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBSZXF1ZXN0R3Vlc3RVc2VyRXZlbnQ7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc3JjL2V2ZW50cy9SZXF1ZXN0R3Vlc3RVc2VyRXZlbnQuanMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7Ozs7Ozs7OztBQUNBOzs7QUFHQTs7Ozs7Ozs7Ozs7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUFHQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///111\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _Logger = __webpack_require__(/*! ./../Logger */ 0);\n\nvar _Logger2 = _interopRequireDefault(_Logger);\n\nvar _PublicEvent2 = __webpack_require__(/*! ./PublicEvent */ 2);\n\nvar _PublicEvent3 = _interopRequireDefault(_PublicEvent2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * eyeson Handle Stream Offer Event\n *\n * Update our remote description, create an answer and resolve with new sdp.\n * Also register a cb for when the new remote stream is available.\n **/\nvar HandleStreamOfferEvent = function (_PublicEvent) {\n  _inherits(HandleStreamOfferEvent, _PublicEvent);\n\n  function HandleStreamOfferEvent() {\n    _classCallCheck(this, HandleStreamOfferEvent);\n\n    return _possibleConstructorReturn(this, (HandleStreamOfferEvent.__proto__ || Object.getPrototypeOf(HandleStreamOfferEvent)).apply(this, arguments));\n  }\n\n  _createClass(HandleStreamOfferEvent, [{\n    key: \'handle\',\n    value: function handle(msg) {\n      var _this2 = this;\n\n      var pc = this.context._session.session.sessionDescriptionHandler.peerConnection;\n      // NOTE: Deprecated in FF, use addTrack instead.\n      // Since we\'re not receiving offers atm though, this is not important.\n      pc.onaddstream = function (event) {\n        _get(HandleStreamOfferEvent.prototype.__proto__ || Object.getPrototypeOf(HandleStreamOfferEvent.prototype), \'handle\', _this2).call(_this2, { type: \'stream_update\', stream: event.stream });\n      };\n      new Promise(function (resolve, reject) {\n        pc.setRemoteDescription(new RTCSessionDescription(msg.sdp)).then(function (answer) {\n          return pc.createAnswer(answer);\n        }).then(function (answer) {\n          return pc.setLocalDescription(answer);\n        }).then(function () {\n          return resolve(pc.localDescription);\n        }).catch(function (error) {\n          return reject(error);\n        });\n      }).then(function (sdp) {\n        return _this2.context.send({ type: \'stream_answer\', sdp: sdp });\n      }).catch(function (error) {\n        return _Logger2.default.error(error);\n      });\n    }\n  }]);\n\n  return HandleStreamOfferEvent;\n}(_PublicEvent3.default);\n\nexports.default = HandleStreamOfferEvent;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTEyLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3NyYy9ldmVudHMvSGFuZGxlU3RyZWFtT2ZmZXJFdmVudC5qcz85Zjg5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBMb2dnZXIgICAgICBmcm9tICcuLy4uL0xvZ2dlcic7XG5pbXBvcnQgUHVibGljRXZlbnQgZnJvbSAnLi9QdWJsaWNFdmVudCc7XG5cbi8qKlxuICogZXllc29uIEhhbmRsZSBTdHJlYW0gT2ZmZXIgRXZlbnRcbiAqXG4gKiBVcGRhdGUgb3VyIHJlbW90ZSBkZXNjcmlwdGlvbiwgY3JlYXRlIGFuIGFuc3dlciBhbmQgcmVzb2x2ZSB3aXRoIG5ldyBzZHAuXG4gKiBBbHNvIHJlZ2lzdGVyIGEgY2IgZm9yIHdoZW4gdGhlIG5ldyByZW1vdGUgc3RyZWFtIGlzIGF2YWlsYWJsZS5cbiAqKi9cbmNsYXNzIEhhbmRsZVN0cmVhbU9mZmVyRXZlbnQgZXh0ZW5kcyBQdWJsaWNFdmVudCB7XG4gIGhhbmRsZShtc2cpIHtcbiAgICBjb25zdCBwYyA9IHRoaXMuY29udGV4dC5fc2Vzc2lvbi5zZXNzaW9uXG4gICAgICAuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlci5wZWVyQ29ubmVjdGlvbjtcbiAgICAvLyBOT1RFOiBEZXByZWNhdGVkIGluIEZGLCB1c2UgYWRkVHJhY2sgaW5zdGVhZC5cbiAgICAvLyBTaW5jZSB3ZSdyZSBub3QgcmVjZWl2aW5nIG9mZmVycyBhdG0gdGhvdWdoLCB0aGlzIGlzIG5vdCBpbXBvcnRhbnQuXG4gICAgcGMub25hZGRzdHJlYW0gPSBldmVudCA9PiB7XG4gICAgICBzdXBlci5oYW5kbGUoeyB0eXBlOiAnc3RyZWFtX3VwZGF0ZScsIHN0cmVhbTogZXZlbnQuc3RyZWFtIH0pO1xuICAgIH07XG4gICAgKG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHBjLnNldFJlbW90ZURlc2NyaXB0aW9uKG5ldyBSVENTZXNzaW9uRGVzY3JpcHRpb24obXNnLnNkcCkpXG4gICAgICAgIC50aGVuKGFuc3dlciA9PiBwYy5jcmVhdGVBbnN3ZXIoYW5zd2VyKSlcbiAgICAgICAgLnRoZW4oYW5zd2VyID0+IHBjLnNldExvY2FsRGVzY3JpcHRpb24oYW5zd2VyKSlcbiAgICAgICAgLnRoZW4oKCkgICAgID0+IHJlc29sdmUocGMubG9jYWxEZXNjcmlwdGlvbikpXG4gICAgICAgIC5jYXRjaChlcnJvciA9PiByZWplY3QoZXJyb3IpKTtcbiAgICB9KSlcbiAgICAgIC50aGVuKHNkcCA9PiB0aGlzLmNvbnRleHQuc2VuZCh7IHR5cGU6ICdzdHJlYW1fYW5zd2VyJywgc2RwOiBzZHAgfSkpXG4gICAgICAuY2F0Y2goZXJyb3IgPT4gTG9nZ2VyLmVycm9yKGVycm9yKSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgSGFuZGxlU3RyZWFtT2ZmZXJFdmVudDtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBzcmMvZXZlbnRzL0hhbmRsZVN0cmVhbU9mZmVyRXZlbnQuanMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7Ozs7Ozs7OztBQUNBOzs7Ozs7QUFNQTs7Ozs7Ozs7Ozs7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTs7Ozs7O0FBR0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///112\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Logger = __webpack_require__(/*! ./../Logger */ 0);\n\nvar _Logger2 = _interopRequireDefault(_Logger);\n\nvar _BaseEvent2 = __webpack_require__(/*! ./BaseEvent */ 1);\n\nvar _BaseEvent3 = _interopRequireDefault(_BaseEvent2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * eyeson Handle Stream Answer Event\n *\n * Update our remote description with provided answer.\n **/\nvar HandleStreamAnswerEvent = function (_BaseEvent) {\n  _inherits(HandleStreamAnswerEvent, _BaseEvent);\n\n  function HandleStreamAnswerEvent() {\n    _classCallCheck(this, HandleStreamAnswerEvent);\n\n    return _possibleConstructorReturn(this, (HandleStreamAnswerEvent.__proto__ || Object.getPrototypeOf(HandleStreamAnswerEvent)).apply(this, arguments));\n  }\n\n  _createClass(HandleStreamAnswerEvent, [{\n    key: \'handle\',\n    value: function handle(msg) {\n      var pc = this.context._session.session.sessionDescriptionHandler.peerConnection;\n      pc.setRemoteDescription(new RTCSessionDescription(msg.sdp)).then(_Logger2.default.debug(\'ConferenceSession::handleStreamAnswer\')).catch(function (error) {\n        return _Logger2.default.error(error);\n      });\n    }\n  }]);\n\n  return HandleStreamAnswerEvent;\n}(_BaseEvent3.default);\n\nexports.default = HandleStreamAnswerEvent;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTEzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3NyYy9ldmVudHMvSGFuZGxlU3RyZWFtQW5zd2VyRXZlbnQuanM/MjUzOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTG9nZ2VyICAgIGZyb20gJy4vLi4vTG9nZ2VyJztcbmltcG9ydCBCYXNlRXZlbnQgZnJvbSAnLi9CYXNlRXZlbnQnO1xuXG4vKipcbiAqIGV5ZXNvbiBIYW5kbGUgU3RyZWFtIEFuc3dlciBFdmVudFxuICpcbiAqIFVwZGF0ZSBvdXIgcmVtb3RlIGRlc2NyaXB0aW9uIHdpdGggcHJvdmlkZWQgYW5zd2VyLlxuICoqL1xuY2xhc3MgSGFuZGxlU3RyZWFtQW5zd2VyRXZlbnQgZXh0ZW5kcyBCYXNlRXZlbnQge1xuICBoYW5kbGUobXNnKSB7XG4gICAgY29uc3QgcGMgPSB0aGlzLmNvbnRleHQuX3Nlc3Npb24uc2Vzc2lvblxuICAgICAgLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIucGVlckNvbm5lY3Rpb247XG4gICAgcGMuc2V0UmVtb3RlRGVzY3JpcHRpb24obmV3IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbihtc2cuc2RwKSlcbiAgICAgIC50aGVuKExvZ2dlci5kZWJ1ZygnQ29uZmVyZW5jZVNlc3Npb246OmhhbmRsZVN0cmVhbUFuc3dlcicpKVxuICAgICAgLmNhdGNoKGVycm9yID0+IExvZ2dlci5lcnJvcihlcnJvcikpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEhhbmRsZVN0cmVhbUFuc3dlckV2ZW50O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNyYy9ldmVudHMvSGFuZGxlU3RyZWFtQW5zd2VyRXZlbnQuanMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7Ozs7Ozs7Ozs7QUFDQTs7Ozs7QUFLQTs7Ozs7Ozs7Ozs7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUFBO0FBQ0E7Ozs7OztBQUdBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///113\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _BaseEvent2 = __webpack_require__(/*! ./BaseEvent */ 1);\n\nvar _BaseEvent3 = _interopRequireDefault(_BaseEvent2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * Ater user selected a window/screen (message.streamId) from the extension\n * picker, we are ready to start the screen capture.\n *\n * Note: The handler will invoke the updateStream action (with the new\n * stream) once the stream is available. That\'s why don\'t make a state change\n * here.\n **/\nvar ReceiveScreenCaptureEvent = function (_BaseEvent) {\n  _inherits(ReceiveScreenCaptureEvent, _BaseEvent);\n\n  function ReceiveScreenCaptureEvent() {\n    _classCallCheck(this, ReceiveScreenCaptureEvent);\n\n    return _possibleConstructorReturn(this, (ReceiveScreenCaptureEvent.__proto__ || Object.getPrototypeOf(ReceiveScreenCaptureEvent)).apply(this, arguments));\n  }\n\n  _createClass(ReceiveScreenCaptureEvent, [{\n    key: \'handle\',\n    value: function handle(msg) {\n      this.context.captureSession.start(msg.streamId);\n    }\n  }]);\n\n  return ReceiveScreenCaptureEvent;\n}(_BaseEvent3.default);\n\nexports.default = ReceiveScreenCaptureEvent;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTE0LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3NyYy9ldmVudHMvUmVjZWl2ZVNjcmVlbkNhcHR1cmVFdmVudC5qcz9hMTZlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBCYXNlRXZlbnQgZnJvbSAnLi9CYXNlRXZlbnQnO1xuXG4vKipcbiAqIEF0ZXIgdXNlciBzZWxlY3RlZCBhIHdpbmRvdy9zY3JlZW4gKG1lc3NhZ2Uuc3RyZWFtSWQpIGZyb20gdGhlIGV4dGVuc2lvblxuICogcGlja2VyLCB3ZSBhcmUgcmVhZHkgdG8gc3RhcnQgdGhlIHNjcmVlbiBjYXB0dXJlLlxuICpcbiAqIE5vdGU6IFRoZSBoYW5kbGVyIHdpbGwgaW52b2tlIHRoZSB1cGRhdGVTdHJlYW0gYWN0aW9uICh3aXRoIHRoZSBuZXdcbiAqIHN0cmVhbSkgb25jZSB0aGUgc3RyZWFtIGlzIGF2YWlsYWJsZS4gVGhhdCdzIHdoeSBkb24ndCBtYWtlIGEgc3RhdGUgY2hhbmdlXG4gKiBoZXJlLlxuICoqL1xuY2xhc3MgUmVjZWl2ZVNjcmVlbkNhcHR1cmVFdmVudCBleHRlbmRzIEJhc2VFdmVudCB7XG4gIGhhbmRsZShtc2cpIHtcbiAgICB0aGlzLmNvbnRleHQuY2FwdHVyZVNlc3Npb24uc3RhcnQobXNnLnN0cmVhbUlkKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBSZWNlaXZlU2NyZWVuQ2FwdHVyZUV2ZW50O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNyYy9ldmVudHMvUmVjZWl2ZVNjcmVlbkNhcHR1cmVFdmVudC5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUNBOzs7Ozs7Ozs7OztBQUNBOzs7Ozs7OztBQVFBOzs7Ozs7Ozs7OztBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FBR0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///114\n')},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Logger = __webpack_require__(/*! ./../Logger */ 0);\n\nvar _Logger2 = _interopRequireDefault(_Logger);\n\nvar _BaseEvent2 = __webpack_require__(/*! ./BaseEvent */ 1);\n\nvar _BaseEvent3 = _interopRequireDefault(_BaseEvent2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * We handle participants list update is separated in two actions: one to\n * add, one to remove. In order to keep it easy to handle, the user data is\n * fetched from api (or later received via websocket). Not to mess with\n * comApi current handling, we keep it here for a while.\n **/\nvar ParticipantListUpdateEvent = function (_BaseEvent) {\n  _inherits(ParticipantListUpdateEvent, _BaseEvent);\n\n  function ParticipantListUpdateEvent(context) {\n    _classCallCheck(this, ParticipantListUpdateEvent);\n\n    var _this = _possibleConstructorReturn(this, (ParticipantListUpdateEvent.__proto__ || Object.getPrototypeOf(ParticipantListUpdateEvent)).call(this, context));\n\n    _this.getUser = _this.getUser.bind(_this);\n    return _this;\n  }\n\n  _createClass(ParticipantListUpdateEvent, [{\n    key: 'getUser',\n    value: function getUser(id) {\n      var _this2 = this;\n\n      return new Promise(function (resolve, reject) {\n        try {\n          _this2.context._api.getUser(id, resolve);\n        } catch (error) {\n          reject(error);\n        }\n      });\n    }\n  }, {\n    key: 'handle',\n    value: function handle(msg) {\n      var _this3 = this;\n\n      (msg.add || []).forEach(function (user, idx, add) {\n        var id = user.cid.split('@').shift();\n\n        var initial = Boolean(add.find(function (addition) {\n          return addition.cid === _this3.context._connection.user.uri;\n        }));\n\n        _this3.getUser(id).then(function (apiUser) {\n          _this3.context.send({ type: 'add_user', user: apiUser, initial: initial });\n        }).catch(function (error) {\n          return _Logger2.default.error(error);\n        });\n      });\n      (msg.del || []).forEach(function (user) {\n        var id = user.split('@').shift();\n\n        _this3.getUser(id).then(function (apiUser) {\n          _this3.context.send({ type: 'remove_user', userId: id, user: apiUser });\n        }).catch(function (error) {\n          return _Logger2.default.error(error);\n        });\n      });\n      this.context.send({ type: 'playback_update', playing: msg.media || [] });\n    }\n  }]);\n\n  return ParticipantListUpdateEvent;\n}(_BaseEvent3.default);\n\nexports.default = ParticipantListUpdateEvent;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTE1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3NyYy9ldmVudHMvUGFydGljaXBhbnRMaXN0VXBkYXRlRXZlbnQuanM/ODVlMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTG9nZ2VyICAgIGZyb20gJy4vLi4vTG9nZ2VyJztcbmltcG9ydCBCYXNlRXZlbnQgZnJvbSAnLi9CYXNlRXZlbnQnO1xuXG4vKipcbiAqIFdlIGhhbmRsZSBwYXJ0aWNpcGFudHMgbGlzdCB1cGRhdGUgaXMgc2VwYXJhdGVkIGluIHR3byBhY3Rpb25zOiBvbmUgdG9cbiAqIGFkZCwgb25lIHRvIHJlbW92ZS4gSW4gb3JkZXIgdG8ga2VlcCBpdCBlYXN5IHRvIGhhbmRsZSwgdGhlIHVzZXIgZGF0YSBpc1xuICogZmV0Y2hlZCBmcm9tIGFwaSAob3IgbGF0ZXIgcmVjZWl2ZWQgdmlhIHdlYnNvY2tldCkuIE5vdCB0byBtZXNzIHdpdGhcbiAqIGNvbUFwaSBjdXJyZW50IGhhbmRsaW5nLCB3ZSBrZWVwIGl0IGhlcmUgZm9yIGEgd2hpbGUuXG4gKiovXG5jbGFzcyBQYXJ0aWNpcGFudExpc3RVcGRhdGVFdmVudCBleHRlbmRzIEJhc2VFdmVudCB7XG4gIGNvbnN0cnVjdG9yKGNvbnRleHQpIHtcbiAgICBzdXBlcihjb250ZXh0KTtcbiAgICB0aGlzLmdldFVzZXIgPSB0aGlzLmdldFVzZXIuYmluZCh0aGlzKTtcbiAgfVxuXG4gIGdldFVzZXIoaWQpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdGhpcy5jb250ZXh0Ll9hcGkuZ2V0VXNlcihpZCwgcmVzb2x2ZSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgaGFuZGxlKG1zZykge1xuICAgIChtc2cuYWRkIHx8IFtdKS5mb3JFYWNoKCh1c2VyLCBpZHgsIGFkZCkgPT4ge1xuICAgICAgY29uc3QgaWQgPSB1c2VyLmNpZC5zcGxpdCgnQCcpLnNoaWZ0KCk7XG5cbiAgICAgIGNvbnN0IGluaXRpYWwgPSBCb29sZWFuKGFkZC5maW5kKGFkZGl0aW9uID0+IHtcbiAgICAgICAgcmV0dXJuIGFkZGl0aW9uLmNpZCA9PT0gdGhpcy5jb250ZXh0Ll9jb25uZWN0aW9uLnVzZXIudXJpXG4gICAgICB9KSk7XG5cbiAgICAgIHRoaXMuZ2V0VXNlcihpZClcbiAgICAgICAgLnRoZW4oYXBpVXNlciA9PiB7XG4gICAgICAgICAgdGhpcy5jb250ZXh0LnNlbmQoeyB0eXBlOiAnYWRkX3VzZXInLCB1c2VyOiBhcGlVc2VyLCBpbml0aWFsOiBpbml0aWFsIH0pO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goZXJyb3IgPT4gTG9nZ2VyLmVycm9yKGVycm9yKSk7XG4gICAgfSk7XG4gICAgKG1zZy5kZWwgfHwgW10pLmZvckVhY2godXNlciA9PiB7XG4gICAgICBjb25zdCBpZCA9IHVzZXIuc3BsaXQoJ0AnKS5zaGlmdCgpO1xuXG4gICAgICB0aGlzLmdldFVzZXIoaWQpXG4gICAgICAgIC50aGVuKGFwaVVzZXIgPT4ge1xuICAgICAgICAgIHRoaXMuY29udGV4dC5zZW5kKHsgdHlwZTogJ3JlbW92ZV91c2VyJywgdXNlcklkOiBpZCwgdXNlcjogYXBpVXNlciB9KTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKGVycm9yID0+IExvZ2dlci5lcnJvcihlcnJvcikpO1xuICAgIH0pO1xuICAgIHRoaXMuY29udGV4dC5zZW5kKHsgdHlwZTogJ3BsYXliYWNrX3VwZGF0ZScsIHBsYXlpbmc6IG1zZy5tZWRpYSB8fCBbXSB9KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQYXJ0aWNpcGFudExpc3RVcGRhdGVFdmVudDtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBzcmMvZXZlbnRzL1BhcnRpY2lwYW50TGlzdFVwZGF0ZUV2ZW50LmpzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7Ozs7Ozs7Ozs7O0FBQ0E7Ozs7OztBQU1BOzs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFGQTtBQUdBO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FBR0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///115\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Logger = __webpack_require__(/*! ./Logger */ 0);\n\nvar _Logger2 = _interopRequireDefault(_Logger);\n\nvar _actioncable = __webpack_require__(/*! actioncable */ 117);\n\nvar _actioncable2 = _interopRequireDefault(_actioncable);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * eyeson WSS Connection.\n *\n * Registers with provided token and room.\n **/\nvar WssConnection = function () {\n  function WssConnection(uri) {\n    _classCallCheck(this, WssConnection);\n\n    this.onMessageHandler = null;\n\n    this.onReceived = this.onReceived.bind(this);\n    this.offMessage = this.offMessage.bind(this);\n    this.onConnected = this.onConnected.bind(this);\n    this.startSession = this.startSession.bind(this);\n    this.onDisconnected = this.onDisconnected.bind(this);\n\n    this.cable = _actioncable2.default.createConsumer(uri);\n    _Logger2.default.debug('WssConnection::constructor');\n  }\n\n  /**\n   * Start a session on current connection.\n   **/\n\n\n  _createClass(WssConnection, [{\n    key: 'startSession',\n    value: function startSession() {\n      this.cable.subscriptions.create({ channel: 'RoomChannel' }, {\n        connected: this.onConnected,\n        received: this.onReceived,\n        disconnected: this.onDisconnected\n      });\n      this.cable.subscriptions.create({ channel: 'UserChannel' }, { received: this.onReceived });\n    }\n  }, {\n    key: 'onConnected',\n    value: function onConnected() {\n      if (this.disconnectTimestamp) {\n        this.handleReconnect();\n      }\n      _Logger2.default.debug('WssConnection::onConnected');\n    }\n  }, {\n    key: 'handleReconnect',\n    value: function handleReconnect() {\n      this.onMessageHandler({ type: 'reconnect' });\n    }\n  }, {\n    key: 'onReceived',\n    value: function onReceived(msg) {\n      _Logger2.default.debug('WssConnection::onReceived', msg);\n      msg._src = 'ws';\n      this.onMessageHandler(msg);\n    }\n  }, {\n    key: 'onDisconnected',\n    value: function onDisconnected() {\n      _Logger2.default.debug('WssConnection::onDisconnected');\n      this.disconnectTimestamp = Date.now();\n      this.onMessageHandler({ type: 'disconnect' });\n    }\n  }, {\n    key: 'onMessage',\n    value: function onMessage(onMessageHandler) {\n      this.onMessageHandler = onMessageHandler;\n    }\n  }, {\n    key: 'offMessage',\n    value: function offMessage() {\n      this.onMessageHandler = function (msg) {\n        _Logger2.default.debug('WssConnection::defaultMessageHandler: ', msg);\n      };\n    }\n\n    /**\n     * msg has the format { channel: 'xyz', message: 'abc' }\n     **/\n\n  }, {\n    key: 'send',\n    value: function send(_ref) {\n      var _ref$channel = _ref.channel,\n          channel = _ref$channel === undefined ? 'RoomChannel' : _ref$channel,\n          _ref$message = _ref.message,\n          message = _ref$message === undefined ? 'ping' : _ref$message;\n\n      var subscription = this.cable.subscriptions.subscriptions.find(function (sub) {\n        return sub.identifier === '{\"channel\":\"' + channel + '\"}';\n      });\n\n      if (!subscription) {\n        _Logger2.default.debug('WssConnection::send no subscription found for ', channel);\n        return;\n      }\n\n      subscription.perform(message, { message: message });\n    }\n  }, {\n    key: 'close',\n    value: function close() {\n      this.offMessage();\n      this.onDisconnected();\n    }\n  }]);\n\n  return WssConnection;\n}();\n\nexports.default = WssConnection;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTE2LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3NyYy9Xc3NDb25uZWN0aW9uLmpzP2VhMTkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IExvZ2dlciBmcm9tICcuL0xvZ2dlcic7XG5pbXBvcnQgQWN0aW9uQ2FibGUgZnJvbSAnYWN0aW9uY2FibGUnO1xuXG4vKipcbiAqIGV5ZXNvbiBXU1MgQ29ubmVjdGlvbi5cbiAqXG4gKiBSZWdpc3RlcnMgd2l0aCBwcm92aWRlZCB0b2tlbiBhbmQgcm9vbS5cbiAqKi9cbmNsYXNzIFdzc0Nvbm5lY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih1cmkpIHtcbiAgICB0aGlzLm9uTWVzc2FnZUhhbmRsZXIgPSBudWxsO1xuXG4gICAgdGhpcy5vblJlY2VpdmVkID0gdGhpcy5vblJlY2VpdmVkLmJpbmQodGhpcyk7XG4gICAgdGhpcy5vZmZNZXNzYWdlID0gdGhpcy5vZmZNZXNzYWdlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5vbkNvbm5lY3RlZCA9IHRoaXMub25Db25uZWN0ZWQuYmluZCh0aGlzKTtcbiAgICB0aGlzLnN0YXJ0U2Vzc2lvbiA9IHRoaXMuc3RhcnRTZXNzaW9uLmJpbmQodGhpcyk7XG4gICAgdGhpcy5vbkRpc2Nvbm5lY3RlZCA9IHRoaXMub25EaXNjb25uZWN0ZWQuYmluZCh0aGlzKTtcblxuICAgIHRoaXMuY2FibGUgPSBBY3Rpb25DYWJsZS5jcmVhdGVDb25zdW1lcih1cmkpO1xuICAgIExvZ2dlci5kZWJ1ZygnV3NzQ29ubmVjdGlvbjo6Y29uc3RydWN0b3InKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdGFydCBhIHNlc3Npb24gb24gY3VycmVudCBjb25uZWN0aW9uLlxuICAgKiovXG4gIHN0YXJ0U2Vzc2lvbigpIHtcbiAgICB0aGlzLmNhYmxlLnN1YnNjcmlwdGlvbnMuY3JlYXRlKFxuICAgICAgeyBjaGFubmVsOiAnUm9vbUNoYW5uZWwnIH0sXG4gICAgICB7XG4gICAgICAgIGNvbm5lY3RlZDogdGhpcy5vbkNvbm5lY3RlZCxcbiAgICAgICAgcmVjZWl2ZWQ6IHRoaXMub25SZWNlaXZlZCxcbiAgICAgICAgZGlzY29ubmVjdGVkOiB0aGlzLm9uRGlzY29ubmVjdGVkXG4gICAgICB9XG4gICAgKTtcbiAgICB0aGlzLmNhYmxlLnN1YnNjcmlwdGlvbnMuY3JlYXRlKFxuICAgICAgeyBjaGFubmVsOiAnVXNlckNoYW5uZWwnIH0sXG4gICAgICB7IHJlY2VpdmVkOiB0aGlzLm9uUmVjZWl2ZWQgfVxuICAgICk7XG4gIH1cblxuICBvbkNvbm5lY3RlZCgpIHtcbiAgICBpZiAodGhpcy5kaXNjb25uZWN0VGltZXN0YW1wKSB7XG4gICAgICB0aGlzLmhhbmRsZVJlY29ubmVjdCgpO1xuICAgIH1cbiAgICBMb2dnZXIuZGVidWcoJ1dzc0Nvbm5lY3Rpb246Om9uQ29ubmVjdGVkJyk7XG4gIH1cblxuICBoYW5kbGVSZWNvbm5lY3QoKSB7XG4gICAgdGhpcy5vbk1lc3NhZ2VIYW5kbGVyKHsgdHlwZTogJ3JlY29ubmVjdCcgfSk7XG4gIH1cblxuICBvblJlY2VpdmVkKG1zZykge1xuICAgIExvZ2dlci5kZWJ1ZygnV3NzQ29ubmVjdGlvbjo6b25SZWNlaXZlZCcsIG1zZyk7XG4gICAgbXNnLl9zcmMgPSAnd3MnO1xuICAgIHRoaXMub25NZXNzYWdlSGFuZGxlcihtc2cpO1xuICB9XG5cbiAgb25EaXNjb25uZWN0ZWQoKSB7XG4gICAgTG9nZ2VyLmRlYnVnKCdXc3NDb25uZWN0aW9uOjpvbkRpc2Nvbm5lY3RlZCcpO1xuICAgIHRoaXMuZGlzY29ubmVjdFRpbWVzdGFtcCA9IERhdGUubm93KCk7XG4gICAgdGhpcy5vbk1lc3NhZ2VIYW5kbGVyKHsgdHlwZTogJ2Rpc2Nvbm5lY3QnIH0pO1xuICB9XG5cbiAgb25NZXNzYWdlKG9uTWVzc2FnZUhhbmRsZXIpIHtcbiAgICB0aGlzLm9uTWVzc2FnZUhhbmRsZXIgPSBvbk1lc3NhZ2VIYW5kbGVyO1xuICB9XG5cbiAgb2ZmTWVzc2FnZSgpIHtcbiAgICB0aGlzLm9uTWVzc2FnZUhhbmRsZXIgPSBtc2cgPT4ge1xuICAgICAgTG9nZ2VyLmRlYnVnKCdXc3NDb25uZWN0aW9uOjpkZWZhdWx0TWVzc2FnZUhhbmRsZXI6ICcsIG1zZyk7XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBtc2cgaGFzIHRoZSBmb3JtYXQgeyBjaGFubmVsOiAneHl6JywgbWVzc2FnZTogJ2FiYycgfVxuICAgKiovXG4gIHNlbmQoeyBjaGFubmVsOiBjaGFubmVsID0gJ1Jvb21DaGFubmVsJywgbWVzc2FnZTogbWVzc2FnZSA9ICdwaW5nJyB9KSB7XG4gICAgY29uc3Qgc3Vic2NyaXB0aW9uID0gdGhpcy5jYWJsZS5zdWJzY3JpcHRpb25zLnN1YnNjcmlwdGlvbnMuZmluZChcbiAgICAgIHN1YiA9PiBzdWIuaWRlbnRpZmllciA9PT0gJ3tcImNoYW5uZWxcIjpcIicgKyBjaGFubmVsICsgJ1wifSdcbiAgICApO1xuXG4gICAgaWYgKCFzdWJzY3JpcHRpb24pIHtcbiAgICAgIExvZ2dlci5kZWJ1ZygnV3NzQ29ubmVjdGlvbjo6c2VuZCBubyBzdWJzY3JpcHRpb24gZm91bmQgZm9yICcsIGNoYW5uZWwpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHN1YnNjcmlwdGlvbi5wZXJmb3JtKG1lc3NhZ2UsIHsgbWVzc2FnZTogbWVzc2FnZSB9KTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMub2ZmTWVzc2FnZSgpO1xuICAgIHRoaXMub25EaXNjb25uZWN0ZWQoKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBXc3NDb25uZWN0aW9uO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNyYy9Xc3NDb25uZWN0aW9uLmpzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7Ozs7Ozs7QUFDQTs7Ozs7QUFLQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7O0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUhBO0FBTUE7QUFJQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQUdBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUFHQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///116\n")},function(module,exports,__webpack_require__){eval('var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__;(function() {\n  var context = this;\n\n  (function() {\n    (function() {\n      var slice = [].slice;\n\n      this.ActionCable = {\n        INTERNAL: {\n          "message_types": {\n            "welcome": "welcome",\n            "ping": "ping",\n            "confirmation": "confirm_subscription",\n            "rejection": "reject_subscription"\n          },\n          "default_mount_path": "/cable",\n          "protocols": ["actioncable-v1-json", "actioncable-unsupported"]\n        },\n        WebSocket: window.WebSocket,\n        logger: window.console,\n        createConsumer: function(url) {\n          var ref;\n          if (url == null) {\n            url = (ref = this.getConfig("url")) != null ? ref : this.INTERNAL.default_mount_path;\n          }\n          return new ActionCable.Consumer(this.createWebSocketURL(url));\n        },\n        getConfig: function(name) {\n          var element;\n          element = document.head.querySelector("meta[name=\'action-cable-" + name + "\']");\n          return element != null ? element.getAttribute("content") : void 0;\n        },\n        createWebSocketURL: function(url) {\n          var a;\n          if (url && !/^wss?:/i.test(url)) {\n            a = document.createElement("a");\n            a.href = url;\n            a.href = a.href;\n            a.protocol = a.protocol.replace("http", "ws");\n            return a.href;\n          } else {\n            return url;\n          }\n        },\n        startDebugging: function() {\n          return this.debugging = true;\n        },\n        stopDebugging: function() {\n          return this.debugging = null;\n        },\n        log: function() {\n          var messages, ref;\n          messages = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n          if (this.debugging) {\n            messages.push(Date.now());\n            return (ref = this.logger).log.apply(ref, ["[ActionCable]"].concat(slice.call(messages)));\n          }\n        }\n      };\n\n    }).call(this);\n  }).call(context);\n\n  var ActionCable = context.ActionCable;\n\n  (function() {\n    (function() {\n      var bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\n      ActionCable.ConnectionMonitor = (function() {\n        var clamp, now, secondsSince;\n\n        ConnectionMonitor.pollInterval = {\n          min: 3,\n          max: 30\n        };\n\n        ConnectionMonitor.staleThreshold = 6;\n\n        function ConnectionMonitor(connection) {\n          this.connection = connection;\n          this.visibilityDidChange = bind(this.visibilityDidChange, this);\n          this.reconnectAttempts = 0;\n        }\n\n        ConnectionMonitor.prototype.start = function() {\n          if (!this.isRunning()) {\n            this.startedAt = now();\n            delete this.stoppedAt;\n            this.startPolling();\n            document.addEventListener("visibilitychange", this.visibilityDidChange);\n            return ActionCable.log("ConnectionMonitor started. pollInterval = " + (this.getPollInterval()) + " ms");\n          }\n        };\n\n        ConnectionMonitor.prototype.stop = function() {\n          if (this.isRunning()) {\n            this.stoppedAt = now();\n            this.stopPolling();\n            document.removeEventListener("visibilitychange", this.visibilityDidChange);\n            return ActionCable.log("ConnectionMonitor stopped");\n          }\n        };\n\n        ConnectionMonitor.prototype.isRunning = function() {\n          return (this.startedAt != null) && (this.stoppedAt == null);\n        };\n\n        ConnectionMonitor.prototype.recordPing = function() {\n          return this.pingedAt = now();\n        };\n\n        ConnectionMonitor.prototype.recordConnect = function() {\n          this.reconnectAttempts = 0;\n          this.recordPing();\n          delete this.disconnectedAt;\n          return ActionCable.log("ConnectionMonitor recorded connect");\n        };\n\n        ConnectionMonitor.prototype.recordDisconnect = function() {\n          this.disconnectedAt = now();\n          return ActionCable.log("ConnectionMonitor recorded disconnect");\n        };\n\n        ConnectionMonitor.prototype.startPolling = function() {\n          this.stopPolling();\n          return this.poll();\n        };\n\n        ConnectionMonitor.prototype.stopPolling = function() {\n          return clearTimeout(this.pollTimeout);\n        };\n\n        ConnectionMonitor.prototype.poll = function() {\n          return this.pollTimeout = setTimeout((function(_this) {\n            return function() {\n              _this.reconnectIfStale();\n              return _this.poll();\n            };\n          })(this), this.getPollInterval());\n        };\n\n        ConnectionMonitor.prototype.getPollInterval = function() {\n          var interval, max, min, ref;\n          ref = this.constructor.pollInterval, min = ref.min, max = ref.max;\n          interval = 5 * Math.log(this.reconnectAttempts + 1);\n          return Math.round(clamp(interval, min, max) * 1000);\n        };\n\n        ConnectionMonitor.prototype.reconnectIfStale = function() {\n          if (this.connectionIsStale()) {\n            ActionCable.log("ConnectionMonitor detected stale connection. reconnectAttempts = " + this.reconnectAttempts + ", pollInterval = " + (this.getPollInterval()) + " ms, time disconnected = " + (secondsSince(this.disconnectedAt)) + " s, stale threshold = " + this.constructor.staleThreshold + " s");\n            this.reconnectAttempts++;\n            if (this.disconnectedRecently()) {\n              return ActionCable.log("ConnectionMonitor skipping reopening recent disconnect");\n            } else {\n              ActionCable.log("ConnectionMonitor reopening");\n              return this.connection.reopen();\n            }\n          }\n        };\n\n        ConnectionMonitor.prototype.connectionIsStale = function() {\n          var ref;\n          return secondsSince((ref = this.pingedAt) != null ? ref : this.startedAt) > this.constructor.staleThreshold;\n        };\n\n        ConnectionMonitor.prototype.disconnectedRecently = function() {\n          return this.disconnectedAt && secondsSince(this.disconnectedAt) < this.constructor.staleThreshold;\n        };\n\n        ConnectionMonitor.prototype.visibilityDidChange = function() {\n          if (document.visibilityState === "visible") {\n            return setTimeout((function(_this) {\n              return function() {\n                if (_this.connectionIsStale() || !_this.connection.isOpen()) {\n                  ActionCable.log("ConnectionMonitor reopening stale connection on visibilitychange. visbilityState = " + document.visibilityState);\n                  return _this.connection.reopen();\n                }\n              };\n            })(this), 200);\n          }\n        };\n\n        now = function() {\n          return new Date().getTime();\n        };\n\n        secondsSince = function(time) {\n          return (now() - time) / 1000;\n        };\n\n        clamp = function(number, min, max) {\n          return Math.max(min, Math.min(max, number));\n        };\n\n        return ConnectionMonitor;\n\n      })();\n\n    }).call(this);\n    (function() {\n      var i, message_types, protocols, ref, supportedProtocols, unsupportedProtocol,\n        slice = [].slice,\n        bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n        indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\n      ref = ActionCable.INTERNAL, message_types = ref.message_types, protocols = ref.protocols;\n\n      supportedProtocols = 2 <= protocols.length ? slice.call(protocols, 0, i = protocols.length - 1) : (i = 0, []), unsupportedProtocol = protocols[i++];\n\n      ActionCable.Connection = (function() {\n        Connection.reopenDelay = 500;\n\n        function Connection(consumer) {\n          this.consumer = consumer;\n          this.open = bind(this.open, this);\n          this.subscriptions = this.consumer.subscriptions;\n          this.monitor = new ActionCable.ConnectionMonitor(this);\n          this.disconnected = true;\n        }\n\n        Connection.prototype.send = function(data) {\n          if (this.isOpen()) {\n            this.webSocket.send(JSON.stringify(data));\n            return true;\n          } else {\n            return false;\n          }\n        };\n\n        Connection.prototype.open = function() {\n          if (this.isActive()) {\n            ActionCable.log("Attempted to open WebSocket, but existing socket is " + (this.getState()));\n            return false;\n          } else {\n            ActionCable.log("Opening WebSocket, current state is " + (this.getState()) + ", subprotocols: " + protocols);\n            if (this.webSocket != null) {\n              this.uninstallEventHandlers();\n            }\n            this.webSocket = new ActionCable.WebSocket(this.consumer.url, protocols);\n            this.installEventHandlers();\n            this.monitor.start();\n            return true;\n          }\n        };\n\n        Connection.prototype.close = function(arg) {\n          var allowReconnect, ref1;\n          allowReconnect = (arg != null ? arg : {\n            allowReconnect: true\n          }).allowReconnect;\n          if (!allowReconnect) {\n            this.monitor.stop();\n          }\n          if (this.isActive()) {\n            return (ref1 = this.webSocket) != null ? ref1.close() : void 0;\n          }\n        };\n\n        Connection.prototype.reopen = function() {\n          var error;\n          ActionCable.log("Reopening WebSocket, current state is " + (this.getState()));\n          if (this.isActive()) {\n            try {\n              return this.close();\n            } catch (error1) {\n              error = error1;\n              return ActionCable.log("Failed to reopen WebSocket", error);\n            } finally {\n              ActionCable.log("Reopening WebSocket in " + this.constructor.reopenDelay + "ms");\n              setTimeout(this.open, this.constructor.reopenDelay);\n            }\n          } else {\n            return this.open();\n          }\n        };\n\n        Connection.prototype.getProtocol = function() {\n          var ref1;\n          return (ref1 = this.webSocket) != null ? ref1.protocol : void 0;\n        };\n\n        Connection.prototype.isOpen = function() {\n          return this.isState("open");\n        };\n\n        Connection.prototype.isActive = function() {\n          return this.isState("open", "connecting");\n        };\n\n        Connection.prototype.isProtocolSupported = function() {\n          var ref1;\n          return ref1 = this.getProtocol(), indexOf.call(supportedProtocols, ref1) >= 0;\n        };\n\n        Connection.prototype.isState = function() {\n          var ref1, states;\n          states = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n          return ref1 = this.getState(), indexOf.call(states, ref1) >= 0;\n        };\n\n        Connection.prototype.getState = function() {\n          var ref1, state, value;\n          for (state in WebSocket) {\n            value = WebSocket[state];\n            if (value === ((ref1 = this.webSocket) != null ? ref1.readyState : void 0)) {\n              return state.toLowerCase();\n            }\n          }\n          return null;\n        };\n\n        Connection.prototype.installEventHandlers = function() {\n          var eventName, handler;\n          for (eventName in this.events) {\n            handler = this.events[eventName].bind(this);\n            this.webSocket["on" + eventName] = handler;\n          }\n        };\n\n        Connection.prototype.uninstallEventHandlers = function() {\n          var eventName;\n          for (eventName in this.events) {\n            this.webSocket["on" + eventName] = function() {};\n          }\n        };\n\n        Connection.prototype.events = {\n          message: function(event) {\n            var identifier, message, ref1, type;\n            if (!this.isProtocolSupported()) {\n              return;\n            }\n            ref1 = JSON.parse(event.data), identifier = ref1.identifier, message = ref1.message, type = ref1.type;\n            switch (type) {\n              case message_types.welcome:\n                this.monitor.recordConnect();\n                return this.subscriptions.reload();\n              case message_types.ping:\n                return this.monitor.recordPing();\n              case message_types.confirmation:\n                return this.subscriptions.notify(identifier, "connected");\n              case message_types.rejection:\n                return this.subscriptions.reject(identifier);\n              default:\n                return this.subscriptions.notify(identifier, "received", message);\n            }\n          },\n          open: function() {\n            ActionCable.log("WebSocket onopen event, using \'" + (this.getProtocol()) + "\' subprotocol");\n            this.disconnected = false;\n            if (!this.isProtocolSupported()) {\n              ActionCable.log("Protocol is unsupported. Stopping monitor and disconnecting.");\n              return this.close({\n                allowReconnect: false\n              });\n            }\n          },\n          close: function(event) {\n            ActionCable.log("WebSocket onclose event");\n            if (this.disconnected) {\n              return;\n            }\n            this.disconnected = true;\n            this.monitor.recordDisconnect();\n            return this.subscriptions.notifyAll("disconnected", {\n              willAttemptReconnect: this.monitor.isRunning()\n            });\n          },\n          error: function() {\n            return ActionCable.log("WebSocket onerror event");\n          }\n        };\n\n        return Connection;\n\n      })();\n\n    }).call(this);\n    (function() {\n      var slice = [].slice;\n\n      ActionCable.Subscriptions = (function() {\n        function Subscriptions(consumer) {\n          this.consumer = consumer;\n          this.subscriptions = [];\n        }\n\n        Subscriptions.prototype.create = function(channelName, mixin) {\n          var channel, params, subscription;\n          channel = channelName;\n          params = typeof channel === "object" ? channel : {\n            channel: channel\n          };\n          subscription = new ActionCable.Subscription(this.consumer, params, mixin);\n          return this.add(subscription);\n        };\n\n        Subscriptions.prototype.add = function(subscription) {\n          this.subscriptions.push(subscription);\n          this.consumer.ensureActiveConnection();\n          this.notify(subscription, "initialized");\n          this.sendCommand(subscription, "subscribe");\n          return subscription;\n        };\n\n        Subscriptions.prototype.remove = function(subscription) {\n          this.forget(subscription);\n          if (!this.findAll(subscription.identifier).length) {\n            this.sendCommand(subscription, "unsubscribe");\n          }\n          return subscription;\n        };\n\n        Subscriptions.prototype.reject = function(identifier) {\n          var i, len, ref, results, subscription;\n          ref = this.findAll(identifier);\n          results = [];\n          for (i = 0, len = ref.length; i < len; i++) {\n            subscription = ref[i];\n            this.forget(subscription);\n            this.notify(subscription, "rejected");\n            results.push(subscription);\n          }\n          return results;\n        };\n\n        Subscriptions.prototype.forget = function(subscription) {\n          var s;\n          this.subscriptions = (function() {\n            var i, len, ref, results;\n            ref = this.subscriptions;\n            results = [];\n            for (i = 0, len = ref.length; i < len; i++) {\n              s = ref[i];\n              if (s !== subscription) {\n                results.push(s);\n              }\n            }\n            return results;\n          }).call(this);\n          return subscription;\n        };\n\n        Subscriptions.prototype.findAll = function(identifier) {\n          var i, len, ref, results, s;\n          ref = this.subscriptions;\n          results = [];\n          for (i = 0, len = ref.length; i < len; i++) {\n            s = ref[i];\n            if (s.identifier === identifier) {\n              results.push(s);\n            }\n          }\n          return results;\n        };\n\n        Subscriptions.prototype.reload = function() {\n          var i, len, ref, results, subscription;\n          ref = this.subscriptions;\n          results = [];\n          for (i = 0, len = ref.length; i < len; i++) {\n            subscription = ref[i];\n            results.push(this.sendCommand(subscription, "subscribe"));\n          }\n          return results;\n        };\n\n        Subscriptions.prototype.notifyAll = function() {\n          var args, callbackName, i, len, ref, results, subscription;\n          callbackName = arguments[0], args = 2 <= arguments.length ? slice.call(arguments, 1) : [];\n          ref = this.subscriptions;\n          results = [];\n          for (i = 0, len = ref.length; i < len; i++) {\n            subscription = ref[i];\n            results.push(this.notify.apply(this, [subscription, callbackName].concat(slice.call(args))));\n          }\n          return results;\n        };\n\n        Subscriptions.prototype.notify = function() {\n          var args, callbackName, i, len, results, subscription, subscriptions;\n          subscription = arguments[0], callbackName = arguments[1], args = 3 <= arguments.length ? slice.call(arguments, 2) : [];\n          if (typeof subscription === "string") {\n            subscriptions = this.findAll(subscription);\n          } else {\n            subscriptions = [subscription];\n          }\n          results = [];\n          for (i = 0, len = subscriptions.length; i < len; i++) {\n            subscription = subscriptions[i];\n            results.push(typeof subscription[callbackName] === "function" ? subscription[callbackName].apply(subscription, args) : void 0);\n          }\n          return results;\n        };\n\n        Subscriptions.prototype.sendCommand = function(subscription, command) {\n          var identifier;\n          identifier = subscription.identifier;\n          return this.consumer.send({\n            command: command,\n            identifier: identifier\n          });\n        };\n\n        return Subscriptions;\n\n      })();\n\n    }).call(this);\n    (function() {\n      ActionCable.Subscription = (function() {\n        var extend;\n\n        function Subscription(consumer, params, mixin) {\n          this.consumer = consumer;\n          if (params == null) {\n            params = {};\n          }\n          this.identifier = JSON.stringify(params);\n          extend(this, mixin);\n        }\n\n        Subscription.prototype.perform = function(action, data) {\n          if (data == null) {\n            data = {};\n          }\n          data.action = action;\n          return this.send(data);\n        };\n\n        Subscription.prototype.send = function(data) {\n          return this.consumer.send({\n            command: "message",\n            identifier: this.identifier,\n            data: JSON.stringify(data)\n          });\n        };\n\n        Subscription.prototype.unsubscribe = function() {\n          return this.consumer.subscriptions.remove(this);\n        };\n\n        extend = function(object, properties) {\n          var key, value;\n          if (properties != null) {\n            for (key in properties) {\n              value = properties[key];\n              object[key] = value;\n            }\n          }\n          return object;\n        };\n\n        return Subscription;\n\n      })();\n\n    }).call(this);\n    (function() {\n      ActionCable.Consumer = (function() {\n        function Consumer(url) {\n          this.url = url;\n          this.subscriptions = new ActionCable.Subscriptions(this);\n          this.connection = new ActionCable.Connection(this);\n        }\n\n        Consumer.prototype.send = function(data) {\n          return this.connection.send(data);\n        };\n\n        Consumer.prototype.connect = function() {\n          return this.connection.open();\n        };\n\n        Consumer.prototype.disconnect = function() {\n          return this.connection.close({\n            allowReconnect: false\n          });\n        };\n\n        Consumer.prototype.ensureActiveConnection = function() {\n          if (!this.connection.isActive()) {\n            return this.connection.open();\n          }\n        };\n\n        return Consumer;\n\n      })();\n\n    }).call(this);\n  }).call(this);\n\n  if (typeof module === "object" && module.exports) {\n    module.exports = ActionCable;\n  } else if (true) {\n    !(__WEBPACK_AMD_DEFINE_FACTORY__ = (ActionCable),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === \'function\' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.call(exports, __webpack_require__, exports, module)) :\n\t\t\t\t__WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  }\n}).call(this);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTE3LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2FjdGlvbmNhYmxlL2xpYi9hc3NldHMvY29tcGlsZWQvYWN0aW9uX2NhYmxlLmpzP2U2MzUiXSwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCkge1xuICB2YXIgY29udGV4dCA9IHRoaXM7XG5cbiAgKGZ1bmN0aW9uKCkge1xuICAgIChmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzbGljZSA9IFtdLnNsaWNlO1xuXG4gICAgICB0aGlzLkFjdGlvbkNhYmxlID0ge1xuICAgICAgICBJTlRFUk5BTDoge1xuICAgICAgICAgIFwibWVzc2FnZV90eXBlc1wiOiB7XG4gICAgICAgICAgICBcIndlbGNvbWVcIjogXCJ3ZWxjb21lXCIsXG4gICAgICAgICAgICBcInBpbmdcIjogXCJwaW5nXCIsXG4gICAgICAgICAgICBcImNvbmZpcm1hdGlvblwiOiBcImNvbmZpcm1fc3Vic2NyaXB0aW9uXCIsXG4gICAgICAgICAgICBcInJlamVjdGlvblwiOiBcInJlamVjdF9zdWJzY3JpcHRpb25cIlxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJkZWZhdWx0X21vdW50X3BhdGhcIjogXCIvY2FibGVcIixcbiAgICAgICAgICBcInByb3RvY29sc1wiOiBbXCJhY3Rpb25jYWJsZS12MS1qc29uXCIsIFwiYWN0aW9uY2FibGUtdW5zdXBwb3J0ZWRcIl1cbiAgICAgICAgfSxcbiAgICAgICAgV2ViU29ja2V0OiB3aW5kb3cuV2ViU29ja2V0LFxuICAgICAgICBsb2dnZXI6IHdpbmRvdy5jb25zb2xlLFxuICAgICAgICBjcmVhdGVDb25zdW1lcjogZnVuY3Rpb24odXJsKSB7XG4gICAgICAgICAgdmFyIHJlZjtcbiAgICAgICAgICBpZiAodXJsID09IG51bGwpIHtcbiAgICAgICAgICAgIHVybCA9IChyZWYgPSB0aGlzLmdldENvbmZpZyhcInVybFwiKSkgIT0gbnVsbCA/IHJlZiA6IHRoaXMuSU5URVJOQUwuZGVmYXVsdF9tb3VudF9wYXRoO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gbmV3IEFjdGlvbkNhYmxlLkNvbnN1bWVyKHRoaXMuY3JlYXRlV2ViU29ja2V0VVJMKHVybCkpO1xuICAgICAgICB9LFxuICAgICAgICBnZXRDb25maWc6IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgICAgICB2YXIgZWxlbWVudDtcbiAgICAgICAgICBlbGVtZW50ID0gZG9jdW1lbnQuaGVhZC5xdWVyeVNlbGVjdG9yKFwibWV0YVtuYW1lPSdhY3Rpb24tY2FibGUtXCIgKyBuYW1lICsgXCInXVwiKTtcbiAgICAgICAgICByZXR1cm4gZWxlbWVudCAhPSBudWxsID8gZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJjb250ZW50XCIpIDogdm9pZCAwO1xuICAgICAgICB9LFxuICAgICAgICBjcmVhdGVXZWJTb2NrZXRVUkw6IGZ1bmN0aW9uKHVybCkge1xuICAgICAgICAgIHZhciBhO1xuICAgICAgICAgIGlmICh1cmwgJiYgIS9ed3NzPzovaS50ZXN0KHVybCkpIHtcbiAgICAgICAgICAgIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcbiAgICAgICAgICAgIGEuaHJlZiA9IHVybDtcbiAgICAgICAgICAgIGEuaHJlZiA9IGEuaHJlZjtcbiAgICAgICAgICAgIGEucHJvdG9jb2wgPSBhLnByb3RvY29sLnJlcGxhY2UoXCJodHRwXCIsIFwid3NcIik7XG4gICAgICAgICAgICByZXR1cm4gYS5ocmVmO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdXJsO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgc3RhcnREZWJ1Z2dpbmc6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiB0aGlzLmRlYnVnZ2luZyA9IHRydWU7XG4gICAgICAgIH0sXG4gICAgICAgIHN0b3BEZWJ1Z2dpbmc6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiB0aGlzLmRlYnVnZ2luZyA9IG51bGw7XG4gICAgICAgIH0sXG4gICAgICAgIGxvZzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIG1lc3NhZ2VzLCByZWY7XG4gICAgICAgICAgbWVzc2FnZXMgPSAxIDw9IGFyZ3VtZW50cy5sZW5ndGggPyBzbGljZS5jYWxsKGFyZ3VtZW50cywgMCkgOiBbXTtcbiAgICAgICAgICBpZiAodGhpcy5kZWJ1Z2dpbmcpIHtcbiAgICAgICAgICAgIG1lc3NhZ2VzLnB1c2goRGF0ZS5ub3coKSk7XG4gICAgICAgICAgICByZXR1cm4gKHJlZiA9IHRoaXMubG9nZ2VyKS5sb2cuYXBwbHkocmVmLCBbXCJbQWN0aW9uQ2FibGVdXCJdLmNvbmNhdChzbGljZS5jYWxsKG1lc3NhZ2VzKSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgIH0pLmNhbGwodGhpcyk7XG4gIH0pLmNhbGwoY29udGV4dCk7XG5cbiAgdmFyIEFjdGlvbkNhYmxlID0gY29udGV4dC5BY3Rpb25DYWJsZTtcblxuICAoZnVuY3Rpb24oKSB7XG4gICAgKGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGJpbmQgPSBmdW5jdGlvbihmbiwgbWUpeyByZXR1cm4gZnVuY3Rpb24oKXsgcmV0dXJuIGZuLmFwcGx5KG1lLCBhcmd1bWVudHMpOyB9OyB9O1xuXG4gICAgICBBY3Rpb25DYWJsZS5Db25uZWN0aW9uTW9uaXRvciA9IChmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGNsYW1wLCBub3csIHNlY29uZHNTaW5jZTtcblxuICAgICAgICBDb25uZWN0aW9uTW9uaXRvci5wb2xsSW50ZXJ2YWwgPSB7XG4gICAgICAgICAgbWluOiAzLFxuICAgICAgICAgIG1heDogMzBcbiAgICAgICAgfTtcblxuICAgICAgICBDb25uZWN0aW9uTW9uaXRvci5zdGFsZVRocmVzaG9sZCA9IDY7XG5cbiAgICAgICAgZnVuY3Rpb24gQ29ubmVjdGlvbk1vbml0b3IoY29ubmVjdGlvbikge1xuICAgICAgICAgIHRoaXMuY29ubmVjdGlvbiA9IGNvbm5lY3Rpb247XG4gICAgICAgICAgdGhpcy52aXNpYmlsaXR5RGlkQ2hhbmdlID0gYmluZCh0aGlzLnZpc2liaWxpdHlEaWRDaGFuZ2UsIHRoaXMpO1xuICAgICAgICAgIHRoaXMucmVjb25uZWN0QXR0ZW1wdHMgPSAwO1xuICAgICAgICB9XG5cbiAgICAgICAgQ29ubmVjdGlvbk1vbml0b3IucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgaWYgKCF0aGlzLmlzUnVubmluZygpKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0ZWRBdCA9IG5vdygpO1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMuc3RvcHBlZEF0O1xuICAgICAgICAgICAgdGhpcy5zdGFydFBvbGxpbmcoKTtcbiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsIHRoaXMudmlzaWJpbGl0eURpZENoYW5nZSk7XG4gICAgICAgICAgICByZXR1cm4gQWN0aW9uQ2FibGUubG9nKFwiQ29ubmVjdGlvbk1vbml0b3Igc3RhcnRlZC4gcG9sbEludGVydmFsID0gXCIgKyAodGhpcy5nZXRQb2xsSW50ZXJ2YWwoKSkgKyBcIiBtc1wiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgQ29ubmVjdGlvbk1vbml0b3IucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICBpZiAodGhpcy5pc1J1bm5pbmcoKSkge1xuICAgICAgICAgICAgdGhpcy5zdG9wcGVkQXQgPSBub3coKTtcbiAgICAgICAgICAgIHRoaXMuc3RvcFBvbGxpbmcoKTtcbiAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsIHRoaXMudmlzaWJpbGl0eURpZENoYW5nZSk7XG4gICAgICAgICAgICByZXR1cm4gQWN0aW9uQ2FibGUubG9nKFwiQ29ubmVjdGlvbk1vbml0b3Igc3RvcHBlZFwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgQ29ubmVjdGlvbk1vbml0b3IucHJvdG90eXBlLmlzUnVubmluZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiAodGhpcy5zdGFydGVkQXQgIT0gbnVsbCkgJiYgKHRoaXMuc3RvcHBlZEF0ID09IG51bGwpO1xuICAgICAgICB9O1xuXG4gICAgICAgIENvbm5lY3Rpb25Nb25pdG9yLnByb3RvdHlwZS5yZWNvcmRQaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMucGluZ2VkQXQgPSBub3coKTtcbiAgICAgICAgfTtcblxuICAgICAgICBDb25uZWN0aW9uTW9uaXRvci5wcm90b3R5cGUucmVjb3JkQ29ubmVjdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHRoaXMucmVjb25uZWN0QXR0ZW1wdHMgPSAwO1xuICAgICAgICAgIHRoaXMucmVjb3JkUGluZygpO1xuICAgICAgICAgIGRlbGV0ZSB0aGlzLmRpc2Nvbm5lY3RlZEF0O1xuICAgICAgICAgIHJldHVybiBBY3Rpb25DYWJsZS5sb2coXCJDb25uZWN0aW9uTW9uaXRvciByZWNvcmRlZCBjb25uZWN0XCIpO1xuICAgICAgICB9O1xuXG4gICAgICAgIENvbm5lY3Rpb25Nb25pdG9yLnByb3RvdHlwZS5yZWNvcmREaXNjb25uZWN0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdGhpcy5kaXNjb25uZWN0ZWRBdCA9IG5vdygpO1xuICAgICAgICAgIHJldHVybiBBY3Rpb25DYWJsZS5sb2coXCJDb25uZWN0aW9uTW9uaXRvciByZWNvcmRlZCBkaXNjb25uZWN0XCIpO1xuICAgICAgICB9O1xuXG4gICAgICAgIENvbm5lY3Rpb25Nb25pdG9yLnByb3RvdHlwZS5zdGFydFBvbGxpbmcgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICB0aGlzLnN0b3BQb2xsaW5nKCk7XG4gICAgICAgICAgcmV0dXJuIHRoaXMucG9sbCgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIENvbm5lY3Rpb25Nb25pdG9yLnByb3RvdHlwZS5zdG9wUG9sbGluZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQodGhpcy5wb2xsVGltZW91dCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgQ29ubmVjdGlvbk1vbml0b3IucHJvdG90eXBlLnBvbGwgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5wb2xsVGltZW91dCA9IHNldFRpbWVvdXQoKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIF90aGlzLnJlY29ubmVjdElmU3RhbGUoKTtcbiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnBvbGwoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSkodGhpcyksIHRoaXMuZ2V0UG9sbEludGVydmFsKCkpO1xuICAgICAgICB9O1xuXG4gICAgICAgIENvbm5lY3Rpb25Nb25pdG9yLnByb3RvdHlwZS5nZXRQb2xsSW50ZXJ2YWwgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgaW50ZXJ2YWwsIG1heCwgbWluLCByZWY7XG4gICAgICAgICAgcmVmID0gdGhpcy5jb25zdHJ1Y3Rvci5wb2xsSW50ZXJ2YWwsIG1pbiA9IHJlZi5taW4sIG1heCA9IHJlZi5tYXg7XG4gICAgICAgICAgaW50ZXJ2YWwgPSA1ICogTWF0aC5sb2codGhpcy5yZWNvbm5lY3RBdHRlbXB0cyArIDEpO1xuICAgICAgICAgIHJldHVybiBNYXRoLnJvdW5kKGNsYW1wKGludGVydmFsLCBtaW4sIG1heCkgKiAxMDAwKTtcbiAgICAgICAgfTtcblxuICAgICAgICBDb25uZWN0aW9uTW9uaXRvci5wcm90b3R5cGUucmVjb25uZWN0SWZTdGFsZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmICh0aGlzLmNvbm5lY3Rpb25Jc1N0YWxlKCkpIHtcbiAgICAgICAgICAgIEFjdGlvbkNhYmxlLmxvZyhcIkNvbm5lY3Rpb25Nb25pdG9yIGRldGVjdGVkIHN0YWxlIGNvbm5lY3Rpb24uIHJlY29ubmVjdEF0dGVtcHRzID0gXCIgKyB0aGlzLnJlY29ubmVjdEF0dGVtcHRzICsgXCIsIHBvbGxJbnRlcnZhbCA9IFwiICsgKHRoaXMuZ2V0UG9sbEludGVydmFsKCkpICsgXCIgbXMsIHRpbWUgZGlzY29ubmVjdGVkID0gXCIgKyAoc2Vjb25kc1NpbmNlKHRoaXMuZGlzY29ubmVjdGVkQXQpKSArIFwiIHMsIHN0YWxlIHRocmVzaG9sZCA9IFwiICsgdGhpcy5jb25zdHJ1Y3Rvci5zdGFsZVRocmVzaG9sZCArIFwiIHNcIik7XG4gICAgICAgICAgICB0aGlzLnJlY29ubmVjdEF0dGVtcHRzKys7XG4gICAgICAgICAgICBpZiAodGhpcy5kaXNjb25uZWN0ZWRSZWNlbnRseSgpKSB7XG4gICAgICAgICAgICAgIHJldHVybiBBY3Rpb25DYWJsZS5sb2coXCJDb25uZWN0aW9uTW9uaXRvciBza2lwcGluZyByZW9wZW5pbmcgcmVjZW50IGRpc2Nvbm5lY3RcIik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBBY3Rpb25DYWJsZS5sb2coXCJDb25uZWN0aW9uTW9uaXRvciByZW9wZW5pbmdcIik7XG4gICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb24ucmVvcGVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIENvbm5lY3Rpb25Nb25pdG9yLnByb3RvdHlwZS5jb25uZWN0aW9uSXNTdGFsZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciByZWY7XG4gICAgICAgICAgcmV0dXJuIHNlY29uZHNTaW5jZSgocmVmID0gdGhpcy5waW5nZWRBdCkgIT0gbnVsbCA/IHJlZiA6IHRoaXMuc3RhcnRlZEF0KSA+IHRoaXMuY29uc3RydWN0b3Iuc3RhbGVUaHJlc2hvbGQ7XG4gICAgICAgIH07XG5cbiAgICAgICAgQ29ubmVjdGlvbk1vbml0b3IucHJvdG90eXBlLmRpc2Nvbm5lY3RlZFJlY2VudGx5ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuZGlzY29ubmVjdGVkQXQgJiYgc2Vjb25kc1NpbmNlKHRoaXMuZGlzY29ubmVjdGVkQXQpIDwgdGhpcy5jb25zdHJ1Y3Rvci5zdGFsZVRocmVzaG9sZDtcbiAgICAgICAgfTtcblxuICAgICAgICBDb25uZWN0aW9uTW9uaXRvci5wcm90b3R5cGUudmlzaWJpbGl0eURpZENoYW5nZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmIChkb2N1bWVudC52aXNpYmlsaXR5U3RhdGUgPT09IFwidmlzaWJsZVwiKSB7XG4gICAgICAgICAgICByZXR1cm4gc2V0VGltZW91dCgoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5jb25uZWN0aW9uSXNTdGFsZSgpIHx8ICFfdGhpcy5jb25uZWN0aW9uLmlzT3BlbigpKSB7XG4gICAgICAgICAgICAgICAgICBBY3Rpb25DYWJsZS5sb2coXCJDb25uZWN0aW9uTW9uaXRvciByZW9wZW5pbmcgc3RhbGUgY29ubmVjdGlvbiBvbiB2aXNpYmlsaXR5Y2hhbmdlLiB2aXNiaWxpdHlTdGF0ZSA9IFwiICsgZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlKTtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5jb25uZWN0aW9uLnJlb3BlbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pKHRoaXMpLCAyMDApO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBub3cgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgc2Vjb25kc1NpbmNlID0gZnVuY3Rpb24odGltZSkge1xuICAgICAgICAgIHJldHVybiAobm93KCkgLSB0aW1lKSAvIDEwMDA7XG4gICAgICAgIH07XG5cbiAgICAgICAgY2xhbXAgPSBmdW5jdGlvbihudW1iZXIsIG1pbiwgbWF4KSB7XG4gICAgICAgICAgcmV0dXJuIE1hdGgubWF4KG1pbiwgTWF0aC5taW4obWF4LCBudW1iZXIpKTtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gQ29ubmVjdGlvbk1vbml0b3I7XG5cbiAgICAgIH0pKCk7XG5cbiAgICB9KS5jYWxsKHRoaXMpO1xuICAgIChmdW5jdGlvbigpIHtcbiAgICAgIHZhciBpLCBtZXNzYWdlX3R5cGVzLCBwcm90b2NvbHMsIHJlZiwgc3VwcG9ydGVkUHJvdG9jb2xzLCB1bnN1cHBvcnRlZFByb3RvY29sLFxuICAgICAgICBzbGljZSA9IFtdLnNsaWNlLFxuICAgICAgICBiaW5kID0gZnVuY3Rpb24oZm4sIG1lKXsgcmV0dXJuIGZ1bmN0aW9uKCl7IHJldHVybiBmbi5hcHBseShtZSwgYXJndW1lbnRzKTsgfTsgfSxcbiAgICAgICAgaW5kZXhPZiA9IFtdLmluZGV4T2YgfHwgZnVuY3Rpb24oaXRlbSkgeyBmb3IgKHZhciBpID0gMCwgbCA9IHRoaXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7IGlmIChpIGluIHRoaXMgJiYgdGhpc1tpXSA9PT0gaXRlbSkgcmV0dXJuIGk7IH0gcmV0dXJuIC0xOyB9O1xuXG4gICAgICByZWYgPSBBY3Rpb25DYWJsZS5JTlRFUk5BTCwgbWVzc2FnZV90eXBlcyA9IHJlZi5tZXNzYWdlX3R5cGVzLCBwcm90b2NvbHMgPSByZWYucHJvdG9jb2xzO1xuXG4gICAgICBzdXBwb3J0ZWRQcm90b2NvbHMgPSAyIDw9IHByb3RvY29scy5sZW5ndGggPyBzbGljZS5jYWxsKHByb3RvY29scywgMCwgaSA9IHByb3RvY29scy5sZW5ndGggLSAxKSA6IChpID0gMCwgW10pLCB1bnN1cHBvcnRlZFByb3RvY29sID0gcHJvdG9jb2xzW2krK107XG5cbiAgICAgIEFjdGlvbkNhYmxlLkNvbm5lY3Rpb24gPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgIENvbm5lY3Rpb24ucmVvcGVuRGVsYXkgPSA1MDA7XG5cbiAgICAgICAgZnVuY3Rpb24gQ29ubmVjdGlvbihjb25zdW1lcikge1xuICAgICAgICAgIHRoaXMuY29uc3VtZXIgPSBjb25zdW1lcjtcbiAgICAgICAgICB0aGlzLm9wZW4gPSBiaW5kKHRoaXMub3BlbiwgdGhpcyk7XG4gICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zID0gdGhpcy5jb25zdW1lci5zdWJzY3JpcHRpb25zO1xuICAgICAgICAgIHRoaXMubW9uaXRvciA9IG5ldyBBY3Rpb25DYWJsZS5Db25uZWN0aW9uTW9uaXRvcih0aGlzKTtcbiAgICAgICAgICB0aGlzLmRpc2Nvbm5lY3RlZCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBDb25uZWN0aW9uLnByb3RvdHlwZS5zZW5kID0gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgIGlmICh0aGlzLmlzT3BlbigpKSB7XG4gICAgICAgICAgICB0aGlzLndlYlNvY2tldC5zZW5kKEpTT04uc3RyaW5naWZ5KGRhdGEpKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIENvbm5lY3Rpb24ucHJvdG90eXBlLm9wZW4gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICBpZiAodGhpcy5pc0FjdGl2ZSgpKSB7XG4gICAgICAgICAgICBBY3Rpb25DYWJsZS5sb2coXCJBdHRlbXB0ZWQgdG8gb3BlbiBXZWJTb2NrZXQsIGJ1dCBleGlzdGluZyBzb2NrZXQgaXMgXCIgKyAodGhpcy5nZXRTdGF0ZSgpKSk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIEFjdGlvbkNhYmxlLmxvZyhcIk9wZW5pbmcgV2ViU29ja2V0LCBjdXJyZW50IHN0YXRlIGlzIFwiICsgKHRoaXMuZ2V0U3RhdGUoKSkgKyBcIiwgc3VicHJvdG9jb2xzOiBcIiArIHByb3RvY29scyk7XG4gICAgICAgICAgICBpZiAodGhpcy53ZWJTb2NrZXQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICB0aGlzLnVuaW5zdGFsbEV2ZW50SGFuZGxlcnMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMud2ViU29ja2V0ID0gbmV3IEFjdGlvbkNhYmxlLldlYlNvY2tldCh0aGlzLmNvbnN1bWVyLnVybCwgcHJvdG9jb2xzKTtcbiAgICAgICAgICAgIHRoaXMuaW5zdGFsbEV2ZW50SGFuZGxlcnMoKTtcbiAgICAgICAgICAgIHRoaXMubW9uaXRvci5zdGFydCgpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIENvbm5lY3Rpb24ucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24oYXJnKSB7XG4gICAgICAgICAgdmFyIGFsbG93UmVjb25uZWN0LCByZWYxO1xuICAgICAgICAgIGFsbG93UmVjb25uZWN0ID0gKGFyZyAhPSBudWxsID8gYXJnIDoge1xuICAgICAgICAgICAgYWxsb3dSZWNvbm5lY3Q6IHRydWVcbiAgICAgICAgICB9KS5hbGxvd1JlY29ubmVjdDtcbiAgICAgICAgICBpZiAoIWFsbG93UmVjb25uZWN0KSB7XG4gICAgICAgICAgICB0aGlzLm1vbml0b3Iuc3RvcCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodGhpcy5pc0FjdGl2ZSgpKSB7XG4gICAgICAgICAgICByZXR1cm4gKHJlZjEgPSB0aGlzLndlYlNvY2tldCkgIT0gbnVsbCA/IHJlZjEuY2xvc2UoKSA6IHZvaWQgMDtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgQ29ubmVjdGlvbi5wcm90b3R5cGUucmVvcGVuID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIGVycm9yO1xuICAgICAgICAgIEFjdGlvbkNhYmxlLmxvZyhcIlJlb3BlbmluZyBXZWJTb2NrZXQsIGN1cnJlbnQgc3RhdGUgaXMgXCIgKyAodGhpcy5nZXRTdGF0ZSgpKSk7XG4gICAgICAgICAgaWYgKHRoaXMuaXNBY3RpdmUoKSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yMSkge1xuICAgICAgICAgICAgICBlcnJvciA9IGVycm9yMTtcbiAgICAgICAgICAgICAgcmV0dXJuIEFjdGlvbkNhYmxlLmxvZyhcIkZhaWxlZCB0byByZW9wZW4gV2ViU29ja2V0XCIsIGVycm9yKTtcbiAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgIEFjdGlvbkNhYmxlLmxvZyhcIlJlb3BlbmluZyBXZWJTb2NrZXQgaW4gXCIgKyB0aGlzLmNvbnN0cnVjdG9yLnJlb3BlbkRlbGF5ICsgXCJtc1wiKTtcbiAgICAgICAgICAgICAgc2V0VGltZW91dCh0aGlzLm9wZW4sIHRoaXMuY29uc3RydWN0b3IucmVvcGVuRGVsYXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vcGVuKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIENvbm5lY3Rpb24ucHJvdG90eXBlLmdldFByb3RvY29sID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIHJlZjE7XG4gICAgICAgICAgcmV0dXJuIChyZWYxID0gdGhpcy53ZWJTb2NrZXQpICE9IG51bGwgPyByZWYxLnByb3RvY29sIDogdm9pZCAwO1xuICAgICAgICB9O1xuXG4gICAgICAgIENvbm5lY3Rpb24ucHJvdG90eXBlLmlzT3BlbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiB0aGlzLmlzU3RhdGUoXCJvcGVuXCIpO1xuICAgICAgICB9O1xuXG4gICAgICAgIENvbm5lY3Rpb24ucHJvdG90eXBlLmlzQWN0aXZlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuaXNTdGF0ZShcIm9wZW5cIiwgXCJjb25uZWN0aW5nXCIpO1xuICAgICAgICB9O1xuXG4gICAgICAgIENvbm5lY3Rpb24ucHJvdG90eXBlLmlzUHJvdG9jb2xTdXBwb3J0ZWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgcmVmMTtcbiAgICAgICAgICByZXR1cm4gcmVmMSA9IHRoaXMuZ2V0UHJvdG9jb2woKSwgaW5kZXhPZi5jYWxsKHN1cHBvcnRlZFByb3RvY29scywgcmVmMSkgPj0gMDtcbiAgICAgICAgfTtcblxuICAgICAgICBDb25uZWN0aW9uLnByb3RvdHlwZS5pc1N0YXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIHJlZjEsIHN0YXRlcztcbiAgICAgICAgICBzdGF0ZXMgPSAxIDw9IGFyZ3VtZW50cy5sZW5ndGggPyBzbGljZS5jYWxsKGFyZ3VtZW50cywgMCkgOiBbXTtcbiAgICAgICAgICByZXR1cm4gcmVmMSA9IHRoaXMuZ2V0U3RhdGUoKSwgaW5kZXhPZi5jYWxsKHN0YXRlcywgcmVmMSkgPj0gMDtcbiAgICAgICAgfTtcblxuICAgICAgICBDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTdGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciByZWYxLCBzdGF0ZSwgdmFsdWU7XG4gICAgICAgICAgZm9yIChzdGF0ZSBpbiBXZWJTb2NrZXQpIHtcbiAgICAgICAgICAgIHZhbHVlID0gV2ViU29ja2V0W3N0YXRlXTtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gKChyZWYxID0gdGhpcy53ZWJTb2NrZXQpICE9IG51bGwgPyByZWYxLnJlYWR5U3RhdGUgOiB2b2lkIDApKSB7XG4gICAgICAgICAgICAgIHJldHVybiBzdGF0ZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfTtcblxuICAgICAgICBDb25uZWN0aW9uLnByb3RvdHlwZS5pbnN0YWxsRXZlbnRIYW5kbGVycyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciBldmVudE5hbWUsIGhhbmRsZXI7XG4gICAgICAgICAgZm9yIChldmVudE5hbWUgaW4gdGhpcy5ldmVudHMpIHtcbiAgICAgICAgICAgIGhhbmRsZXIgPSB0aGlzLmV2ZW50c1tldmVudE5hbWVdLmJpbmQodGhpcyk7XG4gICAgICAgICAgICB0aGlzLndlYlNvY2tldFtcIm9uXCIgKyBldmVudE5hbWVdID0gaGFuZGxlcjtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgQ29ubmVjdGlvbi5wcm90b3R5cGUudW5pbnN0YWxsRXZlbnRIYW5kbGVycyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciBldmVudE5hbWU7XG4gICAgICAgICAgZm9yIChldmVudE5hbWUgaW4gdGhpcy5ldmVudHMpIHtcbiAgICAgICAgICAgIHRoaXMud2ViU29ja2V0W1wib25cIiArIGV2ZW50TmFtZV0gPSBmdW5jdGlvbigpIHt9O1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBDb25uZWN0aW9uLnByb3RvdHlwZS5ldmVudHMgPSB7XG4gICAgICAgICAgbWVzc2FnZTogZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIHZhciBpZGVudGlmaWVyLCBtZXNzYWdlLCByZWYxLCB0eXBlO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzUHJvdG9jb2xTdXBwb3J0ZWQoKSkge1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZWYxID0gSlNPTi5wYXJzZShldmVudC5kYXRhKSwgaWRlbnRpZmllciA9IHJlZjEuaWRlbnRpZmllciwgbWVzc2FnZSA9IHJlZjEubWVzc2FnZSwgdHlwZSA9IHJlZjEudHlwZTtcbiAgICAgICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgICBjYXNlIG1lc3NhZ2VfdHlwZXMud2VsY29tZTpcbiAgICAgICAgICAgICAgICB0aGlzLm1vbml0b3IucmVjb3JkQ29ubmVjdCgpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnN1YnNjcmlwdGlvbnMucmVsb2FkKCk7XG4gICAgICAgICAgICAgIGNhc2UgbWVzc2FnZV90eXBlcy5waW5nOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm1vbml0b3IucmVjb3JkUGluZygpO1xuICAgICAgICAgICAgICBjYXNlIG1lc3NhZ2VfdHlwZXMuY29uZmlybWF0aW9uOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnN1YnNjcmlwdGlvbnMubm90aWZ5KGlkZW50aWZpZXIsIFwiY29ubmVjdGVkXCIpO1xuICAgICAgICAgICAgICBjYXNlIG1lc3NhZ2VfdHlwZXMucmVqZWN0aW9uOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnN1YnNjcmlwdGlvbnMucmVqZWN0KGlkZW50aWZpZXIpO1xuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnN1YnNjcmlwdGlvbnMubm90aWZ5KGlkZW50aWZpZXIsIFwicmVjZWl2ZWRcIiwgbWVzc2FnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBvcGVuOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIEFjdGlvbkNhYmxlLmxvZyhcIldlYlNvY2tldCBvbm9wZW4gZXZlbnQsIHVzaW5nICdcIiArICh0aGlzLmdldFByb3RvY29sKCkpICsgXCInIHN1YnByb3RvY29sXCIpO1xuICAgICAgICAgICAgdGhpcy5kaXNjb25uZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc1Byb3RvY29sU3VwcG9ydGVkKCkpIHtcbiAgICAgICAgICAgICAgQWN0aW9uQ2FibGUubG9nKFwiUHJvdG9jb2wgaXMgdW5zdXBwb3J0ZWQuIFN0b3BwaW5nIG1vbml0b3IgYW5kIGRpc2Nvbm5lY3RpbmcuXCIpO1xuICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jbG9zZSh7XG4gICAgICAgICAgICAgICAgYWxsb3dSZWNvbm5lY3Q6IGZhbHNlXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgY2xvc2U6IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICBBY3Rpb25DYWJsZS5sb2coXCJXZWJTb2NrZXQgb25jbG9zZSBldmVudFwiKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmRpc2Nvbm5lY3RlZCkge1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmRpc2Nvbm5lY3RlZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLm1vbml0b3IucmVjb3JkRGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3Vic2NyaXB0aW9ucy5ub3RpZnlBbGwoXCJkaXNjb25uZWN0ZWRcIiwge1xuICAgICAgICAgICAgICB3aWxsQXR0ZW1wdFJlY29ubmVjdDogdGhpcy5tb25pdG9yLmlzUnVubmluZygpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGVycm9yOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBBY3Rpb25DYWJsZS5sb2coXCJXZWJTb2NrZXQgb25lcnJvciBldmVudFwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIENvbm5lY3Rpb247XG5cbiAgICAgIH0pKCk7XG5cbiAgICB9KS5jYWxsKHRoaXMpO1xuICAgIChmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzbGljZSA9IFtdLnNsaWNlO1xuXG4gICAgICBBY3Rpb25DYWJsZS5TdWJzY3JpcHRpb25zID0gKGZ1bmN0aW9uKCkge1xuICAgICAgICBmdW5jdGlvbiBTdWJzY3JpcHRpb25zKGNvbnN1bWVyKSB7XG4gICAgICAgICAgdGhpcy5jb25zdW1lciA9IGNvbnN1bWVyO1xuICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucyA9IFtdO1xuICAgICAgICB9XG5cbiAgICAgICAgU3Vic2NyaXB0aW9ucy5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24oY2hhbm5lbE5hbWUsIG1peGluKSB7XG4gICAgICAgICAgdmFyIGNoYW5uZWwsIHBhcmFtcywgc3Vic2NyaXB0aW9uO1xuICAgICAgICAgIGNoYW5uZWwgPSBjaGFubmVsTmFtZTtcbiAgICAgICAgICBwYXJhbXMgPSB0eXBlb2YgY2hhbm5lbCA9PT0gXCJvYmplY3RcIiA/IGNoYW5uZWwgOiB7XG4gICAgICAgICAgICBjaGFubmVsOiBjaGFubmVsXG4gICAgICAgICAgfTtcbiAgICAgICAgICBzdWJzY3JpcHRpb24gPSBuZXcgQWN0aW9uQ2FibGUuU3Vic2NyaXB0aW9uKHRoaXMuY29uc3VtZXIsIHBhcmFtcywgbWl4aW4pO1xuICAgICAgICAgIHJldHVybiB0aGlzLmFkZChzdWJzY3JpcHRpb24pO1xuICAgICAgICB9O1xuXG4gICAgICAgIFN1YnNjcmlwdGlvbnMucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uKHN1YnNjcmlwdGlvbikge1xuICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5wdXNoKHN1YnNjcmlwdGlvbik7XG4gICAgICAgICAgdGhpcy5jb25zdW1lci5lbnN1cmVBY3RpdmVDb25uZWN0aW9uKCk7XG4gICAgICAgICAgdGhpcy5ub3RpZnkoc3Vic2NyaXB0aW9uLCBcImluaXRpYWxpemVkXCIpO1xuICAgICAgICAgIHRoaXMuc2VuZENvbW1hbmQoc3Vic2NyaXB0aW9uLCBcInN1YnNjcmliZVwiKTtcbiAgICAgICAgICByZXR1cm4gc3Vic2NyaXB0aW9uO1xuICAgICAgICB9O1xuXG4gICAgICAgIFN1YnNjcmlwdGlvbnMucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uKHN1YnNjcmlwdGlvbikge1xuICAgICAgICAgIHRoaXMuZm9yZ2V0KHN1YnNjcmlwdGlvbik7XG4gICAgICAgICAgaWYgKCF0aGlzLmZpbmRBbGwoc3Vic2NyaXB0aW9uLmlkZW50aWZpZXIpLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5zZW5kQ29tbWFuZChzdWJzY3JpcHRpb24sIFwidW5zdWJzY3JpYmVcIik7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBzdWJzY3JpcHRpb247XG4gICAgICAgIH07XG5cbiAgICAgICAgU3Vic2NyaXB0aW9ucy5wcm90b3R5cGUucmVqZWN0ID0gZnVuY3Rpb24oaWRlbnRpZmllcikge1xuICAgICAgICAgIHZhciBpLCBsZW4sIHJlZiwgcmVzdWx0cywgc3Vic2NyaXB0aW9uO1xuICAgICAgICAgIHJlZiA9IHRoaXMuZmluZEFsbChpZGVudGlmaWVyKTtcbiAgICAgICAgICByZXN1bHRzID0gW107XG4gICAgICAgICAgZm9yIChpID0gMCwgbGVuID0gcmVmLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBzdWJzY3JpcHRpb24gPSByZWZbaV07XG4gICAgICAgICAgICB0aGlzLmZvcmdldChzdWJzY3JpcHRpb24pO1xuICAgICAgICAgICAgdGhpcy5ub3RpZnkoc3Vic2NyaXB0aW9uLCBcInJlamVjdGVkXCIpO1xuICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHN1YnNjcmlwdGlvbik7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgICAgICB9O1xuXG4gICAgICAgIFN1YnNjcmlwdGlvbnMucHJvdG90eXBlLmZvcmdldCA9IGZ1bmN0aW9uKHN1YnNjcmlwdGlvbikge1xuICAgICAgICAgIHZhciBzO1xuICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucyA9IChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBpLCBsZW4sIHJlZiwgcmVzdWx0cztcbiAgICAgICAgICAgIHJlZiA9IHRoaXMuc3Vic2NyaXB0aW9ucztcbiAgICAgICAgICAgIHJlc3VsdHMgPSBbXTtcbiAgICAgICAgICAgIGZvciAoaSA9IDAsIGxlbiA9IHJlZi5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICBzID0gcmVmW2ldO1xuICAgICAgICAgICAgICBpZiAocyAhPT0gc3Vic2NyaXB0aW9uKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHMpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICAgICAgICB9KS5jYWxsKHRoaXMpO1xuICAgICAgICAgIHJldHVybiBzdWJzY3JpcHRpb247XG4gICAgICAgIH07XG5cbiAgICAgICAgU3Vic2NyaXB0aW9ucy5wcm90b3R5cGUuZmluZEFsbCA9IGZ1bmN0aW9uKGlkZW50aWZpZXIpIHtcbiAgICAgICAgICB2YXIgaSwgbGVuLCByZWYsIHJlc3VsdHMsIHM7XG4gICAgICAgICAgcmVmID0gdGhpcy5zdWJzY3JpcHRpb25zO1xuICAgICAgICAgIHJlc3VsdHMgPSBbXTtcbiAgICAgICAgICBmb3IgKGkgPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIHMgPSByZWZbaV07XG4gICAgICAgICAgICBpZiAocy5pZGVudGlmaWVyID09PSBpZGVudGlmaWVyKSB7XG4gICAgICAgICAgICAgIHJlc3VsdHMucHVzaChzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgICAgIH07XG5cbiAgICAgICAgU3Vic2NyaXB0aW9ucy5wcm90b3R5cGUucmVsb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIGksIGxlbiwgcmVmLCByZXN1bHRzLCBzdWJzY3JpcHRpb247XG4gICAgICAgICAgcmVmID0gdGhpcy5zdWJzY3JpcHRpb25zO1xuICAgICAgICAgIHJlc3VsdHMgPSBbXTtcbiAgICAgICAgICBmb3IgKGkgPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIHN1YnNjcmlwdGlvbiA9IHJlZltpXTtcbiAgICAgICAgICAgIHJlc3VsdHMucHVzaCh0aGlzLnNlbmRDb21tYW5kKHN1YnNjcmlwdGlvbiwgXCJzdWJzY3JpYmVcIikpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICAgICAgfTtcblxuICAgICAgICBTdWJzY3JpcHRpb25zLnByb3RvdHlwZS5ub3RpZnlBbGwgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgYXJncywgY2FsbGJhY2tOYW1lLCBpLCBsZW4sIHJlZiwgcmVzdWx0cywgc3Vic2NyaXB0aW9uO1xuICAgICAgICAgIGNhbGxiYWNrTmFtZSA9IGFyZ3VtZW50c1swXSwgYXJncyA9IDIgPD0gYXJndW1lbnRzLmxlbmd0aCA/IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSA6IFtdO1xuICAgICAgICAgIHJlZiA9IHRoaXMuc3Vic2NyaXB0aW9ucztcbiAgICAgICAgICByZXN1bHRzID0gW107XG4gICAgICAgICAgZm9yIChpID0gMCwgbGVuID0gcmVmLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBzdWJzY3JpcHRpb24gPSByZWZbaV07XG4gICAgICAgICAgICByZXN1bHRzLnB1c2godGhpcy5ub3RpZnkuYXBwbHkodGhpcywgW3N1YnNjcmlwdGlvbiwgY2FsbGJhY2tOYW1lXS5jb25jYXQoc2xpY2UuY2FsbChhcmdzKSkpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgICAgIH07XG5cbiAgICAgICAgU3Vic2NyaXB0aW9ucy5wcm90b3R5cGUubm90aWZ5ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIGFyZ3MsIGNhbGxiYWNrTmFtZSwgaSwgbGVuLCByZXN1bHRzLCBzdWJzY3JpcHRpb24sIHN1YnNjcmlwdGlvbnM7XG4gICAgICAgICAgc3Vic2NyaXB0aW9uID0gYXJndW1lbnRzWzBdLCBjYWxsYmFja05hbWUgPSBhcmd1bWVudHNbMV0sIGFyZ3MgPSAzIDw9IGFyZ3VtZW50cy5sZW5ndGggPyBzbGljZS5jYWxsKGFyZ3VtZW50cywgMikgOiBbXTtcbiAgICAgICAgICBpZiAodHlwZW9mIHN1YnNjcmlwdGlvbiA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgc3Vic2NyaXB0aW9ucyA9IHRoaXMuZmluZEFsbChzdWJzY3JpcHRpb24pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzdWJzY3JpcHRpb25zID0gW3N1YnNjcmlwdGlvbl07XG4gICAgICAgICAgfVxuICAgICAgICAgIHJlc3VsdHMgPSBbXTtcbiAgICAgICAgICBmb3IgKGkgPSAwLCBsZW4gPSBzdWJzY3JpcHRpb25zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBzdWJzY3JpcHRpb24gPSBzdWJzY3JpcHRpb25zW2ldO1xuICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHR5cGVvZiBzdWJzY3JpcHRpb25bY2FsbGJhY2tOYW1lXSA9PT0gXCJmdW5jdGlvblwiID8gc3Vic2NyaXB0aW9uW2NhbGxiYWNrTmFtZV0uYXBwbHkoc3Vic2NyaXB0aW9uLCBhcmdzKSA6IHZvaWQgMCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgICAgICB9O1xuXG4gICAgICAgIFN1YnNjcmlwdGlvbnMucHJvdG90eXBlLnNlbmRDb21tYW5kID0gZnVuY3Rpb24oc3Vic2NyaXB0aW9uLCBjb21tYW5kKSB7XG4gICAgICAgICAgdmFyIGlkZW50aWZpZXI7XG4gICAgICAgICAgaWRlbnRpZmllciA9IHN1YnNjcmlwdGlvbi5pZGVudGlmaWVyO1xuICAgICAgICAgIHJldHVybiB0aGlzLmNvbnN1bWVyLnNlbmQoe1xuICAgICAgICAgICAgY29tbWFuZDogY29tbWFuZCxcbiAgICAgICAgICAgIGlkZW50aWZpZXI6IGlkZW50aWZpZXJcbiAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gU3Vic2NyaXB0aW9ucztcblxuICAgICAgfSkoKTtcblxuICAgIH0pLmNhbGwodGhpcyk7XG4gICAgKGZ1bmN0aW9uKCkge1xuICAgICAgQWN0aW9uQ2FibGUuU3Vic2NyaXB0aW9uID0gKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgZXh0ZW5kO1xuXG4gICAgICAgIGZ1bmN0aW9uIFN1YnNjcmlwdGlvbihjb25zdW1lciwgcGFyYW1zLCBtaXhpbikge1xuICAgICAgICAgIHRoaXMuY29uc3VtZXIgPSBjb25zdW1lcjtcbiAgICAgICAgICBpZiAocGFyYW1zID09IG51bGwpIHtcbiAgICAgICAgICAgIHBhcmFtcyA9IHt9O1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLmlkZW50aWZpZXIgPSBKU09OLnN0cmluZ2lmeShwYXJhbXMpO1xuICAgICAgICAgIGV4dGVuZCh0aGlzLCBtaXhpbik7XG4gICAgICAgIH1cblxuICAgICAgICBTdWJzY3JpcHRpb24ucHJvdG90eXBlLnBlcmZvcm0gPSBmdW5jdGlvbihhY3Rpb24sIGRhdGEpIHtcbiAgICAgICAgICBpZiAoZGF0YSA9PSBudWxsKSB7XG4gICAgICAgICAgICBkYXRhID0ge307XG4gICAgICAgICAgfVxuICAgICAgICAgIGRhdGEuYWN0aW9uID0gYWN0aW9uO1xuICAgICAgICAgIHJldHVybiB0aGlzLnNlbmQoZGF0YSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgU3Vic2NyaXB0aW9uLnByb3RvdHlwZS5zZW5kID0gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgIHJldHVybiB0aGlzLmNvbnN1bWVyLnNlbmQoe1xuICAgICAgICAgICAgY29tbWFuZDogXCJtZXNzYWdlXCIsXG4gICAgICAgICAgICBpZGVudGlmaWVyOiB0aGlzLmlkZW50aWZpZXIsXG4gICAgICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeShkYXRhKVxuICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIFN1YnNjcmlwdGlvbi5wcm90b3R5cGUudW5zdWJzY3JpYmUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdW1lci5zdWJzY3JpcHRpb25zLnJlbW92ZSh0aGlzKTtcbiAgICAgICAgfTtcblxuICAgICAgICBleHRlbmQgPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnRpZXMpIHtcbiAgICAgICAgICB2YXIga2V5LCB2YWx1ZTtcbiAgICAgICAgICBpZiAocHJvcGVydGllcyAhPSBudWxsKSB7XG4gICAgICAgICAgICBmb3IgKGtleSBpbiBwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgIHZhbHVlID0gcHJvcGVydGllc1trZXldO1xuICAgICAgICAgICAgICBvYmplY3Rba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBTdWJzY3JpcHRpb247XG5cbiAgICAgIH0pKCk7XG5cbiAgICB9KS5jYWxsKHRoaXMpO1xuICAgIChmdW5jdGlvbigpIHtcbiAgICAgIEFjdGlvbkNhYmxlLkNvbnN1bWVyID0gKGZ1bmN0aW9uKCkge1xuICAgICAgICBmdW5jdGlvbiBDb25zdW1lcih1cmwpIHtcbiAgICAgICAgICB0aGlzLnVybCA9IHVybDtcbiAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMgPSBuZXcgQWN0aW9uQ2FibGUuU3Vic2NyaXB0aW9ucyh0aGlzKTtcbiAgICAgICAgICB0aGlzLmNvbm5lY3Rpb24gPSBuZXcgQWN0aW9uQ2FibGUuQ29ubmVjdGlvbih0aGlzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIENvbnN1bWVyLnByb3RvdHlwZS5zZW5kID0gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb24uc2VuZChkYXRhKTtcbiAgICAgICAgfTtcblxuICAgICAgICBDb25zdW1lci5wcm90b3R5cGUuY29ubmVjdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb24ub3BlbigpO1xuICAgICAgICB9O1xuXG4gICAgICAgIENvbnN1bWVyLnByb3RvdHlwZS5kaXNjb25uZWN0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuY29ubmVjdGlvbi5jbG9zZSh7XG4gICAgICAgICAgICBhbGxvd1JlY29ubmVjdDogZmFsc2VcbiAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICBDb25zdW1lci5wcm90b3R5cGUuZW5zdXJlQWN0aXZlQ29ubmVjdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmICghdGhpcy5jb25uZWN0aW9uLmlzQWN0aXZlKCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb24ub3BlbigpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gQ29uc3VtZXI7XG5cbiAgICAgIH0pKCk7XG5cbiAgICB9KS5jYWxsKHRoaXMpO1xuICB9KS5jYWxsKHRoaXMpO1xuXG4gIGlmICh0eXBlb2YgbW9kdWxlID09PSBcIm9iamVjdFwiICYmIG1vZHVsZS5leHBvcnRzKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBBY3Rpb25DYWJsZTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCkge1xuICAgIGRlZmluZShBY3Rpb25DYWJsZSk7XG4gIH1cbn0pLmNhbGwodGhpcyk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9hY3Rpb25jYWJsZS9saWIvYXNzZXRzL2NvbXBpbGVkL2FjdGlvbl9jYWJsZS5qc1xuLy8gbW9kdWxlIGlkID0gMTE3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///117\n')},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Logger = __webpack_require__(/*! ./Logger */ 0);\n\nvar _Logger2 = _interopRequireDefault(_Logger);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * eyeson Activity Monitor\n **/\nvar ActivityMonitor = function () {\n  function ActivityMonitor(minutesToWarning) {\n    _classCallCheck(this, ActivityMonitor);\n\n    this.listeners = [];\n    this.warningTimeout = null;\n    this.minutesToWarning = minutesToWarning || 15;\n  }\n\n  _createClass(ActivityMonitor, [{\n    key: 'start',\n    value: function start() {\n      var _this = this;\n\n      _Logger2.default.debug('ActivityMonitor::start, minutesToWarning: ', this.minutesToWarning);\n      this.warningTimeout = setTimeout(function () {\n        _Logger2.default.warn('ActivityMonitor::inactive');\n        _this.notify({ type: 'inactive' });\n        _this.stop();\n      }, this.minutesToWarning * 1000 * 60);\n    }\n  }, {\n    key: 'stop',\n    value: function stop() {\n      _Logger2.default.debug('ActivityMonitor::stop');\n      clearTimeout(this.warningTimeout);\n      this.warningTimeout = null;\n    }\n  }, {\n    key: 'reset',\n    value: function reset() {\n      _Logger2.default.debug('ActivityMonitor::reset');\n      this.stop();\n      this.start();\n    }\n  }, {\n    key: 'onInactivity',\n    value: function onInactivity(callback) {\n      this.listeners.push(callback);\n    }\n  }, {\n    key: 'notify',\n    value: function notify(msg) {\n      this.listeners.forEach(function (listener) {\n        return listener(msg);\n      });\n    }\n  }]);\n\n  return ActivityMonitor;\n}();\n\nexports.default = ActivityMonitor;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTE4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3NyYy9BY3Rpdml0eU1vbml0b3IuanM/YzBiNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTG9nZ2VyIGZyb20gJy4vTG9nZ2VyJztcblxuLyoqXG4gKiBleWVzb24gQWN0aXZpdHkgTW9uaXRvclxuICoqL1xuY2xhc3MgQWN0aXZpdHlNb25pdG9yIHtcblxuICBjb25zdHJ1Y3RvcihtaW51dGVzVG9XYXJuaW5nKSB7XG4gICAgdGhpcy5saXN0ZW5lcnMgICAgICAgID0gW107XG4gICAgdGhpcy53YXJuaW5nVGltZW91dCAgID0gbnVsbDtcbiAgICB0aGlzLm1pbnV0ZXNUb1dhcm5pbmcgPSBtaW51dGVzVG9XYXJuaW5nIHx8IDE1O1xuICB9XG5cbiAgc3RhcnQoKSB7XG4gICAgTG9nZ2VyLmRlYnVnKCdBY3Rpdml0eU1vbml0b3I6OnN0YXJ0LCBtaW51dGVzVG9XYXJuaW5nOiAnLFxuICAgICAgICAgICAgICAgICB0aGlzLm1pbnV0ZXNUb1dhcm5pbmcpO1xuICAgIHRoaXMud2FybmluZ1RpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIExvZ2dlci53YXJuKCdBY3Rpdml0eU1vbml0b3I6OmluYWN0aXZlJyk7XG4gICAgICB0aGlzLm5vdGlmeSh7IHR5cGU6ICdpbmFjdGl2ZScgfSk7XG4gICAgICB0aGlzLnN0b3AoKTtcbiAgICB9LCB0aGlzLm1pbnV0ZXNUb1dhcm5pbmcgKiAxMDAwICogNjApO1xuICB9XG5cbiAgc3RvcCgpIHtcbiAgICBMb2dnZXIuZGVidWcoJ0FjdGl2aXR5TW9uaXRvcjo6c3RvcCcpO1xuICAgIGNsZWFyVGltZW91dCh0aGlzLndhcm5pbmdUaW1lb3V0KTtcbiAgICB0aGlzLndhcm5pbmdUaW1lb3V0ID0gbnVsbDtcbiAgfVxuXG4gIHJlc2V0KCkge1xuICAgIExvZ2dlci5kZWJ1ZygnQWN0aXZpdHlNb25pdG9yOjpyZXNldCcpO1xuICAgIHRoaXMuc3RvcCgpO1xuICAgIHRoaXMuc3RhcnQoKTtcbiAgfVxuXG4gIG9uSW5hY3Rpdml0eShjYWxsYmFjaykge1xuICAgIHRoaXMubGlzdGVuZXJzLnB1c2goY2FsbGJhY2spO1xuICB9XG5cbiAgbm90aWZ5KG1zZykge1xuICAgIHRoaXMubGlzdGVuZXJzLmZvckVhY2gobGlzdGVuZXIgPT4gbGlzdGVuZXIobXNnKSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQWN0aXZpdHlNb25pdG9yO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNyYy9BY3Rpdml0eU1vbml0b3IuanMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDQTs7Ozs7OztBQUNBOzs7QUFHQTtBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7Ozs7OztBQUdBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///118\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Logger = __webpack_require__(/*! ./Logger */ 0);\n\nvar _Logger2 = _interopRequireDefault(_Logger);\n\nvar _MediaStreamHandler = __webpack_require__(/*! ./MediaStreamHandler */ 3);\n\nvar _MediaStreamHandler2 = _interopRequireDefault(_MediaStreamHandler);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Conference Session is starting a session from active connection,\n * delegating events to registered listeners.\n **/\nvar ConferenceSession = function () {\n  /* eslint-disable max-statements */\n  function ConferenceSession(connection, options) {\n    _classCallCheck(this, ConferenceSession);\n\n    this.options = options || {};\n    this.options.RTCConstraints = Object.assign({}, this.defaultRTCConstraints, { offerToReceiveVideo: !this.options.eco });\n    this.listeners = [];\n    this.connection = connection;\n    this.startAttempts = 0;\n    this.maxStartAttempts = 3;\n\n    this.end = this.end.bind(this);\n    this.notify = this.notify.bind(this);\n    this.setStream = this.setStream.bind(this);\n    this.endSession = this.endSession.bind(this);\n    this.handleExit = this.handleExit.bind(this);\n    this.initSession = this.initSession.bind(this);\n    this.handleFailed = this.handleFailed.bind(this);\n    this.handleAccept = this.handleAccept.bind(this);\n    this.restartSession = this.restartSession.bind(this);\n    this.tryRecoveryFrom = this.tryRecoveryFrom.bind(this);\n    this.terminateSession = this.terminateSession.bind(this);\n    this.adjustVideoPodium = this.adjustVideoPodium.bind(this);\n  }\n  /* eslint-enable max-statements */\n\n  _createClass(ConferenceSession, [{\n    key: 'start',\n\n\n    /**\n     * Request stream and invoke session start.\n     **/\n    value: function start() {\n      var mediaStreamHandler = new _MediaStreamHandler2.default(this.options);\n      mediaStreamHandler.start(this.initSession, this.handleFailed);\n    }\n\n    /**\n     * Init session and start stream.\n     **/\n\n  }, {\n    key: 'initSession',\n    value: function initSession(stream) {\n      var options = {\n        sessionDescriptionHandlerOptions: {\n          stream: stream,\n          RTCConstraints: this.options.RTCConstraints,\n          connection: this.connection,\n          handleAccept: this.handleAccept\n        }\n      };\n      this.session = this.connection.startSession(options);\n      this.session.on('accepted', this.adjustVideoPodium);\n      this.session.on('bye', this.handleExit);\n      this.session.on('terminated', this.handleTermination);\n      this.session.on('failed', this.handleFailed);\n\n      window.addEventListener('beforeunload', this.endSession.bind(this));\n    }\n\n    /**\n     * End a conference session.\n     **/\n\n  }, {\n    key: 'end',\n    value: function end() {\n      this.listeners = [];\n      this.endSession();\n    }\n\n    /**\n     * Before terminating the session, remove all listeners and stop all\n     * streams.\n     **/\n\n  }, {\n    key: 'endSession',\n    value: function endSession() {\n      _Logger2.default.debug('ConferenceSession::endSession');\n      if (this.session) {\n        this.session.removeAllListeners('accepted');\n        this.session.removeAllListeners('bye');\n        this.session.removeAllListeners('connecting');\n        this.session.removeAllListeners('terminated');\n\n        this.session.sessionDescriptionHandler.close();\n        this.terminateSession();\n      }\n    }\n\n    /**\n     * Depending on the state of the session, this function may send a CANCEL\n     * request, a non-2xx final response, a BYE request, or even no request at\n     * all.\n     * https://sipjs.com/api/0.7.0/session/#terminateoptions\n     **/\n\n  }, {\n    key: 'terminateSession',\n    value: function terminateSession() {\n      _Logger2.default.debug('ConferenceSession::terminateSession');\n      try {\n        this.session.terminate();\n      } catch (error) {\n        _Logger2.default.error(error);\n      }\n    }\n\n    /**\n     * Replace the active stream with newStream and notify once done.\n     **/\n\n  }, {\n    key: 'setStream',\n    value: function setStream(newStream) {\n      var _this = this;\n\n      if (!this.session) {\n        return;\n      }\n\n      this.session.sessionDescriptionHandler.setStream(newStream).then(function (streams) {\n        _this.notify({\n          type: 'stream_update',\n          localStream: streams.newStream,\n          stream: streams.remoteStream\n        });\n      }).catch(_Logger2.default.error);\n    }\n\n    /**\n     * Register a session monitor.\n     **/\n\n  }, {\n    key: 'setMonitor',\n    value: function setMonitor(monitor) {\n      this.monitor = monitor;\n    }\n\n    /**\n     * Add 'Visoweb' identifier to origin field of sdp. Believe this is still\n     * relevant for some remotes.\n     **/\n\n  }, {\n    key: 'addOriginToSDP',\n    value: function addOriginToSDP(sdpWrapper) {\n      sdpWrapper.sdp = sdpWrapper.sdp.replace('o=-', 'o=Visoweb');\n    }\n\n    /**\n     * On Termination log to debug what happened.\n     **/\n\n  }, {\n    key: 'handleTermination',\n    value: function handleTermination(msg, cause) {\n      _Logger2.default.debug(msg, cause);\n    }\n\n    /**\n     * Forward accept event, build expected message format.\n     **/\n\n  }, {\n    key: 'handleAccept',\n    value: function handleAccept() {\n      _Logger2.default.debug('ConferenceSession::handleAccept');\n      if (this.monitor) {\n        this.monitor.observe(this.session);\n      }\n      this.notify({ type: 'accept', session: this.session });\n    }\n\n    /**\n     * Once we have accepted the session, we need to adjust the video podium,\n     * according to the current stream.\n     **/\n\n  }, {\n    key: 'adjustVideoPodium',\n    value: function adjustVideoPodium() {\n      _Logger2.default.debug('ConferenceSession::adjustVideoPodium');\n      this.connection.send({ type: 'mute_video', on: !this.options.video });\n    }\n\n    /**\n     * Forward exit event, build expected message format.\n     **/\n\n  }, {\n    key: 'handleExit',\n    value: function handleExit() {\n      _Logger2.default.debug('ConferenceSession::handleExit');\n      this.notify({ type: 'exit' });\n    }\n\n    /**\n     * Forward failed event unless we have attempt a recovery.\n     **/\n\n  }, {\n    key: 'handleFailed',\n    value: function handleFailed(reason) {\n      _Logger2.default.debug('ConferenceSession::handleFailed: ', reason);\n      var key = reason && (reason.name || reason.reason_phrase);\n\n      if (this.tryRecoveryFrom(key)) {\n        return;\n      }\n\n      var name = {\n        'Busy Here': 'session_in_use',\n        Forbidden: 'session_in_use',\n        NotFoundError: 'devices',\n        NotAllowedError: 'permission',\n        DevicesNotFoundError: 'devices',\n        PermissionDeniedError: 'permission',\n        NotReadableError: 'not_readable'\n      }[key] || 'session_failed';\n\n      this.notify({ type: 'error', name: name });\n    }\n\n    /**\n     * Conference session may recover from `failure` if a recovery for that\n     * `failure` is known and its condition applies.\n     **/\n\n  }, {\n    key: 'tryRecoveryFrom',\n    value: function tryRecoveryFrom(failure) {\n      var _this2 = this;\n\n      _Logger2.default.debug('ConferenceSession::tryRecoveryFrom: ', failure);\n\n      var recovery = {\n        'Not Found': {\n          condition: function condition() {\n            return _this2.startAttempts < _this2.maxStartAttempts;\n          },\n          action: function action() {\n            return _this2.restartSession();\n          }\n        }\n      }[failure];\n\n      return Boolean(recovery && recovery.condition() && recovery.action());\n    }\n\n    /**\n     * End the previously started session, but keep already registered listeners.\n     **/\n\n  }, {\n    key: 'restartSession',\n    value: function restartSession() {\n      var _this3 = this;\n\n      _Logger2.default.debug('ConferenceSession::restartSession: ', this.startAttempts);\n      this.startAttempts += 1;\n\n      setTimeout(function () {\n        _this3.endSession();\n        new _MediaStreamHandler2.default(_this3.options).start(_this3.initSession, _this3.handleFailed);\n      }, 1000);\n\n      return true;\n    }\n\n    /**\n     * Register event listeners.\n     **/\n\n  }, {\n    key: 'onEvent',\n    value: function onEvent(callback) {\n      this.listeners.push(callback);\n    }\n\n    /**\n     * On receiving an event, notify all registered listeners.\n     **/\n\n  }, {\n    key: 'notify',\n    value: function notify(msg) {\n      this.listeners.forEach(function (listener) {\n        return listener(msg);\n      });\n    }\n\n    /**\n     * Transport a message over the connection.\n     **/\n\n  }, {\n    key: 'send',\n    value: function send(msg) {\n      return this.connection.send(msg);\n    }\n  }, {\n    key: 'localStream',\n    get: function get() {\n      return this.session.sessionDescriptionHandler.localStream;\n    }\n  }, {\n    key: 'defaultRTCConstraints',\n    get: function get() {\n      return {\n        offerToReceiveAudio: true,\n        offerToReceiveVideo: true\n      };\n    }\n  }]);\n\n  return ConferenceSession;\n}();\n\nexports.default = ConferenceSession;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTE5LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3NyYy9Db25mZXJlbmNlU2Vzc2lvbi5qcz84MTZiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBMb2dnZXIgZnJvbSAnLi9Mb2dnZXInO1xuaW1wb3J0IE1lZGlhU3RyZWFtSGFuZGxlciBmcm9tICcuL01lZGlhU3RyZWFtSGFuZGxlcic7XG5cbi8qKlxuICogQ29uZmVyZW5jZSBTZXNzaW9uIGlzIHN0YXJ0aW5nIGEgc2Vzc2lvbiBmcm9tIGFjdGl2ZSBjb25uZWN0aW9uLFxuICogZGVsZWdhdGluZyBldmVudHMgdG8gcmVnaXN0ZXJlZCBsaXN0ZW5lcnMuXG4gKiovXG5jbGFzcyBDb25mZXJlbmNlU2Vzc2lvbiB7XG4gIC8qIGVzbGludC1kaXNhYmxlIG1heC1zdGF0ZW1lbnRzICovXG4gIGNvbnN0cnVjdG9yKGNvbm5lY3Rpb24sIG9wdGlvbnMpIHtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgIHRoaXMub3B0aW9ucy5SVENDb25zdHJhaW50cyA9IE9iamVjdC5hc3NpZ24oXG4gICAgICB7fSxcbiAgICAgIHRoaXMuZGVmYXVsdFJUQ0NvbnN0cmFpbnRzLFxuICAgICAgeyBvZmZlclRvUmVjZWl2ZVZpZGVvOiAhdGhpcy5vcHRpb25zLmVjbyB9XG4gICAgKTtcbiAgICB0aGlzLmxpc3RlbmVycyA9IFtdO1xuICAgIHRoaXMuY29ubmVjdGlvbiA9IGNvbm5lY3Rpb247XG4gICAgdGhpcy5zdGFydEF0dGVtcHRzID0gMDtcbiAgICB0aGlzLm1heFN0YXJ0QXR0ZW1wdHMgPSAzO1xuXG4gICAgdGhpcy5lbmQgPSB0aGlzLmVuZC5iaW5kKHRoaXMpO1xuICAgIHRoaXMubm90aWZ5ID0gdGhpcy5ub3RpZnkuYmluZCh0aGlzKTtcbiAgICB0aGlzLnNldFN0cmVhbSA9IHRoaXMuc2V0U3RyZWFtLmJpbmQodGhpcyk7XG4gICAgdGhpcy5lbmRTZXNzaW9uID0gdGhpcy5lbmRTZXNzaW9uLmJpbmQodGhpcyk7XG4gICAgdGhpcy5oYW5kbGVFeGl0ID0gdGhpcy5oYW5kbGVFeGl0LmJpbmQodGhpcyk7XG4gICAgdGhpcy5pbml0U2Vzc2lvbiA9IHRoaXMuaW5pdFNlc3Npb24uYmluZCh0aGlzKTtcbiAgICB0aGlzLmhhbmRsZUZhaWxlZCA9IHRoaXMuaGFuZGxlRmFpbGVkLmJpbmQodGhpcyk7XG4gICAgdGhpcy5oYW5kbGVBY2NlcHQgPSB0aGlzLmhhbmRsZUFjY2VwdC5iaW5kKHRoaXMpO1xuICAgIHRoaXMucmVzdGFydFNlc3Npb24gPSB0aGlzLnJlc3RhcnRTZXNzaW9uLmJpbmQodGhpcyk7XG4gICAgdGhpcy50cnlSZWNvdmVyeUZyb20gPSB0aGlzLnRyeVJlY292ZXJ5RnJvbS5iaW5kKHRoaXMpO1xuICAgIHRoaXMudGVybWluYXRlU2Vzc2lvbiA9IHRoaXMudGVybWluYXRlU2Vzc2lvbi5iaW5kKHRoaXMpO1xuICAgIHRoaXMuYWRqdXN0VmlkZW9Qb2RpdW0gPSB0aGlzLmFkanVzdFZpZGVvUG9kaXVtLmJpbmQodGhpcyk7XG4gIH1cbiAgLyogZXNsaW50LWVuYWJsZSBtYXgtc3RhdGVtZW50cyAqL1xuXG4gIGdldCBsb2NhbFN0cmVhbSgpIHtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIubG9jYWxTdHJlYW07XG4gIH1cblxuICBnZXQgZGVmYXVsdFJUQ0NvbnN0cmFpbnRzKCkge1xuICAgIHJldHVybiB7XG4gICAgICBvZmZlclRvUmVjZWl2ZUF1ZGlvOiB0cnVlLFxuICAgICAgb2ZmZXJUb1JlY2VpdmVWaWRlbzogdHJ1ZVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogUmVxdWVzdCBzdHJlYW0gYW5kIGludm9rZSBzZXNzaW9uIHN0YXJ0LlxuICAgKiovXG4gIHN0YXJ0KCkge1xuICAgIGNvbnN0IG1lZGlhU3RyZWFtSGFuZGxlciA9IG5ldyBNZWRpYVN0cmVhbUhhbmRsZXIodGhpcy5vcHRpb25zKTtcbiAgICBtZWRpYVN0cmVhbUhhbmRsZXIuc3RhcnQodGhpcy5pbml0U2Vzc2lvbiwgdGhpcy5oYW5kbGVGYWlsZWQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEluaXQgc2Vzc2lvbiBhbmQgc3RhcnQgc3RyZWFtLlxuICAgKiovXG4gIGluaXRTZXNzaW9uKHN0cmVhbSkge1xuICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICBzZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9uczoge1xuICAgICAgICBzdHJlYW06IHN0cmVhbSxcbiAgICAgICAgUlRDQ29uc3RyYWludHM6IHRoaXMub3B0aW9ucy5SVENDb25zdHJhaW50cyxcbiAgICAgICAgY29ubmVjdGlvbjogdGhpcy5jb25uZWN0aW9uLFxuICAgICAgICBoYW5kbGVBY2NlcHQ6IHRoaXMuaGFuZGxlQWNjZXB0XG4gICAgICB9XG4gICAgfTtcbiAgICB0aGlzLnNlc3Npb24gPSB0aGlzLmNvbm5lY3Rpb24uc3RhcnRTZXNzaW9uKG9wdGlvbnMpO1xuICAgIHRoaXMuc2Vzc2lvbi5vbignYWNjZXB0ZWQnLCB0aGlzLmFkanVzdFZpZGVvUG9kaXVtKTtcbiAgICB0aGlzLnNlc3Npb24ub24oJ2J5ZScsIHRoaXMuaGFuZGxlRXhpdCk7XG4gICAgdGhpcy5zZXNzaW9uLm9uKCd0ZXJtaW5hdGVkJywgdGhpcy5oYW5kbGVUZXJtaW5hdGlvbik7XG4gICAgdGhpcy5zZXNzaW9uLm9uKCdmYWlsZWQnLCB0aGlzLmhhbmRsZUZhaWxlZCk7XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignYmVmb3JldW5sb2FkJywgdGhpcy5lbmRTZXNzaW9uLmJpbmQodGhpcykpO1xuICB9XG5cbiAgLyoqXG4gICAqIEVuZCBhIGNvbmZlcmVuY2Ugc2Vzc2lvbi5cbiAgICoqL1xuICBlbmQoKSB7XG4gICAgdGhpcy5saXN0ZW5lcnMgPSBbXTtcbiAgICB0aGlzLmVuZFNlc3Npb24oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBCZWZvcmUgdGVybWluYXRpbmcgdGhlIHNlc3Npb24sIHJlbW92ZSBhbGwgbGlzdGVuZXJzIGFuZCBzdG9wIGFsbFxuICAgKiBzdHJlYW1zLlxuICAgKiovXG4gIGVuZFNlc3Npb24oKSB7XG4gICAgTG9nZ2VyLmRlYnVnKCdDb25mZXJlbmNlU2Vzc2lvbjo6ZW5kU2Vzc2lvbicpO1xuICAgIGlmICh0aGlzLnNlc3Npb24pIHtcbiAgICAgIHRoaXMuc2Vzc2lvbi5yZW1vdmVBbGxMaXN0ZW5lcnMoJ2FjY2VwdGVkJyk7XG4gICAgICB0aGlzLnNlc3Npb24ucmVtb3ZlQWxsTGlzdGVuZXJzKCdieWUnKTtcbiAgICAgIHRoaXMuc2Vzc2lvbi5yZW1vdmVBbGxMaXN0ZW5lcnMoJ2Nvbm5lY3RpbmcnKTtcbiAgICAgIHRoaXMuc2Vzc2lvbi5yZW1vdmVBbGxMaXN0ZW5lcnMoJ3Rlcm1pbmF0ZWQnKTtcblxuICAgICAgdGhpcy5zZXNzaW9uLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIuY2xvc2UoKTtcbiAgICAgIHRoaXMudGVybWluYXRlU2Vzc2lvbigpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBEZXBlbmRpbmcgb24gdGhlIHN0YXRlIG9mIHRoZSBzZXNzaW9uLCB0aGlzIGZ1bmN0aW9uIG1heSBzZW5kIGEgQ0FOQ0VMXG4gICAqIHJlcXVlc3QsIGEgbm9uLTJ4eCBmaW5hbCByZXNwb25zZSwgYSBCWUUgcmVxdWVzdCwgb3IgZXZlbiBubyByZXF1ZXN0IGF0XG4gICAqIGFsbC5cbiAgICogaHR0cHM6Ly9zaXBqcy5jb20vYXBpLzAuNy4wL3Nlc3Npb24vI3Rlcm1pbmF0ZW9wdGlvbnNcbiAgICoqL1xuICB0ZXJtaW5hdGVTZXNzaW9uKCkge1xuICAgIExvZ2dlci5kZWJ1ZygnQ29uZmVyZW5jZVNlc3Npb246OnRlcm1pbmF0ZVNlc3Npb24nKTtcbiAgICB0cnkge1xuICAgICAgdGhpcy5zZXNzaW9uLnRlcm1pbmF0ZSgpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBMb2dnZXIuZXJyb3IoZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXBsYWNlIHRoZSBhY3RpdmUgc3RyZWFtIHdpdGggbmV3U3RyZWFtIGFuZCBub3RpZnkgb25jZSBkb25lLlxuICAgKiovXG4gIHNldFN0cmVhbShuZXdTdHJlYW0pIHtcbiAgICBpZiAoIXRoaXMuc2Vzc2lvbikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuc2Vzc2lvbi5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyXG4gICAgICAuc2V0U3RyZWFtKG5ld1N0cmVhbSlcbiAgICAgIC50aGVuKHN0cmVhbXMgPT4ge1xuICAgICAgICB0aGlzLm5vdGlmeSh7XG4gICAgICAgICAgdHlwZTogJ3N0cmVhbV91cGRhdGUnLFxuICAgICAgICAgIGxvY2FsU3RyZWFtOiBzdHJlYW1zLm5ld1N0cmVhbSxcbiAgICAgICAgICBzdHJlYW06IHN0cmVhbXMucmVtb3RlU3RyZWFtXG4gICAgICAgIH0pO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaChMb2dnZXIuZXJyb3IpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVyIGEgc2Vzc2lvbiBtb25pdG9yLlxuICAgKiovXG4gIHNldE1vbml0b3IobW9uaXRvcikge1xuICAgIHRoaXMubW9uaXRvciA9IG1vbml0b3I7XG4gIH1cblxuICAvKipcbiAgICogQWRkICdWaXNvd2ViJyBpZGVudGlmaWVyIHRvIG9yaWdpbiBmaWVsZCBvZiBzZHAuIEJlbGlldmUgdGhpcyBpcyBzdGlsbFxuICAgKiByZWxldmFudCBmb3Igc29tZSByZW1vdGVzLlxuICAgKiovXG4gIGFkZE9yaWdpblRvU0RQKHNkcFdyYXBwZXIpIHtcbiAgICBzZHBXcmFwcGVyLnNkcCA9IHNkcFdyYXBwZXIuc2RwLnJlcGxhY2UoJ289LScsICdvPVZpc293ZWInKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBPbiBUZXJtaW5hdGlvbiBsb2cgdG8gZGVidWcgd2hhdCBoYXBwZW5lZC5cbiAgICoqL1xuICBoYW5kbGVUZXJtaW5hdGlvbihtc2csIGNhdXNlKSB7XG4gICAgTG9nZ2VyLmRlYnVnKG1zZywgY2F1c2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcndhcmQgYWNjZXB0IGV2ZW50LCBidWlsZCBleHBlY3RlZCBtZXNzYWdlIGZvcm1hdC5cbiAgICoqL1xuICBoYW5kbGVBY2NlcHQoKSB7XG4gICAgTG9nZ2VyLmRlYnVnKCdDb25mZXJlbmNlU2Vzc2lvbjo6aGFuZGxlQWNjZXB0Jyk7XG4gICAgaWYgKHRoaXMubW9uaXRvcikge1xuICAgICAgdGhpcy5tb25pdG9yLm9ic2VydmUodGhpcy5zZXNzaW9uKTtcbiAgICB9XG4gICAgdGhpcy5ub3RpZnkoeyB0eXBlOiAnYWNjZXB0Jywgc2Vzc2lvbjogdGhpcy5zZXNzaW9uIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIE9uY2Ugd2UgaGF2ZSBhY2NlcHRlZCB0aGUgc2Vzc2lvbiwgd2UgbmVlZCB0byBhZGp1c3QgdGhlIHZpZGVvIHBvZGl1bSxcbiAgICogYWNjb3JkaW5nIHRvIHRoZSBjdXJyZW50IHN0cmVhbS5cbiAgICoqL1xuICBhZGp1c3RWaWRlb1BvZGl1bSgpIHtcbiAgICBMb2dnZXIuZGVidWcoJ0NvbmZlcmVuY2VTZXNzaW9uOjphZGp1c3RWaWRlb1BvZGl1bScpO1xuICAgIHRoaXMuY29ubmVjdGlvbi5zZW5kKHsgdHlwZTogJ211dGVfdmlkZW8nLCBvbjogIXRoaXMub3B0aW9ucy52aWRlbyB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3J3YXJkIGV4aXQgZXZlbnQsIGJ1aWxkIGV4cGVjdGVkIG1lc3NhZ2UgZm9ybWF0LlxuICAgKiovXG4gIGhhbmRsZUV4aXQoKSB7XG4gICAgTG9nZ2VyLmRlYnVnKCdDb25mZXJlbmNlU2Vzc2lvbjo6aGFuZGxlRXhpdCcpO1xuICAgIHRoaXMubm90aWZ5KHsgdHlwZTogJ2V4aXQnIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcndhcmQgZmFpbGVkIGV2ZW50IHVubGVzcyB3ZSBoYXZlIGF0dGVtcHQgYSByZWNvdmVyeS5cbiAgICoqL1xuICBoYW5kbGVGYWlsZWQocmVhc29uKSB7XG4gICAgTG9nZ2VyLmRlYnVnKCdDb25mZXJlbmNlU2Vzc2lvbjo6aGFuZGxlRmFpbGVkOiAnLCByZWFzb24pO1xuICAgIGNvbnN0IGtleSA9IHJlYXNvbiAmJiAocmVhc29uLm5hbWUgfHwgcmVhc29uLnJlYXNvbl9waHJhc2UpO1xuXG4gICAgaWYgKHRoaXMudHJ5UmVjb3ZlcnlGcm9tKGtleSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBuYW1lID1cbiAgICAgIHtcbiAgICAgICAgJ0J1c3kgSGVyZSc6ICdzZXNzaW9uX2luX3VzZScsXG4gICAgICAgIEZvcmJpZGRlbjogJ3Nlc3Npb25faW5fdXNlJyxcbiAgICAgICAgTm90Rm91bmRFcnJvcjogJ2RldmljZXMnLFxuICAgICAgICBOb3RBbGxvd2VkRXJyb3I6ICdwZXJtaXNzaW9uJyxcbiAgICAgICAgRGV2aWNlc05vdEZvdW5kRXJyb3I6ICdkZXZpY2VzJyxcbiAgICAgICAgUGVybWlzc2lvbkRlbmllZEVycm9yOiAncGVybWlzc2lvbicsXG4gICAgICAgIE5vdFJlYWRhYmxlRXJyb3I6ICdub3RfcmVhZGFibGUnXG4gICAgICB9W2tleV0gfHwgJ3Nlc3Npb25fZmFpbGVkJztcblxuICAgIHRoaXMubm90aWZ5KHsgdHlwZTogJ2Vycm9yJywgbmFtZTogbmFtZSB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb25mZXJlbmNlIHNlc3Npb24gbWF5IHJlY292ZXIgZnJvbSBgZmFpbHVyZWAgaWYgYSByZWNvdmVyeSBmb3IgdGhhdFxuICAgKiBgZmFpbHVyZWAgaXMga25vd24gYW5kIGl0cyBjb25kaXRpb24gYXBwbGllcy5cbiAgICoqL1xuICB0cnlSZWNvdmVyeUZyb20oZmFpbHVyZSkge1xuICAgIExvZ2dlci5kZWJ1ZygnQ29uZmVyZW5jZVNlc3Npb246OnRyeVJlY292ZXJ5RnJvbTogJywgZmFpbHVyZSk7XG5cbiAgICBjb25zdCByZWNvdmVyeSA9IHtcbiAgICAgICdOb3QgRm91bmQnOiB7XG4gICAgICAgIGNvbmRpdGlvbjogKCkgPT4gdGhpcy5zdGFydEF0dGVtcHRzIDwgdGhpcy5tYXhTdGFydEF0dGVtcHRzLFxuICAgICAgICBhY3Rpb246ICgpID0+IHRoaXMucmVzdGFydFNlc3Npb24oKVxuICAgICAgfVxuICAgIH1bZmFpbHVyZV07XG5cbiAgICByZXR1cm4gQm9vbGVhbihyZWNvdmVyeSAmJiByZWNvdmVyeS5jb25kaXRpb24oKSAmJiByZWNvdmVyeS5hY3Rpb24oKSk7XG4gIH1cblxuICAvKipcbiAgICogRW5kIHRoZSBwcmV2aW91c2x5IHN0YXJ0ZWQgc2Vzc2lvbiwgYnV0IGtlZXAgYWxyZWFkeSByZWdpc3RlcmVkIGxpc3RlbmVycy5cbiAgICoqL1xuICByZXN0YXJ0U2Vzc2lvbigpIHtcbiAgICBMb2dnZXIuZGVidWcoJ0NvbmZlcmVuY2VTZXNzaW9uOjpyZXN0YXJ0U2Vzc2lvbjogJywgdGhpcy5zdGFydEF0dGVtcHRzKTtcbiAgICB0aGlzLnN0YXJ0QXR0ZW1wdHMgKz0gMTtcblxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5lbmRTZXNzaW9uKCk7XG4gICAgICBuZXcgTWVkaWFTdHJlYW1IYW5kbGVyKHRoaXMub3B0aW9ucykuc3RhcnQoXG4gICAgICAgIHRoaXMuaW5pdFNlc3Npb24sXG4gICAgICAgIHRoaXMuaGFuZGxlRmFpbGVkXG4gICAgICApO1xuICAgIH0sIDEwMDApO1xuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXIgZXZlbnQgbGlzdGVuZXJzLlxuICAgKiovXG4gIG9uRXZlbnQoY2FsbGJhY2spIHtcbiAgICB0aGlzLmxpc3RlbmVycy5wdXNoKGNhbGxiYWNrKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBPbiByZWNlaXZpbmcgYW4gZXZlbnQsIG5vdGlmeSBhbGwgcmVnaXN0ZXJlZCBsaXN0ZW5lcnMuXG4gICAqKi9cbiAgbm90aWZ5KG1zZykge1xuICAgIHRoaXMubGlzdGVuZXJzLmZvckVhY2gobGlzdGVuZXIgPT4gbGlzdGVuZXIobXNnKSk7XG4gIH1cblxuICAvKipcbiAgICogVHJhbnNwb3J0IGEgbWVzc2FnZSBvdmVyIHRoZSBjb25uZWN0aW9uLlxuICAgKiovXG4gIHNlbmQobXNnKSB7XG4gICAgcmV0dXJuIHRoaXMuY29ubmVjdGlvbi5zZW5kKG1zZyk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ29uZmVyZW5jZVNlc3Npb247XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc3JjL0NvbmZlcmVuY2VTZXNzaW9uLmpzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7Ozs7Ozs7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFZQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBREE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7O0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQUdBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFFQTtBQUNBO0FBQ0E7Ozs7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFQQTtBQUNBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7QUFJQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUZBO0FBREE7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUFHQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQUdBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUFHQTtBQUNBO0FBQ0E7OztBQXJPQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTs7Ozs7O0FBK05BIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///119\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Logger = __webpack_require__(/*! ./Logger */ 0);\n\nvar _Logger2 = _interopRequireDefault(_Logger);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * eyeson Connection Monitor\n **/\nvar ConnectionMonitor = function () {\n  function ConnectionMonitor() {\n    _classCallCheck(this, ConnectionMonitor);\n\n    this.listeners = [];\n    this.prevIceState = 'initial';\n\n    this.onOffline = this.onOffline.bind(this);\n    this.handleIceStateChange = this.handleIceStateChange.bind(this);\n    this.addEventListeners();\n  }\n\n  _createClass(ConnectionMonitor, [{\n    key: 'addEventListeners',\n    value: function addEventListeners() {\n      window.addEventListener('offline', this.onOffline);\n    }\n  }, {\n    key: 'onOffline',\n    value: function onOffline() {\n      this.notify({ type: 'offline' });\n    }\n  }, {\n    key: 'observe',\n    value: function observe(session) {\n      this.session = session;\n      this.session.sessionDescriptionHandler.peerConnection.oniceconnectionstatechange = this.handleIceStateChange;\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      if (this.session) {\n        this.session.removeAllListeners('connecting');\n        this.session.sessionDescriptionHandler.peerConnection.oniceconnectionstatechange = null;\n        window.removeEventListener('offline', this.onOffline);\n      }\n    }\n  }, {\n    key: 'onError',\n    value: function onError(errorHandler) {\n      this.listeners.push(errorHandler);\n    }\n  }, {\n    key: 'notify',\n    value: function notify(msg) {\n      this.listeners.forEach(function (listener) {\n        return listener(msg);\n      });\n    }\n\n    /**\n     * NOTE: Event doesn't have a current target in EDGE\n     **/\n    /* eslint-disable max-statements */\n\n  }, {\n    key: 'handleIceStateChange',\n    value: function handleIceStateChange(event) {\n      _Logger2.default.debug('ConnectionMonitor::handleIceStateChange: ', event);\n      if (!event.currentTarget) {\n        return;\n      }\n\n      var currentIceState = event.currentTarget.iceConnectionState;\n\n\n      if (currentIceState === 'disconnected') {\n        this.notify({ type: 'warning', name: 'ice_disconnected' });\n      }\n\n      if (currentIceState === 'failed') {\n        this.notify({ type: 'error', name: 'ice_failed' });\n      }\n\n      if (this.prevIceState === 'disconnected' && ['completed', 'connected'].includes(currentIceState)) {\n        this.notify({ type: 'clear_warning', name: 'ice_disconnected' });\n      }\n\n      this.prevIceState = currentIceState;\n    }\n    /* eslint-enable max-statemetns */\n\n  }]);\n\n  return ConnectionMonitor;\n}();\n\nexports.default = ConnectionMonitor;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTIwLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3NyYy9Db25uZWN0aW9uTW9uaXRvci5qcz80MTYxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBMb2dnZXIgZnJvbSAnLi9Mb2dnZXInO1xuXG4vKipcbiAqIGV5ZXNvbiBDb25uZWN0aW9uIE1vbml0b3JcbiAqKi9cbmNsYXNzIENvbm5lY3Rpb25Nb25pdG9yIHtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmxpc3RlbmVycyAgICA9IFtdO1xuICAgIHRoaXMucHJldkljZVN0YXRlID0gJ2luaXRpYWwnO1xuXG4gICAgdGhpcy5vbk9mZmxpbmUgICAgICAgICAgICA9IHRoaXMub25PZmZsaW5lLmJpbmQodGhpcyk7XG4gICAgdGhpcy5oYW5kbGVJY2VTdGF0ZUNoYW5nZSA9IHRoaXMuaGFuZGxlSWNlU3RhdGVDaGFuZ2UuYmluZCh0aGlzKTtcbiAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICBhZGRFdmVudExpc3RlbmVycygpIHtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignb2ZmbGluZScsICB0aGlzLm9uT2ZmbGluZSk7XG4gIH1cblxuICBvbk9mZmxpbmUoKSB7XG4gICAgdGhpcy5ub3RpZnkoeyB0eXBlOiAnb2ZmbGluZScgfSk7XG4gIH1cblxuICBvYnNlcnZlKHNlc3Npb24pIHtcbiAgICB0aGlzLnNlc3Npb24gPSBzZXNzaW9uO1xuICAgIHRoaXMuc2Vzc2lvbi5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLnBlZXJDb25uZWN0aW9uXG4gICAgICAub25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2UgPSB0aGlzLmhhbmRsZUljZVN0YXRlQ2hhbmdlO1xuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICBpZiAodGhpcy5zZXNzaW9uKSB7XG4gICAgICB0aGlzLnNlc3Npb24ucmVtb3ZlQWxsTGlzdGVuZXJzKCdjb25uZWN0aW5nJyk7XG4gICAgICB0aGlzLnNlc3Npb24uc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlci5wZWVyQ29ubmVjdGlvblxuICAgICAgICAub25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2UgPSBudWxsO1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ29mZmxpbmUnLCAgdGhpcy5vbk9mZmxpbmUpO1xuICAgIH1cbiAgfVxuXG4gIG9uRXJyb3IoZXJyb3JIYW5kbGVyKSB7XG4gICAgdGhpcy5saXN0ZW5lcnMucHVzaChlcnJvckhhbmRsZXIpO1xuICB9XG5cbiAgbm90aWZ5KG1zZykge1xuICAgIHRoaXMubGlzdGVuZXJzLmZvckVhY2gobGlzdGVuZXIgPT4gbGlzdGVuZXIobXNnKSk7XG4gIH1cblxuICAvKipcbiAgICogTk9URTogRXZlbnQgZG9lc24ndCBoYXZlIGEgY3VycmVudCB0YXJnZXQgaW4gRURHRVxuICAgKiovXG4gIC8qIGVzbGludC1kaXNhYmxlIG1heC1zdGF0ZW1lbnRzICovXG4gIGhhbmRsZUljZVN0YXRlQ2hhbmdlKGV2ZW50KSB7XG4gICAgTG9nZ2VyLmRlYnVnKCdDb25uZWN0aW9uTW9uaXRvcjo6aGFuZGxlSWNlU3RhdGVDaGFuZ2U6ICcsIGV2ZW50KTtcbiAgICBpZiAoIWV2ZW50LmN1cnJlbnRUYXJnZXQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB7IGljZUNvbm5lY3Rpb25TdGF0ZTogY3VycmVudEljZVN0YXRlIH0gPSBldmVudC5jdXJyZW50VGFyZ2V0O1xuXG4gICAgaWYgKGN1cnJlbnRJY2VTdGF0ZSA9PT0gJ2Rpc2Nvbm5lY3RlZCcpIHtcbiAgICAgIHRoaXMubm90aWZ5KHsgdHlwZTogJ3dhcm5pbmcnLCBuYW1lOiAnaWNlX2Rpc2Nvbm5lY3RlZCcgfSk7XG4gICAgfVxuXG4gICAgaWYgKGN1cnJlbnRJY2VTdGF0ZSA9PT0gJ2ZhaWxlZCcpIHtcbiAgICAgIHRoaXMubm90aWZ5KHsgdHlwZTogJ2Vycm9yJywgbmFtZTogJ2ljZV9mYWlsZWQnIH0pO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnByZXZJY2VTdGF0ZSA9PT0gJ2Rpc2Nvbm5lY3RlZCcgJiZcbiAgICAgICAgWydjb21wbGV0ZWQnLCAnY29ubmVjdGVkJ10uaW5jbHVkZXMoY3VycmVudEljZVN0YXRlKSkge1xuICAgICAgdGhpcy5ub3RpZnkoeyB0eXBlOiAnY2xlYXJfd2FybmluZycsIG5hbWU6ICdpY2VfZGlzY29ubmVjdGVkJyB9KTtcbiAgICB9XG5cbiAgICB0aGlzLnByZXZJY2VTdGF0ZSA9IGN1cnJlbnRJY2VTdGF0ZTtcbiAgfVxuICAvKiBlc2xpbnQtZW5hYmxlIG1heC1zdGF0ZW1ldG5zICovXG59XG5cbmV4cG9ydCBkZWZhdWx0IENvbm5lY3Rpb25Nb25pdG9yO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNyYy9Db25uZWN0aW9uTW9uaXRvci5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUNBOzs7Ozs7O0FBQ0E7OztBQUdBO0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUVBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQUVBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///120\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\n/* eslint-disable */\n/**\n* Creates and returns a new, throttled version of the passed function, that,\n* when invoked repeatedly, will only actually call the original function at most\n* once per every wait milliseconds. Useful for rate-limiting events that occur\n* faster than you can keep up with.\n*\n* By default, throttle will execute the function as soon as you call it for the\n* first time, and, if you call it again any number of times during the wait\n* period, as soon as that period is over. If you'd like to disable the\n* leading-edge call, pass {leading: false}, and if you'd like to disable the\n* execution on the trailing-edge, pass {trailing: false}.\n*\n* @see http://underscorejs.org/#throttle\n**/\nexports.default = function (func, wait, options) {\n  var context, args, result;\n  var timeout = null;\n  var previous = 0;\n  if (!options) options = {};\n  var later = function later() {\n    previous = options.leading === false ? 0 : Date.now();\n    timeout = null;\n    result = func.apply(context, args);\n    if (!timeout) context = args = null;\n  };\n  return function () {\n    var now = Date.now();\n    if (!previous && options.leading === false) previous = now;\n    var remaining = wait - (now - previous);\n    context = this;\n    args = arguments;\n    if (remaining <= 0 || remaining > wait) {\n      if (timeout) {\n        clearTimeout(timeout);\n        timeout = null;\n      }\n      previous = now;\n      result = func.apply(context, args);\n      if (!timeout) context = args = null;\n    } else if (!timeout && options.trailing !== false) {\n      timeout = setTimeout(later, remaining);\n    }\n    return result;\n  };\n};\n/* eslint-enable *///# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTIxLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3NyYy91dGlscy90aHJvdHRsZS5qcz82Nzc2Il0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlICovXG4vKipcbiogQ3JlYXRlcyBhbmQgcmV0dXJucyBhIG5ldywgdGhyb3R0bGVkIHZlcnNpb24gb2YgdGhlIHBhc3NlZCBmdW5jdGlvbiwgdGhhdCxcbiogd2hlbiBpbnZva2VkIHJlcGVhdGVkbHksIHdpbGwgb25seSBhY3R1YWxseSBjYWxsIHRoZSBvcmlnaW5hbCBmdW5jdGlvbiBhdCBtb3N0XG4qIG9uY2UgcGVyIGV2ZXJ5IHdhaXQgbWlsbGlzZWNvbmRzLiBVc2VmdWwgZm9yIHJhdGUtbGltaXRpbmcgZXZlbnRzIHRoYXQgb2NjdXJcbiogZmFzdGVyIHRoYW4geW91IGNhbiBrZWVwIHVwIHdpdGguXG4qXG4qIEJ5IGRlZmF1bHQsIHRocm90dGxlIHdpbGwgZXhlY3V0ZSB0aGUgZnVuY3Rpb24gYXMgc29vbiBhcyB5b3UgY2FsbCBpdCBmb3IgdGhlXG4qIGZpcnN0IHRpbWUsIGFuZCwgaWYgeW91IGNhbGwgaXQgYWdhaW4gYW55IG51bWJlciBvZiB0aW1lcyBkdXJpbmcgdGhlIHdhaXRcbiogcGVyaW9kLCBhcyBzb29uIGFzIHRoYXQgcGVyaW9kIGlzIG92ZXIuIElmIHlvdSdkIGxpa2UgdG8gZGlzYWJsZSB0aGVcbiogbGVhZGluZy1lZGdlIGNhbGwsIHBhc3Mge2xlYWRpbmc6IGZhbHNlfSwgYW5kIGlmIHlvdSdkIGxpa2UgdG8gZGlzYWJsZSB0aGVcbiogZXhlY3V0aW9uIG9uIHRoZSB0cmFpbGluZy1lZGdlLCBwYXNzIHt0cmFpbGluZzogZmFsc2V9LlxuKlxuKiBAc2VlIGh0dHA6Ly91bmRlcnNjb3JlanMub3JnLyN0aHJvdHRsZVxuKiovXG5leHBvcnQgZGVmYXVsdCAoZnVuYywgd2FpdCwgb3B0aW9ucykgPT4ge1xuICB2YXIgY29udGV4dCwgYXJncywgcmVzdWx0O1xuICB2YXIgdGltZW91dCA9IG51bGw7XG4gIHZhciBwcmV2aW91cyA9IDA7XG4gIGlmICghb3B0aW9ucykgb3B0aW9ucyA9IHt9O1xuICB2YXIgbGF0ZXIgPSBmdW5jdGlvbigpIHtcbiAgICBwcmV2aW91cyA9IG9wdGlvbnMubGVhZGluZyA9PT0gZmFsc2UgPyAwIDogRGF0ZS5ub3coKTtcbiAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgIGlmICghdGltZW91dCkgY29udGV4dCA9IGFyZ3MgPSBudWxsO1xuICB9O1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG5vdyA9IERhdGUubm93KCk7XG4gICAgaWYgKCFwcmV2aW91cyAmJiBvcHRpb25zLmxlYWRpbmcgPT09IGZhbHNlKSBwcmV2aW91cyA9IG5vdztcbiAgICB2YXIgcmVtYWluaW5nID0gd2FpdCAtIChub3cgLSBwcmV2aW91cyk7XG4gICAgY29udGV4dCA9IHRoaXM7XG4gICAgYXJncyA9IGFyZ3VtZW50cztcbiAgICBpZiAocmVtYWluaW5nIDw9IDAgfHwgcmVtYWluaW5nID4gd2FpdCkge1xuICAgICAgaWYgKHRpbWVvdXQpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIHByZXZpb3VzID0gbm93O1xuICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgIGlmICghdGltZW91dCkgY29udGV4dCA9IGFyZ3MgPSBudWxsO1xuICAgIH0gZWxzZSBpZiAoIXRpbWVvdXQgJiYgb3B0aW9ucy50cmFpbGluZyAhPT0gZmFsc2UpIHtcbiAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCByZW1haW5pbmcpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xufVxuLyogZXNsaW50LWVuYWJsZSAqL1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNyYy91dGlscy90aHJvdHRsZS5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTs7Ozs7Ozs7Ozs7Ozs7QUFjQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///121\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar Utils = {};\n\n/**\n * ensureDate will convert a date if not already.\n **/\nUtils.ensureDate = function (date) {\n  return {\n    number: new Date(date),\n    string: new Date(Date.parse(date))\n  }[typeof date === 'undefined' ? 'undefined' : _typeof(date)] || date;\n};\n\n/**\n * formatDate will try native JavaScript toLocalDate method or build own format\n * to output.\n **/\nUtils.formatDate = function (dateParam) {\n  var date = Utils.ensureDate(dateParam);\n  if (!date.toLocaleDateString) {\n    return Utils.beautifulDate(date);\n  }\n\n  return date.toLocaleDateString();\n};\n\n/**\n * monthNames.\n **/\nUtils.monthNames = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\n\n/**\n * beautifulDate will present a date like November 25th, 2016.\n **/\nUtils.beautifulDate = function (dateParam) {\n  var date = Utils.ensureDate(dateParam);\n  var year = date.getFullYear();\n  var month = Utils.monthNames[date.getMonth()];\n  var day = date.getDate();\n  day += { 1: 'st', 2: 'nd', 3: 'rd' }[day % 10] || 'th';\n\n  var formattedDate = month + ' ' + day;\n  if (year !== new Date().getFullYear()) {\n    formattedDate += ', ' + year;\n  }\n  return formattedDate;\n};\n\n/**\n * formatTime will try native JavaScript toLocalTime method or build a own\n * format to output.\n **/\nUtils.formatTime = function (dateParam) {\n  var date = Utils.ensureDate(dateParam);\n  if (!date.toLocaleTimeString) {\n    return date.toTimeString().split(':').slice(0, 2).join(':');\n  }\n\n  return date.toLocaleTimeString();\n};\n\nexports.default = Utils;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTIyLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3NyYy91dGlscy9kYXRlSGVscGVyLmpzP2ZkMjMiXSwic291cmNlc0NvbnRlbnQiOlsiXG5sZXQgVXRpbHMgPSB7fTtcblxuLyoqXG4gKiBlbnN1cmVEYXRlIHdpbGwgY29udmVydCBhIGRhdGUgaWYgbm90IGFscmVhZHkuXG4gKiovXG5VdGlscy5lbnN1cmVEYXRlID0gZnVuY3Rpb24oZGF0ZSkge1xuICByZXR1cm4ge1xuICAgIG51bWJlcjogbmV3IERhdGUoZGF0ZSksXG4gICAgc3RyaW5nOiBuZXcgRGF0ZShEYXRlLnBhcnNlKGRhdGUpKVxuICB9W3R5cGVvZiBkYXRlXSB8fCBkYXRlO1xufVxuXG5cbi8qKlxuICogZm9ybWF0RGF0ZSB3aWxsIHRyeSBuYXRpdmUgSmF2YVNjcmlwdCB0b0xvY2FsRGF0ZSBtZXRob2Qgb3IgYnVpbGQgb3duIGZvcm1hdFxuICogdG8gb3V0cHV0LlxuICoqL1xuVXRpbHMuZm9ybWF0RGF0ZSA9IGZ1bmN0aW9uKGRhdGVQYXJhbSkge1xuICBsZXQgZGF0ZSA9IFV0aWxzLmVuc3VyZURhdGUoZGF0ZVBhcmFtKTtcbiAgaWYgKCFkYXRlLnRvTG9jYWxlRGF0ZVN0cmluZykge1xuICAgIHJldHVybiBVdGlscy5iZWF1dGlmdWxEYXRlKGRhdGUpO1xuICB9XG5cbiAgcmV0dXJuIGRhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCk7XG59XG5cbi8qKlxuICogbW9udGhOYW1lcy5cbiAqKi9cblV0aWxzLm1vbnRoTmFtZXMgPSBbXG4gICdKYW51YXJ5JywgJ0ZlYnJ1YXJ5JywgJ01hcmNoJywgJ0FwcmlsJywgJ01heScsICdKdW5lJywgJ0p1bHknLCAnQXVndXN0JyxcbiAgJ1NlcHRlbWJlcicsICdPY3RvYmVyJywgJ05vdmVtYmVyJywgJ0RlY2VtYmVyJ1xuXTtcblxuLyoqXG4gKiBiZWF1dGlmdWxEYXRlIHdpbGwgcHJlc2VudCBhIGRhdGUgbGlrZSBOb3ZlbWJlciAyNXRoLCAyMDE2LlxuICoqL1xuVXRpbHMuYmVhdXRpZnVsRGF0ZSA9IGZ1bmN0aW9uKGRhdGVQYXJhbSkge1xuICBsZXQgZGF0ZSAgICA9IFV0aWxzLmVuc3VyZURhdGUoZGF0ZVBhcmFtKTtcbiAgY29uc3QgeWVhciAgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XG4gIGNvbnN0IG1vbnRoID0gVXRpbHMubW9udGhOYW1lc1tkYXRlLmdldE1vbnRoKCldO1xuICBsZXQgZGF5ICAgICA9IGRhdGUuZ2V0RGF0ZSgpO1xuICBkYXkgKz0geyAxOiAnc3QnLCAyOiAnbmQnLCAzOiAncmQnIH1bZGF5ICUgMTBdIHx8ICd0aCc7XG5cbiAgbGV0IGZvcm1hdHRlZERhdGUgPSBgJHttb250aH0gJHtkYXl9YDtcbiAgaWYgKHllYXIgIT09IChuZXcgRGF0ZSgpKS5nZXRGdWxsWWVhcigpKSB7XG4gICAgZm9ybWF0dGVkRGF0ZSArPSBgLCAke3llYXJ9YDtcbiAgfVxuICByZXR1cm4gZm9ybWF0dGVkRGF0ZTtcbn1cblxuLyoqXG4gKiBmb3JtYXRUaW1lIHdpbGwgdHJ5IG5hdGl2ZSBKYXZhU2NyaXB0IHRvTG9jYWxUaW1lIG1ldGhvZCBvciBidWlsZCBhIG93blxuICogZm9ybWF0IHRvIG91dHB1dC5cbiAqKi9cblV0aWxzLmZvcm1hdFRpbWUgPSBmdW5jdGlvbihkYXRlUGFyYW0pIHtcbiAgbGV0IGRhdGUgPSBVdGlscy5lbnN1cmVEYXRlKGRhdGVQYXJhbSk7XG4gIGlmICghZGF0ZS50b0xvY2FsZVRpbWVTdHJpbmcpIHtcbiAgICByZXR1cm4gZGF0ZS50b1RpbWVTdHJpbmcoKS5zcGxpdCgnOicpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2xpY2UoMCwgMilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5qb2luKCc6Jyk7XG4gIH1cblxuICByZXR1cm4gZGF0ZS50b0xvY2FsZVRpbWVTdHJpbmcoKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgVXRpbHM7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc3JjL3V0aWxzL2RhdGVIZWxwZXIuanMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUVBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFJQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///122\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\n/**\n * Event Dispatcher\n *\n * Fire events on some event target.\n **/\nexports.default = function (target, msg) {\n  target.dispatchEvent(new CustomEvent('eyeson.' + msg.type, { detail: msg }));\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTIzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3NyYy91dGlscy9FdmVudERpc3BhdGNoZXIuanM/YzRkNyJdLCJzb3VyY2VzQ29udGVudCI6WyJcbi8qKlxuICogRXZlbnQgRGlzcGF0Y2hlclxuICpcbiAqIEZpcmUgZXZlbnRzIG9uIHNvbWUgZXZlbnQgdGFyZ2V0LlxuICoqL1xuZXhwb3J0IGRlZmF1bHQgKHRhcmdldCwgbXNnKSA9PiB7XG4gIHRhcmdldC5kaXNwYXRjaEV2ZW50KFxuICAgIG5ldyBDdXN0b21FdmVudCgnZXllc29uLicrbXNnLnR5cGUsIHsgZGV0YWlsOiBtc2cgfSlcbiAgKTtcbn07XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc3JjL3V0aWxzL0V2ZW50RGlzcGF0Y2hlci5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQ0E7Ozs7O0FBS0E7QUFDQTtBQUdBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///123\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Logger = __webpack_require__(/*! ../Logger */ 0);\n\nvar _Logger2 = _interopRequireDefault(_Logger);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar API_URL = 'https://api.giphy.com/v1/gifs';\n\n/**\n * Giphy API.\n **/\n\nvar GiphyApi = function () {\n  function GiphyApi(apiKey) {\n    _classCallCheck(this, GiphyApi);\n\n    this.apiKey = apiKey;\n  }\n\n  _createClass(GiphyApi, [{\n    key: 'search',\n    value: function search(query) {\n      return this.request(API_URL + '/search?q=' + query, 25);\n    }\n  }, {\n    key: 'trending',\n    value: function trending() {\n      return this.request(API_URL + '/trending?rating=g');\n    }\n  }, {\n    key: 'randomGifForQuery',\n    value: function randomGifForQuery(query) {\n      var _this = this;\n\n      return new Promise(function (res, rej) {\n        _this.search(query).then(function (_ref) {\n          var data = _ref.data;\n\n          var largerGifs = data.filter(function (img) {\n            return img.images.original_mp4.mp4_size >= 40000;\n          });\n          _Logger2.default.debug('GiphyApi::randomGif results: ', data.length);\n          _Logger2.default.debug('GiphyApi::randomGif large gifs: ', largerGifs.length);\n          return largerGifs;\n        }).then(function (gifs) {\n          var randIdx = Math.floor(Math.random() * gifs.length);\n          res(gifs[randIdx]);\n        }).catch(rej);\n      });\n    }\n  }, {\n    key: 'request',\n    value: function request(url) {\n      var limit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 6;\n\n      return fetch(new Request(url + '&api_key=' + this.apiKey + '&limit=' + limit)).then(function (response) {\n        return response.json();\n      });\n    }\n  }]);\n\n  return GiphyApi;\n}();\n\nexports.default = GiphyApi;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTI0LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3NyYy91dGlscy9HaXBoeUFwaS5qcz8wYjAzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBMb2dnZXIgZnJvbSAnLi4vTG9nZ2VyJztcbmNvbnN0IEFQSV9VUkwgPSAnaHR0cHM6Ly9hcGkuZ2lwaHkuY29tL3YxL2dpZnMnO1xuXG4vKipcbiAqIEdpcGh5IEFQSS5cbiAqKi9cbmNsYXNzIEdpcGh5QXBpIHtcbiAgY29uc3RydWN0b3IoYXBpS2V5KSB7XG4gICAgdGhpcy5hcGlLZXkgPSBhcGlLZXk7XG4gIH1cblxuICBzZWFyY2gocXVlcnkpIHtcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KGAke0FQSV9VUkx9L3NlYXJjaD9xPSR7cXVlcnl9YCwgMjUpO1xuICB9XG5cbiAgdHJlbmRpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdChgJHtBUElfVVJMfS90cmVuZGluZz9yYXRpbmc9Z2ApO1xuICB9XG5cbiAgcmFuZG9tR2lmRm9yUXVlcnkocXVlcnkpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlcywgcmVqKSA9PiB7XG4gICAgICB0aGlzLnNlYXJjaChxdWVyeSlcbiAgICAgICAgLnRoZW4oKHsgZGF0YSB9KSA9PiB7XG4gICAgICAgICAgY29uc3QgbGFyZ2VyR2lmcyA9IGRhdGEuZmlsdGVyKFxuICAgICAgICAgICAgaW1nID0+IGltZy5pbWFnZXMub3JpZ2luYWxfbXA0Lm1wNF9zaXplID49IDQwMDAwXG4gICAgICAgICAgKTtcbiAgICAgICAgICBMb2dnZXIuZGVidWcoJ0dpcGh5QXBpOjpyYW5kb21HaWYgcmVzdWx0czogJywgZGF0YS5sZW5ndGgpO1xuICAgICAgICAgIExvZ2dlci5kZWJ1ZygnR2lwaHlBcGk6OnJhbmRvbUdpZiBsYXJnZSBnaWZzOiAnLCBsYXJnZXJHaWZzLmxlbmd0aCk7XG4gICAgICAgICAgcmV0dXJuIGxhcmdlckdpZnM7XG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKGdpZnMgPT4ge1xuICAgICAgICAgIGNvbnN0IHJhbmRJZHggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBnaWZzLmxlbmd0aCk7XG4gICAgICAgICAgcmVzKGdpZnNbcmFuZElkeF0pO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2gocmVqKTtcbiAgICB9KTtcbiAgfVxuXG4gIHJlcXVlc3QodXJsLCBsaW1pdCA9IDYpIHtcbiAgICByZXR1cm4gZmV0Y2goXG4gICAgICBuZXcgUmVxdWVzdChgJHt1cmx9JmFwaV9rZXk9JHt0aGlzLmFwaUtleX0mbGltaXQ9JHtsaW1pdH1gKVxuICAgICkudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEdpcGh5QXBpO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNyYy91dGlscy9HaXBoeUFwaS5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUNBOzs7Ozs7O0FBQUE7QUFDQTtBQUNBOzs7O0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFFQTtBQUFBO0FBQ0E7Ozs7OztBQUdBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///124\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /* global gapi */\n\n\nvar _Logger = __webpack_require__(/*! ../Logger */ 0);\n\nvar _Logger2 = _interopRequireDefault(_Logger);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar API_URL = 'https://www.googleapis.com/youtube/v3';\nvar SCOPE_OPTIONS = ['https://www.googleapis.com/auth/youtube.force-ssl'];\n\n/**\n * YouTube API.\n **/\n\nvar YouTubeApi = function () {\n  /* eslint-disable max-statements */\n  function YouTubeApi(eyeson) {\n    _classCallCheck(this, YouTubeApi);\n\n    this.eyeson = eyeson;\n    this.apiKey = eyeson.config.youtube.key;\n    this.clientId = eyeson.config.youtube.client;\n    this.activated = null;\n    this.broadcastId = null;\n\n    if (!this.apiKey || !this.clientId) {\n      return;\n    }\n\n    this.activate = this.activate.bind(this);\n    this.getStream = this.getStream.bind(this);\n    this.startStream = this.startStream.bind(this);\n    this.handleError = this.handleError.bind(this);\n    this.getErrorName = this.getErrorName.bind(this);\n\n    this.initGoogleApi();\n  }\n\n  /* eslint-enable max-statements */\n\n  _createClass(YouTubeApi, [{\n    key: 'initGoogleApi',\n    value: function initGoogleApi() {\n      if (typeof gapi !== 'undefined') {\n        return;\n      }\n\n      var ga = document.createElement('script');\n      ga.type = 'text/javascript';\n      ga.async = true;\n      ga.onload = this.handleClientLoad.bind(this);\n      ga.src = '//apis.google.com/js/api.js';\n      document.body.appendChild(ga);\n    }\n  }, {\n    key: 'handleClientLoad',\n    value: function handleClientLoad() {\n      gapi.load('client:auth2', this.initClient.bind(this));\n    }\n  }, {\n    key: 'initClient',\n    value: function initClient() {\n      if (typeof gapi === 'undefined') {\n        this.handleError({\n          result: {\n            error: {\n              name: 'youtube_block',\n              message: 'Could not load Google API for YouTube Streaming. ' + 'Consider temporarily disabling your ad-blocker.'\n            }\n          }\n        });\n      }\n\n      gapi.client.init({\n        apiKey: this.apiKey,\n        clientId: this.clientId,\n        scope: SCOPE_OPTIONS.join(' ')\n      });\n      if (this.activated) {\n        this.activate();\n      }\n    }\n  }, {\n    key: 'activate',\n    value: function activate() {\n      try {\n        gapi.auth2.getAuthInstance().signIn({ prompt: 'select_account' }).then(this.getBroadcast.bind(this), this.handleError);\n      } catch (error) {\n        this.activated = true;\n        _Logger2.default.error('YouTubeApi: ', error);\n      }\n    }\n  }, {\n    key: 'deactivate',\n    value: function deactivate() {\n      this.eyeson.send({ type: 'stop_youtube' });\n    }\n  }, {\n    key: 'getBroadcast',\n    value: function getBroadcast() {\n      gapi.client.request({\n        path: API_URL + '/liveBroadcasts',\n        params: {\n          part: 'contentDetails',\n          broadcastStatus: 'upcoming',\n          broadcastType: 'persistent'\n        }\n      }).then(this.getStream, this.handleError);\n    }\n  }, {\n    key: 'getStream',\n    value: function getStream(broadcast) {\n      var items = broadcast.result.items;\n\n      if (items.length < 1) {\n        this.handleError({\n          result: {\n            error: {\n              name: 'youtube_busy',\n              message: 'There is currently another live stream running in ' + 'your YouTube channel. Please stop the active live stream ' + 'in your channel and try again in a few moments.'\n            }\n          }\n        });\n        return;\n      }\n\n      this.broadcastId = items[0].id;\n\n      gapi.client.request({\n        path: API_URL + '/liveStreams',\n        params: {\n          part: 'cdn',\n          id: items[0].contentDetails.boundStreamId\n        }\n      }).then(this.startStream, this.handleError);\n    }\n  }, {\n    key: 'getViewersCount',\n    value: function getViewersCount(broadcastId) {\n      return gapi.client.request({\n        path: API_URL + '/videos',\n        params: {\n          id: broadcastId,\n          part: 'liveStreamingDetails'\n        }\n      }).then(function (response) {\n        var _response$result$item = _slicedToArray(response.result.items, 1),\n            video = _response$result$item[0];\n\n        if (!video) {\n          return null;\n        }\n        return video.liveStreamingDetails.concurrentViewers;\n      });\n    }\n  }, {\n    key: 'startStream',\n    value: function startStream(stream) {\n      var items = stream.result.items;\n      var _items$0$cdn$ingestio = items[0].cdn.ingestionInfo,\n          ingestionAddress = _items$0$cdn$ingestio.ingestionAddress,\n          streamName = _items$0$cdn$ingestio.streamName;\n\n\n      this.eyeson.send({\n        type: 'start_youtube',\n        broadcastId: this.broadcastId,\n        playerUrl: 'https://youtu.be/' + this.broadcastId,\n        streamUrl: ingestionAddress + '/' + streamName\n      });\n    }\n  }, {\n    key: 'getErrorName',\n    value: function getErrorName(error) {\n      return error.toLowerCase().split(' ').slice(0, 3).join('_') || 'default';\n    }\n  }, {\n    key: 'handleError',\n    value: function handleError(response) {\n      if (response.result) {\n        var name = 'youtube_' + (response.result.error.code || 'default');\n        response.result.error.name = name;\n      } else {\n        var errorName = this.getErrorName(response.error);\n        response.result = {\n          error: {\n            name: 'youtube_' + errorName,\n            message: errorName\n          }\n        };\n      }\n\n      this.eyeson.send({\n        type: 'handle_youtube_error',\n        error: response.result.error\n      });\n    }\n  }]);\n\n  return YouTubeApi;\n}();\n\nexports.default = YouTubeApi;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTI1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3NyYy91dGlscy9Zb3VUdWJlQXBpLmpzPzQ5ZmUiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZ2xvYmFsIGdhcGkgKi9cbmltcG9ydCBMb2dnZXIgZnJvbSAnLi4vTG9nZ2VyJztcblxuY29uc3QgQVBJX1VSTCA9ICdodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS95b3V0dWJlL3YzJztcbmNvbnN0IFNDT1BFX09QVElPTlMgPSBbJ2h0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2F1dGgveW91dHViZS5mb3JjZS1zc2wnXTtcblxuLyoqXG4gKiBZb3VUdWJlIEFQSS5cbiAqKi9cbmNsYXNzIFlvdVR1YmVBcGkge1xuICAvKiBlc2xpbnQtZGlzYWJsZSBtYXgtc3RhdGVtZW50cyAqL1xuICBjb25zdHJ1Y3RvcihleWVzb24pIHtcbiAgICB0aGlzLmV5ZXNvbiA9IGV5ZXNvbjtcbiAgICB0aGlzLmFwaUtleSA9IGV5ZXNvbi5jb25maWcueW91dHViZS5rZXk7XG4gICAgdGhpcy5jbGllbnRJZCA9IGV5ZXNvbi5jb25maWcueW91dHViZS5jbGllbnQ7XG4gICAgdGhpcy5hY3RpdmF0ZWQgPSBudWxsO1xuICAgIHRoaXMuYnJvYWRjYXN0SWQgPSBudWxsO1xuXG4gICAgaWYgKCF0aGlzLmFwaUtleSB8fCAhdGhpcy5jbGllbnRJZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuYWN0aXZhdGUgPSB0aGlzLmFjdGl2YXRlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5nZXRTdHJlYW0gPSB0aGlzLmdldFN0cmVhbS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuc3RhcnRTdHJlYW0gPSB0aGlzLnN0YXJ0U3RyZWFtLmJpbmQodGhpcyk7XG4gICAgdGhpcy5oYW5kbGVFcnJvciA9IHRoaXMuaGFuZGxlRXJyb3IuYmluZCh0aGlzKTtcbiAgICB0aGlzLmdldEVycm9yTmFtZSA9IHRoaXMuZ2V0RXJyb3JOYW1lLmJpbmQodGhpcyk7XG5cbiAgICB0aGlzLmluaXRHb29nbGVBcGkoKTtcbiAgfVxuXG4gIC8qIGVzbGludC1lbmFibGUgbWF4LXN0YXRlbWVudHMgKi9cblxuICBpbml0R29vZ2xlQXBpKCkge1xuICAgIGlmICh0eXBlb2YgZ2FwaSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBnYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuICAgIGdhLnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0JztcbiAgICBnYS5hc3luYyA9IHRydWU7XG4gICAgZ2Eub25sb2FkID0gdGhpcy5oYW5kbGVDbGllbnRMb2FkLmJpbmQodGhpcyk7XG4gICAgZ2Euc3JjID0gJy8vYXBpcy5nb29nbGUuY29tL2pzL2FwaS5qcyc7XG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChnYSk7XG4gIH1cblxuICBoYW5kbGVDbGllbnRMb2FkKCkge1xuICAgIGdhcGkubG9hZCgnY2xpZW50OmF1dGgyJywgdGhpcy5pbml0Q2xpZW50LmJpbmQodGhpcykpO1xuICB9XG5cbiAgaW5pdENsaWVudCgpIHtcbiAgICBpZiAodHlwZW9mIGdhcGkgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLmhhbmRsZUVycm9yKHtcbiAgICAgICAgcmVzdWx0OiB7XG4gICAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICAgIG5hbWU6ICd5b3V0dWJlX2Jsb2NrJyxcbiAgICAgICAgICAgIG1lc3NhZ2U6XG4gICAgICAgICAgICAgICdDb3VsZCBub3QgbG9hZCBHb29nbGUgQVBJIGZvciBZb3VUdWJlIFN0cmVhbWluZy4gJyArXG4gICAgICAgICAgICAgICdDb25zaWRlciB0ZW1wb3JhcmlseSBkaXNhYmxpbmcgeW91ciBhZC1ibG9ja2VyLidcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGdhcGkuY2xpZW50LmluaXQoe1xuICAgICAgYXBpS2V5OiB0aGlzLmFwaUtleSxcbiAgICAgIGNsaWVudElkOiB0aGlzLmNsaWVudElkLFxuICAgICAgc2NvcGU6IFNDT1BFX09QVElPTlMuam9pbignICcpXG4gICAgfSk7XG4gICAgaWYgKHRoaXMuYWN0aXZhdGVkKSB7XG4gICAgICB0aGlzLmFjdGl2YXRlKCk7XG4gICAgfVxuICB9XG5cbiAgYWN0aXZhdGUoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGdhcGkuYXV0aDJcbiAgICAgICAgLmdldEF1dGhJbnN0YW5jZSgpXG4gICAgICAgIC5zaWduSW4oeyBwcm9tcHQ6ICdzZWxlY3RfYWNjb3VudCcgfSlcbiAgICAgICAgLnRoZW4odGhpcy5nZXRCcm9hZGNhc3QuYmluZCh0aGlzKSwgdGhpcy5oYW5kbGVFcnJvcik7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRoaXMuYWN0aXZhdGVkID0gdHJ1ZTtcbiAgICAgIExvZ2dlci5lcnJvcignWW91VHViZUFwaTogJywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIGRlYWN0aXZhdGUoKSB7XG4gICAgdGhpcy5leWVzb24uc2VuZCh7IHR5cGU6ICdzdG9wX3lvdXR1YmUnIH0pO1xuICB9XG5cbiAgZ2V0QnJvYWRjYXN0KCkge1xuICAgIGdhcGkuY2xpZW50XG4gICAgICAucmVxdWVzdCh7XG4gICAgICAgIHBhdGg6IEFQSV9VUkwgKyAnL2xpdmVCcm9hZGNhc3RzJyxcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgcGFydDogJ2NvbnRlbnREZXRhaWxzJyxcbiAgICAgICAgICBicm9hZGNhc3RTdGF0dXM6ICd1cGNvbWluZycsXG4gICAgICAgICAgYnJvYWRjYXN0VHlwZTogJ3BlcnNpc3RlbnQnXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAudGhlbih0aGlzLmdldFN0cmVhbSwgdGhpcy5oYW5kbGVFcnJvcik7XG4gIH1cblxuICBnZXRTdHJlYW0oYnJvYWRjYXN0KSB7XG4gICAgY29uc3QgeyBpdGVtcyB9ID0gYnJvYWRjYXN0LnJlc3VsdDtcbiAgICBpZiAoaXRlbXMubGVuZ3RoIDwgMSkge1xuICAgICAgdGhpcy5oYW5kbGVFcnJvcih7XG4gICAgICAgIHJlc3VsdDoge1xuICAgICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgICBuYW1lOiAneW91dHViZV9idXN5JyxcbiAgICAgICAgICAgIG1lc3NhZ2U6XG4gICAgICAgICAgICAgICdUaGVyZSBpcyBjdXJyZW50bHkgYW5vdGhlciBsaXZlIHN0cmVhbSBydW5uaW5nIGluICcgK1xuICAgICAgICAgICAgICAneW91ciBZb3VUdWJlIGNoYW5uZWwuIFBsZWFzZSBzdG9wIHRoZSBhY3RpdmUgbGl2ZSBzdHJlYW0gJyArXG4gICAgICAgICAgICAgICdpbiB5b3VyIGNoYW5uZWwgYW5kIHRyeSBhZ2FpbiBpbiBhIGZldyBtb21lbnRzLidcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuYnJvYWRjYXN0SWQgPSBpdGVtc1swXS5pZDtcblxuICAgIGdhcGkuY2xpZW50XG4gICAgICAucmVxdWVzdCh7XG4gICAgICAgIHBhdGg6IEFQSV9VUkwgKyAnL2xpdmVTdHJlYW1zJyxcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgcGFydDogJ2NkbicsXG4gICAgICAgICAgaWQ6IGl0ZW1zWzBdLmNvbnRlbnREZXRhaWxzLmJvdW5kU3RyZWFtSWRcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC50aGVuKHRoaXMuc3RhcnRTdHJlYW0sIHRoaXMuaGFuZGxlRXJyb3IpO1xuICB9XG5cbiAgZ2V0Vmlld2Vyc0NvdW50KGJyb2FkY2FzdElkKSB7XG4gICAgcmV0dXJuIGdhcGkuY2xpZW50XG4gICAgICAucmVxdWVzdCh7XG4gICAgICAgIHBhdGg6IEFQSV9VUkwgKyAnL3ZpZGVvcycsXG4gICAgICAgIHBhcmFtczoge1xuICAgICAgICAgIGlkOiBicm9hZGNhc3RJZCxcbiAgICAgICAgICBwYXJ0OiAnbGl2ZVN0cmVhbWluZ0RldGFpbHMnXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgIGNvbnN0IFt2aWRlb10gPSByZXNwb25zZS5yZXN1bHQuaXRlbXM7XG4gICAgICAgIGlmICghdmlkZW8pIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmlkZW8ubGl2ZVN0cmVhbWluZ0RldGFpbHMuY29uY3VycmVudFZpZXdlcnM7XG4gICAgICB9KTtcbiAgfVxuXG4gIHN0YXJ0U3RyZWFtKHN0cmVhbSkge1xuICAgIGNvbnN0IHsgaXRlbXMgfSA9IHN0cmVhbS5yZXN1bHQ7XG4gICAgY29uc3QgeyBpbmdlc3Rpb25BZGRyZXNzLCBzdHJlYW1OYW1lIH0gPSBpdGVtc1swXS5jZG4uaW5nZXN0aW9uSW5mbztcblxuICAgIHRoaXMuZXllc29uLnNlbmQoe1xuICAgICAgdHlwZTogJ3N0YXJ0X3lvdXR1YmUnLFxuICAgICAgYnJvYWRjYXN0SWQ6IHRoaXMuYnJvYWRjYXN0SWQsXG4gICAgICBwbGF5ZXJVcmw6IGBodHRwczovL3lvdXR1LmJlLyR7dGhpcy5icm9hZGNhc3RJZH1gLFxuICAgICAgc3RyZWFtVXJsOiBgJHtpbmdlc3Rpb25BZGRyZXNzfS8ke3N0cmVhbU5hbWV9YFxuICAgIH0pO1xuICB9XG5cbiAgZ2V0RXJyb3JOYW1lKGVycm9yKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIGVycm9yXG4gICAgICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgICAgIC5zcGxpdCgnICcpXG4gICAgICAgIC5zbGljZSgwLCAzKVxuICAgICAgICAuam9pbignXycpIHx8ICdkZWZhdWx0J1xuICAgICk7XG4gIH1cblxuICBoYW5kbGVFcnJvcihyZXNwb25zZSkge1xuICAgIGlmIChyZXNwb25zZS5yZXN1bHQpIHtcbiAgICAgIGNvbnN0IG5hbWUgPSAneW91dHViZV8nICsgKHJlc3BvbnNlLnJlc3VsdC5lcnJvci5jb2RlIHx8ICdkZWZhdWx0Jyk7XG4gICAgICByZXNwb25zZS5yZXN1bHQuZXJyb3IubmFtZSA9IG5hbWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGVycm9yTmFtZSA9IHRoaXMuZ2V0RXJyb3JOYW1lKHJlc3BvbnNlLmVycm9yKTtcbiAgICAgIHJlc3BvbnNlLnJlc3VsdCA9IHtcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBuYW1lOiBgeW91dHViZV8ke2Vycm9yTmFtZX1gLFxuICAgICAgICAgIG1lc3NhZ2U6IGVycm9yTmFtZVxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cblxuICAgIHRoaXMuZXllc29uLnNlbmQoe1xuICAgICAgdHlwZTogJ2hhbmRsZV95b3V0dWJlX2Vycm9yJyxcbiAgICAgIGVycm9yOiByZXNwb25zZS5yZXN1bHQuZXJyb3JcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBZb3VUdWJlQXBpO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNyYy91dGlscy9Zb3VUdWJlQXBpLmpzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7Ozs7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFEQTtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUZBO0FBU0E7OztBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFEQTtBQVdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFGQTtBQVFBOzs7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUZBO0FBT0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BOzs7QUFFQTtBQUNBO0FBT0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBOzs7Ozs7QUFHQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///125\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/* global FB */\n\n/**\n * Facebook API.\n **/\nvar FacebookApi = function () {\n  /* eslint-disable max-statements */\n  function FacebookApi(eyeson) {\n    _classCallCheck(this, FacebookApi);\n\n    this.eyeson = eyeson;\n    this.apiKey = eyeson.config.facebook.key;\n    this.stream = null;\n    this.permalLinkUrl = 'default-permalink-url';\n\n    if (!this.apiKey) {\n      return;\n    }\n\n    this.sendStop = this.sendStop.bind(this);\n    this.loggedIn = this.loggedIn.bind(this);\n    this.fetchLink = this.fetchLink.bind(this);\n    this.startStream = this.startStream.bind(this);\n    this.handleError = this.handleError.bind(this);\n    this.streamPublished = this.streamPublished.bind(this);\n\n    this.initFacebookApi();\n  }\n  /* eslint-enable max-statements */\n\n  _createClass(FacebookApi, [{\n    key: 'initFacebookApi',\n    value: function initFacebookApi() {\n      var _this = this;\n\n      if (typeof FB !== 'undefined') {\n        return;\n      }\n\n      window.fbAsyncInit = function () {\n        FB.init({\n          appId: _this.apiKey,\n          xfbml: true,\n          version: 'v2.9',\n          autoLogAppEvents: true\n        });\n        FB.AppEvents.logPageView();\n      };\n\n      /* eslint-disable */\n      (function (d, s, id) {\n        var js,\n            fjs = d.getElementsByTagName(s)[0];\n        if (d.getElementById(id)) {\n          return;\n        }\n        js = d.createElement(s);\n        js.id = id;\n        js.src = '//connect.facebook.net/en_US/sdk.js';\n        fjs.parentNode.insertBefore(js, fjs);\n      })(document, 'script', 'facebook-jssdk');\n      /* eslint-enable */\n    }\n\n    /**\n     * Start live stream process here.\n     **/\n\n  }, {\n    key: 'activate',\n    value: function activate() {\n      FB.ui({\n        display: 'popup',\n        method: 'live_broadcast',\n        phase: 'create'\n      }, this.startStream);\n    }\n\n    /**\n     * Inovked _after_ activation.\n     **/\n\n  }, {\n    key: 'publish',\n    value: function publish() {\n      FB.ui({\n        display: 'popup',\n        method: 'live_broadcast',\n        phase: 'publish',\n        broadcast_data: this.stream // eslint-disable-line camelcase\n      }, this.streamPublished);\n    }\n\n    /**\n     * Inovked _after_ publish.\n     **/\n\n  }, {\n    key: 'login',\n    value: function login() {\n      FB.login(this.loggedIn, { scope: 'user_videos' });\n    }\n\n    /**\n     * Deactivate the stream.\n     **/\n\n  }, {\n    key: 'deactivate',\n    value: function deactivate() {\n      this.stream = null;\n      this.sendStop();\n    }\n\n    /**\n     * Wrapper, only send stop when we have a stream.\n     **/\n\n  }, {\n    key: 'sendStop',\n    value: function sendStop() {\n      return this.stream ? this.eyeson.send({ type: 'stop_facebook' }) : null;\n    }\n  }, {\n    key: 'getError',\n    value: function getError(response) {\n      var error = { result: { error: { message: 'user closed popup' } } };\n      if (response && response.error_message) {\n        error.result.error.message = response.error_message;\n      }\n      return error;\n    }\n  }, {\n    key: 'startStream',\n    value: function startStream(stream) {\n      if (!stream || stream.error_message) {\n        this.handleError(this.getError(stream));\n        return;\n      }\n      this.stream = stream;\n      this.eyeson.send({\n        type: 'start_facebook',\n        streamUrl: stream.stream_url\n      });\n    }\n  }, {\n    key: 'streamPublished',\n    value: function streamPublished(response) {\n      if (!response || response.error_message) {\n        this.handleError(this.getError(response));\n        return;\n      }\n      this.fetchLink();\n      this.eyeson.send({ type: 'facebook_published' });\n    }\n  }, {\n    key: 'loggedIn',\n    value: function loggedIn(response) {\n      // If someone closes the popup or cancels we actually get undefined for\n      // authResponse & status\n      if (!response.authResponse && !response.status) {\n        this.handleError(this.getError(response));\n        return;\n      }\n\n      this.permalLinkUrl = 'https://facebook.com/' + response.authResponse.userID;\n      this.eyeson.send({ type: 'facebook_logged_in' });\n    }\n  }, {\n    key: 'fetchLink',\n    value: function fetchLink() {\n      var _this2 = this;\n\n      FB.api('/' + this.stream.id + '?fields=permalink_url', function (response) {\n        // fallback to the users profile page, in case we don't get a\n        // permalink_url\n        if (!response.permalink_url || response.error_message) {\n          response.permalink_url = _this2.permalLinkUrl; // eslint-disable-line camelcase\n        }\n\n        var playerUrl = response.permalink_url.includes('https://facebook.com') ? response.permalink_url : 'https://facebook.com' + response.permalink_url;\n\n        _this2.eyeson.send({\n          type: 'publish_broadcast',\n          playerUrl: playerUrl\n        });\n      });\n    }\n  }, {\n    key: 'handleError',\n    value: function handleError(response) {\n      response.result.error.name = 'facebook:closed';\n      this.sendStop();\n      this.eyeson.send({\n        type: 'handle_facebook_error',\n        error: response.result.error\n      });\n    }\n  }]);\n\n  return FacebookApi;\n}();\n\nexports.default = FacebookApi;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTI2LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3NyYy91dGlscy9GYWNlYm9va0FwaS5qcz8xZTAxIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGdsb2JhbCBGQiAqL1xuXG4vKipcbiAqIEZhY2Vib29rIEFQSS5cbiAqKi9cbmNsYXNzIEZhY2Vib29rQXBpIHtcbiAgLyogZXNsaW50LWRpc2FibGUgbWF4LXN0YXRlbWVudHMgKi9cbiAgY29uc3RydWN0b3IoZXllc29uKSB7XG4gICAgdGhpcy5leWVzb24gPSBleWVzb247XG4gICAgdGhpcy5hcGlLZXkgPSBleWVzb24uY29uZmlnLmZhY2Vib29rLmtleTtcbiAgICB0aGlzLnN0cmVhbSA9IG51bGw7XG4gICAgdGhpcy5wZXJtYWxMaW5rVXJsID0gJ2RlZmF1bHQtcGVybWFsaW5rLXVybCc7XG5cbiAgICBpZiAoIXRoaXMuYXBpS2V5KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5zZW5kU3RvcCA9IHRoaXMuc2VuZFN0b3AuYmluZCh0aGlzKTtcbiAgICB0aGlzLmxvZ2dlZEluID0gdGhpcy5sb2dnZWRJbi5iaW5kKHRoaXMpO1xuICAgIHRoaXMuZmV0Y2hMaW5rID0gdGhpcy5mZXRjaExpbmsuYmluZCh0aGlzKTtcbiAgICB0aGlzLnN0YXJ0U3RyZWFtID0gdGhpcy5zdGFydFN0cmVhbS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuaGFuZGxlRXJyb3IgPSB0aGlzLmhhbmRsZUVycm9yLmJpbmQodGhpcyk7XG4gICAgdGhpcy5zdHJlYW1QdWJsaXNoZWQgPSB0aGlzLnN0cmVhbVB1Ymxpc2hlZC5iaW5kKHRoaXMpO1xuXG4gICAgdGhpcy5pbml0RmFjZWJvb2tBcGkoKTtcbiAgfVxuICAvKiBlc2xpbnQtZW5hYmxlIG1heC1zdGF0ZW1lbnRzICovXG5cbiAgaW5pdEZhY2Vib29rQXBpKCkge1xuICAgIGlmICh0eXBlb2YgRkIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgd2luZG93LmZiQXN5bmNJbml0ID0gKCkgPT4ge1xuICAgICAgRkIuaW5pdCh7XG4gICAgICAgIGFwcElkOiB0aGlzLmFwaUtleSxcbiAgICAgICAgeGZibWw6IHRydWUsXG4gICAgICAgIHZlcnNpb246ICd2Mi45JyxcbiAgICAgICAgYXV0b0xvZ0FwcEV2ZW50czogdHJ1ZVxuICAgICAgfSk7XG4gICAgICBGQi5BcHBFdmVudHMubG9nUGFnZVZpZXcoKTtcbiAgICB9O1xuXG4gICAgLyogZXNsaW50LWRpc2FibGUgKi9cbiAgICAoZnVuY3Rpb24oZCwgcywgaWQpIHtcbiAgICAgIHZhciBqcyxcbiAgICAgICAgZmpzID0gZC5nZXRFbGVtZW50c0J5VGFnTmFtZShzKVswXTtcbiAgICAgIGlmIChkLmdldEVsZW1lbnRCeUlkKGlkKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBqcyA9IGQuY3JlYXRlRWxlbWVudChzKTtcbiAgICAgIGpzLmlkID0gaWQ7XG4gICAgICBqcy5zcmMgPSAnLy9jb25uZWN0LmZhY2Vib29rLm5ldC9lbl9VUy9zZGsuanMnO1xuICAgICAgZmpzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGpzLCBmanMpO1xuICAgIH0pKGRvY3VtZW50LCAnc2NyaXB0JywgJ2ZhY2Vib29rLWpzc2RrJyk7XG4gICAgLyogZXNsaW50LWVuYWJsZSAqL1xuICB9XG5cbiAgLyoqXG4gICAqIFN0YXJ0IGxpdmUgc3RyZWFtIHByb2Nlc3MgaGVyZS5cbiAgICoqL1xuICBhY3RpdmF0ZSgpIHtcbiAgICBGQi51aShcbiAgICAgIHtcbiAgICAgICAgZGlzcGxheTogJ3BvcHVwJyxcbiAgICAgICAgbWV0aG9kOiAnbGl2ZV9icm9hZGNhc3QnLFxuICAgICAgICBwaGFzZTogJ2NyZWF0ZSdcbiAgICAgIH0sXG4gICAgICB0aGlzLnN0YXJ0U3RyZWFtXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbm92a2VkIF9hZnRlcl8gYWN0aXZhdGlvbi5cbiAgICoqL1xuICBwdWJsaXNoKCkge1xuICAgIEZCLnVpKFxuICAgICAge1xuICAgICAgICBkaXNwbGF5OiAncG9wdXAnLFxuICAgICAgICBtZXRob2Q6ICdsaXZlX2Jyb2FkY2FzdCcsXG4gICAgICAgIHBoYXNlOiAncHVibGlzaCcsXG4gICAgICAgIGJyb2FkY2FzdF9kYXRhOiB0aGlzLnN0cmVhbSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGNhbWVsY2FzZVxuICAgICAgfSxcbiAgICAgIHRoaXMuc3RyZWFtUHVibGlzaGVkXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbm92a2VkIF9hZnRlcl8gcHVibGlzaC5cbiAgICoqL1xuICBsb2dpbigpIHtcbiAgICBGQi5sb2dpbih0aGlzLmxvZ2dlZEluLCB7IHNjb3BlOiAndXNlcl92aWRlb3MnIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIERlYWN0aXZhdGUgdGhlIHN0cmVhbS5cbiAgICoqL1xuICBkZWFjdGl2YXRlKCkge1xuICAgIHRoaXMuc3RyZWFtID0gbnVsbDtcbiAgICB0aGlzLnNlbmRTdG9wKCk7XG4gIH1cblxuICAvKipcbiAgICogV3JhcHBlciwgb25seSBzZW5kIHN0b3Agd2hlbiB3ZSBoYXZlIGEgc3RyZWFtLlxuICAgKiovXG4gIHNlbmRTdG9wKCkge1xuICAgIHJldHVybiB0aGlzLnN0cmVhbSA/IHRoaXMuZXllc29uLnNlbmQoeyB0eXBlOiAnc3RvcF9mYWNlYm9vaycgfSkgOiBudWxsO1xuICB9XG5cbiAgZ2V0RXJyb3IocmVzcG9uc2UpIHtcbiAgICBsZXQgZXJyb3IgPSB7IHJlc3VsdDogeyBlcnJvcjogeyBtZXNzYWdlOiAndXNlciBjbG9zZWQgcG9wdXAnIH0gfSB9O1xuICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5lcnJvcl9tZXNzYWdlKSB7XG4gICAgICBlcnJvci5yZXN1bHQuZXJyb3IubWVzc2FnZSA9IHJlc3BvbnNlLmVycm9yX21lc3NhZ2U7XG4gICAgfVxuICAgIHJldHVybiBlcnJvcjtcbiAgfVxuXG4gIHN0YXJ0U3RyZWFtKHN0cmVhbSkge1xuICAgIGlmICghc3RyZWFtIHx8IHN0cmVhbS5lcnJvcl9tZXNzYWdlKSB7XG4gICAgICB0aGlzLmhhbmRsZUVycm9yKHRoaXMuZ2V0RXJyb3Ioc3RyZWFtKSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuc3RyZWFtID0gc3RyZWFtO1xuICAgIHRoaXMuZXllc29uLnNlbmQoe1xuICAgICAgdHlwZTogJ3N0YXJ0X2ZhY2Vib29rJyxcbiAgICAgIHN0cmVhbVVybDogc3RyZWFtLnN0cmVhbV91cmxcbiAgICB9KTtcbiAgfVxuXG4gIHN0cmVhbVB1Ymxpc2hlZChyZXNwb25zZSkge1xuICAgIGlmICghcmVzcG9uc2UgfHwgcmVzcG9uc2UuZXJyb3JfbWVzc2FnZSkge1xuICAgICAgdGhpcy5oYW5kbGVFcnJvcih0aGlzLmdldEVycm9yKHJlc3BvbnNlKSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuZmV0Y2hMaW5rKCk7XG4gICAgdGhpcy5leWVzb24uc2VuZCh7IHR5cGU6ICdmYWNlYm9va19wdWJsaXNoZWQnIH0pO1xuICB9XG5cbiAgbG9nZ2VkSW4ocmVzcG9uc2UpIHtcbiAgICAvLyBJZiBzb21lb25lIGNsb3NlcyB0aGUgcG9wdXAgb3IgY2FuY2VscyB3ZSBhY3R1YWxseSBnZXQgdW5kZWZpbmVkIGZvclxuICAgIC8vIGF1dGhSZXNwb25zZSAmIHN0YXR1c1xuICAgIGlmICghcmVzcG9uc2UuYXV0aFJlc3BvbnNlICYmICFyZXNwb25zZS5zdGF0dXMpIHtcbiAgICAgIHRoaXMuaGFuZGxlRXJyb3IodGhpcy5nZXRFcnJvcihyZXNwb25zZSkpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMucGVybWFsTGlua1VybCA9IGBodHRwczovL2ZhY2Vib29rLmNvbS8ke3Jlc3BvbnNlLmF1dGhSZXNwb25zZS51c2VySUR9YDtcbiAgICB0aGlzLmV5ZXNvbi5zZW5kKHsgdHlwZTogJ2ZhY2Vib29rX2xvZ2dlZF9pbicgfSk7XG4gIH1cblxuICBmZXRjaExpbmsoKSB7XG4gICAgRkIuYXBpKGAvJHt0aGlzLnN0cmVhbS5pZH0/ZmllbGRzPXBlcm1hbGlua191cmxgLCByZXNwb25zZSA9PiB7XG4gICAgICAvLyBmYWxsYmFjayB0byB0aGUgdXNlcnMgcHJvZmlsZSBwYWdlLCBpbiBjYXNlIHdlIGRvbid0IGdldCBhXG4gICAgICAvLyBwZXJtYWxpbmtfdXJsXG4gICAgICBpZiAoIXJlc3BvbnNlLnBlcm1hbGlua191cmwgfHwgcmVzcG9uc2UuZXJyb3JfbWVzc2FnZSkge1xuICAgICAgICByZXNwb25zZS5wZXJtYWxpbmtfdXJsID0gdGhpcy5wZXJtYWxMaW5rVXJsOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGNhbWVsY2FzZVxuICAgICAgfVxuXG4gICAgICBsZXQgcGxheWVyVXJsID0gcmVzcG9uc2UucGVybWFsaW5rX3VybC5pbmNsdWRlcygnaHR0cHM6Ly9mYWNlYm9vay5jb20nKVxuICAgICAgICA/IHJlc3BvbnNlLnBlcm1hbGlua191cmxcbiAgICAgICAgOiBgaHR0cHM6Ly9mYWNlYm9vay5jb20ke3Jlc3BvbnNlLnBlcm1hbGlua191cmx9YDtcblxuICAgICAgdGhpcy5leWVzb24uc2VuZCh7XG4gICAgICAgIHR5cGU6ICdwdWJsaXNoX2Jyb2FkY2FzdCcsXG4gICAgICAgIHBsYXllclVybDogcGxheWVyVXJsXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGhhbmRsZUVycm9yKHJlc3BvbnNlKSB7XG4gICAgcmVzcG9uc2UucmVzdWx0LmVycm9yLm5hbWUgPSAnZmFjZWJvb2s6Y2xvc2VkJztcbiAgICB0aGlzLnNlbmRTdG9wKCk7XG4gICAgdGhpcy5leWVzb24uc2VuZCh7XG4gICAgICB0eXBlOiAnaGFuZGxlX2ZhY2Vib29rX2Vycm9yJyxcbiAgICAgIGVycm9yOiByZXNwb25zZS5yZXN1bHQuZXJyb3JcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBGYWNlYm9va0FwaTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBzcmMvdXRpbHMvRmFjZWJvb2tBcGkuanMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFIQTtBQU9BO0FBQ0E7QUFDQTs7Ozs7O0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFRQTtBQUNBO0FBQ0E7Ozs7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FBR0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBOzs7Ozs7QUFHQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///126\n")}])})},function(e,t,n){"use strict";var i=n(0),c=n.n(i),a=n(56),r=n.n(a),l=n(57),o=(n.n(l),n(59)),s=(n.n(o),n(60));n.n(s);t.a=function(e){var t=e.title;return c.a.createElement(l.Toolbar,null,c.a.createElement(l.ToolbarRow,null,c.a.createElement(l.ToolbarSection,{alignStart:!0},c.a.createElement("img",{src:r.a,alt:"eyeson Logo",className:"Toolbar-logo"}),c.a.createElement(l.ToolbarTitle,null,t)),c.a.createElement(l.ToolbarSection,{alignEnd:!0},c.a.createElement(o.Button,{tag:"a",target:"_blank",rel:"noopener",href:"https://twitter.com/eyeson_team",unelevated:!0},"Twitter"),c.a.createElement(o.Button,{tag:"a",target:"_blank",rel:"noopener",href:"https://github.com/eyeson-team",unelevated:!0},"GitHub"))))}},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAH4AAAAgCAYAAADUp8wPAAAABGdBTUEAALGPC/xhBQAACjppQ0NQUGhvdG9zaG9wIElDQyBwcm9maWxlAABIiZ2Wd1RU1xaHz713eqHNMBQpQ++9DSC9N6nSRGGYGWAoAw4zNLEhogIRRUQEFUGCIgaMhiKxIoqFgGDBHpAgoMRgFFFReTOyVnTl5b2Xl98fZ31rn733PWfvfda6AJC8/bm8dFgKgDSegB/i5UqPjIqmY/sBDPAAA8wAYLIyMwJCPcOASD4ebvRMkRP4IgiAN3fEKwA3jbyD6HTw/0malcEXiNIEidiCzclkibhQxKnZggyxfUbE1PgUMcMoMfNFBxSxvJgTF9nws88iO4uZncZji1h85gx2GlvMPSLemiXkiBjxF3FRFpeTLeJbItZMFaZxRfxWHJvGYWYCgCKJ7QIOK0nEpiIm8cNC3ES8FAAcKfErjv+KBZwcgfhSbukZuXxuYpKArsvSo5vZ2jLo3pzsVI5AYBTEZKUw+Wy6W3paBpOXC8DinT9LRlxbuqjI1ma21tZG5sZmXxXqv27+TYl7u0ivgj/3DKL1fbH9lV96PQCMWVFtdnyxxe8FoGMzAPL3v9g0DwIgKepb+8BX96GJ5yVJIMiwMzHJzs425nJYxuKC/qH/6fA39NX3jMXp/igP3Z2TwBSmCujiurHSU9OFfHpmBpPFoRv9eYj/ceBfn8MwhJPA4XN4oohw0ZRxeYmidvPYXAE3nUfn8v5TE/9h2J+0ONciURo+AWqsMZAaoALk1z6AohABEnNAtAP90Td/fDgQv7wI1YnFuf8s6N+zwmXiJZOb+DnOLSSMzhLysxb3xM8SoAEBSAIqUAAqQAPoAiNgDmyAPXAGHsAXBIIwEAVWARZIAmmAD7JBPtgIikAJ2AF2g2pQCxpAE2gBJ0AHOA0ugMvgOrgBboMHYASMg+dgBrwB8xAEYSEyRIEUIFVICzKAzCEG5Ah5QP5QCBQFxUGJEA8SQvnQJqgEKoeqoTqoCfoeOgVdgK5Cg9A9aBSagn6H3sMITIKpsDKsDZvADNgF9oPD4JVwIrwazoML4e1wFVwPH4Pb4Qvwdfg2PAI/h2cRgBARGqKGGCEMxA0JRKKRBISPrEOKkUqkHmlBupBe5CYygkwj71AYFAVFRxmh7FHeqOUoFmo1ah2qFFWNOoJqR/WgbqJGUTOoT2gyWgltgLZD+6Aj0YnobHQRuhLdiG5DX0LfRo+j32AwGBpGB2OD8cZEYZIxazClmP2YVsx5zCBmDDOLxWIVsAZYB2wglokVYIuwe7HHsOewQ9hx7FscEaeKM8d54qJxPFwBrhJ3FHcWN4SbwM3jpfBaeDt8IJ6Nz8WX4RvwXfgB/Dh+niBN0CE4EMIIyYSNhCpCC+ES4SHhFZFIVCfaEoOJXOIGYhXxOPEKcZT4jiRD0ie5kWJIQtJ20mHSedI90isymaxNdiZHkwXk7eQm8kXyY/JbCYqEsYSPBFtivUSNRLvEkMQLSbyklqSL5CrJPMlKyZOSA5LTUngpbSk3KabUOqkaqVNSw1Kz0hRpM+lA6TTpUumj0lelJ2WwMtoyHjJsmUKZQzIXZcYoCEWD4kZhUTZRGiiXKONUDFWH6kNNppZQv6P2U2dkZWQtZcNlc2RrZM/IjtAQmjbNh5ZKK6OdoN2hvZdTlnOR48htk2uRG5Kbk18i7yzPkS+Wb5W/Lf9ega7goZCisFOhQ+GRIkpRXzFYMVvxgOIlxekl1CX2S1hLipecWHJfCVbSVwpRWqN0SKlPaVZZRdlLOUN5r/JF5WkVmoqzSrJKhcpZlSlViqqjKle1QvWc6jO6LN2FnkqvovfQZ9SU1LzVhGp1av1q8+o66svVC9Rb1R9pEDQYGgkaFRrdGjOaqpoBmvmazZr3tfBaDK0krT1avVpz2jraEdpbtDu0J3XkdXx08nSadR7qknWddFfr1uve0sPoMfRS9Pbr3dCH9a30k/Rr9AcMYANrA67BfoNBQ7ShrSHPsN5w2Ihk5GKUZdRsNGpMM/Y3LjDuMH5homkSbbLTpNfkk6mVaappg+kDMxkzX7MCsy6z3831zVnmNea3LMgWnhbrLTotXloaWHIsD1jetaJYBVhtseq2+mhtY823brGestG0ibPZZzPMoDKCGKWMK7ZoW1fb9banbd/ZWdsJ7E7Y/WZvZJ9if9R+cqnOUs7ShqVjDuoOTIc6hxFHumOc40HHESc1J6ZTvdMTZw1ntnOj84SLnkuyyzGXF66mrnzXNtc5Nzu3tW7n3RF3L/di934PGY/lHtUejz3VPRM9mz1nvKy81nid90Z7+3nv9B72UfZh+TT5zPja+K717fEj+YX6Vfs98df35/t3BcABvgG7Ah4u01rGW9YRCAJ9AncFPgrSCVod9GMwJjgouCb4aYhZSH5IbyglNDb0aOibMNewsrAHy3WXC5d3h0uGx4Q3hc9FuEeUR4xEmkSujbwepRjFjeqMxkaHRzdGz67wWLF7xXiMVUxRzJ2VOitzVl5dpbgqddWZWMlYZuzJOHRcRNzRuA/MQGY9czbeJ35f/AzLjbWH9ZztzK5gT3EcOOWciQSHhPKEyUSHxF2JU0lOSZVJ01w3bjX3ZbJ3cm3yXEpgyuGUhdSI1NY0XFpc2imeDC+F15Oukp6TPphhkFGUMbLabvXu1TN8P35jJpS5MrNTQBX9TPUJdYWbhaNZjlk1WW+zw7NP5kjn8HL6cvVzt+VO5HnmfbsGtYa1pjtfLX9j/uhal7V166B18eu612usL1w/vsFrw5GNhI0pG38qMC0oL3i9KWJTV6Fy4YbCsc1em5uLJIr4RcNb7LfUbkVt5W7t32axbe+2T8Xs4mslpiWVJR9KWaXXvjH7puqbhe0J2/vLrMsO7MDs4O24s9Np55Fy6fK88rFdAbvaK+gVxRWvd8fuvlppWVm7h7BHuGekyr+qc6/m3h17P1QnVd+uca1p3ae0b9u+uf3s/UMHnA+01CrXltS+P8g9eLfOq669Xru+8hDmUNahpw3hDb3fMr5talRsLGn8eJh3eORIyJGeJpumpqNKR8ua4WZh89SxmGM3vnP/rrPFqKWuldZachwcFx5/9n3c93dO+J3oPsk42fKD1g/72ihtxe1Qe277TEdSx0hnVOfgKd9T3V32XW0/Gv94+LTa6ZozsmfKzhLOFp5dOJd3bvZ8xvnpC4kXxrpjux9cjLx4qye4p/+S36Urlz0vX+x16T13xeHK6at2V09dY1zruG59vb3Pqq/tJ6uf2vqt+9sHbAY6b9je6BpcOnh2yGnowk33m5dv+dy6fnvZ7cE7y+/cHY4ZHrnLvjt5L/Xey/tZ9+cfbHiIflj8SOpR5WOlx/U/6/3cOmI9cmbUfbTvSeiTB2Ossee/ZP7yYbzwKflp5YTqRNOk+eTpKc+pG89WPBt/nvF8frroV+lf973QffHDb86/9c1Ezoy/5L9c+L30lcKrw68tX3fPBs0+fpP2Zn6u+K3C2yPvGO9630e8n5jP/oD9UPVR72PXJ79PDxfSFhb+BQOY8/wldxZ1AAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfhAhAIKTq3THGZAAAJOElEQVRo3u2bfZDVZRXHP+feuy+wLC5ESokvIKKikKLGqJnmVDNoiKJpDmo2jJTZMDq+TEmpNb6MY6BClqEkA42og4qMAgmhpBItCJFCaAmIuaxissjbsrt3v/2x57f9uP1+9/7uXRZz5cwwP+7znOc85zlvz3me86yRByRhZrG/uyLs6zWG6Un6JnAmkPV/z5vZyk9iTZaHyROBwcAJQDcgBfwZ2AnMM7NsnJAklQFVQEMxQpSEz1UGbDczFRDk2cBhwFAg7TyuAv5lZn9MqsgAR9KRwOnAKd7VDLwBrDOz5SUKfSRwkys8DuYAD5rZokL8ShoL7AbKgZlA1nk/CxgGjAUGAgLeBJ4CXjGzFyXZ/8jUhY6ktKQ6tcEuSfWS1nvbdm9vlPS18LgcWsMdb1wJgnpc0mZJ3WIMA0kDJX3kc2yTtMl5/MB5C9oHx/EYQfM2H9cs6d9Oc5OkrKRWSa9LqiiCXoXLrhhYkksngn4YzvS2PySg/VIsXUnjHektSedKSkfgnC1pgeM9GUVMkknaIWlhkd4eLGx2nv57HWeWpNMj8KokjZS00fF+lWDO3znuBEn9c3BqJI31/nckfT7BWk6W9HGcBja/tlYbFi1TS3NTVPcHkqrz0N4dwj3LDT4pLGpfd2jx3/XOeQUsLvhOcvwFMcqfpHyuEU37MqdZFdM/JazMQuQlzXT8a/NEpy86zqMF1l3tQp9SYM4BiTQw7j5N63OFnh/zCzWs3xyFUhXD77YcIwngdUmX5uBOdQcMw9ioEPKPhAINvg/5uKF5wtIjRSi+XtKqXB48ggxzencWyeNaH2cxeHMkZRPS6pMAJ6wMZZtbIhXftGuXHu37Pc044mrNGPB9Lb1zWi7KUzEOFVZ8q3/nSkrF4Oca4lZJqQD5NaDRzI4GCiZDQb+Z/QDYAizLk7Sc58leXsG68RwCPJDLgyck84F6M5uQJGHzhAczGww0AS/HoB4LrE243g8LzHc70L4VvPzjR9hR92FeQ8EMWsVbDy7lrw/NCaOMljS8wDoNWGNm5wOtUbozs/XAT0JNBwGnpCQN9Kx4QomnhUuBbpLOiFjYfKAvcFQCwZ7kPxdHCGkUcDDwpSSGmaswYDpwgqSaCLSPgH5JokgBwy0DLg/a1sxcwMYnl2OpaF7XTnuBdMV//SFVnmblT5+hfvW6MNpzCaa/Lp8j+Jqe8ONjYCxVKT+yZYBni124468DGoERuUI3s6n+85ZCIdI9fYOZbYpAGwO8C2wtkcf5bundIsZfB9RIGl/q+d3H9Qgb+FszlkCreOma37Bjy95ev/S26fxt4nM5h2ko61FJ7S2zaM227zw17phxsBNYko9v79sCNISaj8m4wnab2dulLFjSZvea7jFo9wHXA1fmoTHIFTMkQnFpN86VZtZcolLmuMJPM7Onc87vtZKeBu6X9A6w0Mx2lXCZMyb4z476D9m6qo6y6koa3qhj9rCbqRrUi0y3MhpW1ZNOl2PpdGTg3r5+C03bdlLZuyfukIdK+mcMHx8nlElzyOMBqjJupZJ0r1+cFB3pPHwMiOmfCFwvaTwwOWYBk4A64L0IYWd8709Lur/E7WiP89ktJg+4SNJcz0m2SVoN3G5mLxZhABe2e/szi/cK4+lMGY3rd7QtprwiL5GWHU207tkr1zzWzJbEoJd86xcItQm4uEQa5iFnU0x/PfA2MNLMJkd4dHfgVGAB0JpHwP2AUR3gcYNHpqiIY2Z2vqQvAyOBS4DFHiUWAY8D0wrMcVj7mrKtJV+vmhl1K9YycOQZ4WSMPLItWfHvA33NrH+n3Am3Xe0+AdwS4zm9PHF7OI/SU8BTZnZVJ/Eo/9YCtcDPHHecZ8QPS5oMDDWzt2PW0RIOgR3h73NHHxFuai1g0CVBCvjA79U7DHGKM7MJoZCeC8/6XvVKXPTbHzxGJZxmNtUdYrjnMCslHRpDo/1IW3NUv5K9PlWeoqL3Xkv9e2cUblLAi0CVpF6dXCT6LfDDHAH3AE72wkIcZIGNwFBJGfYDRESE5aH84Pcxl0HtV8MDR3yFVHW6pLkre1dT3rN72NvrO0vxa4LkpNRzbEKYC1T4/XLgVeM841wRN7crYR0wCMh0Mo/5todGv2M4joiqpl8C7Qzajjz31KLnaW3KcvglJ5KpbE8AG2mrDnaK4lc4w2ODLLeTvGieK3mUn/EBzqOthLqxQAi+0b8zO1IrL3VtoTnfBXrG9DcC7dvV8DsuQ5mWojb8miF9GX7TFeGm6Wa2p1MUb2YtHmpPl3R5scqXdLyk4xOiB2f6AM4Bbk4g+CxwK3Cx150T8Ri6P/+RpH4xbwd6FyGvQcDWPMbRrrWK6mouevleMgeVo9bCdYWynpV847Ebcs/o13aWI6Y8jD3hYWy6pMOTPFzw77nAar8STAJBtnytpKm0PSKYnVCB93iiN1dSVRGPK8YAU4AHI3BOA94N1bXjaJkXQb4KLI/KtH2+LcDV7bckfXszesldHHx2f7K7myG3gJIVTQ27OOKSkxj96t10771XmvWdYq6nO3LXXClplVdwrswXIl0QlzvuBkmpuOpXxLg/SVot6X0/IhXDZx9/JNHs9/f5cHtI+qXz+GrMOnqF6vbfypFHGO8LoYcfxyRwiCdzS23vrXhDy26dqReumKR5375bi656QLX3zNL2+i1Rxbs78swRrs5NSyi3Cpd3ADfkImQk1YZesNwmqTx8fSrp1/4yR5Lml2BkN4YYGJ00lIWEWi6pwcfXSbo0bHSupBmhlzjTEtD+i+N+LOmaUPvRXrYNSqBnFrHN3KXS4IIC0WffKz4cAl14cfCYpBGlJkwBkQ5GqVGSFsfw1+KCH1qIx5BBXeB17Vxo9shxbAm5xWkhoyoEsyUNSMDv7ZImSrpf0oUJZZWR9HMfN9HfKhbOfiUNlnTCPtxa5Hf3+yRDl3SIpONyk8x9mRh1hJZHoVmS3vStcZN/1/hjlpokc8S8yNl/Z9oOjg9Cfa//B372t7x8qyoPHm5+WtbRUSGYpJc8iUxxAD4b4HtN3qz1AHRNxd+sLh3TDkBclrsn3zv3A9A1lR+8mT/ngDQ+O0r/up+taw9Io2sreoikJklLPbxL0qYuf2z5FEFnHanqgYdp+6vOhcD5tL1r7/J/Zv1pgf8AF8feNWSteGMAAAAASUVORK5CYII="},function(e,t,n){"use strict";function i(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Toolbar=t.ToolbarIcon=t.ToolbarMenuIcon=t.ToolbarFixedAdjust=t.ToolbarRow=t.ToolbarSection=t.ToolbarTitle=t.ToolbarRoot=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function e(t,n,i){null===t&&(t=Function.prototype);var c=Object.getOwnPropertyDescriptor(t,n);if(void 0===c){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in c)return c.value;var r=c.get;if(void 0!==r)return r.call(i)},s=n(0),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(s),d=n(58),g=n(3),I=n(1),b=n(5),p=t.ToolbarRoot=(0,I.simpleTag)({tag:"header",classNames:function(e){return["mdc-toolbar",{"mdc-toolbar--fixed":e.fixed,"mdc-toolbar--waterfall":e.waterfall,"mdc-toolbar--fixed-lastrow-only":e.fixedLastrowOnly,"mdc-toolbar--flexible":e.flexible,"mdc-toolbar--flexible-default-behavior":e.flexibleDefaultBehavior}]},defaultProps:{fixed:!1,waterfall:!1,fixedLastrowOnly:!1,flexible:!1,flexibleDefaultBehavior:!1},consumeProps:["fixed","waterfall","fixedLastrowOnly","flexible","flexibleDefaultBehavior"]}),C=(t.ToolbarTitle=(0,I.simpleTag)({displayName:"ToolbarTitle",classNames:"mdc-toolbar__title"}),t.ToolbarSection=function(e){function t(){return c(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),l(t,[{key:"render",value:function(){return o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this)}}]),t}((0,I.simpleTag)({tag:"section",classNames:function(e){return["mdc-toolbar__section",{"mdc-toolbar__section--align-start":e.alignStart,"mdc-toolbar__section--align-end":e.alignEnd,"mdc-toolbar__section--shrink-to-fit":e.shrinkToFit}]},defaultProps:{alignStart:!1,alignEnd:!1,shrinkToFit:!1},consumeProps:["alignStart","alignEnd","shrinkToFit"]})));Object.defineProperty(C,"displayName",{enumerable:!0,writable:!0,value:"ToolbarSection"});var m=(t.ToolbarRow=(0,I.simpleTag)({displayName:"ToolbarRow",classNames:"mdc-toolbar__row"}),t.ToolbarFixedAdjust=(0,I.simpleTag)({displayName:"ToolbarFixedAdjust",classNames:"mdc-toolbar-fixed-adjust"}),t.ToolbarMenuIcon=(0,I.simpleTag)({displayName:"ToolbarMenuIcon",tag:g.Icon,classNames:"mdc-toolbar__menu-icon"}),t.ToolbarIcon=(0,I.simpleTag)({displayName:"ToolbarIcon",tag:g.Icon,classNames:"mdc-toolbar__icon"}),t.Toolbar=function(e){function t(){return c(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),l(t,[{key:"componentDidMount",value:function(){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this),this.root_&&this.root_.nextSibling&&(this.root_.nextSibling.getAttribute("class")||"").includes("mdc-toolbar-fixed-adjust")&&(this.fixedAdjustElement=this.root_.nextSibling)}},{key:"render",value:function(){var e=i(this.props,[]),t=this.foundationRefs.root_;return u.createElement(p,Object.assign({elementRef:t},e))}}]),t}((0,b.withFoundation)({constructor:d.MDCToolbar,adapter:{}})));Object.defineProperty(m,"displayName",{enumerable:!0,writable:!0,value:"Toolbar"})},function(e,t,n){!function(t,n){e.exports=n()}(0,function(){return function(e){function t(i){if(n[i])return n[i].exports;var c=n[i]={i:i,l:!1,exports:{}};return e[i].call(c.exports,c,c.exports,t),c.l=!0,c.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=115)}({0:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.adapter_=t}return c(e,null,[{key:"cssClasses",get:function(){return{}}},{key:"strings",get:function(){return{}}},{key:"numbers",get:function(){return{}}},{key:"defaultAdapter",get:function(){return{}}}]),c(e,[{key:"init",value:function(){}},{key:"destroy",value:function(){}}]),e}();t.a=a},1:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=n(0),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;i(this,e),this.root_=t;for(var c=arguments.length,a=Array(c>2?c-2:0),r=2;r<c;r++)a[r-2]=arguments[r];this.initialize.apply(this,a),this.foundation_=void 0===n?this.getDefaultFoundation():n,this.foundation_.init(),this.initialSyncWithDOM()}return a(e,null,[{key:"attachTo",value:function(t){return new e(t,new c.a)}}]),a(e,[{key:"initialize",value:function(){}},{key:"getDefaultFoundation",value:function(){throw new Error("Subclasses must override getDefaultFoundation to return a properly configured foundation class")}},{key:"initialSyncWithDOM",value:function(){}},{key:"destroy",value:function(){this.foundation_.destroy()}},{key:"listen",value:function(e,t){this.root_.addEventListener(e,t)}},{key:"unlisten",value:function(e,t){this.root_.removeEventListener(e,t)}},{key:"emit",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=void 0;"function"===typeof CustomEvent?i=new CustomEvent(e,{detail:t,bubbles:n}):(i=document.createEvent("CustomEvent"),i.initCustomEvent(e,n,!1,t)),this.root_.dispatchEvent(i)}}]),e}();t.a=r},115:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"MDCToolbar",function(){return d});var r=n(7),l=n(4),o=n(116);n.d(t,"MDCToolbarFoundation",function(){return o.a});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function e(t,n,i){null===t&&(t=Function.prototype);var c=Object.getOwnPropertyDescriptor(t,n);if(void 0===c){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in c)return c.value;var r=c.get;if(void 0!==r)return r.call(i)},d=function(e){function t(){return i(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"initialize",value:function(){this.ripples_=[].map.call(this.root_.querySelectorAll(o.a.strings.ICON_SELECTOR),function(e){var t=l.MDCRipple.attachTo(e);return t.unbounded=!0,t})}},{key:"destroy",value:function(){this.ripples_.forEach(function(e){e.destroy()}),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"getDefaultFoundation",value:function(){var e=this;return new o.a({hasClass:function(t){return e.root_.classList.contains(t)},addClass:function(t){return e.root_.classList.add(t)},removeClass:function(t){return e.root_.classList.remove(t)},registerScrollHandler:function(e){return window.addEventListener("scroll",e)},deregisterScrollHandler:function(e){return window.removeEventListener("scroll",e)},registerResizeHandler:function(e){return window.addEventListener("resize",e)},deregisterResizeHandler:function(e){return window.removeEventListener("resize",e)},getViewportWidth:function(){return window.innerWidth},getViewportScrollY:function(){return window.pageYOffset},getOffsetHeight:function(){return e.root_.offsetHeight},getFirstRowElementOffsetHeight:function(){return e.firstRowElement_.offsetHeight},notifyChange:function(t){return e.emit(o.a.strings.CHANGE_EVENT,t)},setStyle:function(t,n){return e.root_.style.setProperty(t,n)},setStyleForTitleElement:function(t,n){return e.titleElement_.style.setProperty(t,n)},setStyleForFlexibleRowElement:function(t,n){return e.firstRowElement_.style.setProperty(t,n)},setStyleForFixedAdjustElement:function(t,n){e.fixedAdjustElement&&e.fixedAdjustElement.style.setProperty(t,n)}})}},{key:"firstRowElement_",get:function(){return this.root_.querySelector(o.a.strings.FIRST_ROW_SELECTOR)}},{key:"titleElement_",get:function(){return this.root_.querySelector(o.a.strings.TITLE_SELECTOR)}},{key:"fixedAdjustElement",set:function(e){this.fixedAdjustElement_=e,this.foundation_.updateAdjustElementStyles()},get:function(){return this.fixedAdjustElement_}}],[{key:"attachTo",value:function(e){return new t(e)}}]),t}(r.MDCComponent)},116:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(0),l=n(117),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(e){function t(e){i(this,t);var n=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,o(t.defaultAdapter,e)));return n.resizeHandler_=function(){return n.checkRowHeight_()},n.scrollHandler_=function(){return n.updateToolbarStyles_()},n.checkRowHeightFrame_=0,n.scrollFrame_=0,n.executedLastChange_=!1,n.calculations_={toolbarRowHeight:0,toolbarRatio:0,flexibleExpansionRatio:0,maxTranslateYRatio:0,scrollThresholdRatio:0,toolbarHeight:0,flexibleExpansionHeight:0,maxTranslateYDistance:0,scrollThreshold:0},n.fixed_=!1,n.fixedLastrow_=!1,n.hasFlexibleRow_=!1,n.useFlexDefaultBehavior_=!1,n}return a(t,e),s(t,null,[{key:"cssClasses",get:function(){return l.a}},{key:"strings",get:function(){return l.c}},{key:"numbers",get:function(){return l.b}},{key:"defaultAdapter",get:function(){return{hasClass:function(){return!1},addClass:function(){},removeClass:function(){},registerScrollHandler:function(){},deregisterScrollHandler:function(){},registerResizeHandler:function(){},deregisterResizeHandler:function(){},getViewportWidth:function(){return 0},getViewportScrollY:function(){return 0},getOffsetHeight:function(){return 0},getFirstRowElementOffsetHeight:function(){return 0},notifyChange:function(){},setStyle:function(){},setStyleForTitleElement:function(){},setStyleForFlexibleRowElement:function(){},setStyleForFixedAdjustElement:function(){}}}}]),s(t,[{key:"init",value:function(){this.fixed_=this.adapter_.hasClass(t.cssClasses.FIXED),this.fixedLastrow_=this.adapter_.hasClass(t.cssClasses.FIXED_LASTROW)&this.fixed_,this.hasFlexibleRow_=this.adapter_.hasClass(t.cssClasses.TOOLBAR_ROW_FLEXIBLE),this.hasFlexibleRow_&&(this.useFlexDefaultBehavior_=this.adapter_.hasClass(t.cssClasses.FLEXIBLE_DEFAULT_BEHAVIOR)),this.initKeyRatio_(),this.setKeyHeights_(),this.adapter_.registerResizeHandler(this.resizeHandler_),this.adapter_.registerScrollHandler(this.scrollHandler_)}},{key:"destroy",value:function(){this.adapter_.deregisterResizeHandler(this.resizeHandler_),this.adapter_.deregisterScrollHandler(this.scrollHandler_)}},{key:"updateAdjustElementStyles",value:function(){this.fixed_&&this.adapter_.setStyleForFixedAdjustElement("margin-top",this.calculations_.toolbarHeight+"px")}},{key:"getFlexibleExpansionRatio_",value:function(e){return Math.max(0,1-e/(this.calculations_.flexibleExpansionHeight+1e-4))}},{key:"checkRowHeight_",value:function(){var e=this;cancelAnimationFrame(this.checkRowHeightFrame_),this.checkRowHeightFrame_=requestAnimationFrame(function(){return e.setKeyHeights_()})}},{key:"setKeyHeights_",value:function(){var e=this.getRowHeight_();e!==this.calculations_.toolbarRowHeight&&(this.calculations_.toolbarRowHeight=e,this.calculations_.toolbarHeight=this.calculations_.toolbarRatio*this.calculations_.toolbarRowHeight,this.calculations_.flexibleExpansionHeight=this.calculations_.flexibleExpansionRatio*this.calculations_.toolbarRowHeight,this.calculations_.maxTranslateYDistance=this.calculations_.maxTranslateYRatio*this.calculations_.toolbarRowHeight,this.calculations_.scrollThreshold=this.calculations_.scrollThresholdRatio*this.calculations_.toolbarRowHeight,this.updateAdjustElementStyles(),this.updateToolbarStyles_())}},{key:"updateToolbarStyles_",value:function(){var e=this;cancelAnimationFrame(this.scrollFrame_),this.scrollFrame_=requestAnimationFrame(function(){var t=e.adapter_.getViewportScrollY(),n=e.scrolledOutOfThreshold_(t);if(!n||!e.executedLastChange_){var i=e.getFlexibleExpansionRatio_(t);e.updateToolbarFlexibleState_(i),e.fixedLastrow_&&e.updateToolbarFixedState_(t),e.hasFlexibleRow_&&e.updateFlexibleRowElementStyles_(i),e.executedLastChange_=n,e.adapter_.notifyChange({flexibleExpansionRatio:i})}})}},{key:"scrolledOutOfThreshold_",value:function(e){return e>this.calculations_.scrollThreshold}},{key:"initKeyRatio_",value:function(){var e=this.getRowHeight_(),t=this.adapter_.getFirstRowElementOffsetHeight()/e;this.calculations_.toolbarRatio=this.adapter_.getOffsetHeight()/e,this.calculations_.flexibleExpansionRatio=t-1,this.calculations_.maxTranslateYRatio=this.fixedLastrow_?this.calculations_.toolbarRatio-t:0,this.calculations_.scrollThresholdRatio=(this.fixedLastrow_?this.calculations_.toolbarRatio:t)-1}},{key:"getRowHeight_",value:function(){var e=t.numbers.TOOLBAR_MOBILE_BREAKPOINT;return this.adapter_.getViewportWidth()<e?t.numbers.TOOLBAR_ROW_MOBILE_HEIGHT:t.numbers.TOOLBAR_ROW_HEIGHT}},{key:"updateToolbarFlexibleState_",value:function(e){this.adapter_.removeClass(t.cssClasses.FLEXIBLE_MAX),this.adapter_.removeClass(t.cssClasses.FLEXIBLE_MIN),1===e?this.adapter_.addClass(t.cssClasses.FLEXIBLE_MAX):0===e&&this.adapter_.addClass(t.cssClasses.FLEXIBLE_MIN)}},{key:"updateToolbarFixedState_",value:function(e){var n=Math.max(0,Math.min(e-this.calculations_.flexibleExpansionHeight,this.calculations_.maxTranslateYDistance));this.adapter_.setStyle("transform","translateY("+-n+"px)"),n===this.calculations_.maxTranslateYDistance?this.adapter_.addClass(t.cssClasses.FIXED_AT_LAST_ROW):this.adapter_.removeClass(t.cssClasses.FIXED_AT_LAST_ROW)}},{key:"updateFlexibleRowElementStyles_",value:function(e){if(this.fixed_){var t=this.calculations_.flexibleExpansionHeight*e;this.adapter_.setStyleForFlexibleRowElement("height",t+this.calculations_.toolbarRowHeight+"px")}this.useFlexDefaultBehavior_&&this.updateElementStylesDefaultBehavior_(e)}},{key:"updateElementStylesDefaultBehavior_",value:function(e){var n=t.numbers.MAX_TITLE_SIZE,i=t.numbers.MIN_TITLE_SIZE,c=(n-i)*e+i;this.adapter_.setStyleForTitleElement("font-size",c+"rem")}}]),t}(r.a);t.a=u},117:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"c",function(){return c}),n.d(t,"b",function(){return a});var i={FIXED:"mdc-toolbar--fixed",FIXED_LASTROW:"mdc-toolbar--fixed-lastrow-only",FIXED_AT_LAST_ROW:"mdc-toolbar--fixed-at-last-row",TOOLBAR_ROW_FLEXIBLE:"mdc-toolbar--flexible",FLEXIBLE_DEFAULT_BEHAVIOR:"mdc-toolbar--flexible-default-behavior",FLEXIBLE_MAX:"mdc-toolbar--flexible-space-maximized",FLEXIBLE_MIN:"mdc-toolbar--flexible-space-minimized"},c={TITLE_SELECTOR:".mdc-toolbar__title",ICON_SELECTOR:".mdc-toolbar__icon",FIRST_ROW_SELECTOR:".mdc-toolbar__row:first-child",CHANGE_EVENT:"MDCToolbar:change"},a={MAX_TITLE_SIZE:2.125,MIN_TITLE_SIZE:1.25,TOOLBAR_ROW_HEIGHT:64,TOOLBAR_ROW_MOBILE_HEIGHT:56,TOOLBAR_MOBILE_BREAKPOINT:600}},2:function(e,t,n){"use strict";function i(e){var t=e.document,n=t.createElement("div");n.className="mdc-ripple-surface--test-edge-var-bug",t.body.appendChild(n);var i=e.getComputedStyle(n),c=null!==i&&"solid"===i.borderTopStyle;return n.remove(),c}function c(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=o;if("boolean"===typeof o&&!t)return n;if(e.CSS&&"function"===typeof e.CSS.supports){var c=e.CSS.supports("--css-vars","yes"),a=e.CSS.supports("(--css-vars: yes)")&&e.CSS.supports("color","#00000000");return n=!(!c&&!a)&&!i(e),t||(o=n),n}}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(void 0===s||t){var n=!1;try{e.document.addEventListener("test",null,{get passive(){n=!0}})}catch(e){}s=n}return!!s&&{passive:!0}}function r(e){return["webkitMatchesSelector","msMatchesSelector","matches"].filter(function(t){return t in e}).pop()}function l(e,t,n){var i=t.x,c=t.y,a=i+n.left,r=c+n.top,l=void 0,o=void 0;return"touchstart"===e.type?(l=e.changedTouches[0].pageX-a,o=e.changedTouches[0].pageY-r):(l=e.pageX-a,o=e.pageY-r),{x:l,y:o}}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"supportsCssVariables",function(){return c}),n.d(t,"applyPassive",function(){return a}),n.d(t,"getMatchesProperty",function(){return r}),n.d(t,"getNormalizedEventCoords",function(){return l});var o=void 0,s=void 0},3:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();!function(){function e(){i(this,e)}c(e,[{key:"browserSupportsCssVars",value:function(){}},{key:"isUnbounded",value:function(){}},{key:"isSurfaceActive",value:function(){}},{key:"isSurfaceDisabled",value:function(){}},{key:"addClass",value:function(e){}},{key:"removeClass",value:function(e){}},{key:"containsEventTarget",value:function(e){}},{key:"registerInteractionHandler",value:function(e,t){}},{key:"deregisterInteractionHandler",value:function(e,t){}},{key:"registerDocumentInteractionHandler",value:function(e,t){}},{key:"deregisterDocumentInteractionHandler",value:function(e,t){}},{key:"registerResizeHandler",value:function(e){}},{key:"deregisterResizeHandler",value:function(e){}},{key:"updateCssVariable",value:function(e,t){}},{key:"computeBoundingRect",value:function(){}},{key:"getWindowPageOffset",value:function(){}}])}()},4:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"MDCRipple",function(){return u}),n.d(t,"RippleCapableSurface",function(){return d});var r=n(1),l=(n(3),n(5)),o=n(2);n.d(t,"MDCRippleFoundation",function(){return l.a}),n.d(t,"util",function(){return o});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(e){function t(){var e;i(this,t);for(var n=arguments.length,a=Array(n),r=0;r<n;r++)a[r]=arguments[r];var l=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a)));return l.disabled=!1,l.unbounded_,l}return a(t,e),s(t,[{key:"setUnbounded_",value:function(){this.foundation_.setUnbounded(this.unbounded_)}},{key:"activate",value:function(){this.foundation_.activate()}},{key:"deactivate",value:function(){this.foundation_.deactivate()}},{key:"layout",value:function(){this.foundation_.layout()}},{key:"getDefaultFoundation",value:function(){return new l.a(t.createAdapter(this))}},{key:"initialSyncWithDOM",value:function(){this.unbounded="mdcRippleIsUnbounded"in this.root_.dataset}},{key:"unbounded",get:function(){return this.unbounded_},set:function(e){this.unbounded_=Boolean(e),this.setUnbounded_()}}],[{key:"attachTo",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.isUnbounded,c=void 0===i?void 0:i,a=new t(e);return void 0!==c&&(a.unbounded=c),a}},{key:"createAdapter",value:function(e){var t=o.getMatchesProperty(HTMLElement.prototype);return{browserSupportsCssVars:function(){return o.supportsCssVariables(window)},isUnbounded:function(){return e.unbounded},isSurfaceActive:function(){return e.root_[t](":active")},isSurfaceDisabled:function(){return e.disabled},addClass:function(t){return e.root_.classList.add(t)},removeClass:function(t){return e.root_.classList.remove(t)},containsEventTarget:function(t){return e.root_.contains(t)},registerInteractionHandler:function(t,n){return e.root_.addEventListener(t,n,o.applyPassive())},deregisterInteractionHandler:function(t,n){return e.root_.removeEventListener(t,n,o.applyPassive())},registerDocumentInteractionHandler:function(e,t){return document.documentElement.addEventListener(e,t,o.applyPassive())},deregisterDocumentInteractionHandler:function(e,t){return document.documentElement.removeEventListener(e,t,o.applyPassive())},registerResizeHandler:function(e){return window.addEventListener("resize",e)},deregisterResizeHandler:function(e){return window.removeEventListener("resize",e)},updateCssVariable:function(t,n){return e.root_.style.setProperty(t,n)},computeBoundingRect:function(){return e.root_.getBoundingClientRect()},getWindowPageOffset:function(){return{x:window.pageXOffset,y:window.pageYOffset}}}}}]),t}(r.a),d=function e(){i(this,e)};d.prototype.root_,d.prototype.unbounded,d.prototype.disabled},5:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(0),l=(n(3),n(6)),o=n(2),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=["touchstart","pointerdown","mousedown","keydown"],g=["touchend","pointerup","mouseup"],I=[],b=function(e){function t(e){i(this,t);var n=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,s(t.defaultAdapter,e)));return n.layoutFrame_=0,n.frame_={width:0,height:0},n.activationState_=n.defaultActivationState_(),n.initialSize_=0,n.maxRadius_=0,n.activateHandler_=function(e){return n.activate_(e)},n.deactivateHandler_=function(e){return n.deactivate_(e)},n.focusHandler_=function(){return n.handleFocus()},n.blurHandler_=function(){return n.handleBlur()},n.resizeHandler_=function(){return n.layout()},n.unboundedCoords_={left:0,top:0},n.fgScale_=0,n.activationTimer_=0,n.fgDeactivationRemovalTimer_=0,n.activationAnimationHasEnded_=!1,n.activationTimerCallback_=function(){n.activationAnimationHasEnded_=!0,n.runDeactivationUXLogicIfReady_()},n.previousActivationEvent_=null,n}return a(t,e),u(t,null,[{key:"cssClasses",get:function(){return l.a}},{key:"strings",get:function(){return l.c}},{key:"numbers",get:function(){return l.b}},{key:"defaultAdapter",get:function(){return{browserSupportsCssVars:function(){},isUnbounded:function(){},isSurfaceActive:function(){},isSurfaceDisabled:function(){},addClass:function(){},removeClass:function(){},containsEventTarget:function(){},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){},registerDocumentInteractionHandler:function(){},deregisterDocumentInteractionHandler:function(){},registerResizeHandler:function(){},deregisterResizeHandler:function(){},updateCssVariable:function(){},computeBoundingRect:function(){},getWindowPageOffset:function(){}}}}]),u(t,[{key:"isSupported_",value:function(){return this.adapter_.browserSupportsCssVars()}},{key:"defaultActivationState_",value:function(){return{isActivated:!1,hasDeactivationUXRun:!1,wasActivatedByPointer:!1,wasElementMadeActive:!1,activationEvent:null,isProgrammatic:!1}}},{key:"init",value:function(){var e=this;if(this.isSupported_()){this.registerRootHandlers_();var n=t.cssClasses,i=n.ROOT,c=n.UNBOUNDED;requestAnimationFrame(function(){e.adapter_.addClass(i),e.adapter_.isUnbounded()&&(e.adapter_.addClass(c),e.layoutInternal_())})}}},{key:"destroy",value:function(){var e=this;if(this.isSupported_()){if(this.activationTimer_){clearTimeout(this.activationTimer_),this.activationTimer_=0;var n=t.cssClasses.FG_ACTIVATION;this.adapter_.removeClass(n)}this.deregisterRootHandlers_(),this.deregisterDeactivationHandlers_();var i=t.cssClasses,c=i.ROOT,a=i.UNBOUNDED;requestAnimationFrame(function(){e.adapter_.removeClass(c),e.adapter_.removeClass(a),e.removeCssVars_()})}}},{key:"registerRootHandlers_",value:function(){var e=this;d.forEach(function(t){e.adapter_.registerInteractionHandler(t,e.activateHandler_)}),this.adapter_.registerInteractionHandler("focus",this.focusHandler_),this.adapter_.registerInteractionHandler("blur",this.blurHandler_),this.adapter_.isUnbounded()&&this.adapter_.registerResizeHandler(this.resizeHandler_)}},{key:"registerDeactivationHandlers_",value:function(e){var t=this;"keydown"===e.type?this.adapter_.registerInteractionHandler("keyup",this.deactivateHandler_):g.forEach(function(e){t.adapter_.registerDocumentInteractionHandler(e,t.deactivateHandler_)})}},{key:"deregisterRootHandlers_",value:function(){var e=this;d.forEach(function(t){e.adapter_.deregisterInteractionHandler(t,e.activateHandler_)}),this.adapter_.deregisterInteractionHandler("focus",this.focusHandler_),this.adapter_.deregisterInteractionHandler("blur",this.blurHandler_),this.adapter_.isUnbounded()&&this.adapter_.deregisterResizeHandler(this.resizeHandler_)}},{key:"deregisterDeactivationHandlers_",value:function(){var e=this;this.adapter_.deregisterInteractionHandler("keyup",this.deactivateHandler_),g.forEach(function(t){e.adapter_.deregisterDocumentInteractionHandler(t,e.deactivateHandler_)})}},{key:"removeCssVars_",value:function(){var e=this,n=t.strings;Object.keys(n).forEach(function(t){0===t.indexOf("VAR_")&&e.adapter_.updateCssVariable(n[t],null)})}},{key:"activate_",value:function(e){var t=this;if(!this.adapter_.isSurfaceDisabled()){var n=this.activationState_;if(!n.isActivated){var i=this.previousActivationEvent_;if(!(i&&e&&i.type!==e.type)){n.isActivated=!0,n.isProgrammatic=null===e,n.activationEvent=e,n.wasActivatedByPointer=!n.isProgrammatic&&("mousedown"===e.type||"touchstart"===e.type||"pointerdown"===e.type);if(e&&I.length>0&&I.some(function(e){return t.adapter_.containsEventTarget(e)}))return void this.resetActivationState_();e&&(I.push(e.target),this.registerDeactivationHandlers_(e)),n.wasElementMadeActive=this.checkElementMadeActive_(e),n.wasElementMadeActive&&this.animateActivation_(),requestAnimationFrame(function(){I=[],n.wasElementMadeActive||" "!==e.key&&32!==e.keyCode||(n.wasElementMadeActive=t.checkElementMadeActive_(e),n.wasElementMadeActive&&t.animateActivation_()),n.wasElementMadeActive||(t.activationState_=t.defaultActivationState_())})}}}}},{key:"checkElementMadeActive_",value:function(e){return!e||"keydown"!==e.type||this.adapter_.isSurfaceActive()}},{key:"activate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.activate_(e)}},{key:"animateActivation_",value:function(){var e=this,n=t.strings,i=n.VAR_FG_TRANSLATE_START,c=n.VAR_FG_TRANSLATE_END,a=t.cssClasses,r=a.FG_DEACTIVATION,l=a.FG_ACTIVATION,o=t.numbers.DEACTIVATION_TIMEOUT_MS;this.layoutInternal_();var s="",u="";if(!this.adapter_.isUnbounded()){var d=this.getFgTranslationCoordinates_(),g=d.startPoint,I=d.endPoint;s=g.x+"px, "+g.y+"px",u=I.x+"px, "+I.y+"px"}this.adapter_.updateCssVariable(i,s),this.adapter_.updateCssVariable(c,u),clearTimeout(this.activationTimer_),clearTimeout(this.fgDeactivationRemovalTimer_),this.rmBoundedActivationClasses_(),this.adapter_.removeClass(r),this.adapter_.computeBoundingRect(),this.adapter_.addClass(l),this.activationTimer_=setTimeout(function(){return e.activationTimerCallback_()},o)}},{key:"getFgTranslationCoordinates_",value:function(){var e=this.activationState_,t=e.activationEvent,n=e.wasActivatedByPointer,i=void 0;return i=n?Object(o.getNormalizedEventCoords)(t,this.adapter_.getWindowPageOffset(),this.adapter_.computeBoundingRect()):{x:this.frame_.width/2,y:this.frame_.height/2},i={x:i.x-this.initialSize_/2,y:i.y-this.initialSize_/2},{startPoint:i,endPoint:{x:this.frame_.width/2-this.initialSize_/2,y:this.frame_.height/2-this.initialSize_/2}}}},{key:"runDeactivationUXLogicIfReady_",value:function(){var e=this,n=t.cssClasses.FG_DEACTIVATION,i=this.activationState_,c=i.hasDeactivationUXRun,a=i.isActivated;(c||!a)&&this.activationAnimationHasEnded_&&(this.rmBoundedActivationClasses_(),this.adapter_.addClass(n),this.fgDeactivationRemovalTimer_=setTimeout(function(){e.adapter_.removeClass(n)},l.b.FG_DEACTIVATION_MS))}},{key:"rmBoundedActivationClasses_",value:function(){var e=t.cssClasses.FG_ACTIVATION;this.adapter_.removeClass(e),this.activationAnimationHasEnded_=!1,this.adapter_.computeBoundingRect()}},{key:"resetActivationState_",value:function(){var e=this;this.previousActivationEvent_=this.activationState_.activationEvent,this.activationState_=this.defaultActivationState_(),setTimeout(function(){return e.previousActivationEvent_=null},t.numbers.TAP_DELAY_MS)}},{key:"deactivate_",value:function(e){var t=this,n=this.activationState_;if(n.isActivated){var i=s({},n);if(n.isProgrammatic){requestAnimationFrame(function(){return t.animateDeactivation_(null,i)}),this.resetActivationState_()}else this.deregisterDeactivationHandlers_(),requestAnimationFrame(function(){t.activationState_.hasDeactivationUXRun=!0,t.animateDeactivation_(e,i),t.resetActivationState_()})}}},{key:"deactivate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.deactivate_(e)}},{key:"animateDeactivation_",value:function(e,t){var n=t.wasActivatedByPointer,i=t.wasElementMadeActive;(n||i)&&this.runDeactivationUXLogicIfReady_()}},{key:"layout",value:function(){var e=this;this.layoutFrame_&&cancelAnimationFrame(this.layoutFrame_),this.layoutFrame_=requestAnimationFrame(function(){e.layoutInternal_(),e.layoutFrame_=0})}},{key:"layoutInternal_",value:function(){var e=this;this.frame_=this.adapter_.computeBoundingRect();var n=Math.max(this.frame_.height,this.frame_.width);this.maxRadius_=this.adapter_.isUnbounded()?n:function(){return Math.sqrt(Math.pow(e.frame_.width,2)+Math.pow(e.frame_.height,2))+t.numbers.PADDING}(),this.initialSize_=n*t.numbers.INITIAL_ORIGIN_SCALE,this.fgScale_=this.maxRadius_/this.initialSize_,this.updateLayoutCssVars_()}},{key:"updateLayoutCssVars_",value:function(){var e=t.strings,n=e.VAR_FG_SIZE,i=e.VAR_LEFT,c=e.VAR_TOP,a=e.VAR_FG_SCALE;this.adapter_.updateCssVariable(n,this.initialSize_+"px"),this.adapter_.updateCssVariable(a,this.fgScale_),this.adapter_.isUnbounded()&&(this.unboundedCoords_={left:Math.round(this.frame_.width/2-this.initialSize_/2),top:Math.round(this.frame_.height/2-this.initialSize_/2)},this.adapter_.updateCssVariable(i,this.unboundedCoords_.left+"px"),this.adapter_.updateCssVariable(c,this.unboundedCoords_.top+"px"))}},{key:"setUnbounded",value:function(e){var n=t.cssClasses.UNBOUNDED;e?this.adapter_.addClass(n):this.adapter_.removeClass(n)}},{key:"handleFocus",value:function(){var e=this;requestAnimationFrame(function(){return e.adapter_.addClass(t.cssClasses.BG_FOCUSED)})}},{key:"handleBlur",value:function(){var e=this;requestAnimationFrame(function(){return e.adapter_.removeClass(t.cssClasses.BG_FOCUSED)})}}]),t}(r.a);t.a=b},6:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"c",function(){return c}),n.d(t,"b",function(){return a});var i={ROOT:"mdc-ripple-upgraded",UNBOUNDED:"mdc-ripple-upgraded--unbounded",BG_FOCUSED:"mdc-ripple-upgraded--background-focused",FG_ACTIVATION:"mdc-ripple-upgraded--foreground-activation",FG_DEACTIVATION:"mdc-ripple-upgraded--foreground-deactivation"},c={VAR_LEFT:"--mdc-ripple-left",VAR_TOP:"--mdc-ripple-top",VAR_FG_SIZE:"--mdc-ripple-fg-size",VAR_FG_SCALE:"--mdc-ripple-fg-scale",VAR_FG_TRANSLATE_START:"--mdc-ripple-fg-translate-start",VAR_FG_TRANSLATE_END:"--mdc-ripple-fg-translate-end"},a={PADDING:10,INITIAL_ORIGIN_SCALE:.6,DEACTIVATION_TIMEOUT_MS:225,FG_DEACTIVATION_MS:150,TAP_DELAY_MS:300}},7:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),c=n(1);n.d(t,"MDCFoundation",function(){return i.a}),n.d(t,"MDCComponent",function(){return c.a})}})})},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function c(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Button=t.ButtonIcon=t.ButtonRoot=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(0),u=i(s),d=n(6),g=i(d),I=n(14),b=n(1),p=n(3),C=t.ButtonRoot=(0,b.withRipple)({surface:!1})((0,b.simpleTag)({displayName:"ButtonRoot",tag:"button",defaultProps:{dense:!1,raised:!1,unelevated:!1,outlined:!1},consumeProps:["dense","raised","unelevated","outlined","primary","accent","unbounded"],classNames:function(e){return["mdc-button",{"mdc-button--dense":e.dense,"mdc-button--raised":e.raised,"mdc-button--unelevated":e.unelevated,"mdc-button--outlined":e.outlined}]}})),m=(t.ButtonIcon=(0,b.simpleTag)({displayName:"ButtonIcon",tag:p.Icon,classNames:"mdc-button__icon"}),t.Button=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),o(t,[{key:"componentWillMount",value:function(){this.providerOptions=(0,I.getProviderOptions)(this.context)}},{key:"render",value:function(){var e=this.providerOptions.buttonDefaultRipple,t=this.props,n=t.ripple,i=c(t,["ripple"]),a=void 0===n?e:n;return u.createElement(C,Object.assign({ripple:a},i))}}]),t}(u.Component));Object.defineProperty(m,"defaultProps",{enumerable:!0,writable:!0,value:{ripple:!0,raised:!1,unelevated:!1,outlined:!1,dense:!1}}),Object.defineProperty(m,"contextTypes",{enumerable:!0,writable:!0,value:{RMWCOptions:g.object}}),t.default=m},function(e,t){},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(0),l=n.n(r),o=n(62),s=(n.n(o),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),u=function(e){function t(){return i(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){var e=this;return l.a.createElement("video",{className:"Video",ref:function(t){return e.video=t}})}},{key:"video",set:function(e){e.srcObject=this.props.src,e.play()}}]),t}(r.Component);t.a=u},function(e,t){},function(e,t){},function(e,t,n){"use strict";function i(){if("serviceWorker"in navigator){if(new URL("/react-web-gui-example",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="/react-web-gui-example/service-worker.js";r?(a(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):c(e)})}}function c(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}function a(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):c(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}t.a=i;var r=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/))}]);
//# sourceMappingURL=main.85dda7aa.js.map